const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lyr3DWorker-CBolJ7Ih.js","assets/_commonjsHelpers-DCkdB7M8.js"])))=>i.map(i=>d[i]);
import{_ as f,hw as d,ig as u}from"./index-Btyj_e22.js";function h(){return new Promise(s=>f(()=>import("./lyr3DWorker-CBolJ7Ih.js"),__vite__mapDeps([0,1])).then(t=>t.l).then(({default:t})=>{const i=t({locateFile:_,onRuntimeInitialized:()=>s(i)})})).catch(s=>{throw s})}function _(s){return d(`esri/libs/lyr3d/${s}`)}let o,n;async function w(s){await g();const t={status:u.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(s.inputs.length<1)return{result:t,transferList:[]};const i={ptrs:[],sizes:[]};for(const e of s.inputs){const p=n._malloc(e.byteLength);new Uint8Array(n.HEAPU8.buffer,p,e.byteLength).set(new Uint8Array(e)),i.ptrs.push(p),i.sizes.push(e.byteLength)}const r=n.process(s.jobDescJson,s.id,i,s.isMissingResourceCase);t.status=r.status,t.missingInputUrls=r.missingInputUrls.slice();const l=r.status===u.Succeeded&&r.data,c=t.status===u.MissingInputs&&t.missingInputUrls.length>0;t.jobDescJson=r.jobDescJson.slice(),t.error=r.error.slice(),l?t.data=r.data.slice():c&&(t.originalInputs=s.inputs.slice());for(let e=0;e<i.ptrs.length;++e)n._free(i.ptrs[e]);const a=[];if(l)a.push(t.data.buffer);else if(c)for(const e of s.inputs)a.push(e);return{result:t,transferList:a}}function y(){n&&(n.uninitialize_lyr3d_worker_wasm(),n=null)}function g(){return n?Promise.resolve():(o||(o=h().then(s=>{n=s,n.initialize_lyr3d_worker_wasm(),o=null})),o)}export{y as destroyWasm,g as initialize,w as process};
