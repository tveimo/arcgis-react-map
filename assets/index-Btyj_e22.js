const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/statsWorker-B6gj0rr-.js","assets/utils-isg7vTDt.js","assets/utils-BtJq9HTN.js","assets/ClassBreaksDefinition-BOTSUbEt.js","assets/geometryEngineWorker-nssR-Guw.js","assets/geometryEngineJSON-BVpgM-_G.js","assets/geometryEngineBase-E1PPqbft.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-CFmlUdg5.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-Bd9Ncgqr.js","assets/executeQueryForSnapping-Ym8qDl11.js","assets/queryUtils-CrxIK-y_.js","assets/QueryEngine-er9eIDpv.js","assets/featureConversionUtils-3V6t1IaM.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/WhereClauseCache-dRR1b2KG.js","assets/WhereClause-C_VIqrIN.js","assets/timeSupport-CJD1UOVE.js","assets/QueryEngineCapabilities-CsRUnGk7.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-CBsXBMic.js","assets/FeatureStore-BHDc5BKw.js","assets/BoundsStore-CG2UJ0Tk.js","assets/PooledRBush-B5vZF8R2.js","assets/optimizedFeatureQueryEngineAdapter-B96fvoHO.js","assets/number-CMuq1Z5d.js","assets/clientSideDefaults-Cr2LxSPM.js","assets/EdgeProcessingWorker-B3p4FNa8.js","assets/workerHelper-DPJFmq8g.js","assets/InterleavedLayout-C_iHOV72.js","assets/BufferView-CYbRrMZQ.js","assets/types-BKo2foNY.js","assets/edgeProcessing-bF8PPCEN.js","assets/deduplicate-Dl3YaKLF.js","assets/Indices-LFDuyM-C.js","assets/VertexAttribute-B3BTnNfN.js","assets/glUtil-yUsI6eag.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-Bg756jHt.js","assets/ElevationSamplerWorker-Bf5ZZC87.js","assets/MeshLocalVertexSpace-DXtjzQmS.js","assets/vertexSpaceConversion-Bv1pfd9X.js","assets/mat3f64-B5o_lm6j.js","assets/mat4f64-q_b6UJoq.js","assets/spatialReferenceEllipsoidUtils-hAdzTDsD.js","assets/computeTranslationToOriginAndRotation-D9omgdEo.js","assets/projectPointToVector-BK33IwoO.js","assets/meshVertexSpaceUtils-CHeQiXId.js","assets/vec3-CDGT5FW5.js","assets/vec4-DrvDLRUl.js","assets/FeatureServiceSnappingSourceWorker-DBh1ZT7M.js","assets/symbologySnappingCandidates-Dev-BiuT.js","assets/pbfQueryUtils-rtYdziuZ.js","assets/pbf-nIFiWyE0.js","assets/query-DU102Gub.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/GeoJSONSourceWorker-Bqt9jFTS.js","assets/geojson-D-jn7uPI.js","assets/sourceUtils-5K6ABCHz.js","assets/MemorySourceWorker-C3Q_u40H.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-BR5XT9cI.js","assets/dehydratedFeatures-Dtrs1gyH.js","assets/FeaturePipelineWorker-Clj3pqq_.js","assets/AttributeStore-DtyyHX_9.js","assets/Utils-C9fv26Zt.js","assets/UpdateTracking2D-Cn29psoB.js","assets/constants-BFLErLYb.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-CM8BKd6p.js","assets/TechniqueType-CFPo0AVB.js","assets/PieChartMeshWriter-t33tMoG8.js","assets/libtess-DuUa0LEu.js","assets/earcut-D9gy186-.js","assets/QueueProcessor-D8t1B8KS.js","assets/operatorGeodeticDensify-CQ5sMP-v.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-BMiELP9N.js","assets/ogcFeatureUtils-CrTF-jdY.js","assets/bundle-D2hyHz7d.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-CeT7nddQ.js","assets/PointCloudWorker-CDstQUPp.js","assets/quat-CAuRaFQ1.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-24rRUyMM.js","assets/I3SBinaryReader-Bk4nypIJ.js","assets/orientedBoundingBox-M3P743N3.js","assets/plane-DLQjn7Jn.js","assets/vectorStacks-D7GRVTeg.js","assets/RasterWorker-BUKGMRj0.js","assets/GeographicTransformation-3xk6Tel-.js","assets/dataUtils-rsF-nyTt.js","assets/RasterSymbolizer-DpgRq1Tc.js","assets/rasterFunctionHelper-D9yj7Xz6.js","assets/clipUtils-D5e8JRd4.js","assets/rasterProjectionHelper-BcJDtAyh.js","assets/PolynomialTransform-CrQBo5FY.js","assets/SceneLayerSnappingSourceWorker-CgUmh-bb.js","assets/lineSegment-DHEglvBo.js","assets/sphere-BWM9spN1.js","assets/Octree-DkPLZBSP.js","assets/frustum-By6vgkJi.js","assets/SceneLayerWorker-B63xdVka.js","assets/projectVectorToVector-DR1g-LQg.js","assets/I3SUtil-BkeOw7Up.js","assets/edgeUtils-DAl0OIMy.js","assets/NormalAttribute.glsl-CYb2PrmX.js","assets/glsl-Cj7KC756.js","assets/ShaderOutput-Bdd80V3g.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-BxENYUh0.js","assets/wfsUtils-DbuDLNfF.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-C6GfJK0V.js","assets/constants-B-jzO-JJ.js","assets/config-DHajyIwB.js","assets/StyleDefinition-CHGqOOZH.js","assets/SourceLayerData-CYUvhoG7.js","assets/StyleRepository-DXQNjg2x.js","assets/Feature3DPipelineWorker-CnbacfJO.js","assets/dehydratedFeatureUtils-BXMEI8JF.js","assets/hydratedFeatures-DrQB8grU.js","assets/OutputColorHighlightOID.glsl-BhrI3wMp.js","assets/videoUtils-BqsT1Kqk.js","assets/requestImageUtils-DBfEj-WJ.js","assets/basicInterfaces-CZwQPxTp.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-CViB-VLO.js","assets/renderState-CUj6RqJo.js","assets/boundedPlane-D6wSQhuV.js","assets/IntersectorType-gQim6TH1.js","assets/HUDMaterial.glsl-CtOLFx_c.js","assets/ShaderBuilder-Cpl7q9Oj.js","assets/HUDMaterial-Bzt-sSBi.js","assets/primitiveObjectSymbolUtils-CXTUQdAU.js","assets/RealisticTree.glsl-Cn124tZ4.js","assets/TextureCompressionWorker-DRyDXkSo.js","assets/Popup-DLrcQCae.js","assets/unitFormatUtils-DDltYdRb.js","assets/quantityUtils-CGixpcrU.js","assets/AttachmentInfo-CzShsETk.js","assets/featureUtils-Dfz6_vDg.js","assets/executeQueryJSON-C-VivJzQ.js","assets/shared-CKfpLWOj.js","assets/ReactiveSet-C25TrUyb.js","assets/ElevationLayer-CqqA-gDl.js","assets/ArcGISCachedService-DXNYp-f0.js","assets/TileInfoTilemapCache-DSVbnkch.js","assets/TilemapCache-DPBg1WoD.js","assets/WorkerHandle-DJf_Z4VL.js","assets/layersCreator-Dm4dyLCS.js","assets/loadUtils-Bb0-_Mdy.js","assets/fetchService-Cqs3r9_l.js","assets/associatedFeatureServiceUtils-CCLPDrLN.js","assets/lazyLayerLoader-Q_7aIVoi.js","assets/portalLayers-rkVZs1xz.js","assets/arcgisLayers-Obhycpq3.js","assets/arcadeUtils-DO91Pasp.js","assets/arcade-mfJcdyOF.js","assets/aiServices-MuyzOyn5.js","assets/ImmutableArray-BPVd6ESQ.js","assets/unitConversion-COhzYjmD.js","assets/batchExec-qbq5e7Es.js","assets/webglDeps-Dzf_VUVT.js","assets/ProgramTemplate-uxhqcgRI.js","assets/FramebufferObject-CqAHZCWA.js","assets/NestedMap-C3hRTnZR.js","assets/mapViewDeps-BuSgj_b4.js","assets/FeatureCommandQueue-D3iWA-8t.js","assets/GraphShaderModule-lmeYV97K.js","assets/utils-CcYokxyU.js","assets/WGLContainer-Beai6YF6.js","assets/Container-CSbQovvF.js","assets/SDFHelper-CfDF8Uk3.js","assets/GridShader-Bhsr2s5q.js","assets/testSVGPremultipliedAlpha-CzXkWmZj.js","assets/SymbolFader-CqWixznr.js","assets/RenderingContext-BMv8qrm6.js","assets/utils-CCZ53j4g.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-BSSRCF17.js","assets/GraphicContainer-6HaVp8Ww.js","assets/AGraphicContainer-ByYNlgHR.js","assets/TechniqueInstance-CWk3ooPV.js","assets/TileContainer-BaZ-5CFi.js","assets/gridUtils-DRWA5LJe.js","assets/geodesicUtils-1jvsjlm_.js","assets/TileLayerView2D-DEqS4YVW.js","assets/imageUtils-Dc3zLUc0.js","assets/BitmapTechnique-Dd9otuGN.js","assets/LayerView-zTmvCAJ1.js","assets/HighlightGraphicContainer-CW3xeF5Y.js","assets/RefreshableLayerView-Dlf-c_Vy.js","assets/MapServiceLayerViewHelper-BIb17Z6b.js","assets/drapedUtils-DwdF_0MW.js","assets/popupUtils-8Qptwq56.js","assets/FeatureLayerView2D-FpJbDpCl.js","assets/timeSupport-fsVsd3eo.js","assets/AttributeBinsFeatureSet-DTr5WwfZ.js","assets/AttributeBinsQuery-BNJ1eaiH.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-Cl-3X_5G.js","assets/BitmapContainer-CK4cm6fQ.js","assets/ExportStrategy-CTZkQEHS.js","assets/CatalogLayerView2D-BbGghhRp.js","assets/CatalogDynamicGroupLayerView2D-C5ubLdw5.js","assets/CatalogFootprintLayerView2D-BqvOHS_5.js","assets/GeoRSSLayerView2D-CbMaT_MU.js","assets/GraphicsLayerView2D-pI13lkft.js","assets/GroupLayerView2D-D2U-7Lcb.js","assets/ImageryLayerView2D-6lD-V_xa.js","assets/RasterVFDisplayObject-FSRQ6mhp.js","assets/ImageryTileLayerView2D-BCrN4E4F.js","assets/rasterFieldUtils-DZk1oIoz.js","assets/rasterUtils-BHUwARGr.js","assets/RawBlockCache-BpOWsUvl.js","assets/KMLLayerView2D-jOSi_zFO.js","assets/kmlUtils-DavP66gP.js","assets/KnowledgeGraphLayerView2D-CbA6kZvD.js","assets/MapImageLayerView2D-CGySNop6.js","assets/MapNotesLayerView2D-CYyJPDmd.js","assets/MediaLayerView2D-BwVmmDWi.js","assets/mediaLayerUtils-b4CcZWAz.js","assets/OverlayContainer-BE3C65I3.js","assets/OGCFeatureLayerView2D-BQZlJf7y.js","assets/RouteLayerView2D-DeG9U6ad.js","assets/Stop-tjU0FCXm.js","assets/StreamLayerView2D-BsjYgZUF.js","assets/SubtypeGroupLayerView2D-CqE6T3rQ.js","assets/VectorTileLayerView2D-C7GJrVK7.js","assets/VideoLayerView2D-CaEennUb.js","assets/GraphicsLayer-BfWfCcP3.js","assets/videoUtils-BMgZfZVj.js","assets/WMSLayerView2D-Bbr57QQ7.js","assets/ExportWMSImageParameters-kn8v7_HY.js","assets/WMTSLayerView2D-5X3CAQFg.js","assets/apng-0Mklh4Jr.js","assets/webdocSaveUtils-BbCpz2vd.js","assets/originUtils-C7dFQ759.js","assets/resourceUtils-j8Aezl8s.js","assets/resourceUtils-Dl50Z1TI.js","assets/saveUtils-xBZZu4Nl.js","assets/layersLoader-Bx6cuUoE.js","assets/featureLayerUtils-DSZdswsF.js","assets/utils-DF0GYdf5.js","assets/FeatureLayerSource-1GLOBK7N.js","assets/External-ChOQY9HL.js","assets/applyEditsUtils-BU3bKk0Z.js","assets/MeshTransform-ByyEaDND.js","assets/axisAngleDegrees-PD2lQYHZ.js","assets/editingSupport-ZCv18SyN.js","assets/QueryTask-ZUPiAfEn.js","assets/executeForIds-Djav60ia.js","assets/queryAssociations-D8xZK8Yz.js","assets/Association-B-mK8es5.js","assets/synthesizeAssociationGeometries-BHxhi6ne.js","assets/ProjectionTransformation-CkhaapGK.js","assets/Envelope2D-DpFkwyFI.js","assets/Point2D-D2kgyQ2l.js","assets/Transformation2D-DUMRLKSD.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-BYW5cCQU.js","assets/jsonConverter-5OTbKOt2.js","assets/MapImageLayer-DDZ9QgRN.js","assets/SublayersOwner-DQfSlvSY.js","assets/imageBitmapUtils-Bq-qs6lW.js","assets/index-CY5PNI49.js","assets/usePreventDocumentScroll-C7QhI5Eb.js","assets/index-4dgyLyVi.js"])))=>i.map(i=>d[i]);
var sAe=Object.getPrototypeOf;var oAe=Reflect.get;var Wie=t=>{throw TypeError(t)};var gV=(t,e,i)=>e.has(t)||Wie("Cannot "+i);var te=(t,e,i)=>(gV(t,e,"read from private field"),i?i.call(t):e.get(t)),Qe=(t,e,i)=>e.has(t)?Wie("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),We=(t,e,i,r)=>(gV(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),Er=(t,e,i)=>(gV(t,e,"access private method"),i);var FL=(t,e,i)=>oAe(sAe(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function aAe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vV={exports:{}},CI={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jie;function lAe(){if(Jie)return CI;Jie=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,n,s){var o=null;if(s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),"key"in n){s={};for(var a in n)a!=="key"&&(s[a]=n[a])}else s=n;return n=s.ref,{$$typeof:t,type:r,key:o,ref:n!==void 0?n:null,props:s}}return CI.Fragment=e,CI.jsx=i,CI.jsxs=i,CI}var Zie;function cAe(){return Zie||(Zie=1,vV.exports=lAe()),vV.exports}var pi=cAe(),bV={exports:{}},vi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yie;function uAe(){if(Yie)return vi;Yie=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function y(se){return se===null||typeof se!="object"?null:(se=m&&se[m]||se["@@iterator"],typeof se=="function"?se:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function S(se,Pe,rt){this.props=se,this.context=Pe,this.refs=x,this.updater=rt||v}S.prototype.isReactComponent={},S.prototype.setState=function(se,Pe){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,Pe,"setState")},S.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function C(){}C.prototype=S.prototype;function k(se,Pe,rt){this.props=se,this.context=Pe,this.refs=x,this.updater=rt||v}var A=k.prototype=new C;A.constructor=k,w(A,S.prototype),A.isPureReactComponent=!0;var R=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function z(se,Pe,rt,it,_t,ri){return rt=ri.ref,{$$typeof:t,type:se,key:Pe,ref:rt!==void 0?rt:null,props:ri}}function W(se,Pe){return z(se.type,Pe,void 0,void 0,void 0,se.props)}function Y(se){return typeof se=="object"&&se!==null&&se.$$typeof===t}function ee(se){var Pe={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(rt){return Pe[rt]})}var ge=/\/+/g;function fe(se,Pe){return typeof se=="object"&&se!==null&&se.key!=null?ee(""+se.key):Pe.toString(36)}function ue(){}function ae(se){switch(se.status){case"fulfilled":return se.value;case"rejected":throw se.reason;default:switch(typeof se.status=="string"?se.then(ue,ue):(se.status="pending",se.then(function(Pe){se.status==="pending"&&(se.status="fulfilled",se.value=Pe)},function(Pe){se.status==="pending"&&(se.status="rejected",se.reason=Pe)})),se.status){case"fulfilled":return se.value;case"rejected":throw se.reason}}throw se}function Se(se,Pe,rt,it,_t){var ri=typeof se;(ri==="undefined"||ri==="boolean")&&(se=null);var zt=!1;if(se===null)zt=!0;else switch(ri){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(se.$$typeof){case t:case e:zt=!0;break;case h:return zt=se._init,Se(zt(se._payload),Pe,rt,it,_t)}}if(zt)return _t=_t(se),zt=it===""?"."+fe(se,0):it,R(_t)?(rt="",zt!=null&&(rt=zt.replace(ge,"$&/")+"/"),Se(_t,Pe,rt,"",function(gt){return gt})):_t!=null&&(Y(_t)&&(_t=W(_t,rt+(_t.key==null||se&&se.key===_t.key?"":(""+_t.key).replace(ge,"$&/")+"/")+zt)),Pe.push(_t)),1;zt=0;var kr=it===""?".":it+":";if(R(se))for(var $i=0;$i<se.length;$i++)it=se[$i],ri=kr+fe(it,$i),zt+=Se(it,Pe,rt,ri,_t);else if($i=y(se),typeof $i=="function")for(se=$i.call(se),$i=0;!(it=se.next()).done;)it=it.value,ri=kr+fe(it,$i++),zt+=Se(it,Pe,rt,ri,_t);else if(ri==="object"){if(typeof se.then=="function")return Se(ae(se),Pe,rt,it,_t);throw Pe=String(se),Error("Objects are not valid as a React child (found: "+(Pe==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":Pe)+"). If you meant to render a collection of children, use an array instead.")}return zt}function le(se,Pe,rt){if(se==null)return se;var it=[],_t=0;return Se(se,it,"","",function(ri){return Pe.call(rt,ri,_t++)}),it}function be(se){if(se._status===-1){var Pe=se._result;Pe=Pe(),Pe.then(function(rt){(se._status===0||se._status===-1)&&(se._status=1,se._result=rt)},function(rt){(se._status===0||se._status===-1)&&(se._status=2,se._result=rt)}),se._status===-1&&(se._status=0,se._result=Pe)}if(se._status===1)return se._result.default;throw se._result}var Oe=typeof reportError=="function"?reportError:function(se){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof se=="object"&&se!==null&&typeof se.message=="string"?String(se.message):String(se),error:se});if(!window.dispatchEvent(Pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",se);return}console.error(se)};function Be(){}return vi.Children={map:le,forEach:function(se,Pe,rt){le(se,function(){Pe.apply(this,arguments)},rt)},count:function(se){var Pe=0;return le(se,function(){Pe++}),Pe},toArray:function(se){return le(se,function(Pe){return Pe})||[]},only:function(se){if(!Y(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},vi.Component=S,vi.Fragment=i,vi.Profiler=n,vi.PureComponent=k,vi.StrictMode=r,vi.Suspense=l,vi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,vi.__COMPILER_RUNTIME={__proto__:null,c:function(se){return D.H.useMemoCache(se)}},vi.cache=function(se){return function(){return se.apply(null,arguments)}},vi.cloneElement=function(se,Pe,rt){if(se==null)throw Error("The argument must be a React element, but you passed "+se+".");var it=w({},se.props),_t=se.key,ri=void 0;if(Pe!=null)for(zt in Pe.ref!==void 0&&(ri=void 0),Pe.key!==void 0&&(_t=""+Pe.key),Pe)!B.call(Pe,zt)||zt==="key"||zt==="__self"||zt==="__source"||zt==="ref"&&Pe.ref===void 0||(it[zt]=Pe[zt]);var zt=arguments.length-2;if(zt===1)it.children=rt;else if(1<zt){for(var kr=Array(zt),$i=0;$i<zt;$i++)kr[$i]=arguments[$i+2];it.children=kr}return z(se.type,_t,void 0,void 0,ri,it)},vi.createContext=function(se){return se={$$typeof:o,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null},se.Provider=se,se.Consumer={$$typeof:s,_context:se},se},vi.createElement=function(se,Pe,rt){var it,_t={},ri=null;if(Pe!=null)for(it in Pe.key!==void 0&&(ri=""+Pe.key),Pe)B.call(Pe,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(_t[it]=Pe[it]);var zt=arguments.length-2;if(zt===1)_t.children=rt;else if(1<zt){for(var kr=Array(zt),$i=0;$i<zt;$i++)kr[$i]=arguments[$i+2];_t.children=kr}if(se&&se.defaultProps)for(it in zt=se.defaultProps,zt)_t[it]===void 0&&(_t[it]=zt[it]);return z(se,ri,void 0,void 0,null,_t)},vi.createRef=function(){return{current:null}},vi.forwardRef=function(se){return{$$typeof:a,render:se}},vi.isValidElement=Y,vi.lazy=function(se){return{$$typeof:h,_payload:{_status:-1,_result:se},_init:be}},vi.memo=function(se,Pe){return{$$typeof:c,type:se,compare:Pe===void 0?null:Pe}},vi.startTransition=function(se){var Pe=D.T,rt={};D.T=rt;try{var it=se(),_t=D.S;_t!==null&&_t(rt,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Be,Oe)}catch(ri){Oe(ri)}finally{D.T=Pe}},vi.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},vi.use=function(se){return D.H.use(se)},vi.useActionState=function(se,Pe,rt){return D.H.useActionState(se,Pe,rt)},vi.useCallback=function(se,Pe){return D.H.useCallback(se,Pe)},vi.useContext=function(se){return D.H.useContext(se)},vi.useDebugValue=function(){},vi.useDeferredValue=function(se,Pe){return D.H.useDeferredValue(se,Pe)},vi.useEffect=function(se,Pe,rt){var it=D.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(se,Pe)},vi.useId=function(){return D.H.useId()},vi.useImperativeHandle=function(se,Pe,rt){return D.H.useImperativeHandle(se,Pe,rt)},vi.useInsertionEffect=function(se,Pe){return D.H.useInsertionEffect(se,Pe)},vi.useLayoutEffect=function(se,Pe){return D.H.useLayoutEffect(se,Pe)},vi.useMemo=function(se,Pe){return D.H.useMemo(se,Pe)},vi.useOptimistic=function(se,Pe){return D.H.useOptimistic(se,Pe)},vi.useReducer=function(se,Pe,rt){return D.H.useReducer(se,Pe,rt)},vi.useRef=function(se){return D.H.useRef(se)},vi.useState=function(se){return D.H.useState(se)},vi.useSyncExternalStore=function(se,Pe,rt){return D.H.useSyncExternalStore(se,Pe,rt)},vi.useTransition=function(){return D.H.useTransition()},vi.version="19.1.0",vi}var Xie;function AZ(){return Xie||(Xie=1,bV.exports=uAe()),bV.exports}var Ve=AZ();const ime=aAe(Ve);var wV={exports:{}},II={},_V={exports:{}},xV={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kie;function dAe(){return Kie||(Kie=1,function(t){function e(le,be){var Oe=le.length;le.push(be);e:for(;0<Oe;){var Be=Oe-1>>>1,se=le[Be];if(0<n(se,be))le[Be]=be,le[Oe]=se,Oe=Be;else break e}}function i(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var be=le[0],Oe=le.pop();if(Oe!==be){le[0]=Oe;e:for(var Be=0,se=le.length,Pe=se>>>1;Be<Pe;){var rt=2*(Be+1)-1,it=le[rt],_t=rt+1,ri=le[_t];if(0>n(it,Oe))_t<se&&0>n(ri,it)?(le[Be]=ri,le[_t]=Oe,Be=_t):(le[Be]=it,le[rt]=Oe,Be=rt);else if(_t<se&&0>n(ri,Oe))le[Be]=ri,le[_t]=Oe,Be=_t;else break e}}return be}function n(le,be){var Oe=le.sortIndex-be.sortIndex;return Oe!==0?Oe:le.id-be.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,m=null,y=3,v=!1,w=!1,x=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function R(le){for(var be=i(c);be!==null;){if(be.callback===null)r(c);else if(be.startTime<=le)r(c),be.sortIndex=be.expirationTime,e(l,be);else break;be=i(c)}}function D(le){if(x=!1,R(le),!w)if(i(l)!==null)w=!0,B||(B=!0,fe());else{var be=i(c);be!==null&&Se(D,be.startTime-le)}}var B=!1,z=-1,W=5,Y=-1;function ee(){return S?!0:!(t.unstable_now()-Y<W)}function ge(){if(S=!1,B){var le=t.unstable_now();Y=le;var be=!0;try{e:{w=!1,x&&(x=!1,k(z),z=-1),v=!0;var Oe=y;try{t:{for(R(le),m=i(l);m!==null&&!(m.expirationTime>le&&ee());){var Be=m.callback;if(typeof Be=="function"){m.callback=null,y=m.priorityLevel;var se=Be(m.expirationTime<=le);if(le=t.unstable_now(),typeof se=="function"){m.callback=se,R(le),be=!0;break t}m===i(l)&&r(l),R(le)}else r(l);m=i(l)}if(m!==null)be=!0;else{var Pe=i(c);Pe!==null&&Se(D,Pe.startTime-le),be=!1}}break e}finally{m=null,y=Oe,v=!1}be=void 0}}finally{be?fe():B=!1}}}var fe;if(typeof A=="function")fe=function(){A(ge)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,ae=ue.port2;ue.port1.onmessage=ge,fe=function(){ae.postMessage(null)}}else fe=function(){C(ge,0)};function Se(le,be){z=C(function(){le(t.unstable_now())},be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(le){le.callback=null},t.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<le?Math.floor(1e3/le):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(le){switch(y){case 1:case 2:case 3:var be=3;break;default:be=y}var Oe=y;y=be;try{return le()}finally{y=Oe}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(le,be){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Oe=y;y=le;try{return be()}finally{y=Oe}},t.unstable_scheduleCallback=function(le,be,Oe){var Be=t.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?Be+Oe:Be):Oe=Be,le){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Oe+se,le={id:h++,callback:be,priorityLevel:le,startTime:Oe,expirationTime:se,sortIndex:-1},Oe>Be?(le.sortIndex=Oe,e(c,le),i(l)===null&&le===i(c)&&(x?(k(z),z=-1):x=!0,Se(D,Oe-Be))):(le.sortIndex=se,e(l,le),w||v||(w=!0,B||(B=!0,fe()))),le},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(le){var be=y;return function(){var Oe=y;y=be;try{return le.apply(this,arguments)}finally{y=Oe}}}}(xV)),xV}var Qie;function hAe(){return Qie||(Qie=1,_V.exports=dAe()),_V.exports}var SV={exports:{}},Ro={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ere;function pAe(){if(ere)return Ro;ere=1;var t=AZ();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(l,c,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:m==null?null:""+m,children:l,containerInfo:c,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ro.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ro.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,h)},Ro.flushSync=function(l){var c=o.T,h=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=h,r.d.f()}},Ro.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Ro.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ro.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,m=a(h,c.crossOrigin),y=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):h==="script"&&r.d.X(l,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ro.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Ro.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,m=a(h,c.crossOrigin);r.d.L(l,h,{crossOrigin:m,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ro.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Ro.requestFormReset=function(l){r.d.r(l)},Ro.unstable_batchedUpdates=function(l,c){return l(c)},Ro.useFormState=function(l,c,h){return o.H.useFormState(l,c,h)},Ro.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ro.version="19.1.0",Ro}var tre;function fAe(){if(tre)return SV.exports;tre=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),SV.exports=pAe(),SV.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ire;function mAe(){if(ire)return II;ire=1;var t=hAe(),e=AZ(),i=fAe();function r(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var f=d,g=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(g=f.return),d=f.return;while(d)}return f.tag===3?g:null}function o(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function a(d){if(s(d)!==d)throw Error(r(188))}function l(d){var f=d.alternate;if(!f){if(f=s(d),f===null)throw Error(r(188));return f!==d?null:d}for(var g=d,_=f;;){var E=g.return;if(E===null)break;var M=E.alternate;if(M===null){if(_=E.return,_!==null){g=_;continue}break}if(E.child===M.child){for(M=E.child;M;){if(M===g)return a(E),d;if(M===_)return a(E),f;M=M.sibling}throw Error(r(188))}if(g.return!==_.return)g=E,_=M;else{for(var V=!1,J=E.child;J;){if(J===g){V=!0,g=E,_=M;break}if(J===_){V=!0,_=E,g=M;break}J=J.sibling}if(!V){for(J=M.child;J;){if(J===g){V=!0,g=M,_=E;break}if(J===_){V=!0,_=M,g=E;break}J=J.sibling}if(!V)throw Error(r(189))}}if(g.alternate!==_)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?d:f}function c(d){var f=d.tag;if(f===5||f===26||f===27||f===6)return d;for(d=d.child;d!==null;){if(f=c(d),f!==null)return f;d=d.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function fe(d){return d===null||typeof d!="object"?null:(d=ge&&d[ge]||d["@@iterator"],typeof d=="function"?d:null)}var ue=Symbol.for("react.client.reference");function ae(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===ue?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case w:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList";case Y:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case v:return"Portal";case A:return(d.displayName||"Context")+".Provider";case k:return(d._context.displayName||"Context")+".Consumer";case R:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case z:return f=d.displayName||null,f!==null?f:ae(d.type)||"Memo";case W:f=d._payload,d=d._init;try{return ae(d(f))}catch{}}return null}var Se=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe={pending:!1,data:null,method:null,action:null},Be=[],se=-1;function Pe(d){return{current:d}}function rt(d){0>se||(d.current=Be[se],Be[se]=null,se--)}function it(d,f){se++,Be[se]=d.current,d.current=f}var _t=Pe(null),ri=Pe(null),zt=Pe(null),kr=Pe(null);function $i(d,f){switch(it(zt,f),it(ri,d),it(_t,null),f.nodeType){case 9:case 11:d=(d=f.documentElement)&&(d=d.namespaceURI)?_ie(d):0;break;default:if(d=f.tagName,f=f.namespaceURI)f=_ie(f),d=xie(f,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}rt(_t),it(_t,d)}function gt(){rt(_t),rt(ri),rt(zt)}function Eu(d){d.memoizedState!==null&&it(kr,d);var f=_t.current,g=xie(f,d.type);f!==g&&(it(ri,d),it(_t,g))}function fa(d){ri.current===d&&(rt(_t),rt(ri)),kr.current===d&&(rt(kr),xI._currentValue=Oe)}var kl=Object.prototype.hasOwnProperty,ma=t.unstable_scheduleCallback,ya=t.unstable_cancelCallback,of=t.unstable_shouldYield,Cu=t.unstable_requestPaint,ga=t.unstable_now,af=t.unstable_getCurrentPriorityLevel,Pb=t.unstable_ImmediatePriority,Wd=t.unstable_UserBlockingPriority,js=t.unstable_NormalPriority,R1=t.unstable_LowPriority,Lb=t.unstable_IdlePriority,Ay=t.log,D1=t.unstable_setDisableYieldValue,Al=null,oo=null;function qa(d){if(typeof Ay=="function"&&D1(d),oo&&typeof oo.setStrictMode=="function")try{oo.setStrictMode(Al,d)}catch{}}var ao=Math.clz32?Math.clz32:Nb,Rb=Math.log,Db=Math.LN2;function Nb(d){return d>>>=0,d===0?32:31-(Rb(d)/Db|0)|0}var lf=256,cf=4194304;function Wa(d){var f=d&42;if(f!==0)return f;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function uf(d,f,g){var _=d.pendingLanes;if(_===0)return 0;var E=0,M=d.suspendedLanes,V=d.pingedLanes;d=d.warmLanes;var J=_&134217727;return J!==0?(_=J&~M,_!==0?E=Wa(_):(V&=J,V!==0?E=Wa(V):g||(g=J&~d,g!==0&&(E=Wa(g))))):(J=_&~M,J!==0?E=Wa(J):V!==0?E=Wa(V):g||(g=_&~d,g!==0&&(E=Wa(g)))),E===0?0:f!==0&&f!==E&&(f&M)===0&&(M=E&-E,g=f&-f,M>=g||M===32&&(g&4194048)!==0)?f:E}function Jd(d,f){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&f)===0}function df(d,f){switch(d){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zd(){var d=lf;return lf<<=1,(lf&4194048)===0&&(lf=256),d}function Iu(){var d=cf;return cf<<=1,(cf&62914560)===0&&(cf=4194304),d}function Oy(d){for(var f=[],g=0;31>g;g++)f.push(d);return f}function Mu(d,f){d.pendingLanes|=f,f!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function N1(d,f,g,_,E,M){var V=d.pendingLanes;d.pendingLanes=g,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=g,d.entangledLanes&=g,d.errorRecoveryDisabledLanes&=g,d.shellSuspendCounter=0;var J=d.entanglements,oe=d.expirationTimes,Ee=d.hiddenUpdates;for(g=V&~g;0<g;){var ze=31-ao(g),He=1<<ze;J[ze]=0,oe[ze]=-1;var ke=Ee[ze];if(ke!==null)for(Ee[ze]=null,ze=0;ze<ke.length;ze++){var Ae=ke[ze];Ae!==null&&(Ae.lane&=-536870913)}g&=~He}_!==0&&Py(d,_,0),M!==0&&E===0&&d.tag!==0&&(d.suspendedLanes|=M&~(V&~f))}function Py(d,f,g){d.pendingLanes|=f,d.suspendedLanes&=~f;var _=31-ao(f);d.entangledLanes|=f,d.entanglements[_]=d.entanglements[_]|1073741824|g&4194090}function Ly(d,f){var g=d.entangledLanes|=f;for(d=d.entanglements;g;){var _=31-ao(g),E=1<<_;E&f|d[_]&f&&(d[_]|=f),g&=~E}}function Ry(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Ie(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function ar(){var d=be.p;return d!==0?d:(d=window.event,d===void 0?32:jie(d.type))}function Tc(d,f){var g=be.p;try{return be.p=d,f()}finally{be.p=g}}var Vs=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Vs,Xn="__reactProps$"+Vs,vt="__reactContainer$"+Vs,Bs="__reactEvents$"+Vs,ku="__reactListeners$"+Vs,Ki="__reactHandles$"+Vs,Yd="__reactResources$"+Vs,hf="__reactMarker$"+Vs;function va(d){delete d[Xi],delete d[Xn],delete d[Bs],delete d[ku],delete d[Ki]}function Gs(d){var f=d[Xi];if(f)return f;for(var g=d.parentNode;g;){if(f=g[vt]||g[Xi]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(d=Eie(d);d!==null;){if(g=d[Xi])return g;d=Eie(d)}return f}d=g,g=d.parentNode}return null}function Dt(d){if(d=d[Xi]||d[vt]){var f=d.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return d}return null}function Ht(d){var f=d.tag;if(f===5||f===26||f===27||f===6)return d.stateNode;throw Error(r(33))}function Au(d){var f=d[Yd];return f||(f=d[Yd]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function gn(d){d[hf]=!0}var z1=new Set,Xd={};function ba(d,f){Kd(d,f),Kd(d+"Capture",f)}function Kd(d,f){for(Xd[d]=f,d=0;d<f.length;d++)z1.add(f[d])}var zb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vn={},Fb={};function F1(d){return kl.call(Fb,d)?!0:kl.call(vn,d)?!1:zb.test(d)?Fb[d]=!0:(vn[d]=!0,!1)}function pf(d,f,g){if(F1(f))if(g===null)d.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":d.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){d.removeAttribute(f);return}}d.setAttribute(f,""+g)}}function ff(d,f,g){if(g===null)d.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(f);return}d.setAttribute(f,""+g)}}function Po(d,f,g,_){if(_===null)d.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(g);return}d.setAttributeNS(f,g,""+_)}}var Dy,Ny;function An(d){if(Dy===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Dy=f&&f[1]||"",Ny=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dy+d+Ny}var Ub=!1;function mf(d,f){if(!d||Ub)return"";Ub=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(Ae){var ke=Ae}Reflect.construct(d,[],He)}else{try{He.call()}catch(Ae){ke=Ae}d.call(He.prototype)}}else{try{throw Error()}catch(Ae){ke=Ae}(He=d())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(Ae){if(Ae&&ke&&typeof Ae.stack=="string")return[Ae.stack,ke.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=_.DetermineComponentFrameRoot(),V=M[0],J=M[1];if(V&&J){var oe=V.split(`
`),Ee=J.split(`
`);for(E=_=0;_<oe.length&&!oe[_].includes("DetermineComponentFrameRoot");)_++;for(;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;if(_===oe.length||E===Ee.length)for(_=oe.length-1,E=Ee.length-1;1<=_&&0<=E&&oe[_]!==Ee[E];)E--;for(;1<=_&&0<=E;_--,E--)if(oe[_]!==Ee[E]){if(_!==1||E!==1)do if(_--,E--,0>E||oe[_]!==Ee[E]){var ze=`
`+oe[_].replace(" at new "," at ");return d.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",d.displayName)),ze}while(1<=_&&0<=E);break}}}finally{Ub=!1,Error.prepareStackTrace=g}return(g=d?d.displayName||d.name:"")?An(g):""}function jb(d){switch(d.tag){case 26:case 27:case 5:return An(d.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 15:return mf(d.type,!1);case 11:return mf(d.type.render,!1);case 1:return mf(d.type,!0);case 31:return An("Activity");default:return""}}function yf(d){try{var f="";do f+=jb(d),d=d.return;while(d);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function ie(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Me(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ke(d){var f=Me(d)?"checked":"value",g=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),_=""+d[f];if(!d.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,M=g.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return E.call(this)},set:function(V){_=""+V,M.call(this,V)}}),Object.defineProperty(d,f,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(V){_=""+V},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Pt(d){d._valueTracker||(d._valueTracker=Ke(d))}function Pi(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var g=f.getValue(),_="";return d&&(_=Me(d)?d.checked?"true":"false":d.value),d=_,d!==g?(f.setValue(d),!0):!1}function Qi(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var Ar=/[\n"\\]/g;function ki(d){return d.replace(Ar,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Vb(d,f,g,_,E,M,V,J){d.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?d.type=V:d.removeAttribute("type"),f!=null?V==="number"?(f===0&&d.value===""||d.value!=f)&&(d.value=""+ie(f)):d.value!==""+ie(f)&&(d.value=""+ie(f)):V!=="submit"&&V!=="reset"||d.removeAttribute("value"),f!=null?Ec(d,V,ie(f)):g!=null?Ec(d,V,ie(g)):_!=null&&d.removeAttribute("value"),E==null&&M!=null&&(d.defaultChecked=!!M),E!=null&&(d.checked=E&&typeof E!="function"&&typeof E!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?d.name=""+ie(J):d.removeAttribute("name")}function Bb(d,f,g,_,E,M,V,J){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(d.type=M),f!=null||g!=null){if(!(M!=="submit"&&M!=="reset"||f!=null))return;g=g!=null?""+ie(g):"",f=f!=null?""+ie(f):g,J||f===d.value||(d.value=f),d.defaultValue=f}_=_??E,_=typeof _!="function"&&typeof _!="symbol"&&!!_,d.checked=J?d.checked:!!_,d.defaultChecked=!!_,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(d.name=V)}function Ec(d,f,g){f==="number"&&Qi(d.ownerDocument)===d||d.defaultValue===""+g||(d.defaultValue=""+g)}function Cc(d,f,g,_){if(d=d.options,f){f={};for(var E=0;E<g.length;E++)f["$"+g[E]]=!0;for(g=0;g<d.length;g++)E=f.hasOwnProperty("$"+d[g].value),d[g].selected!==E&&(d[g].selected=E),E&&_&&(d[g].defaultSelected=!0)}else{for(g=""+ie(g),f=null,E=0;E<d.length;E++){if(d[E].value===g){d[E].selected=!0,_&&(d[E].defaultSelected=!0);return}f!==null||d[E].disabled||(f=d[E])}f!==null&&(f.selected=!0)}}function xP(d,f,g){if(f!=null&&(f=""+ie(f),f!==d.value&&(d.value=f),g==null)){d.defaultValue!==f&&(d.defaultValue=f);return}d.defaultValue=g!=null?""+ie(g):""}function PC(d,f,g,_){if(f==null){if(_!=null){if(g!=null)throw Error(r(92));if(Se(_)){if(1<_.length)throw Error(r(93));_=_[0]}g=_}g==null&&(g=""),f=g}g=ie(f),d.defaultValue=g,_=d.textContent,_===g&&_!==""&&_!==null&&(d.value=_)}function gf(d,f){if(f){var g=d.firstChild;if(g&&g===d.lastChild&&g.nodeType===3){g.nodeValue=f;return}}d.textContent=f}var LC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function SP(d,f,g){var _=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?_?d.setProperty(f,""):f==="float"?d.cssFloat="":d[f]="":_?d.setProperty(f,g):typeof g!="number"||g===0||LC.has(f)?f==="float"?d.cssFloat=g:d[f]=(""+g).trim():d[f]=g+"px"}function $P(d,f,g){if(f!=null&&typeof f!="object")throw Error(r(62));if(d=d.style,g!=null){for(var _ in g)!g.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?d.setProperty(_,""):_==="float"?d.cssFloat="":d[_]="");for(var E in f)_=f[E],f.hasOwnProperty(E)&&g[E]!==_&&SP(d,E,_)}else for(var M in f)f.hasOwnProperty(M)&&SP(d,M,f[M])}function U1(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gb(d){return mj.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var j1=null;function RC(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Qd=null,zy=null;function DC(d){var f=Dt(d);if(f&&(d=f.stateNode)){var g=d[Xn]||null;e:switch(d=f.stateNode,f.type){case"input":if(Vb(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=d;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+ki(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var _=g[f];if(_!==d&&_.form===d.form){var E=_[Xn]||null;if(!E)throw Error(r(90));Vb(_,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<g.length;f++)_=g[f],_.form===d.form&&Pi(_)}break e;case"textarea":xP(d,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&Cc(d,!!g.multiple,f,!1)}}}var NC=!1;function Hb(d,f,g){if(NC)return d(f,g);NC=!0;try{var _=d(f);return _}finally{if(NC=!1,(Qd!==null||zy!==null)&&(vL(),Qd&&(f=Qd,d=zy,zy=Qd=null,DC(f),d)))for(f=0;f<d.length;f++)DC(d[f])}}function qb(d,f){var g=d.stateNode;if(g===null)return null;var _=g[Xn]||null;if(_===null)return null;g=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(d=d.type,_=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!_;break e;default:d=!1}if(d)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var Ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V1=!1;if(Ic)try{var Wb={};Object.defineProperty(Wb,"passive",{get:function(){V1=!0}}),window.addEventListener("test",Wb,Wb),window.removeEventListener("test",Wb,Wb)}catch{V1=!1}var Ou=null,B1=null,G1=null;function Fy(){if(G1)return G1;var d,f=B1,g=f.length,_,E="value"in Ou?Ou.value:Ou.textContent,M=E.length;for(d=0;d<g&&f[d]===E[d];d++);var V=g-d;for(_=1;_<=V&&f[g-_]===E[M-_];_++);return G1=E.slice(d,1<_?1-_:void 0)}function vf(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function H1(){return!0}function q1(){return!1}function lo(d){function f(g,_,E,M,V){this._reactName=g,this._targetInst=E,this.type=_,this.nativeEvent=M,this.target=V,this.currentTarget=null;for(var J in d)d.hasOwnProperty(J)&&(g=d[J],this[J]=g?g(M):M[J]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?H1:q1,this.isPropagationStopped=q1,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=H1)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=H1)},persist:function(){},isPersistent:H1}),f}var bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uy=lo(bf),jy=h({},bf,{view:0,detail:0}),TP=lo(jy),Jb,zC,Zb,Ol=h({},jy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vy,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Zb&&(Zb&&d.type==="mousemove"?(Jb=d.screenX-Zb.screenX,zC=d.screenY-Zb.screenY):zC=Jb=0,Zb=d),Jb)},movementY:function(d){return"movementY"in d?d.movementY:zC}}),EP=lo(Ol),yj=h({},Ol,{dataTransfer:0}),gj=lo(yj),CP=h({},jy,{relatedTarget:0}),W1=lo(CP),co=h({},bf,{animationName:0,elapsedTime:0,pseudoElement:0}),vj=lo(co),bj=h({},bf,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),wj=lo(bj),_j=h({},bf,{data:0}),IP=lo(_j),xj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$j={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MP(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=$j[d])?!!f[d]:!1}function Vy(){return MP}var wf=h({},jy,{key:function(d){if(d.key){var f=xj[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=vf(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Sj[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vy,charCode:function(d){return d.type==="keypress"?vf(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?vf(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),J1=lo(wf),Tj=h({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FC=lo(Tj),kP=h({},jy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vy}),AP=lo(kP),Yb=h({},bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ej=lo(Yb),Cj=h({},Ol,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Ij=lo(Cj),Mj=h({},bf,{newState:0,oldState:0}),kj=lo(Mj),Aj=[9,13,27,32],Xb=Ic&&"CompositionEvent"in window,Kb=null;Ic&&"documentMode"in document&&(Kb=document.documentMode);var Z1=Ic&&"TextEvent"in window&&!Kb,OP=Ic&&(!Xb||Kb&&8<Kb&&11>=Kb),Y1=" ",PP=!1;function LP(d,f){switch(d){case"keyup":return Aj.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UC(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Mc=!1;function eh(d,f){switch(d){case"compositionend":return UC(f);case"keypress":return f.which!==32?null:(PP=!0,Y1);case"textInput":return d=f.data,d===Y1&&PP?null:d;default:return null}}function RP(d,f){if(Mc)return d==="compositionend"||!Xb&&LP(d,f)?(d=Fy(),G1=B1=Ou=null,Mc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return OP&&f.locale!=="ko"?null:f.data;default:return null}}var jC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DP(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!jC[d.type]:f==="textarea"}function NP(d,f,g,_){Qd?zy?zy.push(_):zy=[_]:Qd=_,f=$L(f,"onChange"),0<f.length&&(g=new Uy("onChange","change",null,g,_),d.push({event:g,listeners:f}))}var Qb=null,e0=null;function Oj(d){yie(d,0)}function X1(d){var f=Ht(d);if(Pi(f))return d}function zP(d,f){if(d==="change")return f}var FP=!1;if(Ic){var VC;if(Ic){var BC="oninput"in document;if(!BC){var T=document.createElement("div");T.setAttribute("oninput","return;"),BC=typeof T.oninput=="function"}VC=BC}else VC=!1;FP=VC&&(!document.documentMode||9<document.documentMode)}function $(){Qb&&(Qb.detachEvent("onpropertychange",I),e0=Qb=null)}function I(d){if(d.propertyName==="value"&&X1(e0)){var f=[];NP(f,e0,d,RC(d)),Hb(Oj,f)}}function O(d,f,g){d==="focusin"?($(),Qb=f,e0=g,Qb.attachEvent("onpropertychange",I)):d==="focusout"&&$()}function N(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return X1(e0)}function j(d,f){if(d==="click")return X1(f)}function H(d,f){if(d==="input"||d==="change")return X1(f)}function Z(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var X=typeof Object.is=="function"?Object.is:Z;function de(d,f){if(X(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var g=Object.keys(d),_=Object.keys(f);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var E=g[_];if(!kl.call(f,E)||!X(d[E],f[E]))return!1}return!0}function re(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function we(d,f){var g=re(d);d=0;for(var _;g;){if(g.nodeType===3){if(_=d+g.textContent.length,d<=f&&_>=f)return{node:g,offset:f-d};d=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=re(g)}}function Re(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?Re(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function Xe(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var f=Qi(d.document);f instanceof d.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)d=f.contentWindow;else break;f=Qi(d.document)}return f}function Je(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}var tt=Ic&&"documentMode"in document&&11>=document.documentMode,ht=null,ct=null,Mt=null,oi=!1;function bi(d,f,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;oi||ht==null||ht!==Qi(_)||(_=ht,"selectionStart"in _&&Je(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Mt&&de(Mt,_)||(Mt=_,_=$L(ct,"onSelect"),0<_.length&&(f=new Uy("onSelect","select",null,f,g),d.push({event:f,listeners:_}),f.target=ht)))}function Ft(d,f){var g={};return g[d.toLowerCase()]=f.toLowerCase(),g["Webkit"+d]="webkit"+f,g["Moz"+d]="moz"+f,g}var Qt={animationend:Ft("Animation","AnimationEnd"),animationiteration:Ft("Animation","AnimationIteration"),animationstart:Ft("Animation","AnimationStart"),transitionrun:Ft("Transition","TransitionRun"),transitionstart:Ft("Transition","TransitionStart"),transitioncancel:Ft("Transition","TransitionCancel"),transitionend:Ft("Transition","TransitionEnd")},Ts={},$r={};Ic&&($r=document.createElement("div").style,"AnimationEvent"in window||(delete Qt.animationend.animation,delete Qt.animationiteration.animation,delete Qt.animationstart.animation),"TransitionEvent"in window||delete Qt.transitionend.transition);function Kn(d){if(Ts[d])return Ts[d];if(!Qt[d])return d;var f=Qt[d],g;for(g in f)if(f.hasOwnProperty(g)&&g in $r)return Ts[d]=f[g];return d}var Ja=Kn("animationend"),kc=Kn("animationiteration"),t0=Kn("animationstart"),i0=Kn("transitionrun"),V2e=Kn("transitionstart"),B2e=Kn("transitioncancel"),XQ=Kn("transitionend"),KQ=new Map,Pj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pj.push("scrollEnd");function Pu(d,f){KQ.set(d,f),ba(f,[d])}var QQ=new WeakMap;function Ac(d,f){if(typeof d=="object"&&d!==null){var g=QQ.get(d);return g!==void 0?g:(f={value:d,source:f,stack:yf(f)},QQ.set(d,f),f)}return{value:d,source:f,stack:yf(f)}}var Oc=[],K1=0,Lj=0;function UP(){for(var d=K1,f=Lj=K1=0;f<d;){var g=Oc[f];Oc[f++]=null;var _=Oc[f];Oc[f++]=null;var E=Oc[f];Oc[f++]=null;var M=Oc[f];if(Oc[f++]=null,_!==null&&E!==null){var V=_.pending;V===null?E.next=E:(E.next=V.next,V.next=E),_.pending=E}M!==0&&eee(g,E,M)}}function jP(d,f,g,_){Oc[K1++]=d,Oc[K1++]=f,Oc[K1++]=g,Oc[K1++]=_,Lj|=_,d.lanes|=_,d=d.alternate,d!==null&&(d.lanes|=_)}function Rj(d,f,g,_){return jP(d,f,g,_),VP(d)}function Q1(d,f){return jP(d,null,null,f),VP(d)}function eee(d,f,g){d.lanes|=g;var _=d.alternate;_!==null&&(_.lanes|=g);for(var E=!1,M=d.return;M!==null;)M.childLanes|=g,_=M.alternate,_!==null&&(_.childLanes|=g),M.tag===22&&(d=M.stateNode,d===null||d._visibility&1||(E=!0)),d=M,M=M.return;return d.tag===3?(M=d.stateNode,E&&f!==null&&(E=31-ao(g),d=M.hiddenUpdates,_=d[E],_===null?d[E]=[f]:_.push(f),f.lane=g|536870912),M):null}function VP(d){if(50<fI)throw fI=0,j6=null,Error(r(185));for(var f=d.return;f!==null;)d=f,f=d.return;return d.tag===3?d.stateNode:null}var ex={};function G2e(d,f,g,_){this.tag=d,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(d,f,g,_){return new G2e(d,f,g,_)}function Dj(d){return d=d.prototype,!(!d||!d.isReactComponent)}function _f(d,f){var g=d.alternate;return g===null?(g=Pl(d.tag,f,d.key,d.mode),g.elementType=d.elementType,g.type=d.type,g.stateNode=d.stateNode,g.alternate=d,d.alternate=g):(g.pendingProps=f,g.type=d.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=d.flags&65011712,g.childLanes=d.childLanes,g.lanes=d.lanes,g.child=d.child,g.memoizedProps=d.memoizedProps,g.memoizedState=d.memoizedState,g.updateQueue=d.updateQueue,f=d.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=d.sibling,g.index=d.index,g.ref=d.ref,g.refCleanup=d.refCleanup,g}function tee(d,f){d.flags&=65011714;var g=d.alternate;return g===null?(d.childLanes=0,d.lanes=f,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,f=g.dependencies,d.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),d}function BP(d,f,g,_,E,M){var V=0;if(_=d,typeof d=="function")Dj(d)&&(V=1);else if(typeof d=="string")V=qke(d,g,_t.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case Y:return d=Pl(31,g,f,E),d.elementType=Y,d.lanes=M,d;case w:return r0(g.children,E,M,f);case x:V=8,E|=24;break;case S:return d=Pl(12,g,f,E|2),d.elementType=S,d.lanes=M,d;case D:return d=Pl(13,g,f,E),d.elementType=D,d.lanes=M,d;case B:return d=Pl(19,g,f,E),d.elementType=B,d.lanes=M,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case C:case A:V=10;break e;case k:V=9;break e;case R:V=11;break e;case z:V=14;break e;case W:V=16,_=null;break e}V=29,g=Error(r(130,d===null?"null":typeof d,"")),_=null}return f=Pl(V,g,f,E),f.elementType=d,f.type=_,f.lanes=M,f}function r0(d,f,g,_){return d=Pl(7,d,_,f),d.lanes=g,d}function Nj(d,f,g){return d=Pl(6,d,null,f),d.lanes=g,d}function zj(d,f,g){return f=Pl(4,d.children!==null?d.children:[],d.key,f),f.lanes=g,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}var tx=[],ix=0,GP=null,HP=0,Pc=[],Lc=0,n0=null,xf=1,Sf="";function s0(d,f){tx[ix++]=HP,tx[ix++]=GP,GP=d,HP=f}function iee(d,f,g){Pc[Lc++]=xf,Pc[Lc++]=Sf,Pc[Lc++]=n0,n0=d;var _=xf;d=Sf;var E=32-ao(_)-1;_&=~(1<<E),g+=1;var M=32-ao(f)+E;if(30<M){var V=E-E%5;M=(_&(1<<V)-1).toString(32),_>>=V,E-=V,xf=1<<32-ao(f)+E|g<<E|_,Sf=M+d}else xf=1<<M|g<<E|_,Sf=d}function Fj(d){d.return!==null&&(s0(d,1),iee(d,1,0))}function Uj(d){for(;d===GP;)GP=tx[--ix],tx[ix]=null,HP=tx[--ix],tx[ix]=null;for(;d===n0;)n0=Pc[--Lc],Pc[Lc]=null,Sf=Pc[--Lc],Pc[Lc]=null,xf=Pc[--Lc],Pc[Lc]=null}var wa=null,On=null,Wi=!1,o0=null,th=!1,jj=Error(r(519));function a0(d){var f=Error(r(418,""));throw qC(Ac(f,d)),jj}function ree(d){var f=d.stateNode,g=d.type,_=d.memoizedProps;switch(f[Xi]=d,f[Xn]=_,g){case"dialog":Ei("cancel",f),Ei("close",f);break;case"iframe":case"object":case"embed":Ei("load",f);break;case"video":case"audio":for(g=0;g<yI.length;g++)Ei(yI[g],f);break;case"source":Ei("error",f);break;case"img":case"image":case"link":Ei("error",f),Ei("load",f);break;case"details":Ei("toggle",f);break;case"input":Ei("invalid",f),Bb(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),Pt(f);break;case"select":Ei("invalid",f);break;case"textarea":Ei("invalid",f),PC(f,_.value,_.defaultValue,_.children),Pt(f)}g=_.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||_.suppressHydrationWarning===!0||wie(f.textContent,g)?(_.popover!=null&&(Ei("beforetoggle",f),Ei("toggle",f)),_.onScroll!=null&&Ei("scroll",f),_.onScrollEnd!=null&&Ei("scrollend",f),_.onClick!=null&&(f.onclick=TL),f=!0):f=!1,f||a0(d)}function nee(d){for(wa=d.return;wa;)switch(wa.tag){case 5:case 13:th=!1;return;case 27:case 3:th=!0;return;default:wa=wa.return}}function GC(d){if(d!==wa)return!1;if(!Wi)return nee(d),Wi=!0,!1;var f=d.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=d.type,g=!(g!=="form"&&g!=="button")||rV(d.type,d.memoizedProps)),g=!g),g&&On&&a0(d),nee(d),f===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8)if(g=d.data,g==="/$"){if(f===0){On=Ru(d.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;d=d.nextSibling}On=null}}else f===27?(f=On,ng(d.type)?(d=aV,aV=null,On=d):On=f):On=wa?Ru(d.stateNode.nextSibling):null;return!0}function HC(){On=wa=null,Wi=!1}function see(){var d=o0;return d!==null&&(Xa===null?Xa=d:Xa.push.apply(Xa,d),o0=null),d}function qC(d){o0===null?o0=[d]:o0.push(d)}var Vj=Pe(null),l0=null,$f=null;function By(d,f,g){it(Vj,f._currentValue),f._currentValue=g}function Tf(d){d._currentValue=Vj.current,rt(Vj)}function Bj(d,f,g){for(;d!==null;){var _=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),d===g)break;d=d.return}}function Gj(d,f,g,_){var E=d.child;for(E!==null&&(E.return=d);E!==null;){var M=E.dependencies;if(M!==null){var V=E.child;M=M.firstContext;e:for(;M!==null;){var J=M;M=E;for(var oe=0;oe<f.length;oe++)if(J.context===f[oe]){M.lanes|=g,J=M.alternate,J!==null&&(J.lanes|=g),Bj(M.return,g,d),_||(V=null);break e}M=J.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=g,M=V.alternate,M!==null&&(M.lanes|=g),Bj(V,g,d),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===d){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function WC(d,f,g,_){d=null;for(var E=f,M=!1;E!==null;){if(!M){if((E.flags&524288)!==0)M=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var J=E.type;X(E.pendingProps.value,V.value)||(d!==null?d.push(J):d=[J])}}else if(E===kr.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(d!==null?d.push(xI):d=[xI])}E=E.return}d!==null&&Gj(f,d,g,_),f.flags|=262144}function qP(d){for(d=d.firstContext;d!==null;){if(!X(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function c0(d){l0=d,$f=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Lo(d){return oee(l0,d)}function WP(d,f){return l0===null&&c0(d),oee(d,f)}function oee(d,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},$f===null){if(d===null)throw Error(r(308));$f=f,d.dependencies={lanes:0,firstContext:f},d.flags|=524288}else $f=$f.next=f;return g}var H2e=typeof AbortController<"u"?AbortController:function(){var d=[],f=this.signal={aborted:!1,addEventListener:function(g,_){d.push(_)}};this.abort=function(){f.aborted=!0,d.forEach(function(g){return g()})}},q2e=t.unstable_scheduleCallback,W2e=t.unstable_NormalPriority,Es={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hj(){return{controller:new H2e,data:new Map,refCount:0}}function JC(d){d.refCount--,d.refCount===0&&q2e(W2e,function(){d.controller.abort()})}var ZC=null,qj=0,rx=0,nx=null;function J2e(d,f){if(ZC===null){var g=ZC=[];qj=0,rx=J6(),nx={status:"pending",value:void 0,then:function(_){g.push(_)}}}return qj++,f.then(aee,aee),f}function aee(){if(--qj===0&&ZC!==null){nx!==null&&(nx.status="fulfilled");var d=ZC;ZC=null,rx=0,nx=null;for(var f=0;f<d.length;f++)(0,d[f])()}}function Z2e(d,f){var g=[],_={status:"pending",value:null,reason:null,then:function(E){g.push(E)}};return d.then(function(){_.status="fulfilled",_.value=f;for(var E=0;E<g.length;E++)(0,g[E])(f)},function(E){for(_.status="rejected",_.reason=E,E=0;E<g.length;E++)(0,g[E])(void 0)}),_}var lee=le.S;le.S=function(d,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&J2e(d,f),lee!==null&&lee(d,f)};var u0=Pe(null);function Wj(){var d=u0.current;return d!==null?d:Or.pooledCache}function JP(d,f){f===null?it(u0,u0.current):it(u0,f.pool)}function cee(){var d=Wj();return d===null?null:{parent:Es._currentValue,pool:d}}var YC=Error(r(460)),uee=Error(r(474)),ZP=Error(r(542)),Jj={then:function(){}};function dee(d){return d=d.status,d==="fulfilled"||d==="rejected"}function YP(){}function hee(d,f,g){switch(g=d[g],g===void 0?d.push(f):g!==f&&(f.then(YP,YP),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw d=f.reason,fee(d),d;default:if(typeof f.status=="string")f.then(YP,YP);else{if(d=Or,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=f,d.status="pending",d.then(function(_){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=_}},function(_){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw d=f.reason,fee(d),d}throw XC=f,YC}}var XC=null;function pee(){if(XC===null)throw Error(r(459));var d=XC;return XC=null,d}function fee(d){if(d===YC||d===ZP)throw Error(r(483))}var Gy=!1;function Zj(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yj(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Hy(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function qy(d,f,g){var _=d.updateQueue;if(_===null)return null;if(_=_.shared,(lr&2)!==0){var E=_.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),_.pending=f,f=VP(d),eee(d,null,g),f}return jP(d,_,f,g),VP(d)}function KC(d,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var _=f.lanes;_&=d.pendingLanes,g|=_,f.lanes=g,Ly(d,g)}}function Xj(d,f){var g=d.updateQueue,_=d.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var E=null,M=null;if(g=g.firstBaseUpdate,g!==null){do{var V={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};M===null?E=M=V:M=M.next=V,g=g.next}while(g!==null);M===null?E=M=f:M=M.next=f}else E=M=f;g={baseState:_.baseState,firstBaseUpdate:E,lastBaseUpdate:M,shared:_.shared,callbacks:_.callbacks},d.updateQueue=g;return}d=g.lastBaseUpdate,d===null?g.firstBaseUpdate=f:d.next=f,g.lastBaseUpdate=f}var Kj=!1;function QC(){if(Kj){var d=nx;if(d!==null)throw d}}function eI(d,f,g,_){Kj=!1;var E=d.updateQueue;Gy=!1;var M=E.firstBaseUpdate,V=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var oe=J,Ee=oe.next;oe.next=null,V===null?M=Ee:V.next=Ee,V=oe;var ze=d.alternate;ze!==null&&(ze=ze.updateQueue,J=ze.lastBaseUpdate,J!==V&&(J===null?ze.firstBaseUpdate=Ee:J.next=Ee,ze.lastBaseUpdate=oe))}if(M!==null){var He=E.baseState;V=0,ze=Ee=oe=null,J=M;do{var ke=J.lane&-536870913,Ae=ke!==J.lane;if(Ae?(Ri&ke)===ke:(_&ke)===ke){ke!==0&&ke===rx&&(Kj=!0),ze!==null&&(ze=ze.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var ei=d,Jt=J;ke=f;var yr=g;switch(Jt.tag){case 1:if(ei=Jt.payload,typeof ei=="function"){He=ei.call(yr,He,ke);break e}He=ei;break e;case 3:ei.flags=ei.flags&-65537|128;case 0:if(ei=Jt.payload,ke=typeof ei=="function"?ei.call(yr,He,ke):ei,ke==null)break e;He=h({},He,ke);break e;case 2:Gy=!0}}ke=J.callback,ke!==null&&(d.flags|=64,Ae&&(d.flags|=8192),Ae=E.callbacks,Ae===null?E.callbacks=[ke]:Ae.push(ke))}else Ae={lane:ke,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ze===null?(Ee=ze=Ae,oe=He):ze=ze.next=Ae,V|=ke;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;Ae=J,J=Ae.next,Ae.next=null,E.lastBaseUpdate=Ae,E.shared.pending=null}}while(!0);ze===null&&(oe=He),E.baseState=oe,E.firstBaseUpdate=Ee,E.lastBaseUpdate=ze,M===null&&(E.shared.lanes=0),eg|=V,d.lanes=V,d.memoizedState=He}}function mee(d,f){if(typeof d!="function")throw Error(r(191,d));d.call(f)}function yee(d,f){var g=d.callbacks;if(g!==null)for(d.callbacks=null,d=0;d<g.length;d++)mee(g[d],f)}var sx=Pe(null),XP=Pe(0);function gee(d,f){d=Of,it(XP,d),it(sx,f),Of=d|f.baseLanes}function Qj(){it(XP,Of),it(sx,sx.current)}function e6(){Of=XP.current,rt(sx),rt(XP)}var Wy=0,wi=null,fr=null,ps=null,KP=!1,ox=!1,d0=!1,QP=0,tI=0,ax=null,Y2e=0;function Qn(){throw Error(r(321))}function t6(d,f){if(f===null)return!1;for(var g=0;g<f.length&&g<d.length;g++)if(!X(d[g],f[g]))return!1;return!0}function i6(d,f,g,_,E,M){return Wy=M,wi=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,le.H=d===null||d.memoizedState===null?ete:tte,d0=!1,M=g(_,E),d0=!1,ox&&(M=bee(f,g,_,E)),vee(d),M}function vee(d){le.H=sL;var f=fr!==null&&fr.next!==null;if(Wy=0,ps=fr=wi=null,KP=!1,tI=0,ax=null,f)throw Error(r(300));d===null||Hs||(d=d.dependencies,d!==null&&qP(d)&&(Hs=!0))}function bee(d,f,g,_){wi=d;var E=0;do{if(ox&&(ax=null),tI=0,ox=!1,25<=E)throw Error(r(301));if(E+=1,ps=fr=null,d.updateQueue!=null){var M=d.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}le.H=rke,M=f(g,_)}while(ox);return M}function X2e(){var d=le.H,f=d.useState()[0];return f=typeof f.then=="function"?iI(f):f,d=d.useState()[0],(fr!==null?fr.memoizedState:null)!==d&&(wi.flags|=1024),f}function r6(){var d=QP!==0;return QP=0,d}function n6(d,f,g){f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~g}function s6(d){if(KP){for(d=d.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}KP=!1}Wy=0,ps=fr=wi=null,ox=!1,tI=QP=0,ax=null}function Za(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?wi.memoizedState=ps=d:ps=ps.next=d,ps}function fs(){if(fr===null){var d=wi.alternate;d=d!==null?d.memoizedState:null}else d=fr.next;var f=ps===null?wi.memoizedState:ps.next;if(f!==null)ps=f,fr=d;else{if(d===null)throw wi.alternate===null?Error(r(467)):Error(r(310));fr=d,d={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},ps===null?wi.memoizedState=ps=d:ps=ps.next=d}return ps}function o6(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function iI(d){var f=tI;return tI+=1,ax===null&&(ax=[]),d=hee(ax,d,f),f=wi,(ps===null?f.memoizedState:ps.next)===null&&(f=f.alternate,le.H=f===null||f.memoizedState===null?ete:tte),d}function eL(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return iI(d);if(d.$$typeof===A)return Lo(d)}throw Error(r(438,String(d)))}function a6(d){var f=null,g=wi.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var _=wi.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=o6(),wi.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(d),_=0;_<d;_++)g[_]=ee;return f.index++,g}function Ef(d,f){return typeof f=="function"?f(d):f}function tL(d){var f=fs();return l6(f,fr,d)}function l6(d,f,g){var _=d.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=g;var E=d.baseQueue,M=_.pending;if(M!==null){if(E!==null){var V=E.next;E.next=M.next,M.next=V}f.baseQueue=E=M,_.pending=null}if(M=d.baseState,E===null)d.memoizedState=M;else{f=E.next;var J=V=null,oe=null,Ee=f,ze=!1;do{var He=Ee.lane&-536870913;if(He!==Ee.lane?(Ri&He)===He:(Wy&He)===He){var ke=Ee.revertLane;if(ke===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),He===rx&&(ze=!0);else if((Wy&ke)===ke){Ee=Ee.next,ke===rx&&(ze=!0);continue}else He={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(J=oe=He,V=M):oe=oe.next=He,wi.lanes|=ke,eg|=ke;He=Ee.action,d0&&g(M,He),M=Ee.hasEagerState?Ee.eagerState:g(M,He)}else ke={lane:He,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},oe===null?(J=oe=ke,V=M):oe=oe.next=ke,wi.lanes|=He,eg|=He;Ee=Ee.next}while(Ee!==null&&Ee!==f);if(oe===null?V=M:oe.next=J,!X(M,d.memoizedState)&&(Hs=!0,ze&&(g=nx,g!==null)))throw g;d.memoizedState=M,d.baseState=V,d.baseQueue=oe,_.lastRenderedState=M}return E===null&&(_.lanes=0),[d.memoizedState,_.dispatch]}function c6(d){var f=fs(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var _=g.dispatch,E=g.pending,M=f.memoizedState;if(E!==null){g.pending=null;var V=E=E.next;do M=d(M,V.action),V=V.next;while(V!==E);X(M,f.memoizedState)||(Hs=!0),f.memoizedState=M,f.baseQueue===null&&(f.baseState=M),g.lastRenderedState=M}return[M,_]}function wee(d,f,g){var _=wi,E=fs(),M=Wi;if(M){if(g===void 0)throw Error(r(407));g=g()}else g=f();var V=!X((fr||E).memoizedState,g);V&&(E.memoizedState=g,Hs=!0),E=E.queue;var J=See.bind(null,_,E,d);if(rI(2048,8,J,[d]),E.getSnapshot!==f||V||ps!==null&&ps.memoizedState.tag&1){if(_.flags|=2048,lx(9,iL(),xee.bind(null,_,E,g,f),null),Or===null)throw Error(r(349));M||(Wy&124)!==0||_ee(_,f,g)}return g}function _ee(d,f,g){d.flags|=16384,d={getSnapshot:f,value:g},f=wi.updateQueue,f===null?(f=o6(),wi.updateQueue=f,f.stores=[d]):(g=f.stores,g===null?f.stores=[d]:g.push(d))}function xee(d,f,g,_){f.value=g,f.getSnapshot=_,$ee(f)&&Tee(d)}function See(d,f,g){return g(function(){$ee(f)&&Tee(d)})}function $ee(d){var f=d.getSnapshot;d=d.value;try{var g=f();return!X(d,g)}catch{return!0}}function Tee(d){var f=Q1(d,2);f!==null&&zl(f,d,2)}function u6(d){var f=Za();if(typeof d=="function"){var g=d;if(d=g(),d0){qa(!0);try{g()}finally{qa(!1)}}}return f.memoizedState=f.baseState=d,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:d},f}function Eee(d,f,g,_){return d.baseState=g,l6(d,fr,typeof _=="function"?_:Ef)}function K2e(d,f,g,_,E){if(nL(d))throw Error(r(485));if(d=f.action,d!==null){var M={payload:E,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){M.listeners.push(V)}};le.T!==null?g(!0):M.isTransition=!1,_(M),g=f.pending,g===null?(M.next=f.pending=M,Cee(f,M)):(M.next=g.next,f.pending=g.next=M)}}function Cee(d,f){var g=f.action,_=f.payload,E=d.state;if(f.isTransition){var M=le.T,V={};le.T=V;try{var J=g(E,_),oe=le.S;oe!==null&&oe(V,J),Iee(d,f,J)}catch(Ee){d6(d,f,Ee)}finally{le.T=M}}else try{M=g(E,_),Iee(d,f,M)}catch(Ee){d6(d,f,Ee)}}function Iee(d,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){Mee(d,f,_)},function(_){return d6(d,f,_)}):Mee(d,f,g)}function Mee(d,f,g){f.status="fulfilled",f.value=g,kee(f),d.state=g,f=d.pending,f!==null&&(g=f.next,g===f?d.pending=null:(g=g.next,f.next=g,Cee(d,g)))}function d6(d,f,g){var _=d.pending;if(d.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=g,kee(f),f=f.next;while(f!==_)}d.action=null}function kee(d){d=d.listeners;for(var f=0;f<d.length;f++)(0,d[f])()}function Aee(d,f){return f}function Oee(d,f){if(Wi){var g=Or.formState;if(g!==null){e:{var _=wi;if(Wi){if(On){t:{for(var E=On,M=th;E.nodeType!==8;){if(!M){E=null;break t}if(E=Ru(E.nextSibling),E===null){E=null;break t}}M=E.data,E=M==="F!"||M==="F"?E:null}if(E){On=Ru(E.nextSibling),_=E.data==="F!";break e}}a0(_)}_=!1}_&&(f=g[0])}}return g=Za(),g.memoizedState=g.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aee,lastRenderedState:f},g.queue=_,g=Xee.bind(null,wi,_),_.dispatch=g,_=u6(!1),M=y6.bind(null,wi,!1,_.queue),_=Za(),E={state:f,dispatch:null,action:d,pending:null},_.queue=E,g=K2e.bind(null,wi,E,M,g),E.dispatch=g,_.memoizedState=d,[f,g,!1]}function Pee(d){var f=fs();return Lee(f,fr,d)}function Lee(d,f,g){if(f=l6(d,f,Aee)[0],d=tL(Ef)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=iI(f)}catch(V){throw V===YC?ZP:V}else _=f;f=fs();var E=f.queue,M=E.dispatch;return g!==f.memoizedState&&(wi.flags|=2048,lx(9,iL(),Q2e.bind(null,E,g),null)),[_,M,d]}function Q2e(d,f){d.action=f}function Ree(d){var f=fs(),g=fr;if(g!==null)return Lee(f,g,d);fs(),f=f.memoizedState,g=fs();var _=g.queue.dispatch;return g.memoizedState=d,[f,_,!1]}function lx(d,f,g,_){return d={tag:d,create:g,deps:_,inst:f,next:null},f=wi.updateQueue,f===null&&(f=o6(),wi.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=d.next=d:(_=g.next,g.next=d,d.next=_,f.lastEffect=d),d}function iL(){return{destroy:void 0,resource:void 0}}function Dee(){return fs().memoizedState}function rL(d,f,g,_){var E=Za();_=_===void 0?null:_,wi.flags|=d,E.memoizedState=lx(1|f,iL(),g,_)}function rI(d,f,g,_){var E=fs();_=_===void 0?null:_;var M=E.memoizedState.inst;fr!==null&&_!==null&&t6(_,fr.memoizedState.deps)?E.memoizedState=lx(f,M,g,_):(wi.flags|=d,E.memoizedState=lx(1|f,M,g,_))}function Nee(d,f){rL(8390656,8,d,f)}function zee(d,f){rI(2048,8,d,f)}function Fee(d,f){return rI(4,2,d,f)}function Uee(d,f){return rI(4,4,d,f)}function jee(d,f){if(typeof f=="function"){d=d();var g=f(d);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function Vee(d,f,g){g=g!=null?g.concat([d]):null,rI(4,4,jee.bind(null,f,d),g)}function h6(){}function Bee(d,f){var g=fs();f=f===void 0?null:f;var _=g.memoizedState;return f!==null&&t6(f,_[1])?_[0]:(g.memoizedState=[d,f],d)}function Gee(d,f){var g=fs();f=f===void 0?null:f;var _=g.memoizedState;if(f!==null&&t6(f,_[1]))return _[0];if(_=d(),d0){qa(!0);try{d()}finally{qa(!1)}}return g.memoizedState=[_,f],_}function p6(d,f,g){return g===void 0||(Wy&1073741824)!==0?d.memoizedState=f:(d.memoizedState=g,d=Wte(),wi.lanes|=d,eg|=d,g)}function Hee(d,f,g,_){return X(g,f)?g:sx.current!==null?(d=p6(d,g,_),X(d,f)||(Hs=!0),d):(Wy&42)===0?(Hs=!0,d.memoizedState=g):(d=Wte(),wi.lanes|=d,eg|=d,f)}function qee(d,f,g,_,E){var M=be.p;be.p=M!==0&&8>M?M:8;var V=le.T,J={};le.T=J,y6(d,!1,f,g);try{var oe=E(),Ee=le.S;if(Ee!==null&&Ee(J,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var ze=Z2e(oe,_);nI(d,f,ze,Nl(d))}else nI(d,f,_,Nl(d))}catch(He){nI(d,f,{then:function(){},status:"rejected",reason:He},Nl())}finally{be.p=M,le.T=V}}function eke(){}function f6(d,f,g,_){if(d.tag!==5)throw Error(r(476));var E=Wee(d).queue;qee(d,E,f,Oe,g===null?eke:function(){return Jee(d),g(_)})}function Wee(d){var f=d.memoizedState;if(f!==null)return f;f={memoizedState:Oe,baseState:Oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:Oe},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:g},next:null},d.memoizedState=f,d=d.alternate,d!==null&&(d.memoizedState=f),f}function Jee(d){var f=Wee(d).next.queue;nI(d,f,{},Nl())}function m6(){return Lo(xI)}function Zee(){return fs().memoizedState}function Yee(){return fs().memoizedState}function tke(d){for(var f=d.return;f!==null;){switch(f.tag){case 24:case 3:var g=Nl();d=Hy(g);var _=qy(f,d,g);_!==null&&(zl(_,f,g),KC(_,f,g)),f={cache:Hj()},d.payload=f;return}f=f.return}}function ike(d,f,g){var _=Nl();g={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},nL(d)?Kee(f,g):(g=Rj(d,f,g,_),g!==null&&(zl(g,d,_),Qee(g,f,_)))}function Xee(d,f,g){var _=Nl();nI(d,f,g,_)}function nI(d,f,g,_){var E={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(nL(d))Kee(f,E);else{var M=d.alternate;if(d.lanes===0&&(M===null||M.lanes===0)&&(M=f.lastRenderedReducer,M!==null))try{var V=f.lastRenderedState,J=M(V,g);if(E.hasEagerState=!0,E.eagerState=J,X(J,V))return jP(d,f,E,0),Or===null&&UP(),!1}catch{}finally{}if(g=Rj(d,f,E,_),g!==null)return zl(g,d,_),Qee(g,f,_),!0}return!1}function y6(d,f,g,_){if(_={lane:2,revertLane:J6(),action:_,hasEagerState:!1,eagerState:null,next:null},nL(d)){if(f)throw Error(r(479))}else f=Rj(d,g,_,2),f!==null&&zl(f,d,2)}function nL(d){var f=d.alternate;return d===wi||f!==null&&f===wi}function Kee(d,f){ox=KP=!0;var g=d.pending;g===null?f.next=f:(f.next=g.next,g.next=f),d.pending=f}function Qee(d,f,g){if((g&4194048)!==0){var _=f.lanes;_&=d.pendingLanes,g|=_,f.lanes=g,Ly(d,g)}}var sL={readContext:Lo,use:eL,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn},ete={readContext:Lo,use:eL,useCallback:function(d,f){return Za().memoizedState=[d,f===void 0?null:f],d},useContext:Lo,useEffect:Nee,useImperativeHandle:function(d,f,g){g=g!=null?g.concat([d]):null,rL(4194308,4,jee.bind(null,f,d),g)},useLayoutEffect:function(d,f){return rL(4194308,4,d,f)},useInsertionEffect:function(d,f){rL(4,2,d,f)},useMemo:function(d,f){var g=Za();f=f===void 0?null:f;var _=d();if(d0){qa(!0);try{d()}finally{qa(!1)}}return g.memoizedState=[_,f],_},useReducer:function(d,f,g){var _=Za();if(g!==void 0){var E=g(f);if(d0){qa(!0);try{g(f)}finally{qa(!1)}}}else E=f;return _.memoizedState=_.baseState=E,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:E},_.queue=d,d=d.dispatch=ike.bind(null,wi,d),[_.memoizedState,d]},useRef:function(d){var f=Za();return d={current:d},f.memoizedState=d},useState:function(d){d=u6(d);var f=d.queue,g=Xee.bind(null,wi,f);return f.dispatch=g,[d.memoizedState,g]},useDebugValue:h6,useDeferredValue:function(d,f){var g=Za();return p6(g,d,f)},useTransition:function(){var d=u6(!1);return d=qee.bind(null,wi,d.queue,!0,!1),Za().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,f,g){var _=wi,E=Za();if(Wi){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),Or===null)throw Error(r(349));(Ri&124)!==0||_ee(_,f,g)}E.memoizedState=g;var M={value:g,getSnapshot:f};return E.queue=M,Nee(See.bind(null,_,M,d),[d]),_.flags|=2048,lx(9,iL(),xee.bind(null,_,M,g,f),null),g},useId:function(){var d=Za(),f=Or.identifierPrefix;if(Wi){var g=Sf,_=xf;g=(_&~(1<<32-ao(_)-1)).toString(32)+g,f=""+f+"R"+g,g=QP++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=Y2e++,f=""+f+"r"+g.toString(32)+"";return d.memoizedState=f},useHostTransitionStatus:m6,useFormState:Oee,useActionState:Oee,useOptimistic:function(d){var f=Za();f.memoizedState=f.baseState=d;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=y6.bind(null,wi,!0,g),g.dispatch=f,[d,f]},useMemoCache:a6,useCacheRefresh:function(){return Za().memoizedState=tke.bind(null,wi)}},tte={readContext:Lo,use:eL,useCallback:Bee,useContext:Lo,useEffect:zee,useImperativeHandle:Vee,useInsertionEffect:Fee,useLayoutEffect:Uee,useMemo:Gee,useReducer:tL,useRef:Dee,useState:function(){return tL(Ef)},useDebugValue:h6,useDeferredValue:function(d,f){var g=fs();return Hee(g,fr.memoizedState,d,f)},useTransition:function(){var d=tL(Ef)[0],f=fs().memoizedState;return[typeof d=="boolean"?d:iI(d),f]},useSyncExternalStore:wee,useId:Zee,useHostTransitionStatus:m6,useFormState:Pee,useActionState:Pee,useOptimistic:function(d,f){var g=fs();return Eee(g,fr,d,f)},useMemoCache:a6,useCacheRefresh:Yee},rke={readContext:Lo,use:eL,useCallback:Bee,useContext:Lo,useEffect:zee,useImperativeHandle:Vee,useInsertionEffect:Fee,useLayoutEffect:Uee,useMemo:Gee,useReducer:c6,useRef:Dee,useState:function(){return c6(Ef)},useDebugValue:h6,useDeferredValue:function(d,f){var g=fs();return fr===null?p6(g,d,f):Hee(g,fr.memoizedState,d,f)},useTransition:function(){var d=c6(Ef)[0],f=fs().memoizedState;return[typeof d=="boolean"?d:iI(d),f]},useSyncExternalStore:wee,useId:Zee,useHostTransitionStatus:m6,useFormState:Ree,useActionState:Ree,useOptimistic:function(d,f){var g=fs();return fr!==null?Eee(g,fr,d,f):(g.baseState=d,[d,g.queue.dispatch])},useMemoCache:a6,useCacheRefresh:Yee},cx=null,sI=0;function oL(d){var f=sI;return sI+=1,cx===null&&(cx=[]),hee(cx,d,f)}function oI(d,f){f=f.props.ref,d.ref=f!==void 0?f:null}function aL(d,f){throw f.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(f),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d)))}function ite(d){var f=d._init;return f(d._payload)}function rte(d){function f(_e,me){if(d){var Te=_e.deletions;Te===null?(_e.deletions=[me],_e.flags|=16):Te.push(me)}}function g(_e,me){if(!d)return null;for(;me!==null;)f(_e,me),me=me.sibling;return null}function _(_e){for(var me=new Map;_e!==null;)_e.key!==null?me.set(_e.key,_e):me.set(_e.index,_e),_e=_e.sibling;return me}function E(_e,me){return _e=_f(_e,me),_e.index=0,_e.sibling=null,_e}function M(_e,me,Te){return _e.index=Te,d?(Te=_e.alternate,Te!==null?(Te=Te.index,Te<me?(_e.flags|=67108866,me):Te):(_e.flags|=67108866,me)):(_e.flags|=1048576,me)}function V(_e){return d&&_e.alternate===null&&(_e.flags|=67108866),_e}function J(_e,me,Te,je){return me===null||me.tag!==6?(me=Nj(Te,_e.mode,je),me.return=_e,me):(me=E(me,Te),me.return=_e,me)}function oe(_e,me,Te,je){var Ct=Te.type;return Ct===w?ze(_e,me,Te.props.children,je,Te.key):me!==null&&(me.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===W&&ite(Ct)===me.type)?(me=E(me,Te.props),oI(me,Te),me.return=_e,me):(me=BP(Te.type,Te.key,Te.props,null,_e.mode,je),oI(me,Te),me.return=_e,me)}function Ee(_e,me,Te,je){return me===null||me.tag!==4||me.stateNode.containerInfo!==Te.containerInfo||me.stateNode.implementation!==Te.implementation?(me=zj(Te,_e.mode,je),me.return=_e,me):(me=E(me,Te.children||[]),me.return=_e,me)}function ze(_e,me,Te,je,Ct){return me===null||me.tag!==7?(me=r0(Te,_e.mode,je,Ct),me.return=_e,me):(me=E(me,Te),me.return=_e,me)}function He(_e,me,Te){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Nj(""+me,_e.mode,Te),me.return=_e,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return Te=BP(me.type,me.key,me.props,null,_e.mode,Te),oI(Te,me),Te.return=_e,Te;case v:return me=zj(me,_e.mode,Te),me.return=_e,me;case W:var je=me._init;return me=je(me._payload),He(_e,me,Te)}if(Se(me)||fe(me))return me=r0(me,_e.mode,Te,null),me.return=_e,me;if(typeof me.then=="function")return He(_e,oL(me),Te);if(me.$$typeof===A)return He(_e,WP(_e,me),Te);aL(_e,me)}return null}function ke(_e,me,Te,je){var Ct=me!==null?me.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Ct!==null?null:J(_e,me,""+Te,je);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:return Te.key===Ct?oe(_e,me,Te,je):null;case v:return Te.key===Ct?Ee(_e,me,Te,je):null;case W:return Ct=Te._init,Te=Ct(Te._payload),ke(_e,me,Te,je)}if(Se(Te)||fe(Te))return Ct!==null?null:ze(_e,me,Te,je,null);if(typeof Te.then=="function")return ke(_e,me,oL(Te),je);if(Te.$$typeof===A)return ke(_e,me,WP(_e,Te),je);aL(_e,Te)}return null}function Ae(_e,me,Te,je,Ct){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return _e=_e.get(Te)||null,J(me,_e,""+je,Ct);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case y:return _e=_e.get(je.key===null?Te:je.key)||null,oe(me,_e,je,Ct);case v:return _e=_e.get(je.key===null?Te:je.key)||null,Ee(me,_e,je,Ct);case W:var xi=je._init;return je=xi(je._payload),Ae(_e,me,Te,je,Ct)}if(Se(je)||fe(je))return _e=_e.get(Te)||null,ze(me,_e,je,Ct,null);if(typeof je.then=="function")return Ae(_e,me,Te,oL(je),Ct);if(je.$$typeof===A)return Ae(_e,me,Te,WP(me,je),Ct);aL(me,je)}return null}function ei(_e,me,Te,je){for(var Ct=null,xi=null,Nt=me,Zt=me=0,Ws=null;Nt!==null&&Zt<Te.length;Zt++){Nt.index>Zt?(Ws=Nt,Nt=null):Ws=Nt.sibling;var Ui=ke(_e,Nt,Te[Zt],je);if(Ui===null){Nt===null&&(Nt=Ws);break}d&&Nt&&Ui.alternate===null&&f(_e,Nt),me=M(Ui,me,Zt),xi===null?Ct=Ui:xi.sibling=Ui,xi=Ui,Nt=Ws}if(Zt===Te.length)return g(_e,Nt),Wi&&s0(_e,Zt),Ct;if(Nt===null){for(;Zt<Te.length;Zt++)Nt=He(_e,Te[Zt],je),Nt!==null&&(me=M(Nt,me,Zt),xi===null?Ct=Nt:xi.sibling=Nt,xi=Nt);return Wi&&s0(_e,Zt),Ct}for(Nt=_(Nt);Zt<Te.length;Zt++)Ws=Ae(Nt,_e,Zt,Te[Zt],je),Ws!==null&&(d&&Ws.alternate!==null&&Nt.delete(Ws.key===null?Zt:Ws.key),me=M(Ws,me,Zt),xi===null?Ct=Ws:xi.sibling=Ws,xi=Ws);return d&&Nt.forEach(function(cg){return f(_e,cg)}),Wi&&s0(_e,Zt),Ct}function Jt(_e,me,Te,je){if(Te==null)throw Error(r(151));for(var Ct=null,xi=null,Nt=me,Zt=me=0,Ws=null,Ui=Te.next();Nt!==null&&!Ui.done;Zt++,Ui=Te.next()){Nt.index>Zt?(Ws=Nt,Nt=null):Ws=Nt.sibling;var cg=ke(_e,Nt,Ui.value,je);if(cg===null){Nt===null&&(Nt=Ws);break}d&&Nt&&cg.alternate===null&&f(_e,Nt),me=M(cg,me,Zt),xi===null?Ct=cg:xi.sibling=cg,xi=cg,Nt=Ws}if(Ui.done)return g(_e,Nt),Wi&&s0(_e,Zt),Ct;if(Nt===null){for(;!Ui.done;Zt++,Ui=Te.next())Ui=He(_e,Ui.value,je),Ui!==null&&(me=M(Ui,me,Zt),xi===null?Ct=Ui:xi.sibling=Ui,xi=Ui);return Wi&&s0(_e,Zt),Ct}for(Nt=_(Nt);!Ui.done;Zt++,Ui=Te.next())Ui=Ae(Nt,_e,Zt,Ui.value,je),Ui!==null&&(d&&Ui.alternate!==null&&Nt.delete(Ui.key===null?Zt:Ui.key),me=M(Ui,me,Zt),xi===null?Ct=Ui:xi.sibling=Ui,xi=Ui);return d&&Nt.forEach(function(nAe){return f(_e,nAe)}),Wi&&s0(_e,Zt),Ct}function yr(_e,me,Te,je){if(typeof Te=="object"&&Te!==null&&Te.type===w&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:e:{for(var Ct=Te.key;me!==null;){if(me.key===Ct){if(Ct=Te.type,Ct===w){if(me.tag===7){g(_e,me.sibling),je=E(me,Te.props.children),je.return=_e,_e=je;break e}}else if(me.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===W&&ite(Ct)===me.type){g(_e,me.sibling),je=E(me,Te.props),oI(je,Te),je.return=_e,_e=je;break e}g(_e,me);break}else f(_e,me);me=me.sibling}Te.type===w?(je=r0(Te.props.children,_e.mode,je,Te.key),je.return=_e,_e=je):(je=BP(Te.type,Te.key,Te.props,null,_e.mode,je),oI(je,Te),je.return=_e,_e=je)}return V(_e);case v:e:{for(Ct=Te.key;me!==null;){if(me.key===Ct)if(me.tag===4&&me.stateNode.containerInfo===Te.containerInfo&&me.stateNode.implementation===Te.implementation){g(_e,me.sibling),je=E(me,Te.children||[]),je.return=_e,_e=je;break e}else{g(_e,me);break}else f(_e,me);me=me.sibling}je=zj(Te,_e.mode,je),je.return=_e,_e=je}return V(_e);case W:return Ct=Te._init,Te=Ct(Te._payload),yr(_e,me,Te,je)}if(Se(Te))return ei(_e,me,Te,je);if(fe(Te)){if(Ct=fe(Te),typeof Ct!="function")throw Error(r(150));return Te=Ct.call(Te),Jt(_e,me,Te,je)}if(typeof Te.then=="function")return yr(_e,me,oL(Te),je);if(Te.$$typeof===A)return yr(_e,me,WP(_e,Te),je);aL(_e,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,me!==null&&me.tag===6?(g(_e,me.sibling),je=E(me,Te),je.return=_e,_e=je):(g(_e,me),je=Nj(Te,_e.mode,je),je.return=_e,_e=je),V(_e)):g(_e,me)}return function(_e,me,Te,je){try{sI=0;var Ct=yr(_e,me,Te,je);return cx=null,Ct}catch(Nt){if(Nt===YC||Nt===ZP)throw Nt;var xi=Pl(29,Nt,null,_e.mode);return xi.lanes=je,xi.return=_e,xi}finally{}}}var ux=rte(!0),nte=rte(!1),Rc=Pe(null),ih=null;function Jy(d){var f=d.alternate;it(Cs,Cs.current&1),it(Rc,d),ih===null&&(f===null||sx.current!==null||f.memoizedState!==null)&&(ih=d)}function ste(d){if(d.tag===22){if(it(Cs,Cs.current),it(Rc,d),ih===null){var f=d.alternate;f!==null&&f.memoizedState!==null&&(ih=d)}}else Zy()}function Zy(){it(Cs,Cs.current),it(Rc,Rc.current)}function Cf(d){rt(Rc),ih===d&&(ih=null),rt(Cs)}var Cs=Pe(0);function lL(d){for(var f=d;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||oV(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function g6(d,f,g,_){f=d.memoizedState,g=g(_,f),g=g==null?f:h({},f,g),d.memoizedState=g,d.lanes===0&&(d.updateQueue.baseState=g)}var v6={enqueueSetState:function(d,f,g){d=d._reactInternals;var _=Nl(),E=Hy(_);E.payload=f,g!=null&&(E.callback=g),f=qy(d,E,_),f!==null&&(zl(f,d,_),KC(f,d,_))},enqueueReplaceState:function(d,f,g){d=d._reactInternals;var _=Nl(),E=Hy(_);E.tag=1,E.payload=f,g!=null&&(E.callback=g),f=qy(d,E,_),f!==null&&(zl(f,d,_),KC(f,d,_))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var g=Nl(),_=Hy(g);_.tag=2,f!=null&&(_.callback=f),f=qy(d,_,g),f!==null&&(zl(f,d,g),KC(f,d,g))}};function ote(d,f,g,_,E,M,V){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(_,M,V):f.prototype&&f.prototype.isPureReactComponent?!de(g,_)||!de(E,M):!0}function ate(d,f,g,_){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,_),f.state!==d&&v6.enqueueReplaceState(f,f.state,null)}function h0(d,f){var g=f;if("ref"in f){g={};for(var _ in f)_!=="ref"&&(g[_]=f[_])}if(d=d.defaultProps){g===f&&(g=h({},g));for(var E in d)g[E]===void 0&&(g[E]=d[E])}return g}var cL=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function lte(d){cL(d)}function cte(d){console.error(d)}function ute(d){cL(d)}function uL(d,f){try{var g=d.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function dte(d,f,g){try{var _=d.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function b6(d,f,g){return g=Hy(g),g.tag=3,g.payload={element:null},g.callback=function(){uL(d,f)},g}function hte(d){return d=Hy(d),d.tag=3,d}function pte(d,f,g,_){var E=g.type.getDerivedStateFromError;if(typeof E=="function"){var M=_.value;d.payload=function(){return E(M)},d.callback=function(){dte(f,g,_)}}var V=g.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(d.callback=function(){dte(f,g,_),typeof E!="function"&&(tg===null?tg=new Set([this]):tg.add(this));var J=_.stack;this.componentDidCatch(_.value,{componentStack:J!==null?J:""})})}function nke(d,f,g,_,E){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=g.alternate,f!==null&&WC(f,g,E,!0),g=Rc.current,g!==null){switch(g.tag){case 13:return ih===null?B6():g.alternate===null&&Pn===0&&(Pn=3),g.flags&=-257,g.flags|=65536,g.lanes=E,_===Jj?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([_]):f.add(_),H6(d,_,E)),!1;case 22:return g.flags|=65536,_===Jj?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([_]):g.add(_)),H6(d,_,E)),!1}throw Error(r(435,g.tag))}return H6(d,_,E),B6(),!1}if(Wi)return f=Rc.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,_!==jj&&(d=Error(r(422),{cause:_}),qC(Ac(d,g)))):(_!==jj&&(f=Error(r(423),{cause:_}),qC(Ac(f,g))),d=d.current.alternate,d.flags|=65536,E&=-E,d.lanes|=E,_=Ac(_,g),E=b6(d.stateNode,_,E),Xj(d,E),Pn!==4&&(Pn=2)),!1;var M=Error(r(520),{cause:_});if(M=Ac(M,g),pI===null?pI=[M]:pI.push(M),Pn!==4&&(Pn=2),f===null)return!0;_=Ac(_,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,d=E&-E,g.lanes|=d,d=b6(g.stateNode,_,d),Xj(g,d),!1;case 1:if(f=g.type,M=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(tg===null||!tg.has(M))))return g.flags|=65536,E&=-E,g.lanes|=E,E=hte(E),pte(E,d,g,_),Xj(g,E),!1}g=g.return}while(g!==null);return!1}var fte=Error(r(461)),Hs=!1;function uo(d,f,g,_){f.child=d===null?nte(f,null,g,_):ux(f,d.child,g,_)}function mte(d,f,g,_,E){g=g.render;var M=f.ref;if("ref"in _){var V={};for(var J in _)J!=="ref"&&(V[J]=_[J])}else V=_;return c0(f),_=i6(d,f,g,V,M,E),J=r6(),d!==null&&!Hs?(n6(d,f,E),If(d,f,E)):(Wi&&J&&Fj(f),f.flags|=1,uo(d,f,_,E),f.child)}function yte(d,f,g,_,E){if(d===null){var M=g.type;return typeof M=="function"&&!Dj(M)&&M.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=M,gte(d,f,M,_,E)):(d=BP(g.type,null,_,f,f.mode,E),d.ref=f.ref,d.return=f,f.child=d)}if(M=d.child,!C6(d,E)){var V=M.memoizedProps;if(g=g.compare,g=g!==null?g:de,g(V,_)&&d.ref===f.ref)return If(d,f,E)}return f.flags|=1,d=_f(M,_),d.ref=f.ref,d.return=f,f.child=d}function gte(d,f,g,_,E){if(d!==null){var M=d.memoizedProps;if(de(M,_)&&d.ref===f.ref)if(Hs=!1,f.pendingProps=_=M,C6(d,E))(d.flags&131072)!==0&&(Hs=!0);else return f.lanes=d.lanes,If(d,f,E)}return w6(d,f,g,_,E)}function vte(d,f,g){var _=f.pendingProps,E=_.children,M=d!==null?d.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=M!==null?M.baseLanes|g:g,d!==null){for(E=f.child=d.child,M=0;E!==null;)M=M|E.lanes|E.childLanes,E=E.sibling;f.childLanes=M&~_}else f.childLanes=0,f.child=null;return bte(d,f,_,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},d!==null&&JP(f,M!==null?M.cachePool:null),M!==null?gee(f,M):Qj(),ste(f);else return f.lanes=f.childLanes=536870912,bte(d,f,M!==null?M.baseLanes|g:g,g)}else M!==null?(JP(f,M.cachePool),gee(f,M),Zy(),f.memoizedState=null):(d!==null&&JP(f,null),Qj(),Zy());return uo(d,f,E,g),f.child}function bte(d,f,g,_){var E=Wj();return E=E===null?null:{parent:Es._currentValue,pool:E},f.memoizedState={baseLanes:g,cachePool:E},d!==null&&JP(f,null),Qj(),ste(f),d!==null&&WC(d,f,_,!0),null}function dL(d,f){var g=f.ref;if(g===null)d!==null&&d.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(d===null||d.ref!==g)&&(f.flags|=4194816)}}function w6(d,f,g,_,E){return c0(f),g=i6(d,f,g,_,void 0,E),_=r6(),d!==null&&!Hs?(n6(d,f,E),If(d,f,E)):(Wi&&_&&Fj(f),f.flags|=1,uo(d,f,g,E),f.child)}function wte(d,f,g,_,E,M){return c0(f),f.updateQueue=null,g=bee(f,_,g,E),vee(d),_=r6(),d!==null&&!Hs?(n6(d,f,M),If(d,f,M)):(Wi&&_&&Fj(f),f.flags|=1,uo(d,f,g,M),f.child)}function _te(d,f,g,_,E){if(c0(f),f.stateNode===null){var M=ex,V=g.contextType;typeof V=="object"&&V!==null&&(M=Lo(V)),M=new g(_,M),f.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=v6,f.stateNode=M,M._reactInternals=f,M=f.stateNode,M.props=_,M.state=f.memoizedState,M.refs={},Zj(f),V=g.contextType,M.context=typeof V=="object"&&V!==null?Lo(V):ex,M.state=f.memoizedState,V=g.getDerivedStateFromProps,typeof V=="function"&&(g6(f,g,V,_),M.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(V=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),V!==M.state&&v6.enqueueReplaceState(M,M.state,null),eI(f,_,M,E),QC(),M.state=f.memoizedState),typeof M.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(d===null){M=f.stateNode;var J=f.memoizedProps,oe=h0(g,J);M.props=oe;var Ee=M.context,ze=g.contextType;V=ex,typeof ze=="object"&&ze!==null&&(V=Lo(ze));var He=g.getDerivedStateFromProps;ze=typeof He=="function"||typeof M.getSnapshotBeforeUpdate=="function",J=f.pendingProps!==J,ze||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(J||Ee!==V)&&ate(f,M,_,V),Gy=!1;var ke=f.memoizedState;M.state=ke,eI(f,_,M,E),QC(),Ee=f.memoizedState,J||ke!==Ee||Gy?(typeof He=="function"&&(g6(f,g,He,_),Ee=f.memoizedState),(oe=Gy||ote(f,g,oe,_,ke,Ee,V))?(ze||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(f.flags|=4194308)):(typeof M.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=Ee),M.props=_,M.state=Ee,M.context=V,_=oe):(typeof M.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{M=f.stateNode,Yj(d,f),V=f.memoizedProps,ze=h0(g,V),M.props=ze,He=f.pendingProps,ke=M.context,Ee=g.contextType,oe=ex,typeof Ee=="object"&&Ee!==null&&(oe=Lo(Ee)),J=g.getDerivedStateFromProps,(Ee=typeof J=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(V!==He||ke!==oe)&&ate(f,M,_,oe),Gy=!1,ke=f.memoizedState,M.state=ke,eI(f,_,M,E),QC();var Ae=f.memoizedState;V!==He||ke!==Ae||Gy||d!==null&&d.dependencies!==null&&qP(d.dependencies)?(typeof J=="function"&&(g6(f,g,J,_),Ae=f.memoizedState),(ze=Gy||ote(f,g,ze,_,ke,Ae,oe)||d!==null&&d.dependencies!==null&&qP(d.dependencies))?(Ee||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(_,Ae,oe),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(_,Ae,oe)),typeof M.componentDidUpdate=="function"&&(f.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof M.componentDidUpdate!="function"||V===d.memoizedProps&&ke===d.memoizedState||(f.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||V===d.memoizedProps&&ke===d.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=Ae),M.props=_,M.state=Ae,M.context=oe,_=ze):(typeof M.componentDidUpdate!="function"||V===d.memoizedProps&&ke===d.memoizedState||(f.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||V===d.memoizedProps&&ke===d.memoizedState||(f.flags|=1024),_=!1)}return M=_,dL(d,f),_=(f.flags&128)!==0,M||_?(M=f.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:M.render(),f.flags|=1,d!==null&&_?(f.child=ux(f,d.child,null,E),f.child=ux(f,null,g,E)):uo(d,f,g,E),f.memoizedState=M.state,d=f.child):d=If(d,f,E),d}function xte(d,f,g,_){return HC(),f.flags|=256,uo(d,f,g,_),f.child}var _6={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function x6(d){return{baseLanes:d,cachePool:cee()}}function S6(d,f,g){return d=d!==null?d.childLanes&~g:0,f&&(d|=Dc),d}function Ste(d,f,g){var _=f.pendingProps,E=!1,M=(f.flags&128)!==0,V;if((V=M)||(V=d!==null&&d.memoizedState===null?!1:(Cs.current&2)!==0),V&&(E=!0,f.flags&=-129),V=(f.flags&32)!==0,f.flags&=-33,d===null){if(Wi){if(E?Jy(f):Zy(),Wi){var J=On,oe;if(oe=J){e:{for(oe=J,J=th;oe.nodeType!==8;){if(!J){J=null;break e}if(oe=Ru(oe.nextSibling),oe===null){J=null;break e}}J=oe}J!==null?(f.memoizedState={dehydrated:J,treeContext:n0!==null?{id:xf,overflow:Sf}:null,retryLane:536870912,hydrationErrors:null},oe=Pl(18,null,null,0),oe.stateNode=J,oe.return=f,f.child=oe,wa=f,On=null,oe=!0):oe=!1}oe||a0(f)}if(J=f.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return oV(J)?f.lanes=32:f.lanes=536870912,null;Cf(f)}return J=_.children,_=_.fallback,E?(Zy(),E=f.mode,J=hL({mode:"hidden",children:J},E),_=r0(_,E,g,null),J.return=f,_.return=f,J.sibling=_,f.child=J,E=f.child,E.memoizedState=x6(g),E.childLanes=S6(d,V,g),f.memoizedState=_6,_):(Jy(f),$6(f,J))}if(oe=d.memoizedState,oe!==null&&(J=oe.dehydrated,J!==null)){if(M)f.flags&256?(Jy(f),f.flags&=-257,f=T6(d,f,g)):f.memoizedState!==null?(Zy(),f.child=d.child,f.flags|=128,f=null):(Zy(),E=_.fallback,J=f.mode,_=hL({mode:"visible",children:_.children},J),E=r0(E,J,g,null),E.flags|=2,_.return=f,E.return=f,_.sibling=E,f.child=_,ux(f,d.child,null,g),_=f.child,_.memoizedState=x6(g),_.childLanes=S6(d,V,g),f.memoizedState=_6,f=E);else if(Jy(f),oV(J)){if(V=J.nextSibling&&J.nextSibling.dataset,V)var Ee=V.dgst;V=Ee,_=Error(r(419)),_.stack="",_.digest=V,qC({value:_,source:null,stack:null}),f=T6(d,f,g)}else if(Hs||WC(d,f,g,!1),V=(g&d.childLanes)!==0,Hs||V){if(V=Or,V!==null&&(_=g&-g,_=(_&42)!==0?1:Ry(_),_=(_&(V.suspendedLanes|g))!==0?0:_,_!==0&&_!==oe.retryLane))throw oe.retryLane=_,Q1(d,_),zl(V,d,_),fte;J.data==="$?"||B6(),f=T6(d,f,g)}else J.data==="$?"?(f.flags|=192,f.child=d.child,f=null):(d=oe.treeContext,On=Ru(J.nextSibling),wa=f,Wi=!0,o0=null,th=!1,d!==null&&(Pc[Lc++]=xf,Pc[Lc++]=Sf,Pc[Lc++]=n0,xf=d.id,Sf=d.overflow,n0=f),f=$6(f,_.children),f.flags|=4096);return f}return E?(Zy(),E=_.fallback,J=f.mode,oe=d.child,Ee=oe.sibling,_=_f(oe,{mode:"hidden",children:_.children}),_.subtreeFlags=oe.subtreeFlags&65011712,Ee!==null?E=_f(Ee,E):(E=r0(E,J,g,null),E.flags|=2),E.return=f,_.return=f,_.sibling=E,f.child=_,_=E,E=f.child,J=d.child.memoizedState,J===null?J=x6(g):(oe=J.cachePool,oe!==null?(Ee=Es._currentValue,oe=oe.parent!==Ee?{parent:Ee,pool:Ee}:oe):oe=cee(),J={baseLanes:J.baseLanes|g,cachePool:oe}),E.memoizedState=J,E.childLanes=S6(d,V,g),f.memoizedState=_6,_):(Jy(f),g=d.child,d=g.sibling,g=_f(g,{mode:"visible",children:_.children}),g.return=f,g.sibling=null,d!==null&&(V=f.deletions,V===null?(f.deletions=[d],f.flags|=16):V.push(d)),f.child=g,f.memoizedState=null,g)}function $6(d,f){return f=hL({mode:"visible",children:f},d.mode),f.return=d,d.child=f}function hL(d,f){return d=Pl(22,d,null,f),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function T6(d,f,g){return ux(f,d.child,null,g),d=$6(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function $te(d,f,g){d.lanes|=f;var _=d.alternate;_!==null&&(_.lanes|=f),Bj(d.return,f,g)}function E6(d,f,g,_,E){var M=d.memoizedState;M===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:E}:(M.isBackwards=f,M.rendering=null,M.renderingStartTime=0,M.last=_,M.tail=g,M.tailMode=E)}function Tte(d,f,g){var _=f.pendingProps,E=_.revealOrder,M=_.tail;if(uo(d,f,_.children,g),_=Cs.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&$te(d,g,f);else if(d.tag===19)$te(d,g,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}_&=1}switch(it(Cs,_),E){case"forwards":for(g=f.child,E=null;g!==null;)d=g.alternate,d!==null&&lL(d)===null&&(E=g),g=g.sibling;g=E,g===null?(E=f.child,f.child=null):(E=g.sibling,g.sibling=null),E6(f,!1,E,g,M);break;case"backwards":for(g=null,E=f.child,f.child=null;E!==null;){if(d=E.alternate,d!==null&&lL(d)===null){f.child=E;break}d=E.sibling,E.sibling=g,g=E,E=d}E6(f,!0,g,null,M);break;case"together":E6(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function If(d,f,g){if(d!==null&&(f.dependencies=d.dependencies),eg|=f.lanes,(g&f.childLanes)===0)if(d!==null){if(WC(d,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(d!==null&&f.child!==d.child)throw Error(r(153));if(f.child!==null){for(d=f.child,g=_f(d,d.pendingProps),f.child=g,g.return=f;d.sibling!==null;)d=d.sibling,g=g.sibling=_f(d,d.pendingProps),g.return=f;g.sibling=null}return f.child}function C6(d,f){return(d.lanes&f)!==0?!0:(d=d.dependencies,!!(d!==null&&qP(d)))}function ske(d,f,g){switch(f.tag){case 3:$i(f,f.stateNode.containerInfo),By(f,Es,d.memoizedState.cache),HC();break;case 27:case 5:Eu(f);break;case 4:$i(f,f.stateNode.containerInfo);break;case 10:By(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Jy(f),f.flags|=128,null):(g&f.child.childLanes)!==0?Ste(d,f,g):(Jy(f),d=If(d,f,g),d!==null?d.sibling:null);Jy(f);break;case 19:var E=(d.flags&128)!==0;if(_=(g&f.childLanes)!==0,_||(WC(d,f,g,!1),_=(g&f.childLanes)!==0),E){if(_)return Tte(d,f,g);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),it(Cs,Cs.current),_)break;return null;case 22:case 23:return f.lanes=0,vte(d,f,g);case 24:By(f,Es,d.memoizedState.cache)}return If(d,f,g)}function Ete(d,f,g){if(d!==null)if(d.memoizedProps!==f.pendingProps)Hs=!0;else{if(!C6(d,g)&&(f.flags&128)===0)return Hs=!1,ske(d,f,g);Hs=(d.flags&131072)!==0}else Hs=!1,Wi&&(f.flags&1048576)!==0&&iee(f,HP,f.index);switch(f.lanes=0,f.tag){case 16:e:{d=f.pendingProps;var _=f.elementType,E=_._init;if(_=E(_._payload),f.type=_,typeof _=="function")Dj(_)?(d=h0(_,d),f.tag=1,f=_te(null,f,_,d,g)):(f.tag=0,f=w6(null,f,_,d,g));else{if(_!=null){if(E=_.$$typeof,E===R){f.tag=11,f=mte(null,f,_,d,g);break e}else if(E===z){f.tag=14,f=yte(null,f,_,d,g);break e}}throw f=ae(_)||_,Error(r(306,f,""))}}return f;case 0:return w6(d,f,f.type,f.pendingProps,g);case 1:return _=f.type,E=h0(_,f.pendingProps),_te(d,f,_,E,g);case 3:e:{if($i(f,f.stateNode.containerInfo),d===null)throw Error(r(387));_=f.pendingProps;var M=f.memoizedState;E=M.element,Yj(d,f),eI(f,_,null,g);var V=f.memoizedState;if(_=V.cache,By(f,Es,_),_!==M.cache&&Gj(f,[Es],g,!0),QC(),_=V.element,M.isDehydrated)if(M={element:_,isDehydrated:!1,cache:V.cache},f.updateQueue.baseState=M,f.memoizedState=M,f.flags&256){f=xte(d,f,_,g);break e}else if(_!==E){E=Ac(Error(r(424)),f),qC(E),f=xte(d,f,_,g);break e}else{switch(d=f.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(On=Ru(d.firstChild),wa=f,Wi=!0,o0=null,th=!0,g=nte(f,null,_,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(HC(),_===E){f=If(d,f,g);break e}uo(d,f,_,g)}f=f.child}return f;case 26:return dL(d,f),d===null?(g=kie(f.type,null,f.pendingProps,null))?f.memoizedState=g:Wi||(g=f.type,d=f.pendingProps,_=EL(zt.current).createElement(g),_[Xi]=f,_[Xn]=d,po(_,g,d),gn(_),f.stateNode=_):f.memoizedState=kie(f.type,d.memoizedProps,f.pendingProps,d.memoizedState),null;case 27:return Eu(f),d===null&&Wi&&(_=f.stateNode=Cie(f.type,f.pendingProps,zt.current),wa=f,th=!0,E=On,ng(f.type)?(aV=E,On=Ru(_.firstChild)):On=E),uo(d,f,f.pendingProps.children,g),dL(d,f),d===null&&(f.flags|=4194304),f.child;case 5:return d===null&&Wi&&((E=_=On)&&(_=Pke(_,f.type,f.pendingProps,th),_!==null?(f.stateNode=_,wa=f,On=Ru(_.firstChild),th=!1,E=!0):E=!1),E||a0(f)),Eu(f),E=f.type,M=f.pendingProps,V=d!==null?d.memoizedProps:null,_=M.children,rV(E,M)?_=null:V!==null&&rV(E,V)&&(f.flags|=32),f.memoizedState!==null&&(E=i6(d,f,X2e,null,null,g),xI._currentValue=E),dL(d,f),uo(d,f,_,g),f.child;case 6:return d===null&&Wi&&((d=g=On)&&(g=Lke(g,f.pendingProps,th),g!==null?(f.stateNode=g,wa=f,On=null,d=!0):d=!1),d||a0(f)),null;case 13:return Ste(d,f,g);case 4:return $i(f,f.stateNode.containerInfo),_=f.pendingProps,d===null?f.child=ux(f,null,_,g):uo(d,f,_,g),f.child;case 11:return mte(d,f,f.type,f.pendingProps,g);case 7:return uo(d,f,f.pendingProps,g),f.child;case 8:return uo(d,f,f.pendingProps.children,g),f.child;case 12:return uo(d,f,f.pendingProps.children,g),f.child;case 10:return _=f.pendingProps,By(f,f.type,_.value),uo(d,f,_.children,g),f.child;case 9:return E=f.type._context,_=f.pendingProps.children,c0(f),E=Lo(E),_=_(E),f.flags|=1,uo(d,f,_,g),f.child;case 14:return yte(d,f,f.type,f.pendingProps,g);case 15:return gte(d,f,f.type,f.pendingProps,g);case 19:return Tte(d,f,g);case 31:return _=f.pendingProps,g=f.mode,_={mode:_.mode,children:_.children},d===null?(g=hL(_,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=_f(d.child,_),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return vte(d,f,g);case 24:return c0(f),_=Lo(Es),d===null?(E=Wj(),E===null&&(E=Or,M=Hj(),E.pooledCache=M,M.refCount++,M!==null&&(E.pooledCacheLanes|=g),E=M),f.memoizedState={parent:_,cache:E},Zj(f),By(f,Es,E)):((d.lanes&g)!==0&&(Yj(d,f),eI(f,null,null,g),QC()),E=d.memoizedState,M=f.memoizedState,E.parent!==_?(E={parent:_,cache:_},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),By(f,Es,_)):(_=M.cache,By(f,Es,_),_!==E.cache&&Gj(f,[Es],g,!0))),uo(d,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Mf(d){d.flags|=4}function Cte(d,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Rie(f)){if(f=Rc.current,f!==null&&((Ri&4194048)===Ri?ih!==null:(Ri&62914560)!==Ri&&(Ri&536870912)===0||f!==ih))throw XC=Jj,uee;d.flags|=8192}}function pL(d,f){f!==null&&(d.flags|=4),d.flags&16384&&(f=d.tag!==22?Iu():536870912,d.lanes|=f,fx|=f)}function aI(d,f){if(!Wi)switch(d.tailMode){case"hidden":f=d.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?d.tail=null:g.sibling=null;break;case"collapsed":g=d.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:_.sibling=null}}function bn(d){var f=d.alternate!==null&&d.alternate.child===d.child,g=0,_=0;if(f)for(var E=d.child;E!==null;)g|=E.lanes|E.childLanes,_|=E.subtreeFlags&65011712,_|=E.flags&65011712,E.return=d,E=E.sibling;else for(E=d.child;E!==null;)g|=E.lanes|E.childLanes,_|=E.subtreeFlags,_|=E.flags,E.return=d,E=E.sibling;return d.subtreeFlags|=_,d.childLanes=g,f}function oke(d,f,g){var _=f.pendingProps;switch(Uj(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(f),null;case 1:return bn(f),null;case 3:return g=f.stateNode,_=null,d!==null&&(_=d.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),Tf(Es),gt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(d===null||d.child===null)&&(GC(f)?Mf(f):d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,see())),bn(f),null;case 26:return g=f.memoizedState,d===null?(Mf(f),g!==null?(bn(f),Cte(f,g)):(bn(f),f.flags&=-16777217)):g?g!==d.memoizedState?(Mf(f),bn(f),Cte(f,g)):(bn(f),f.flags&=-16777217):(d.memoizedProps!==_&&Mf(f),bn(f),f.flags&=-16777217),null;case 27:fa(f),g=zt.current;var E=f.type;if(d!==null&&f.stateNode!=null)d.memoizedProps!==_&&Mf(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return bn(f),null}d=_t.current,GC(f)?ree(f):(d=Cie(E,_,g),f.stateNode=d,Mf(f))}return bn(f),null;case 5:if(fa(f),g=f.type,d!==null&&f.stateNode!=null)d.memoizedProps!==_&&Mf(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return bn(f),null}if(d=_t.current,GC(f))ree(f);else{switch(E=EL(zt.current),d){case 1:d=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:d=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":d=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":d=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":d=E.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof _.is=="string"?E.createElement("select",{is:_.is}):E.createElement("select"),_.multiple?d.multiple=!0:_.size&&(d.size=_.size);break;default:d=typeof _.is=="string"?E.createElement(g,{is:_.is}):E.createElement(g)}}d[Xi]=f,d[Xn]=_;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)d.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=d;e:switch(po(d,g,_),g){case"button":case"input":case"select":case"textarea":d=!!_.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Mf(f)}}return bn(f),f.flags&=-16777217,null;case 6:if(d&&f.stateNode!=null)d.memoizedProps!==_&&Mf(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(r(166));if(d=zt.current,GC(f)){if(d=f.stateNode,g=f.memoizedProps,_=null,E=wa,E!==null)switch(E.tag){case 27:case 5:_=E.memoizedProps}d[Xi]=f,d=!!(d.nodeValue===g||_!==null&&_.suppressHydrationWarning===!0||wie(d.nodeValue,g)),d||a0(f)}else d=EL(d).createTextNode(_),d[Xi]=f,f.stateNode=d}return bn(f),null;case 13:if(_=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(E=GC(f),_!==null&&_.dehydrated!==null){if(d===null){if(!E)throw Error(r(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Xi]=f}else HC(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;bn(f),E=!1}else E=see(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(Cf(f),f):(Cf(f),null)}if(Cf(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=_!==null,d=d!==null&&d.memoizedState!==null,g){_=f.child,E=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(E=_.alternate.memoizedState.cachePool.pool);var M=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(M=_.memoizedState.cachePool.pool),M!==E&&(_.flags|=2048)}return g!==d&&g&&(f.child.flags|=8192),pL(f,f.updateQueue),bn(f),null;case 4:return gt(),d===null&&K6(f.stateNode.containerInfo),bn(f),null;case 10:return Tf(f.type),bn(f),null;case 19:if(rt(Cs),E=f.memoizedState,E===null)return bn(f),null;if(_=(f.flags&128)!==0,M=E.rendering,M===null)if(_)aI(E,!1);else{if(Pn!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(M=lL(d),M!==null){for(f.flags|=128,aI(E,!1),d=M.updateQueue,f.updateQueue=d,pL(f,d),f.subtreeFlags=0,d=g,g=f.child;g!==null;)tee(g,d),g=g.sibling;return it(Cs,Cs.current&1|2),f.child}d=d.sibling}E.tail!==null&&ga()>yL&&(f.flags|=128,_=!0,aI(E,!1),f.lanes=4194304)}else{if(!_)if(d=lL(M),d!==null){if(f.flags|=128,_=!0,d=d.updateQueue,f.updateQueue=d,pL(f,d),aI(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Wi)return bn(f),null}else 2*ga()-E.renderingStartTime>yL&&g!==536870912&&(f.flags|=128,_=!0,aI(E,!1),f.lanes=4194304);E.isBackwards?(M.sibling=f.child,f.child=M):(d=E.last,d!==null?d.sibling=M:f.child=M,E.last=M)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=ga(),f.sibling=null,d=Cs.current,it(Cs,_?d&1|2:d&1),f):(bn(f),null);case 22:case 23:return Cf(f),e6(),_=f.memoizedState!==null,d!==null?d.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(g&536870912)!==0&&(f.flags&128)===0&&(bn(f),f.subtreeFlags&6&&(f.flags|=8192)):bn(f),g=f.updateQueue,g!==null&&pL(f,g.retryQueue),g=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==g&&(f.flags|=2048),d!==null&&rt(u0),null;case 24:return g=null,d!==null&&(g=d.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Tf(Es),bn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function ake(d,f){switch(Uj(f),f.tag){case 1:return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Tf(Es),gt(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 26:case 27:case 5:return fa(f),null;case 13:if(Cf(f),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(r(340));HC()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return rt(Cs),null;case 4:return gt(),null;case 10:return Tf(f.type),null;case 22:case 23:return Cf(f),e6(),d!==null&&rt(u0),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 24:return Tf(Es),null;case 25:return null;default:return null}}function Ite(d,f){switch(Uj(f),f.tag){case 3:Tf(Es),gt();break;case 26:case 27:case 5:fa(f);break;case 4:gt();break;case 13:Cf(f);break;case 19:rt(Cs);break;case 10:Tf(f.type);break;case 22:case 23:Cf(f),e6(),d!==null&&rt(u0);break;case 24:Tf(Es)}}function lI(d,f){try{var g=f.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var E=_.next;g=E;do{if((g.tag&d)===d){_=void 0;var M=g.create,V=g.inst;_=M(),V.destroy=_}g=g.next}while(g!==E)}}catch(J){Tr(f,f.return,J)}}function Yy(d,f,g){try{var _=f.updateQueue,E=_!==null?_.lastEffect:null;if(E!==null){var M=E.next;_=M;do{if((_.tag&d)===d){var V=_.inst,J=V.destroy;if(J!==void 0){V.destroy=void 0,E=f;var oe=g,Ee=J;try{Ee()}catch(ze){Tr(E,oe,ze)}}}_=_.next}while(_!==M)}}catch(ze){Tr(f,f.return,ze)}}function Mte(d){var f=d.updateQueue;if(f!==null){var g=d.stateNode;try{yee(f,g)}catch(_){Tr(d,d.return,_)}}}function kte(d,f,g){g.props=h0(d.type,d.memoizedProps),g.state=d.memoizedState;try{g.componentWillUnmount()}catch(_){Tr(d,f,_)}}function cI(d,f){try{var g=d.ref;if(g!==null){switch(d.tag){case 26:case 27:case 5:var _=d.stateNode;break;case 30:_=d.stateNode;break;default:_=d.stateNode}typeof g=="function"?d.refCleanup=g(_):g.current=_}}catch(E){Tr(d,f,E)}}function rh(d,f){var g=d.ref,_=d.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(E){Tr(d,f,E)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(E){Tr(d,f,E)}else g.current=null}function Ate(d){var f=d.type,g=d.memoizedProps,_=d.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&_.focus();break e;case"img":g.src?_.src=g.src:g.srcSet&&(_.srcset=g.srcSet)}}catch(E){Tr(d,d.return,E)}}function I6(d,f,g){try{var _=d.stateNode;Ike(_,d.type,g,f),_[Xn]=f}catch(E){Tr(d,d.return,E)}}function Ote(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&ng(d.type)||d.tag===4}function M6(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Ote(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&ng(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function k6(d,f,g){var _=d.tag;if(_===5||_===6)d=d.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(d,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(d),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=TL));else if(_!==4&&(_===27&&ng(d.type)&&(g=d.stateNode,f=null),d=d.child,d!==null))for(k6(d,f,g),d=d.sibling;d!==null;)k6(d,f,g),d=d.sibling}function fL(d,f,g){var _=d.tag;if(_===5||_===6)d=d.stateNode,f?g.insertBefore(d,f):g.appendChild(d);else if(_!==4&&(_===27&&ng(d.type)&&(g=d.stateNode),d=d.child,d!==null))for(fL(d,f,g),d=d.sibling;d!==null;)fL(d,f,g),d=d.sibling}function Pte(d){var f=d.stateNode,g=d.memoizedProps;try{for(var _=d.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);po(f,_,g),f[Xi]=d,f[Xn]=g}catch(M){Tr(d,d.return,M)}}var kf=!1,es=!1,A6=!1,Lte=typeof WeakSet=="function"?WeakSet:Set,qs=null;function lke(d,f){if(d=d.containerInfo,tV=OL,d=Xe(d),Je(d)){if("selectionStart"in d)var g={start:d.selectionStart,end:d.selectionEnd};else e:{g=(g=d.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var E=_.anchorOffset,M=_.focusNode;_=_.focusOffset;try{g.nodeType,M.nodeType}catch{g=null;break e}var V=0,J=-1,oe=-1,Ee=0,ze=0,He=d,ke=null;t:for(;;){for(var Ae;He!==g||E!==0&&He.nodeType!==3||(J=V+E),He!==M||_!==0&&He.nodeType!==3||(oe=V+_),He.nodeType===3&&(V+=He.nodeValue.length),(Ae=He.firstChild)!==null;)ke=He,He=Ae;for(;;){if(He===d)break t;if(ke===g&&++Ee===E&&(J=V),ke===M&&++ze===_&&(oe=V),(Ae=He.nextSibling)!==null)break;He=ke,ke=He.parentNode}He=Ae}g=J===-1||oe===-1?null:{start:J,end:oe}}else g=null}g=g||{start:0,end:0}}else g=null;for(iV={focusedElem:d,selectionRange:g},OL=!1,qs=f;qs!==null;)if(f=qs,d=f.child,(f.subtreeFlags&1024)!==0&&d!==null)d.return=f,qs=d;else for(;qs!==null;){switch(f=qs,M=f.alternate,d=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&M!==null){d=void 0,g=f,E=M.memoizedProps,M=M.memoizedState,_=g.stateNode;try{var ei=h0(g.type,E,g.elementType===g.type);d=_.getSnapshotBeforeUpdate(ei,M),_.__reactInternalSnapshotBeforeUpdate=d}catch(Jt){Tr(g,g.return,Jt)}}break;case 3:if((d&1024)!==0){if(d=f.stateNode.containerInfo,g=d.nodeType,g===9)sV(d);else if(g===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":sV(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=f.sibling,d!==null){d.return=f.return,qs=d;break}qs=f.return}}function Rte(d,f,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Xy(d,g),_&4&&lI(5,g);break;case 1:if(Xy(d,g),_&4)if(d=g.stateNode,f===null)try{d.componentDidMount()}catch(V){Tr(g,g.return,V)}else{var E=h0(g.type,f.memoizedProps);f=f.memoizedState;try{d.componentDidUpdate(E,f,d.__reactInternalSnapshotBeforeUpdate)}catch(V){Tr(g,g.return,V)}}_&64&&Mte(g),_&512&&cI(g,g.return);break;case 3:if(Xy(d,g),_&64&&(d=g.updateQueue,d!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{yee(d,f)}catch(V){Tr(g,g.return,V)}}break;case 27:f===null&&_&4&&Pte(g);case 26:case 5:Xy(d,g),f===null&&_&4&&Ate(g),_&512&&cI(g,g.return);break;case 12:Xy(d,g);break;case 13:Xy(d,g),_&4&&zte(d,g),_&64&&(d=g.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(g=gke.bind(null,g),Rke(d,g))));break;case 22:if(_=g.memoizedState!==null||kf,!_){f=f!==null&&f.memoizedState!==null||es,E=kf;var M=es;kf=_,(es=f)&&!M?Ky(d,g,(g.subtreeFlags&8772)!==0):Xy(d,g),kf=E,es=M}break;case 30:break;default:Xy(d,g)}}function Dte(d){var f=d.alternate;f!==null&&(d.alternate=null,Dte(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&va(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var on=null,Ya=!1;function Af(d,f,g){for(g=g.child;g!==null;)Nte(d,f,g),g=g.sibling}function Nte(d,f,g){if(oo&&typeof oo.onCommitFiberUnmount=="function")try{oo.onCommitFiberUnmount(Al,g)}catch{}switch(g.tag){case 26:es||rh(g,f),Af(d,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:es||rh(g,f);var _=on,E=Ya;ng(g.type)&&(on=g.stateNode,Ya=!1),Af(d,f,g),vI(g.stateNode),on=_,Ya=E;break;case 5:es||rh(g,f);case 6:if(_=on,E=Ya,on=null,Af(d,f,g),on=_,Ya=E,on!==null)if(Ya)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(g.stateNode)}catch(M){Tr(g,f,M)}else try{on.removeChild(g.stateNode)}catch(M){Tr(g,f,M)}break;case 18:on!==null&&(Ya?(d=on,Tie(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,g.stateNode),EI(d)):Tie(on,g.stateNode));break;case 4:_=on,E=Ya,on=g.stateNode.containerInfo,Ya=!0,Af(d,f,g),on=_,Ya=E;break;case 0:case 11:case 14:case 15:es||Yy(2,g,f),es||Yy(4,g,f),Af(d,f,g);break;case 1:es||(rh(g,f),_=g.stateNode,typeof _.componentWillUnmount=="function"&&kte(g,f,_)),Af(d,f,g);break;case 21:Af(d,f,g);break;case 22:es=(_=es)||g.memoizedState!==null,Af(d,f,g),es=_;break;default:Af(d,f,g)}}function zte(d,f){if(f.memoizedState===null&&(d=f.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{EI(d)}catch(g){Tr(f,f.return,g)}}function cke(d){switch(d.tag){case 13:case 19:var f=d.stateNode;return f===null&&(f=d.stateNode=new Lte),f;case 22:return d=d.stateNode,f=d._retryCache,f===null&&(f=d._retryCache=new Lte),f;default:throw Error(r(435,d.tag))}}function O6(d,f){var g=cke(d);f.forEach(function(_){var E=vke.bind(null,d,_);g.has(_)||(g.add(_),_.then(E,E))})}function Ll(d,f){var g=f.deletions;if(g!==null)for(var _=0;_<g.length;_++){var E=g[_],M=d,V=f,J=V;e:for(;J!==null;){switch(J.tag){case 27:if(ng(J.type)){on=J.stateNode,Ya=!1;break e}break;case 5:on=J.stateNode,Ya=!1;break e;case 3:case 4:on=J.stateNode.containerInfo,Ya=!0;break e}J=J.return}if(on===null)throw Error(r(160));Nte(M,V,E),on=null,Ya=!1,M=E.alternate,M!==null&&(M.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Fte(f,d),f=f.sibling}var Lu=null;function Fte(d,f){var g=d.alternate,_=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Ll(f,d),Rl(d),_&4&&(Yy(3,d,d.return),lI(3,d),Yy(5,d,d.return));break;case 1:Ll(f,d),Rl(d),_&512&&(es||g===null||rh(g,g.return)),_&64&&kf&&(d=d.updateQueue,d!==null&&(_=d.callbacks,_!==null&&(g=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:var E=Lu;if(Ll(f,d),Rl(d),_&512&&(es||g===null||rh(g,g.return)),_&4){var M=g!==null?g.memoizedState:null;if(_=d.memoizedState,g===null)if(_===null)if(d.stateNode===null){e:{_=d.type,g=d.memoizedProps,E=E.ownerDocument||E;t:switch(_){case"title":M=E.getElementsByTagName("title")[0],(!M||M[hf]||M[Xi]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=E.createElement(_),E.head.insertBefore(M,E.querySelector("head > title"))),po(M,_,g),M[Xi]=d,gn(M),_=M;break e;case"link":var V=Pie("link","href",E).get(_+(g.href||""));if(V){for(var J=0;J<V.length;J++)if(M=V[J],M.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&M.getAttribute("rel")===(g.rel==null?null:g.rel)&&M.getAttribute("title")===(g.title==null?null:g.title)&&M.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){V.splice(J,1);break t}}M=E.createElement(_),po(M,_,g),E.head.appendChild(M);break;case"meta":if(V=Pie("meta","content",E).get(_+(g.content||""))){for(J=0;J<V.length;J++)if(M=V[J],M.getAttribute("content")===(g.content==null?null:""+g.content)&&M.getAttribute("name")===(g.name==null?null:g.name)&&M.getAttribute("property")===(g.property==null?null:g.property)&&M.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&M.getAttribute("charset")===(g.charSet==null?null:g.charSet)){V.splice(J,1);break t}}M=E.createElement(_),po(M,_,g),E.head.appendChild(M);break;default:throw Error(r(468,_))}M[Xi]=d,gn(M),_=M}d.stateNode=_}else Lie(E,d.type,d.stateNode);else d.stateNode=Oie(E,_,d.memoizedProps);else M!==_?(M===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):M.count--,_===null?Lie(E,d.type,d.stateNode):Oie(E,_,d.memoizedProps)):_===null&&d.stateNode!==null&&I6(d,d.memoizedProps,g.memoizedProps)}break;case 27:Ll(f,d),Rl(d),_&512&&(es||g===null||rh(g,g.return)),g!==null&&_&4&&I6(d,d.memoizedProps,g.memoizedProps);break;case 5:if(Ll(f,d),Rl(d),_&512&&(es||g===null||rh(g,g.return)),d.flags&32){E=d.stateNode;try{gf(E,"")}catch(Ae){Tr(d,d.return,Ae)}}_&4&&d.stateNode!=null&&(E=d.memoizedProps,I6(d,E,g!==null?g.memoizedProps:E)),_&1024&&(A6=!0);break;case 6:if(Ll(f,d),Rl(d),_&4){if(d.stateNode===null)throw Error(r(162));_=d.memoizedProps,g=d.stateNode;try{g.nodeValue=_}catch(Ae){Tr(d,d.return,Ae)}}break;case 3:if(ML=null,E=Lu,Lu=CL(f.containerInfo),Ll(f,d),Lu=E,Rl(d),_&4&&g!==null&&g.memoizedState.isDehydrated)try{EI(f.containerInfo)}catch(Ae){Tr(d,d.return,Ae)}A6&&(A6=!1,Ute(d));break;case 4:_=Lu,Lu=CL(d.stateNode.containerInfo),Ll(f,d),Rl(d),Lu=_;break;case 12:Ll(f,d),Rl(d);break;case 13:Ll(f,d),Rl(d),d.child.flags&8192&&d.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(z6=ga()),_&4&&(_=d.updateQueue,_!==null&&(d.updateQueue=null,O6(d,_)));break;case 22:E=d.memoizedState!==null;var oe=g!==null&&g.memoizedState!==null,Ee=kf,ze=es;if(kf=Ee||E,es=ze||oe,Ll(f,d),es=ze,kf=Ee,Rl(d),_&8192)e:for(f=d.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(g===null||oe||kf||es||p0(d)),g=null,f=d;;){if(f.tag===5||f.tag===26){if(g===null){oe=g=f;try{if(M=oe.stateNode,E)V=M.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{J=oe.stateNode;var He=oe.memoizedProps.style,ke=He!=null&&He.hasOwnProperty("display")?He.display:null;J.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(Ae){Tr(oe,oe.return,Ae)}}}else if(f.tag===6){if(g===null){oe=f;try{oe.stateNode.nodeValue=E?"":oe.memoizedProps}catch(Ae){Tr(oe,oe.return,Ae)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===d)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=d.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,O6(d,g))));break;case 19:Ll(f,d),Rl(d),_&4&&(_=d.updateQueue,_!==null&&(d.updateQueue=null,O6(d,_)));break;case 30:break;case 21:break;default:Ll(f,d),Rl(d)}}function Rl(d){var f=d.flags;if(f&2){try{for(var g,_=d.return;_!==null;){if(Ote(_)){g=_;break}_=_.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var E=g.stateNode,M=M6(d);fL(d,M,E);break;case 5:var V=g.stateNode;g.flags&32&&(gf(V,""),g.flags&=-33);var J=M6(d);fL(d,J,V);break;case 3:case 4:var oe=g.stateNode.containerInfo,Ee=M6(d);k6(d,Ee,oe);break;default:throw Error(r(161))}}catch(ze){Tr(d,d.return,ze)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function Ute(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var f=d;Ute(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),d=d.sibling}}function Xy(d,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Rte(d,f.alternate,f),f=f.sibling}function p0(d){for(d=d.child;d!==null;){var f=d;switch(f.tag){case 0:case 11:case 14:case 15:Yy(4,f,f.return),p0(f);break;case 1:rh(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&kte(f,f.return,g),p0(f);break;case 27:vI(f.stateNode);case 26:case 5:rh(f,f.return),p0(f);break;case 22:f.memoizedState===null&&p0(f);break;case 30:p0(f);break;default:p0(f)}d=d.sibling}}function Ky(d,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,E=d,M=f,V=M.flags;switch(M.tag){case 0:case 11:case 15:Ky(E,M,g),lI(4,M);break;case 1:if(Ky(E,M,g),_=M,E=_.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ee){Tr(_,_.return,Ee)}if(_=M,E=_.updateQueue,E!==null){var J=_.stateNode;try{var oe=E.shared.hiddenCallbacks;if(oe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<oe.length;E++)mee(oe[E],J)}catch(Ee){Tr(_,_.return,Ee)}}g&&V&64&&Mte(M),cI(M,M.return);break;case 27:Pte(M);case 26:case 5:Ky(E,M,g),g&&_===null&&V&4&&Ate(M),cI(M,M.return);break;case 12:Ky(E,M,g);break;case 13:Ky(E,M,g),g&&V&4&&zte(E,M);break;case 22:M.memoizedState===null&&Ky(E,M,g),cI(M,M.return);break;case 30:break;default:Ky(E,M,g)}f=f.sibling}}function P6(d,f){var g=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),d=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(d=f.memoizedState.cachePool.pool),d!==g&&(d!=null&&d.refCount++,g!=null&&JC(g))}function L6(d,f){d=null,f.alternate!==null&&(d=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==d&&(f.refCount++,d!=null&&JC(d))}function nh(d,f,g,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)jte(d,f,g,_),f=f.sibling}function jte(d,f,g,_){var E=f.flags;switch(f.tag){case 0:case 11:case 15:nh(d,f,g,_),E&2048&&lI(9,f);break;case 1:nh(d,f,g,_);break;case 3:nh(d,f,g,_),E&2048&&(d=null,f.alternate!==null&&(d=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==d&&(f.refCount++,d!=null&&JC(d)));break;case 12:if(E&2048){nh(d,f,g,_),d=f.stateNode;try{var M=f.memoizedProps,V=M.id,J=M.onPostCommit;typeof J=="function"&&J(V,f.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(oe){Tr(f,f.return,oe)}}else nh(d,f,g,_);break;case 13:nh(d,f,g,_);break;case 23:break;case 22:M=f.stateNode,V=f.alternate,f.memoizedState!==null?M._visibility&2?nh(d,f,g,_):uI(d,f):M._visibility&2?nh(d,f,g,_):(M._visibility|=2,dx(d,f,g,_,(f.subtreeFlags&10256)!==0)),E&2048&&P6(V,f);break;case 24:nh(d,f,g,_),E&2048&&L6(f.alternate,f);break;default:nh(d,f,g,_)}}function dx(d,f,g,_,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var M=d,V=f,J=g,oe=_,Ee=V.flags;switch(V.tag){case 0:case 11:case 15:dx(M,V,J,oe,E),lI(8,V);break;case 23:break;case 22:var ze=V.stateNode;V.memoizedState!==null?ze._visibility&2?dx(M,V,J,oe,E):uI(M,V):(ze._visibility|=2,dx(M,V,J,oe,E)),E&&Ee&2048&&P6(V.alternate,V);break;case 24:dx(M,V,J,oe,E),E&&Ee&2048&&L6(V.alternate,V);break;default:dx(M,V,J,oe,E)}f=f.sibling}}function uI(d,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=d,_=f,E=_.flags;switch(_.tag){case 22:uI(g,_),E&2048&&P6(_.alternate,_);break;case 24:uI(g,_),E&2048&&L6(_.alternate,_);break;default:uI(g,_)}f=f.sibling}}var dI=8192;function hx(d){if(d.subtreeFlags&dI)for(d=d.child;d!==null;)Vte(d),d=d.sibling}function Vte(d){switch(d.tag){case 26:hx(d),d.flags&dI&&d.memoizedState!==null&&Jke(Lu,d.memoizedState,d.memoizedProps);break;case 5:hx(d);break;case 3:case 4:var f=Lu;Lu=CL(d.stateNode.containerInfo),hx(d),Lu=f;break;case 22:d.memoizedState===null&&(f=d.alternate,f!==null&&f.memoizedState!==null?(f=dI,dI=16777216,hx(d),dI=f):hx(d));break;default:hx(d)}}function Bte(d){var f=d.alternate;if(f!==null&&(d=f.child,d!==null)){f.child=null;do f=d.sibling,d.sibling=null,d=f;while(d!==null)}}function hI(d){var f=d.deletions;if((d.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];qs=_,Hte(_,d)}Bte(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Gte(d),d=d.sibling}function Gte(d){switch(d.tag){case 0:case 11:case 15:hI(d),d.flags&2048&&Yy(9,d,d.return);break;case 3:hI(d);break;case 12:hI(d);break;case 22:var f=d.stateNode;d.memoizedState!==null&&f._visibility&2&&(d.return===null||d.return.tag!==13)?(f._visibility&=-3,mL(d)):hI(d);break;default:hI(d)}}function mL(d){var f=d.deletions;if((d.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];qs=_,Hte(_,d)}Bte(d)}for(d=d.child;d!==null;){switch(f=d,f.tag){case 0:case 11:case 15:Yy(8,f,f.return),mL(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,mL(f));break;default:mL(f)}d=d.sibling}}function Hte(d,f){for(;qs!==null;){var g=qs;switch(g.tag){case 0:case 11:case 15:Yy(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:JC(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,qs=_;else e:for(g=d;qs!==null;){_=qs;var E=_.sibling,M=_.return;if(Dte(_),_===g){qs=null;break e}if(E!==null){E.return=M,qs=E;break e}qs=M}}}var uke={getCacheForType:function(d){var f=Lo(Es),g=f.data.get(d);return g===void 0&&(g=d(),f.data.set(d,g)),g}},dke=typeof WeakMap=="function"?WeakMap:Map,lr=0,Or=null,Ti=null,Ri=0,cr=0,Dl=null,Qy=!1,px=!1,R6=!1,Of=0,Pn=0,eg=0,f0=0,D6=0,Dc=0,fx=0,pI=null,Xa=null,N6=!1,z6=0,yL=1/0,gL=null,tg=null,ho=0,ig=null,mx=null,yx=0,F6=0,U6=null,qte=null,fI=0,j6=null;function Nl(){if((lr&2)!==0&&Ri!==0)return Ri&-Ri;if(le.T!==null){var d=rx;return d!==0?d:J6()}return ar()}function Wte(){Dc===0&&(Dc=(Ri&536870912)===0||Wi?Zd():536870912);var d=Rc.current;return d!==null&&(d.flags|=32),Dc}function zl(d,f,g){(d===Or&&(cr===2||cr===9)||d.cancelPendingCommit!==null)&&(gx(d,0),rg(d,Ri,Dc,!1)),Mu(d,g),((lr&2)===0||d!==Or)&&(d===Or&&((lr&2)===0&&(f0|=g),Pn===4&&rg(d,Ri,Dc,!1)),sh(d))}function Jte(d,f,g){if((lr&6)!==0)throw Error(r(327));var _=!g&&(f&124)===0&&(f&d.expiredLanes)===0||Jd(d,f),E=_?fke(d,f):G6(d,f,!0),M=_;do{if(E===0){px&&!_&&rg(d,f,0,!1);break}else{if(g=d.current.alternate,M&&!hke(g)){E=G6(d,f,!1),M=!1;continue}if(E===2){if(M=f,d.errorRecoveryDisabledLanes&M)var V=0;else V=d.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){f=V;e:{var J=d;E=pI;var oe=J.current.memoizedState.isDehydrated;if(oe&&(gx(J,V).flags|=256),V=G6(J,V,!1),V!==2){if(R6&&!oe){J.errorRecoveryDisabledLanes|=M,f0|=M,E=4;break e}M=Xa,Xa=E,M!==null&&(Xa===null?Xa=M:Xa.push.apply(Xa,M))}E=V}if(M=!1,E!==2)continue}}if(E===1){gx(d,0),rg(d,f,0,!0);break}e:{switch(_=d,M=E,M){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:rg(_,f,Dc,!Qy);break e;case 2:Xa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(E=z6+300-ga(),10<E)){if(rg(_,f,Dc,!Qy),uf(_,0,!0)!==0)break e;_.timeoutHandle=Sie(Zte.bind(null,_,g,Xa,gL,N6,f,Dc,f0,fx,Qy,M,2,-0,0),E);break e}Zte(_,g,Xa,gL,N6,f,Dc,f0,fx,Qy,M,0,-0,0)}}break}while(!0);sh(d)}function Zte(d,f,g,_,E,M,V,J,oe,Ee,ze,He,ke,Ae){if(d.timeoutHandle=-1,He=f.subtreeFlags,(He&8192||(He&16785408)===16785408)&&(_I={stylesheets:null,count:0,unsuspend:Wke},Vte(f),He=Zke(),He!==null)){d.cancelPendingCommit=He(iie.bind(null,d,f,M,g,_,E,V,J,oe,ze,1,ke,Ae)),rg(d,M,V,!Ee);return}iie(d,f,M,g,_,E,V,J,oe)}function hke(d){for(var f=d;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var E=g[_],M=E.getSnapshot;E=E.value;try{if(!X(M(),E))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function rg(d,f,g,_){f&=~D6,f&=~f0,d.suspendedLanes|=f,d.pingedLanes&=~f,_&&(d.warmLanes|=f),_=d.expirationTimes;for(var E=f;0<E;){var M=31-ao(E),V=1<<M;_[M]=-1,E&=~V}g!==0&&Py(d,g,f)}function vL(){return(lr&6)===0?(mI(0),!1):!0}function V6(){if(Ti!==null){if(cr===0)var d=Ti.return;else d=Ti,$f=l0=null,s6(d),cx=null,sI=0,d=Ti;for(;d!==null;)Ite(d.alternate,d),d=d.return;Ti=null}}function gx(d,f){var g=d.timeoutHandle;g!==-1&&(d.timeoutHandle=-1,kke(g)),g=d.cancelPendingCommit,g!==null&&(d.cancelPendingCommit=null,g()),V6(),Or=d,Ti=g=_f(d.current,null),Ri=f,cr=0,Dl=null,Qy=!1,px=Jd(d,f),R6=!1,fx=Dc=D6=f0=eg=Pn=0,Xa=pI=null,N6=!1,(f&8)!==0&&(f|=f&32);var _=d.entangledLanes;if(_!==0)for(d=d.entanglements,_&=f;0<_;){var E=31-ao(_),M=1<<E;f|=d[E],_&=~M}return Of=f,UP(),g}function Yte(d,f){wi=null,le.H=sL,f===YC||f===ZP?(f=pee(),cr=3):f===uee?(f=pee(),cr=4):cr=f===fte?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Dl=f,Ti===null&&(Pn=1,uL(d,Ac(f,d.current)))}function Xte(){var d=le.H;return le.H=sL,d===null?sL:d}function Kte(){var d=le.A;return le.A=uke,d}function B6(){Pn=4,Qy||(Ri&4194048)!==Ri&&Rc.current!==null||(px=!0),(eg&134217727)===0&&(f0&134217727)===0||Or===null||rg(Or,Ri,Dc,!1)}function G6(d,f,g){var _=lr;lr|=2;var E=Xte(),M=Kte();(Or!==d||Ri!==f)&&(gL=null,gx(d,f)),f=!1;var V=Pn;e:do try{if(cr!==0&&Ti!==null){var J=Ti,oe=Dl;switch(cr){case 8:V6(),V=6;break e;case 3:case 2:case 9:case 6:Rc.current===null&&(f=!0);var Ee=cr;if(cr=0,Dl=null,vx(d,J,oe,Ee),g&&px){V=0;break e}break;default:Ee=cr,cr=0,Dl=null,vx(d,J,oe,Ee)}}pke(),V=Pn;break}catch(ze){Yte(d,ze)}while(!0);return f&&d.shellSuspendCounter++,$f=l0=null,lr=_,le.H=E,le.A=M,Ti===null&&(Or=null,Ri=0,UP()),V}function pke(){for(;Ti!==null;)Qte(Ti)}function fke(d,f){var g=lr;lr|=2;var _=Xte(),E=Kte();Or!==d||Ri!==f?(gL=null,yL=ga()+500,gx(d,f)):px=Jd(d,f);e:do try{if(cr!==0&&Ti!==null){f=Ti;var M=Dl;t:switch(cr){case 1:cr=0,Dl=null,vx(d,f,M,1);break;case 2:case 9:if(dee(M)){cr=0,Dl=null,eie(f);break}f=function(){cr!==2&&cr!==9||Or!==d||(cr=7),sh(d)},M.then(f,f);break e;case 3:cr=7;break e;case 4:cr=5;break e;case 7:dee(M)?(cr=0,Dl=null,eie(f)):(cr=0,Dl=null,vx(d,f,M,7));break;case 5:var V=null;switch(Ti.tag){case 26:V=Ti.memoizedState;case 5:case 27:var J=Ti;if(!V||Rie(V)){cr=0,Dl=null;var oe=J.sibling;if(oe!==null)Ti=oe;else{var Ee=J.return;Ee!==null?(Ti=Ee,bL(Ee)):Ti=null}break t}}cr=0,Dl=null,vx(d,f,M,5);break;case 6:cr=0,Dl=null,vx(d,f,M,6);break;case 8:V6(),Pn=6;break e;default:throw Error(r(462))}}mke();break}catch(ze){Yte(d,ze)}while(!0);return $f=l0=null,le.H=_,le.A=E,lr=g,Ti!==null?0:(Or=null,Ri=0,UP(),Pn)}function mke(){for(;Ti!==null&&!of();)Qte(Ti)}function Qte(d){var f=Ete(d.alternate,d,Of);d.memoizedProps=d.pendingProps,f===null?bL(d):Ti=f}function eie(d){var f=d,g=f.alternate;switch(f.tag){case 15:case 0:f=wte(g,f,f.pendingProps,f.type,void 0,Ri);break;case 11:f=wte(g,f,f.pendingProps,f.type.render,f.ref,Ri);break;case 5:s6(f);default:Ite(g,f),f=Ti=tee(f,Of),f=Ete(g,f,Of)}d.memoizedProps=d.pendingProps,f===null?bL(d):Ti=f}function vx(d,f,g,_){$f=l0=null,s6(f),cx=null,sI=0;var E=f.return;try{if(nke(d,E,f,g,Ri)){Pn=1,uL(d,Ac(g,d.current)),Ti=null;return}}catch(M){if(E!==null)throw Ti=E,M;Pn=1,uL(d,Ac(g,d.current)),Ti=null;return}f.flags&32768?(Wi||_===1?d=!0:px||(Ri&536870912)!==0?d=!1:(Qy=d=!0,(_===2||_===9||_===3||_===6)&&(_=Rc.current,_!==null&&_.tag===13&&(_.flags|=16384))),tie(f,d)):bL(f)}function bL(d){var f=d;do{if((f.flags&32768)!==0){tie(f,Qy);return}d=f.return;var g=oke(f.alternate,f,Of);if(g!==null){Ti=g;return}if(f=f.sibling,f!==null){Ti=f;return}Ti=f=d}while(f!==null);Pn===0&&(Pn=5)}function tie(d,f){do{var g=ake(d.alternate,d);if(g!==null){g.flags&=32767,Ti=g;return}if(g=d.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(d=d.sibling,d!==null)){Ti=d;return}Ti=d=g}while(d!==null);Pn=6,Ti=null}function iie(d,f,g,_,E,M,V,J,oe){d.cancelPendingCommit=null;do wL();while(ho!==0);if((lr&6)!==0)throw Error(r(327));if(f!==null){if(f===d.current)throw Error(r(177));if(M=f.lanes|f.childLanes,M|=Lj,N1(d,g,M,V,J,oe),d===Or&&(Ti=Or=null,Ri=0),mx=f,ig=d,yx=g,F6=M,U6=E,qte=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,bke(js,function(){return aie(),null})):(d.callbackNode=null,d.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=le.T,le.T=null,E=be.p,be.p=2,V=lr,lr|=4;try{lke(d,f,g)}finally{lr=V,be.p=E,le.T=_}}ho=1,rie(),nie(),sie()}}function rie(){if(ho===1){ho=0;var d=ig,f=mx,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=le.T,le.T=null;var _=be.p;be.p=2;var E=lr;lr|=4;try{Fte(f,d);var M=iV,V=Xe(d.containerInfo),J=M.focusedElem,oe=M.selectionRange;if(V!==J&&J&&J.ownerDocument&&Re(J.ownerDocument.documentElement,J)){if(oe!==null&&Je(J)){var Ee=oe.start,ze=oe.end;if(ze===void 0&&(ze=Ee),"selectionStart"in J)J.selectionStart=Ee,J.selectionEnd=Math.min(ze,J.value.length);else{var He=J.ownerDocument||document,ke=He&&He.defaultView||window;if(ke.getSelection){var Ae=ke.getSelection(),ei=J.textContent.length,Jt=Math.min(oe.start,ei),yr=oe.end===void 0?Jt:Math.min(oe.end,ei);!Ae.extend&&Jt>yr&&(V=yr,yr=Jt,Jt=V);var _e=we(J,Jt),me=we(J,yr);if(_e&&me&&(Ae.rangeCount!==1||Ae.anchorNode!==_e.node||Ae.anchorOffset!==_e.offset||Ae.focusNode!==me.node||Ae.focusOffset!==me.offset)){var Te=He.createRange();Te.setStart(_e.node,_e.offset),Ae.removeAllRanges(),Jt>yr?(Ae.addRange(Te),Ae.extend(me.node,me.offset)):(Te.setEnd(me.node,me.offset),Ae.addRange(Te))}}}}for(He=[],Ae=J;Ae=Ae.parentNode;)Ae.nodeType===1&&He.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<He.length;J++){var je=He[J];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}OL=!!tV,iV=tV=null}finally{lr=E,be.p=_,le.T=g}}d.current=f,ho=2}}function nie(){if(ho===2){ho=0;var d=ig,f=mx,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=le.T,le.T=null;var _=be.p;be.p=2;var E=lr;lr|=4;try{Rte(d,f.alternate,f)}finally{lr=E,be.p=_,le.T=g}}ho=3}}function sie(){if(ho===4||ho===3){ho=0,Cu();var d=ig,f=mx,g=yx,_=qte;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ho=5:(ho=0,mx=ig=null,oie(d,d.pendingLanes));var E=d.pendingLanes;if(E===0&&(tg=null),Ie(g),f=f.stateNode,oo&&typeof oo.onCommitFiberRoot=="function")try{oo.onCommitFiberRoot(Al,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=le.T,E=be.p,be.p=2,le.T=null;try{for(var M=d.onRecoverableError,V=0;V<_.length;V++){var J=_[V];M(J.value,{componentStack:J.stack})}}finally{le.T=f,be.p=E}}(yx&3)!==0&&wL(),sh(d),E=d.pendingLanes,(g&4194090)!==0&&(E&42)!==0?d===j6?fI++:(fI=0,j6=d):fI=0,mI(0)}}function oie(d,f){(d.pooledCacheLanes&=f)===0&&(f=d.pooledCache,f!=null&&(d.pooledCache=null,JC(f)))}function wL(d){return rie(),nie(),sie(),aie()}function aie(){if(ho!==5)return!1;var d=ig,f=F6;F6=0;var g=Ie(yx),_=le.T,E=be.p;try{be.p=32>g?32:g,le.T=null,g=U6,U6=null;var M=ig,V=yx;if(ho=0,mx=ig=null,yx=0,(lr&6)!==0)throw Error(r(331));var J=lr;if(lr|=4,Gte(M.current),jte(M,M.current,V,g),lr=J,mI(0,!1),oo&&typeof oo.onPostCommitFiberRoot=="function")try{oo.onPostCommitFiberRoot(Al,M)}catch{}return!0}finally{be.p=E,le.T=_,oie(d,f)}}function lie(d,f,g){f=Ac(g,f),f=b6(d.stateNode,f,2),d=qy(d,f,2),d!==null&&(Mu(d,2),sh(d))}function Tr(d,f,g){if(d.tag===3)lie(d,d,g);else for(;f!==null;){if(f.tag===3){lie(f,d,g);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(tg===null||!tg.has(_))){d=Ac(g,d),g=hte(2),_=qy(f,g,2),_!==null&&(pte(g,_,f,d),Mu(_,2),sh(_));break}}f=f.return}}function H6(d,f,g){var _=d.pingCache;if(_===null){_=d.pingCache=new dke;var E=new Set;_.set(f,E)}else E=_.get(f),E===void 0&&(E=new Set,_.set(f,E));E.has(g)||(R6=!0,E.add(g),d=yke.bind(null,d,f,g),f.then(d,d))}function yke(d,f,g){var _=d.pingCache;_!==null&&_.delete(f),d.pingedLanes|=d.suspendedLanes&g,d.warmLanes&=~g,Or===d&&(Ri&g)===g&&(Pn===4||Pn===3&&(Ri&62914560)===Ri&&300>ga()-z6?(lr&2)===0&&gx(d,0):D6|=g,fx===Ri&&(fx=0)),sh(d)}function cie(d,f){f===0&&(f=Iu()),d=Q1(d,f),d!==null&&(Mu(d,f),sh(d))}function gke(d){var f=d.memoizedState,g=0;f!==null&&(g=f.retryLane),cie(d,g)}function vke(d,f){var g=0;switch(d.tag){case 13:var _=d.stateNode,E=d.memoizedState;E!==null&&(g=E.retryLane);break;case 19:_=d.stateNode;break;case 22:_=d.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(f),cie(d,g)}function bke(d,f){return ma(d,f)}var _L=null,bx=null,q6=!1,xL=!1,W6=!1,m0=0;function sh(d){d!==bx&&d.next===null&&(bx===null?_L=bx=d:bx=bx.next=d),xL=!0,q6||(q6=!0,_ke())}function mI(d,f){if(!W6&&xL){W6=!0;do for(var g=!1,_=_L;_!==null;){if(d!==0){var E=_.pendingLanes;if(E===0)var M=0;else{var V=_.suspendedLanes,J=_.pingedLanes;M=(1<<31-ao(42|d)+1)-1,M&=E&~(V&~J),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(g=!0,pie(_,M))}else M=Ri,M=uf(_,_===Or?M:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(M&3)===0||Jd(_,M)||(g=!0,pie(_,M));_=_.next}while(g);W6=!1}}function wke(){uie()}function uie(){xL=q6=!1;var d=0;m0!==0&&(Mke()&&(d=m0),m0=0);for(var f=ga(),g=null,_=_L;_!==null;){var E=_.next,M=die(_,f);M===0?(_.next=null,g===null?_L=E:g.next=E,E===null&&(bx=g)):(g=_,(d!==0||(M&3)!==0)&&(xL=!0)),_=E}mI(d)}function die(d,f){for(var g=d.suspendedLanes,_=d.pingedLanes,E=d.expirationTimes,M=d.pendingLanes&-62914561;0<M;){var V=31-ao(M),J=1<<V,oe=E[V];oe===-1?((J&g)===0||(J&_)!==0)&&(E[V]=df(J,f)):oe<=f&&(d.expiredLanes|=J),M&=~J}if(f=Or,g=Ri,g=uf(d,d===f?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),_=d.callbackNode,g===0||d===f&&(cr===2||cr===9)||d.cancelPendingCommit!==null)return _!==null&&_!==null&&ya(_),d.callbackNode=null,d.callbackPriority=0;if((g&3)===0||Jd(d,g)){if(f=g&-g,f===d.callbackPriority)return f;switch(_!==null&&ya(_),Ie(g)){case 2:case 8:g=Wd;break;case 32:g=js;break;case 268435456:g=Lb;break;default:g=js}return _=hie.bind(null,d),g=ma(g,_),d.callbackPriority=f,d.callbackNode=g,f}return _!==null&&_!==null&&ya(_),d.callbackPriority=2,d.callbackNode=null,2}function hie(d,f){if(ho!==0&&ho!==5)return d.callbackNode=null,d.callbackPriority=0,null;var g=d.callbackNode;if(wL()&&d.callbackNode!==g)return null;var _=Ri;return _=uf(d,d===Or?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),_===0?null:(Jte(d,_,f),die(d,ga()),d.callbackNode!=null&&d.callbackNode===g?hie.bind(null,d):null)}function pie(d,f){if(wL())return null;Jte(d,f,!0)}function _ke(){Ake(function(){(lr&6)!==0?ma(Pb,wke):uie()})}function J6(){return m0===0&&(m0=Zd()),m0}function fie(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Gb(""+d)}function mie(d,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,d.id&&g.setAttribute("form",d.id),f.parentNode.insertBefore(g,f),d=new FormData(d),g.parentNode.removeChild(g),d}function xke(d,f,g,_,E){if(f==="submit"&&g&&g.stateNode===E){var M=fie((E[Xn]||null).action),V=_.submitter;V&&(f=(f=V[Xn]||null)?fie(f.formAction):V.getAttribute("formAction"),f!==null&&(M=f,V=null));var J=new Uy("action","action",null,_,E);d.push({event:J,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(m0!==0){var oe=V?mie(E,V):new FormData(E);f6(g,{pending:!0,data:oe,method:E.method,action:M},null,oe)}}else typeof M=="function"&&(J.preventDefault(),oe=V?mie(E,V):new FormData(E),f6(g,{pending:!0,data:oe,method:E.method,action:M},M,oe))},currentTarget:E}]})}}for(var Z6=0;Z6<Pj.length;Z6++){var Y6=Pj[Z6],Ske=Y6.toLowerCase(),$ke=Y6[0].toUpperCase()+Y6.slice(1);Pu(Ske,"on"+$ke)}Pu(Ja,"onAnimationEnd"),Pu(kc,"onAnimationIteration"),Pu(t0,"onAnimationStart"),Pu("dblclick","onDoubleClick"),Pu("focusin","onFocus"),Pu("focusout","onBlur"),Pu(i0,"onTransitionRun"),Pu(V2e,"onTransitionStart"),Pu(B2e,"onTransitionCancel"),Pu(XQ,"onTransitionEnd"),Kd("onMouseEnter",["mouseout","mouseover"]),Kd("onMouseLeave",["mouseout","mouseover"]),Kd("onPointerEnter",["pointerout","pointerover"]),Kd("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tke=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yI));function yie(d,f){f=(f&4)!==0;for(var g=0;g<d.length;g++){var _=d[g],E=_.event;_=_.listeners;e:{var M=void 0;if(f)for(var V=_.length-1;0<=V;V--){var J=_[V],oe=J.instance,Ee=J.currentTarget;if(J=J.listener,oe!==M&&E.isPropagationStopped())break e;M=J,E.currentTarget=Ee;try{M(E)}catch(ze){cL(ze)}E.currentTarget=null,M=oe}else for(V=0;V<_.length;V++){if(J=_[V],oe=J.instance,Ee=J.currentTarget,J=J.listener,oe!==M&&E.isPropagationStopped())break e;M=J,E.currentTarget=Ee;try{M(E)}catch(ze){cL(ze)}E.currentTarget=null,M=oe}}}}function Ei(d,f){var g=f[Bs];g===void 0&&(g=f[Bs]=new Set);var _=d+"__bubble";g.has(_)||(gie(f,d,2,!1),g.add(_))}function X6(d,f,g){var _=0;f&&(_|=4),gie(g,d,_,f)}var SL="_reactListening"+Math.random().toString(36).slice(2);function K6(d){if(!d[SL]){d[SL]=!0,z1.forEach(function(g){g!=="selectionchange"&&(Tke.has(g)||X6(g,!1,d),X6(g,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[SL]||(f[SL]=!0,X6("selectionchange",!1,f))}}function gie(d,f,g,_){switch(jie(f)){case 2:var E=Kke;break;case 8:E=Qke;break;default:E=hV}g=E.bind(null,f,g,d),E=void 0,!V1||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),_?E!==void 0?d.addEventListener(f,g,{capture:!0,passive:E}):d.addEventListener(f,g,!0):E!==void 0?d.addEventListener(f,g,{passive:E}):d.addEventListener(f,g,!1)}function Q6(d,f,g,_,E){var M=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var V=_.tag;if(V===3||V===4){var J=_.stateNode.containerInfo;if(J===E)break;if(V===4)for(V=_.return;V!==null;){var oe=V.tag;if((oe===3||oe===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;J!==null;){if(V=Gs(J),V===null)return;if(oe=V.tag,oe===5||oe===6||oe===26||oe===27){_=M=V;continue e}J=J.parentNode}}_=_.return}Hb(function(){var Ee=M,ze=RC(g),He=[];e:{var ke=KQ.get(d);if(ke!==void 0){var Ae=Uy,ei=d;switch(d){case"keypress":if(vf(g)===0)break e;case"keydown":case"keyup":Ae=J1;break;case"focusin":ei="focus",Ae=W1;break;case"focusout":ei="blur",Ae=W1;break;case"beforeblur":case"afterblur":Ae=W1;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=EP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=gj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=AP;break;case Ja:case kc:case t0:Ae=vj;break;case XQ:Ae=Ej;break;case"scroll":case"scrollend":Ae=TP;break;case"wheel":Ae=Ij;break;case"copy":case"cut":case"paste":Ae=wj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=FC;break;case"toggle":case"beforetoggle":Ae=kj}var Jt=(f&4)!==0,yr=!Jt&&(d==="scroll"||d==="scrollend"),_e=Jt?ke!==null?ke+"Capture":null:ke;Jt=[];for(var me=Ee,Te;me!==null;){var je=me;if(Te=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||Te===null||_e===null||(je=qb(me,_e),je!=null&&Jt.push(gI(me,je,Te))),yr)break;me=me.return}0<Jt.length&&(ke=new Ae(ke,ei,null,g,ze),He.push({event:ke,listeners:Jt}))}}if((f&7)===0){e:{if(ke=d==="mouseover"||d==="pointerover",Ae=d==="mouseout"||d==="pointerout",ke&&g!==j1&&(ei=g.relatedTarget||g.fromElement)&&(Gs(ei)||ei[vt]))break e;if((Ae||ke)&&(ke=ze.window===ze?ze:(ke=ze.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ae?(ei=g.relatedTarget||g.toElement,Ae=Ee,ei=ei?Gs(ei):null,ei!==null&&(yr=s(ei),Jt=ei.tag,ei!==yr||Jt!==5&&Jt!==27&&Jt!==6)&&(ei=null)):(Ae=null,ei=Ee),Ae!==ei)){if(Jt=EP,je="onMouseLeave",_e="onMouseEnter",me="mouse",(d==="pointerout"||d==="pointerover")&&(Jt=FC,je="onPointerLeave",_e="onPointerEnter",me="pointer"),yr=Ae==null?ke:Ht(Ae),Te=ei==null?ke:Ht(ei),ke=new Jt(je,me+"leave",Ae,g,ze),ke.target=yr,ke.relatedTarget=Te,je=null,Gs(ze)===Ee&&(Jt=new Jt(_e,me+"enter",ei,g,ze),Jt.target=Te,Jt.relatedTarget=yr,je=Jt),yr=je,Ae&&ei)t:{for(Jt=Ae,_e=ei,me=0,Te=Jt;Te;Te=wx(Te))me++;for(Te=0,je=_e;je;je=wx(je))Te++;for(;0<me-Te;)Jt=wx(Jt),me--;for(;0<Te-me;)_e=wx(_e),Te--;for(;me--;){if(Jt===_e||_e!==null&&Jt===_e.alternate)break t;Jt=wx(Jt),_e=wx(_e)}Jt=null}else Jt=null;Ae!==null&&vie(He,ke,Ae,Jt,!1),ei!==null&&yr!==null&&vie(He,yr,ei,Jt,!0)}}e:{if(ke=Ee?Ht(Ee):window,Ae=ke.nodeName&&ke.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ke.type==="file")var Ct=zP;else if(DP(ke))if(FP)Ct=H;else{Ct=N;var xi=O}else Ae=ke.nodeName,!Ae||Ae.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?Ee&&U1(Ee.elementType)&&(Ct=zP):Ct=j;if(Ct&&(Ct=Ct(d,Ee))){NP(He,Ct,g,ze);break e}xi&&xi(d,ke,Ee),d==="focusout"&&Ee&&ke.type==="number"&&Ee.memoizedProps.value!=null&&Ec(ke,"number",ke.value)}switch(xi=Ee?Ht(Ee):window,d){case"focusin":(DP(xi)||xi.contentEditable==="true")&&(ht=xi,ct=Ee,Mt=null);break;case"focusout":Mt=ct=ht=null;break;case"mousedown":oi=!0;break;case"contextmenu":case"mouseup":case"dragend":oi=!1,bi(He,g,ze);break;case"selectionchange":if(tt)break;case"keydown":case"keyup":bi(He,g,ze)}var Nt;if(Xb)e:{switch(d){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else Mc?LP(d,g)&&(Zt="onCompositionEnd"):d==="keydown"&&g.keyCode===229&&(Zt="onCompositionStart");Zt&&(OP&&g.locale!=="ko"&&(Mc||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&Mc&&(Nt=Fy()):(Ou=ze,B1="value"in Ou?Ou.value:Ou.textContent,Mc=!0)),xi=$L(Ee,Zt),0<xi.length&&(Zt=new IP(Zt,d,null,g,ze),He.push({event:Zt,listeners:xi}),Nt?Zt.data=Nt:(Nt=UC(g),Nt!==null&&(Zt.data=Nt)))),(Nt=Z1?eh(d,g):RP(d,g))&&(Zt=$L(Ee,"onBeforeInput"),0<Zt.length&&(xi=new IP("onBeforeInput","beforeinput",null,g,ze),He.push({event:xi,listeners:Zt}),xi.data=Nt)),xke(He,d,Ee,g,ze)}yie(He,f)})}function gI(d,f,g){return{instance:d,listener:f,currentTarget:g}}function $L(d,f){for(var g=f+"Capture",_=[];d!==null;){var E=d,M=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||M===null||(E=qb(d,g),E!=null&&_.unshift(gI(d,E,M)),E=qb(d,f),E!=null&&_.push(gI(d,E,M))),d.tag===3)return _;d=d.return}return[]}function wx(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function vie(d,f,g,_,E){for(var M=f._reactName,V=[];g!==null&&g!==_;){var J=g,oe=J.alternate,Ee=J.stateNode;if(J=J.tag,oe!==null&&oe===_)break;J!==5&&J!==26&&J!==27||Ee===null||(oe=Ee,E?(Ee=qb(g,M),Ee!=null&&V.unshift(gI(g,Ee,oe))):E||(Ee=qb(g,M),Ee!=null&&V.push(gI(g,Ee,oe)))),g=g.return}V.length!==0&&d.push({event:f,listeners:V})}var Eke=/\r\n?/g,Cke=/\u0000|\uFFFD/g;function bie(d){return(typeof d=="string"?d:""+d).replace(Eke,`
`).replace(Cke,"")}function wie(d,f){return f=bie(f),bie(d)===f}function TL(){}function mr(d,f,g,_,E,M){switch(g){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||gf(d,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&gf(d,""+_);break;case"className":ff(d,"class",_);break;case"tabIndex":ff(d,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":ff(d,g,_);break;case"style":$P(d,_,M);break;case"data":if(f!=="object"){ff(d,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||g!=="href")){d.removeAttribute(g);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){d.removeAttribute(g);break}_=Gb(""+_),d.setAttribute(g,_);break;case"action":case"formAction":if(typeof _=="function"){d.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(g==="formAction"?(f!=="input"&&mr(d,f,"name",E.name,E,null),mr(d,f,"formEncType",E.formEncType,E,null),mr(d,f,"formMethod",E.formMethod,E,null),mr(d,f,"formTarget",E.formTarget,E,null)):(mr(d,f,"encType",E.encType,E,null),mr(d,f,"method",E.method,E,null),mr(d,f,"target",E.target,E,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){d.removeAttribute(g);break}_=Gb(""+_),d.setAttribute(g,_);break;case"onClick":_!=null&&(d.onclick=TL);break;case"onScroll":_!=null&&Ei("scroll",d);break;case"onScrollEnd":_!=null&&Ei("scrollend",d);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(E.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"multiple":d.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":d.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){d.removeAttribute("xlink:href");break}g=Gb(""+_),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?d.setAttribute(g,""+_):d.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?d.setAttribute(g,""):d.removeAttribute(g);break;case"capture":case"download":_===!0?d.setAttribute(g,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?d.setAttribute(g,_):d.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?d.setAttribute(g,_):d.removeAttribute(g);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?d.removeAttribute(g):d.setAttribute(g,_);break;case"popover":Ei("beforetoggle",d),Ei("toggle",d),pf(d,"popover",_);break;case"xlinkActuate":Po(d,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Po(d,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Po(d,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Po(d,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Po(d,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Po(d,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Po(d,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Po(d,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Po(d,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":pf(d,"is",_);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=fj.get(g)||g,pf(d,g,_))}}function eV(d,f,g,_,E,M){switch(g){case"style":$P(d,_,M);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(E.children!=null)throw Error(r(60));d.innerHTML=g}}break;case"children":typeof _=="string"?gf(d,_):(typeof _=="number"||typeof _=="bigint")&&gf(d,""+_);break;case"onScroll":_!=null&&Ei("scroll",d);break;case"onScrollEnd":_!=null&&Ei("scrollend",d);break;case"onClick":_!=null&&(d.onclick=TL);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xd.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(E=g.endsWith("Capture"),f=g.slice(2,E?g.length-7:void 0),M=d[Xn]||null,M=M!=null?M[g]:null,typeof M=="function"&&d.removeEventListener(f,M,E),typeof _=="function")){typeof M!="function"&&M!==null&&(g in d?d[g]=null:d.hasAttribute(g)&&d.removeAttribute(g)),d.addEventListener(f,_,E);break e}g in d?d[g]=_:_===!0?d.setAttribute(g,""):pf(d,g,_)}}}function po(d,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ei("error",d),Ei("load",d);var _=!1,E=!1,M;for(M in g)if(g.hasOwnProperty(M)){var V=g[M];if(V!=null)switch(M){case"src":_=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:mr(d,f,M,V,g,null)}}E&&mr(d,f,"srcSet",g.srcSet,g,null),_&&mr(d,f,"src",g.src,g,null);return;case"input":Ei("invalid",d);var J=M=V=E=null,oe=null,Ee=null;for(_ in g)if(g.hasOwnProperty(_)){var ze=g[_];if(ze!=null)switch(_){case"name":E=ze;break;case"type":V=ze;break;case"checked":oe=ze;break;case"defaultChecked":Ee=ze;break;case"value":M=ze;break;case"defaultValue":J=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,f));break;default:mr(d,f,_,ze,g,null)}}Bb(d,M,J,oe,Ee,V,E,!1),Pt(d);return;case"select":Ei("invalid",d),_=V=M=null;for(E in g)if(g.hasOwnProperty(E)&&(J=g[E],J!=null))switch(E){case"value":M=J;break;case"defaultValue":V=J;break;case"multiple":_=J;default:mr(d,f,E,J,g,null)}f=M,g=V,d.multiple=!!_,f!=null?Cc(d,!!_,f,!1):g!=null&&Cc(d,!!_,g,!0);return;case"textarea":Ei("invalid",d),M=E=_=null;for(V in g)if(g.hasOwnProperty(V)&&(J=g[V],J!=null))switch(V){case"value":_=J;break;case"defaultValue":E=J;break;case"children":M=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(91));break;default:mr(d,f,V,J,g,null)}PC(d,_,E,M),Pt(d);return;case"option":for(oe in g)if(g.hasOwnProperty(oe)&&(_=g[oe],_!=null))switch(oe){case"selected":d.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:mr(d,f,oe,_,g,null)}return;case"dialog":Ei("beforetoggle",d),Ei("toggle",d),Ei("cancel",d),Ei("close",d);break;case"iframe":case"object":Ei("load",d);break;case"video":case"audio":for(_=0;_<yI.length;_++)Ei(yI[_],d);break;case"image":Ei("error",d),Ei("load",d);break;case"details":Ei("toggle",d);break;case"embed":case"source":case"link":Ei("error",d),Ei("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in g)if(g.hasOwnProperty(Ee)&&(_=g[Ee],_!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:mr(d,f,Ee,_,g,null)}return;default:if(U1(f)){for(ze in g)g.hasOwnProperty(ze)&&(_=g[ze],_!==void 0&&eV(d,f,ze,_,g,void 0));return}}for(J in g)g.hasOwnProperty(J)&&(_=g[J],_!=null&&mr(d,f,J,_,g,null))}function Ike(d,f,g,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,M=null,V=null,J=null,oe=null,Ee=null,ze=null;for(Ae in g){var He=g[Ae];if(g.hasOwnProperty(Ae)&&He!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":oe=He;default:_.hasOwnProperty(Ae)||mr(d,f,Ae,null,_,He)}}for(var ke in _){var Ae=_[ke];if(He=g[ke],_.hasOwnProperty(ke)&&(Ae!=null||He!=null))switch(ke){case"type":M=Ae;break;case"name":E=Ae;break;case"checked":Ee=Ae;break;case"defaultChecked":ze=Ae;break;case"value":V=Ae;break;case"defaultValue":J=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,f));break;default:Ae!==He&&mr(d,f,ke,Ae,_,He)}}Vb(d,V,J,oe,Ee,ze,M,E);return;case"select":Ae=V=J=ke=null;for(M in g)if(oe=g[M],g.hasOwnProperty(M)&&oe!=null)switch(M){case"value":break;case"multiple":Ae=oe;default:_.hasOwnProperty(M)||mr(d,f,M,null,_,oe)}for(E in _)if(M=_[E],oe=g[E],_.hasOwnProperty(E)&&(M!=null||oe!=null))switch(E){case"value":ke=M;break;case"defaultValue":J=M;break;case"multiple":V=M;default:M!==oe&&mr(d,f,E,M,_,oe)}f=J,g=V,_=Ae,ke!=null?Cc(d,!!g,ke,!1):!!_!=!!g&&(f!=null?Cc(d,!!g,f,!0):Cc(d,!!g,g?[]:"",!1));return;case"textarea":Ae=ke=null;for(J in g)if(E=g[J],g.hasOwnProperty(J)&&E!=null&&!_.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:mr(d,f,J,null,_,E)}for(V in _)if(E=_[V],M=g[V],_.hasOwnProperty(V)&&(E!=null||M!=null))switch(V){case"value":ke=E;break;case"defaultValue":Ae=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==M&&mr(d,f,V,E,_,M)}xP(d,ke,Ae);return;case"option":for(var ei in g)if(ke=g[ei],g.hasOwnProperty(ei)&&ke!=null&&!_.hasOwnProperty(ei))switch(ei){case"selected":d.selected=!1;break;default:mr(d,f,ei,null,_,ke)}for(oe in _)if(ke=_[oe],Ae=g[oe],_.hasOwnProperty(oe)&&ke!==Ae&&(ke!=null||Ae!=null))switch(oe){case"selected":d.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:mr(d,f,oe,ke,_,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jt in g)ke=g[Jt],g.hasOwnProperty(Jt)&&ke!=null&&!_.hasOwnProperty(Jt)&&mr(d,f,Jt,null,_,ke);for(Ee in _)if(ke=_[Ee],Ae=g[Ee],_.hasOwnProperty(Ee)&&ke!==Ae&&(ke!=null||Ae!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,f));break;default:mr(d,f,Ee,ke,_,Ae)}return;default:if(U1(f)){for(var yr in g)ke=g[yr],g.hasOwnProperty(yr)&&ke!==void 0&&!_.hasOwnProperty(yr)&&eV(d,f,yr,void 0,_,ke);for(ze in _)ke=_[ze],Ae=g[ze],!_.hasOwnProperty(ze)||ke===Ae||ke===void 0&&Ae===void 0||eV(d,f,ze,ke,_,Ae);return}}for(var _e in g)ke=g[_e],g.hasOwnProperty(_e)&&ke!=null&&!_.hasOwnProperty(_e)&&mr(d,f,_e,null,_,ke);for(He in _)ke=_[He],Ae=g[He],!_.hasOwnProperty(He)||ke===Ae||ke==null&&Ae==null||mr(d,f,He,ke,_,Ae)}var tV=null,iV=null;function EL(d){return d.nodeType===9?d:d.ownerDocument}function _ie(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xie(d,f){if(d===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&f==="foreignObject"?0:d}function rV(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var nV=null;function Mke(){var d=window.event;return d&&d.type==="popstate"?d===nV?!1:(nV=d,!0):(nV=null,!1)}var Sie=typeof setTimeout=="function"?setTimeout:void 0,kke=typeof clearTimeout=="function"?clearTimeout:void 0,$ie=typeof Promise=="function"?Promise:void 0,Ake=typeof queueMicrotask=="function"?queueMicrotask:typeof $ie<"u"?function(d){return $ie.resolve(null).then(d).catch(Oke)}:Sie;function Oke(d){setTimeout(function(){throw d})}function ng(d){return d==="head"}function Tie(d,f){var g=f,_=0,E=0;do{var M=g.nextSibling;if(d.removeChild(g),M&&M.nodeType===8)if(g=M.data,g==="/$"){if(0<_&&8>_){g=_;var V=d.ownerDocument;if(g&1&&vI(V.documentElement),g&2&&vI(V.body),g&4)for(g=V.head,vI(g),V=g.firstChild;V;){var J=V.nextSibling,oe=V.nodeName;V[hf]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&V.rel.toLowerCase()==="stylesheet"||g.removeChild(V),V=J}}if(E===0){d.removeChild(M),EI(f);return}E--}else g==="$"||g==="$?"||g==="$!"?E++:_=g.charCodeAt(0)-48;else _=0;g=M}while(g);EI(f)}function sV(d){var f=d.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":sV(g),va(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}d.removeChild(g)}}function Pke(d,f,g,_){for(;d.nodeType===1;){var E=g;if(d.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(_){if(!d[hf])switch(f){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(M=d.getAttribute("rel"),M==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(M!==E.rel||d.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||d.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||d.getAttribute("title")!==(E.title==null?null:E.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(M=d.getAttribute("src"),(M!==(E.src==null?null:E.src)||d.getAttribute("type")!==(E.type==null?null:E.type)||d.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&M&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(f==="input"&&d.type==="hidden"){var M=E.name==null?null:""+E.name;if(E.type==="hidden"&&d.getAttribute("name")===M)return d}else return d;if(d=Ru(d.nextSibling),d===null)break}return null}function Lke(d,f,g){if(f==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!g||(d=Ru(d.nextSibling),d===null))return null;return d}function oV(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Rke(d,f){var g=d.ownerDocument;if(d.data!=="$?"||g.readyState==="complete")f();else{var _=function(){f(),g.removeEventListener("DOMContentLoaded",_)};g.addEventListener("DOMContentLoaded",_),d._reactRetry=_}}function Ru(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return d}var aV=null;function Eie(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var g=d.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return d;f--}else g==="/$"&&f++}d=d.previousSibling}return null}function Cie(d,f,g){switch(f=EL(g),d){case"html":if(d=f.documentElement,!d)throw Error(r(452));return d;case"head":if(d=f.head,!d)throw Error(r(453));return d;case"body":if(d=f.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function vI(d){for(var f=d.attributes;f.length;)d.removeAttributeNode(f[0]);va(d)}var Nc=new Map,Iie=new Set;function CL(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Pf=be.d;be.d={f:Dke,r:Nke,D:zke,C:Fke,L:Uke,m:jke,X:Bke,S:Vke,M:Gke};function Dke(){var d=Pf.f(),f=vL();return d||f}function Nke(d){var f=Dt(d);f!==null&&f.tag===5&&f.type==="form"?Jee(f):Pf.r(d)}var _x=typeof document>"u"?null:document;function Mie(d,f,g){var _=_x;if(_&&typeof f=="string"&&f){var E=ki(f);E='link[rel="'+d+'"][href="'+E+'"]',typeof g=="string"&&(E+='[crossorigin="'+g+'"]'),Iie.has(E)||(Iie.add(E),d={rel:d,crossOrigin:g,href:f},_.querySelector(E)===null&&(f=_.createElement("link"),po(f,"link",d),gn(f),_.head.appendChild(f)))}}function zke(d){Pf.D(d),Mie("dns-prefetch",d,null)}function Fke(d,f){Pf.C(d,f),Mie("preconnect",d,f)}function Uke(d,f,g){Pf.L(d,f,g);var _=_x;if(_&&d&&f){var E='link[rel="preload"][as="'+ki(f)+'"]';f==="image"&&g&&g.imageSrcSet?(E+='[imagesrcset="'+ki(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(E+='[imagesizes="'+ki(g.imageSizes)+'"]')):E+='[href="'+ki(d)+'"]';var M=E;switch(f){case"style":M=xx(d);break;case"script":M=Sx(d)}Nc.has(M)||(d=h({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:d,as:f},g),Nc.set(M,d),_.querySelector(E)!==null||f==="style"&&_.querySelector(bI(M))||f==="script"&&_.querySelector(wI(M))||(f=_.createElement("link"),po(f,"link",d),gn(f),_.head.appendChild(f)))}}function jke(d,f){Pf.m(d,f);var g=_x;if(g&&d){var _=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+ki(_)+'"][href="'+ki(d)+'"]',M=E;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=Sx(d)}if(!Nc.has(M)&&(d=h({rel:"modulepreload",href:d},f),Nc.set(M,d),g.querySelector(E)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(wI(M)))return}_=g.createElement("link"),po(_,"link",d),gn(_),g.head.appendChild(_)}}}function Vke(d,f,g){Pf.S(d,f,g);var _=_x;if(_&&d){var E=Au(_).hoistableStyles,M=xx(d);f=f||"default";var V=E.get(M);if(!V){var J={loading:0,preload:null};if(V=_.querySelector(bI(M)))J.loading=5;else{d=h({rel:"stylesheet",href:d,"data-precedence":f},g),(g=Nc.get(M))&&lV(d,g);var oe=V=_.createElement("link");gn(oe),po(oe,"link",d),oe._p=new Promise(function(Ee,ze){oe.onload=Ee,oe.onerror=ze}),oe.addEventListener("load",function(){J.loading|=1}),oe.addEventListener("error",function(){J.loading|=2}),J.loading|=4,IL(V,f,_)}V={type:"stylesheet",instance:V,count:1,state:J},E.set(M,V)}}}function Bke(d,f){Pf.X(d,f);var g=_x;if(g&&d){var _=Au(g).hoistableScripts,E=Sx(d),M=_.get(E);M||(M=g.querySelector(wI(E)),M||(d=h({src:d,async:!0},f),(f=Nc.get(E))&&cV(d,f),M=g.createElement("script"),gn(M),po(M,"link",d),g.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},_.set(E,M))}}function Gke(d,f){Pf.M(d,f);var g=_x;if(g&&d){var _=Au(g).hoistableScripts,E=Sx(d),M=_.get(E);M||(M=g.querySelector(wI(E)),M||(d=h({src:d,async:!0,type:"module"},f),(f=Nc.get(E))&&cV(d,f),M=g.createElement("script"),gn(M),po(M,"link",d),g.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},_.set(E,M))}}function kie(d,f,g,_){var E=(E=zt.current)?CL(E):null;if(!E)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=xx(g.href),g=Au(E).hoistableStyles,_=g.get(f),_||(_={type:"style",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){d=xx(g.href);var M=Au(E).hoistableStyles,V=M.get(d);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(d,V),(M=E.querySelector(bI(d)))&&!M._p&&(V.instance=M,V.state.loading=5),Nc.has(d)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Nc.set(d,g),M||Hke(E,d,g,V.state))),f&&_===null)throw Error(r(528,""));return V}if(f&&_!==null)throw Error(r(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Sx(g),g=Au(E).hoistableScripts,_=g.get(f),_||(_={type:"script",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function xx(d){return'href="'+ki(d)+'"'}function bI(d){return'link[rel="stylesheet"]['+d+"]"}function Aie(d){return h({},d,{"data-precedence":d.precedence,precedence:null})}function Hke(d,f,g,_){d.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=d.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),po(f,"link",g),gn(f),d.head.appendChild(f))}function Sx(d){return'[src="'+ki(d)+'"]'}function wI(d){return"script[async]"+d}function Oie(d,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var _=d.querySelector('style[data-href~="'+ki(g.href)+'"]');if(_)return f.instance=_,gn(_),_;var E=h({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return _=(d.ownerDocument||d).createElement("style"),gn(_),po(_,"style",E),IL(_,g.precedence,d),f.instance=_;case"stylesheet":E=xx(g.href);var M=d.querySelector(bI(E));if(M)return f.state.loading|=4,f.instance=M,gn(M),M;_=Aie(g),(E=Nc.get(E))&&lV(_,E),M=(d.ownerDocument||d).createElement("link"),gn(M);var V=M;return V._p=new Promise(function(J,oe){V.onload=J,V.onerror=oe}),po(M,"link",_),f.state.loading|=4,IL(M,g.precedence,d),f.instance=M;case"script":return M=Sx(g.src),(E=d.querySelector(wI(M)))?(f.instance=E,gn(E),E):(_=g,(E=Nc.get(M))&&(_=h({},g),cV(_,E)),d=d.ownerDocument||d,E=d.createElement("script"),gn(E),po(E,"link",_),d.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,IL(_,g.precedence,d));return f.instance}function IL(d,f,g){for(var _=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=_.length?_[_.length-1]:null,M=E,V=0;V<_.length;V++){var J=_[V];if(J.dataset.precedence===f)M=J;else if(M!==E)break}M?M.parentNode.insertBefore(d,M.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(d,f.firstChild))}function lV(d,f){d.crossOrigin==null&&(d.crossOrigin=f.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=f.referrerPolicy),d.title==null&&(d.title=f.title)}function cV(d,f){d.crossOrigin==null&&(d.crossOrigin=f.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=f.referrerPolicy),d.integrity==null&&(d.integrity=f.integrity)}var ML=null;function Pie(d,f,g){if(ML===null){var _=new Map,E=ML=new Map;E.set(g,_)}else E=ML,_=E.get(g),_||(_=new Map,E.set(g,_));if(_.has(d))return _;for(_.set(d,null),g=g.getElementsByTagName(d),E=0;E<g.length;E++){var M=g[E];if(!(M[hf]||M[Xi]||d==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var V=M.getAttribute(f)||"";V=d+V;var J=_.get(V);J?J.push(M):_.set(V,[M])}}return _}function Lie(d,f,g){d=d.ownerDocument||d,d.head.insertBefore(g,f==="title"?d.querySelector("head > title"):null)}function qke(d,f,g){if(g===1||f.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return d=f.disabled,typeof f.precedence=="string"&&d==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function Rie(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var _I=null;function Wke(){}function Jke(d,f,g){if(_I===null)throw Error(r(475));var _=_I;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=xx(g.href),M=d.querySelector(bI(E));if(M){d=M._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(_.count++,_=kL.bind(_),d.then(_,_)),f.state.loading|=4,f.instance=M,gn(M);return}M=d.ownerDocument||d,g=Aie(g),(E=Nc.get(E))&&lV(g,E),M=M.createElement("link"),gn(M);var V=M;V._p=new Promise(function(J,oe){V.onload=J,V.onerror=oe}),po(M,"link",g),f.instance=M}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,d),(d=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=kL.bind(_),d.addEventListener("load",f),d.addEventListener("error",f))}}function Zke(){if(_I===null)throw Error(r(475));var d=_I;return d.stylesheets&&d.count===0&&uV(d,d.stylesheets),0<d.count?function(f){var g=setTimeout(function(){if(d.stylesheets&&uV(d,d.stylesheets),d.unsuspend){var _=d.unsuspend;d.unsuspend=null,_()}},6e4);return d.unsuspend=f,function(){d.unsuspend=null,clearTimeout(g)}}:null}function kL(){if(this.count--,this.count===0){if(this.stylesheets)uV(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var AL=null;function uV(d,f){d.stylesheets=null,d.unsuspend!==null&&(d.count++,AL=new Map,f.forEach(Yke,d),AL=null,kL.call(d))}function Yke(d,f){if(!(f.state.loading&4)){var g=AL.get(d);if(g)var _=g.get(null);else{g=new Map,AL.set(d,g);for(var E=d.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<E.length;M++){var V=E[M];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(g.set(V.dataset.precedence,V),_=V)}_&&g.set(null,_)}E=f.instance,V=E.getAttribute("data-precedence"),M=g.get(V)||_,M===_&&g.set(null,E),g.set(V,E),this.count++,_=kL.bind(this),E.addEventListener("load",_),E.addEventListener("error",_),M?M.parentNode.insertBefore(E,M.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(E,d.firstChild)),f.state.loading|=4}}var xI={$$typeof:A,Provider:null,Consumer:null,_currentValue:Oe,_currentValue2:Oe,_threadCount:0};function Xke(d,f,g,_,E,M,V,J){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oy(0),this.hiddenUpdates=Oy(null),this.identifierPrefix=_,this.onUncaughtError=E,this.onCaughtError=M,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function Die(d,f,g,_,E,M,V,J,oe,Ee,ze,He){return d=new Xke(d,f,g,V,J,oe,Ee,He),f=1,M===!0&&(f|=24),M=Pl(3,null,null,f),d.current=M,M.stateNode=d,f=Hj(),f.refCount++,d.pooledCache=f,f.refCount++,M.memoizedState={element:_,isDehydrated:g,cache:f},Zj(M),d}function Nie(d){return d?(d=ex,d):ex}function zie(d,f,g,_,E,M){E=Nie(E),_.context===null?_.context=E:_.pendingContext=E,_=Hy(f),_.payload={element:g},M=M===void 0?null:M,M!==null&&(_.callback=M),g=qy(d,_,f),g!==null&&(zl(g,d,f),KC(g,d,f))}function Fie(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var g=d.retryLane;d.retryLane=g!==0&&g<f?g:f}}function dV(d,f){Fie(d,f),(d=d.alternate)&&Fie(d,f)}function Uie(d){if(d.tag===13){var f=Q1(d,67108864);f!==null&&zl(f,d,67108864),dV(d,67108864)}}var OL=!0;function Kke(d,f,g,_){var E=le.T;le.T=null;var M=be.p;try{be.p=2,hV(d,f,g,_)}finally{be.p=M,le.T=E}}function Qke(d,f,g,_){var E=le.T;le.T=null;var M=be.p;try{be.p=8,hV(d,f,g,_)}finally{be.p=M,le.T=E}}function hV(d,f,g,_){if(OL){var E=pV(_);if(E===null)Q6(d,f,_,PL,g),Vie(d,_);else if(tAe(E,d,f,g,_))_.stopPropagation();else if(Vie(d,_),f&4&&-1<eAe.indexOf(d)){for(;E!==null;){var M=Dt(E);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var V=Wa(M.pendingLanes);if(V!==0){var J=M;for(J.pendingLanes|=2,J.entangledLanes|=2;V;){var oe=1<<31-ao(V);J.entanglements[1]|=oe,V&=~oe}sh(M),(lr&6)===0&&(yL=ga()+500,mI(0))}}break;case 13:J=Q1(M,2),J!==null&&zl(J,M,2),vL(),dV(M,2)}if(M=pV(_),M===null&&Q6(d,f,_,PL,g),M===E)break;E=M}E!==null&&_.stopPropagation()}else Q6(d,f,_,null,g)}}function pV(d){return d=RC(d),fV(d)}var PL=null;function fV(d){if(PL=null,d=Gs(d),d!==null){var f=s(d);if(f===null)d=null;else{var g=f.tag;if(g===13){if(d=o(f),d!==null)return d;d=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null)}}return PL=d,null}function jie(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(af()){case Pb:return 2;case Wd:return 8;case js:case R1:return 32;case Lb:return 268435456;default:return 32}default:return 32}}var mV=!1,sg=null,og=null,ag=null,SI=new Map,$I=new Map,lg=[],eAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vie(d,f){switch(d){case"focusin":case"focusout":sg=null;break;case"dragenter":case"dragleave":og=null;break;case"mouseover":case"mouseout":ag=null;break;case"pointerover":case"pointerout":SI.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":$I.delete(f.pointerId)}}function TI(d,f,g,_,E,M){return d===null||d.nativeEvent!==M?(d={blockedOn:f,domEventName:g,eventSystemFlags:_,nativeEvent:M,targetContainers:[E]},f!==null&&(f=Dt(f),f!==null&&Uie(f)),d):(d.eventSystemFlags|=_,f=d.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),d)}function tAe(d,f,g,_,E){switch(f){case"focusin":return sg=TI(sg,d,f,g,_,E),!0;case"dragenter":return og=TI(og,d,f,g,_,E),!0;case"mouseover":return ag=TI(ag,d,f,g,_,E),!0;case"pointerover":var M=E.pointerId;return SI.set(M,TI(SI.get(M)||null,d,f,g,_,E)),!0;case"gotpointercapture":return M=E.pointerId,$I.set(M,TI($I.get(M)||null,d,f,g,_,E)),!0}return!1}function Bie(d){var f=Gs(d.target);if(f!==null){var g=s(f);if(g!==null){if(f=g.tag,f===13){if(f=o(g),f!==null){d.blockedOn=f,Tc(d.priority,function(){if(g.tag===13){var _=Nl();_=Ry(_);var E=Q1(g,_);E!==null&&zl(E,g,_),dV(g,_)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){d.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}d.blockedOn=null}function LL(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var g=pV(d.nativeEvent);if(g===null){g=d.nativeEvent;var _=new g.constructor(g.type,g);j1=_,g.target.dispatchEvent(_),j1=null}else return f=Dt(g),f!==null&&Uie(f),d.blockedOn=g,!1;f.shift()}return!0}function Gie(d,f,g){LL(d)&&g.delete(f)}function iAe(){mV=!1,sg!==null&&LL(sg)&&(sg=null),og!==null&&LL(og)&&(og=null),ag!==null&&LL(ag)&&(ag=null),SI.forEach(Gie),$I.forEach(Gie)}function RL(d,f){d.blockedOn===f&&(d.blockedOn=null,mV||(mV=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iAe)))}var DL=null;function Hie(d){DL!==d&&(DL=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){DL===d&&(DL=null);for(var f=0;f<d.length;f+=3){var g=d[f],_=d[f+1],E=d[f+2];if(typeof _!="function"){if(fV(_||g)===null)continue;break}var M=Dt(g);M!==null&&(d.splice(f,3),f-=3,f6(M,{pending:!0,data:E,method:g.method,action:_},_,E))}}))}function EI(d){function f(oe){return RL(oe,d)}sg!==null&&RL(sg,d),og!==null&&RL(og,d),ag!==null&&RL(ag,d),SI.forEach(f),$I.forEach(f);for(var g=0;g<lg.length;g++){var _=lg[g];_.blockedOn===d&&(_.blockedOn=null)}for(;0<lg.length&&(g=lg[0],g.blockedOn===null);)Bie(g),g.blockedOn===null&&lg.shift();if(g=(d.ownerDocument||d).$$reactFormReplay,g!=null)for(_=0;_<g.length;_+=3){var E=g[_],M=g[_+1],V=E[Xn]||null;if(typeof M=="function")V||Hie(g);else if(V){var J=null;if(M&&M.hasAttribute("formAction")){if(E=M,V=M[Xn]||null)J=V.formAction;else if(fV(E)!==null)continue}else J=V.action;typeof J=="function"?g[_+1]=J:(g.splice(_,3),_-=3),Hie(g)}}}function yV(d){this._internalRoot=d}NL.prototype.render=yV.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(r(409));var g=f.current,_=Nl();zie(g,_,d,f,null,null)},NL.prototype.unmount=yV.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;zie(d.current,2,null,d,null,null),vL(),f[vt]=null}};function NL(d){this._internalRoot=d}NL.prototype.unstable_scheduleHydration=function(d){if(d){var f=ar();d={blockedOn:null,target:d,priority:f};for(var g=0;g<lg.length&&f!==0&&f<lg[g].priority;g++);lg.splice(g,0,d),g===0&&Bie(d)}};var qie=e.version;if(qie!=="19.1.0")throw Error(r(527,qie,"19.1.0"));be.findDOMNode=function(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=l(f),d=d!==null?c(d):null,d=d===null?null:d.stateNode,d};var rAe={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zL=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zL.isDisabled&&zL.supportsFiber)try{Al=zL.inject(rAe),oo=zL}catch{}}return II.createRoot=function(d,f){if(!n(d))throw Error(r(299));var g=!1,_="",E=lte,M=cte,V=ute,J=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(J=f.unstable_transitionCallbacks)),f=Die(d,1,!1,null,null,g,_,E,M,V,J,null),d[vt]=f.current,K6(d),new yV(f)},II.hydrateRoot=function(d,f,g){if(!n(d))throw Error(r(299));var _=!1,E="",M=lte,V=cte,J=ute,oe=null,Ee=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(M=g.onUncaughtError),g.onCaughtError!==void 0&&(V=g.onCaughtError),g.onRecoverableError!==void 0&&(J=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(oe=g.unstable_transitionCallbacks),g.formState!==void 0&&(Ee=g.formState)),f=Die(d,1,!0,f,g??null,_,E,M,V,J,oe,Ee),f.context=Nie(null),g=f.current,_=Nl(),_=Ry(_),E=Hy(_),E.callback=null,qy(g,E,_),g=_,f.current.lanes=g,Mu(f,g),sh(f),d[vt]=f.current,K6(d),new NL(f)},II.version="19.1.0",II}var rre;function yAe(){if(rre)return wV.exports;rre=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wV.exports=mAe(),wV.exports}var gAe=yAe(),MI={},nre;function vAe(){if(nre)return MI;nre=1,Object.defineProperty(MI,"__esModule",{value:!0}),MI.parse=o,MI.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,s=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function o(y,v){const w=new s,x=y.length;if(x<2)return w;const S=(v==null?void 0:v.decode)||h;let C=0;do{const k=y.indexOf("=",C);if(k===-1)break;const A=y.indexOf(";",C),R=A===-1?x:A;if(k>R){C=y.lastIndexOf(";",k-1)+1;continue}const D=a(y,C,k),B=l(y,k,D),z=y.slice(D,B);if(w[z]===void 0){let W=a(y,k+1,R),Y=l(y,R,W);const ee=S(y.slice(W,Y));w[z]=ee}C=R+1}while(C<x);return w}function a(y,v,w){do{const x=y.charCodeAt(v);if(x!==32&&x!==9)return v}while(++v<w);return w}function l(y,v,w){for(;v>w;){const x=y.charCodeAt(--v);if(x!==32&&x!==9)return v+1}return w}function c(y,v,w){const x=(w==null?void 0:w.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const S=x(v);if(!e.test(S))throw new TypeError(`argument val is invalid: ${v}`);let C=y+"="+S;if(!w)return C;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);C+="; Max-Age="+w.maxAge}if(w.domain){if(!i.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);C+="; Domain="+w.domain}if(w.path){if(!r.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);C+="; Path="+w.path}if(w.expires){if(!m(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);C+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(C+="; HttpOnly"),w.secure&&(C+="; Secure"),w.partitioned&&(C+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return C}function h(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return n.call(y)==="[object Date]"}return MI}vAe();var sre="popstate";function bAe(t={}){function e(r,n){let{pathname:s,search:o,hash:a}=r.location;return xG("",{pathname:s,search:o,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(r,n){return typeof n=="string"?n:oA(n)}return _Ae(e,i,null,t)}function Fs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wAe(){return Math.random().toString(36).substring(2,10)}function ore(t,e){return{usr:t.state,key:t.key,idx:e}}function xG(t,e,i=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bO(e):e,state:i,key:e&&e.key||r||wAe()}}function oA({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function bO(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function _Ae(t,e,i,r={}){let{window:n=document.defaultView,v5Compat:s=!1}=r,o=n.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function m(){a="POP";let S=h(),C=S==null?null:S-c;c=S,l&&l({action:a,location:x.location,delta:C})}function y(S,C){a="PUSH";let k=xG(x.location,S,C);c=h()+1;let A=ore(k,c),R=x.createHref(k);try{o.pushState(A,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;n.location.assign(R)}s&&l&&l({action:a,location:x.location,delta:1})}function v(S,C){a="REPLACE";let k=xG(x.location,S,C);c=h();let A=ore(k,c),R=x.createHref(k);o.replaceState(A,"",R),s&&l&&l({action:a,location:x.location,delta:0})}function w(S){return xAe(S)}let x={get action(){return a},get location(){return t(n,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(sre,m),l=S,()=>{n.removeEventListener(sre,m),l=null}},createHref(S){return e(n,S)},createURL:w,encodeLocation(S){let C=w(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(S){return o.go(S)}};return x}function xAe(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Fs(i,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:oA(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=i+r),new URL(r,i)}function rme(t,e,i="/"){return SAe(t,e,i,!1)}function SAe(t,e,i,r){let n=typeof e=="string"?bO(e):e,s=dy(n.pathname||"/",i);if(s==null)return null;let o=nme(t);$Ae(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=RAe(s);a=PAe(o[l],c,r)}return a}function nme(t,e=[],i=[],r=""){let n=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Fs(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=ny([r,l.relativePath]),h=i.concat(l);s.children&&s.children.length>0&&(Fs(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),nme(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:AAe(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))n(s,o);else for(let l of sme(s.path))n(s,o,l)}),e}function sme(t){let e=t.split("/");if(e.length===0)return[];let[i,...r]=e,n=i.endsWith("?"),s=i.replace(/\?$/,"");if(r.length===0)return n?[s,""]:[s];let o=sme(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),n&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $Ae(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:OAe(e.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}var TAe=/^:[\w-]+$/,EAe=3,CAe=2,IAe=1,MAe=10,kAe=-2,are=t=>t==="*";function AAe(t,e){let i=t.split("/"),r=i.length;return i.some(are)&&(r+=kAe),e&&(r+=CAe),i.filter(n=>!are(n)).reduce((n,s)=>n+(TAe.test(s)?EAe:s===""?IAe:MAe),r)}function OAe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,n)=>r===e[n])?t[t.length-1]-e[e.length-1]:0}function PAe(t,e,i=!1){let{routesMeta:r}=t,n={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=CN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),y=l.route;if(!m&&c&&i&&!r[r.length-1].route.index&&(m=CN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!m)return null;Object.assign(n,m.params),o.push({params:n,pathname:ny([s,m.pathname]),pathnameBase:FAe(ny([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=ny([s,m.pathnameBase]))}return o}function CN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,r]=LAe(t.path,t.caseSensitive,t.end),n=e.match(i);if(!n)return null;let s=n[0],o=s.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:m},y)=>{if(h==="*"){let w=a[y]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[y];return m&&!v?c[h]=void 0:c[h]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function LAe(t,e=!1,i=!0){Fd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function RAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function dy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,r=t.charAt(i);return r&&r!=="/"?null:t.slice(i)||"/"}function DAe(t,e="/"){let{pathname:i,search:r="",hash:n=""}=typeof t=="string"?bO(t):t;return{pathname:i?i.startsWith("/")?i:NAe(i,e):e,search:UAe(r),hash:jAe(n)}}function NAe(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function $V(t,e,i,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zAe(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function ome(t){let e=zAe(t);return e.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase)}function ame(t,e,i,r=!1){let n;typeof t=="string"?n=bO(t):(n={...t},Fs(!n.pathname||!n.pathname.includes("?"),$V("?","pathname","search",n)),Fs(!n.pathname||!n.pathname.includes("#"),$V("#","pathname","hash",n)),Fs(!n.search||!n.search.includes("#"),$V("#","search","hash",n)));let s=t===""||n.pathname==="",o=s?"/":n.pathname,a;if(o==null)a=i;else{let m=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;n.pathname=y.join("/")}a=m>=0?e[m]:"/"}let l=DAe(n,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var ny=t=>t.join("/").replace(/\/\/+/g,"/"),FAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var lme=["POST","PUT","PATCH","DELETE"];new Set(lme);var BAe=["GET",...lme];new Set(BAe);var QE=Ve.createContext(null);QE.displayName="DataRouter";var _U=Ve.createContext(null);_U.displayName="DataRouterState";var cme=Ve.createContext({isTransitioning:!1});cme.displayName="ViewTransition";var GAe=Ve.createContext(new Map);GAe.displayName="Fetchers";var HAe=Ve.createContext(null);HAe.displayName="Await";var ef=Ve.createContext(null);ef.displayName="Navigation";var xU=Ve.createContext(null);xU.displayName="Location";var xy=Ve.createContext({outlet:null,matches:[],isDataRoute:!1});xy.displayName="Route";var OZ=Ve.createContext(null);OZ.displayName="RouteError";function qAe(t,{relative:e}={}){Fs(wO(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=Ve.useContext(ef),{hash:n,pathname:s,search:o}=_O(t,{relative:e}),a=s;return i!=="/"&&(a=s==="/"?i:ny([i,s])),r.createHref({pathname:a,search:o,hash:n})}function wO(){return Ve.useContext(xU)!=null}function Sb(){return Fs(wO(),"useLocation() may be used only in the context of a <Router> component."),Ve.useContext(xU).location}var ume="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dme(t){Ve.useContext(ef).static||Ve.useLayoutEffect(t)}function hme(){let{isDataRoute:t}=Ve.useContext(xy);return t?sOe():WAe()}function WAe(){Fs(wO(),"useNavigate() may be used only in the context of a <Router> component.");let t=Ve.useContext(QE),{basename:e,navigator:i}=Ve.useContext(ef),{matches:r}=Ve.useContext(xy),{pathname:n}=Sb(),s=JSON.stringify(ome(r)),o=Ve.useRef(!1);return dme(()=>{o.current=!0}),Ve.useCallback((l,c={})=>{if(Fd(o.current,ume),!o.current)return;if(typeof l=="number"){i.go(l);return}let h=ame(l,JSON.parse(s),n,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ny([e,h.pathname])),(c.replace?i.replace:i.push)(h,c.state,c)},[e,i,s,n,t])}Ve.createContext(null);function _O(t,{relative:e}={}){let{matches:i}=Ve.useContext(xy),{pathname:r}=Sb(),n=JSON.stringify(ome(i));return Ve.useMemo(()=>ame(t,JSON.parse(n),r,e==="path"),[t,n,r,e])}function JAe(t,e,i,r){Fs(wO(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=Ve.useContext(ef),{matches:s}=Ve.useContext(xy),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let C=h&&h.path||"";pme(l,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Sb(),y;y=m;let v=y.pathname||"/",w=v;if(c!=="/"){let C=c.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=rme(t,{pathname:w});return Fd(h||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Fd(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),QAe(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:ny([c,n.encodeLocation?n.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:ny([c,n.encodeLocation?n.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,i,r)}function ZAe(){let t=nOe(),e=VAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=Ve.createElement(Ve.Fragment,null,Ve.createElement("p",null," Hey developer "),Ve.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ve.createElement("code",{style:s},"ErrorBoundary")," or"," ",Ve.createElement("code",{style:s},"errorElement")," prop on your route.")),Ve.createElement(Ve.Fragment,null,Ve.createElement("h2",null,"Unexpected Application Error!"),Ve.createElement("h3",{style:{fontStyle:"italic"}},e),i?Ve.createElement("pre",{style:n},i):null,o)}var YAe=Ve.createElement(ZAe,null),XAe=class extends Ve.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Ve.createElement(xy.Provider,{value:this.props.routeContext},Ve.createElement(OZ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KAe({routeContext:t,match:e,children:i}){let r=Ve.useContext(QE);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Ve.createElement(xy.Provider,{value:t},i)}function QAe(t,e=[],i=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let n=t,s=i==null?void 0:i.errors;if(s!=null){let l=n.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Fs(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),n=n.slice(0,Math.min(n.length,l+1))}let o=!1,a=-1;if(i)for(let l=0;l<n.length;l++){let c=n[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:h,errors:m}=i,y=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!m||m[c.route.id]===void 0);if(c.route.lazy||y){o=!0,a>=0?n=n.slice(0,a+1):n=[n[0]];break}}}return n.reduceRight((l,c,h)=>{let m,y=!1,v=null,w=null;i&&(m=s&&c.route.id?s[c.route.id]:void 0,v=c.route.errorElement||YAe,o&&(a<0&&h===0?(pme("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):a===h&&(y=!0,w=c.route.hydrateFallbackElement||null)));let x=e.concat(n.slice(0,h+1)),S=()=>{let C;return m?C=v:y?C=w:c.route.Component?C=Ve.createElement(c.route.Component,null):c.route.element?C=c.route.element:C=l,Ve.createElement(KAe,{match:c,routeContext:{outlet:l,matches:x,isDataRoute:i!=null},children:C})};return i&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?Ve.createElement(XAe,{location:i.location,revalidation:i.revalidation,component:v,error:m,children:S(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):S()},null)}function PZ(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eOe(t){let e=Ve.useContext(QE);return Fs(e,PZ(t)),e}function tOe(t){let e=Ve.useContext(_U);return Fs(e,PZ(t)),e}function iOe(t){let e=Ve.useContext(xy);return Fs(e,PZ(t)),e}function LZ(t){let e=iOe(t),i=e.matches[e.matches.length-1];return Fs(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function rOe(){return LZ("useRouteId")}function nOe(){var r;let t=Ve.useContext(OZ),e=tOe("useRouteError"),i=LZ("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[i]}function sOe(){let{router:t}=eOe("useNavigate"),e=LZ("useNavigate"),i=Ve.useRef(!1);return dme(()=>{i.current=!0}),Ve.useCallback(async(n,s={})=>{Fd(i.current,ume),i.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:e,...s}))},[t,e])}var lre={};function pme(t,e,i){!e&&!lre[t]&&(lre[t]=!0,Fd(!1,i))}Ve.memo(oOe);function oOe({routes:t,future:e,state:i}){return JAe(t,void 0,i,e)}function aOe({basename:t="/",children:e=null,location:i,navigationType:r="POP",navigator:n,static:s=!1}){Fs(!wO(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=Ve.useMemo(()=>({basename:o,navigator:n,static:s,future:{}}),[o,n,s]);typeof i=="string"&&(i=bO(i));let{pathname:l="/",search:c="",hash:h="",state:m=null,key:y="default"}=i,v=Ve.useMemo(()=>{let w=dy(l,o);return w==null?null:{location:{pathname:w,search:c,hash:h,state:m,key:y},navigationType:r}},[o,l,c,h,m,y,r]);return Fd(v!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:Ve.createElement(ef.Provider,{value:a},Ve.createElement(xU.Provider,{children:e,value:v}))}var k3="get",A3="application/x-www-form-urlencoded";function SU(t){return t!=null&&typeof t.tagName=="string"}function lOe(t){return SU(t)&&t.tagName.toLowerCase()==="button"}function cOe(t){return SU(t)&&t.tagName.toLowerCase()==="form"}function uOe(t){return SU(t)&&t.tagName.toLowerCase()==="input"}function dOe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hOe(t,e){return t.button===0&&(!e||e==="_self")&&!dOe(t)}function SG(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let r=t[i];return e.concat(Array.isArray(r)?r.map(n=>[i,n]):[[i,r]])},[]))}function pOe(t,e){let i=SG(t);return e&&e.forEach((r,n)=>{i.has(n)||e.getAll(n).forEach(s=>{i.append(n,s)})}),i}var UL=null;function fOe(){if(UL===null)try{new FormData(document.createElement("form"),0),UL=!1}catch{UL=!0}return UL}var mOe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function TV(t){return t!=null&&!mOe.has(t)?(Fd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${A3}"`),null):t}function yOe(t,e){let i,r,n,s,o;if(cOe(t)){let a=t.getAttribute("action");r=a?dy(a,e):null,i=t.getAttribute("method")||k3,n=TV(t.getAttribute("enctype"))||A3,s=new FormData(t)}else if(lOe(t)||uOe(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?dy(l,e):null,i=t.getAttribute("formmethod")||a.getAttribute("method")||k3,n=TV(t.getAttribute("formenctype"))||TV(a.getAttribute("enctype"))||A3,s=new FormData(a,t),!fOe()){let{name:c,type:h,value:m}=t;if(h==="image"){let y=c?`${c}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else c&&s.append(c,m)}}else{if(SU(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=k3,r=null,n=A3,o=t}return s&&n==="text/plain"&&(o=s,s=void 0),{action:r,method:i.toLowerCase(),encType:n,formData:s,body:o}}function RZ(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function gOe(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vOe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function bOe(t,e,i){let r=await Promise.all(t.map(async n=>{let s=e.routes[n.route.id];if(s){let o=await gOe(s,i);return o.links?o.links():[]}return[]}));return SOe(r.flat(1).filter(vOe).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function cre(t,e,i,r,n,s){let o=(l,c)=>i[c]?l.route.id!==i[c].route.id:!0,a=(l,c)=>{var h;return i[c].pathname!==l.pathname||((h=i[c].route.path)==null?void 0:h.endsWith("*"))&&i[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var m;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let y=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((m=i[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function wOe(t,e,{includeHydrateFallback:i}={}){return _Oe(t.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),i&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function _Oe(t){return[...new Set(t)]}function xOe(t){let e={},i=Object.keys(t).sort();for(let r of i)e[r]=t[r];return e}function SOe(t,e){let i=new Set;return new Set(e),t.reduce((r,n)=>{let s=JSON.stringify(xOe(n));return i.has(s)||(i.add(s),r.push({key:s,link:n})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $Oe=new Set([100,101,204,205]);function TOe(t,e){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":e&&dy(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function fme(){let t=Ve.useContext(QE);return RZ(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function EOe(){let t=Ve.useContext(_U);return RZ(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var DZ=Ve.createContext(void 0);DZ.displayName="FrameworkContext";function mme(){let t=Ve.useContext(DZ);return RZ(t,"You must render this element inside a <HydratedRouter> element"),t}function COe(t,e){let i=Ve.useContext(DZ),[r,n]=Ve.useState(!1),[s,o]=Ve.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:m}=e,y=Ve.useRef(null);Ve.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=C=>{C.forEach(k=>{o(k.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[t]),Ve.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{n(!0)},w=()=>{n(!1),o(!1)};return i?t!=="intent"?[s,y,{}]:[s,y,{onFocus:kI(a,v),onBlur:kI(l,w),onMouseEnter:kI(c,v),onMouseLeave:kI(h,w),onTouchStart:kI(m,v)}]:[!1,y,{}]}function kI(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function IOe({page:t,...e}){let{router:i}=fme(),r=Ve.useMemo(()=>rme(i.routes,t,i.basename),[i.routes,t,i.basename]);return r?Ve.createElement(kOe,{page:t,matches:r,...e}):null}function MOe(t){let{manifest:e,routeModules:i}=mme(),[r,n]=Ve.useState([]);return Ve.useEffect(()=>{let s=!1;return bOe(t,e,i).then(o=>{s||n(o)}),()=>{s=!0}},[t,e,i]),r}function kOe({page:t,matches:e,...i}){let r=Sb(),{manifest:n,routeModules:s}=mme(),{basename:o}=fme(),{loaderData:a,matches:l}=EOe(),c=Ve.useMemo(()=>cre(t,e,l,n,r,"data"),[t,e,l,n,r]),h=Ve.useMemo(()=>cre(t,e,l,n,r,"assets"),[t,e,l,n,r]),m=Ve.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,x=!1;if(e.forEach(C=>{var A;let k=n.routes[C.route.id];!k||!k.hasLoader||(!c.some(R=>R.route.id===C.route.id)&&C.route.id in a&&((A=s[C.route.id])!=null&&A.shouldRevalidate)||k.hasClientLoader?x=!0:w.add(C.route.id))}),w.size===0)return[];let S=TOe(t,o);return x&&w.size>0&&S.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[o,a,r,n,c,e,t,s]),y=Ve.useMemo(()=>wOe(h,n),[h,n]),v=MOe(h);return Ve.createElement(Ve.Fragment,null,m.map(w=>Ve.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),y.map(w=>Ve.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),v.map(({key:w,link:x})=>Ve.createElement("link",{key:w,...x})))}function AOe(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var yme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yme&&(window.__reactRouterVersion="7.6.3")}catch{}function OOe({basename:t,children:e,window:i}){let r=Ve.useRef();r.current==null&&(r.current=bAe({window:i,v5Compat:!0}));let n=r.current,[s,o]=Ve.useState({action:n.action,location:n.location}),a=Ve.useCallback(l=>{Ve.startTransition(()=>o(l))},[o]);return Ve.useLayoutEffect(()=>n.listen(a),[n,a]),Ve.createElement(aOe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:n})}var gme=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vme=Ve.forwardRef(function({onClick:e,discover:i="render",prefetch:r="none",relative:n,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:m,...y},v){let{basename:w}=Ve.useContext(ef),x=typeof c=="string"&&gme.test(c),S,C=!1;if(typeof c=="string"&&x&&(S=c,yme))try{let Y=new URL(window.location.href),ee=c.startsWith("//")?new URL(Y.protocol+c):new URL(c),ge=dy(ee.pathname,w);ee.origin===Y.origin&&ge!=null?c=ge+ee.search+ee.hash:C=!0}catch{Fd(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=qAe(c,{relative:n}),[A,R,D]=COe(r,y),B=DOe(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:n,viewTransition:m});function z(Y){e&&e(Y),Y.defaultPrevented||B(Y)}let W=Ve.createElement("a",{...y,...D,href:S||k,onClick:C||s?e:z,ref:AOe(v,R),target:l,"data-discover":!x&&i==="render"?"true":void 0});return A&&!x?Ve.createElement(Ve.Fragment,null,W,Ve.createElement(IOe,{page:k})):W});vme.displayName="Link";var POe=Ve.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:r="",end:n=!1,style:s,to:o,viewTransition:a,children:l,...c},h){let m=_O(o,{relative:c.relative}),y=Sb(),v=Ve.useContext(_U),{navigator:w,basename:x}=Ve.useContext(ef),S=v!=null&&VOe(m)&&a===!0,C=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,k=y.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(k=k.toLowerCase(),A=A?A.toLowerCase():null,C=C.toLowerCase()),A&&x&&(A=dy(A,x)||A);const R=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let D=k===C||!n&&k.startsWith(C)&&k.charAt(R)==="/",B=A!=null&&(A===C||!n&&A.startsWith(C)&&A.charAt(C.length)==="/"),z={isActive:D,isPending:B,isTransitioning:S},W=D?e:void 0,Y;typeof r=="function"?Y=r(z):Y=[r,D?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ee=typeof s=="function"?s(z):s;return Ve.createElement(vme,{...c,"aria-current":W,className:Y,ref:h,style:ee,to:o,viewTransition:a},typeof l=="function"?l(z):l)});POe.displayName="NavLink";var LOe=Ve.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:r,replace:n,state:s,method:o=k3,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:m,...y},v)=>{let w=UOe(),x=jOe(a,{relative:c}),S=o.toLowerCase()==="get"?"get":"post",C=typeof a=="string"&&gme.test(a),k=A=>{if(l&&l(A),A.defaultPrevented)return;A.preventDefault();let R=A.nativeEvent.submitter,D=(R==null?void 0:R.getAttribute("formmethod"))||o;w(R||A.currentTarget,{fetcherKey:e,method:D,navigate:i,replace:n,state:s,relative:c,preventScrollReset:h,viewTransition:m})};return Ve.createElement("form",{ref:v,method:S,action:x,onSubmit:r?l:k,...y,"data-discover":!C&&t==="render"?"true":void 0})});LOe.displayName="Form";function ROe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bme(t){let e=Ve.useContext(QE);return Fs(e,ROe(t)),e}function DOe(t,{target:e,replace:i,state:r,preventScrollReset:n,relative:s,viewTransition:o}={}){let a=hme(),l=Sb(),c=_O(t,{relative:s});return Ve.useCallback(h=>{if(hOe(h,e)){h.preventDefault();let m=i!==void 0?i:oA(l)===oA(c);a(t,{replace:m,state:r,preventScrollReset:n,relative:s,viewTransition:o})}},[l,a,c,i,r,e,t,n,s,o])}function NOe(t){Fd(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Ve.useRef(SG(t)),i=Ve.useRef(!1),r=Sb(),n=Ve.useMemo(()=>pOe(r.search,i.current?null:e.current),[r.search]),s=hme(),o=Ve.useCallback((a,l)=>{const c=SG(typeof a=="function"?a(n):a);i.current=!0,s("?"+c,l)},[s,n]);return[n,o]}var zOe=0,FOe=()=>`__${String(++zOe)}__`;function UOe(){let{router:t}=bme("useSubmit"),{basename:e}=Ve.useContext(ef),i=rOe();return Ve.useCallback(async(r,n={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=yOe(r,e);if(n.navigate===!1){let h=n.fetcherKey||FOe();await t.fetch(h,i,n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||a,flushSync:n.flushSync})}else await t.navigate(n.action||s,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||a,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,e,i])}function jOe(t,{relative:e}={}){let{basename:i}=Ve.useContext(ef),r=Ve.useContext(xy);Fs(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),s={..._O(t||".",{relative:e})},o=Sb();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(m=>m).forEach(m=>a.append("index",m));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&n.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(s.pathname=s.pathname==="/"?i:ny([i,s.pathname])),oA(s)}function VOe(t,e={}){let i=Ve.useContext(cme);Fs(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bme("useViewTransitionState"),n=_O(t,{relative:e.relative});if(!i.isTransitioning)return!1;let s=dy(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=dy(i.nextLocation.pathname,r)||i.nextLocation.pathname;return CN(n.pathname,o)!=null||CN(n.pathname,s)!=null}[...$Oe];let aA=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};const BOe=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},GOe=(t,e,i)=>{const r=HOe(e).subscribe;return r(n=>{n.some(o=>BOe(t,o.target))&&i()})},EV={},HOe=t=>{const e=t.join(","),i=EV[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),EV[e]=void 0)})};return EV[e]=s,s},qOe=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return null;i=o.host}return null},WOe=(t,e,i)=>{const r=qOe(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},xn=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},$G=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},JOe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),ZOe=new Set(JOe),IN="en",YOe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},XOe=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return CV[n]??(CV[n]=wme(t,r)),await CV[n]},CV={},wme=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===IN?{}:await wme(IN,e)},_me=t=>{var i;const e=WOe(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||IN);return{lang:e,t9nLocale:xme(e)}},xme=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=YOe[n]??n,ZOe.has(n)?n:i?xme(r):IN},KOe=(t,e,i,r)=>{let n;const s=()=>QOe(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),GOe(t,["lang"],s)},QOe=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=_me(t),s=`${e}/${i}/t9n`,a=i===null?{}:await XOe(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}},ePe=t=>t.replace(tPe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),tPe=/[A-Z]+(?![a-z])|[A-Z]/gu,iPe=(t,e)=>{const i=e/rPe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},rPe=4;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const O3=globalThis,NZ=O3.ShadowRoot&&(O3.ShadyCSS===void 0||O3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zZ=Symbol(),ure=new WeakMap;let Sme=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==zZ)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(NZ&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=ure.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&ure.set(i,e))}return e}toString(){return this.cssText}};const nPe=t=>new Sme(typeof t=="string"?t:t+"",void 0,zZ),dt=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new Sme(i,t,zZ)},sPe=(t,e)=>{if(NZ)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),n=O3.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},dre=NZ?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return nPe(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:oPe,defineProperty:aPe,getOwnPropertyDescriptor:lPe,getOwnPropertyNames:cPe,getOwnPropertySymbols:uPe,getPrototypeOf:dPe}=Object,Fv=globalThis,hre=Fv.trustedTypes,hPe=hre?hre.emptyScript:"",IV=Fv.reactiveElementPolyfillSupport,tk=(t,e)=>t,TG={toAttribute(t,e){switch(e){case Boolean:t=t?hPe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},xO=(t,e)=>!oPe(t,e),pre={attribute:!0,type:String,converter:TG,reflect:!1,useDefault:!1,hasChanged:xO};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Fv.litPropertyMetadata??(Fv.litPropertyMetadata=new WeakMap);let aS=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=pre){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&aPe(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=lPe(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:n,set(o){const a=n==null?void 0:n.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??pre}static _$Ei(){if(this.hasOwnProperty(tk("elementProperties")))return;const e=dPe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(tk("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(tk("properties"))){const i=this.properties,r=[...cPe(i),...uPe(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(dre(n))}else e!==void 0&&i.push(dre(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(i=>i(this))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return sPe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:TG).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,i){var s,o;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const a=r.getPropertyOptions(n),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:TG;this._$Em=n,this[n]=l.fromAttribute(i,a.type)??((o=this._$Ej)==null?void 0:o.get(n))??null,this._$Em=null}}requestUpdate(e,i,r){var n;if(e!==void 0){const s=this.constructor,o=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??xO)(o,i)||r.useDefault&&r.reflect&&o===((n=this._$Ej)==null?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n){const{wrapped:a}=o,l=this[s];a!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,o,l)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(i)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};aS.elementStyles=[],aS.shadowRootOptions={mode:"open"},aS[tk("elementProperties")]=new Map,aS[tk("finalized")]=new Map,IV==null||IV({ReactiveElement:aS}),(Fv.reactiveElementVersions??(Fv.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ik=globalThis,MN=ik.trustedTypes,fre=MN?MN.createPolicy("lit-html",{createHTML:t=>t}):void 0,$me="$lit$",hv=`lit$${Math.random().toFixed(9).slice(2)}$`,Tme="?"+hv,pPe=`<${Tme}>`,J_=document,lA=()=>J_.createComment(""),cA=t=>t===null||typeof t!="object"&&typeof t!="function",FZ=Array.isArray,fPe=t=>FZ(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",MV=`[ 	
\f\r]`,AI=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,mre=/-->/g,yre=/>/g,y0=RegExp(`>|${MV}(?:([^\\s"'>=/]+)(${MV}*=${MV}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),gre=/'/g,vre=/"/g,Eme=/^(?:script|style|textarea|title)$/i,Cme=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),q=Cme(1),yE=Cme(2),fc=Symbol.for("lit-noChange"),Ge=Symbol.for("lit-nothing"),bre=new WeakMap,jw=J_.createTreeWalker(J_,129);function Ime(t,e){if(!FZ(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return fre!==void 0?fre.createHTML(e):e}const mPe=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=AI;for(let a=0;a<i;a++){const l=t[a];let c,h,m=-1,y=0;for(;y<l.length&&(o.lastIndex=y,h=o.exec(l),h!==null);)y=o.lastIndex,o===AI?h[1]==="!--"?o=mre:h[1]!==void 0?o=yre:h[2]!==void 0?(Eme.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=y0):h[3]!==void 0&&(o=y0):o===y0?h[0]===">"?(o=n??AI,m=-1):h[1]===void 0?m=-2:(m=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?y0:h[3]==='"'?vre:gre):o===vre||o===gre?o=y0:o===mre||o===yre?o=AI:(o=y0,n=void 0);const v=o===y0&&t[a+1].startsWith("/>")?" ":"";s+=o===AI?l+pPe:m>=0?(r.push(c),l.slice(0,m)+$me+l.slice(m)+hv+v):l+hv+(m===-2?a:v)}return[Ime(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let EG=class Mme{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,h]=mPe(e,i);if(this.el=Mme.createElement(c,r),jw.currentNode=this.el.content,i===2||i===3){const m=this.el.content.firstChild;m.replaceWith(...m.childNodes)}for(;(n=jw.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const m of n.getAttributeNames())if(m.endsWith($me)){const y=h[o++],v=n.getAttribute(m).split(hv),w=/([.?@])?(.*)/.exec(y);l.push({type:1,index:s,name:w[2],strings:v,ctor:w[1]==="."?gPe:w[1]==="?"?vPe:w[1]==="@"?bPe:TU}),n.removeAttribute(m)}else m.startsWith(hv)&&(l.push({type:6,index:s}),n.removeAttribute(m));if(Eme.test(n.tagName)){const m=n.textContent.split(hv),y=m.length-1;if(y>0){n.textContent=MN?MN.emptyScript:"";for(let v=0;v<y;v++)n.append(m[v],lA()),jw.nextNode(),l.push({type:2,index:++s});n.append(m[y],lA())}}}else if(n.nodeType===8)if(n.data===Tme)l.push({type:2,index:s});else{let m=-1;for(;(m=n.data.indexOf(hv,m+1))!==-1;)l.push({type:7,index:s}),m+=hv.length-1}s++}}static createElement(e,i){const r=J_.createElement("template");return r.innerHTML=e,r}};function gE(t,e,i=t,r){var o,a;if(e===fc)return e;let n=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const s=cA(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=gE(t,n._$AS(t,e.values),n,r)),e}let yPe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??J_).importNode(i,!0);jw.currentNode=n;let s=jw.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new $U(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new wPe(s,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=jw.nextNode(),o++)}return jw.currentNode=J_,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},$U=class kme{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=Ge,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=gE(this,e,i),cA(e)?e===Ge||e==null||e===""?(this._$AH!==Ge&&this._$AR(),this._$AH=Ge):e!==this._$AH&&e!==fc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):fPe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ge&&cA(this._$AH)?this._$AA.nextSibling.data=e:this.T(J_.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=EG.createElement(Ime(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const o=new yPe(n,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=bre.get(e.strings);return i===void 0&&bre.set(e.strings,i=new EG(e)),i}k(e){FZ(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new kme(this.O(lA()),this.O(lA()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}},TU=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=Ge,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ge}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=gE(this,e,i,0),o=!cA(e)||e!==this._$AH&&e!==fc,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=gE(this,a[r+l],i,l),c===fc&&(c=this._$AH[l]),o||(o=!cA(c)||c!==this._$AH[l]),c===Ge?e=Ge:e!==Ge&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===Ge?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},gPe=class extends TU{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ge?void 0:e}},vPe=class extends TU{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ge)}},bPe=class extends TU{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=gE(this,e,i,0)??Ge)===fc)return;const r=this._$AH,n=e===Ge&&r!==Ge||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Ge&&(r===Ge||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}},wPe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){gE(this,e)}};const _Pe={I:$U},kV=ik.litHtmlPolyfillSupport;kV==null||kV(EG,$U),(ik.litHtmlVersions??(ik.litHtmlVersions=[])).push("3.3.0");const Ame=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new $U(e.insertBefore(lA(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h_=globalThis;let vc=class extends aS{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Ame(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return fc}};var Nfe;vc._$litElement$=!0,vc.finalized=!0,(Nfe=h_.litElementHydrateSupport)==null||Nfe.call(h_,{LitElement:vc});const AV=h_.litElementPolyfillSupport;AV==null||AV({LitElement:vc});(h_.litElementVersions??(h_.litElementVersions=[])).push("4.2.0");const UZ=Symbol.for("controller"),xPe=t=>typeof t=="object"&&t!==null&&(UZ in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),SPe=t=>typeof(t==null?void 0:t.then)=="function";let kM;const d$=t=>{kM!==t&&(kM=t,queueMicrotask(()=>kM===t?kM=void 0:0))},EU=t=>kM;let D0=[];const Ome=t=>{if(t===void 0){D0=[];return}const e=D0.indexOf(t);D0=e===-1?[...D0,t]:D0.slice(0,e+1),queueMicrotask(()=>D0=[])},Pme=()=>D0;let h$;const $Pe=t=>{h$!==t&&(h$=t,queueMicrotask(()=>h$===t?h$=void 0:0))},TPe=()=>{const t=h$;return h$=void 0,t},EPe=async(t,e)=>{const i=jZ(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},CPe=async t=>{const e=jZ(t);return await e.ready,e},jZ=t=>{const i=EU().manager.X(t);if(i!==void 0)return i;if(xPe(t))return t;const r=TPe();if(r!==void 0)return r};let CG=!1;const IPe=t=>{CG=!0;try{return t()}finally{CG=!1}},MPe=(t,e,i)=>{const r=Object.keys(t),n=r.length;Tv===void 0&&queueMicrotask(VZ),Tv??(Tv=new Map);let s=Tv.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Tv.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>xn(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let Tv;const VZ=()=>{Tv==null||Tv.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Tv=void 0},kPe=(t,e,i)=>{const r=t.manager;return r.V!==Ge&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>xn(e,void 0,i===s?n:void 0)),i},Lme=(t=[EU(),...Pme()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>MPe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){kPe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},APe=(t="",e={},i=EU())=>{const r={emit:n=>{t===""&&VZ();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&Lme(void 0,n=>t=n.key,r),r},Ne=APe.bind(null,"");var Rme;Rme=UZ;var sT,oT,Qw,aT,lT,cT,uT,dT,wv,e_,cl,zh,zm,hT,P3,zfe;let BZ=(zfe=class{constructor(e){Qe(this,hT);Qe(this,sT);Qe(this,oT);Qe(this,Qw);Qe(this,aT);Qe(this,lT);Qe(this,cT);Qe(this,uT);Qe(this,dT);Qe(this,wv);Qe(this,e_);Qe(this,cl);Qe(this,zh);Qe(this,zm);We(this,sT,[]),We(this,oT,[]),We(this,Qw,[]),We(this,aT,[]),We(this,lT,[]),We(this,cT,[]),We(this,uT,[]),We(this,dT,[]),We(this,wv,[]),We(this,e_,!1),this.P=new aA,this.connectedCalled=!1,this.loadedCalled=!1,this[Rme]=!0,We(this,zm,[]);const i=this,r=e??EU();We(i,cl,r),i.ready=i.P.promise,We(i,zh,_re(i)),i.component=r,te(i,cl).addController(i),te(i,cl).manager===void 0||(Ome(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=te(this,cl);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),te(e,e_)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return te(this,zh)}set exports(e){const i=te(this,zh);i!==e&&(We(this,zh,e),te(this,zm).forEach(xn),this.connectedCalled&&this.O!==!1&&te(this,cl).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){We(this,zh,i?_re(e):e),te(this,zm).forEach(xn)}watchExports(e){const i=()=>e(te(this,zh));return te(this,zm).push(i),()=>void te(this,zm).splice(te(this,zm).indexOf(i),1)}get use(){return d$(te(this,cl)),EPe}get useRef(){return d$(te(this,cl)),CPe}get useRefSync(){return d$(te(this,cl)),jZ}controllerRemoved(){te(this,cl).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){te(this,sT).push(e)}onDisconnected(e){te(this,oT).push(e)}onLoad(e){te(this,Qw).push(e)}onLoaded(e){te(this,aT).push(e)}onUpdate(e){te(this,lT).push(e)}onUpdated(e){te(this,cT).push(e)}onDestroy(e){te(this,uT).push(e)}onLifecycle(e){te(this,dT).push(e),this.connectedCalled&&te(this,cl).el.isConnected&&Er(this,hT,P3).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&xn(e.hostConnected,e),te(e,sT).forEach(xn),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&xn(e.hostDisconnected,e),te(e,oT).forEach(xn),te(e,wv).forEach(xn),We(e,wv,[])}async triggerLoad(){if(te(this,e_))return;We(this,e_,!0);const e=this;e.hostLoad&&await $G(e.hostLoad,e),te(this,Qw).length>0&&await Promise.allSettled(te(this,Qw).map($G)),this.P.resolve(te(this,zh))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&xn(this.hostLoaded,this),te(this,aT).forEach(xn),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&xn(this.hostUpdate,this,e),te(this,lT).forEach(wre,e)}triggerUpdated(e){this.hostUpdated&&xn(this.hostUpdated,this,e),te(this,cT).forEach(wre,e)}triggerDestroy(){this.hostDestroy&&xn(this.hostDestroy,this),te(this,uT).forEach(xn)}triggerLifecycle(){this.hostLifecycle&&Er(this,hT,P3).call(this,()=>this.hostLifecycle()),te(this,dT).forEach(Er(this,hT,P3),this)}},sT=new WeakMap,oT=new WeakMap,Qw=new WeakMap,aT=new WeakMap,lT=new WeakMap,cT=new WeakMap,uT=new WeakMap,dT=new WeakMap,wv=new WeakMap,e_=new WeakMap,cl=new WeakMap,zh=new WeakMap,zm=new WeakMap,hT=new WeakSet,P3=function(e){d$(te(this,cl));const i=xn(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?te(this,wv).push(n):typeof n=="object"&&typeof n.remove=="function"&&te(this,wv).push(n.remove)})},zfe);function wre(t){xn(t,void 0,this)}const OPe=BZ,_re=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},PPe=1,LPe=2,RPe=4,DPe=8,NPe=16,zPe=32,FPe=64,Dme=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},xre={};function Nme(){}const L3=Object.defineProperty,UPe=globalThis.HTMLElement??Nme;var ul,Fm,pT,nO,IG,fT;let VTt=(fT=class extends UPe{constructor(){var n,s;super();Qe(this,nO);Qe(this,ul);Qe(this,Fm);Qe(this,pT);We(this,Fm,{}),We(this,pT,[]),this.I=new aA,this.H=new aA,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(te(i,Fm)[o]=i[o],delete i[o])}),r.A?Er(s=i,nO,IG).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,Er(l=i,nO,IG).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])L3(this.prototype,i,{configurable:!0,enumerable:!0,get(){return te(this,Fm)[i]},set(r){te(this,Fm)[i]=r}});for(const i of this.E??[])L3(this.prototype,i,{async value(...r){return te(this,ul)||await this.H.promise,await te(this,ul)[i](...r)},configurable:!0});for(const i of this.D??[])L3(this.prototype,i,{value(...r){return te(this,ul)[i](...r)},configurable:!0})}get manager(){var i;return(i=te(this,ul))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=te(this,ul))==null||s.attributeChangedCallback(i,r,n),te(this,ul)||te(this,pT).push(i)}connectedCallback(){var i,r;te(this,ul)?(r=(i=te(this,ul)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=Dme(this))}disconnectedCallback(){var i,r;(r=(i=te(this,ul))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=te(this,ul))==null||i.requestUpdate()}},ul=new WeakMap,Fm=new WeakMap,pT=new WeakMap,nO=new WeakSet,IG=function(i){var y;const r=this.constructor,n=r.L,s=te(this,Fm),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);VPe(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,We(this,ul,h),We(this,Fm,h),te(this,pT).forEach(v=>h.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(jPe,h);const m=this.isConnected;(m||this.G)&&((y=h.connectedCallback)==null||y.call(h),m||h.disconnectedCallback())},fT.lumina=!0,fT);function jPe([t,e]){this[t]=e}const VPe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},L3(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gh={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},eC=t=>(...e)=>({_$litDirective$:t,values:e});let tC=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zme=eC(class extends tC{constructor(t){var e;if(super(t),t.type!==Gh.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const i=t.element.classList;for(const s of this.st)s in e||(i.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(i.add(s),this.st.add(s)):(i.remove(s),this.st.delete(s)))}return fc}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fme="important",BPe=" !"+Fme,Ume=eC(class extends tC{constructor(t){var e;if(super(t),t.type!==Gh.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(BPe);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?Fme:""):i[r]=n}}return fc}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:GPe}=_Pe,jme=t=>t.strings===void 0,Sre=()=>document.createComment(""),OI=(t,e,i)=>{var s;const r=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(i===void 0){const o=r.insertBefore(Sre(),n),a=r.insertBefore(Sre(),n);i=new GPe(o,a,t,t.options)}else{const o=i._$AB.nextSibling,a=i._$AM,l=a!==t;if(l){let c;(s=i._$AQ)==null||s.call(i,t),i._$AM=t,i._$AP!==void 0&&(c=t._$AU)!==a._$AU&&i._$AP(c)}if(o!==n||l){let c=i._$AA;for(;c!==o;){const h=c.nextSibling;r.insertBefore(c,n),c=h}}}return i},g0=(t,e,i=t)=>(t._$AI(e,i),t),HPe={},GZ=(t,e=HPe)=>t._$AH=e,qPe=t=>t._$AH,OV=t=>{var r;(r=t._$AP)==null||r.call(t,!1,!0);let e=t._$AA;const i=t._$AB.nextSibling;for(;e!==i;){const n=e.nextSibling;e.remove(),e=n}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const kN=eC(class extends tC{constructor(t){if(super(t),t.type!==Gh.PROPERTY&&t.type!==Gh.ATTRIBUTE&&t.type!==Gh.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!jme(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===fc||e===Ge)return e;const i=t.element,r=t.name;if(t.type===Gh.PROPERTY){if(e===i[r])return fc}else if(t.type===Gh.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return fc}else if(t.type===Gh.ATTRIBUTE&&i.getAttribute(r)===e+"")return fc;return GZ(t),e}});var Um,vd,mT,Ffe;let WPe=(Ffe=class extends OPe{constructor(i){super(i);Qe(this,Um);Qe(this,vd);Qe(this,mT);this.destroyed=!1,this.R=!1,this.V=Ge,this.T=[],We(this,mT,new WeakMap),We(this,vd,i),this.exports=void 0,this.hasDestroy=MG in i&&typeof i.destroy=="function",vc.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${MG} prop.`)}te(this,Um)!==void 0&&clearTimeout(te(this,Um)),VZ();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():xn(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():xn(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):xn(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):xn(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),d$(i)}async destroy(){if(!this.destroyed){te(this,vd).el.isConnected&&(this.hasDestroy=!1,te(this,vd).el.remove()),We(this,Um,void 0),this.destroyed=!0;for(const i of te(this,vd).M)"triggerDestroy"in i?i.triggerDestroy():xn(i.hostDestroy,i);te(this,vd).M.splice(0)}}U(){te(this,Um)!==void 0&&clearTimeout(te(this,Um)),!te(this,vd).el.isConnected&&!te(this,vd).autoDestroyDisabled&&We(this,Um,iPe(()=>void te(this,vd).destroy(),JPe))}S(i,r){const n=this.T;this.V=Ge,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&te(this,mT).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return te(this,mT).get(i)}},Um=new WeakMap,vd=new WeakMap,mT=new WeakMap,Ffe),JPe=1e3;const MG="autoDestroyDisabled";var t_,sO,oO,i_,Fh,YE,Vme,Bme,qv;let Yt=(qv=class extends vc{constructor(){super();Qe(this,YE);Qe(this,t_);Qe(this,sO);Qe(this,oO);Qe(this,i_);Qe(this,Fh);this.M=[],this.manager=new WPe(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=qv.prototype.shouldUpdate;We(i,i_,(n==null?void 0:n.H)??new aA),i.I=(n==null?void 0:n.I)??new aA,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,We(i,oO,i.enableUpdating),i.enableUpdating=Nme,i.shouldUpdate!==o&&(We(i,sO,i.shouldUpdate),i.shouldUpdate=o),s&&(We(i,t_,new Map),r.elementProperties.forEach((a,l)=>te(i,t_).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===xre;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??xO,a={attribute:n&PPe&&typeof i=="string"?ePe(i):!1,reflect:!!(n&LPe),type:n&RPe?Boolean:n&DPe?Number:void 0,state:!!(n&NPe),readOnly:!!(n&zPe),noAccessor:!!(n&FPe),c:!1,...s,hasChanged(l,c){const h=o(l,c);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,te(this,t_).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,h;const l=this.manager;if(n.readOnly&&!CG&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((h=(c=te(this,t_))==null?void 0:c.get(i))==null||h.notify()),l.T.length>0&&(l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());We(this,Fh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>Er(this,YE,Bme).call(this).catch(o=>{te(this,i_).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=te(this,Fh))==null||i.destroy(),We(this,Fh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===xre?this.el:this.el.attachShadow(n));if(i)return vc.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=te(this,sO))==null?void 0:r.call(this,i))??!0}update(i){te(this,Fh)?Er(this,YE,Vme).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await te(this,i_).promise,this}addController(i){var r;this.M.push(i),!(UZ in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},t_=new WeakMap,sO=new WeakMap,oO=new WeakMap,i_=new WeakMap,Fh=new WeakMap,YE=new WeakSet,Vme=function(i){try{te(this,Fh).clear(),this.constructor.K.r(te(this,Fh),()=>FL(qv.prototype,this,"update").call(this,i))}catch(r){throw te(this,Fh).clear(),r}},Bme=async function(){var s,o;const i=this.el.G??Dme(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push($G(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(MG)&&this.manager.U()),te(this,oO).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():xn(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),te(this,i_).resolve()},qv.lumina=!0,qv);const ZPe=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},ne=t=>typeof t=="object"&&t!=null?zme(t):t,HZ=t=>typeof t=="object"&&t!=null?Ume(t):t,tn=Ge;function Ap(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const wu={toAttribute:t=>t===!0?"":t===!1?null:t};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const YPe="calcite-mode-auto",XPe="calcite-mode-dark",lu={rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left"},vE={filter:250,nextTick:0,resize:150,reposition:100},KPe=10,QPe=25;function $re(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(XPe)||t.contains(YPe)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const sy=globalThis.calciteConfig,eLe=(sy==null?void 0:sy.focusTrapStack)||[],tLe=(sy==null?void 0:sy.logLevel)||"info",Tre="3.2.1",iLe="2025-05-29",rLe="618973fec";function nLe(){if(sy&&sy.version)return;console.info(`Using Calcite Components ${Tre} [Date: ${iLe}, Revision: ${rLe}]`);const t=sy||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:Tre,writable:!1}),globalThis.calciteConfig=t}function sLe(){document.readyState==="interactive"?$re():document.addEventListener("DOMContentLoaded",()=>$re(),{once:!0}),nLe()}sLe();const oLe=ZPe({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.2.1/",hydratedAttribute:"calcite-hydrated"}),{customElement:Xt,getAssetPath:Gme,setAssetPath:aLe}=oLe;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function lLe(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Ml=()=>lLe([2,1,1,1,3]),cLe=t=>(...e)=>{const i=Pme(),r=new t(...e),n=r.exports;Ome(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),$Pe(r);const o=[r.component,...i].reverse();return Lme(o,a=>a===void 0?void 0:uLe(r,a,n),n)},uLe=(t,{host:e,key:i,isReactive:r},n)=>{var m;const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const y=t.component.manager;a&&y.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const w=s[i];w!==t.exports&&y.W(t,w)}})}t.O=r?void 0:i}const h=(m=t.component.constructor.elementProperties.get(i))==null?void 0:m.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(h?IPe(()=>{s[i]=t.exports}):s[i]=t.exports)})},dLe=t=>Hme(void 0,t),hLe=t=>e=>Hme(e,t);let pLe=class extends BZ{constructor(e,i){super(e);const r=this.exports;try{d$(this.component);const n=i(this.component,this),s=this.exports!==r;if(SPe(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}};const Hme=cLe(pLe),CU=(t,e)=>new fLe(t,e);var yT,gT,aO;class fLe extends BZ{constructor(i,r){super();Qe(this,yT);Qe(this,gT);Qe(this,aO);We(this,gT,i),We(this,aO,r),We(this,yT,new MutationObserver(n=>{n.forEach(s=>{i.includes(s.attributeName)&&r.call(this.component,this.component.el.getAttribute(s.attributeName),s.oldValue,s.attributeName)})}))}hostConnected(){te(this,gT).forEach(i=>{this.component.el.hasAttribute(i)&&te(this,aO).call(this.component,null,this.component.el.getAttribute(i),i)}),te(this,yT).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:te(this,gT)})}hostDisconnected(){te(this,yT).disconnect()}}yT=new WeakMap,gT=new WeakMap,aO=new WeakMap;const mLe=t=>(e={})=>dLe((i,r)=>{const n=_me(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>KOe(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:h})=>{const m={...c,_lang:h,_t9nLocale:l,_loading:!1};r.exports=m;const y=c.componentLabel;typeof y=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=y)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,h=c._original??c,m=qme(h,l);l&&(m._original=h),r.exports=m};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),qme=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=qme(t[r],n):i[r]=n??t[r]}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Mn=mLe(Gme);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const $x={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},yLe=dt`:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,M5=class M5 extends Yt{constructor(){super(...arguments),this.messages=Mn({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){var e;this.type!=="determinate-value"||((e=this.formatter)==null?void 0:e.resolvedOptions().locale)===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:n,type:s,value:o}=this,a=e.id||Ml(),l=s!=="indeterminate",c=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,Ap(this.el,"id",a),this.el.role="progressbar",q`<div class=${ne($x.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&q`<div class=${ne($x.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&n&&q`<div class=${ne($x.text)}>${n}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:n}=this,s=i?this.getInlineSize(r):this.getSize(r),a=s*.45;let l;if(e==="progress"){const c=2*a*Math.PI,h=(this.type.startsWith("determinate")?n:24)/100*c,m=c-h;l={"stroke-dasharray":`${h} ${m}`}}return q`<svg aria-hidden=true class=${ne({[$x.ring]:!0,[$x.trackRing]:e==="track",[$x.progressRing]:e==="progress"})} style=${HZ(l)} viewBox=${`0 0 ${s} ${s}`}>${yE`<circle cx=${s/2} cy=${s/2} r=${a??Ge} />`}</svg>`}};M5.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},M5.styles=yLe;let AN=M5;Xt("calcite-loader",AN);const qTt=Object.freeze(Object.defineProperty({__proto__:null,Loader:AN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var gLe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],kG=gLe.join(","),Wme=typeof Element>"u",uA=Wme?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ON=!Wme&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},PN=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},vLe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},bLe=function(e,i,r){if(PN(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(kG));return i&&uA.call(e,kG)&&n.unshift(e),n=n.filter(r),n},wLe=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!PN(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var h=uA.call(o,kG);h&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var m=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),y=!PN(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(m&&y){var v=t(m===!0?o.children:m.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return n},Jme=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Zme=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||vLe(e))&&!Jme(e)?0:e.tabIndex},_Le=function(e,i){var r=Zme(e);return r<0&&i&&!Jme(e)?0:r},xLe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},Yme=function(e){return e.tagName==="INPUT"},SLe=function(e){return Yme(e)&&e.type==="hidden"},$Le=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},TLe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},ELe=function(e){if(!e.name)return!0;var i=e.form||ON(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=TLe(n,e.form);return!s||s===e},CLe=function(e){return Yme(e)&&e.type==="radio"},ILe=function(e){return CLe(e)&&!ELe(e)},MLe=function(e){var i,r=e&&ON(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,m;r=ON(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(m=h.ownerDocument)!==null&&m!==void 0&&m.contains(n))}}return s},Ere=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},kLe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=uA.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(uA.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=ON(e);if(l&&!l.shadowRoot&&n(l)===!0)return Ere(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(MLe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ere(e);return!1},ALe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return uA.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},OLe=function(e,i){return!(i.disabled||PN(i)||SLe(i)||kLe(i,e)||$Le(i)||ALe(i))},Cre=function(e,i){return!(ILe(i)||Zme(i)<0||!OLe(e,i))},PLe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},LLe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=_Le(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(xLe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},RLe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=wLe([e],i.includeContainer,{filter:Cre.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:PLe}):r=bLe(e,i.includeContainer,Cre.bind(null,i)),LLe(r)};const Xme={getShadowRoot:!0};function WTt(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${Ml()}`:""}function IU(t){return Array.isArray(t)?t:Array.from(t)}function ca(t){const e="dir",i=`[${e}]`,r=iC(t,i);return r?r.getAttribute(e):"ltr"}function jL(t){return t?parseFloat(getComputedStyle(t).inlineSize):0}function MU(t){return t.getRootNode()}function DLe(t){const e=MU(t);return"host"in e?e:null}function NLe(t,e){if(!t)return 0;const r=document.createElement("canvas").getContext("2d");return r.font=e,r.measureText(t).width}function Kme(t){return t.host||null}function SO(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=MU(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||SO(Kme(r),{selector:e,id:i})}function iC(t,e){return t?t.closest(e)||iC(Kme(MU(t)),e):null}function zLe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function ab(t){if(t)return zLe(t)?t.setFocus():t.focus()}function Qme(t){if(t)return RLe(t,Xme)[0]??t}function f1(t){var e;(e=Qme(t))==null||e.focus()}function Ire(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function FLe(t,e){return t.filter(i=>i.matches(e))}function lb(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function $O(t){return(!!t).toString()}function eye(t){return Ut(t)||VLe(t)}function ULe(t){return BLe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function jLe(t){var e;for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE&&((e=i.textContent)==null?void 0:e.trim())!==""||i.nodeType===Node.ELEMENT_NODE)return!0;return!1}function VLe(t){return!!ULe(t)}function BLe(t){return t.currentTarget.assignedNodes({flatten:!0})}function Ut(t){return!!Tp(t).length}function Tp(t,e){return tye(t.target,e)}function tye(t,e){const i=t.assignedElements({flatten:!0});return e?FLe(i,e):i}function AG(t){return!!(t.isPrimary&&t.button===0)}function GLe(t){return t.detail===0}const Jm=(t,e,i,r=!0)=>{const n=t.indexOf(e),s=n===0,o=n===t.length-1;r&&(i=i==="previous"&&s?"last":i==="next"&&o?"first":i);let a;return i==="previous"?a=t[n-1]||t[r?t.length-1:n]:i==="next"?a=t[n+1]||t[r?0:n]:i==="last"?a=t[t.length-1]:a=t[0],ab(a),a};function HLe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function qLe(t,e,i,r){return iye(t,e,"animation",i,r)}async function WLe(t,e,i,r){return iye(t,e,"transition",i,r)}async function JLe(t,e){await OG(),t==null||t(),await OG(),e==null||e()}function Mre(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function iye(t,e,i,r,n){let s=Mre(t,i,e);if(s||(await OG(),s=Mre(t,i,e)),!s)return JLe(r,n);r==null||r();try{await s.finished}catch{}finally{n==null||n()}}function OG(){return new Promise(t=>requestAnimationFrame(()=>t()))}function Tx(t){switch(!0){case t.endsWith("px"):return parseFloat(t);case t.endsWith("vw"):return window.innerWidth/100*parseFloat(t);case t.endsWith("vh"):return window.innerHeight/100*parseFloat(t);default:return 0}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function sn(t,e,i){const r=ZLe(t);return new r(e,i)}function ZLe(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const kre=new Set,Are={trace:0,debug:1,info:2,warn:4,error:8,off:10};function YLe(t){return Are[t]>=Are[tLe]}function lS(t,...e){if(!YLe(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let PV;const dA={debug:t=>lS("debug",t),info:t=>lS("info",t),warn:t=>lS("warn",t),error:t=>lS("error",t),trace:t=>lS("trace",t),deprecated:XLe};function XLe(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(kre.has(s))return;kre.add(s);const o=Array.isArray(r);o&&!PV&&(PV=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${o?PV.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;lS("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const KLe={flipRtl:"flip-rtl"},rye={},LV={},nye={s:16,m:24,l:32};function sye({icon:t,scale:e}){const i=nye[e],r=tRe(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function QLe(t){const e=sye(t),i=oye(e);if(i)return i;LV[e]||(LV[e]=fetch(Gme(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(dA.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await LV[e];return rye[e]=r,r}function eRe(t){return oye(sye(t))}function oye(t){return rye[t]}function tRe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,o)=>s.replace(n,function(l,c){return o===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const iRe=dt`:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,k5=class k5 extends Yt{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=eRe(n)||await QLe(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=sn("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=ca(e),a=nye[n],l=!!s,c=[].concat(r||"");return this.el.ariaHidden=$O(!l),this.el.ariaLabel=l?s:null,this.el.role=l?"img":null,q`<svg aria-hidden=true class=${ne({[KLe.flipRtl]:o==="rtl"&&i,svg:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(h=>typeof h=="string"?yE`<path d=${h??Ge} />`:yE`<path d=${h.d??Ge} opacity=${("opacity"in h?h.opacity:1)??Ge} />`)}</svg>`}};k5.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},k5.styles=iRe;let LN=k5;Xt("calcite-icon",LN);const qZ=Object.freeze(Object.defineProperty({__proto__:null,Icon:LN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const nt=eC(class extends tC{constructor(){super(...arguments),this.key=Ge}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(GZ(t),this.key=e),i}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rk=(t,e)=>{var r;const i=t._$AN;if(i===void 0)return!1;for(const n of i)(r=n._$AO)==null||r.call(n,e,!1),rk(n,e);return!0},RN=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while((i==null?void 0:i.size)===0)},aye=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),sRe(e)}};function rRe(t){this._$AN!==void 0?(RN(this),this._$AM=t,aye(this)):this._$AM=t}function nRe(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)rk(r[s],!1),RN(r[s]);else r!=null&&(rk(r,!1),RN(r));else rk(this,t)}const sRe=t=>{t.type==Gh.CHILD&&(t._$AP??(t._$AP=nRe),t._$AQ??(t._$AQ=rRe))};let oRe=class extends tC{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),aye(this),this.isConnected=e._$AU}_$AO(e,i=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),i&&(rk(this,e),RN(this))}setValue(e){if(jme(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tn=()=>new aRe;let aRe=class{};const RV=new WeakMap,yt=eC(class extends oRe{render(t){return Ge}update(t,[e]){var r;const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Ge}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=RV.get(e);i===void 0&&(i=new WeakMap,RV.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=RV.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function lRe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function lye(t){t.target.disabled&&t.preventDefault()}const cye=["mousedown","mouseup","click"];function uye(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const DN={capture:!0};function Gr(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),cRe(t);return}dRe(t),t.el.removeAttribute("aria-disabled")}function cRe(t){t.el.click=lRe,uRe(t.el)}function uRe(t){t.addEventListener("pointerdown",lye,DN),cye.forEach(e=>t.addEventListener(e,uye,DN))}function dRe(t){delete t.el.click,hRe(t.el)}function hRe(t){t.removeEventListener("pointerdown",lye,DN),cye.forEach(e=>t.removeEventListener(e,uye,DN))}const pRe={container:"interaction-container"},Hr=({children:t,disabled:e})=>q`<div class=${ne(pRe.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function Fi(t){return t==="l"?"m":"s"}function fRe(t,e,i){!t[e]&&!t[i]&&dA.warn(`[${t.el.localName}] "${e.toString()}" or "${i.toString()}" is required.`)}function Ore(t){return t.hidden||t.itemHidden}async function pr(t){await t.componentOnReady(),await t.updateComplete}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Du={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},mRe={tooltip:"tooltip"},yRe=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:margin;transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus{color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)));background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([active]) .button:active{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([data-active]) .button{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,A5=class A5 extends Yt{constructor(){super(...arguments),this.guid=`calcite-action-${Ml()}`,this.buttonEl=Tn(),this.buttonId=`${this.guid}-button`,this.indicatorId=`${this.guid}-indicator`,this.mutationObserver=sn("mutation",()=>this.requestUpdate()),this.messages=Mn({blocking:!0}),this.active=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.textEnabled=!1}async setFocus(){var e;await pr(this),(e=this.buttonEl.value)==null||e.focus()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}updated(){Gr(this)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[Du.textContainer]:!0,[Du.textContainerVisible]:i};return e?nt("text-container",q`<div class=${ne(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:r,buttonId:n}=this;return q`<div aria-labelledby=${n??tn} aria-live=polite class=${ne(Du.indicatorText)} id=${r??tn} role=region>${e?i.indicator:null}</div>`}renderIconContainer(){var v;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:o}=this,a=r==="l"?"l":"m",l=e?q`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,c=i?q`<calcite-icon class=${ne({[Du.indicatorWithIcon]:o})} .flipRtl=${s} .icon=${i} .scale=${Fi(this.scale)}></calcite-icon>`:null,h=l||c,m=h||((v=n.children)==null?void 0:v.length),y=q`<div class=${ne({[Du.slotContainer]:!0,[Du.slotContainerHidden]:e})}><slot></slot></div>`;return m?nt("icon-container",q`<div aria-hidden=true class=${ne(Du.iconContainer)}>${h}${y}</div>`):null}renderButton(){const{active:e,compact:i,disabled:r,icon:n,loading:s,textEnabled:o,label:a,text:l,indicator:c,indicatorId:h,buttonId:m,messages:y}=this,v=a||l||"",w=c?y.indicatorLabel.replace("{label}",v):v,x={[Du.button]:!0,[Du.buttonTextVisible]:o,[Du.buttonCompact]:i},S=q`${this.renderIconContainer()}${this.renderTextContainer()}${!n&&c&&nt("indicator-no-icon",q`<div class=${ne(Du.indicatorWithoutIcon)}></div>`)||""}`;return this.dragHandle?q`<span aria-controls=${(c?h:null)??tn} .ariaBusy=${s} .ariaDisabled=${this.disabled?this.disabled:null} .ariaLabel=${w} .ariaPressed=${e} class=${ne(x)} id=${m??tn} role=button tabindex=${(this.disabled?null:0)??tn} ${yt(this.buttonEl)}>${S}</span>`:q`<button aria-controls=${(c?h:null)??tn} .ariaBusy=${s} .ariaLabel=${w} .ariaPressed=${e} class=${ne(x)} .disabled=${r} id=${m??tn} tabindex=${(r?null:0)??tn} ${yt(this.buttonEl)}>${S}</button>`}render(){return Hr({disabled:this.disabled,children:q`${this.renderButton()}<slot name=${mRe.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};A5.properties={active:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}]},A5.styles=yRe;let NN=A5;Xt("calcite-action",NN);const WZ=Object.freeze(Object.defineProperty({__proto__:null,Action:NN},Symbol.toStringTag,{value:"Module"})),dye=["top","right","bottom","left"],Pre=["start","end"],Lre=dye.reduce((t,e)=>t.concat(e,e+"-"+Pre[0],e+"-"+Pre[1]),[]),bE=Math.min,p_=Math.max,zN=Math.round,VL=Math.floor,Op=t=>({x:t,y:t}),gRe={left:"right",right:"left",bottom:"top",top:"bottom"},vRe={start:"end",end:"start"};function PG(t,e,i){return p_(t,bE(e,i))}function m1(t,e){return typeof t=="function"?t(e):t}function hy(t){return t.split("-")[0]}function Pp(t){return t.split("-")[1]}function hye(t){return t==="x"?"y":"x"}function JZ(t){return t==="y"?"height":"width"}function f_(t){return["top","bottom"].includes(hy(t))?"y":"x"}function ZZ(t){return hye(f_(t))}function pye(t,e,i){i===void 0&&(i=!1);const r=Pp(t),n=ZZ(t),s=JZ(n);let o=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=UN(o)),[o,UN(o)]}function bRe(t){const e=UN(t);return[FN(t),e,FN(e)]}function FN(t){return t.replace(/start|end/g,e=>vRe[e])}function wRe(t,e,i){const r=["left","right"],n=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:r:e?r:n;case"left":case"right":return e?s:o;default:return[]}}function _Re(t,e,i,r){const n=Pp(t);let s=wRe(hy(t),i==="start",r);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(FN)))),s}function UN(t){return t.replace(/left|right|bottom|top/g,e=>gRe[e])}function xRe(t){return{top:0,right:0,bottom:0,left:0,...t}}function fye(t){return typeof t!="number"?xRe(t):{top:t,right:t,bottom:t,left:t}}function jN(t){const{x:e,y:i,width:r,height:n}=t;return{width:r,height:n,top:i,left:e,right:e+r,bottom:i+n,x:e,y:i}}function Rre(t,e,i){let{reference:r,floating:n}=t;const s=f_(e),o=ZZ(e),a=JZ(o),l=hy(e),c=s==="y",h=r.x+r.width/2-n.width/2,m=r.y+r.height/2-n.height/2,y=r[a]/2-n[a]/2;let v;switch(l){case"top":v={x:h,y:r.y-n.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-n.width,y:m};break;default:v={x:r.x,y:r.y}}switch(Pp(e)){case"start":v[o]-=y*(i&&c?-1:1);break;case"end":v[o]+=y*(i&&c?-1:1);break}return v}const SRe=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:h,y:m}=Rre(c,r,l),y=r,v={},w=0;for(let x=0;x<a.length;x++){const{name:S,fn:C}=a[x],{x:k,y:A,data:R,reset:D}=await C({x:h,y:m,initialPlacement:r,placement:y,strategy:n,middlewareData:v,rects:c,platform:o,elements:{reference:t,floating:e}});h=k??h,m=A??m,v={...v,[S]:{...v[S],...R}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(y=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):D.rects),{x:h,y:m}=Rre(c,y,l)),x=-1)}return{x:h,y:m,placement:y,strategy:n,middlewareData:v}};async function hA(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:y=!1,padding:v=0}=m1(e,t),w=fye(v),S=a[y?m==="floating"?"reference":"floating":m],C=jN(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(S)))==null||i?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),k=m==="floating"?{x:r,y:n,width:o.floating.width,height:o.floating.height}:o.reference,A=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(A))?await(s.getScale==null?void 0:s.getScale(A))||{x:1,y:1}:{x:1,y:1},D=jN(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:k,offsetParent:A,strategy:l}):k);return{top:(C.top-D.top+w.top)/R.y,bottom:(D.bottom-C.bottom+w.bottom)/R.y,left:(C.left-D.left+w.left)/R.x,right:(D.right-C.right+w.right)/R.x}}const $Re=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:h=0}=m1(t,e)||{};if(c==null)return{};const m=fye(h),y={x:i,y:r},v=ZZ(n),w=JZ(v),x=await o.getDimensions(c),S=v==="y",C=S?"top":"left",k=S?"bottom":"right",A=S?"clientHeight":"clientWidth",R=s.reference[w]+s.reference[v]-y[v]-s.floating[w],D=y[v]-s.reference[v],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let z=B?B[A]:0;(!z||!await(o.isElement==null?void 0:o.isElement(B)))&&(z=a.floating[A]||s.floating[w]);const W=R/2-D/2,Y=z/2-x[w]/2-1,ee=bE(m[C],Y),ge=bE(m[k],Y),fe=ee,ue=z-x[w]-ge,ae=z/2-x[w]/2+W,Se=PG(fe,ae,ue),le=!l.arrow&&Pp(n)!=null&&ae!==Se&&s.reference[w]/2-(ae<fe?ee:ge)-x[w]/2<0,be=le?ae<fe?ae-fe:ae-ue:0;return{[v]:y[v]+be,data:{[v]:Se,centerOffset:ae-Se-be,...le&&{alignmentOffset:be}},reset:le}}});function TRe(t,e,i){return(t?[...i.filter(n=>Pp(n)===t),...i.filter(n=>Pp(n)!==t)]:i.filter(n=>hy(n)===n)).filter(n=>t?Pp(n)===t||(e?FN(n)!==n:!1):!0)}const ERe=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:h=!1,alignment:m,allowedPlacements:y=Lre,autoAlignment:v=!0,...w}=m1(t,e),x=m!==void 0||y===Lre?TRe(m||null,v,y):y,S=await hA(e,w),C=((i=o.autoPlacement)==null?void 0:i.index)||0,k=x[C];if(k==null)return{};const A=pye(k,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==k)return{reset:{placement:x[0]}};const R=[S[hy(k)],S[A[0]],S[A[1]]],D=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:k,overflows:R}],B=x[C+1];if(B)return{data:{index:C+1,overflows:D},reset:{placement:B}};const z=D.map(ee=>{const ge=Pp(ee.placement);return[ee.placement,ge&&h?ee.overflows.slice(0,2).reduce((fe,ue)=>fe+ue,0):ee.overflows[0],ee.overflows]}).sort((ee,ge)=>ee[1]-ge[1]),Y=((n=z.filter(ee=>ee[2].slice(0,Pp(ee[0])?2:3).every(ge=>ge<=0))[0])==null?void 0:n[0])||z[0][0];return Y!==a?{data:{index:C+1,overflows:D},reset:{placement:Y}}:{}}}},CRe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...S}=m1(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const C=hy(n),k=f_(a),A=hy(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=y||(A||!x?[UN(a)]:bRe(a)),B=w!=="none";!y&&B&&D.push(..._Re(a,x,w,R));const z=[a,...D],W=await hA(e,S),Y=[];let ee=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&Y.push(W[C]),m){const Se=pye(n,o,R);Y.push(W[Se[0]],W[Se[1]])}if(ee=[...ee,{placement:n,overflows:Y}],!Y.every(Se=>Se<=0)){var ge,fe;const Se=(((ge=s.flip)==null?void 0:ge.index)||0)+1,le=z[Se];if(le){var ue;const Oe=m==="alignment"?k!==f_(le):!1,Be=((ue=ee[0])==null?void 0:ue.overflows[0])>0;if(!Oe||Be)return{data:{index:Se,overflows:ee},reset:{placement:le}}}let be=(fe=ee.filter(Oe=>Oe.overflows[0]<=0).sort((Oe,Be)=>Oe.overflows[1]-Be.overflows[1])[0])==null?void 0:fe.placement;if(!be)switch(v){case"bestFit":{var ae;const Oe=(ae=ee.filter(Be=>{if(B){const se=f_(Be.placement);return se===k||se==="y"}return!0}).map(Be=>[Be.placement,Be.overflows.filter(se=>se>0).reduce((se,Pe)=>se+Pe,0)]).sort((Be,se)=>Be[1]-se[1])[0])==null?void 0:ae[0];Oe&&(be=Oe);break}case"initialPlacement":be=a;break}if(n!==be)return{reset:{placement:be}}}return{}}}};function Dre(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Nre(t){return dye.some(e=>t[e]>=0)}const IRe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...n}=m1(t,e);switch(r){case"referenceHidden":{const s=await hA(e,{...n,elementContext:"reference"}),o=Dre(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Nre(o)}}}case"escaped":{const s=await hA(e,{...n,altBoundary:!0}),o=Dre(s,i.floating);return{data:{escapedOffsets:o,escaped:Nre(o)}}}default:return{}}}}};async function MRe(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=hy(i),a=Pp(i),l=f_(i)==="y",c=["left","top"].includes(o)?-1:1,h=s&&l?-1:1,m=m1(e,t);let{mainAxis:y,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof w=="number"&&(v=a==="end"?w*-1:w),l?{x:v*h,y:y*c}:{x:y*c,y:v*h}}const kRe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:o,middlewareData:a}=e,l=await MRe(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:o}}}}},ARe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:C,y:k}=S;return{x:C,y:k}}},...l}=m1(t,e),c={x:i,y:r},h=await hA(e,l),m=f_(hy(n)),y=hye(m);let v=c[y],w=c[m];if(s){const S=y==="y"?"top":"left",C=y==="y"?"bottom":"right",k=v+h[S],A=v-h[C];v=PG(k,v,A)}if(o){const S=m==="y"?"top":"left",C=m==="y"?"bottom":"right",k=w+h[S],A=w-h[C];w=PG(k,w,A)}const x=a.fn({...e,[y]:v,[m]:w});return{...x,data:{x:x.x-i,y:x.y-r,enabled:{[y]:s,[m]:o}}}}}};function kU(){return typeof window<"u"}function rC(t){return mye(t)?(t.nodeName||"").toLowerCase():"#document"}function bc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function tf(t){var e;return(e=(mye(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function mye(t){return kU()?t instanceof Node||t instanceof bc(t).Node:!1}function Ud(t){return kU()?t instanceof Element||t instanceof bc(t).Element:!1}function Fp(t){return kU()?t instanceof HTMLElement||t instanceof bc(t).HTMLElement:!1}function zre(t){return!kU()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bc(t).ShadowRoot}function TO(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=jd(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!["inline","contents"].includes(n)}function ORe(t){return["table","td","th"].includes(rC(t))}function AU(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function OU(t){const e=YZ(),i=Ud(t)?jd(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(i.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(i.contain||"").includes(r))}function PRe(t){let e=cb(t);for(;Fp(e)&&!wE(e);){if(OU(e))return e;if(AU(e))return null;e=cb(e)}return null}function YZ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wE(t){return["html","body","#document"].includes(rC(t))}function jd(t){return bc(t).getComputedStyle(t)}function PU(t){return Ud(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function cb(t){if(rC(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zre(t)&&t.host||tf(t);return zre(e)?e.host:e}function yye(t){const e=cb(t);return wE(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fp(e)&&TO(e)?e:yye(e)}function pA(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=yye(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=bc(n);if(s){const a=LG(o);return e.concat(o,o.visualViewport||[],TO(n)?n:[],a&&i?pA(a):[])}return e.concat(n,pA(n,[],i))}function LG(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gye(t){const e=jd(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Fp(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:r,a=zN(i)!==s||zN(r)!==o;return a&&(i=s,r=o),{width:i,height:r,$:a}}function XZ(t){return Ud(t)?t:t.contextElement}function D$(t){const e=XZ(t);if(!Fp(e))return Op(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=gye(e);let o=(s?zN(i.width):i.width)/r,a=(s?zN(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LRe=Op(0);function vye(t){const e=bc(t);return!YZ()||!e.visualViewport?LRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function RRe(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==bc(t)?!1:e}function Z_(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=XZ(t);let o=Op(1);e&&(r?Ud(r)&&(o=D$(r)):o=D$(t));const a=RRe(s,i,r)?vye(s):Op(0);let l=(n.left+a.x)/o.x,c=(n.top+a.y)/o.y,h=n.width/o.x,m=n.height/o.y;if(s){const y=bc(s),v=r&&Ud(r)?bc(r):r;let w=y,x=LG(w);for(;x&&r&&v!==w;){const S=D$(x),C=x.getBoundingClientRect(),k=jd(x),A=C.left+(x.clientLeft+parseFloat(k.paddingLeft))*S.x,R=C.top+(x.clientTop+parseFloat(k.paddingTop))*S.y;l*=S.x,c*=S.y,h*=S.x,m*=S.y,l+=A,c+=R,w=bc(x),x=LG(w)}}return jN({width:h,height:m,x:l,y:c})}function KZ(t,e){const i=PU(t).scrollLeft;return e?e.left+i:Z_(tf(t)).left+i}function bye(t,e,i){i===void 0&&(i=!1);const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-(i?0:KZ(t,r)),s=r.top+e.scrollTop;return{x:n,y:s}}function DRe(t){let{elements:e,rect:i,offsetParent:r,strategy:n}=t;const s=n==="fixed",o=tf(r),a=e?AU(e.floating):!1;if(r===o||a&&s)return i;let l={scrollLeft:0,scrollTop:0},c=Op(1);const h=Op(0),m=Fp(r);if((m||!m&&!s)&&((rC(r)!=="body"||TO(o))&&(l=PU(r)),Fp(r))){const v=Z_(r);c=D$(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const y=o&&!m&&!s?bye(o,l,!0):Op(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+h.x+y.x,y:i.y*c.y-l.scrollTop*c.y+h.y+y.y}}function NRe(t){return Array.from(t.getClientRects())}function zRe(t){const e=tf(t),i=PU(t),r=t.ownerDocument.body,n=p_(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=p_(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+KZ(t);const a=-i.scrollTop;return jd(r).direction==="rtl"&&(o+=p_(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}function FRe(t,e){const i=bc(t),r=tf(t),n=i.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const c=YZ();(!c||c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a,y:l}}function URe(t,e){const i=Z_(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=Fp(t)?D$(t):Op(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=n*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Fre(t,e,i){let r;if(e==="viewport")r=FRe(t,i);else if(e==="document")r=zRe(tf(t));else if(Ud(e))r=URe(e,i);else{const n=vye(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return jN(r)}function wye(t,e){const i=cb(t);return i===e||!Ud(i)||wE(i)?!1:jd(i).position==="fixed"||wye(i,e)}function jRe(t,e){const i=e.get(t);if(i)return i;let r=pA(t,[],!1).filter(a=>Ud(a)&&rC(a)!=="body"),n=null;const s=jd(t).position==="fixed";let o=s?cb(t):t;for(;Ud(o)&&!wE(o);){const a=jd(o),l=OU(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||TO(o)&&!l&&wye(t,o))?r=r.filter(h=>h!==o):n=a,o=cb(o)}return e.set(t,r),r}function VRe(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const o=[...i==="clippingAncestors"?AU(e)?[]:jRe(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((c,h)=>{const m=Fre(e,h,n);return c.top=p_(m.top,c.top),c.right=bE(m.right,c.right),c.bottom=bE(m.bottom,c.bottom),c.left=p_(m.left,c.left),c},Fre(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function BRe(t){const{width:e,height:i}=gye(t);return{width:e,height:i}}function GRe(t,e,i){const r=Fp(e),n=tf(e),s=i==="fixed",o=Z_(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Op(0);function c(){l.x=KZ(n)}if(r||!r&&!s)if((rC(e)!=="body"||TO(n))&&(a=PU(e)),r){const v=Z_(e,!0,s,e);l.x=v.x+e.clientLeft,l.y=v.y+e.clientTop}else n&&c();s&&!r&&n&&c();const h=n&&!r&&!s?bye(n,a):Op(0),m=o.left+a.scrollLeft-l.x-h.x,y=o.top+a.scrollTop-l.y-h.y;return{x:m,y,width:o.width,height:o.height}}function DV(t){return jd(t).position==="static"}function Ure(t,e){if(!Fp(t)||jd(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return tf(t)===i&&(i=i.ownerDocument.body),i}function _ye(t,e){const i=bc(t);if(AU(t))return i;if(!Fp(t)){let n=cb(t);for(;n&&!wE(n);){if(Ud(n)&&!DV(n))return n;n=cb(n)}return i}let r=Ure(t,e);for(;r&&ORe(r)&&DV(r);)r=Ure(r,e);return r&&wE(r)&&DV(r)&&!OU(r)?i:r||PRe(t)||i}const HRe=async function(t){const e=this.getOffsetParent||_ye,i=this.getDimensions,r=await i(t.floating);return{reference:GRe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qRe(t){return jd(t).direction==="rtl"}const RG={convertOffsetParentRelativeRectToViewportRelativeRect:DRe,getDocumentElement:tf,getClippingRect:VRe,getOffsetParent:_ye,getElementRects:HRe,getClientRects:NRe,getDimensions:BRe,getScale:D$,isElement:Ud,isRTL:qRe};function xye(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function WRe(t,e){let i=null,r;const n=tf(t);function s(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:h,top:m,width:y,height:v}=c;if(a||e(),!y||!v)return;const w=VL(m),x=VL(n.clientWidth-(h+y)),S=VL(n.clientHeight-(m+v)),C=VL(h),A={rootMargin:-w+"px "+-x+"px "+-S+"px "+-C+"px",threshold:p_(0,bE(1,l))||1};let R=!0;function D(B){const z=B[0].intersectionRatio;if(z!==l){if(!R)return o();z?o(!1,z):r=setTimeout(()=>{o(!1,1e-7)},1e3)}z===1&&!xye(c,t.getBoundingClientRect())&&o(),R=!1}try{i=new IntersectionObserver(D,{...A,root:n.ownerDocument})}catch{i=new IntersectionObserver(D,A)}i.observe(t)}return o(!0),s}function JRe(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=XZ(t),h=n||s?[...c?pA(c):[],...pA(e)]:[];h.forEach(C=>{n&&C.addEventListener("scroll",i,{passive:!0}),s&&C.addEventListener("resize",i)});const m=c&&a?WRe(c,i):null;let y=-1,v=null;o&&(v=new ResizeObserver(C=>{let[k]=C;k&&k.target===c&&v&&(v.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var A;(A=v)==null||A.observe(e)})),i()}),c&&!l&&v.observe(c),v.observe(e));let w,x=l?Z_(t):null;l&&S();function S(){const C=Z_(t);x&&!xye(x,C)&&i(),x=C,w=requestAnimationFrame(S)}return i(),()=>{var C;h.forEach(k=>{n&&k.removeEventListener("scroll",i),s&&k.removeEventListener("resize",i)}),m==null||m(),(C=v)==null||C.disconnect(),v=null,l&&cancelAnimationFrame(w)}}const ZRe=kRe,YRe=ERe,XRe=ARe,jre=CRe,KRe=IRe,QRe=$Re,e3e=(t,e,i)=>{const r=new Map,n={platform:RG,...i},s={...n.platform,_c:r};return SRe(t,e,{...n,platform:s})};var Sye=typeof global=="object"&&global&&global.Object===Object&&global,t3e=typeof self=="object"&&self&&self.Object===Object&&self,QZ=Sye||t3e||Function("return this")(),_E=QZ.Symbol,$ye=Object.prototype,i3e=$ye.hasOwnProperty,r3e=$ye.toString,PI=_E?_E.toStringTag:void 0;function n3e(t){var e=i3e.call(t,PI),i=t[PI];try{t[PI]=void 0;var r=!0}catch{}var n=r3e.call(t);return r&&(e?t[PI]=i:delete t[PI]),n}var s3e=Object.prototype,o3e=s3e.toString;function a3e(t){return o3e.call(t)}var l3e="[object Null]",c3e="[object Undefined]",Vre=_E?_E.toStringTag:void 0;function LU(t){return t==null?t===void 0?c3e:l3e:Vre&&Vre in Object(t)?n3e(t):a3e(t)}function RU(t){return t!=null&&typeof t=="object"}var u3e="[object Symbol]";function Tye(t){return typeof t=="symbol"||RU(t)&&LU(t)==u3e}function d3e(t,e){for(var i=-1,r=t==null?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}var Eye=Array.isArray,Bre=_E?_E.prototype:void 0,Gre=Bre?Bre.toString:void 0;function Cye(t){if(typeof t=="string")return t;if(Eye(t))return d3e(t,Cye)+"";if(Tye(t))return Gre?Gre.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var h3e=/\s/;function p3e(t){for(var e=t.length;e--&&h3e.test(t.charAt(e)););return e}var f3e=/^\s+/;function m3e(t){return t&&t.slice(0,p3e(t)+1).replace(f3e,"")}function fA(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hre=NaN,y3e=/^[-+]0x[0-9a-f]+$/i,g3e=/^0b[01]+$/i,v3e=/^0o[0-7]+$/i,b3e=parseInt;function qre(t){if(typeof t=="number")return t;if(Tye(t))return Hre;if(fA(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=fA(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=m3e(t);var i=g3e.test(t);return i||v3e.test(t)?b3e(t.slice(2),i?2:8):y3e.test(t)?Hre:+t}function w3e(t){return t}var _3e="[object AsyncFunction]",x3e="[object Function]",S3e="[object GeneratorFunction]",$3e="[object Proxy]";function T3e(t){if(!fA(t))return!1;var e=LU(t);return e==x3e||e==S3e||e==_3e||e==$3e}var E3e=9007199254740991,C3e=/^(?:0|[1-9]\d*)$/;function I3e(t,e){var i=typeof t;return e=e??E3e,!!e&&(i=="number"||i!="symbol"&&C3e.test(t))&&t>-1&&t%1==0&&t<e}var M3e=9007199254740991;function Iye(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=M3e}function k3e(t){return t!=null&&Iye(t.length)&&!T3e(t)}var A3e=Object.prototype;function O3e(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||A3e;return t===i}function P3e(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}var L3e="[object Arguments]";function Wre(t){return RU(t)&&LU(t)==L3e}var Mye=Object.prototype,R3e=Mye.hasOwnProperty,D3e=Mye.propertyIsEnumerable,N3e=Wre(function(){return arguments}())?Wre:function(t){return RU(t)&&R3e.call(t,"callee")&&!D3e.call(t,"callee")};function z3e(){return!1}var kye=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jre=kye&&typeof module=="object"&&module&&!module.nodeType&&module,F3e=Jre&&Jre.exports===kye,Zre=F3e?QZ.Buffer:void 0,U3e=Zre?Zre.isBuffer:void 0,j3e=U3e||z3e,V3e="[object Arguments]",B3e="[object Array]",G3e="[object Boolean]",H3e="[object Date]",q3e="[object Error]",W3e="[object Function]",J3e="[object Map]",Z3e="[object Number]",Y3e="[object Object]",X3e="[object RegExp]",K3e="[object Set]",Q3e="[object String]",eDe="[object WeakMap]",tDe="[object ArrayBuffer]",iDe="[object DataView]",rDe="[object Float32Array]",nDe="[object Float64Array]",sDe="[object Int8Array]",oDe="[object Int16Array]",aDe="[object Int32Array]",lDe="[object Uint8Array]",cDe="[object Uint8ClampedArray]",uDe="[object Uint16Array]",dDe="[object Uint32Array]",Xr={};Xr[rDe]=Xr[nDe]=Xr[sDe]=Xr[oDe]=Xr[aDe]=Xr[lDe]=Xr[cDe]=Xr[uDe]=Xr[dDe]=!0;Xr[V3e]=Xr[B3e]=Xr[tDe]=Xr[G3e]=Xr[iDe]=Xr[H3e]=Xr[q3e]=Xr[W3e]=Xr[J3e]=Xr[Z3e]=Xr[Y3e]=Xr[X3e]=Xr[K3e]=Xr[Q3e]=Xr[eDe]=!1;function hDe(t){return RU(t)&&Iye(t.length)&&!!Xr[LU(t)]}function pDe(t){return function(e){return t(e)}}var Aye=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nk=Aye&&typeof module=="object"&&module&&!module.nodeType&&module,fDe=nk&&nk.exports===Aye,NV=fDe&&Sye.process,Yre=function(){try{var t=nk&&nk.require&&nk.require("util").types;return t||NV&&NV.binding&&NV.binding("util")}catch{}}(),Xre=Yre&&Yre.isTypedArray,mDe=Xre?pDe(Xre):hDe;function yDe(t,e){var i=Eye(t),r=!i&&N3e(t),n=!i&&!r&&j3e(t),s=!i&&!r&&!n&&mDe(t),o=i||r||n||s,a=o?P3e(t.length,String):[],l=a.length;for(var c in t)o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||I3e(c,l))||a.push(c);return a}function gDe(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var vDe=Object.prototype,bDe=vDe.hasOwnProperty;function wDe(t){if(!fA(t))return gDe(t);var e=O3e(t),i=[];for(var r in t)r=="constructor"&&(e||!bDe.call(t,r))||i.push(r);return i}function _De(t){return k3e(t)?yDe(t):wDe(t)}function xDe(t){return t==null?"":Cye(t)}function SDe(t){return function(e,i,r){for(var n=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++n];if(i(s[l],l,s)===!1)break}return e}}var $De=SDe(),zV=function(){return QZ.Date.now()},TDe="Expected a function",EDe=Math.max,CDe=Math.min;function nC(t,e,i){var r,n,s,o,a,l,c=0,h=!1,m=!1,y=!0;if(typeof t!="function")throw new TypeError(TDe);e=qre(e)||0,fA(i)&&(h=!!i.leading,m="maxWait"in i,s=m?EDe(qre(i.maxWait)||0,e):s,y="trailing"in i?!!i.trailing:y);function v(B){var z=r,W=n;return r=n=void 0,c=B,o=t.apply(W,z),o}function w(B){return c=B,a=setTimeout(C,e),h?v(B):o}function x(B){var z=B-l,W=B-c,Y=e-z;return m?CDe(Y,s-W):Y}function S(B){var z=B-l,W=B-c;return l===void 0||z>=e||z<0||m&&W>=s}function C(){var B=zV();if(S(B))return k(B);a=setTimeout(C,x(B))}function k(B){return a=void 0,y&&r?v(B):(r=n=void 0,o)}function A(){a!==void 0&&clearTimeout(a),c=0,r=l=n=a=void 0}function R(){return a===void 0?o:k(zV())}function D(){var B=zV(),z=S(B);if(r=arguments,n=this,l=B,z){if(a===void 0)return w(l);if(m)return clearTimeout(a),a=setTimeout(C,e),v(l)}return a===void 0&&(a=setTimeout(C,e)),o}return D.cancel=A,D.flush=R,D}function IDe(t){return typeof t=="function"?t:w3e}var Oye=/[\\^$.*+?()[\]{}|]/g,MDe=RegExp(Oye.source);function eY(t){return t=xDe(t),t&&MDe.test(t)?t.replace(Oye,"\\$&"):t}function kDe(t,e){return t==null?t:$De(t,IDe(e),_De)}function ADe(t){return ODe(t)}function FV(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function ODe(t){for(let e=t;e;e=FV(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=FV(t);e;e=FV(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||OU(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */(function(){{const e=RG.getOffsetParent;RG.getOffsetParent=i=>e(i,ADe)}})();function Kre(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const Pye=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:h})=>{var R;if(!e||!i)return;const m=ca(i)==="rtl",{x:y,y:v,placement:w,strategy:x,middlewareData:S}=await e3e(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:ene(n,m),middleware:LDe({placement:n,flipDisabled:s,flipPlacements:o==null?void 0:o.map(D=>ene(D,m)),offsetDistance:a,offsetSkidding:l,arrowEl:c,type:h})});if(c&&S.arrow){const{x:D,y:B}=S.arrow,z=w.split("-")[0],W=D!=null?"left":"top",Y=DDe[z],ee={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=z==="left"||z==="right"?"horizontal":"vertical"),Object.assign(c.style,{...ee,[W]:`${W=="left"?D:B}px`,[z]:"100%",transform:Y})}const k=((R=S.hide)==null?void 0:R.referenceHidden)?"hidden":null,A=k?"none":null;i.setAttribute(PDe,w),Object.assign(i.style,{pointerEvents:A,position:x,transform:`translate(${Kre(y)}px,${Kre(v)}px)`,visibility:k})},PDe="data-placement",Qre=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],xE="bottom-start",Lye="bottom-end",Up={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function LDe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:o}){const a=[XRe(),KRe()];return o==="menu"&&a.push(jre({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),a.push(ZRe({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})),t==="auto"||t==="auto-start"||t==="auto-end"?a.push(YRe({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||a.push(jre(i?{fallbackPlacements:i}:{})),s&&a.push(QRe({element:s})),a}function tY(t,e){const i=t.filter(r=>Qre.includes(r));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${Qre.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function ene(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function EO(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!mA.get(t))return Rye(t);await(i?RDe(t):Pye)(t,e)}function RDe(t){let e=VN.get(t);return e||(e=nC(Pye,vE.reposition,{leading:!0,maxWait:vE.reposition}),VN.set(t,e),e)}const DDe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},mA=new WeakMap,VN=new WeakMap;async function Rye(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=JRe;mA.set(t,{state:"pending"});let n;const s=r(e,i,()=>{const o=t.reposition();n||(n=o)});return mA.set(t,{state:"active",cleanUp:s}),n}function CO(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function wl(t){const{floatingEl:e,referenceEl:i}=t;if(CO(t),!(!e||!i)&&(sC(t),!!t.open))return Rye(t)}function sC(t){var i;const e=mA.get(t);(e==null?void 0:e.state)==="active"&&e.cleanUp(),mA.delete(t),(i=VN.get(t))==null||i.cancel(),VN.delete(t)}const tne=4,BN=Math.ceil(Math.hypot(tne,tne));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function ine(t){return t[t.openProp||"open"]}function y1(t){requestAnimationFrame(()=>{t.transitionEl&&WLe(t.transitionEl,t.transitionProp,()=>{ine(t)?t.onBeforeOpen():t.onBeforeClose()},()=>{ine(t)?t.onOpen():t.onClose()})})}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iY=Symbol.for(""),NDe=t=>{if((t==null?void 0:t.r)===iY)return t==null?void 0:t._$litStatic$},Dye=t=>({_$litStatic$:t,r:iY}),Y_=(t,...e)=>({_$litStatic$:e.reduce((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1],t[0]),r:iY}),rne=new Map,zDe=t=>(e,...i)=>{const r=i.length;let n,s;const o=[],a=[];let l,c=0,h=!1;for(;c<r;){for(l=e[c];c<r&&(s=i[c],(n=NDe(s))!==void 0);)l+=n+e[++c],h=!0;c!==r&&a.push(s),o.push(l),c++}if(c===r&&o.push(e[r]),h){const m=o.join("$$lit$$");(e=rne.get(m))===void 0&&(o.raw=o,rne.set(m,e=o)),i=a}return t(e,...i)},IO=zDe(q);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const DU=({children:t,...e})=>{const i=e.level?Dye(`h${e.level}`):Y_`div`;return nt(e.key,IO`<${i} class=${ne(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const nne={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},FDe={width:12,height:6,strokeWidth:1},Nye=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=FDe,o=r/2,a=t==="vertical",l=`M0,0 H${r} L${r-o},${n} Q${o},${n} ${o},${n} Z`;return nt(e,q`<svg aria-hidden=true class=${ne(nne.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(a?0:s)}`} width=${r+(a?s:0)} ${yt(i)}>${yE`${yE`<path class=${ne(nne.arrowStroke)} d=${l??Ge} fill=none stroke-width=${s+1} />`||""}<path d=${l??Ge} stroke=none />`}</svg>`)};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var zye=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],GN=zye.join(","),Fye=typeof Element>"u",X_=Fye?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,HN=!Fye&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},qN=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},UDe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},Uye=function(e,i,r){if(qN(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(GN));return i&&X_.call(e,GN)&&n.unshift(e),n=n.filter(r),n},jye=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!qN(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?n.push.apply(n,c):n.push({scopeParent:o,candidates:c})}else{var h=X_.call(o,GN);h&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var m=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),y=!qN(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(m&&y){var v=t(m===!0?o.children:m.children,!0,r);r.flatten?n.push.apply(n,v):n.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return n},Vye=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Mw=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||UDe(e))&&!Vye(e)?0:e.tabIndex},jDe=function(e,i){var r=Mw(e);return r<0&&i&&!Vye(e)?0:r},VDe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},Bye=function(e){return e.tagName==="INPUT"},BDe=function(e){return Bye(e)&&e.type==="hidden"},GDe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},HDe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},qDe=function(e){if(!e.name)return!0;var i=e.form||HN(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=HDe(n,e.form);return!s||s===e},WDe=function(e){return Bye(e)&&e.type==="radio"},JDe=function(e){return WDe(e)&&!qDe(e)},ZDe=function(e){var i,r=e&&HN(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var c,h,m;r=HN(n),n=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=n)!==null&&h!==void 0&&(m=h.ownerDocument)!==null&&m!==void 0&&m.contains(n))}}return s},sne=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},YDe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=X_.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(X_.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,c=HN(e);if(l&&!l.shadowRoot&&n(l)===!0)return sne(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(ZDe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return sne(e);return!1},XDe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return X_.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},WN=function(e,i){return!(i.disabled||qN(i)||BDe(i)||YDe(i,e)||GDe(i)||XDe(i))},DG=function(e,i){return!(JDe(i)||Mw(i)<0||!WN(e,i))},KDe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},QDe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=jDe(a,o),c=o?t(n.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:c})}),r.sort(VDe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},eNe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=jye([e],i.includeContainer,{filter:DG.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:KDe}):r=Uye(e,i.includeContainer,DG.bind(null,i)),QDe(r)},tNe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=jye([e],i.includeContainer,{filter:WN.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=Uye(e,i.includeContainer,WN.bind(null,i)),r},Ex=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return X_.call(e,GN)===!1?!1:DG(i,e)},iNe=zye.concat("iframe").join(","),UV=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return X_.call(e,iNe)===!1?!1:WN(i,e)};/*!
* focus-trap 7.6.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function NG(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function rNe(t){if(Array.isArray(t))return NG(t)}function nNe(t,e,i){return(e=cNe(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function sNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function one(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function ane(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?one(Object(i),!0).forEach(function(r){nNe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):one(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function aNe(t){return rNe(t)||sNe(t)||uNe(t)||oNe()}function lNe(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cNe(t){var e=lNe(t,"string");return typeof e=="symbol"?e:e+""}function uNe(t,e){if(t){if(typeof t=="string")return NG(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?NG(t,e):void 0}}var lne={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r._setPausedState(!0)}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},dNe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},hNe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},sk=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},pNe=function(e){return sk(e)&&!e.shiftKey},fNe=function(e){return sk(e)&&e.shiftKey},cne=function(e){return setTimeout(e,0)},LI=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},BL=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},mNe=[],yNe=function(e,i){var r=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||mNe,s=ane({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:pNe,isKeyBackward:fNe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(ue,ae,Se){return ue&&ue[ae]!==void 0?ue[ae]:s[Se||ae]},c=function(ue,ae){var Se=typeof(ae==null?void 0:ae.composedPath)=="function"?ae.composedPath():void 0;return o.containerGroups.findIndex(function(le){var be=le.container,Oe=le.tabbableNodes;return be.contains(ue)||(Se==null?void 0:Se.includes(be))||Oe.find(function(Be){return Be===ue})})},h=function(ue){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=ae.hasFallback,le=Se===void 0?!1:Se,be=ae.params,Oe=be===void 0?[]:be,Be=s[ue];if(typeof Be=="function"&&(Be=Be.apply(void 0,aNe(Oe))),Be===!0&&(Be=void 0),!Be){if(Be===void 0||Be===!1)return Be;throw new Error("`".concat(ue,"` was specified but was not a node, or did not return a node"))}var se=Be;if(typeof Be=="string"){try{se=r.querySelector(Be)}catch(Pe){throw new Error("`".concat(ue,'` appears to be an invalid selector; error="').concat(Pe.message,'"'))}if(!se&&!le)throw new Error("`".concat(ue,"` as selector refers to no known node"))}return se},m=function(){var ue=h("initialFocus",{hasFallback:!0});if(ue===!1)return!1;if(ue===void 0||ue&&!UV(ue,s.tabbableOptions))if(c(r.activeElement)>=0)ue=r.activeElement;else{var ae=o.tabbableGroups[0],Se=ae&&ae.firstTabbableNode;ue=Se||h("fallbackFocus")}else ue===null&&(ue=h("fallbackFocus"));if(!ue)throw new Error("Your focus-trap needs to have at least one focusable element");return ue},y=function(){if(o.containerGroups=o.containers.map(function(ue){var ae=eNe(ue,s.tabbableOptions),Se=tNe(ue,s.tabbableOptions),le=ae.length>0?ae[0]:void 0,be=ae.length>0?ae[ae.length-1]:void 0,Oe=Se.find(function(Pe){return Ex(Pe)}),Be=Se.slice().reverse().find(function(Pe){return Ex(Pe)}),se=!!ae.find(function(Pe){return Mw(Pe)>0});return{container:ue,tabbableNodes:ae,focusableNodes:Se,posTabIndexesFound:se,firstTabbableNode:le,lastTabbableNode:be,firstDomTabbableNode:Oe,lastDomTabbableNode:Be,nextTabbableNode:function(rt){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_t=ae.indexOf(rt);return _t<0?it?Se.slice(Se.indexOf(rt)+1).find(function(ri){return Ex(ri)}):Se.slice(0,Se.indexOf(rt)).reverse().find(function(ri){return Ex(ri)}):ae[_t+(it?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(ue){return ue.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(ue){return ue.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(ue){var ae=ue.activeElement;if(ae)return ae.shadowRoot&&ae.shadowRoot.activeElement!==null?v(ae.shadowRoot):ae},w=function(ue){if(ue!==!1&&ue!==v(document)){if(!ue||!ue.focus){w(m());return}ue.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=ue,dNe(ue)&&ue.select()}},x=function(ue){var ae=h("setReturnFocus",{params:[ue]});return ae||(ae===!1?!1:ue)},S=function(ue){var ae=ue.target,Se=ue.event,le=ue.isBackward,be=le===void 0?!1:le;ae=ae||BL(Se),y();var Oe=null;if(o.tabbableGroups.length>0){var Be=c(ae,Se),se=Be>=0?o.containerGroups[Be]:void 0;if(Be<0)be?Oe=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Oe=o.tabbableGroups[0].firstTabbableNode;else if(be){var Pe=o.tabbableGroups.findIndex(function(kr){var $i=kr.firstTabbableNode;return ae===$i});if(Pe<0&&(se.container===ae||UV(ae,s.tabbableOptions)&&!Ex(ae,s.tabbableOptions)&&!se.nextTabbableNode(ae,!1))&&(Pe=Be),Pe>=0){var rt=Pe===0?o.tabbableGroups.length-1:Pe-1,it=o.tabbableGroups[rt];Oe=Mw(ae)>=0?it.lastTabbableNode:it.lastDomTabbableNode}else sk(Se)||(Oe=se.nextTabbableNode(ae,!1))}else{var _t=o.tabbableGroups.findIndex(function(kr){var $i=kr.lastTabbableNode;return ae===$i});if(_t<0&&(se.container===ae||UV(ae,s.tabbableOptions)&&!Ex(ae,s.tabbableOptions)&&!se.nextTabbableNode(ae))&&(_t=Be),_t>=0){var ri=_t===o.tabbableGroups.length-1?0:_t+1,zt=o.tabbableGroups[ri];Oe=Mw(ae)>=0?zt.firstTabbableNode:zt.firstDomTabbableNode}else sk(Se)||(Oe=se.nextTabbableNode(ae))}}else Oe=h("fallbackFocus");return Oe},C=function(ue){var ae=BL(ue);if(!(c(ae,ue)>=0)){if(LI(s.clickOutsideDeactivates,ue)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}LI(s.allowOutsideClick,ue)||ue.preventDefault()}},k=function(ue){var ae=BL(ue),Se=c(ae,ue)>=0;if(Se||ae instanceof Document)Se&&(o.mostRecentlyFocusedNode=ae);else{ue.stopImmediatePropagation();var le,be=!0;if(o.mostRecentlyFocusedNode)if(Mw(o.mostRecentlyFocusedNode)>0){var Oe=c(o.mostRecentlyFocusedNode),Be=o.containerGroups[Oe].tabbableNodes;if(Be.length>0){var se=Be.findIndex(function(Pe){return Pe===o.mostRecentlyFocusedNode});se>=0&&(s.isKeyForward(o.recentNavEvent)?se+1<Be.length&&(le=Be[se+1],be=!1):se-1>=0&&(le=Be[se-1],be=!1))}}else o.containerGroups.some(function(Pe){return Pe.tabbableNodes.some(function(rt){return Mw(rt)>0})})||(be=!1);else be=!1;be&&(le=S({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),w(le||o.mostRecentlyFocusedNode||m())}o.recentNavEvent=void 0},A=function(ue){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=ue;var Se=S({event:ue,isBackward:ae});Se&&(sk(ue)&&ue.preventDefault(),w(Se))},R=function(ue){(s.isKeyForward(ue)||s.isKeyBackward(ue))&&A(ue,s.isKeyBackward(ue))},D=function(ue){hNe(ue)&&LI(s.escapeDeactivates,ue)!==!1&&(ue.preventDefault(),a.deactivate())},B=function(ue){var ae=BL(ue);c(ae,ue)>=0||LI(s.clickOutsideDeactivates,ue)||LI(s.allowOutsideClick,ue)||(ue.preventDefault(),ue.stopImmediatePropagation())},z=function(){if(o.active)return lne.activateTrap(n,a),o.delayInitialFocusTimer=s.delayInitialFocus?cne(function(){w(m())}):w(m()),r.addEventListener("focusin",k,!0),r.addEventListener("mousedown",C,{capture:!0,passive:!1}),r.addEventListener("touchstart",C,{capture:!0,passive:!1}),r.addEventListener("click",B,{capture:!0,passive:!1}),r.addEventListener("keydown",R,{capture:!0,passive:!1}),r.addEventListener("keydown",D),a},W=function(){if(o.active)return r.removeEventListener("focusin",k,!0),r.removeEventListener("mousedown",C,!0),r.removeEventListener("touchstart",C,!0),r.removeEventListener("click",B,!0),r.removeEventListener("keydown",R,!0),r.removeEventListener("keydown",D),a},Y=function(ue){var ae=ue.some(function(Se){var le=Array.from(Se.removedNodes);return le.some(function(be){return be===o.mostRecentlyFocusedNode})});ae&&w(m())},ee=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Y):void 0,ge=function(){ee&&(ee.disconnect(),o.active&&!o.paused&&o.containers.map(function(ue){ee.observe(ue,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(ue){if(o.active)return this;var ae=l(ue,"onActivate"),Se=l(ue,"onPostActivate"),le=l(ue,"checkCanFocusTrap");le||y(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,ae==null||ae();var be=function(){le&&y(),z(),ge(),Se==null||Se()};return le?(le(o.containers.concat()).then(be,be),this):(be(),this)},deactivate:function(ue){if(!o.active)return this;var ae=ane({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},ue);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,W(),o.active=!1,o.paused=!1,ge(),lne.deactivateTrap(n,a);var Se=l(ae,"onDeactivate"),le=l(ae,"onPostDeactivate"),be=l(ae,"checkCanReturnFocus"),Oe=l(ae,"returnFocus","returnFocusOnDeactivate");Se==null||Se();var Be=function(){cne(function(){Oe&&w(x(o.nodeFocusedBeforeActivation)),le==null||le()})};return Oe&&be?(be(x(o.nodeFocusedBeforeActivation)).then(Be,Be),this):(Be(),this)},pause:function(ue){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,ue)):this},unpause:function(ue){return o.active?(o.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,ue)):this},updateContainerElements:function(ue){var ae=[].concat(ue).filter(Boolean);return o.containers=ae.map(function(Se){return typeof Se=="string"?r.querySelector(Se):Se}),o.active&&y(),ge(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(ue,ae){if(o.paused===ue)return this;if(o.paused=ue,ue){var Se=l(ae,"onPause"),le=l(ae,"onPostPause");Se==null||Se(),W(),ge(),le==null||le()}else{var be=l(ae,"onUnpause"),Oe=l(ae,"onPostUnpause");be==null||be(),y(),z(),ge(),Oe==null||Oe()}return this}}}),a.updateContainerElements(e),a};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const GL=new WeakSet;function gNe(t,e){const i=(e==null?void 0:e.fallbackFocus)||t,r=(e==null?void 0:e.clickOutsideDeactivates)??!0;return{fallbackFocus:i,setReturnFocus:n=>(GL.has(t)||ab(n),!1),...e,document:t.ownerDocument,tabbableOptions:Xme,trapStack:eLe,clickOutsideDeactivates:n=>(GL.has(t)||GL.add(t),typeof r=="function"?r(n):r),onPostDeactivate:()=>{GL.delete(t)}}}function une(t,{focusTrapOptions:e},i){return!(e!=null&&e.extraContainers)&&!i?t:[t,...dne(e==null?void 0:e.extraContainers),...dne(i)]}function dne(t=[]){return Array.isArray(t)?t:[t]}const vNe=t=>hLe((e,i)=>{let r,n,s;const o=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&a.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?a.deactivate():a.activate())}),i.onDisconnected(()=>a.deactivate());const a={activate:()=>{const l=n||e.el;if(l.isConnected){if(!r){const c={...o,...e.focusTrapOptions};s||(s=une(l,e)),r=yNe(s,gNe(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r==null?void 0:r.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");n=l},setExtraContainers:l=>{const c=n||e.el;s=une(c,e,l)},updateContainerElements:()=>r==null?void 0:r.updateContainerElements(s)};return a});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function oC(t){return t==="Enter"||t===" "}const MO=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */class bNe{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():oC(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{GLe(e)||e.defaultPrevented||this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const Nu={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},hne="auto",pne="aria-controls",fne="aria-expanded",wNe=dt`:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}.position-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset,left,opacity;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,mne=new bNe,O5=class O5 extends Yt{constructor(){super(...arguments),this.closeButtonEl=Tn(),this.focusTrap=vNe({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${Ml()}`,this.hasLoaded=!1,this.mutationObserver=sn("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=Mn(),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=BN,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=hne,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=Ne({cancelable:!1}),this.calcitePopoverBeforeOpen=Ne({cancelable:!1}),this.calcitePopoverClose=Ne({cancelable:!1}),this.calcitePopoverOpen=Ne({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,floatingEl:h}=this;return EO(this,{floatingEl:h,referenceEl:i,overlayPositioning:n,placement:r,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(){await pr(this),this.requestUpdate(),f1(this.el)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==BN)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==hne))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),this.removeReferences(),sC(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){y1(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?tY(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),wl(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(fne,$O(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(pne,i),mne.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(pne),e.removeAttribute(fne)),mne.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?SO(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),CO(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?nt(Nu.closeButtonContainer,q`<div class=${ne(Nu.closeButtonContainer)}><calcite-action appearance=transparent class=${ne(Nu.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close} ${yt(this.closeButtonEl)}><calcite-icon icon=x .scale=${Fi(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?DU({class:Nu.heading,level:i,children:e}):null;return r?nt(Nu.header,q`<div class=${ne(Nu.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:o}=this,a=e&&n,l=!a,c=s?null:nt("floating-arrow",Nye({floatingLayout:o,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",Ap(this.el,"id",this.getId()),this.el.role="dialog",q`<div class=${ne(Nu.positionContainer)} ${yt(this.setFloatingEl)}><div class=${ne({[Nu.container]:!0,[Up.animation]:!0,[Up.animationActive]:a})} ${yt(this.setTransitionEl)}>${c}<div class=${ne({[Nu.hasHeader]:!!i,[Nu.headerContainer]:!0})}>${this.renderHeader()}<div class=${ne(Nu.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};O5.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},O5.styles=wNe;let JN=O5;Xt("calcite-popover",JN);const _Ne=Object.freeze(Object.defineProperty({__proto__:null,Popover:JN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function yne(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const gne={menu:"menu",defaultTrigger:"default-trigger"},SE={tooltip:"tooltip",trigger:"trigger"},xNe={menu:"ellipsis"},SNe="data-active";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const $Ne=dt`:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,TNe=["ArrowUp","ArrowDown","End","Home"],P5=class P5 extends Yt{constructor(){super(...arguments),this.guid=`calcite-action-menu-${Ml()}`,this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=`${this.guid}-menu-button`,this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(oC(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const o=r[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=`${this.guid}-menu`,this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=`${r}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.toggleAttribute(SNe,i===n)},this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuOpen=Ne({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(){return await pr(this),ab(this.menuButtonEl)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",$O(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("click",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,e&&this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)}updateActions(e){e==null||e.forEach(this.updateAction)}handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n!=null&&n.matches("calcite-action")?(r.push(n),r):n!=null&&n.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,TNe))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=yne(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=yne(n+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return q`<slot name=${SE.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} class=${ne(gne.defaultTrigger)} .icon=${xNe.menu} .scale=${r} .text=${i} .textEnabled=${n} ${yt(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:n,label:s,placement:o,overlayPositioning:a,flipPlacements:l}=this,c=e[i],h=(c==null?void 0:c.id)||null;return q`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${s} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${a} .placement=${o} pointer-disabled .referenceElement=${n} trigger-disabled ${yt(this.setPopoverEl)}><div aria-activedescendant=${h??Ge} aria-labelledby=${(n==null?void 0:n.id)??Ge} class=${ne(gne.menu)} id=${r??Ge} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return q`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${SE.tooltip} @slotchange=${this.updateTooltip}></slot>`}};P5.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},P5.styles=$Ne;let ZN=P5;Xt("calcite-action-menu",ZN);const ENe=Object.freeze(Object.defineProperty({__proto__:null,ActionMenu:ZN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const yA={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},CNe={menu:"ellipsis"},INe={container:"container"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const MNe=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns: 1}:host([columns="2"]){--calcite-internal-action-group-columns: 2}:host([columns="3"]){--calcite-internal-action-group-columns: 3}:host([columns="4"]){--calcite-internal-action-group-columns: 4}:host([columns="5"]){--calcite-internal-action-group-columns: 5}:host([columns="6"]){--calcite-internal-action-group-columns: 6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)),auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-inline-end:var(--calcite-size-px)}:host([hidden]){display:none}[hidden]{display:none}`,Xk=class Xk extends Yt{constructor(){super(...arguments),this.messages=Mn(),this.hasMenuActions=!1,this.expanded=!1,this.layout="vertical",this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m"}async setFocus(){await pr(this),f1(this.el)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&(this.menuOpen=!1)}setMenuOpen(e){this.menuOpen=!!e.currentTarget.open}handleMenuActionsSlotChange(e){this.hasMenuActions=Ut(e)}renderMenu(){const{expanded:e,menuOpen:i,scale:r,layout:n,messages:s,overlayPositioning:o,hasMenuActions:a,menuFlipPlacements:l,menuPlacement:c}=this;return q`<calcite-action-menu .expanded=${e} .flipPlacements=${l??(n==="horizontal"?["top","bottom"]:["left","right"])} .hidden=${!a} .label=${s.more} @calciteActionMenuOpen=${this.setMenuOpen} .open=${i} .overlayPositioning=${o} .placement=${c??(n==="horizontal"?"bottom-start":"leading-start")} .scale=${r}><calcite-action .icon=${CNe.menu} .scale=${r} slot=${SE.trigger} .text=${s.more} .textEnabled=${e}></calcite-action><slot name=${yA.menuActions} @slotchange=${this.handleMenuActionsSlotChange}></slot><slot name=${yA.menuTooltip} slot=${SE.tooltip}></slot></calcite-action-menu>`}render(){return q`<div .ariaLabel=${this.label} class=${ne(INe.container)} role=group><slot></slot>${this.renderMenu()}</div>`}};Xk.properties={hasMenuActions:[16,{},{state:!0}],columns:[11,{},{type:Number,reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],label:1,layout:[3,{},{reflect:!0}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},Xk.shadowRootOptions={mode:"open",delegatesFocus:!0},Xk.styles=MNe;let YN=Xk;Xt("calcite-action-group",YN);const kNe=Object.freeze(Object.defineProperty({__proto__:null,ActionGroup:YN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const rY=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===SE.trigger:!0),ANe=({actionGroups:t,expanded:e,overflowCount:i})=>{let r=i;t.reverse().forEach(n=>{let s=0;const o=rY(n).reverse();o.forEach(a=>{a.slot===yA.menuActions&&(a.removeAttribute("slot"),a.textEnabled=e)}),r>0&&o.some(a=>(o.filter(c=>!c.slot).length>1&&o.length>2&&!a.closest("calcite-action-menu")&&(a.textEnabled=!0,a.setAttribute("slot",yA.menuActions),s++,s>1&&r--),r<1)),n.manager.component.requestUpdate()})},vne={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function ONe(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function PNe({el:t,expanded:e}){rY(t).filter(i=>i.slot!==yA.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const LNe=({tooltip:t,referenceElement:e,expanded:i,ref:r})=>(t&&(t.referenceElement=!i&&e?e:null),r&&r(e),e),RNe=({expanded:t,expandText:e,collapseText:i,expandLabel:r,collapseLabel:n,toggle:s,el:o,position:a,tooltip:l,ref:c,scale:h})=>{const m=ca(o)==="rtl",y=t?i:e,v=t?n:r,w=[vne.chevronsLeft,vne.chevronsRight];m&&w.reverse();const x=ONe(a,o)==="end",S=x?w[1]:w[0],C=x?w[0]:w[1];return q`<calcite-action .icon=${t?S:C} id=expand-toggle .label=${v} @click=${s} .scale=${h} .text=${y} .textEnabled=${t} title=${(!t&&!l?y:null)??Ge} ${yt(A=>LNe({tooltip:l,referenceElement:A,expanded:t,ref:c}))}></calcite-action>`};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const DNe=({bufferSize:t=0,containerSize:e,itemSizes:i})=>{const r=e-t;let n=i.length,s=0;for(const[o,a]of i.entries())if(s=s+a,s>r){n=o;break}else continue;return n},NNe=({bufferSize:t=0,containerSize:e,itemSizes:i})=>Math.max(i.length-DNe({bufferSize:t,itemSizes:i,containerSize:e}),0),bne={container:"container",actionGroupEnd:"action-group--end"},jV={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},zNe=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`,L5=class L5 extends Yt{constructor(){super(),this.mutationObserver=sn("mutation",()=>this.mutationObserverHandler()),this.resize=nC(({width:e,height:i})=>{const{expanded:r,expandDisabled:n,layout:s,overflowActionsDisabled:o,actionGroups:a}=this;if(o||s==="vertical"&&!i||s==="horizontal"&&!e)return;const l=this.getItemSizes();this.updateGroups();const c=this.hasActionsEnd||this.hasBottomActions||!n?a.length+1:a.length,h=NNe({bufferSize:c,containerSize:s==="horizontal"?e:i,itemSizes:l});ANe({actionGroups:a,expanded:r,overflowCount:h})},vE.resize),this.resizeHandler=e=>{const{width:i,height:r}=e.contentRect;this.resize({width:i,height:r})},this.resizeObserver=sn("resize",e=>this.resizeHandlerEntries(e)),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.messages=Mn(),this.hasActionsEnd=!1,this.hasBottomActions=!1,this.floating=!1,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.overlayPositioning="absolute",this.scale="m",this.calciteActionBarToggle=Ne({cancelable:!1}),this.listen("calciteActionMenuOpen",this.actionMenuOpenHandler)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(){await pr(this),f1(this.el)}connectedCallback(){var e;super.connectedCallback(),this.updateGroups(),this.overflowActions(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.overflowActionsDisabledHandler(this.overflowActionsDisabled)}willUpdate(e){e.has("expandDisabled")&&(this.hasUpdated||this.expandDisabled!==!1)&&this.overflowActions(),e.has("expanded")&&this.hasUpdated&&this.expandedHandler(),e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.updateGroups(),e.has("overflowActionsDisabled")&&(this.hasUpdated||this.overflowActionsDisabled!==!1)&&this.overflowActionsDisabledHandler(this.overflowActionsDisabled)}loaded(){this.overflowActions()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect()}getItemSizes(){const{el:e,layout:i,expandToggleEl:r}=this,n=rY(e);r&&n.push(r);const s=i==="horizontal"?"clientWidth":"clientHeight",o=Math.max(...n.map(a=>a[s]||0));return n.map(a=>a[s]||o)}expandedHandler(){const{el:e,expanded:i}=this;PNe({el:e,expanded:i}),this.overflowActions()}overflowActionsDisabledHandler(e){var i,r;if(e){(i=this.resizeObserver)==null||i.disconnect();return}(r=this.resizeObserver)==null||r.observe(this.el),this.overflowActions()}actionMenuOpenHandler(e){var i;if(e.target.menuOpen){const r=e.composedPath();(i=this.actionGroups)==null||i.forEach(n=>{r.includes(n)||(n.menuOpen=!1)})}}mutationObserverHandler(){this.updateGroups(),this.overflowActions()}resizeHandlerEntries(e){e.forEach(this.resizeHandler)}updateGroups(){const e=Array.from(this.el.querySelectorAll("calcite-action-group"));this.actionGroups=e,e.forEach(i=>{i.layout=this.layout,i.scale=this.scale})}handleDefaultSlotChange(){this.updateGroups()}handleActionsEndSlotChange(e){this.hasActionsEnd=Ut(e)}handleBottomActionsSlotChange(e){this.hasBottomActions=Ut(e)}handleTooltipSlotChange(e){const i=Tp(e).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.expandTooltip=i[0]}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:r,position:n,toggleExpand:s,scale:o,layout:a,messages:l,actionsEndGroupLabel:c,overlayPositioning:h}=this,m=i?null:RNe({collapseLabel:l.collapseLabel,collapseText:l.collapse,el:r,expandLabel:l.expandLabel,expandText:l.expand,expanded:e,position:n,ref:y=>this.expandToggleEl=y,scale:o,toggle:s,tooltip:this.expandTooltip});return q`<calcite-action-group class=${ne(bne.actionGroupEnd)} .hidden=${this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions)} .label=${c} .layout=${a} .overlayPositioning=${h} .scale=${o}><slot name=${jV.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${jV.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${jV.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${m}</calcite-action-group>`}render(){return q`<div class=${ne(bne.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`}};L5.properties={expandTooltip:[16,{},{state:!0}],hasActionsEnd:[16,{},{state:!0}],hasBottomActions:[16,{},{state:!0}],actionsEndGroupLabel:1,floating:[7,{},{reflect:!0,type:Boolean}],expandDisabled:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overflowActionsDisabled:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},L5.styles=zNe;let XN=L5;Xt("calcite-action-bar",XN);const YTt=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:XN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const FNe=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto;justify-content:space-between}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none;display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-start]::slotted(calcite-shell-panel),slot[name=panel-end]::slotted(calcite-shell-panel){position:relative;z-index:calc(var(--calcite-z-index) + 1)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:var(--calcite-border-width-sm);border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-none);border-inline-end-width:var(--calcite-border-width-none);border-style:solid}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-color:var(--calcite-shell-border-color, var(--calcite-color-border-3));border-inline-start-width:var(--calcite-border-width-sm);border-inline-end-width:var(--calcite-border-width-sm)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}.content-bottom{justify-content:flex-end}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0,5px,0)}to{opacity:1;transform:translateZ(0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:.25rem;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);inset-block-end:.5rem;inset-inline:var(--calcite-shell-tip-spacing, 26vw)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}slot[name=modals]::slotted(calcite-modal){position:absolute}:host([hidden]){display:none}[hidden]{display:none}`,oh={main:"main",content:"content",contentBehind:"content--behind",contentBottom:"content-bottom",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",contentBehindCenterContent:"center-content"},zu={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals",dialogs:"dialogs"},R5=class R5 extends Yt{constructor(){super(),this.hasAlerts=!1,this.hasDialogs=!1,this.hasFooter=!1,this.hasHeader=!1,this.hasModals=!1,this.hasOnlyPanelBottom=!1,this.hasPanelBottom=!1,this.hasPanelTop=!1,this.hasSheets=!1,this.panelIsResizing=!1,this.contentBehind=!1,this.listen("calciteInternalShellPanelResizeStart",this.handleCalciteInternalShellPanelResizeStart),this.listen("calciteInternalShellPanelResizeEnd",this.handleCalciteInternalShellPanelResizeEnd)}willUpdate(e){(e.has("hasPanelTop")&&(this.hasUpdated||this.hasPanelTop!==!1)||e.has("hasPanelBottom")&&(this.hasUpdated||this.hasPanelBottom!==!1))&&(this.hasOnlyPanelBottom=!this.hasPanelTop&&this.hasPanelBottom)}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}handleHeaderSlotChange(e){this.hasHeader=!!Ut(e)}handleFooterSlotChange(e){this.hasFooter=!!Ut(e)}handleAlertsSlotChange(e){var i;this.hasAlerts=!!Ut(e),(i=Tp(e))==null||i.map(r=>{r.tagName==="CALCITE-ALERT"&&(r.embedded=!0)})}handleSheetsSlotChange(e){var i;this.hasSheets=!!Ut(e),(i=Tp(e))==null||i.map(r=>{r.tagName==="CALCITE-SHEET"&&(r.embedded=!0)})}handleModalsSlotChange(e){var i;this.hasModals=!!Ut(e),(i=Tp(e))==null||i.map(r=>{r.tagName==="CALCITE-MODAL"&&(r.embedded=!0)})}handlePanelTopChange(e){this.hasPanelTop=Ut(e)}handlePanelBottomChange(e){this.hasPanelBottom=Ut(e)}handleDialogsSlotChange(e){var i;this.hasDialogs=!!Ut(e),(i=Tp(e))==null||i.map(r=>{r.tagName==="CALCITE-DIALOG"&&(r.embedded=!0)})}renderHeader(){return q`<div .hidden=${!this.hasHeader}>${nt("header",q`<slot name=${zu.header} @slotchange=${this.handleHeaderSlotChange}></slot>`)}</div>`}renderFooter(){return nt("footer",q`<div class=${ne(oh.footer)} .hidden=${!this.hasFooter}><slot name=${zu.footer} @slotchange=${this.handleFooterSlotChange}></slot></div>`)}renderAlerts(){return q`<div .hidden=${!this.hasAlerts}>${nt("alerts",q`<slot name=${zu.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</div>`}renderSheets(){return q`<div .hidden=${!this.hasSheets}>${nt("sheets",q`<slot name=${zu.sheets} @slotchange=${this.handleSheetsSlotChange}></slot>`)}</div>`}renderModals(){return q`<div .hidden=${!this.hasModals}>${nt("modals",q`<slot name=${zu.modals} @slotchange=${this.handleModalsSlotChange}></slot>`)}</div>`}renderDialogs(){return q`<div .hidden=${!this.hasDialogs}>${nt("dialogs",q`<slot name=${zu.dialogs} @slotchange=${this.handleDialogsSlotChange}></slot>`)}</div>`}renderContent(){const{panelIsResizing:e}=this,i=nt("default-slot",q`<slot></slot>`),r=e?q`<div class=${ne(oh.contentNonInteractive)}>${i}</div>`:i,n=nt("center-row-slot",q`<slot name=${zu.centerRow}></slot>`),s=nt("panel-bottom-slot",q`<slot name=${zu.panelBottom} @slotchange=${this.handlePanelBottomChange}></slot>`),o=nt("panel-top-slot",q`<slot name=${zu.panelTop} @slotchange=${this.handlePanelTopChange}></slot>`),a="content-container";return this.contentBehind?[nt(a,q`<div class=${ne({[oh.content]:!0,[oh.contentBehind]:!0})}>${r}</div>`),q`<div class=${ne({[oh.contentBehindCenterContent]:!0,[oh.contentBottom]:this.hasOnlyPanelBottom})}>${o}${s}${n}</div>`]:[nt(a,q`<div class=${ne({[oh.content]:!0,[oh.contentBottom]:this.hasOnlyPanelBottom})}>${o}${r}${s}${n}</div>`)]}renderMain(){return q`<div class=${ne(oh.main)}><slot name=${zu.panelStart}></slot>${this.renderContent()}<slot name=${zu.panelEnd}></slot></div>`}renderPositionedSlots(){return q`<div class=${ne(oh.positionedSlotWrapper)}>${this.renderAlerts()}${this.renderModals()}${this.renderDialogs()}${this.renderSheets()}</div>`}render(){return q`${this.renderHeader()}${this.renderMain()}${this.renderFooter()}${this.renderPositionedSlots()}`}};R5.properties={hasAlerts:[16,{},{state:!0}],hasDialogs:[16,{},{state:!0}],hasFooter:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],hasModals:[16,{},{state:!0}],hasOnlyPanelBottom:[16,{},{state:!0}],hasPanelBottom:[16,{},{state:!0}],hasPanelTop:[16,{},{state:!0}],hasSheets:[16,{},{state:!0}],panelIsResizing:[16,{},{state:!0}],contentBehind:[7,{},{reflect:!0,type:Boolean}]},R5.styles=FNe;let zG=R5;Xt("calcite-shell",zG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function UNe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AM={exports:{}},jNe=AM.exports,wne;function VNe(){return wne||(wne=1,function(t,e){(function(i,r){t.exports=r()})(jNe,function(){function i(T,$){var I=Object.keys(T);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(T);$&&(O=O.filter(function(N){return Object.getOwnPropertyDescriptor(T,N).enumerable})),I.push.apply(I,O)}return I}function r(T){for(var $=1;$<arguments.length;$++){var I=arguments[$]!=null?arguments[$]:{};$%2?i(Object(I),!0).forEach(function(O){l(T,O,I[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(I)):i(Object(I)).forEach(function(O){Object.defineProperty(T,O,Object.getOwnPropertyDescriptor(I,O))})}return T}function n(T){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},n(T)}function s(T,$){if(!(T instanceof $))throw new TypeError("Cannot call a class as a function")}function o(T,$){for(var I=0;I<$.length;I++){var O=$[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(T,x(O.key),O)}}function a(T,$,I){return $&&o(T.prototype,$),Object.defineProperty(T,"prototype",{writable:!1}),T}function l(T,$,I){return($=x($))in T?Object.defineProperty(T,$,{value:I,enumerable:!0,configurable:!0,writable:!0}):T[$]=I,T}function c(T,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create($&&$.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),$&&m(T,$)}function h(T){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},h(T)}function m(T,$){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,O){return I.__proto__=O,I},m(T,$)}function y(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function v(T){var $=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var I,O=h(T);if($){var N=h(this).constructor;I=Reflect.construct(O,arguments,N)}else I=O.apply(this,arguments);return function(j,H){if(H&&(typeof H=="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(j)}(this,I)}}function w(){return w=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(T,$,I){var O=function(j,H){for(;!Object.prototype.hasOwnProperty.call(j,H)&&(j=h(j))!==null;);return j}(T,$);if(O){var N=Object.getOwnPropertyDescriptor(O,$);return N.get?N.get.call(arguments.length<3?T:I):N.value}},w.apply(this,arguments)}function x(T){var $=function(I,O){if(typeof I!="object"||I===null)return I;var N=I[Symbol.toPrimitive];if(N!==void 0){var j=N.call(I,O);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)}(T,"string");return typeof $=="symbol"?$:$+""}var S=function(T){return!(!T||!T.Window)&&T instanceof T.Window},C=void 0,k=void 0;function A(T){C=T;var $=T.document.createTextNode("");$.ownerDocument!==T.document&&typeof T.wrap=="function"&&T.wrap($)===$&&(T=T.wrap(T)),k=T}function R(T){return S(T)?T:(T.ownerDocument||T).defaultView||k.window}typeof window<"u"&&window&&A(window);var D=function(T){return!!T&&n(T)==="object"},B=function(T){return typeof T=="function"},z={window:function(T){return T===k||S(T)},docFrag:function(T){return D(T)&&T.nodeType===11},object:D,func:B,number:function(T){return typeof T=="number"},bool:function(T){return typeof T=="boolean"},string:function(T){return typeof T=="string"},element:function(T){if(!T||n(T)!=="object")return!1;var $=R(T)||k;return/object|function/.test(typeof Element>"u"?"undefined":n(Element))?T instanceof Element||T instanceof $.Element:T.nodeType===1&&typeof T.nodeName=="string"},plainObject:function(T){return D(T)&&!!T.constructor&&/function Object\b/.test(T.constructor.toString())},array:function(T){return D(T)&&T.length!==void 0&&B(T.splice)}};function W(T){var $=T.interaction;if($.prepared.name==="drag"){var I=$.prepared.axis;I==="x"?($.coords.cur.page.y=$.coords.start.page.y,$.coords.cur.client.y=$.coords.start.client.y,$.coords.velocity.client.y=0,$.coords.velocity.page.y=0):I==="y"&&($.coords.cur.page.x=$.coords.start.page.x,$.coords.cur.client.x=$.coords.start.client.x,$.coords.velocity.client.x=0,$.coords.velocity.page.x=0)}}function Y(T){var $=T.iEvent,I=T.interaction;if(I.prepared.name==="drag"){var O=I.prepared.axis;if(O==="x"||O==="y"){var N=O==="x"?"y":"x";$.page[N]=I.coords.start.page[N],$.client[N]=I.coords.start.client[N],$.delta[N]=0}}}var ee={id:"actions/drag",install:function(T){var $=T.actions,I=T.Interactable,O=T.defaults;I.prototype.draggable=ee.draggable,$.map.drag=ee,$.methodDict.drag="draggable",O.actions.drag=ee.defaults},listeners:{"interactions:before-action-move":W,"interactions:action-resume":W,"interactions:action-move":Y,"auto-start:check":function(T){var $=T.interaction,I=T.interactable,O=T.buttons,N=I.options.drag;if(N&&N.enabled&&(!$.pointerIsDown||!/mouse|pointer/.test($.pointerType)||(O&I.options.drag.mouseButtons)!=0))return T.action={name:"drag",axis:N.lockAxis==="start"?N.startAxis:N.lockAxis},!1}},draggable:function(T){return z.object(T)?(this.options.drag.enabled=T.enabled!==!1,this.setPerAction("drag",T),this.setOnEvents("drag",T),/^(xy|x|y|start)$/.test(T.lockAxis)&&(this.options.drag.lockAxis=T.lockAxis),/^(xy|x|y)$/.test(T.startAxis)&&(this.options.drag.startAxis=T.startAxis),this):z.bool(T)?(this.options.drag.enabled=T,this):this.options.drag},beforeMove:W,move:Y,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(T){return T.search("drag")===0}},ge=ee,fe={init:function(T){var $=T;fe.document=$.document,fe.DocumentFragment=$.DocumentFragment||ue,fe.SVGElement=$.SVGElement||ue,fe.SVGSVGElement=$.SVGSVGElement||ue,fe.SVGElementInstance=$.SVGElementInstance||ue,fe.Element=$.Element||ue,fe.HTMLElement=$.HTMLElement||fe.Element,fe.Event=$.Event,fe.Touch=$.Touch||ue,fe.PointerEvent=$.PointerEvent||$.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ue(){}var ae=fe,Se={init:function(T){var $=ae.Element,I=T.navigator||{};Se.supportsTouch="ontouchstart"in T||z.func(T.DocumentTouch)&&ae.document instanceof T.DocumentTouch,Se.supportsPointerEvent=I.pointerEnabled!==!1&&!!ae.PointerEvent,Se.isIOS=/iP(hone|od|ad)/.test(I.platform),Se.isIOS7=/iP(hone|od|ad)/.test(I.platform)&&/OS 7[^\d]/.test(I.appVersion),Se.isIe9=/MSIE 9/.test(I.userAgent),Se.isOperaMobile=I.appName==="Opera"&&Se.supportsTouch&&/Presto/.test(I.userAgent),Se.prefixedMatchesSelector="matches"in $.prototype?"matches":"webkitMatchesSelector"in $.prototype?"webkitMatchesSelector":"mozMatchesSelector"in $.prototype?"mozMatchesSelector":"oMatchesSelector"in $.prototype?"oMatchesSelector":"msMatchesSelector",Se.pEventTypes=Se.supportsPointerEvent?ae.PointerEvent===T.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,Se.wheelEvent=ae.document&&"onmousewheel"in ae.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},le=Se;function be(T,$){if(T.contains)return T.contains($);for(;$;){if($===T)return!0;$=$.parentNode}return!1}function Oe(T,$){for(;z.element(T);){if(se(T,$))return T;T=Be(T)}return null}function Be(T){var $=T.parentNode;if(z.docFrag($)){for(;($=$.host)&&z.docFrag($););return $}return $}function se(T,$){return k!==C&&($=$.replace(/\/deep\//g," ")),T[le.prefixedMatchesSelector]($)}var Pe=function(T){return T.parentNode||T.host};function rt(T,$){for(var I,O=[],N=T;(I=Pe(N))&&N!==$&&I!==N.ownerDocument;)O.unshift(N),N=I;return O}function it(T,$,I){for(;z.element(T);){if(se(T,$))return!0;if((T=Be(T))===I)return se(T,$)}return!1}function _t(T){return T.correspondingUseElement||T}function ri(T){var $=T instanceof ae.SVGElement?T.getBoundingClientRect():T.getClientRects()[0];return $&&{left:$.left,right:$.right,top:$.top,bottom:$.bottom,width:$.width||$.right-$.left,height:$.height||$.bottom-$.top}}function zt(T){var $,I=ri(T);if(!le.isIOS7&&I){var O={x:($=($=R(T))||k).scrollX||$.document.documentElement.scrollLeft,y:$.scrollY||$.document.documentElement.scrollTop};I.left+=O.x,I.right+=O.x,I.top+=O.y,I.bottom+=O.y}return I}function kr(T){for(var $=[];T;)$.push(T),T=Be(T);return $}function $i(T){return!!z.string(T)&&(ae.document.querySelector(T),!0)}function gt(T,$){for(var I in $)T[I]=$[I];return T}function Eu(T,$,I){return T==="parent"?Be(I):T==="self"?$.getRect(I):Oe(I,T)}function fa(T,$,I,O){var N=T;return z.string(N)?N=Eu(N,$,I):z.func(N)&&(N=N.apply(void 0,O)),z.element(N)&&(N=zt(N)),N}function kl(T){return T&&{x:"x"in T?T.x:T.left,y:"y"in T?T.y:T.top}}function ma(T){return!T||"x"in T&&"y"in T||((T=gt({},T)).x=T.left||0,T.y=T.top||0,T.width=T.width||(T.right||0)-T.x,T.height=T.height||(T.bottom||0)-T.y),T}function ya(T,$,I){T.left&&($.left+=I.x),T.right&&($.right+=I.x),T.top&&($.top+=I.y),T.bottom&&($.bottom+=I.y),$.width=$.right-$.left,$.height=$.bottom-$.top}function of(T,$,I){var O=I&&T.options[I];return kl(fa(O&&O.origin||T.options.origin,T,$,[T&&$]))||{x:0,y:0}}function Cu(T,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(X){return!0},O=arguments.length>3?arguments[3]:void 0;if(O=O||{},z.string(T)&&T.search(" ")!==-1&&(T=ga(T)),z.array(T))return T.forEach(function(X){return Cu(X,$,I,O)}),O;if(z.object(T)&&($=T,T=""),z.func($)&&I(T))O[T]=O[T]||[],O[T].push($);else if(z.array($))for(var N=0,j=$;N<j.length;N++){var H=j[N];Cu(T,H,I,O)}else if(z.object($))for(var Z in $)Cu(ga(Z).map(function(X){return"".concat(T).concat(X)}),$[Z],I,O);return O}function ga(T){return T.trim().split(/ +/)}var af=function(T,$){return Math.sqrt(T*T+$*$)},Pb=["webkit","moz"];function Wd(T,$){T.__set||(T.__set={});var I=function(N){if(Pb.some(function(j){return N.indexOf(j)===0}))return 1;typeof T[N]!="function"&&N!=="__set"&&Object.defineProperty(T,N,{get:function(){return N in T.__set?T.__set[N]:T.__set[N]=$[N]},set:function(j){T.__set[N]=j},configurable:!0})};for(var O in $)I(O);return T}function js(T,$){T.page=T.page||{},T.page.x=$.page.x,T.page.y=$.page.y,T.client=T.client||{},T.client.x=$.client.x,T.client.y=$.client.y,T.timeStamp=$.timeStamp}function R1(T){T.page.x=0,T.page.y=0,T.client.x=0,T.client.y=0}function Lb(T){return T instanceof ae.Event||T instanceof ae.Touch}function Ay(T,$,I){return T=T||"page",(I=I||{}).x=$[T+"X"],I.y=$[T+"Y"],I}function D1(T,$){return $=$||{x:0,y:0},le.isOperaMobile&&Lb(T)?(Ay("screen",T,$),$.x+=window.scrollX,$.y+=window.scrollY):Ay("page",T,$),$}function Al(T){return z.number(T.pointerId)?T.pointerId:T.identifier}function oo(T,$,I){var O=$.length>1?ao($):$[0];D1(O,T.page),function(N,j){j=j||{},le.isOperaMobile&&Lb(N)?Ay("screen",N,j):Ay("client",N,j)}(O,T.client),T.timeStamp=I}function qa(T){var $=[];return z.array(T)?($[0]=T[0],$[1]=T[1]):T.type==="touchend"?T.touches.length===1?($[0]=T.touches[0],$[1]=T.changedTouches[0]):T.touches.length===0&&($[0]=T.changedTouches[0],$[1]=T.changedTouches[1]):($[0]=T.touches[0],$[1]=T.touches[1]),$}function ao(T){for(var $={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},I=0;I<T.length;I++){var O=T[I];for(var N in $)$[N]+=O[N]}for(var j in $)$[j]/=T.length;return $}function Rb(T){if(!T.length)return null;var $=qa(T),I=Math.min($[0].pageX,$[1].pageX),O=Math.min($[0].pageY,$[1].pageY),N=Math.max($[0].pageX,$[1].pageX),j=Math.max($[0].pageY,$[1].pageY);return{x:I,y:O,left:I,top:O,right:N,bottom:j,width:N-I,height:j-O}}function Db(T,$){var I=$+"X",O=$+"Y",N=qa(T),j=N[0][I]-N[1][I],H=N[0][O]-N[1][O];return af(j,H)}function Nb(T,$){var I=$+"X",O=$+"Y",N=qa(T),j=N[1][I]-N[0][I],H=N[1][O]-N[0][O];return 180*Math.atan2(H,j)/Math.PI}function lf(T){return z.string(T.pointerType)?T.pointerType:z.number(T.pointerType)?[void 0,void 0,"touch","pen","mouse"][T.pointerType]:/touch/.test(T.type||"")||T instanceof ae.Touch?"touch":"mouse"}function cf(T){var $=z.func(T.composedPath)?T.composedPath():T.path;return[_t($?$[0]:T.target),_t(T.currentTarget)]}var Wa=function(){function T($){s(this,T),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=$}return a(T,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),T}();Object.defineProperty(Wa.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var uf=function(T,$){for(var I=0;I<$.length;I++){var O=$[I];T.push(O)}return T},Jd=function(T){return uf([],T)},df=function(T,$){for(var I=0;I<T.length;I++)if($(T[I],I,T))return I;return-1},Zd=function(T,$){return T[df(T,$)]},Iu=function(T){c(I,T);var $=v(I);function I(O,N,j){var H;s(this,I),(H=$.call(this,N._interaction)).dropzone=void 0,H.dragEvent=void 0,H.relatedTarget=void 0,H.draggable=void 0,H.propagationStopped=!1,H.immediatePropagationStopped=!1;var Z=j==="dragleave"?O.prev:O.cur,X=Z.element,de=Z.dropzone;return H.type=j,H.target=X,H.currentTarget=X,H.dropzone=de,H.dragEvent=N,H.relatedTarget=N.target,H.draggable=N.interactable,H.timeStamp=N.timeStamp,H}return a(I,[{key:"reject",value:function(){var O=this,N=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&N.cur.dropzone===this.dropzone&&N.cur.element===this.target)if(N.prev.dropzone=this.dropzone,N.prev.element=this.target,N.rejected=!0,N.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var j=N.activeDrops,H=df(j,function(X){var de=X.dropzone,re=X.element;return de===O.dropzone&&re===O.target});N.activeDrops.splice(H,1);var Z=new I(N,this.dragEvent,"dropdeactivate");Z.dropzone=this.dropzone,Z.target=this.target,this.dropzone.fire(Z)}else this.dropzone.fire(new I(N,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),I}(Wa);function Oy(T,$){for(var I=0,O=T.slice();I<O.length;I++){var N=O[I],j=N.dropzone,H=N.element;$.dropzone=j,$.target=H,j.fire($),$.propagationStopped=$.immediatePropagationStopped=!1}}function Mu(T,$){for(var I=function(j,H){for(var Z=[],X=0,de=j.interactables.list;X<de.length;X++){var re=de[X];if(re.options.drop.enabled){var we=re.options.drop.accept;if(!(z.element(we)&&we!==H||z.string(we)&&!se(H,we)||z.func(we)&&!we({dropzone:re,draggableElement:H})))for(var Re=0,Xe=re.getAllElements();Re<Xe.length;Re++){var Je=Xe[Re];Je!==H&&Z.push({dropzone:re,element:Je,rect:re.getRect(Je)})}}}return Z}(T,$),O=0;O<I.length;O++){var N=I[O];N.rect=N.dropzone.getRect(N.element)}return I}function N1(T,$,I){for(var O=T.dropState,N=T.interactable,j=T.element,H=[],Z=0,X=O.activeDrops;Z<X.length;Z++){var de=X[Z],re=de.dropzone,we=de.element,Re=de.rect,Xe=re.dropCheck($,I,N,j,we,Re);H.push(Xe?we:null)}var Je=function(tt){for(var ht,ct,Mt,oi=[],bi=0;bi<tt.length;bi++){var Ft=tt[bi],Qt=tt[ht];if(Ft&&bi!==ht)if(Qt){var Ts=Pe(Ft),$r=Pe(Qt);if(Ts!==Ft.ownerDocument)if($r!==Ft.ownerDocument)if(Ts!==$r){oi=oi.length?oi:rt(Qt);var Kn=void 0;if(Qt instanceof ae.HTMLElement&&Ft instanceof ae.SVGElement&&!(Ft instanceof ae.SVGSVGElement)){if(Ft===$r)continue;Kn=Ft.ownerSVGElement}else Kn=Ft;for(var Ja=rt(Kn,Qt.ownerDocument),kc=0;Ja[kc]&&Ja[kc]===oi[kc];)kc++;var t0=[Ja[kc-1],Ja[kc],oi[kc]];if(t0[0])for(var i0=t0[0].lastChild;i0;){if(i0===t0[1]){ht=bi,oi=Ja;break}if(i0===t0[2])break;i0=i0.previousSibling}}else Mt=Qt,(parseInt(R(ct=Ft).getComputedStyle(ct).zIndex,10)||0)>=(parseInt(R(Mt).getComputedStyle(Mt).zIndex,10)||0)&&(ht=bi);else ht=bi}else ht=bi}return ht}(H);return O.activeDrops[Je]||null}function Py(T,$,I){var O=T.dropState,N={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return I.type==="dragstart"&&(N.activate=new Iu(O,I,"dropactivate"),N.activate.target=null,N.activate.dropzone=null),I.type==="dragend"&&(N.deactivate=new Iu(O,I,"dropdeactivate"),N.deactivate.target=null,N.deactivate.dropzone=null),O.rejected||(O.cur.element!==O.prev.element&&(O.prev.dropzone&&(N.leave=new Iu(O,I,"dragleave"),I.dragLeave=N.leave.target=O.prev.element,I.prevDropzone=N.leave.dropzone=O.prev.dropzone),O.cur.dropzone&&(N.enter=new Iu(O,I,"dragenter"),I.dragEnter=O.cur.element,I.dropzone=O.cur.dropzone)),I.type==="dragend"&&O.cur.dropzone&&(N.drop=new Iu(O,I,"drop"),I.dropzone=O.cur.dropzone,I.relatedTarget=O.cur.element),I.type==="dragmove"&&O.cur.dropzone&&(N.move=new Iu(O,I,"dropmove"),I.dropzone=O.cur.dropzone)),N}function Ly(T,$){var I=T.dropState,O=I.activeDrops,N=I.cur,j=I.prev;$.leave&&j.dropzone.fire($.leave),$.enter&&N.dropzone.fire($.enter),$.move&&N.dropzone.fire($.move),$.drop&&N.dropzone.fire($.drop),$.deactivate&&Oy(O,$.deactivate),I.prev.dropzone=N.dropzone,I.prev.element=N.element}function Ry(T,$){var I=T.interaction,O=T.iEvent,N=T.event;if(O.type==="dragmove"||O.type==="dragend"){var j=I.dropState;$.dynamicDrop&&(j.activeDrops=Mu($,I.element));var H=O,Z=N1(I,H,N);j.rejected=j.rejected&&!!Z&&Z.dropzone===j.cur.dropzone&&Z.element===j.cur.element,j.cur.dropzone=Z&&Z.dropzone,j.cur.element=Z&&Z.element,j.events=Py(I,0,H)}}var Ie={id:"actions/drop",install:function(T){var $=T.actions,I=T.interactStatic,O=T.Interactable,N=T.defaults;T.usePlugin(ge),O.prototype.dropzone=function(j){return function(H,Z){if(z.object(Z)){if(H.options.drop.enabled=Z.enabled!==!1,Z.listeners){var X=Cu(Z.listeners),de=Object.keys(X).reduce(function(we,Re){return we[/^(enter|leave)/.test(Re)?"drag".concat(Re):/^(activate|deactivate|move)/.test(Re)?"drop".concat(Re):Re]=X[Re],we},{}),re=H.options.drop.listeners;re&&H.off(re),H.on(de),H.options.drop.listeners=de}return z.func(Z.ondrop)&&H.on("drop",Z.ondrop),z.func(Z.ondropactivate)&&H.on("dropactivate",Z.ondropactivate),z.func(Z.ondropdeactivate)&&H.on("dropdeactivate",Z.ondropdeactivate),z.func(Z.ondragenter)&&H.on("dragenter",Z.ondragenter),z.func(Z.ondragleave)&&H.on("dragleave",Z.ondragleave),z.func(Z.ondropmove)&&H.on("dropmove",Z.ondropmove),/^(pointer|center)$/.test(Z.overlap)?H.options.drop.overlap=Z.overlap:z.number(Z.overlap)&&(H.options.drop.overlap=Math.max(Math.min(1,Z.overlap),0)),"accept"in Z&&(H.options.drop.accept=Z.accept),"checker"in Z&&(H.options.drop.checker=Z.checker),H}return z.bool(Z)?(H.options.drop.enabled=Z,H):H.options.drop}(this,j)},O.prototype.dropCheck=function(j,H,Z,X,de,re){return function(we,Re,Xe,Je,tt,ht,ct){var Mt=!1;if(!(ct=ct||we.getRect(ht)))return!!we.options.drop.checker&&we.options.drop.checker(Re,Xe,Mt,we,ht,Je,tt);var oi=we.options.drop.overlap;if(oi==="pointer"){var bi=of(Je,tt,"drag"),Ft=D1(Re);Ft.x+=bi.x,Ft.y+=bi.y;var Qt=Ft.x>ct.left&&Ft.x<ct.right,Ts=Ft.y>ct.top&&Ft.y<ct.bottom;Mt=Qt&&Ts}var $r=Je.getRect(tt);if($r&&oi==="center"){var Kn=$r.left+$r.width/2,Ja=$r.top+$r.height/2;Mt=Kn>=ct.left&&Kn<=ct.right&&Ja>=ct.top&&Ja<=ct.bottom}return $r&&z.number(oi)&&(Mt=Math.max(0,Math.min(ct.right,$r.right)-Math.max(ct.left,$r.left))*Math.max(0,Math.min(ct.bottom,$r.bottom)-Math.max(ct.top,$r.top))/($r.width*$r.height)>=oi),we.options.drop.checker&&(Mt=we.options.drop.checker(Re,Xe,Mt,we,ht,Je,tt)),Mt}(this,j,H,Z,X,de,re)},I.dynamicDrop=function(j){return z.bool(j)?(T.dynamicDrop=j,I):T.dynamicDrop},gt($.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),$.methodDict.drop="dropzone",T.dynamicDrop=!1,N.actions.drop=Ie.defaults},listeners:{"interactions:before-action-start":function(T){var $=T.interaction;$.prepared.name==="drag"&&($.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(T,$){var I=T.interaction,O=(T.event,T.iEvent);if(I.prepared.name==="drag"){var N=I.dropState;N.activeDrops=[],N.events={},N.activeDrops=Mu($,I.element),N.events=Py(I,0,O),N.events.activate&&(Oy(N.activeDrops,N.events.activate),$.fire("actions/drop:start",{interaction:I,dragEvent:O}))}},"interactions:action-move":Ry,"interactions:after-action-move":function(T,$){var I=T.interaction,O=T.iEvent;if(I.prepared.name==="drag"){var N=I.dropState;Ly(I,N.events),$.fire("actions/drop:move",{interaction:I,dragEvent:O}),N.events={}}},"interactions:action-end":function(T,$){if(T.interaction.prepared.name==="drag"){var I=T.interaction,O=T.iEvent;Ry(T,$),Ly(I,I.dropState.events),$.fire("actions/drop:end",{interaction:I,dragEvent:O})}},"interactions:stop":function(T){var $=T.interaction;if($.prepared.name==="drag"){var I=$.dropState;I&&(I.activeDrops=null,I.events=null,I.cur.dropzone=null,I.cur.element=null,I.prev.dropzone=null,I.prev.element=null,I.rejected=!1)}}},getActiveDrops:Mu,getDrop:N1,getDropEvents:Py,fireDropEvents:Ly,filterEventType:function(T){return T.search("drag")===0||T.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},ar=Ie;function Tc(T){var $=T.interaction,I=T.iEvent,O=T.phase;if($.prepared.name==="gesture"){var N=$.pointers.map(function(de){return de.pointer}),j=O==="start",H=O==="end",Z=$.interactable.options.deltaSource;if(I.touches=[N[0],N[1]],j)I.distance=Db(N,Z),I.box=Rb(N),I.scale=1,I.ds=0,I.angle=Nb(N,Z),I.da=0,$.gesture.startDistance=I.distance,$.gesture.startAngle=I.angle;else if(H||$.pointers.length<2){var X=$.prevEvent;I.distance=X.distance,I.box=X.box,I.scale=X.scale,I.ds=0,I.angle=X.angle,I.da=0}else I.distance=Db(N,Z),I.box=Rb(N),I.scale=I.distance/$.gesture.startDistance,I.angle=Nb(N,Z),I.ds=I.scale-$.gesture.scale,I.da=I.angle-$.gesture.angle;$.gesture.distance=I.distance,$.gesture.angle=I.angle,z.number(I.scale)&&I.scale!==1/0&&!isNaN(I.scale)&&($.gesture.scale=I.scale)}}var Vs={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(T){var $=T.actions,I=T.Interactable,O=T.defaults;I.prototype.gesturable=function(N){return z.object(N)?(this.options.gesture.enabled=N.enabled!==!1,this.setPerAction("gesture",N),this.setOnEvents("gesture",N),this):z.bool(N)?(this.options.gesture.enabled=N,this):this.options.gesture},$.map.gesture=Vs,$.methodDict.gesture="gesturable",O.actions.gesture=Vs.defaults},listeners:{"interactions:action-start":Tc,"interactions:action-move":Tc,"interactions:action-end":Tc,"interactions:new":function(T){T.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(T){if(!(T.interaction.pointers.length<2)){var $=T.interactable.options.gesture;if($&&$.enabled)return T.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(T){return T.search("gesture")===0}},Xi=Vs;function Xn(T,$,I,O,N,j,H){if(!$)return!1;if($===!0){var Z=z.number(j.width)?j.width:j.right-j.left,X=z.number(j.height)?j.height:j.bottom-j.top;if(H=Math.min(H,Math.abs((T==="left"||T==="right"?Z:X)/2)),Z<0&&(T==="left"?T="right":T==="right"&&(T="left")),X<0&&(T==="top"?T="bottom":T==="bottom"&&(T="top")),T==="left"){var de=Z>=0?j.left:j.right;return I.x<de+H}if(T==="top"){var re=X>=0?j.top:j.bottom;return I.y<re+H}if(T==="right")return I.x>(Z>=0?j.right:j.left)-H;if(T==="bottom")return I.y>(X>=0?j.bottom:j.top)-H}return!!z.element(O)&&(z.element($)?$===O:it(O,$,N))}function vt(T){var $=T.iEvent,I=T.interaction;if(I.prepared.name==="resize"&&I.resizeAxes){var O=$;I.interactable.options.resize.square?(I.resizeAxes==="y"?O.delta.x=O.delta.y:O.delta.y=O.delta.x,O.axes="xy"):(O.axes=I.resizeAxes,I.resizeAxes==="x"?O.delta.y=0:I.resizeAxes==="y"&&(O.delta.x=0))}}var Bs,ku,Ki={id:"actions/resize",before:["actions/drag"],install:function(T){var $=T.actions,I=T.browser,O=T.Interactable,N=T.defaults;Ki.cursors=function(j){return j.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(I),Ki.defaultMargin=I.supportsTouch||I.supportsPointerEvent?20:10,O.prototype.resizable=function(j){return function(H,Z,X){return z.object(Z)?(H.options.resize.enabled=Z.enabled!==!1,H.setPerAction("resize",Z),H.setOnEvents("resize",Z),z.string(Z.axis)&&/^x$|^y$|^xy$/.test(Z.axis)?H.options.resize.axis=Z.axis:Z.axis===null&&(H.options.resize.axis=X.defaults.actions.resize.axis),z.bool(Z.preserveAspectRatio)?H.options.resize.preserveAspectRatio=Z.preserveAspectRatio:z.bool(Z.square)&&(H.options.resize.square=Z.square),H):z.bool(Z)?(H.options.resize.enabled=Z,H):H.options.resize}(this,j,T)},$.map.resize=Ki,$.methodDict.resize="resizable",N.actions.resize=Ki.defaults},listeners:{"interactions:new":function(T){T.interaction.resizeAxes="xy"},"interactions:action-start":function(T){(function($){var I=$.iEvent,O=$.interaction;if(O.prepared.name==="resize"&&O.prepared.edges){var N=I,j=O.rect;O._rects={start:gt({},j),corrected:gt({},j),previous:gt({},j),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},N.edges=O.prepared.edges,N.rect=O._rects.corrected,N.deltaRect=O._rects.delta}})(T),vt(T)},"interactions:action-move":function(T){(function($){var I=$.iEvent,O=$.interaction;if(O.prepared.name==="resize"&&O.prepared.edges){var N=I,j=O.interactable.options.resize.invert,H=j==="reposition"||j==="negate",Z=O.rect,X=O._rects,de=X.start,re=X.corrected,we=X.delta,Re=X.previous;if(gt(Re,re),H){if(gt(re,Z),j==="reposition"){if(re.top>re.bottom){var Xe=re.top;re.top=re.bottom,re.bottom=Xe}if(re.left>re.right){var Je=re.left;re.left=re.right,re.right=Je}}}else re.top=Math.min(Z.top,de.bottom),re.bottom=Math.max(Z.bottom,de.top),re.left=Math.min(Z.left,de.right),re.right=Math.max(Z.right,de.left);for(var tt in re.width=re.right-re.left,re.height=re.bottom-re.top,re)we[tt]=re[tt]-Re[tt];N.edges=O.prepared.edges,N.rect=re,N.deltaRect=we}})(T),vt(T)},"interactions:action-end":function(T){var $=T.iEvent,I=T.interaction;if(I.prepared.name==="resize"&&I.prepared.edges){var O=$;O.edges=I.prepared.edges,O.rect=I._rects.corrected,O.deltaRect=I._rects.delta}},"auto-start:check":function(T){var $=T.interaction,I=T.interactable,O=T.element,N=T.rect,j=T.buttons;if(N){var H=gt({},$.coords.cur.page),Z=I.options.resize;if(Z&&Z.enabled&&(!$.pointerIsDown||!/mouse|pointer/.test($.pointerType)||(j&Z.mouseButtons)!=0)){if(z.object(Z.edges)){var X={left:!1,right:!1,top:!1,bottom:!1};for(var de in X)X[de]=Xn(de,Z.edges[de],H,$._latestPointer.eventTarget,O,N,Z.margin||Ki.defaultMargin);X.left=X.left&&!X.right,X.top=X.top&&!X.bottom,(X.left||X.right||X.top||X.bottom)&&(T.action={name:"resize",edges:X})}else{var re=Z.axis!=="y"&&H.x>N.right-Ki.defaultMargin,we=Z.axis!=="x"&&H.y>N.bottom-Ki.defaultMargin;(re||we)&&(T.action={name:"resize",axes:(re?"x":"")+(we?"y":"")})}return!T.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(T){var $=T.edges,I=T.axis,O=T.name,N=Ki.cursors,j=null;if(I)j=N[O+I];else if($){for(var H="",Z=0,X=["top","bottom","left","right"];Z<X.length;Z++){var de=X[Z];$[de]&&(H+=de)}j=N[H]}return j},filterEventType:function(T){return T.search("resize")===0},defaultMargin:null},Yd=Ki,hf={id:"actions",install:function(T){T.usePlugin(Xi),T.usePlugin(Yd),T.usePlugin(ge),T.usePlugin(ar)}},va=0,Gs={request:function(T){return Bs(T)},cancel:function(T){return ku(T)},init:function(T){if(Bs=T.requestAnimationFrame,ku=T.cancelAnimationFrame,!Bs)for(var $=["ms","moz","webkit","o"],I=0;I<$.length;I++){var O=$[I];Bs=T["".concat(O,"RequestAnimationFrame")],ku=T["".concat(O,"CancelAnimationFrame")]||T["".concat(O,"CancelRequestAnimationFrame")]}Bs=Bs&&Bs.bind(T),ku=ku&&ku.bind(T),Bs||(Bs=function(N){var j=Date.now(),H=Math.max(0,16-(j-va)),Z=T.setTimeout(function(){N(j+H)},H);return va=j+H,Z},ku=function(N){return clearTimeout(N)})}},Dt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(T){Dt.isScrolling=!0,Gs.cancel(Dt.i),T.autoScroll=Dt,Dt.interaction=T,Dt.prevTime=Dt.now(),Dt.i=Gs.request(Dt.scroll)},stop:function(){Dt.isScrolling=!1,Dt.interaction&&(Dt.interaction.autoScroll=null),Gs.cancel(Dt.i)},scroll:function(){var T=Dt.interaction,$=T.interactable,I=T.element,O=T.prepared.name,N=$.options[O].autoScroll,j=Ht(N.container,$,I),H=Dt.now(),Z=(H-Dt.prevTime)/1e3,X=N.speed*Z;if(X>=1){var de={x:Dt.x*X,y:Dt.y*X};if(de.x||de.y){var re=Au(j);z.window(j)?j.scrollBy(de.x,de.y):j&&(j.scrollLeft+=de.x,j.scrollTop+=de.y);var we=Au(j),Re={x:we.x-re.x,y:we.y-re.y};(Re.x||Re.y)&&$.fire({type:"autoscroll",target:I,interactable:$,delta:Re,interaction:T,container:j})}Dt.prevTime=H}Dt.isScrolling&&(Gs.cancel(Dt.i),Dt.i=Gs.request(Dt.scroll))},check:function(T,$){var I;return(I=T.options[$].autoScroll)==null?void 0:I.enabled},onInteractionMove:function(T){var $=T.interaction,I=T.pointer;if($.interacting()&&Dt.check($.interactable,$.prepared.name))if($.simulation)Dt.x=Dt.y=0;else{var O,N,j,H,Z=$.interactable,X=$.element,de=$.prepared.name,re=Z.options[de].autoScroll,we=Ht(re.container,Z,X);if(z.window(we))H=I.clientX<Dt.margin,O=I.clientY<Dt.margin,N=I.clientX>we.innerWidth-Dt.margin,j=I.clientY>we.innerHeight-Dt.margin;else{var Re=ri(we);H=I.clientX<Re.left+Dt.margin,O=I.clientY<Re.top+Dt.margin,N=I.clientX>Re.right-Dt.margin,j=I.clientY>Re.bottom-Dt.margin}Dt.x=N?1:H?-1:0,Dt.y=j?1:O?-1:0,Dt.isScrolling||(Dt.margin=re.margin,Dt.speed=re.speed,Dt.start($))}}};function Ht(T,$,I){return(z.string(T)?Eu(T,$,I):T)||R(I)}function Au(T){return z.window(T)&&(T=window.document.body),{x:T.scrollLeft,y:T.scrollTop}}var gn={id:"auto-scroll",install:function(T){var $=T.defaults,I=T.actions;T.autoScroll=Dt,Dt.now=function(){return T.now()},I.phaselessTypes.autoscroll=!0,$.perAction.autoScroll=Dt.defaults},listeners:{"interactions:new":function(T){T.interaction.autoScroll=null},"interactions:destroy":function(T){T.interaction.autoScroll=null,Dt.stop(),Dt.interaction&&(Dt.interaction=null)},"interactions:stop":Dt.stop,"interactions:action-move":function(T){return Dt.onInteractionMove(T)}}},z1=gn;function Xd(T,$){var I=!1;return function(){return I||(k.console.warn($),I=!0),T.apply(this,arguments)}}function ba(T,$){return T.name=$.name,T.axis=$.axis,T.edges=$.edges,T}function Kd(T){return z.bool(T)?(this.options.styleCursor=T,this):T===null?(delete this.options.styleCursor,this):this.options.styleCursor}function zb(T){return z.func(T)?(this.options.actionChecker=T,this):T===null?(delete this.options.actionChecker,this):this.options.actionChecker}var vn={id:"auto-start/interactableMethods",install:function(T){var $=T.Interactable;$.prototype.getAction=function(I,O,N,j){var H=function(Z,X,de,re,we){var Re=Z.getRect(re),Xe=X.buttons||{0:1,1:4,3:8,4:16}[X.button],Je={action:null,interactable:Z,interaction:de,element:re,rect:Re,buttons:Xe};return we.fire("auto-start:check",Je),Je.action}(this,O,N,j,T);return this.options.actionChecker?this.options.actionChecker(I,O,H,this,j,N):H},$.prototype.ignoreFrom=Xd(function(I){return this._backCompatOption("ignoreFrom",I)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),$.prototype.allowFrom=Xd(function(I){return this._backCompatOption("allowFrom",I)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),$.prototype.actionChecker=zb,$.prototype.styleCursor=Kd}};function Fb(T,$,I,O,N){return $.testIgnoreAllow($.options[T.name],I,O)&&$.options[T.name].enabled&&Po($,I,T,N)?T:null}function F1(T,$,I,O,N,j,H){for(var Z=0,X=O.length;Z<X;Z++){var de=O[Z],re=N[Z],we=de.getAction($,I,T,re);if(we){var Re=Fb(we,de,re,j,H);if(Re)return{action:Re,interactable:de,element:re}}}return{action:null,interactable:null,element:null}}function pf(T,$,I,O,N){var j=[],H=[],Z=O;function X(re){j.push(re),H.push(Z)}for(;z.element(Z);){j=[],H=[],N.interactables.forEachMatch(Z,X);var de=F1(T,$,I,j,H,O,N);if(de.action&&!de.interactable.options[de.action.name].manualStart)return de;Z=Be(Z)}return{action:null,interactable:null,element:null}}function ff(T,$,I){var O=$.action,N=$.interactable,j=$.element;O=O||{name:null},T.interactable=N,T.element=j,ba(T.prepared,O),T.rect=N&&O.name?N.getRect(j):null,An(T,I),I.fire("autoStart:prepared",{interaction:T})}function Po(T,$,I,O){var N=T.options,j=N[I.name].max,H=N[I.name].maxPerElement,Z=O.autoStart.maxInteractions,X=0,de=0,re=0;if(!(j&&H&&Z))return!1;for(var we=0,Re=O.interactions.list;we<Re.length;we++){var Xe=Re[we],Je=Xe.prepared.name;if(Xe.interacting()&&(++X>=Z||Xe.interactable===T&&((de+=Je===I.name?1:0)>=j||Xe.element===$&&(re++,Je===I.name&&re>=H))))return!1}return Z>0}function Dy(T,$){return z.number(T)?($.autoStart.maxInteractions=T,this):$.autoStart.maxInteractions}function Ny(T,$,I){var O=I.autoStart.cursorElement;O&&O!==T&&(O.style.cursor=""),T.ownerDocument.documentElement.style.cursor=$,T.style.cursor=$,I.autoStart.cursorElement=$?T:null}function An(T,$){var I=T.interactable,O=T.element,N=T.prepared;if(T.pointerType==="mouse"&&I&&I.options.styleCursor){var j="";if(N.name){var H=I.options[N.name].cursorChecker;j=z.func(H)?H(N,I,O,T._interacting):$.actions.map[N.name].getCursor(N)}Ny(T.element,j||"",$)}else $.autoStart.cursorElement&&Ny($.autoStart.cursorElement,"",$)}var Ub={id:"auto-start/base",before:["actions"],install:function(T){var $=T.interactStatic,I=T.defaults;T.usePlugin(vn),I.base.actionChecker=null,I.base.styleCursor=!0,gt(I.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),$.maxInteractions=function(O){return Dy(O,T)},T.autoStart={maxInteractions:1/0,withinInteractionLimit:Po,cursorElement:null}},listeners:{"interactions:down":function(T,$){var I=T.interaction,O=T.pointer,N=T.event,j=T.eventTarget;I.interacting()||ff(I,pf(I,O,N,j,$),$)},"interactions:move":function(T,$){(function(I,O){var N=I.interaction,j=I.pointer,H=I.event,Z=I.eventTarget;N.pointerType!=="mouse"||N.pointerIsDown||N.interacting()||ff(N,pf(N,j,H,Z,O),O)})(T,$),function(I,O){var N=I.interaction;if(N.pointerIsDown&&!N.interacting()&&N.pointerWasMoved&&N.prepared.name){O.fire("autoStart:before-start",I);var j=N.interactable,H=N.prepared.name;H&&j&&(j.options[H].manualStart||!Po(j,N.element,N.prepared,O)?N.stop():(N.start(N.prepared,j,N.element),An(N,O)))}}(T,$)},"interactions:stop":function(T,$){var I=T.interaction,O=I.interactable;O&&O.options.styleCursor&&Ny(I.element,"",$)}},maxInteractions:Dy,withinInteractionLimit:Po,validateAction:Fb},mf=Ub,jb={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(T,$){var I=T.interaction,O=T.eventTarget,N=T.dx,j=T.dy;if(I.prepared.name==="drag"){var H=Math.abs(N),Z=Math.abs(j),X=I.interactable.options.drag,de=X.startAxis,re=H>Z?"x":H<Z?"y":"xy";if(I.prepared.axis=X.lockAxis==="start"?re[0]:X.lockAxis,re!=="xy"&&de!=="xy"&&de!==re){I.prepared.name=null;for(var we=O,Re=function(Je){if(Je!==I.interactable){var tt=I.interactable.options.drag;if(!tt.manualStart&&Je.testIgnoreAllow(tt,we,O)){var ht=Je.getAction(I.downPointer,I.downEvent,I,we);if(ht&&ht.name==="drag"&&function(ct,Mt){if(!Mt)return!1;var oi=Mt.options.drag.startAxis;return ct==="xy"||oi==="xy"||oi===ct}(re,Je)&&mf.validateAction(ht,Je,we,O,$))return Je}}};z.element(we);){var Xe=$.interactables.forEachMatch(we,Re);if(Xe){I.prepared.name="drag",I.interactable=Xe,I.element=we;break}we=Be(we)}}}}}};function yf(T){var $=T.prepared&&T.prepared.name;if(!$)return null;var I=T.interactable.options;return I[$].hold||I[$].delay}var ie={id:"auto-start/hold",install:function(T){var $=T.defaults;T.usePlugin(mf),$.perAction.hold=0,$.perAction.delay=0},listeners:{"interactions:new":function(T){T.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(T){var $=T.interaction,I=yf($);I>0&&($.autoStartHoldTimer=setTimeout(function(){$.start($.prepared,$.interactable,$.element)},I))},"interactions:move":function(T){var $=T.interaction,I=T.duplicate;$.autoStartHoldTimer&&$.pointerWasMoved&&!I&&(clearTimeout($.autoStartHoldTimer),$.autoStartHoldTimer=null)},"autoStart:before-start":function(T){var $=T.interaction;yf($)>0&&($.prepared.name=null)}},getHoldDuration:yf},Me=ie,Ke={id:"auto-start",install:function(T){T.usePlugin(mf),T.usePlugin(Me),T.usePlugin(jb)}},Pt=function(T){return/^(always|never|auto)$/.test(T)?(this.options.preventDefault=T,this):z.bool(T)?(this.options.preventDefault=T?"always":"never",this):this.options.preventDefault};function Pi(T){var $=T.interaction,I=T.event;$.interactable&&$.interactable.checkAndPreventDefault(I)}var Qi={id:"core/interactablePreventDefault",install:function(T){var $=T.Interactable;$.prototype.preventDefault=Pt,$.prototype.checkAndPreventDefault=function(I){return function(O,N,j){var H=O.options.preventDefault;if(H!=="never")if(H!=="always"){if(N.events.supportsPassive&&/^touch(start|move)$/.test(j.type)){var Z=R(j.target).document,X=N.getDocOptions(Z);if(!X||!X.events||X.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(j.type)||z.element(j.target)&&se(j.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||j.preventDefault()}else j.preventDefault()}(this,T,I)},T.interactions.docEvents.push({type:"dragstart",listener:function(I){for(var O=0,N=T.interactions.list;O<N.length;O++){var j=N[O];if(j.element&&(j.element===I.target||be(j.element,I.target)))return void j.interactable.checkAndPreventDefault(I)}}})},listeners:["down","move","up","cancel"].reduce(function(T,$){return T["interactions:".concat($)]=Pi,T},{})};function Ar(T,$){if($.phaselessTypes[T])return!0;for(var I in $.map)if(T.indexOf(I)===0&&T.substr(I.length)in $.phases)return!0;return!1}function ki(T){var $={};for(var I in T){var O=T[I];z.plainObject(O)?$[I]=ki(O):z.array(O)?$[I]=Jd(O):$[I]=O}return $}var Vb=function(){function T($){s(this,T),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=$,this.result=Bb(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(T,[{key:"start",value:function($,I){var O,N,j=$.phase,H=this.interaction,Z=function(de){var re=de.interactable.options[de.prepared.name],we=re.modifiers;return we&&we.length?we:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Re){var Xe=re[Re];return Xe&&Xe.enabled&&{options:Xe,methods:Xe._methods}}).filter(function(Re){return!!Re})}(H);this.prepareStates(Z),this.startEdges=gt({},H.edges),this.edges=gt({},this.startEdges),this.startOffset=(O=H.rect,N=I,O?{left:N.x-O.left,top:N.y-O.top,right:O.right-N.x,bottom:O.bottom-N.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var X=this.fillArg({phase:j,pageCoords:I,preEnd:!1});return this.result=Bb(),this.startAll(X),this.result=this.setAll(X)}},{key:"fillArg",value:function($){var I=this.interaction;return $.interaction=I,$.interactable=I.interactable,$.element=I.element,$.rect||($.rect=I.rect),$.edges||($.edges=this.startEdges),$.startOffset=this.startOffset,$}},{key:"startAll",value:function($){for(var I=0,O=this.states;I<O.length;I++){var N=O[I];N.methods.start&&($.state=N,N.methods.start($))}}},{key:"setAll",value:function($){var I=$.phase,O=$.preEnd,N=$.skipModifiers,j=$.rect,H=$.edges;$.coords=gt({},$.pageCoords),$.rect=gt({},j),$.edges=gt({},H);for(var Z=N?this.states.slice(N):this.states,X=Bb($.coords,$.rect),de=0;de<Z.length;de++){var re,we=Z[de],Re=we.options,Xe=gt({},$.coords),Je=null;(re=we.methods)!=null&&re.set&&this.shouldDo(Re,O,I)&&($.state=we,Je=we.methods.set($),ya($.edges,$.rect,{x:$.coords.x-Xe.x,y:$.coords.y-Xe.y})),X.eventProps.push(Je)}gt(this.edges,$.edges),X.delta.x=$.coords.x-$.pageCoords.x,X.delta.y=$.coords.y-$.pageCoords.y,X.rectDelta.left=$.rect.left-j.left,X.rectDelta.right=$.rect.right-j.right,X.rectDelta.top=$.rect.top-j.top,X.rectDelta.bottom=$.rect.bottom-j.bottom;var tt=this.result.coords,ht=this.result.rect;if(tt&&ht){var ct=X.rect.left!==ht.left||X.rect.right!==ht.right||X.rect.top!==ht.top||X.rect.bottom!==ht.bottom;X.changed=ct||tt.x!==X.coords.x||tt.y!==X.coords.y}return X}},{key:"applyToInteraction",value:function($){var I=this.interaction,O=$.phase,N=I.coords.cur,j=I.coords.start,H=this.result,Z=this.startDelta,X=H.delta;O==="start"&&gt(this.startDelta,H.delta);for(var de=0,re=[[j,Z],[N,X]];de<re.length;de++){var we=re[de],Re=we[0],Xe=we[1];Re.page.x+=Xe.x,Re.page.y+=Xe.y,Re.client.x+=Xe.x,Re.client.y+=Xe.y}var Je=this.result.rectDelta,tt=$.rect||I.rect;tt.left+=Je.left,tt.right+=Je.right,tt.top+=Je.top,tt.bottom+=Je.bottom,tt.width=tt.right-tt.left,tt.height=tt.bottom-tt.top}},{key:"setAndApply",value:function($){var I=this.interaction,O=$.phase,N=$.preEnd,j=$.skipModifiers,H=this.setAll(this.fillArg({preEnd:N,phase:O,pageCoords:$.modifiedCoords||I.coords.cur.page}));if(this.result=H,!H.changed&&(!j||j<this.states.length)&&I.interacting())return!1;if($.modifiedCoords){var Z=I.coords.cur.page,X={x:$.modifiedCoords.x-Z.x,y:$.modifiedCoords.y-Z.y};H.coords.x+=X.x,H.coords.y+=X.y,H.delta.x+=X.x,H.delta.y+=X.y}this.applyToInteraction($)}},{key:"beforeEnd",value:function($){var I=$.interaction,O=$.event,N=this.states;if(N&&N.length){for(var j=!1,H=0;H<N.length;H++){var Z=N[H];$.state=Z;var X=Z.options,de=Z.methods,re=de.beforeEnd&&de.beforeEnd($);if(re)return this.endResult=re,!1;j=j||!j&&this.shouldDo(X,!0,$.phase,!0)}j&&I.move({event:O,preEnd:!0})}}},{key:"stop",value:function($){var I=$.interaction;if(this.states&&this.states.length){var O=gt({states:this.states,interactable:I.interactable,element:I.element,rect:null},$);this.fillArg(O);for(var N=0,j=this.states;N<j.length;N++){var H=j[N];O.state=H,H.methods.stop&&H.methods.stop(O)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function($){this.states=[];for(var I=0;I<$.length;I++){var O=$[I],N=O.options,j=O.methods,H=O.name;this.states.push({options:N,methods:j,index:I,name:H})}return this.states}},{key:"restoreInteractionCoords",value:function($){var I=$.interaction,O=I.coords,N=I.rect,j=I.modification;if(j.result){for(var H=j.startDelta,Z=j.result,X=Z.delta,de=Z.rectDelta,re=0,we=[[O.start,H],[O.cur,X]];re<we.length;re++){var Re=we[re],Xe=Re[0],Je=Re[1];Xe.page.x-=Je.x,Xe.page.y-=Je.y,Xe.client.x-=Je.x,Xe.client.y-=Je.y}N.left-=de.left,N.right-=de.right,N.top-=de.top,N.bottom-=de.bottom}}},{key:"shouldDo",value:function($,I,O,N){return!(!$||$.enabled===!1||N&&!$.endOnly||$.endOnly&&!I||O==="start"&&!$.setStart)}},{key:"copyFrom",value:function($){this.startOffset=$.startOffset,this.startDelta=$.startDelta,this.startEdges=$.startEdges,this.edges=$.edges,this.states=$.states.map(function(I){return ki(I)}),this.result=Bb(gt({},$.result.coords),gt({},$.result.rect))}},{key:"destroy",value:function(){for(var $ in this)this[$]=null}}]),T}();function Bb(T,$){return{rect:$,coords:T,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Ec(T,$){var I=T.defaults,O={start:T.start,set:T.set,beforeEnd:T.beforeEnd,stop:T.stop},N=function(j){var H=j||{};for(var Z in H.enabled=H.enabled!==!1,I)Z in H||(H[Z]=I[Z]);var X={options:H,methods:O,name:$,enable:function(){return H.enabled=!0,X},disable:function(){return H.enabled=!1,X}};return X};return $&&typeof $=="string"&&(N._defaults=I,N._methods=O),N}function Cc(T){var $=T.iEvent,I=T.interaction.modification.result;I&&($.modifiers=I.eventProps)}var xP={id:"modifiers/base",before:["actions"],install:function(T){T.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(T){var $=T.interaction;$.modification=new Vb($)},"interactions:before-action-start":function(T){var $=T.interaction,I=T.interaction.modification;I.start(T,$.coords.start.page),$.edges=I.edges,I.applyToInteraction(T)},"interactions:before-action-move":function(T){var $=T.interaction,I=$.modification,O=I.setAndApply(T);return $.edges=I.edges,O},"interactions:before-action-end":function(T){var $=T.interaction,I=$.modification,O=I.beforeEnd(T);return $.edges=I.startEdges,O},"interactions:action-start":Cc,"interactions:action-move":Cc,"interactions:action-end":Cc,"interactions:after-action-start":function(T){return T.interaction.modification.restoreInteractionCoords(T)},"interactions:after-action-move":function(T){return T.interaction.modification.restoreInteractionCoords(T)},"interactions:stop":function(T){return T.interaction.modification.stop(T)}}},PC=xP,gf={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},LC=function(T){c(I,T);var $=v(I);function I(O,N,j,H,Z,X,de){var re;s(this,I),(re=$.call(this,O)).relatedTarget=null,re.screenX=void 0,re.screenY=void 0,re.button=void 0,re.buttons=void 0,re.ctrlKey=void 0,re.shiftKey=void 0,re.altKey=void 0,re.metaKey=void 0,re.page=void 0,re.client=void 0,re.delta=void 0,re.rect=void 0,re.x0=void 0,re.y0=void 0,re.t0=void 0,re.dt=void 0,re.duration=void 0,re.clientX0=void 0,re.clientY0=void 0,re.velocity=void 0,re.speed=void 0,re.swipe=void 0,re.axes=void 0,re.preEnd=void 0,Z=Z||O.element;var we=O.interactable,Re=(we&&we.options||gf).deltaSource,Xe=of(we,Z,j),Je=H==="start",tt=H==="end",ht=Je?y(re):O.prevEvent,ct=Je?O.coords.start:tt?{page:ht.page,client:ht.client,timeStamp:O.coords.cur.timeStamp}:O.coords.cur;return re.page=gt({},ct.page),re.client=gt({},ct.client),re.rect=gt({},O.rect),re.timeStamp=ct.timeStamp,tt||(re.page.x-=Xe.x,re.page.y-=Xe.y,re.client.x-=Xe.x,re.client.y-=Xe.y),re.ctrlKey=N.ctrlKey,re.altKey=N.altKey,re.shiftKey=N.shiftKey,re.metaKey=N.metaKey,re.button=N.button,re.buttons=N.buttons,re.target=Z,re.currentTarget=Z,re.preEnd=X,re.type=de||j+(H||""),re.interactable=we,re.t0=Je?O.pointers[O.pointers.length-1].downTime:ht.t0,re.x0=O.coords.start.page.x-Xe.x,re.y0=O.coords.start.page.y-Xe.y,re.clientX0=O.coords.start.client.x-Xe.x,re.clientY0=O.coords.start.client.y-Xe.y,re.delta=Je||tt?{x:0,y:0}:{x:re[Re].x-ht[Re].x,y:re[Re].y-ht[Re].y},re.dt=O.coords.delta.timeStamp,re.duration=re.timeStamp-re.t0,re.velocity=gt({},O.coords.velocity[Re]),re.speed=af(re.velocity.x,re.velocity.y),re.swipe=tt||H==="inertiastart"?re.getSwipe():null,re}return a(I,[{key:"getSwipe",value:function(){var O=this._interaction;if(O.prevEvent.speed<600||this.timeStamp-O.prevEvent.timeStamp>150)return null;var N=180*Math.atan2(O.prevEvent.velocityY,O.prevEvent.velocityX)/Math.PI;N<0&&(N+=360);var j=112.5<=N&&N<247.5,H=202.5<=N&&N<337.5;return{up:H,down:!H&&22.5<=N&&N<157.5,left:j,right:!j&&(292.5<=N||N<67.5),angle:N,speed:O.prevEvent.speed,velocity:{x:O.prevEvent.velocityX,y:O.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),I}(Wa);Object.defineProperties(LC.prototype,{pageX:{get:function(){return this.page.x},set:function(T){this.page.x=T}},pageY:{get:function(){return this.page.y},set:function(T){this.page.y=T}},clientX:{get:function(){return this.client.x},set:function(T){this.client.x=T}},clientY:{get:function(){return this.client.y},set:function(T){this.client.y=T}},dx:{get:function(){return this.delta.x},set:function(T){this.delta.x=T}},dy:{get:function(){return this.delta.y},set:function(T){this.delta.y=T}},velocityX:{get:function(){return this.velocity.x},set:function(T){this.velocity.x=T}},velocityY:{get:function(){return this.velocity.y},set:function(T){this.velocity.y=T}}});var SP=a(function T($,I,O,N,j){s(this,T),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=$,this.pointer=I,this.event=O,this.downTime=N,this.downTarget=j}),$P=function(T){return T.interactable="",T.element="",T.prepared="",T.pointerIsDown="",T.pointerWasMoved="",T._proxy="",T}({}),U1=function(T){return T.start="",T.move="",T.end="",T.stop="",T.interacting="",T}({}),fj=0,mj=function(){function T($){var I=this,O=$.pointerType,N=$.scopeFire;s(this,T),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Xd(function(re){this.move(re)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=fj++,this._scopeFire=N,this.pointerType=O;var j=this;this._proxy={};var H=function(re){Object.defineProperty(I._proxy,re,{get:function(){return j[re]}})};for(var Z in $P)H(Z);var X=function(re){Object.defineProperty(I._proxy,re,{value:function(){return j[re].apply(j,arguments)}})};for(var de in U1)X(de);this._scopeFire("interactions:new",{interaction:this})}return a(T,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function($,I,O){var N=this.updatePointer($,I,O,!0),j=this.pointers[N];this._scopeFire("interactions:down",{pointer:$,event:I,eventTarget:O,pointerIndex:N,pointerInfo:j,type:"down",interaction:this})}},{key:"start",value:function($,I,O){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<($.name==="gesture"?2:1)||!I.options[$.name].enabled)&&(ba(this.prepared,$),this.interactable=I,this.element=O,this.rect=I.getRect(O),this.edges=this.prepared.edges?gt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function($,I,O){this.simulation||this.modification&&this.modification.endResult||this.updatePointer($,I,O,!1);var N,j,H=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(N=this.coords.cur.client.x-this.coords.start.client.x,j=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=af(N,j)>this.pointerMoveTolerance);var Z,X,de,re=this.getPointerIndex($),we={pointer:$,pointerIndex:re,pointerInfo:this.pointers[re],event:I,type:"move",eventTarget:O,dx:N,dy:j,duplicate:H,interaction:this};H||(Z=this.coords.velocity,X=this.coords.delta,de=Math.max(X.timeStamp/1e3,.001),Z.page.x=X.page.x/de,Z.page.y=X.page.y/de,Z.client.x=X.client.x/de,Z.client.y=X.client.y/de,Z.timeStamp=de),this._scopeFire("interactions:move",we),H||this.simulation||(this.interacting()&&(we.type=null,this.move(we)),this.pointerWasMoved&&js(this.coords.prev,this.coords.cur))}},{key:"move",value:function($){$&&$.event||R1(this.coords.delta),($=gt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},$||{})).phase="move",this._doPhase($)}},{key:"pointerUp",value:function($,I,O,N){var j=this.getPointerIndex($);j===-1&&(j=this.updatePointer($,I,O,!1));var H=/cancel$/i.test(I.type)?"cancel":"up";this._scopeFire("interactions:".concat(H),{pointer:$,pointerIndex:j,pointerInfo:this.pointers[j],event:I,eventTarget:O,type:H,curEventTarget:N,interaction:this}),this.simulation||this.end(I),this.removePointer($,I)}},{key:"documentBlur",value:function($){this.end($),this._scopeFire("interactions:blur",{event:$,type:"blur",interaction:this})}},{key:"end",value:function($){var I;this._ending=!0,$=$||this._latestPointer.event,this.interacting()&&(I=this._doPhase({event:$,interaction:this,phase:"end"})),this._ending=!1,I===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function($){var I=Al($);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:df(this.pointers,function(O){return O.id===I})}},{key:"getPointerInfo",value:function($){return this.pointers[this.getPointerIndex($)]}},{key:"updatePointer",value:function($,I,O,N){var j,H,Z,X=Al($),de=this.getPointerIndex($),re=this.pointers[de];return N=N!==!1&&(N||/(down|start)$/i.test(I.type)),re?re.pointer=$:(re=new SP(X,$,I,null,null),de=this.pointers.length,this.pointers.push(re)),oo(this.coords.cur,this.pointers.map(function(we){return we.pointer}),this._now()),j=this.coords.delta,H=this.coords.prev,Z=this.coords.cur,j.page.x=Z.page.x-H.page.x,j.page.y=Z.page.y-H.page.y,j.client.x=Z.client.x-H.client.x,j.client.y=Z.client.y-H.client.y,j.timeStamp=Z.timeStamp-H.timeStamp,N&&(this.pointerIsDown=!0,re.downTime=this.coords.cur.timeStamp,re.downTarget=O,Wd(this.downPointer,$),this.interacting()||(js(this.coords.start,this.coords.cur),js(this.coords.prev,this.coords.cur),this.downEvent=I,this.pointerWasMoved=!1)),this._updateLatestPointer($,I,O),this._scopeFire("interactions:update-pointer",{pointer:$,event:I,eventTarget:O,down:N,pointerInfo:re,pointerIndex:de,interaction:this}),de}},{key:"removePointer",value:function($,I){var O=this.getPointerIndex($);if(O!==-1){var N=this.pointers[O];this._scopeFire("interactions:remove-pointer",{pointer:$,event:I,eventTarget:null,pointerIndex:O,pointerInfo:N,interaction:this}),this.pointers.splice(O,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function($,I,O){this._latestPointer.pointer=$,this._latestPointer.event=I,this._latestPointer.eventTarget=O}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function($,I,O,N){return new LC(this,$,this.prepared.name,I,this.element,O,N)}},{key:"_fireEvent",value:function($){var I;(I=this.interactable)==null||I.fire($),(!this.prevEvent||$.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=$)}},{key:"_doPhase",value:function($){var I=$.event,O=$.phase,N=$.preEnd,j=$.type,H=this.rect;if(H&&O==="move"&&(ya(this.edges,H,this.coords.delta[this.interactable.options.deltaSource]),H.width=H.right-H.left,H.height=H.bottom-H.top),this._scopeFire("interactions:before-action-".concat(O),$)===!1)return!1;var Z=$.iEvent=this._createPreparedEvent(I,O,N,j);return this._scopeFire("interactions:action-".concat(O),$),O==="start"&&(this.prevEvent=Z),this._fireEvent(Z),this._scopeFire("interactions:after-action-".concat(O),$),!0}},{key:"_now",value:function(){return Date.now()}}]),T}();function Gb(T){j1(T.interaction)}function j1(T){if(!function(I){return!(!I.offset.pending.x&&!I.offset.pending.y)}(T))return!1;var $=T.offset.pending;return Qd(T.coords.cur,$),Qd(T.coords.delta,$),ya(T.edges,T.rect,$),$.x=0,$.y=0,!0}function RC(T){var $=T.x,I=T.y;this.offset.pending.x+=$,this.offset.pending.y+=I,this.offset.total.x+=$,this.offset.total.y+=I}function Qd(T,$){var I=T.page,O=T.client,N=$.x,j=$.y;I.x+=N,I.y+=j,O.x+=N,O.y+=j}U1.offsetBy="";var zy={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(T){T.Interaction.prototype.offsetBy=RC},listeners:{"interactions:new":function(T){T.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(T){return function($){$.pointerIsDown&&(Qd($.coords.cur,$.offset.total),$.offset.pending.x=0,$.offset.pending.y=0)}(T.interaction)},"interactions:before-action-start":Gb,"interactions:before-action-move":Gb,"interactions:before-action-end":function(T){var $=T.interaction;if(j1($))return $.move({offset:!0}),$.end(),!1},"interactions:stop":function(T){var $=T.interaction;$.offset.total.x=0,$.offset.total.y=0,$.offset.pending.x=0,$.offset.pending.y=0}}},DC=zy,NC=function(){function T($){s(this,T),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=$}return a(T,[{key:"start",value:function($){var I=this.interaction,O=Hb(I);if(!O||!O.enabled)return!1;var N=I.coords.velocity.client,j=af(N.x,N.y),H=this.modification||(this.modification=new Vb(I));if(H.copyFrom(I.modification),this.t0=I._now(),this.allowResume=O.allowResume,this.v0=j,this.currentOffset={x:0,y:0},this.startCoords=I.coords.cur.page,this.modifierArg=H.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-I.coords.cur.timeStamp<50&&j>O.minSpeed&&j>O.endSpeed)this.startInertia();else{if(H.result=H.setAll(this.modifierArg),!H.result.changed)return!1;this.startSmoothEnd()}return I.modification.result.rect=null,I.offsetBy(this.targetOffset),I._doPhase({interaction:I,event:$,phase:"inertiastart"}),I.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),I.modification.result.rect=null,this.active=!0,I.simulation=this,!0}},{key:"startInertia",value:function(){var $=this,I=this.interaction.coords.velocity.client,O=Hb(this.interaction),N=O.resistance,j=-Math.log(O.endSpeed/this.v0)/N;this.targetOffset={x:(I.x-j)/N,y:(I.y-j)/N},this.te=j,this.lambda_v0=N/this.v0,this.one_ve_v0=1-O.endSpeed/this.v0;var H=this.modification,Z=this.modifierArg;Z.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},H.result=H.setAll(Z),H.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+H.result.delta.x,y:this.targetOffset.y+H.result.delta.y}),this.onNextFrame(function(){return $.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var $=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return $.smoothEndTick()})}},{key:"onNextFrame",value:function($){var I=this;this.timeout=Gs.request(function(){I.active&&$()})}},{key:"inertiaTick",value:function(){var $,I,O,N,j,H,Z,X=this,de=this.interaction,re=Hb(de).resistance,we=(de._now()-this.t0)/1e3;if(we<this.te){var Re,Xe=1-(Math.exp(-re*we)-this.lambda_v0)/this.one_ve_v0;this.isModified?($=0,I=0,O=this.targetOffset.x,N=this.targetOffset.y,j=this.modifiedOffset.x,H=this.modifiedOffset.y,Re={x:Ic(Z=Xe,$,O,j),y:Ic(Z,I,N,H)}):Re={x:this.targetOffset.x*Xe,y:this.targetOffset.y*Xe};var Je={x:Re.x-this.currentOffset.x,y:Re.y-this.currentOffset.y};this.currentOffset.x+=Je.x,this.currentOffset.y+=Je.y,de.offsetBy(Je),de.move(),this.onNextFrame(function(){return X.inertiaTick()})}else de.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var $=this,I=this.interaction,O=I._now()-this.t0,N=Hb(I).smoothEndDuration;if(O<N){var j={x:V1(O,0,this.targetOffset.x,N),y:V1(O,0,this.targetOffset.y,N)},H={x:j.x-this.currentOffset.x,y:j.y-this.currentOffset.y};this.currentOffset.x+=H.x,this.currentOffset.y+=H.y,I.offsetBy(H),I.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return $.smoothEndTick()})}else I.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function($){var I=$.pointer,O=$.event,N=$.eventTarget,j=this.interaction;j.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),j.updatePointer(I,O,N,!0),j._doPhase({interaction:j,event:O,phase:"resume"}),js(j.coords.prev,j.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Gs.cancel(this.timeout)}}]),T}();function Hb(T){var $=T.interactable,I=T.prepared;return $&&$.options&&I.name&&$.options[I.name].inertia}var qb={id:"inertia",before:["modifiers","actions"],install:function(T){var $=T.defaults;T.usePlugin(DC),T.usePlugin(PC),T.actions.phases.inertiastart=!0,T.actions.phases.resume=!0,$.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(T){var $=T.interaction;$.inertia=new NC($)},"interactions:before-action-end":function(T){var $=T.interaction,I=T.event;return(!$._interacting||$.simulation||!$.inertia.start(I))&&null},"interactions:down":function(T){var $=T.interaction,I=T.eventTarget,O=$.inertia;if(O.active)for(var N=I;z.element(N);){if(N===$.element){O.resume(T);break}N=Be(N)}},"interactions:stop":function(T){var $=T.interaction.inertia;$.active&&$.stop()},"interactions:before-action-resume":function(T){var $=T.interaction.modification;$.stop(T),$.start(T,T.interaction.coords.cur.page),$.applyToInteraction(T)},"interactions:before-action-inertiastart":function(T){return T.interaction.modification.setAndApply(T)},"interactions:action-resume":Cc,"interactions:action-inertiastart":Cc,"interactions:after-action-inertiastart":function(T){return T.interaction.modification.restoreInteractionCoords(T)},"interactions:after-action-resume":function(T){return T.interaction.modification.restoreInteractionCoords(T)}}};function Ic(T,$,I,O){var N=1-T;return N*N*$+2*N*T*I+T*T*O}function V1(T,$,I,O){return-I*(T/=O)*(T-2)+$}var Wb=qb;function Ou(T,$){for(var I=0;I<$.length;I++){var O=$[I];if(T.immediatePropagationStopped)break;O(T)}}var B1=function(){function T($){s(this,T),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=gt({},$||{})}return a(T,[{key:"fire",value:function($){var I,O=this.global;(I=this.types[$.type])&&Ou($,I),!$.propagationStopped&&O&&(I=O[$.type])&&Ou($,I)}},{key:"on",value:function($,I){var O=Cu($,I);for($ in O)this.types[$]=uf(this.types[$]||[],O[$])}},{key:"off",value:function($,I){var O=Cu($,I);for($ in O){var N=this.types[$];if(N&&N.length)for(var j=0,H=O[$];j<H.length;j++){var Z=H[j],X=N.indexOf(Z);X!==-1&&N.splice(X,1)}}}},{key:"getRect",value:function($){return null}}]),T}(),G1=function(){function T($){s(this,T),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=$,Wd(this,$)}return a(T,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),T}();function Fy(T){return z.object(T)?{capture:!!T.capture,passive:!!T.passive}:{capture:!!T,passive:!1}}function vf(T,$){return T===$||(typeof T=="boolean"?!!$.capture===T&&!$.passive:!!T.capture==!!$.capture&&!!T.passive==!!$.passive)}var H1={id:"events",install:function(T){var $,I=[],O={},N=[],j={add:H,remove:Z,addDelegate:function(re,we,Re,Xe,Je){var tt=Fy(Je);if(!O[Re]){O[Re]=[];for(var ht=0;ht<N.length;ht++){var ct=N[ht];H(ct,Re,X),H(ct,Re,de,!0)}}var Mt=O[Re],oi=Zd(Mt,function(bi){return bi.selector===re&&bi.context===we});oi||(oi={selector:re,context:we,listeners:[]},Mt.push(oi)),oi.listeners.push({func:Xe,options:tt})},removeDelegate:function(re,we,Re,Xe,Je){var tt,ht=Fy(Je),ct=O[Re],Mt=!1;if(ct)for(tt=ct.length-1;tt>=0;tt--){var oi=ct[tt];if(oi.selector===re&&oi.context===we){for(var bi=oi.listeners,Ft=bi.length-1;Ft>=0;Ft--){var Qt=bi[Ft];if(Qt.func===Xe&&vf(Qt.options,ht)){bi.splice(Ft,1),bi.length||(ct.splice(tt,1),Z(we,Re,X),Z(we,Re,de,!0)),Mt=!0;break}}if(Mt)break}}},delegateListener:X,delegateUseCapture:de,delegatedEvents:O,documents:N,targets:I,supportsOptions:!1,supportsPassive:!1};function H(re,we,Re,Xe){if(re.addEventListener){var Je=Fy(Xe),tt=Zd(I,function(ht){return ht.eventTarget===re});tt||(tt={eventTarget:re,events:{}},I.push(tt)),tt.events[we]||(tt.events[we]=[]),Zd(tt.events[we],function(ht){return ht.func===Re&&vf(ht.options,Je)})||(re.addEventListener(we,Re,j.supportsOptions?Je:Je.capture),tt.events[we].push({func:Re,options:Je}))}}function Z(re,we,Re,Xe){if(re.addEventListener&&re.removeEventListener){var Je=df(I,function(Ts){return Ts.eventTarget===re}),tt=I[Je];if(tt&&tt.events)if(we!=="all"){var ht=!1,ct=tt.events[we];if(ct){if(Re==="all"){for(var Mt=ct.length-1;Mt>=0;Mt--){var oi=ct[Mt];Z(re,we,oi.func,oi.options)}return}for(var bi=Fy(Xe),Ft=0;Ft<ct.length;Ft++){var Qt=ct[Ft];if(Qt.func===Re&&vf(Qt.options,bi)){re.removeEventListener(we,Re,j.supportsOptions?bi:bi.capture),ct.splice(Ft,1),ct.length===0&&(delete tt.events[we],ht=!0);break}}}ht&&!Object.keys(tt.events).length&&I.splice(Je,1)}else for(we in tt.events)tt.events.hasOwnProperty(we)&&Z(re,we,"all")}}function X(re,we){for(var Re=Fy(we),Xe=new G1(re),Je=O[re.type],tt=cf(re)[0],ht=tt;z.element(ht);){for(var ct=0;ct<Je.length;ct++){var Mt=Je[ct],oi=Mt.selector,bi=Mt.context;if(se(ht,oi)&&be(bi,tt)&&be(bi,ht)){var Ft=Mt.listeners;Xe.currentTarget=ht;for(var Qt=0;Qt<Ft.length;Qt++){var Ts=Ft[Qt];vf(Ts.options,Re)&&Ts.func(Xe)}}}ht=Be(ht)}}function de(re){return X(re,!0)}return($=T.document)==null||$.createElement("div").addEventListener("test",null,{get capture(){return j.supportsOptions=!0},get passive(){return j.supportsPassive=!0}}),T.events=j,j}},q1={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(T){for(var $=0,I=q1.methodOrder;$<I.length;$++){var O=I[$],N=q1[O](T);if(N)return N}return null},simulationResume:function(T){var $=T.pointerType,I=T.eventType,O=T.eventTarget,N=T.scope;if(!/down|start/i.test(I))return null;for(var j=0,H=N.interactions.list;j<H.length;j++){var Z=H[j],X=O;if(Z.simulation&&Z.simulation.allowResume&&Z.pointerType===$)for(;X;){if(X===Z.element)return Z;X=Be(X)}}return null},mouseOrPen:function(T){var $,I=T.pointerId,O=T.pointerType,N=T.eventType,j=T.scope;if(O!=="mouse"&&O!=="pen")return null;for(var H=0,Z=j.interactions.list;H<Z.length;H++){var X=Z[H];if(X.pointerType===O){if(X.simulation&&!lo(X,I))continue;if(X.interacting())return X;$||($=X)}}if($)return $;for(var de=0,re=j.interactions.list;de<re.length;de++){var we=re[de];if(!(we.pointerType!==O||/down/i.test(N)&&we.simulation))return we}return null},hasPointer:function(T){for(var $=T.pointerId,I=0,O=T.scope.interactions.list;I<O.length;I++){var N=O[I];if(lo(N,$))return N}return null},idle:function(T){for(var $=T.pointerType,I=0,O=T.scope.interactions.list;I<O.length;I++){var N=O[I];if(N.pointers.length===1){var j=N.interactable;if(j&&(!j.options.gesture||!j.options.gesture.enabled))continue}else if(N.pointers.length>=2)continue;if(!N.interacting()&&$===N.pointerType)return N}return null}};function lo(T,$){return T.pointers.some(function(I){return I.id===$})}var bf=q1,Uy=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function jy(T,$){return function(I){var O=$.interactions.list,N=lf(I),j=cf(I),H=j[0],Z=j[1],X=[];if(/^touch/.test(I.type)){$.prevTouchTime=$.now();for(var de=0,re=I.changedTouches;de<re.length;de++){var we=re[de],Re={pointer:we,pointerId:Al(we),pointerType:N,eventType:I.type,eventTarget:H,curEventTarget:Z,scope:$},Xe=TP(Re);X.push([Re.pointer,Re.eventTarget,Re.curEventTarget,Xe])}}else{var Je=!1;if(!le.supportsPointerEvent&&/mouse/.test(I.type)){for(var tt=0;tt<O.length&&!Je;tt++)Je=O[tt].pointerType!=="mouse"&&O[tt].pointerIsDown;Je=Je||$.now()-$.prevTouchTime<500||I.timeStamp===0}if(!Je){var ht={pointer:I,pointerId:Al(I),pointerType:N,eventType:I.type,curEventTarget:Z,eventTarget:H,scope:$},ct=TP(ht);X.push([ht.pointer,ht.eventTarget,ht.curEventTarget,ct])}}for(var Mt=0;Mt<X.length;Mt++){var oi=X[Mt],bi=oi[0],Ft=oi[1],Qt=oi[2];oi[3][T](bi,I,Ft,Qt)}}}function TP(T){var $=T.pointerType,I=T.scope,O={interaction:bf.search(T),searchDetails:T};return I.fire("interactions:find",O),O.interaction||I.interactions.new({pointerType:$})}function Jb(T,$){var I=T.doc,O=T.scope,N=T.options,j=O.interactions.docEvents,H=O.events,Z=H[$];for(var X in O.browser.isIOS&&!N.events&&(N.events={passive:!1}),H.delegatedEvents)Z(I,X,H.delegateListener),Z(I,X,H.delegateUseCapture,!0);for(var de=N&&N.events,re=0;re<j.length;re++){var we=j[re];Z(I,we.type,we.listener,de)}}var zC={id:"core/interactions",install:function(T){for(var $={},I=0;I<Uy.length;I++){var O=Uy[I];$[O]=jy(O,T)}var N,j=le.pEventTypes;function H(){for(var Z=0,X=T.interactions.list;Z<X.length;Z++){var de=X[Z];if(de.pointerIsDown&&de.pointerType==="touch"&&!de._interacting)for(var re=function(){var Xe=Re[we];T.documents.some(function(Je){return be(Je.doc,Xe.downTarget)})||de.removePointer(Xe.pointer,Xe.event)},we=0,Re=de.pointers;we<Re.length;we++)re()}}(N=ae.PointerEvent?[{type:j.down,listener:H},{type:j.down,listener:$.pointerDown},{type:j.move,listener:$.pointerMove},{type:j.up,listener:$.pointerUp},{type:j.cancel,listener:$.pointerUp}]:[{type:"mousedown",listener:$.pointerDown},{type:"mousemove",listener:$.pointerMove},{type:"mouseup",listener:$.pointerUp},{type:"touchstart",listener:H},{type:"touchstart",listener:$.pointerDown},{type:"touchmove",listener:$.pointerMove},{type:"touchend",listener:$.pointerUp},{type:"touchcancel",listener:$.pointerUp}]).push({type:"blur",listener:function(Z){for(var X=0,de=T.interactions.list;X<de.length;X++)de[X].documentBlur(Z)}}),T.prevTouchTime=0,T.Interaction=function(Z){c(de,Z);var X=v(de);function de(){return s(this,de),X.apply(this,arguments)}return a(de,[{key:"pointerMoveTolerance",get:function(){return T.interactions.pointerMoveTolerance},set:function(re){T.interactions.pointerMoveTolerance=re}},{key:"_now",value:function(){return T.now()}}]),de}(mj),T.interactions={list:[],new:function(Z){Z.scopeFire=function(de,re){return T.fire(de,re)};var X=new T.Interaction(Z);return T.interactions.list.push(X),X},listeners:$,docEvents:N,pointerMoveTolerance:1},T.usePlugin(Qi)},listeners:{"scope:add-document":function(T){return Jb(T,"add")},"scope:remove-document":function(T){return Jb(T,"remove")},"interactable:unset":function(T,$){for(var I=T.interactable,O=$.interactions.list.length-1;O>=0;O--){var N=$.interactions.list[O];N.interactable===I&&(N.stop(),$.fire("interactions:destroy",{interaction:N}),N.destroy(),$.interactions.list.length>2&&$.interactions.list.splice(O,1))}}},onDocSignal:Jb,doOnInteractions:jy,methodNames:Uy},Zb=zC,Ol=function(T){return T[T.On=0]="On",T[T.Off=1]="Off",T}(Ol||{}),EP=function(){function T($,I,O,N){s(this,T),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new B1,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=I.actions,this.target=$,this._context=I.context||O,this._win=R($i($)?this._context:$),this._doc=this._win.document,this._scopeEvents=N,this.set(I)}return a(T,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function($,I){return z.func(I.onstart)&&this.on("".concat($,"start"),I.onstart),z.func(I.onmove)&&this.on("".concat($,"move"),I.onmove),z.func(I.onend)&&this.on("".concat($,"end"),I.onend),z.func(I.oninertiastart)&&this.on("".concat($,"inertiastart"),I.oninertiastart),this}},{key:"updatePerActionListeners",value:function($,I,O){var N,j=this,H=(N=this._actions.map[$])==null?void 0:N.filterEventType,Z=function(X){return(H==null||H(X))&&Ar(X,j._actions)};(z.array(I)||z.object(I))&&this._onOff(Ol.Off,$,I,void 0,Z),(z.array(O)||z.object(O))&&this._onOff(Ol.On,$,O,void 0,Z)}},{key:"setPerAction",value:function($,I){var O=this._defaults;for(var N in I){var j=N,H=this.options[$],Z=I[j];j==="listeners"&&this.updatePerActionListeners($,H.listeners,Z),z.array(Z)?H[j]=Jd(Z):z.plainObject(Z)?(H[j]=gt(H[j]||{},ki(Z)),z.object(O.perAction[j])&&"enabled"in O.perAction[j]&&(H[j].enabled=Z.enabled!==!1)):z.bool(Z)&&z.object(O.perAction[j])?H[j].enabled=Z:H[j]=Z}}},{key:"getRect",value:function($){return $=$||(z.element(this.target)?this.target:null),z.string(this.target)&&($=$||this._context.querySelector(this.target)),zt($)}},{key:"rectChecker",value:function($){var I=this;return z.func($)?(this.getRect=function(O){var N=gt({},$.apply(I,O));return"width"in N||(N.width=N.right-N.left,N.height=N.bottom-N.top),N},this):$===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function($,I){if($i(I)||z.object(I)){for(var O in this.options[$]=I,this._actions.map)this.options[O][$]=I;return this}return this.options[$]}},{key:"origin",value:function($){return this._backCompatOption("origin",$)}},{key:"deltaSource",value:function($){return $==="page"||$==="client"?(this.options.deltaSource=$,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var $=this.target;return z.string($)?Array.from(this._context.querySelectorAll($)):z.func($)&&$.getAllElements?$.getAllElements():z.element($)?[$]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function($){return this._context===$.ownerDocument||be(this._context,$)}},{key:"testIgnoreAllow",value:function($,I,O){return!this.testIgnore($.ignoreFrom,I,O)&&this.testAllow($.allowFrom,I,O)}},{key:"testAllow",value:function($,I,O){return!$||!!z.element(O)&&(z.string($)?it(O,$,I):!!z.element($)&&be($,O))}},{key:"testIgnore",value:function($,I,O){return!(!$||!z.element(O))&&(z.string($)?it(O,$,I):!!z.element($)&&be($,O))}},{key:"fire",value:function($){return this.events.fire($),this}},{key:"_onOff",value:function($,I,O,N,j){z.object(I)&&!z.array(I)&&(N=O,O=null);var H=Cu(I,O,j);for(var Z in H){Z==="wheel"&&(Z=le.wheelEvent);for(var X=0,de=H[Z];X<de.length;X++){var re=de[X];Ar(Z,this._actions)?this.events[$===Ol.On?"on":"off"](Z,re):z.string(this.target)?this._scopeEvents[$===Ol.On?"addDelegate":"removeDelegate"](this.target,this._context,Z,re,N):this._scopeEvents[$===Ol.On?"add":"remove"](this.target,Z,re,N)}}return this}},{key:"on",value:function($,I,O){return this._onOff(Ol.On,$,I,O)}},{key:"off",value:function($,I,O){return this._onOff(Ol.Off,$,I,O)}},{key:"set",value:function($){var I=this._defaults;for(var O in z.object($)||($={}),this.options=ki(I.base),this._actions.methodDict){var N=O,j=this._actions.methodDict[N];this.options[N]={},this.setPerAction(N,gt(gt({},I.perAction),I.actions[N])),this[j]($[N])}for(var H in $)H!=="getRect"?z.func(this[H])&&this[H]($[H]):this.rectChecker($.getRect);return this}},{key:"unset",value:function(){if(z.string(this.target))for(var $ in this._scopeEvents.delegatedEvents)for(var I=this._scopeEvents.delegatedEvents[$],O=I.length-1;O>=0;O--){var N=I[O],j=N.selector,H=N.context,Z=N.listeners;j===this.target&&H===this._context&&I.splice(O,1);for(var X=Z.length-1;X>=0;X--)this._scopeEvents.removeDelegate(this.target,this._context,$,Z[X][0],Z[X][1])}else this._scopeEvents.remove(this.target,"all")}}]),T}(),yj=function(){function T($){var I=this;s(this,T),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=$,$.addListeners({"interactable:unset":function(O){var N=O.interactable,j=N.target,H=z.string(j)?I.selectorMap[j]:j[I.scope.id],Z=df(H,function(X){return X===N});H.splice(Z,1)}})}return a(T,[{key:"new",value:function($,I){I=gt(I||{},{actions:this.scope.actions});var O=new this.scope.Interactable($,I,this.scope.document,this.scope.events);return this.scope.addDocument(O._doc),this.list.push(O),z.string($)?(this.selectorMap[$]||(this.selectorMap[$]=[]),this.selectorMap[$].push(O)):(O.target[this.scope.id]||Object.defineProperty($,this.scope.id,{value:[],configurable:!0}),$[this.scope.id].push(O)),this.scope.fire("interactable:new",{target:$,options:I,interactable:O,win:this.scope._win}),O}},{key:"getExisting",value:function($,I){var O=I&&I.context||this.scope.document,N=z.string($),j=N?this.selectorMap[$]:$[this.scope.id];if(j)return Zd(j,function(H){return H._context===O&&(N||H.inContext($))})}},{key:"forEachMatch",value:function($,I){for(var O=0,N=this.list;O<N.length;O++){var j=N[O],H=void 0;if((z.string(j.target)?z.element($)&&se($,j.target):$===j.target)&&j.inContext($)&&(H=I(j)),H!==void 0)return H}}}]),T}(),gj=function(){function T(){var $=this;s(this,T),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=le,this.defaults=ki(gf),this.Eventable=B1,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(O){var N=function j(H,Z){var X=O.interactables.getExisting(H,Z);return X||((X=O.interactables.new(H,Z)).events.global=j.globalEvents),X};return N.getPointerAverage=ao,N.getTouchBBox=Rb,N.getTouchDistance=Db,N.getTouchAngle=Nb,N.getElementRect=zt,N.getElementClientRect=ri,N.matchesSelector=se,N.closest=Oe,N.globalEvents={},N.version="1.10.27",N.scope=O,N.use=function(j,H){return this.scope.usePlugin(j,H),this},N.isSet=function(j,H){return!!this.scope.interactables.get(j,H&&H.context)},N.on=Xd(function(j,H,Z){if(z.string(j)&&j.search(" ")!==-1&&(j=j.trim().split(/ +/)),z.array(j)){for(var X=0,de=j;X<de.length;X++){var re=de[X];this.on(re,H,Z)}return this}if(z.object(j)){for(var we in j)this.on(we,j[we],H);return this}return Ar(j,this.scope.actions)?this.globalEvents[j]?this.globalEvents[j].push(H):this.globalEvents[j]=[H]:this.scope.events.add(this.scope.document,j,H,{options:Z}),this},"The interact.on() method is being deprecated"),N.off=Xd(function(j,H,Z){if(z.string(j)&&j.search(" ")!==-1&&(j=j.trim().split(/ +/)),z.array(j)){for(var X=0,de=j;X<de.length;X++){var re=de[X];this.off(re,H,Z)}return this}if(z.object(j)){for(var we in j)this.off(we,j[we],H);return this}var Re;return Ar(j,this.scope.actions)?j in this.globalEvents&&(Re=this.globalEvents[j].indexOf(H))!==-1&&this.globalEvents[j].splice(Re,1):this.scope.events.remove(this.scope.document,j,H,Z),this},"The interact.off() method is being deprecated"),N.debug=function(){return this.scope},N.supportsTouch=function(){return le.supportsTouch},N.supportsPointerEvent=function(){return le.supportsPointerEvent},N.stop=function(){for(var j=0,H=this.scope.interactions.list;j<H.length;j++)H[j].stop();return this},N.pointerMoveTolerance=function(j){return z.number(j)?(this.scope.interactions.pointerMoveTolerance=j,this):this.scope.interactions.pointerMoveTolerance},N.addDocument=function(j,H){this.scope.addDocument(j,H)},N.removeDocument=function(j){this.scope.removeDocument(j)},N}(this),this.InteractEvent=LC,this.Interactable=void 0,this.interactables=new yj(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(O){return $.removeDocument(O.target)};var I=this;this.Interactable=function(O){c(j,O);var N=v(j);function j(){return s(this,j),N.apply(this,arguments)}return a(j,[{key:"_defaults",get:function(){return I.defaults}},{key:"set",value:function(H){return w(h(j.prototype),"set",this).call(this,H),I.fire("interactable:set",{options:H,interactable:this}),this}},{key:"unset",value:function(){w(h(j.prototype),"unset",this).call(this);var H=I.interactables.list.indexOf(this);H<0||(I.interactables.list.splice(H,1),I.fire("interactable:unset",{interactable:this}))}}]),j}(EP)}return a(T,[{key:"addListeners",value:function($,I){this.listenerMaps.push({id:I,map:$})}},{key:"fire",value:function($,I){for(var O=0,N=this.listenerMaps;O<N.length;O++){var j=N[O].map[$];if(j&&j(I,this,$)===!1)return!1}}},{key:"init",value:function($){return this.isInitialized?this:function(I,O){return I.isInitialized=!0,z.window(O)&&A(O),ae.init(O),le.init(O),Gs.init(O),I.window=O,I.document=O.document,I.usePlugin(Zb),I.usePlugin(H1),I}(this,$)}},{key:"pluginIsInstalled",value:function($){var I=$.id;return I?!!this._plugins.map[I]:this._plugins.list.indexOf($)!==-1}},{key:"usePlugin",value:function($,I){if(!this.isInitialized)return this;if(this.pluginIsInstalled($))return this;if($.id&&(this._plugins.map[$.id]=$),this._plugins.list.push($),$.install&&$.install(this,I),$.listeners&&$.before){for(var O=0,N=this.listenerMaps.length,j=$.before.reduce(function(Z,X){return Z[X]=!0,Z[CP(X)]=!0,Z},{});O<N;O++){var H=this.listenerMaps[O].id;if(H&&(j[H]||j[CP(H)]))break}this.listenerMaps.splice(O,0,{id:$.id,map:$.listeners})}else $.listeners&&this.listenerMaps.push({id:$.id,map:$.listeners});return this}},{key:"addDocument",value:function($,I){if(this.getDocIndex($)!==-1)return!1;var O=R($);I=I?gt({},I):{},this.documents.push({doc:$,options:I}),this.events.documents.push($),$!==this.document&&this.events.add(O,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:$,window:O,scope:this,options:I})}},{key:"removeDocument",value:function($){var I=this.getDocIndex($),O=R($),N=this.documents[I].options;this.events.remove(O,"unload",this.onWindowUnload),this.documents.splice(I,1),this.events.documents.splice(I,1),this.fire("scope:remove-document",{doc:$,window:O,scope:this,options:N})}},{key:"getDocIndex",value:function($){for(var I=0;I<this.documents.length;I++)if(this.documents[I].doc===$)return I;return-1}},{key:"getDocOptions",value:function($){var I=this.getDocIndex($);return I===-1?null:this.documents[I].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),T}();function CP(T){return T&&T.replace(/\/.*$/,"")}var W1=new gj,co=W1.interactStatic,vj=typeof globalThis<"u"?globalThis:window;W1.init(vj);var bj=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(T){var $=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(O){var N=O[0],j=O[1];return N in T||j in T}),I=function(O,N){for(var j=T.range,H=T.limits,Z=H===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:H,X=T.offset,de=X===void 0?{x:0,y:0}:X,re={range:j,grid:T,x:null,y:null},we=0;we<$.length;we++){var Re=$[we],Xe=Re[0],Je=Re[1],tt=Math.round((O-de.x)/T[Xe]),ht=Math.round((N-de.y)/T[Je]);re[Xe]=Math.max(Z.left,Math.min(Z.right,tt*T[Xe]+de.x)),re[Je]=Math.max(Z.top,Math.min(Z.bottom,ht*T[Je]+de.y))}return re};return I.grid=T,I.coordFields=$,I}}),wj={id:"snappers",install:function(T){var $=T.interactStatic;$.snappers=gt($.snappers||{},bj),$.createSnapGrid=$.snappers.grid}},_j=wj,IP={start:function(T){var $=T.state,I=T.rect,O=T.edges,N=T.pageCoords,j=$.options,H=j.ratio,Z=j.enabled,X=$.options,de=X.equalDelta,re=X.modifiers;H==="preserve"&&(H=I.width/I.height),$.startCoords=gt({},N),$.startRect=gt({},I),$.ratio=H,$.equalDelta=de;var we=$.linkedEdges={top:O.top||O.left&&!O.bottom,left:O.left||O.top&&!O.right,bottom:O.bottom||O.right&&!O.top,right:O.right||O.bottom&&!O.left};if($.xIsPrimaryAxis=!(!O.left&&!O.right),$.equalDelta){var Re=(we.left?1:-1)*(we.top?1:-1);$.edgeSign={x:Re,y:Re}}else $.edgeSign={x:we.left?-1:1,y:we.top?-1:1};if(Z!==!1&&gt(O,we),re!=null&&re.length){var Xe=new Vb(T.interaction);Xe.copyFrom(T.interaction.modification),Xe.prepareStates(re),$.subModification=Xe,Xe.startAll(r({},T))}},set:function(T){var $=T.state,I=T.rect,O=T.coords,N=$.linkedEdges,j=gt({},O),H=$.equalDelta?xj:Sj;if(gt(T.edges,N),H($,$.xIsPrimaryAxis,O,I),!$.subModification)return null;var Z=gt({},I);ya(N,Z,{x:O.x-j.x,y:O.y-j.y});var X=$.subModification.setAll(r(r({},T),{},{rect:Z,edges:N,pageCoords:O,prevCoords:O,prevRect:Z})),de=X.delta;return X.changed&&(H($,Math.abs(de.x)>Math.abs(de.y),X.coords,X.rect),gt(O,X.coords)),X.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function xj(T,$,I){var O=T.startCoords,N=T.edgeSign;$?I.y=O.y+(I.x-O.x)*N.y:I.x=O.x+(I.y-O.y)*N.x}function Sj(T,$,I,O){var N=T.startRect,j=T.startCoords,H=T.ratio,Z=T.edgeSign;if($){var X=O.width/H;I.y=j.y+(X-N.height)*Z.y}else{var de=O.height*H;I.x=j.x+(de-N.width)*Z.x}}var $j=Ec(IP,"aspectRatio"),MP=function(){};MP._defaults={};var Vy=MP;function wf(T,$,I){return z.func(T)?fa(T,$.interactable,$.element,[I.x,I.y,$]):fa(T,$.interactable,$.element)}var J1={start:function(T){var $=T.rect,I=T.startOffset,O=T.state,N=T.interaction,j=T.pageCoords,H=O.options,Z=H.elementRect,X=gt({left:0,top:0,right:0,bottom:0},H.offset||{});if($&&Z){var de=wf(H.restriction,N,j);if(de){var re=de.right-de.left-$.width,we=de.bottom-de.top-$.height;re<0&&(X.left+=re,X.right+=re),we<0&&(X.top+=we,X.bottom+=we)}X.left+=I.left-$.width*Z.left,X.top+=I.top-$.height*Z.top,X.right+=I.right-$.width*(1-Z.right),X.bottom+=I.bottom-$.height*(1-Z.bottom)}O.offset=X},set:function(T){var $=T.coords,I=T.interaction,O=T.state,N=O.options,j=O.offset,H=wf(N.restriction,I,$);if(H){var Z=function(X){return!X||"left"in X&&"top"in X||((X=gt({},X)).left=X.x||0,X.top=X.y||0,X.right=X.right||X.left+X.width,X.bottom=X.bottom||X.top+X.height),X}(H);$.x=Math.max(Math.min(Z.right-j.right,$.x),Z.left+j.left),$.y=Math.max(Math.min(Z.bottom-j.bottom,$.y),Z.top+j.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Tj=Ec(J1,"restrict"),FC={top:1/0,left:1/0,bottom:-1/0,right:-1/0},kP={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function AP(T,$){for(var I=0,O=["top","left","bottom","right"];I<O.length;I++){var N=O[I];N in T||(T[N]=$[N])}return T}var Yb={noInner:FC,noOuter:kP,start:function(T){var $,I=T.interaction,O=T.startOffset,N=T.state,j=N.options;j&&($=kl(wf(j.offset,I,I.coords.start.page))),$=$||{x:0,y:0},N.offset={top:$.y+O.top,left:$.x+O.left,bottom:$.y-O.bottom,right:$.x-O.right}},set:function(T){var $=T.coords,I=T.edges,O=T.interaction,N=T.state,j=N.offset,H=N.options;if(I){var Z=gt({},$),X=wf(H.inner,O,Z)||{},de=wf(H.outer,O,Z)||{};AP(X,FC),AP(de,kP),I.top?$.y=Math.min(Math.max(de.top+j.top,Z.y),X.top+j.top):I.bottom&&($.y=Math.max(Math.min(de.bottom+j.bottom,Z.y),X.bottom+j.bottom)),I.left?$.x=Math.min(Math.max(de.left+j.left,Z.x),X.left+j.left):I.right&&($.x=Math.max(Math.min(de.right+j.right,Z.x),X.right+j.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Ej=Ec(Yb,"restrictEdges"),Cj=gt({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(T){}},J1.defaults),Ij=Ec({start:J1.start,set:J1.set,defaults:Cj},"restrictRect"),Mj={width:-1/0,height:-1/0},kj={width:1/0,height:1/0},Aj=Ec({start:function(T){return Yb.start(T)},set:function(T){var $=T.interaction,I=T.state,O=T.rect,N=T.edges,j=I.options;if(N){var H=ma(wf(j.min,$,T.coords))||Mj,Z=ma(wf(j.max,$,T.coords))||kj;I.options={endOnly:j.endOnly,inner:gt({},Yb.noInner),outer:gt({},Yb.noOuter)},N.top?(I.options.inner.top=O.bottom-H.height,I.options.outer.top=O.bottom-Z.height):N.bottom&&(I.options.inner.bottom=O.top+H.height,I.options.outer.bottom=O.top+Z.height),N.left?(I.options.inner.left=O.right-H.width,I.options.outer.left=O.right-Z.width):N.right&&(I.options.inner.right=O.left+H.width,I.options.outer.right=O.left+Z.width),Yb.set(T),I.options=j}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Xb={start:function(T){var $,I=T.interaction,O=T.interactable,N=T.element,j=T.rect,H=T.state,Z=T.startOffset,X=H.options,de=X.offsetWithOrigin?function(Re){var Xe=Re.interaction.element,Je=kl(fa(Re.state.options.origin,null,null,[Xe])),tt=Je||of(Re.interactable,Xe,Re.interaction.prepared.name);return tt}(T):{x:0,y:0};if(X.offset==="startCoords")$={x:I.coords.start.page.x,y:I.coords.start.page.y};else{var re=fa(X.offset,O,N,[I]);($=kl(re)||{x:0,y:0}).x+=de.x,$.y+=de.y}var we=X.relativePoints;H.offsets=j&&we&&we.length?we.map(function(Re,Xe){return{index:Xe,relativePoint:Re,x:Z.left-j.width*Re.x+$.x,y:Z.top-j.height*Re.y+$.y}}):[{index:0,relativePoint:null,x:$.x,y:$.y}]},set:function(T){var $=T.interaction,I=T.coords,O=T.state,N=O.options,j=O.offsets,H=of($.interactable,$.element,$.prepared.name),Z=gt({},I),X=[];N.offsetWithOrigin||(Z.x-=H.x,Z.y-=H.y);for(var de=0,re=j;de<re.length;de++)for(var we=re[de],Re=Z.x-we.x,Xe=Z.y-we.y,Je=0,tt=N.targets.length;Je<tt;Je++){var ht=N.targets[Je],ct=void 0;(ct=z.func(ht)?ht(Re,Xe,$._proxy,we,Je):ht)&&X.push({x:(z.number(ct.x)?ct.x:Re)+we.x,y:(z.number(ct.y)?ct.y:Xe)+we.y,range:z.number(ct.range)?ct.range:N.range,source:ht,index:Je,offset:we})}for(var Mt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},oi=0;oi<X.length;oi++){var bi=X[oi],Ft=bi.range,Qt=bi.x-Z.x,Ts=bi.y-Z.y,$r=af(Qt,Ts),Kn=$r<=Ft;Ft===1/0&&Mt.inRange&&Mt.range!==1/0&&(Kn=!1),Mt.target&&!(Kn?Mt.inRange&&Ft!==1/0?$r/Ft<Mt.distance/Mt.range:Ft===1/0&&Mt.range!==1/0||$r<Mt.distance:!Mt.inRange&&$r<Mt.distance)||(Mt.target=bi,Mt.distance=$r,Mt.range=Ft,Mt.inRange=Kn,Mt.delta.x=Qt,Mt.delta.y=Ts)}return Mt.inRange&&(I.x=Mt.target.x,I.y=Mt.target.y),O.closest=Mt,Mt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Kb=Ec(Xb,"snap"),Z1={start:function(T){var $=T.state,I=T.edges,O=$.options;if(!I)return null;T.state={options:{targets:null,relativePoints:[{x:I.left?0:1,y:I.top?0:1}],offset:O.offset||"self",origin:{x:0,y:0},range:O.range}},$.targetFields=$.targetFields||[["width","height"],["x","y"]],Xb.start(T),$.offsets=T.state.offsets,T.state=$},set:function(T){var $=T.interaction,I=T.state,O=T.coords,N=I.options,j=I.offsets,H={x:O.x-j[0].x,y:O.y-j[0].y};I.options=gt({},N),I.options.targets=[];for(var Z=0,X=N.targets||[];Z<X.length;Z++){var de=X[Z],re=void 0;if(re=z.func(de)?de(H.x,H.y,$):de){for(var we=0,Re=I.targetFields;we<Re.length;we++){var Xe=Re[we],Je=Xe[0],tt=Xe[1];if(Je in re||tt in re){re.x=re[Je],re.y=re[tt];break}}I.options.targets.push(re)}}var ht=Xb.set(T);return I.options=N,ht},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},OP=Ec(Z1,"snapSize"),Y1={aspectRatio:$j,restrictEdges:Ej,restrict:Tj,restrictRect:Ij,restrictSize:Aj,snapEdges:Ec({start:function(T){var $=T.edges;return $?(T.state.targetFields=T.state.targetFields||[[$.left?"left":"right",$.top?"top":"bottom"]],Z1.start(T)):null},set:Z1.set,defaults:gt(ki(Z1.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Kb,snapSize:OP,spring:Vy,avoid:Vy,transform:Vy,rubberband:Vy},PP={id:"modifiers",install:function(T){var $=T.interactStatic;for(var I in T.usePlugin(PC),T.usePlugin(_j),$.modifiers=Y1,Y1){var O=Y1[I],N=O._defaults,j=O._methods;N._methods=j,T.defaults.perAction[I]=N}}},LP=PP,UC=function(T){c(I,T);var $=v(I);function I(O,N,j,H,Z,X){var de;if(s(this,I),Wd(y(de=$.call(this,Z)),j),j!==N&&Wd(y(de),N),de.timeStamp=X,de.originalEvent=j,de.type=O,de.pointerId=Al(N),de.pointerType=lf(N),de.target=H,de.currentTarget=null,O==="tap"){var re=Z.getPointerIndex(N);de.dt=de.timeStamp-Z.pointers[re].downTime;var we=de.timeStamp-Z.tapTime;de.double=!!Z.prevTap&&Z.prevTap.type!=="doubletap"&&Z.prevTap.target===de.target&&we<500}else O==="doubletap"&&(de.dt=N.timeStamp-Z.tapTime,de.double=!0);return de}return a(I,[{key:"_subtractOrigin",value:function(O){var N=O.x,j=O.y;return this.pageX-=N,this.pageY-=j,this.clientX-=N,this.clientY-=j,this}},{key:"_addOrigin",value:function(O){var N=O.x,j=O.y;return this.pageX+=N,this.pageY+=j,this.clientX+=N,this.clientY+=j,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),I}(Wa),Mc={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(T){T.pointerEvents=Mc,T.defaults.actions.pointerEvents=Mc.defaults,gt(T.actions.phaselessTypes,Mc.types)},listeners:{"interactions:new":function(T){var $=T.interaction;$.prevTap=null,$.tapTime=0},"interactions:update-pointer":function(T){var $=T.down,I=T.pointerInfo;!$&&I.hold||(I.hold={duration:1/0,timeout:null})},"interactions:move":function(T,$){var I=T.interaction,O=T.pointer,N=T.event,j=T.eventTarget;T.duplicate||I.pointerIsDown&&!I.pointerWasMoved||(I.pointerIsDown&&jC(T),eh({interaction:I,pointer:O,event:N,eventTarget:j,type:"move"},$))},"interactions:down":function(T,$){(function(I,O){for(var N=I.interaction,j=I.pointer,H=I.event,Z=I.eventTarget,X=I.pointerIndex,de=N.pointers[X].hold,re=kr(Z),we={interaction:N,pointer:j,event:H,eventTarget:Z,type:"hold",targets:[],path:re,node:null},Re=0;Re<re.length;Re++){var Xe=re[Re];we.node=Xe,O.fire("pointerEvents:collect-targets",we)}if(we.targets.length){for(var Je=1/0,tt=0,ht=we.targets;tt<ht.length;tt++){var ct=ht[tt].eventable.options.holdDuration;ct<Je&&(Je=ct)}de.duration=Je,de.timeout=setTimeout(function(){eh({interaction:N,eventTarget:Z,pointer:j,event:H,type:"hold"},O)},Je)}})(T,$),eh(T,$)},"interactions:up":function(T,$){jC(T),eh(T,$),function(I,O){var N=I.interaction,j=I.pointer,H=I.event,Z=I.eventTarget;N.pointerWasMoved||eh({interaction:N,eventTarget:Z,pointer:j,event:H,type:"tap"},O)}(T,$)},"interactions:cancel":function(T,$){jC(T),eh(T,$)}},PointerEvent:UC,fire:eh,collectEventTargets:RP,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function eh(T,$){var I=T.interaction,O=T.pointer,N=T.event,j=T.eventTarget,H=T.type,Z=T.targets,X=Z===void 0?RP(T,$):Z,de=new UC(H,O,N,j,I,$.now());$.fire("pointerEvents:new",{pointerEvent:de});for(var re={interaction:I,pointer:O,event:N,eventTarget:j,targets:X,type:H,pointerEvent:de},we=0;we<X.length;we++){var Re=X[we];for(var Xe in Re.props||{})de[Xe]=Re.props[Xe];var Je=of(Re.eventable,Re.node);if(de._subtractOrigin(Je),de.eventable=Re.eventable,de.currentTarget=Re.node,Re.eventable.fire(de),de._addOrigin(Je),de.immediatePropagationStopped||de.propagationStopped&&we+1<X.length&&X[we+1].node!==de.currentTarget)break}if($.fire("pointerEvents:fired",re),H==="tap"){var tt=de.double?eh({interaction:I,pointer:O,event:N,eventTarget:j,type:"doubletap"},$):de;I.prevTap=tt,I.tapTime=tt.timeStamp}return de}function RP(T,$){var I=T.interaction,O=T.pointer,N=T.event,j=T.eventTarget,H=T.type,Z=I.getPointerIndex(O),X=I.pointers[Z];if(H==="tap"&&(I.pointerWasMoved||!X||X.downTarget!==j))return[];for(var de=kr(j),re={interaction:I,pointer:O,event:N,eventTarget:j,type:H,path:de,targets:[],node:null},we=0;we<de.length;we++){var Re=de[we];re.node=Re,$.fire("pointerEvents:collect-targets",re)}return H==="hold"&&(re.targets=re.targets.filter(function(Xe){var Je,tt;return Xe.eventable.options.holdDuration===((Je=I.pointers[Z])==null||(tt=Je.hold)==null?void 0:tt.duration)})),re.targets}function jC(T){var $=T.interaction,I=T.pointerIndex,O=$.pointers[I].hold;O&&O.timeout&&(clearTimeout(O.timeout),O.timeout=null)}var DP=Object.freeze({__proto__:null,default:Mc});function NP(T){var $=T.interaction;$.holdIntervalHandle&&(clearInterval($.holdIntervalHandle),$.holdIntervalHandle=null)}var Qb={id:"pointer-events/holdRepeat",install:function(T){T.usePlugin(Mc);var $=T.pointerEvents;$.defaults.holdRepeatInterval=0,$.types.holdrepeat=T.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(T,$){return T["pointerEvents:".concat($)]=NP,T},{"pointerEvents:new":function(T){var $=T.pointerEvent;$.type==="hold"&&($.count=($.count||0)+1)},"pointerEvents:fired":function(T,$){var I=T.interaction,O=T.pointerEvent,N=T.eventTarget,j=T.targets;if(O.type==="hold"&&j.length){var H=j[0].eventable.options.holdRepeatInterval;H<=0||(I.holdIntervalHandle=setTimeout(function(){$.pointerEvents.fire({interaction:I,eventTarget:N,type:"hold",pointer:O,event:O},$)},H))}}})},e0=Qb,Oj={id:"pointer-events/interactableTargets",install:function(T){var $=T.Interactable;$.prototype.pointerEvents=function(O){return gt(this.events.options,O),this};var I=$.prototype._backCompatOption;$.prototype._backCompatOption=function(O,N){var j=I.call(this,O,N);return j===this&&(this.events.options[O]=N),j}},listeners:{"pointerEvents:collect-targets":function(T,$){var I=T.targets,O=T.node,N=T.type,j=T.eventTarget;$.interactables.forEachMatch(O,function(H){var Z=H.events,X=Z.options;Z.types[N]&&Z.types[N].length&&H.testIgnoreAllow(X,O,j)&&I.push({node:O,eventable:Z,props:{interactable:H}})})},"interactable:new":function(T){var $=T.interactable;$.events.getRect=function(I){return $.getRect(I)}},"interactable:set":function(T,$){var I=T.interactable,O=T.options;gt(I.events.options,$.pointerEvents.defaults),gt(I.events.options,O.pointerEvents||{})}}},X1=Oj,zP={id:"pointer-events",install:function(T){T.usePlugin(DP),T.usePlugin(e0),T.usePlugin(X1)}},FP=zP,VC={id:"reflow",install:function(T){var $=T.Interactable;T.actions.phases.reflow=!0,$.prototype.reflow=function(I){return function(O,N,j){for(var H=O.getAllElements(),Z=j.window.Promise,X=Z?[]:null,de=function(){var we=H[re],Re=O.getRect(we);if(!Re)return 1;var Xe,Je=Zd(j.interactions.list,function(ct){return ct.interacting()&&ct.interactable===O&&ct.element===we&&ct.prepared.name===N.name});if(Je)Je.move(),X&&(Xe=Je._reflowPromise||new Z(function(ct){Je._reflowResolve=ct}));else{var tt=ma(Re),ht=function(ct){return{coords:ct,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:tt.x,y:tt.y},client:{x:tt.x,y:tt.y},timeStamp:j.now()});Xe=function(ct,Mt,oi,bi,Ft){var Qt=ct.interactions.new({pointerType:"reflow"}),Ts={interaction:Qt,event:Ft,pointer:Ft,eventTarget:oi,phase:"reflow"};Qt.interactable=Mt,Qt.element=oi,Qt.prevEvent=Ft,Qt.updatePointer(Ft,Ft,oi,!0),R1(Qt.coords.delta),ba(Qt.prepared,bi),Qt._doPhase(Ts);var $r=ct.window,Kn=$r.Promise,Ja=Kn?new Kn(function(kc){Qt._reflowResolve=kc}):void 0;return Qt._reflowPromise=Ja,Qt.start(bi,Mt,oi),Qt._interacting?(Qt.move(Ts),Qt.end(Ft)):(Qt.stop(),Qt._reflowResolve()),Qt.removePointer(Ft,Ft),Ja}(j,O,we,N,ht)}X&&X.push(Xe)},re=0;re<H.length&&!de();re++);return X&&Z.all(X).then(function(){return O})}(this,I,T)}},listeners:{"interactions:stop":function(T,$){var I=T.interaction;I.pointerType==="reflow"&&(I._reflowResolve&&I._reflowResolve(),function(O,N){O.splice(O.indexOf(N),1)}($.interactions.list,I))}}},BC=VC;if(co.use(Qi),co.use(DC),co.use(FP),co.use(Wb),co.use(LP),co.use(Ke),co.use(hf),co.use(z1),co.use(BC),co.default=co,n(t)==="object"&&t)try{t.exports=co}catch{}return co.default=co,co})}(AM,AM.exports)),AM.exports}var BNe=VNe();const _ne=UNe(BNe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const GNe=(t,e,i)=>Math.max(e,Math.min(t,i));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */function FG(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Fu={container:"container",actionBarContainer:"action-bar-container",contentContainer:"content-container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentOverlay:"content--overlay",floatAll:"float-all",floatContent:"float--content",resizeHandle:"resize-handle",resizeHandleBar:"resize-handle-bar"},xne={actionBar:"action-bar",header:"header"},HNe=dt`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-max-height: unset;--calcite-internal-shell-panel-shadow-block-start: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-block-end: 0 -4px 8px -1px rgba(0, 0, 0, .08), 0 -2px 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-start: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04)}.calcite--rtl.content--overlay{--calcite-internal-shell-panel-shadow-inline-start: -4px 0 8px -1px rgba(0, 0, 0, .08), -2px 0 4px -1px rgba(0, 0, 0, .04);--calcite-internal-shell-panel-shadow-inline-end: 4px 0 8px -1px rgba(0, 0, 0, .08), 2px 0 4px -1px rgba(0, 0, 0, .04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][display-mode=float-all]) .content{flex:2}:host([layout=vertical]:not([display-mode=float-all])) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 300px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][display-mode=float-all]) .width-s{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 12vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical]:not([display-mode=float-all])) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 420px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][display-mode=float-all]) .width-m{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 20vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical]:not([display-mode=float-all])) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-max-width: var(--calcite-shell-panel-max-width, 680px);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=vertical][display-mode=float-all]) .width-l{--calcite-internal-shell-panel-width: var(--calcite-shell-panel-width, 45vw);--calcite-internal-shell-panel-min-width: var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal]) .height-s{--calcite-internal-shell-panel-max-height: var( --calcite-shell-panel-max-height, var(--calcite-shell-panel-detached-max-height, 20vh) )}:host([layout=horizontal]) .content{--calcite-internal-shell-panel-min-height: var(--calcite-shell-panel-min-height, 5vh);--calcite-internal-shell-panel-max-height: var(--calcite-shell-panel-max-height, 30vh)}:host([layout=horizontal]) .height-l{--calcite-internal-shell-panel-max-height: var( --calcite-shell-panel-max-height, var(--calcite-shell-panel-detached-max-height, 40vh) )}.container{pointer-events:none;box-sizing:border-box;display:flex;block-size:100%;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-shell-panel-text-color, var(--calcite-color-text-2))}.container *{box-sizing:border-box}.container.float-all{margin-block:var(--calcite-spacing-sm);margin-inline:var(--calcite-spacing-sm)}.float-all{max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) );box-shadow:var(--calcite-shell-panel-shadow, var(--calcite-shadow-sm));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));overflow:hidden}:host([layout=vertical][position=start]) .float-all{border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-panel-border-color, var(--calcite-color-border-3))}:host([layout=vertical][position=end]) .float-all{border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .float-all{border-inline:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-shell-panel-border-color, var(--calcite-color-border-3)))}:host([layout=horizontal]) .container{block-size:auto;inline-size:100%;flex-direction:column}.resize-handle{position:absolute;box-sizing:border-box;display:flex;-webkit-user-select:none;user-select:none;align-items:center;justify-content:center;outline:2px solid transparent;outline-offset:2px;--calcite-internal-shell-panel-resize-handle-offset: calc( (var(--calcite-size-fixed-xxl) - var(--calcite-size-fixed-sm-plus)) / 2 * -1 );z-index:var(--calcite-z-index-header)}.resize-handle:active .resize-handle-bar,.resize-handle:hover .resize-handle-bar{color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-text-1));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-foreground-3))}.resize-handle-bar{pointer-events:none;display:flex;align-items:center;justify-content:center;color:var(--calcite-shell-panel-resize-icon-color, var(--calcite-color-border-input));background-color:var(--calcite-shell-panel-resize-background-color, var(--calcite-color-background))}.resize-handle:focus .resize-handle-bar{outline-color:transparent;outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)))}:host([position=start][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-end:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=start][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=vertical]) .resize-handle{inline-size:var(--calcite-size-fixed-xxl);inset-inline-start:var(--calcite-internal-shell-panel-resize-handle-offset);block-size:100%}:host([position=end][layout=vertical]) .resize-handle-bar{block-size:100%;inline-size:var(--calcite-size-fixed-sm-plus);border-inline-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=vertical]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=start][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-end:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=start][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-start:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-end-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-end-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}:host([position=end][layout=horizontal]) .resize-handle{block-size:var(--calcite-size-fixed-xxl);inline-size:100%;inset-block-start:var(--calcite-internal-shell-panel-resize-handle-offset)}:host([position=end][layout=horizontal]) .resize-handle-bar{inline-size:100%;block-size:var(--calcite-size-fixed-sm-plus);border-block-end:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=end][layout=horizontal]):host([display-mode^=float]) .resize-handle-bar{border-start-start-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));border-start-end-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.action-bar-container{pointer-events:auto;box-sizing:border-box;display:flex;flex:1 1 auto}.content-container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;align-items:stretch;align-self:stretch}:host([layout=horizontal]) .action-bar-container,:host([layout=horizontal]) .content-container{flex-direction:column}.content{pointer-events:auto;position:relative;box-sizing:border-box;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;padding:0;background-color:var(--calcite-shell-panel-background-color, var(--calcite-color-background));transition:max-block-size var(--calcite-animation-timing),max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]:not([display-mode=float-all])) .content{inline-size:var(--calcite-internal-shell-panel-width);max-inline-size:var(--calcite-internal-shell-panel-max-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=vertical][display-mode=float-all]) .content{inline-size:var(--calcite-internal-shell-panel-width);min-inline-size:var(--calcite-internal-shell-panel-min-width)}:host([layout=horizontal]) .content{block-size:var(--calcite-internal-shell-panel-height);max-block-size:var(--calcite-internal-shell-panel-max-height);min-block-size:var(--calcite-internal-shell-panel-min-height)}:host([resizable][layout=vertical][position=start]) .content{padding-inline-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=vertical][position=end]) .content{padding-inline-start:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=start]) .content{padding-block-end:var(--calcite-size-fixed-sm-plus)}:host([resizable][layout=horizontal][position=end]) .content{padding-block-start:var(--calcite-size-fixed-sm-plus)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-start)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-inline-end)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-start)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-internal-shell-panel-shadow-block-end)}.float--content{margin-block-end:auto;block-size:auto;overflow:hidden;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--calcite-shell-panel-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));border-radius:var(--calcite-shell-panel-corner-radius, var(--calcite-corner-radius-round));margin-inline:var(--calcite-spacing-sm);margin-block-start:var(--calcite-spacing-sm);max-block-size:var(--calcite-internal-shell-panel-max-height, calc(100% - 1rem) )}.float--content ::slotted(calcite-panel),.float--content ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .float--content{margin-block:var(--calcite-spacing-sm)}:host([position=start]) .float--content ::slotted(calcite-panel),:host([position=start]) .float--content ::slotted(calcite-flow),:host([position=end]) .float--content ::slotted(calcite-panel),:host([position=end]) .float--content ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border:var(--calcite-border-width-sm) solid var(--calcite-shell-border-color, var(--calcite-color-border-3))}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([resizable][layout=vertical]) .content ::slotted(calcite-flow),:host([resizable][layout=vertical]) .content ::slotted(calcite-panel){border-inline-start:none;border-inline-end:none}:host([resizable][layout=horizontal]) .content ::slotted(calcite-flow),:host([resizable][layout=horizontal]) .content ::slotted(calcite-panel){border-block-start:none;border-block-end:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,D5=class D5 extends Yt{constructor(){super(...arguments),this.actionBars=[],this.messages=Mn(),this.resizeValues={inlineSize:null,blockSize:null,minInlineSize:null,minBlockSize:null,maxInlineSize:null,maxBlockSize:null},this.hasHeader=!1,this.collapsed=!1,this.displayMode="dock",this.layout="vertical",this.position="start",this.resizable=!1,this.widthScale="m",this.calciteInternalShellPanelResizeEnd=Ne({cancelable:!1}),this.calciteInternalShellPanelResizeStart=Ne({cancelable:!1})}willUpdate(e){e.has("layout")&&(this.hasUpdated||this.layout!=="vertical")&&this.setActionBarsLayout(this.actionBars)}disconnectedCallback(){super.disconnectedCallback(),this.cleanupInteractions()}getContentElDOMRect(){return this.contentEl.getBoundingClientRect()}handleKeyDown(e){const{key:i,defaultPrevented:r,shiftKey:n}=e,{position:s,layout:o,resizable:a,contentEl:l,el:c,resizeValues:{maxBlockSize:h,maxInlineSize:m,minBlockSize:y,minInlineSize:v}}=this,x=[...o==="horizontal"?["ArrowUp","ArrowDown"]:["ArrowLeft","ArrowRight"],"Home","End"];if(!a||!l||r||!x.includes(i))return;const S=this.getContentElDOMRect(),C=ca(c)==="rtl"?-1:1,k=n?QPe:KPe;switch(i){case"ArrowUp":this.updateSize({size:S.height+(o==="horizontal"&&s==="end"?k:-k),type:"blockSize"}),e.preventDefault();break;case"ArrowDown":this.updateSize({size:S.height+(o==="horizontal"&&s==="end"?-k:k),type:"blockSize"}),e.preventDefault();break;case"ArrowLeft":this.updateSize({size:S.width+(o==="vertical"&&s==="end"?k:-k)*C,type:"inlineSize"}),e.preventDefault();break;case"ArrowRight":this.updateSize({size:S.width+(o==="vertical"&&s==="end"?-k:k)*C,type:"inlineSize"}),e.preventDefault();break;case"Home":this.updateSize({size:o==="horizontal"?y:v,type:o==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break;case"End":this.updateSize({size:o==="horizontal"?h:m,type:o==="horizontal"?"blockSize":"inlineSize"}),e.preventDefault();break}}updateSize({type:e,size:i}){const{contentEl:r,resizeValues:n}=this;if(!r)return;const s=e==="blockSize"?"minBlockSize":"minInlineSize",o=e==="blockSize"?"maxBlockSize":"maxInlineSize",a=n[s]&&n[o]?GNe(i,n[s],n[o]):i,l=Math.round(a);this.resizeValues={...n,[e]:l},r.style[e]=i!==null?`${l}px`:null}cleanupInteractions(){var e;(e=this.interaction)==null||e.unset(),this.updateSize({size:null,type:"inlineSize"}),this.updateSize({size:null,type:"blockSize"})}async setupInteractions(){this.cleanupInteractions();const{el:e,contentEl:i,resizable:r,position:n,collapsed:s,resizeHandleEl:o,layout:a}=this;if(!i||s||!r||!o)return;await this.el.componentOnReady();const{inlineSize:l,minInlineSize:c,blockSize:h,minBlockSize:m,maxInlineSize:y,maxBlockSize:v}=window.getComputedStyle(i),w={inlineSize:Tx(l),blockSize:Tx(h),minInlineSize:Tx(c),minBlockSize:Tx(m),maxInlineSize:Tx(y)||window.innerWidth,maxBlockSize:Tx(v)||window.innerHeight};this.resizeValues=w;const x=ca(e)==="rtl";this.interaction=_ne(i,{context:e.ownerDocument}).resizable({edges:{top:n==="end"&&a==="horizontal"?o:!1,right:n===(x?"end":"start")&&a==="vertical"?o:!1,bottom:n==="start"&&a==="horizontal"?o:!1,left:n===(x?"start":"end")&&a==="vertical"?o:!1},modifiers:[_ne.modifiers.restrictSize({min:{width:w.minInlineSize,height:w.minBlockSize},max:{width:w.maxInlineSize,height:w.maxBlockSize}})],listeners:{resizestart:()=>{this.calciteInternalShellPanelResizeStart.emit()},resizeend:()=>{this.calciteInternalShellPanelResizeEnd.emit()},move:({rect:S})=>{const C=a==="horizontal";this.updateSize({size:C?S.height:S.width,type:C?"blockSize":"inlineSize"})}}})}storeContentEl(e){this.contentEl=e}setResizeHandleEl(e){this.resizeHandleEl=e,this.setupInteractions()}setActionBarsLayout(e){e.forEach(i=>i.layout=this.layout)}handleActionBarSlotChange(e){const i=Tp(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)}handleHeaderSlotChange(e){this.hasHeader=Ut(e)}getResizeIcon(){const{layout:e}=this;return e==="horizontal"?"drag-resize-vertical":"drag-resize-horizontal"}renderHeader(){return nt("header",q`<div class=${ne(Fu.contentHeader)} .hidden=${!this.hasHeader}><slot name=${xne.header} @slotchange=${this.handleHeaderSlotChange}></slot></div>`)}render(){const{collapsed:e,position:i,resizable:r,layout:n,displayMode:s,resizeValues:o}=this,a=ca(this.el),l=!e&&r?nt("resize-handle",q`<div .ariaLabel=${this.messages.resize} .ariaOrientation=${n==="horizontal"?"vertical":"horizontal"} .ariaValueMax=${n=="horizontal"?o.maxBlockSize:o.maxInlineSize} .ariaValueMin=${n=="horizontal"?o.minBlockSize:o.minInlineSize} .ariaValueNow=${n=="horizontal"?o.blockSize:o.inlineSize} class=${ne(Fu.resizeHandle)} @keydown=${this.handleKeyDown} role=separator tabindex=0 touch-action=none ${yt(this.setResizeHandleEl)}><div class=${ne(Fu.resizeHandleBar)}><calcite-icon .icon=${this.getResizeIcon()} scale=s></calcite-icon></div></div>`):null,c=()=>n==="horizontal"?i==="start"?lu.calciteAnimateInDown:lu.calciteAnimateInUp:a==="ltr"&&i==="end"||a==="rtl"&&i==="start"?lu.calciteAnimateInLeft:lu.calciteAnimateInRight,h=q`<div class=${ne(Fu.contentContainer)}>${nt("content",q`<div class=${ne({[lu.rtl]:a==="rtl",[Fu.content]:!0,[Fu.contentOverlay]:s==="overlay",[Fu.floatContent]:s==="float-content"||s==="float",[lu.calciteAnimate]:s==="overlay",[c()]:s==="overlay",[FG("width",this.width,this.widthScale)]:!!(this.width||this.widthScale),[FG("height",this.height,this.heightScale)]:!!(this.height||this.heightScale)})} .hidden=${e} ${yt(this.storeContentEl)}>${this.renderHeader()}<div class=${ne(Fu.contentBody)}><slot></slot></div>${l}</div>`)}</div>`,y=[nt("action-bar-container",q`<div class=${ne(Fu.actionBarContainer)}><slot name=${xne.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`),h];return i==="end"&&y.reverse(),q`<div class=${ne({[Fu.container]:!0,[Fu.floatAll]:s==="float-all"})}>${y}</div>`}};D5.properties={resizeValues:[16,{},{state:!0}],hasHeader:[16,{},{state:!0}],collapsed:[7,{},{reflect:!0,type:Boolean}],displayMode:[3,{},{reflect:!0}],heightScale:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:[3,{},{reflect:!0}],resizable:[7,{},{reflect:!0,type:Boolean}],height:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},D5.styles=HNe;let UG=D5;Xt("calcite-shell-panel",UG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const qNe=dt`:host{display:block}:host([hidden]){display:none}[hidden]{display:none}`,N5=class N5 extends Yt{constructor(){super(...arguments),this.mutationObserver=sn("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.calciteInternalOptionChange=Ne({cancelable:!1})}connectedCallback(){var e;super.connectedCallback(),this.ensureTextContentDependentProps(),(e=this.mutationObserver)==null||e.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handlePropChange(this.disabled,e.get("disabled"),"disabled"),e.has("label")&&this.handlePropChange(this.label,e.get("label"),"label"),e.has("selected")&&this.handlePropChange(this.selected,e.get("selected"),"selected"),e.has("value")&&this.handlePropChange(this.value,e.get("value"),"value")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}handlePropChange(e,i,r){(r==="label"||r==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:e},internallySetLabel:i,internallySetValue:r,label:n,value:s}=this;(!n||n===i)&&(this.label=e,this.internallySetLabel=e),(s==null||s===r)&&(this.value=e,this.internallySetValue=e)}render(){return q`<slot>${this.label}</slot>`}};N5.properties={disabled:[7,{},{reflect:!0,type:Boolean}],label:1,selected:[7,{},{reflect:!0,type:Boolean}],value:1},N5.styles=qNe;let jG=N5;Xt("calcite-option",jG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Sne={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},WNe=dt`:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=warning]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-warning)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,z5=class z5 extends Yt{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=lb(Sne,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=lb(Sne,this.icon,this.status))}render(){const e=this.el.hidden;return Ap(this.el,"calcite-hydrated-hidden",e),q`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return q`<calcite-icon class="calcite-input-message-icon" .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};z5.properties={icon:[3,{converter:wu},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},z5.styles=WNe;let KN=z5;Xt("calcite-input-message",KN);const XTt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:KN},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const JNe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function ZNe(t){return`${t.split("-").map((r,n)=>n===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${JNe.includes(t)?"Input":"Change"}`}const VG="hidden-form-input";function nY(t){return"checked"in t}const BG=new WeakMap,sY=new WeakSet;function YNe(t,e){if(iC(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(r,s=>{n=s.composedPath().some(o=>sY.has(o)),s.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),n}function XNe(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function Gye(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?iC(t,"calcite-radio-button-group"):t}const KNe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function $ne(t){var a;const e=t==null?void 0:t.target,i=e==null?void 0:e.validationMessage,r=Gye(e==null?void 0:e.parentElement);if(!r)return;const n=(a=r==null?void 0:r.nodeName)==null?void 0:a.toLowerCase(),s=n==null?void 0:n.split("-");if(s.length<2||s[0]!=="calcite")return;t==null||t.preventDefault(),"validity"in r&&(r.validity=e==null?void 0:e.validity),r.dispatchEvent(KNe),XNe(r,{message:i,icon:!0,status:"invalid"});const o=ZNe(n);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e==null?void 0:e.validity)},{once:!0})}function kO(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",$ne,!0),e.requestSubmit(),e.removeEventListener("invalid",$ne,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r!=null&&r.validationMessage){r==null||r.setFocus();break}}),!0):!1}function QNe(t){var e;(e=t.formEl)==null||e.reset()}function g1(t){const{el:e,value:i}=t,r=Hye(t);if(!r||YNe(r,e))return;t.formEl=r,t.defaultValue=i,nY(t)&&(t.defaultChecked=t.checked);const n=eze.bind(t);r.addEventListener("reset",n),BG.set(t.el,n),sY.add(e)}function Hye(t){const{el:e,form:i}=t;return i?SO(e,{id:i}):iC(e,"form")}function eze(){var t;if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),nY(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,(t=this.onFormReset)==null||t.call(this)}function v1(t){const{el:e,formEl:i}=t;if(!i)return;const r=BG.get(e);i.removeEventListener("reset",r),BG.delete(e),t.formEl=null,sY.delete(e)}function oY(t,e){t.defaultValue=e}const gA="calciteInternalHiddenInputInput",qye=t=>{t.target.dispatchEvent(new CustomEvent(gA,{bubbles:!0}))},Tne=t=>t.removeEventListener("input",qye);function tze(t){const{el:e,formEl:i,name:r,value:n}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${VG}"]`);if(!i||!r){o.forEach(m=>{Tne(m),m.remove()});return}const a=Array.isArray(n)?n:[n],l=[],c=new Set;o.forEach(m=>{const y=a.find(v=>v==m.value);y!=null?(c.add(y),Ene(t,m,y)):l.push(m)});let h;a.forEach(m=>{if(c.has(m))return;let y=l.pop();y||(y=s.createElement("input"),y.ariaHidden="true",y.slot=VG),h||(h=s.createDocumentFragment()),h.append(y),y.addEventListener("input",qye),Ene(t,y,m)}),h&&e.append(h),l.forEach(m=>{Tne(m),m.remove()})}function Ene(t,e,i){var c;const{defaultValue:r,disabled:n,form:s,name:o,required:a}=t;e.defaultValue=r,e.disabled=n,e.name=o,e.required=a,e.tabIndex=-1,s?e.setAttribute("form",s):e.removeAttribute("form"),nY(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(c=t.syncHiddenFormInput)==null||c.call(t,e);const l=Gye(t.el);if(l&&"validity"in l)for(const h in{...e==null?void 0:e.validity})l.validity[h]=e.validity[h]}const b1=({component:t})=>(tze(t),q`<slot name=${VG}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Wye="calciteInternalLabelClick",NU="calciteInternalLabelConnected",QN="calciteInternalLabelDisconnected",Cne="calcite-label",$E=new WeakMap,ok=new WeakMap,vA=new WeakMap,ez=new WeakMap,m_=new Set,ize=t=>{const{id:e}=t,i=e&&SO(t,{selector:`${Cne}[for="${e}"]`});if(i)return i;const r=iC(t,Cne);return!r||rze(r,t)?null:r};function rze(t,e){let i;const r="custom-element-ancestor-check",n=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,n,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,n),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function rf(t){if(!t)return;const e=ize(t.el);if(ok.has(e)&&e===t.labelEl||!e&&m_.has(t))return;const i=sze.bind(t);if(e){t.labelEl=e;const r=$E.get(e)||[];r.push(t),$E.set(e,r.sort(Jye)),ok.has(t.labelEl)||(ok.set(t.labelEl,Ine),t.labelEl.addEventListener(Wye,Ine)),m_.delete(t),document.removeEventListener(NU,vA.get(t)),ez.set(t,i),document.addEventListener(QN,i)}else m_.has(t)||(i(),document.removeEventListener(QN,ez.get(t)))}function $b(t){if(!t||(m_.delete(t),document.removeEventListener(NU,vA.get(t)),document.removeEventListener(QN,ez.get(t)),vA.delete(t),ez.delete(t),!t.labelEl))return;const e=$E.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(Wye,ok.get(t.labelEl)),ok.delete(t.labelEl)),$E.set(t.labelEl,e.filter(i=>i!==t).sort(Jye)),t.labelEl=null}function Jye(t,e){return HLe(t.el,e.el)?-1:1}function ub(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function Ine(t){const e=t.detail.sourceEvent.target,i=$E.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const s=i[0];s.disabled||s.onLabelClick(t)}function nze(){m_.has(this)&&rf(this)}function sze(){m_.add(this);const t=vA.get(this)||nze.bind(this);vA.set(this,t),document.addEventListener(NU,t)}async function oze(t){var r;if(await t.componentOnReady(),$E.has(t))return;const i=(r=t.ownerDocument)==null?void 0:r.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const n of m_)if(n.el===i){rf(n);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const aze={validationContainer:"validation-container"},lze=()=>{},AO=({scale:t,status:e,id:i,icon:r,message:n,ref:s})=>q`<div class=${ne(aze.validationContainer)} ${yt(s||lze)}><calcite-input-message aria-live=polite .icon=${r} id=${i??Ge} .scale=${t} .status=${e}>${n}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const cze=dt`:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column;font-size:var(--calcite-select-font-size);font-weight:var(--calcite-internal-select-font-weight, var(--calcite-font-weight-regular))}.wrapper{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width);block-size:var(--calcite-internal-select-block-size, 32px)}.wrapper:focus-within .icon,.wrapper:active .icon,.wrapper:hover .icon{color:var(--calcite-select-icon-color-hover, var(--calcite-color-text-1))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-internal-select-font-size: var(--calcite-font-size--2);--calcite-select-spacing-inline: .5rem 2rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-sm);--calcite-internal-select-block-size: 24px}:host([scale=m]){--calcite-internal-select-font-size: var(--calcite-font-size--1);--calcite-select-spacing-inline: .75rem 2.5rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-select-font-size: var(--calcite-font-size-0);--calcite-select-spacing-inline: 1rem 3rem;--calcite-internal-select-icon-container-padding-inline: var(--calcite-spacing-lg);--calcite-internal-select-block-size: 44px}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0;box-sizing:border-box;inline-size:100%;cursor:pointer;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:0;border-style:solid;background-color:var(--calcite-color-foreground-1);font-family:inherit;outline-color:transparent;font-weight:inherit;font-size:var(--calcite-select-font-size, var(--calcite-internal-select-font-size));color:var(--calcite-select-text-color, var(--calcite-color-text-2));border-color:var(--calcite-select-border-color, var(--calcite-color-border-input));border-width:var(--calcite-select-internal-border-width, var(--calcite-border-width-sm));padding-inline:var(--calcite-select-spacing-inline);padding-block:var(--calcite-internal-select-spacing-block);border-inline-end-width:0;line-height:var(--calcite-internal-select-line-height, normal)}.select:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}select:disabled{border-color:var(--calcite-color-border-input);--tw-bg-opacity: 1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:transparent;color:var(--calcite-color-text-2);inset-inline-end:0px;border-color:var(--calcite-select-border-color, var(--calcite-color-border-input));border-inline-width:0px var(--calcite-select-internal-icon-border-inline-end-width, 1px);padding-inline:var(--calcite-internal-select-icon-container-padding-inline)}.icon-container .icon{color:var(--calcite-select-icon-color, var(--calcite-color-text-3))}:host([status=invalid]) select,:host([status=invalid]) .icon-container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) select:focus,:host([status=invalid]) .icon-container:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.select:focus~.icon-container{border-color:transparent}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,HL={icon:"icon",iconContainer:"icon-container",select:"select",wrapper:"wrapper"},Mne={validationMessage:"selectValidationMessage"};function qL(t){return t.tagName==="CALCITE-OPTION"}function uze(t){return t.tagName==="CALCITE-OPTION-GROUP"}const F5=class F5 extends Yt{constructor(){super(),this.componentToNativeEl=new Map,this.mutationObserver=sn("mutation",()=>this.populateInternalSelect()),this.disabled=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value=null,this.width="auto",this.calciteSelectChange=Ne({cancelable:!1}),this.listen("calciteInternalOptionChange",this.handleOptionOrGroupChange),this.listen("calciteInternalOptionGroupChange",this.handleOptionOrGroupChange)}async setFocus(){await pr(this),ab(this.selectEl)}connectedCallback(){var i;super.connectedCallback();const{el:e}=this;(i=this.mutationObserver)==null||i.observe(e,{subtree:!0,childList:!0}),rf(this),g1(this)}willUpdate(e){var i;e.has("value")&&(this.hasUpdated||this.value!==null)&&this.updateItemsFromValue(this.value),e.has("selectedOption")&&(this.value=(i=this.selectedOption)==null?void 0:i.value)}updated(){Gr(this)}loaded(){var i;typeof this.value=="string"&&this.updateItemsFromValue(this.value),this.populateInternalSelect();const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),oY(this,((i=this.selectedOption)==null?void 0:i.value)??"")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),$b(this),v1(this)}handleInternalSelectChange(){const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e),requestAnimationFrame(()=>this.emitChangeEvent())}handleOptionOrGroupChange(e){e.stopPropagation();const i=e.target,r=this.componentToNativeEl.get(i);r&&(this.updateNativeElement(i,r),qL(i)&&i.selected&&(this.deselectAllExcept(i),this.selectedOption=i))}onLabelClick(){this.setFocus()}updateItemsFromValue(e){this.el.querySelectorAll("calcite-option").forEach(i=>i.selected=i.value===e)}updateNativeElement(e,i){if(i.disabled=e.disabled,i.label=e.label,qL(e)){const r=i;r.selected=e.selected,r.value=e.value,r.innerText=e.label}}populateInternalSelect(){const e=Array.from(this.el.children).filter(i=>i.tagName==="CALCITE-OPTION"||i.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),e.forEach(i=>{var r;return(r=this.selectEl)==null?void 0:r.append(this.toNativeElement(i))})}clearInternalSelect(){this.componentToNativeEl.forEach(e=>e.remove()),this.componentToNativeEl.clear()}storeSelectRef(e){e&&(this.selectEl=e)}selectFromNativeOption(e){if(!e)return;let i;this.componentToNativeEl.forEach((r,n)=>{qL(n)&&r===e&&(n.selected=!0,i=n,this.deselectAllExcept(n))}),i&&(this.selectedOption=i)}toNativeElement(e){if(qL(e)){const i=document.createElement("option");return this.updateNativeElement(e,i),this.componentToNativeEl.set(e,i),i}if(uze(e)){const i=document.createElement("optgroup");return this.updateNativeElement(e,i),Array.from(e.children).forEach(r=>{const n=this.toNativeElement(r);i.append(n),this.componentToNativeEl.set(e,n)}),this.componentToNativeEl.set(e,i),i}throw new Error("unsupported element child provided")}deselectAllExcept(e){this.el.querySelectorAll("calcite-option").forEach(i=>{i!==e&&(i.selected=!1)})}emitChangeEvent(){this.calciteSelectChange.emit()}renderChevron(){return q`<div class=${ne(HL.iconContainer)}><calcite-icon class=${ne(HL.icon)} icon=chevron-down .scale=${Fi(this.scale)}></calcite-icon></div>`}render(){const{disabled:e}=this;return Hr({disabled:e,children:q`<div class=${ne(HL.wrapper)}><select aria-errormessage=${Mne.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ub(this)} class=${ne(HL.select)} .disabled=${e} @change=${this.handleInternalSelectChange} ${yt(this.storeSelectRef)}><slot></slot></select>${this.renderChevron()}${b1({component:this})}</div>${this.validationMessage&&this.status==="invalid"?AO({icon:this.validationIcon,id:Mne.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};F5.properties={disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],label:1,name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selectedOption:[0,{},{attribute:!1}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:wu},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1,width:[3,{},{reflect:!0}]},F5.styles=cze;let GG=F5;Xt("calcite-select",GG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const dze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host span{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0;border-style:none;font-family:inherit;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform,background-size;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host a:hover,:host span:hover{text-decoration:none}:host a,:host span{outline-color:transparent}:host a:focus,:host span:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;margin-block-start:-.25em}:host .calcite-link--icon.icon-start{margin-inline-end:.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:.5rem}:host span,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0;color:var(--calcite-link-text-color, var(--calcite-color-text-link));line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px}:host span:hover,:host span:focus,:host a:hover,:host a:focus{background-size:100% 1px,100% 1px}:host span:active,:host a:active{background-size:100% 2px,100% 2px}:host span.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%,100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,U5=class U5 extends Yt{constructor(){super(),this.disabled=!1,this.download=!1,this.listen("click",this.clickHandler)}async setFocus(){await pr(this),ab(this.childEl)}updated(){Gr(this)}clickHandler(e){this.disabled||e.isTrusted||this.childEl.click()}childElClickHandler(e){e.isTrusted||e.stopPropagation()}storeTagRef(e){this.childEl=e}render(){const{download:e,el:i}=this,r=ca(i),n=this.href?"a":"span",s=q`<calcite-icon class="calcite-link--icon icon-start" .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`,o=q`<calcite-icon class="calcite-link--icon icon-end" .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`,a=n==="span"?Y_`span`:Y_`a`,l=n==="span"?"link":null,c=n==="span"?0:null;return this.el.role="presentation",Hr({disabled:this.disabled,children:IO`<${a} class=${ne({[lu.rtl]:r==="rtl"})} download=${(n==="a"?e===!0||e===""?"":e||null:null)??tn} href=${(n==="a"&&this.href)??tn} @click=${this.childElClickHandler} rel=${(n==="a"&&this.rel)??tn} .role=${l} tabindex=${c??tn} target=${(n==="a"&&this.target)??tn} ${yt(this.storeTagRef)}>${q`${this.iconStart?s:null}<slot></slot>${this.iconEnd?o:null}`}</${a}>`})}};U5.properties={disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:wu},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],rel:1,target:1},U5.styles=dze;let HG=U5;Xt("calcite-link",HG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const _a={container:"container",contentContainer:"content-container",contentContainerHasContent:"content-container--has-content",contentContainerHasOnlyContentTopAndBottom:"content-container--has-only-content-top-and-bottom",textContentContainer:"text-content-container",description:"description",heading:"heading",icon:"icon",interactive:"interactive",largeVisualDeprecated:"large-visual-deprecated",row:"row",selected:"selected",selectionIcon:"selection-icon",textContent:"text-content"},WL={selectedMultiple:"check-square-f",selectedSingle:"circle-f",unselectedMultiple:"square",unselectedSingle:"circle"},JL={contentBottom:"content-bottom",contentEnd:"content-end",contentStart:"content-start",contentTop:"content-top"},hze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{box-shadow:var(--calcite-tile-shadow, var(--calcite-shadow-none));box-sizing:border-box;display:inline-block}calcite-link{--calcite-link-text-color: var(--calcite-tile-link-text-color)}.container{background-color:var(--calcite-tile-background-color, var(--calcite-color-foreground-1));block-size:var(--calcite-container-size-content-fluid);border-radius:var(--calcite-tile-corner-radius, var(--calcite-corner-radius));box-sizing:border-box;color:var(--calcite-tile-text-color, var(--calcite-color-text-3));inline-size:var(--calcite-container-size-content-fluid);outline:var(--calcite-border-width-sm, 1px) solid var(--calcite-tile-border-color, var(--calcite-color-border-2));padding:var(--calcite-internal-tile-spacing);position:relative;-webkit-user-select:none;user-select:none}.container .selection-icon{color:var(--calcite-tile-text-color, var(--calcite-color-text-3))}.container.interactive{cursor:pointer}.container.interactive:hover,.container.interactive:focus,.container.interactive.selected{outline-color:var(--calcite-tile-accent-color-press, var(--calcite-color-brand));z-index:var(--calcite-z-index)}.container.interactive:hover .selection-icon,.container.interactive:focus .selection-icon,.container.interactive.selected .selection-icon{color:var(--calcite-tile-accent-color-press, var(--calcite-color-brand))}.container.interactive:focus{box-shadow:inset 0 0 0 1px var(--calcite-tile-accent-color-press, var(--calcite-color-brand));z-index:calc(var(--calcite-z-index) + 1)}.content-container,.row{align-items:flex-start;display:flex}.content-container{flex-direction:column;word-wrap:break-word;word-break:break-word;inline-size:var(--calcite-container-size-content-fluid)}.text-content-container{inline-size:100%;outline-color:transparent;padding:0}.text-content{display:flex;flex-direction:column}.heading{color:var(--calcite-tile-heading-text-color, var(--calcite-color-text-2));font-weight:var(--calcite-font-weight-medium);line-height:1.20313rem;overflow-wrap:break-word}.description{font-weight:var(--calcite-font-weight-regular);overflow-wrap:break-word}.large-visual-deprecated{align-items:center;justify-content:center;min-block-size:12rem;text-align:center}.large-visual-deprecated .icon{align-self:center;block-size:64px;inline-size:64px}.large-visual-deprecated .selection-icon{position:absolute;inset-inline-start:var(--calcite-internal-tile-spacing);inset-block-start:var(--calcite-internal-tile-spacing);z-index:var(--calcite-z-index)}.large-visual-deprecated .text-content-container{justify-content:center}:host([alignment=center]) .icon{align-self:center}:host([alignment=center]) .text-content{text-align:center}:host([alignment=center]) slot[name=content-start]::slotted(*),:host([alignment=center]) slot[name=content-end]::slotted(*){align-self:center}:host([scale=s]){--calcite-internal-tile-spacing: var(--calcite-spacing-sm);max-inline-size:400px;min-inline-size:100px}:host([scale=s]) .heading{font-size:var(--calcite-font-size--2);line-height:1.03125rem}:host([scale=s]) .description{font-size:var(--calcite-font-size--3);line-height:.85938rem}:host([scale=m]){--calcite-internal-tile-spacing: var(--calcite-spacing-md);max-inline-size:460px;min-inline-size:140px}:host([scale=m]) .heading{font-size:var(--calcite-font-size--1);line-height:1.20313rem}:host([scale=m]) .description{font-size:var(--calcite-font-size--2);line-height:1.03125rem}:host([scale=l]){--calcite-internal-tile-spacing: var(--calcite-spacing-lg);max-inline-size:520px;min-inline-size:160px}:host([scale=l]) .heading{font-size:var(--calcite-font-size-0);line-height:1.375rem}:host([scale=l]) .description{font-size:var(--calcite-font-size--1);line-height:1.20313rem}.content-container--has-content,.row{gap:var(--calcite-internal-tile-spacing)}.content-container--has-only-content-top-and-bottom slot[name=content-top]::slotted(*){margin-block-end:var(--calcite-internal-tile-spacing)}:host([selection-appearance=border][layout=horizontal]) .container.selected:focus:before,:host([selection-appearance=border][layout=vertical]) .container.selected:focus:before{block-size:100%;box-shadow:inset 0 0 0 1px var(--calcite-tile-accent-color-press, var(--calcite-color-brand));content:"";display:block;inline-size:100%;inset-block-start:0;inset-inline-start:0;position:absolute}:host([selection-appearance=border][layout=horizontal]) .container.selected{box-shadow:inset 0 -4px 0 0 var(--calcite-tile-accent-color-press, var(--calcite-color-brand))}:host([selection-appearance=border][layout=vertical]) .container.selected{box-shadow:inset 4px 0 0 0 var(--calcite-tile-accent-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .heading,:host([active]:not([disabled])) .heading{color:var(--calcite-tile-heading-text-color, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .description,:host([active]:not([disabled])) .description{color:var(--calcite-tile-text-color, var(--calcite-color-text-2))}:host([href]:focus:not([disabled])) .container,:host([href]:hover:not([disabled])) .container{outline-color:var(--calcite-tile-link-color, var(--calcite-color-text-link));z-index:var(--calcite-z-index)}:host([href]:focus:not([disabled])) .icon,:host([href]:hover:not([disabled])) .icon{color:var(--calcite-tile-link-color, var(--calcite-color-text-link))}:host([href]:focus:not([disabled])) .heading,:host([href]:hover:not([disabled])) .heading{color:var(--calcite-tile-link-color, var(--calcite-color-text-link))}:host([href]:active:not([disabled])) .container{box-shadow:inset 0 0 0 1px var(--calcite-tile-link-color, var(--calcite-color-text-link));outline-color:var(--calcite-tile-link-color, var(--calcite-color-text-link))}:host([embed]) .container{padding:0}:host([selection-mode=none]) .container:hover,:host([selection-mode=none]) .container.selected{outline-color:var(--calcite-tile-border-color, var(--calcite-color-border-2))}:host([selection-mode=none]) .container:focus{outline-color:var(--calcite-tile-accent-color-press, var(--calcite-color-brand))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}::slotted(*){max-inline-size:100%}`,j5=class j5 extends Yt{constructor(){super(),this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasContentTop=!1,this.active=!1,this.alignment="start",this.disabled=!1,this.embed=!1,this.iconFlipRtl=!1,this.interactive=!1,this.layout="horizontal",this.scale="m",this.selected=!1,this.selectionAppearance="icon",this.selectionMode="none",this.calciteInternalTileKeyEvent=Ne({cancelable:!1}),this.calciteTileSelect=Ne(),this.listen("keydown",this.keyDownHandler)}async setFocus(){var e;await pr(this),!this.disabled&&this.interactive&&((e=this.containerEl)==null||e.focus())}updated(){Gr(this)}clickHandler(){this.interactive&&(this.setFocus(),this.handleSelectEvent())}handleSelectEvent(){this.disabled||!this.interactive||this.selectionMode==="single-persist"&&this.selected===!0||this.calciteTileSelect.emit()}handleSlotChange(e){const i=e.target.dataset.name;this[`has${i}`]=Ut(e)}setContainerEl(e){this.containerEl=e}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleSelectEvent(),e.preventDefault();break;case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"Home":case"End":this.calciteInternalTileKeyEvent.emit(e),e.preventDefault();break}}renderSelectionIcon(){const{selected:e,selectionAppearance:i,selectionMode:r}=this;if(i==="icon"&&r!=="none")return q`<calcite-icon class=${ne(_a.selectionIcon)} .icon=${e?r==="multiple"?WL.selectedMultiple:WL.selectedSingle:r==="multiple"?WL.unselectedMultiple:WL.unselectedSingle} scale=s></calcite-icon>`}renderTile(){const{description:e,disabled:i,hasContentBottom:r,hasContentEnd:n,hasContentStart:s,hasContentTop:o,heading:a,icon:l,iconFlipRtl:c,interactive:h,selectionMode:m}=this,y=a&&l&&!e,v=!!this.href||!h,w=m==="multiple"&&h?"checkbox":m!=="none"&&h?"radio":h?"button":void 0,x=!!(e||n||s||a||l),S=!x&&o&&r;return q`<div .ariaChecked=${m!=="none"&&h?this.selected:void 0} .ariaDisabled=${v?i:void 0} .ariaLabel=${w&&this.label} class=${ne({[_a.container]:!0,[_a.interactive]:h,[_a.largeVisualDeprecated]:y,[_a.row]:!0,[_a.selected]:this.selected})} @click=${this.clickHandler} .role=${w} tabindex=${(v?void 0:0)??tn} ${yt(this.setContainerEl)}>${this.renderSelectionIcon()}<div class=${ne({[_a.contentContainer]:!0,[_a.contentContainerHasContent]:x,[_a.contentContainerHasOnlyContentTopAndBottom]:S})}><slot name=${JL.contentTop} @slotchange=${this.handleSlotChange}></slot>${l&&q`<calcite-icon class=${ne(_a.icon)} .flipRtl=${c} .icon=${l} scale=l></calcite-icon>`||""}<div class=${ne({[_a.textContentContainer]:!0,[_a.row]:!0})}><slot name=${JL.contentStart} @slotchange=${this.handleSlotChange}></slot><div class=${ne(_a.textContent)}>${a&&q`<div class=${ne(_a.heading)}>${a}</div>`||""}${e&&q`<div class=${ne(_a.description)}>${e}</div>`||""}</div><slot name=${JL.contentEnd} @slotchange=${this.handleSlotChange}></slot></div><slot name=${JL.contentBottom} @slotchange=${this.handleSlotChange}></slot></div></div>`}render(){const{disabled:e}=this;return Hr({disabled:e,children:this.href?q`<calcite-link .disabled=${e} .href=${this.href}>${this.renderTile()}</calcite-link>`:this.renderTile()})}};j5.properties={hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],active:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],description:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],embed:[7,{},{reflect:!0,type:Boolean}],heading:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],label:1,layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},j5.styles=hze;let qG=j5;Xt("calcite-tile",qG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const pze={container:"container"},fze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{box-sizing:border-box;display:inline-block}:host ::slotted(calcite-tile){margin-block-end:var(--calcite-spacing-px);margin-inline-end:var(--calcite-spacing-px)}.container{display:grid;grid-auto-rows:minmax(auto,1fr)}:host([scale=s]) .container{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}:host([scale=m]) .container{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}:host([scale=l]) .container{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}:host([layout=vertical]) .container{display:flex;flex-direction:column}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,V5=class V5 extends Yt{constructor(){super(),this.items=[],this.mutationObserver=sn("mutation",()=>this.updateTiles()),this.alignment="start",this.disabled=!1,this.layout="horizontal",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.calciteTileGroupSelect=Ne({cancelable:!1}),this.listen("calciteInternalTileKeyEvent",this.calciteInternalTileKeyEventListener),this.listen("calciteTileSelect",this.calciteTileSelectHandler)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.updateTiles()}willUpdate(e){(e.has("scale")&&(this.hasUpdated||this.scale!=="m")||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon"))&&this.updateTiles()}updated(){Gr(this)}loaded(){this.updateSelectedItems()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}getSlottedTiles(){var e;return(e=this.slotEl)==null?void 0:e.assignedElements({flatten:!0}).filter(i=>i==null?void 0:i.matches("calcite-tile"))}selectItem(e){var i;e&&((i=this.items)==null||i.forEach(r=>{const n=e===r;switch(this.selectionMode){case"multiple":n&&(r.selected=!r.selected);break;case"single":r.selected=n&&!r.selected;break;case"single-persist":r.selected=!!n;break}}),this.updateSelectedItems(),this.calciteTileGroupSelect.emit())}setSlotEl(e){this.slotEl=e}updateSelectedItems(){var i,r;const e=(i=this.items)==null?void 0:i.filter(n=>n.selected);(this.selectionMode==="single"||this.selectionMode==="single-persist")&&(e==null?void 0:e.length)>1?(this.selectedItems=[e.pop()],(r=this.items)==null||r.forEach(n=>{this.selectedItems.indexOf(n)===-1&&(n.selected=!1)})):this.selectedItems=e??[]}updateTiles(){var e;this.items=this.getSlottedTiles(),(e=this.items)==null||e.forEach(i=>{i.alignment=this.alignment,i.interactive=!0,i.layout=this.layout,i.scale=this.scale,i.selectionAppearance=this.selectionAppearance,i.selectionMode=this.selectionMode}),this.updateSelectedItems()}calciteInternalTileKeyEventListener(e){var i;if(e.composedPath().includes(this.el)){e.preventDefault(),e.stopPropagation();const r=(i=this.items)==null?void 0:i.filter(n=>!n.disabled);switch(e.detail.key){case"ArrowDown":case"ArrowRight":Jm(r,e.detail.target,"next");break;case"ArrowUp":case"ArrowLeft":Jm(r,e.detail.target,"previous");break;case"Home":Jm(r,e.detail.target,"first");break;case"End":Jm(r,e.detail.target,"last");break}}}calciteTileSelectHandler(e){e.composedPath().includes(this.el)&&this.selectItem(e.target)}render(){const e=this.selectionMode==="none"||this.selectionMode==="multiple"?"group":"radiogroup";return Hr({disabled:this.disabled,children:q`<div .ariaLabel=${this.label} class=${ne(pze.container)} .role=${e}><slot @slotchange=${this.updateTiles} ${yt(this.setSlotEl)}></slot></div>`})}};V5.properties={alignment:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],label:1,layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},V5.styles=fze;let WG=V5;Xt("calcite-tile-group",WG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const kne={scrim:"scrim",content:"content"},Ane={s:72,l:480},mze=dt`:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0 }to{--tw-text-opacity: 1 }}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,B5=class B5 extends Yt{constructor(){super(...arguments),this.resizeObserver=sn("resize",()=>this.handleResize()),this.messages=Mn(),this.hasContent=!1,this.loading=!1}connectedCallback(){var e;super.connectedCallback(),(e=this.resizeObserver)==null||e.observe(this.el)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}handleDefaultSlotChange(e){this.hasContent=eye(e)}storeLoaderEl(e){this.loaderEl=e,this.handleResize()}getScale(e){return e<Ane.s?"s":e>=Ane.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}render(){const{hasContent:e,loading:i,messages:r}=this;return q`<div class=${ne(kne.scrim)}>${i?q`<calcite-loader .label=${r.loading} .scale=${this.loaderScale} ${yt(this.storeLoaderEl)}></calcite-loader>`:null}<div class=${ne(kne.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};B5.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},B5.styles=mze;let JG=B5;Xt("calcite-scrim",JG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const an={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end",headerSlottedContent:"header-slotted-content",menuAction:"menu-action"},One={close:"close",collapse:"collapse"},ZL={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Fr={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const yze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height: calc(var(--calcite-icon-size) * 3);border-radius:var(--calcite-panel-corner-radius, var(--calcite-corner-radius-sharp))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}:host([scale=s]){--calcite-internal-panel-default-space: var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-sm-plus)}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1)}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2)}:host([scale=m]){--calcite-internal-panel-default-space: var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-md-plus)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0)}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1)}:host([scale=l]){--calcite-internal-panel-default-space: var(--calcite-spacing-lg);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-xl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1)}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-internal-panel-default-space);border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));background-color:var(--calcite-panel-background-color, var(--calcite-color-foreground-1))}.container{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;overflow:hidden;background-color:var(--calcite-color-background);padding:0;color:var(--calcite-color-text-2);transition:max-block-size var(--calcite-animation-timing),inline-size var(--calcite-animation-timing);box-sizing:border-box;font-size:var(--calcite-font-size--1)}.container *{box-sizing:border-box}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-panel-header-background-color, var(--calcite-color-foreground-1));border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-panel-header-border-block-end, var(--calcite-color-border-3)))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3))}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:.75rem;padding-block:.875rem;margin-inline-end:auto;justify-content:center}.header-content .heading,.header-content .description{display:block;flex:none;overflow-wrap:break-word;padding:0;line-height:var(--calcite-font-line-height-relative-snug)}.header-content .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-panel-heading-text-color, var(--calcite-color-text-1))}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-panel-description-text-color, var(--calcite-color-text-2))}#close,#collapse,.back-button,calcite-action-menu{--calcite-action-background-color: var(--calcite-panel-header-action-background-color);--calcite-action-background-color-hover: var(--calcite-panel-header-action-background-color-hover);--calcite-action-background-color-press: var(--calcite-panel-header-action-background-color-press);--calcite-action-text-color: var(--calcite-panel-header-action-text-color);--calcite-action-text-color-press: var(--calcite-panel-header-action-text-color-press)}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-panel-border-color, var(--calcite-color-border-3))}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{position:relative;display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;color:var(--calcite-color-text-2);outline-color:transparent;padding:var(--calcite-panel-space, var(--calcite-panel-content-space, 0));background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.header-content{flex:1 1 auto;justify-content:center;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-space)}.header-content.header-slotted-content{padding:var(--calcite-panel-header-content-space, var(--calcite-internal-panel-header-vertical-padding) var(--calcite-internal-panel-default-space))}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));padding:var(--calcite-panel-footer-space, var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-space)));background-color:var(--calcite-panel-footer-background-color, var(--calcite-color-foreground-1))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-space)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-space)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-space)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:.5rem;inset-inline:0;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}`,G5=class G5 extends Yt{constructor(){super(),this.resizeObserver=sn("resize",()=>this.resizeHandler()),this.messages=Mn(),this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasEndActions=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.hasHeaderContent=!1,this.hasMenuItems=!1,this.hasStartActions=!1,this.isClosed=!1,this.showHeaderContent=!1,this.closable=!1,this.closed=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.loading=!1,this.menuOpen=!1,this.menuPlacement=Lye,this.overlayPositioning="absolute",this.scale="m",this.calcitePanelClose=Ne({cancelable:!1}),this.calcitePanelScroll=Ne({cancelable:!1}),this.calcitePanelToggle=Ne({cancelable:!1}),this.listen("keydown",this.panelKeyDownHandler)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}async setFocus(){await pr(this),f1(this.containerEl)}async load(){this.isClosed=this.closed}willUpdate(e){e.has("closed")&&this.hasUpdated&&(this.closed?this.close():this.open())}updated(){Gr(this)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}resizeHandler(){const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}setContainerRef(e){this.containerEl=e}panelKeyDownHandler(e){this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.handleUserClose(),e.preventDefault())}handleUserClose(){this.closed=!0,this.calcitePanelClose.emit()}open(){this.isClosed=!1}async close(){const e=this.beforeClose??(()=>Promise.resolve());try{await e()}catch{requestAnimationFrame(()=>{this.closed=!1});return}this.isClosed=!0}collapse(){this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()}panelScrollHandler(){this.calcitePanelScroll.emit()}handleHeaderActionsStartSlotChange(e){this.hasStartActions=Ut(e)}handleHeaderActionsEndSlotChange(e){this.hasEndActions=Ut(e)}handleHeaderMenuActionsSlotChange(e){this.hasMenuItems=Ut(e)}handleActionBarSlotChange(e){const i=Tp(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length}handleHeaderContentSlotChange(e){this.hasHeaderContent=Ut(e)}handleFabSlotChange(e){this.hasFab=Ut(e)}handleFooterActionsSlotChange(e){this.hasFooterActions=Ut(e)}handleFooterEndSlotChange(e){this.hasFooterEndContent=Ut(e)}handleFooterStartSlotChange(e){this.hasFooterStartContent=Ut(e)}handleFooterSlotChange(e){this.hasFooterContent=Ut(e)}contentBottomSlotChangeHandler(e){this.hasContentBottom=Ut(e)}contentTopSlotChangeHandler(e){this.hasContentTop=Ut(e)}setPanelScrollEl(e){var i,r;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((r=this.resizeObserver)==null||r.observe(e),this.resizeHandler())}handleAlertsSlotChange(e){var i;(i=Tp(e))==null||i.map(r=>{r.nodeName==="CALCITE-ALERT"&&(r.embedded=!0)})}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:n}=this,s=e?DU({class:an.heading,level:i,children:e}):null,o=r?q`<span class=${ne(an.description)}>${r}</span>`:null;return!n&&(s||o)?nt("header-content",q`<div class=${ne(an.headerContent)}>${s}${o}</div>`):null}renderActionBar(){return q`<div class=${ne(an.actionBarContainer)} .hidden=${!this.hasActionBar}><slot name=${Fr.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`}renderHeaderSlottedContent(){return nt("slotted-header-content",q`<div class=${ne({[an.headerContent]:!0,[an.headerSlottedContent]:!0})} .hidden=${!this.hasHeaderContent}><slot name=${Fr.headerContent} @slotchange=${this.handleHeaderContentSlotChange}></slot></div>`)}renderHeaderStartActions(){const{hasStartActions:e}=this;return nt("header-actions-start",q`<div class=${ne({[an.headerActionsStart]:!0,[an.headerActions]:!0})} .hidden=${!e}><slot name=${Fr.headerActionsStart} @slotchange=${this.handleHeaderActionsStartSlotChange}></slot></div>`)}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:n,collapseDirection:s,collapsible:o,hasMenuItems:a}=this,{collapse:l,expand:c,close:h}=i,m=[ZL.expand,ZL.collapse];s==="up"&&m.reverse();const y=o?q`<calcite-action .ariaExpanded=${!n} .ariaLabel=${l} .icon=${n?m[0]:m[1]} id=${One.collapse} @click=${this.collapse} .scale=${this.scale} .text=${l} title=${(n?c:l)??Ge}></calcite-action>`:null,v=r?q`<calcite-action .ariaLabel=${h} .icon=${ZL.close} id=${One.close} @click=${this.handleUserClose} .scale=${this.scale} .text=${h} title=${h??Ge}></calcite-action>`:null,w=q`<slot name=${Fr.headerActionsEnd} @slotchange=${this.handleHeaderActionsEndSlotChange}></slot>`,x=e||y||v||a;return nt("header-actions-end",q`<div class=${ne({[an.headerActionsEnd]:!0,[an.headerActions]:!0})} .hidden=${!x}>${w}${this.renderMenu()}${y}${v}</div>`)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r,menuFlipPlacements:n,menuPlacement:s}=this;return nt("menu",q`<calcite-action-menu .flipPlacements=${n??["top","bottom"]} .hidden=${!e} .label=${i.options} .open=${r} .overlayPositioning=${this.overlayPositioning} .placement=${s}><calcite-action class=${ne(an.menuAction)} .icon=${ZL.menu} .scale=${this.scale} slot=${SE.trigger} .text=${i.options}></calcite-action><slot name=${Fr.headerMenuActions} @slotchange=${this.handleHeaderMenuActionsSlotChange}></slot></calcite-action-menu>`)}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:n,collapsible:s,hasMenuItems:o,hasActionBar:a}=this,l=this.renderHeaderContent(),c=e||!!l||i||r||s||n||o;return this.showHeaderContent=c,q`<header class=${ne(an.header)} .hidden=${!(c||a)}><div class=${ne({[an.headerContainer]:!0,[an.headerContainerBorderEnd]:a})} .hidden=${!c}>${this.renderHeaderStartActions()}${this.renderHeaderSlottedContent()}${l}${this.renderHeaderActionsEnd()}</div>${this.renderActionBar()}${this.renderContentTop()}</header>`}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:r,hasFooterActions:n}=this,s=i||e||r||n;return q`<footer class=${ne(an.footer)} .hidden=${!s}><div class=${ne(an.footerContent)} .hidden=${!r}><slot name=${Fr.footer} @slotchange=${this.handleFooterSlotChange}></slot></div><div class=${ne(an.footerStart)} .hidden=${r||!i}><slot name=${Fr.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot></div><div class=${ne(an.footerEnd)} .hidden=${r||!e}><slot name=${Fr.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></div><div class=${ne(an.footerActions)} .hidden=${r||!n}>${nt("footer-actions-slot",q`<slot name=${Fr.footerActions} @slotchange=${this.handleFooterActionsSlotChange}></slot>`)}</div></footer>`}renderContent(){return q`<div class=${ne(an.contentWrapper)} .hidden=${this.collapsible&&this.collapsed} @scroll=${this.panelScrollHandler} ${yt(this.setPanelScrollEl)}><slot></slot>${this.renderFab()}</div>`}renderContentBottom(){return q`<div class=${ne(an.contentBottom)} .hidden=${!this.hasContentBottom}><slot name=${Fr.contentBottom} @slotchange=${this.contentBottomSlotChangeHandler}></slot></div>`}renderContentTop(){return q`<div class=${ne(an.contentTop)} .hidden=${!this.hasContentTop}><slot name=${Fr.contentTop} @slotchange=${this.contentTopSlotChangeHandler}></slot></div>`}renderFab(){return q`<div class=${ne(an.fabContainer)} .hidden=${!this.hasFab}><slot name=${Fr.fab} @slotchange=${this.handleFabSlotChange}></slot></div>`}render(){const{disabled:e,loading:i,isClosed:r}=this,n=q`<article .ariaBusy=${i} class=${ne(an.container)} .hidden=${r} ${yt(this.setContainerRef)}>${this.renderHeaderNode()}${this.renderContent()}${this.renderContentBottom()}${this.renderFooterNode()}${nt("alerts",q`<slot name=${Fr.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</article>`;return Hr({disabled:e,children:q`${i?q`<calcite-scrim .loading=${i}></calcite-scrim>`:null}${n}`})}};G5.properties={hasActionBar:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasFab:[16,{},{state:!0}],hasFooterActions:[16,{},{state:!0}],hasFooterContent:[16,{},{state:!0}],hasFooterEndContent:[16,{},{state:!0}],hasFooterStartContent:[16,{},{state:!0}],hasHeaderContent:[16,{},{state:!0}],hasMenuItems:[16,{},{state:!0}],hasStartActions:[16,{},{state:!0}],isClosed:[16,{},{state:!0}],showHeaderContent:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},G5.styles=yze;let tz=G5;Xt("calcite-panel",tz);const gze=Object.freeze(Object.defineProperty({__proto__:null,Panel:tz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const vze={dropdownTrigger:"trigger"},Pne={content:"calcite-dropdown-content",wrapper:"calcite-dropdown-wrapper"},bze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.calcite-dropdown-wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset,left,opacity;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}.calcite-dropdown-content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.calcite-trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,Kk=class Kk extends Yt{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=`calcite-dropdown-${Ml()}`,this.items=[],this.mutationObserver=sn("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=sn("resize",e=>this.resizeObserverCallback(e)),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=xE,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=Ne({cancelable:!1}),this.calciteDropdownBeforeOpen=Ne({cancelable:!1}),this.calciteDropdownClose=Ne({cancelable:!1}),this.calciteDropdownOpen=Ne({cancelable:!1}),this.calciteDropdownSelect=Ne({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:n,offsetSkidding:s,overlayPositioning:o,placement:a,referenceEl:l}=this;return EO(this,{floatingEl:r,referenceEl:l,offsetDistance:n,offsetSkidding:s,overlayPositioning:o,placement:a,flipPlacements:i,type:"menu"},e)}async setFocus(){await pr(this),f1(this.referenceEl)}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),wl(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==xE)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){Gr(this)}loaded(){this.updateSelectedItems(),wl(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),sC(this)}openHandler(){y1(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,n=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":Jm(n,r,"next");break;case"ArrowUp":Jm(n,r,"previous");break;case"Home":Jm(n,r,"first");break;case"End":Jm(n,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?tY(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e==null?void 0:e.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(i=>{const{target:r}=i;this.hasUpdated&&(r===this.referenceEl?this.setDropdownWidth():r===this.scrollerEl&&this.setMaxScrollerHeight())})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this,r=e==null?void 0:e.clientWidth;i.style.minWidth=`${r}px`}setMaxScrollerHeight(){const e=this.getMaxScrollerHeight();this.scrollerEl.style.maxBlockSize=e>0?`${e}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){var i;e&&((i=this.resizeObserver)==null||i.observe(e),this.scrollerEl=e,this.transitionEl=e)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}async onOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),CO(this)}setReferenceEl(e){var i;this.referenceEl=e,wl(this),e&&((i=this.resizeObserver)==null||i.observe(e))}setFloatingEl(e){this.floatingEl=e,wl(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}oC(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getMaxScrollerHeight(){const{maxItems:e,items:i}=this;return i.length>=e&&e>0?this.getYDistance(this.scrollerEl,i[e-1]):0}getYDistance(e,i){const r=e.getBoundingClientRect();return i.getBoundingClientRect().bottom-r.top}closeCalciteDropdown(e=!0){this.open=!1,e&&ab(this.triggers[0])}focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1,i&&ab(i)}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return Hr({disabled:this.disabled,children:q`<div class="calcite-trigger-container" .id=${`${i}-menubutton`} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${yt(this.setReferenceEl)}><slot aria-controls=${`${i}-menu`} .ariaExpanded=${e} aria-haspopup=menu name=${vze.dropdownTrigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${ne({[Pne.wrapper]:!0,[FG("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${yt(this.setFloatingEl)}><div aria-labelledby=${`${i}-menubutton`} class=${ne({[Pne.content]:!0,[Up.animation]:!0,[Up.animationActive]:e})} .id=${`${i}-menu`} role=menu ${yt(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};Kk.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},Kk.shadowRootOptions={mode:"open",delegatesFocus:!0},Kk.styles=bze;let iz=Kk;Xt("calcite-dropdown",iz);const KTt=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:iz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Og={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const wze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,H5=class H5 extends Yt{constructor(){super(),this.childLink=Tn(),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=Ne({cancelable:!1}),this.calciteInternalDropdownCloseRequest=Ne({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=Ne({cancelable:!1}),this.calciteInternalDropdownItemSelect=Ne({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(){var e;await pr(this),(e=this.el)==null||e.focus()}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){Gr(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:n}=this,s=q`<calcite-icon class=${ne(Og.iconStart)} .flipRtl=${n==="start"||n==="both"} .icon=${this.iconStart} .scale=${Fi(this.scale)}></calcite-icon>`,o=q`<span class=${ne(Og.itemContent)}><slot></slot></span>`,a=q`<calcite-icon class=${ne(Og.iconEnd)} .flipRtl=${n==="end"||n==="both"} .icon=${this.iconEnd} .scale=${Fi(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[s,o,a]:this.iconStart?[s,o]:this.iconEnd?[o,a]:o,c=e?q`<a .ariaLabel=${r} class=${ne(Og.link)} href=${e??tn} rel=${this.rel??tn} tabindex=-1 target=${this.target??tn} ${yt(this.childLink)}>${l}</a>`:l,h=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",m=i!=="none"?$O(this.selected):null,{disabled:y}=this;return this.el.ariaChecked=m,this.el.ariaLabel=e?"":r,this.el.role=h,Ap(this.el,"tabIndex",y?-1:0),Hr({disabled:y,children:q`<div class=${ne({[Og.container]:!0,[Og.containerNone]:i==="none"})}>${i!=="none"?q`<calcite-icon class=${ne(Og.icon)} .icon=${i==="multiple"?"check":"bullet-point"} .scale=${Fi(this.scale)}></calcite-icon>`:null}${c}</div>`})}};H5.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},H5.styles=wze;let rz=H5;Xt("calcite-dropdown-item",rz);const QTt=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:rz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Lne={title:"dropdown-title",separator:"dropdown-separator"},_ze=dt`:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,Qk=class Qk extends Yt{constructor(){super(),this.mutationObserver=sn("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=Ne({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){var e;super.connectedCallback(),this.updateItems(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?q`<span aria-hidden=true class=${ne(Lne.title)}>${this.groupTitle}</span>`:null,i=this.position>0?q`<div class=${ne(Lne.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",q`<div class=${ne({[Og.container]:!0})}>${i}${e}<slot></slot></div>`}};Qk.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},Qk.shadowRootOptions={mode:"open",delegatesFocus:!0},Qk.styles=_ze;let nz=Qk;Xt("calcite-dropdown-group",nz);const eEt=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:nz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Rne={handle:"handle",dropdown:"dropdown"},Dne={drag:"drag",blank:"blank"},VV={label:"{label}",position:"{position}",total:"{total}"},Nne=["top","up","down","bottom"],xze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,q5=class q5 extends Yt{constructor(){super(...arguments),this.disabled=!1,this.messages=Mn({blocking:!0}),this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=xE,this.scale="m",this.calciteSortHandleBeforeClose=Ne({cancelable:!1}),this.calciteSortHandleBeforeOpen=Ne({cancelable:!1}),this.calciteSortHandleClose=Ne({cancelable:!1}),this.calciteSortHandleMove=Ne({cancelable:!0}),this.calciteSortHandleOpen=Ne({cancelable:!1}),this.calciteSortHandleReorder=Ne({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get isSetDisabled(){const{setPosition:e,setSize:i,moveToItems:r}=this;return this.hasSetInfo?e<1||i<1||i<2&&r.length<1:!1}async setFocus(){var e;await pr(this),(e=this.dropdownEl)==null||e.setFocus()}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){Gr(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:n}=this;if(!this.hasSetInfo)return e??"";let s=e?i.repositionLabel.replace(VV.label,e):i.reposition;return s=s.replace(VV.position,r?r.toString():""),s.replace(VV.total,n?n.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(n=>n.id===i);this.calciteSortHandleMove.emit({moveTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:n,placement:s,scale:o,widthScale:a}=this,l=this.getLabel(),c=e||this.isSetDisabled;return Hr({disabled:e,children:q`<calcite-dropdown class=${ne(Rne.dropdown)} .disabled=${c} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${n} .placement=${s} .scale=${o} .widthScale=${a} ${yt(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent class=${ne(Rne.handle)} .dragHandle=${!0} .icon=${e?Dne.blank:Dne.drag} .label=${l} .scale=${o} slot=trigger .text=${l} title=${l??Ge}></calcite-action>${this.renderGroup()}${this.renderMoveToGroup()}</calcite-dropdown>`})}renderMoveToItem(e){return nt(e.id,q`<calcite-dropdown-item data-id=${e.id??Ge} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderGroup(){return this.hasSetInfo?nt("reorder",q`<calcite-dropdown-group .groupTitle=${this.messages.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?nt("move-to-items",q`<calcite-dropdown-group .groupTitle=${e.moveTo} .scale=${r} selection-mode=none>${i.map(n=>this.renderMoveToItem(n))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return nt(Nne[e],q`<calcite-dropdown-item data-value=${Nne[e]??Ge} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};q5.properties={hasSetInfo:[16,{},{state:!0}],isSetDisabled:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],widthScale:[3,{},{reflect:!0}]},q5.styles=xze;let ZG=q5;Xt("calcite-sort-handle",ZG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Zye=dt`:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const v0={content:"content",toggle:"toggle",header:"header"},wn={actionsEnd:"actions-end",container:"container",content:"content",contentStart:"content-start",controlContainer:"control-container",description:"description",header:"header",headerContainer:"header-container",headerHasText:"header--has-text",heading:"heading",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",iconEndContainer:"icon-end-container",invalid:"invalid",statusIcon:"status-icon",title:"title",toggle:"toggle",toggleIcon:"toggle-icon",valid:"valid"},RI={actionsEnd:"actions-end",contentStart:"content-start",control:"control",headerMenuActions:"header-menu-actions",icon:"icon"},BV={expanded:"chevron-up",collapsed:"chevron-down",valid:"check-circle",invalid:"exclamation-mark-triangle"},Sze=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;border-width:0px;border-block-end-width:1px;border-style:solid;padding:0;transition-property:margin;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;transition-timing-function:cubic-bezier(.215,.44,.42,.88);flex-basis:auto;transition-duration:var(--calcite-animation-timing);border-color:var(--calcite-block-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}.header{justify-content:flex-start}.header--has-text{padding:var(--calcite-spacing-md)}.header,.toggle{grid-area:header}.header-container{display:grid;align-items:stretch;grid-template:auto/auto 1fr auto auto;grid-template-areas:"handle header control menu actions-end";grid-column:header-start/actions-end;grid-row:1/2}.content-start,.icon,.icon--start,.icon--end{margin-inline-end:var(--calcite-spacing-md)}.icon calcite-loader{margin-inline-end:var(--calcite-spacing-xxxs)}.icon--start,.icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.actions-end{grid-area:actions-end}.toggle{margin:0;display:flex;cursor:pointer;flex-wrap:nowrap;align-items:center;justify-content:space-between;border-style:none;padding:0;font-family:var(--calcite-font-family);outline-color:transparent;text-align:initial;background-color:var(--calcite-block-header-background-color, transparent)}.toggle:hover{background-color:var(--calcite-block-header-background-color-hover, var(--calcite-color-foreground-2))}.toggle:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:active{background-color:var(--calcite-block-header-background-color-press, var(--calcite-color-foreground-3))}calcite-loader[inline]{grid-area:control;align-self:center}calcite-handle{grid-area:handle}.title{margin:0}.header .title .heading{padding:0;font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);line-height:1.25;transition-property:color;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);word-wrap:break-word;word-break:break-word;color:var(--calcite-block-heading-text-color, var(--calcite-color-text-2))}.description{margin-block-start:.125rem;padding:0;font-size:var(--calcite-font-size--2);line-height:1.375;word-wrap:break-word;word-break:break-word;color:var(--calcite-block-description-text-color, var(--calcite-color-text-3))}.icon{display:flex}.status-icon.valid{color:var(--calcite-color-status-success)}.status-icon.invalid{color:var(--calcite-color-status-danger)}@keyframes spin{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}.icon-end-container{display:flex;align-items:center;margin-inline-start:auto}.toggle-icon{align-self:center;justify-self:end;transition-property:color;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);margin-inline-end:var(--calcite-spacing-md);color:var(--calcite-block-icon-color, var(--calcite-color-text-3))}.toggle:hover .toggle-icon{color:var(--calcite-block-icon-color-hover, var(--calcite-color-text-1))}.container{position:relative;display:flex;block-size:100%;flex-direction:column}.content{position:relative;min-block-size:0px;flex:1 1 0%}@keyframes in{0%{opacity:0}to{opacity:1}}.content{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;padding-block:var(--calcite-block-padding, var(--calcite-spacing-sm));padding-inline:var(--calcite-block-padding, var(--calcite-spacing-md))}.content-start{display:flex;align-items:center;color:var(--calcite-block-text-color, var(--calcite-color-text-3))}.control-container{margin:0;display:flex;grid-area:control}calcite-action-menu{grid-area:menu}.actions-end{display:flex;align-items:stretch}:host([expanded]){margin-block:.5rem}:host([expanded]) .header .title .heading{color:var(--calcite-block-heading-text-color-press, var(--calcite-color-text-1))}:host([expanded]) .description{color:var(--calcite-block-description-text-color, var(--calcite-color-text-2))}:host([expanded]) .icon--start,:host([expanded]) .icon--end{color:var(--calcite-block-icon-color, var(--calcite-color-text-1))}:host([hidden]){display:none}[hidden]{display:none}`,W5=class W5 extends Yt{constructor(){super(...arguments),this.transitionProp="margin-top",this.messages=Mn(),this.hasContentStart=!1,this.hasControl=!1,this.hasEndActions=!1,this.hasIcon=!1,this.hasMenuActions=!1,this.collapsible=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.loading=!1,this.menuPlacement=Lye,this.moveToItems=[],this.overlayPositioning="absolute",this.setPosition=null,this.setSize=null,this.sortHandleOpen=!1,this.calciteBlockBeforeClose=Ne({cancelable:!1}),this.calciteBlockBeforeOpen=Ne({cancelable:!1}),this.calciteBlockClose=Ne({cancelable:!1}),this.calciteBlockOpen=Ne({cancelable:!1}),this.calciteBlockSortHandleBeforeClose=Ne({cancelable:!1}),this.calciteBlockSortHandleBeforeOpen=Ne({cancelable:!1}),this.calciteBlockSortHandleClose=Ne({cancelable:!1}),this.calciteBlockSortHandleOpen=Ne({cancelable:!1}),this.calciteBlockToggle=Ne({cancelable:!1})}get open(){return this.expanded}set open(e){dA.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(){await pr(this),f1(this.el)}connectedCallback(){super.connectedCallback(),this.transitionEl=this.el}load(){!this.heading&&!this.label&&dA.warn(`${this.el.tagName} is missing both heading & label. Please provide a heading or label for the component to be accessible.`)}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&y1(this),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler()}updated(){Gr(this)}onBeforeOpen(){this.calciteBlockBeforeOpen.emit()}onOpen(){this.calciteBlockOpen.emit()}onBeforeClose(){this.calciteBlockBeforeClose.emit()}onClose(){this.calciteBlockClose.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteBlockSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteBlockSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteBlockSortHandleOpen.emit()}onHeaderClick(){this.expanded=!this.expanded,this.calciteBlockToggle.emit()}controlSlotChangeHandler(e){this.hasControl=Ut(e)}menuActionsSlotChangeHandler(e){this.hasMenuActions=Ut(e)}iconSlotChangeHandler(e){this.hasIcon=Ut(e)}actionsEndSlotChangeHandler(e){this.hasEndActions=Ut(e)}handleContentStartSlotChange(e){this.hasContentStart=Ut(e)}renderScrim(){const{loading:e}=this,i=q`<slot></slot>`;return[e?q`<calcite-scrim .loading=${e}></calcite-scrim>`:null,i]}renderLoaderStatusIcon(){const{loading:e,messages:i,status:r}=this;return e?nt("loader",q`<div class=${ne(wn.icon)}><calcite-loader inline .label=${i.loading}></calcite-loader></div>`):r?nt("status-icon",q`<div class=${ne(wn.icon)}><calcite-icon class=${ne({[wn.statusIcon]:!0,[wn.valid]:r=="valid",[wn.invalid]:r=="invalid"})} .icon=${BV[r]} scale=s></calcite-icon></div>`):nt("icon-slot",q`<div class=${ne(wn.icon)} .hidden=${!this.hasIcon}>${nt("icon-slot",q`<slot name=${RI.icon} @slotchange=${this.iconSlotChangeHandler}></slot>`)}</div>`)}renderActionsEnd(){return q`<div class=${ne(wn.actionsEnd)} .hidden=${!this.hasEndActions}><slot name=${RI.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderContentStart(){return q`<div class=${ne(wn.contentStart)} .hidden=${!this.hasContentStart}><slot name=${RI.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderTitle(){const{heading:e,headingLevel:i,description:r}=this;return e||r?q`<div class=${ne(wn.title)}>${DU({class:wn.heading,level:i,children:e})}${r?q`<div class=${ne(wn.description)}>${r}</div>`:null}</div>`:null}renderIcon(e){const{iconFlipRtl:i}=this,r=i==="both"||e==="start"?i==="start":i==="end",n=e==="start"?this.iconStart:this.iconEnd,s=e==="start"?wn.iconStart:wn.iconEnd;if(n)return nt(n,q`<calcite-icon class=${ne(s)} .flipRtl=${r} .icon=${n} scale=s></calcite-icon>`)}render(){const{collapsible:e,loading:i,expanded:r,label:n,heading:s,messages:o,description:a,menuFlipPlacements:l,menuPlacement:c,moveToItems:h,setPosition:m,setSize:y,dragDisabled:v}=this,w=r?o.collapse:o.expand,x=q`<header class=${ne({[wn.header]:!0,[wn.headerHasText]:!!(s||a)})} id=${v0.header}>${this.renderIcon("start")}${this.renderContentStart()}${this.renderLoaderStatusIcon()}${this.renderTitle()}</header>`,S=r?BV.expanded:BV.collapsed,C=q`<div class=${ne(wn.headerContainer)}>${this.dragHandle?q`<calcite-sort-handle .disabled=${v} .label=${s||n} .moveToItems=${h} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .setPosition=${m} .setSize=${y} ${yt(this.setSortHandleEl)}></calcite-sort-handle>`:null}${e?q`<button aria-controls=${v0.content} aria-describedby=${v0.header} .ariaExpanded=${e?r:null} class=${ne(wn.toggle)} id=${v0.toggle} @click=${this.onHeaderClick} title=${w??Ge}>${x}<div class=${ne(wn.iconEndContainer)}>${this.renderIcon("end")}<calcite-icon class=${ne(wn.toggleIcon)} .icon=${S} scale=s></calcite-icon></div></button>`:this.iconEnd?q`<div>${x}<div class=${ne(wn.iconEndContainer)}>${this.renderIcon("end")}</div></div>`:x}<div aria-labelledby=${v0.header} class=${ne(wn.controlContainer)} .hidden=${!this.hasControl}><slot name=${RI.control} @slotchange=${this.controlSlotChangeHandler}></slot></div><calcite-action-menu .flipPlacements=${l??["top","bottom"]} .hidden=${!this.hasMenuActions} .label=${o.options} .overlayPositioning=${this.overlayPositioning} .placement=${c}><slot name=${RI.headerMenuActions} @slotchange=${this.menuActionsSlotChangeHandler}></slot></calcite-action-menu>${this.renderActionsEnd()}</div>`;return Hr({disabled:this.disabled,children:q`<article aria-label=${n??Ge} .ariaBusy=${i} class=${ne({[wn.container]:!0})}>${C}<section aria-labelledby=${v0.toggle} class=${ne(wn.content)} .hidden=${!r} id=${v0.content}>${this.renderScrim()}</section></article>`})}};W5.properties={hasContentStart:[16,{},{state:!0}],hasControl:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasIcon:[16,{},{state:!0}],hasMenuActions:[16,{},{state:!0}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],label:1,menuFlipPlacements:[0,{},{attribute:!1}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],status:[3,{},{reflect:!0}]},W5.styles=[Sze,Zye];let YG=W5;Xt("calcite-block",YG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Lf={container:"container",containerContent:"container-content",hasProgress:"progress-bar",hide:"hide",primary:"primary",secondary:"secondary",tertiary:"tertiary"},Do={logo:"logo",user:"user",progress:"progress",navigationAction:"navigation-action",contentStart:"content-start",contentEnd:"content-end",contentCenter:"content-center",navSecondary:"navigation-secondary",navTertiary:"navigation-tertiary"},$ze={hamburger:"hamburger"},Tze=dt`:host([hidden]){display:none}[hidden]{display:none}:host{display:block}.container{display:flex;inline-size:100%;flex-direction:column;margin-block:0;margin-inline:auto;background-color:var(--calcite-navigation-background-color, var(--calcite-navigation-background, var(--calcite-color-foreground-1)))}.container.primary,.container.secondary,.container.tertiary{border-block-end:1px solid;border-block-end-color:var(--calcite-navigation-border-color, var(--calcite-color-border-3))}.user,.logo{display:flex}.hide{display:none}.primary{block-size:4rem}.secondary,.tertiary{block-size:3rem}.container-content{margin-inline:auto;display:flex;block-size:100%;inline-size:100%;margin-block:0;inline-size:var(--calcite-navigation-width, 100%);max-inline-size:100%}.container-content.progress-bar{margin-block-start:.125rem}slot[name]{display:flex;flex-direction:row}slot[name=navigation-secondary]::slotted(calcite-navigation),slot[name=navigation-tertiary]::slotted(calcite-navigation){inline-size:100%}slot[name=content-start]::slotted(*),slot[name=content-center]::slotted(*),slot[name=content-end]::slotted(*){display:flex;flex-direction:row;align-items:center}slot[name=progress],slot[name=progress] calcite-progress{inset-block-start:0;inset-inline:0}slot[name=content-end]{margin-inline-start:auto}slot[name=content-start]{margin-inline-end:auto}slot[name=content-end],slot[name=logo]~slot[name=user],slot[name=user]:only-child{margin-inline-start:auto}slot[name=content-center]{margin-inline-start:auto;margin-inline-end:auto}slot[name=content-start]~slot[name=content-center]{margin-inline-start:0px}slot[name=content-start]~slot[name=content-end],slot[name=content-center]~slot[name=content-end],slot[name=content-center]~slot[name=user],slot[name=content-end]~slot[name=user]{margin:0}`,J5=class J5 extends Yt{constructor(){super(...arguments),this.navigationActionEl=Tn(),this.navigationAction=!1,this.calciteNavigationActionSelect=Ne({cancelable:!1})}async setFocus(){var e;return await pr(this),(e=this.navigationActionEl.value)==null?void 0:e.setFocus()}actionClickHandler(){this.calciteNavigationActionSelect.emit()}handleUserSlotChange(e){this.isPrimaryLevel()&&(this.userSlotHasElements=Ut(e))}handleLogoSlotChange(e){this.isPrimaryLevel()&&(this.logoSlotHasElements=Ut(e))}handleContentStartSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentStartSlotHasElements=Ut(e))}handleContentEndSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentEndSlotHasElements=Ut(e))}handleContentCenterSlotChange(e){this.isPrimaryLevel()&&(this.primaryContentCenterSlotHasElements=Ut(e))}handleSecondarySlotChange(e){this.secondarySlotHasElements=Ut(e)}handleTertiarySlotChange(e){this.tertiarySlotHasElements=Ut(e)}handleMenuActionSlotChange(e){this.isPrimaryLevel()&&(this.navigationActionSlotHasElements=Ut(e),this.navigationActionSlotHasElements&&(this.navigationAction=!1))}handleProgressSlotChange(e){this.isPrimaryLevel()&&(this.progressSlotHasElement=Ut(e))}isPrimaryLevel(){return this.el.slot!==Do.navSecondary&&this.el.slot!==Do.navTertiary}renderMenuAction(){return q`<slot name=${Do.navigationAction} @slotchange=${this.handleMenuActionSlotChange}>${this.navigationAction&&q`<calcite-action .icon=${$ze.hamburger} @click=${this.actionClickHandler} .text=${this.label} ${yt(this.navigationActionEl)}></calcite-action>`||""}</slot>`}render(){const e=this.logoSlotHasElements||this.userSlotHasElements||this.navigationActionSlotHasElements||this.primaryContentCenterSlotHasElements||this.primaryContentEndSlotHasElements||this.primaryContentStartSlotHasElements||this.navigationAction,i=this.el.slot;return q`<div class=${ne({[Lf.container]:!0,[Lf.secondary]:i===Do.navSecondary,[Lf.tertiary]:i===Do.navTertiary,[Lf.primary]:e})}><div class=${ne({[Lf.hide]:!this.progressSlotHasElement,[Do.progress]:!0})}><slot name=${Do.progress} @slotchange=${this.handleProgressSlotChange}></slot></div><div class=${ne({[Lf.containerContent]:!0,[Lf.hasProgress]:this.progressSlotHasElement})}>${this.renderMenuAction()}<div class=${ne({[Lf.hide]:!this.logoSlotHasElements,[Do.logo]:!0})}><slot name=${Do.logo} @slotchange=${this.handleLogoSlotChange}></slot></div><slot name=${Do.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot><slot name=${Do.contentCenter} @slotchange=${this.handleContentCenterSlotChange}></slot><slot name=${Do.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot><div class=${ne({[Lf.hide]:!this.userSlotHasElements,[Do.user]:!0})}><slot name=${Do.user} @slotchange=${this.handleUserSlotChange}></slot></div></div></div><slot name=${Do.navSecondary} @slotchange=${this.handleSecondarySlotChange}></slot><slot name=${Do.navTertiary} @slotchange=${this.handleTertiarySlotChange}></slot>`}};J5.properties={logoSlotHasElements:[16,{},{state:!0}],navigationActionSlotHasElements:[16,{},{state:!0}],primaryContentCenterSlotHasElements:[16,{},{state:!0}],primaryContentEndSlotHasElements:[16,{},{state:!0}],primaryContentStartSlotHasElements:[16,{},{state:!0}],progressSlotHasElement:[16,{},{state:!0}],secondarySlotHasElements:[16,{},{state:!0}],tertiarySlotHasElements:[16,{},{state:!0}],userSlotHasElements:[16,{},{state:!0}],label:1,navigationAction:[7,{},{reflect:!0,type:Boolean}]},J5.styles=Tze;let XG=J5;Xt("calcite-navigation",XG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const zc={container:"container",containerLink:"container--link",textContainer:"text-container",heading:"heading",description:"description",image:"image",standalone:"standalone",icon:"icon"},Eze=dt`:host{display:inline-flex}.container{margin:0;display:flex;align-items:center;justify-content:center;font-size:var(--calcite-font-size-0);line-height:1.25rem;background-color:var(--calcite-navigation-background-color, var(--calcite-internal-navigation-logo-background-color, var(--calcite-color-foreground-1)));border-block-end:2px solid var(--calcite-color-transparent);transition-property:background-color;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.container--link{cursor:pointer;text-decoration-line:none;outline-color:transparent}:host(:focus) .container--link{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.image,.icon{margin:0;display:flex;block-size:1.75rem;padding-inline:1rem;color:var(--calcite-navigation-logo-text-color, var(--calcite-icon-color, var(--calcite-internal-navigation-logo-text-color, inherit)))}.image~.icon{padding-inline-start:0px}.image~.text-container,.icon~.text-container{padding-inline-start:0px}:host([href]:hover),:host([href]:focus){--calcite-internal-navigation-logo-background-color: var(--calcite-color-foreground-2)}:host([href]:active){--calcite-internal-navigation-logo-background-color: var(--calcite-color-foreground-3)}:host([active]) .container{border-block-end-color:var(--calcite-navigation-accent-color, var(--calcite-color-brand))}:host([active]),:host([href]:active){--calcite-internal-navigation-logo-text-color: var(--calcite-color-brand)}.text-container{margin-block-start:.125rem;display:flex;flex-direction:column;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-inline:1rem;text-align:start}.heading{margin-inline-start:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-navigation-logo-heading-text-color, var(--calcite-color-text-1))}.standalone{font-size:var(--calcite-font-size-1)}.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--calcite-color-text-2);color:var(--calcite-navigation-logo-text-color, var(--calcite-color-text-2));font-size:var(--calcite-font-size--1)}:host([hidden]){display:none}[hidden]{display:none}`,eA=class eA extends Yt{constructor(){super(...arguments),this.iconFlipRtl=!1}async setFocus(){await pr(this),this.href&&this.el.focus()}renderIcon(){return q`<calcite-icon class=${ne(zc.icon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} scale=l></calcite-icon>`}renderHeaderContent(){const{heading:e,headingLevel:i,description:r}=this,n=e?nt(zc.heading,DU({class:{[zc.heading]:!0,[zc.standalone]:!this.description},level:i,children:e})):null,s=r?nt(zc.description,q`<span class=${ne(zc.description)}>${r}</span>`):null;return n||s?nt(zc.textContainer,q`<div class=${ne(zc.textContainer)}>${n}${s}</div>`):null}render(){const{icon:e,href:i,label:r,rel:n,target:s,thumbnail:o}=this,a=q`${o&&q`<img alt=${(r||"")??tn} class=${ne(zc.image)} src=${o??tn}>`||""}${e&&this.renderIcon()||""}${this.renderHeaderContent()}`;return i?q`<a class=${ne({[zc.container]:!0,[zc.containerLink]:!0})} href=${i??tn} rel=${n??tn} target=${s??tn}>${a}</a>`:q`<div class=${ne(zc.container)}>${a}</div>`}};eA.properties={active:[7,{},{reflect:!0,type:Boolean}],description:1,heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],href:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,rel:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],thumbnail:1},eA.shadowRootOptions={mode:"open",delegatesFocus:!0},eA.styles=Eze;let KG=eA;Xt("calcite-navigation-logo",KG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Cze=dt`:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,Z5=class Z5 extends Yt{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=ca(this.el);return q`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class="track"><div class=${ne({bar:!0,indeterminate:this.type==="indeterminate",[lu.rtl]:r==="rtl",reversed:this.reversed})} style=${HZ(i)}></div></div>${this.text?q`<div class="text">${this.text}</div>`:null}</div>`}};Z5.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},Z5.styles=Cze;let QG=Z5;Xt("calcite-progress",QG);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Ize=new RegExp("\\.(0+)?$"),Mze=new RegExp("0+$"),ur=class ur{constructor(e){if(e instanceof ur)return e;const[i,r]=Dze(e).split(".").concat("");this.value=BigInt(i+r.padEnd(ur.DECIMALS,"0").slice(0,ur.DECIMALS))+BigInt(ur.ROUNDED&&r[ur.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(ur.DECIMALS+1,"0"),i=e.slice(0,-ur.DECIMALS),r=e.slice(-ur.DECIMALS).replace(Mze,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return ur.fromBigInt(this.value+new ur(e).value)}subtract(e){return ur.fromBigInt(this.value-new ur(e).value)}multiply(e){return ur._divRound(this.value*new ur(e).value,ur.SHIFT)}divide(e){return ur._divRound(this.value*ur.SHIFT,new ur(e).value)}};ur.DECIMALS=100,ur.ROUNDED=!0,ur.SHIFT=BigInt("1"+"0".repeat(ur.DECIMALS)),ur._divRound=(e,i)=>ur.fromBigInt(e/i+(ur.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),ur.fromBigInt=e=>Object.assign(Object.create(ur.prototype),{value:e,isNegative:e<BigInt(0)});let K_=ur;function La(t){return!(!t||isNaN(Number(t)))}function Yye(t){return!t||!Nze(t)?"":sz(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:MO.includes(n)).join("");return La(r)?new K_(r).toString():""})}const Xye=/^([-0])0+(?=\d)/,kze=/(?!^\.)\.$/,Aze=/(?!^-)-/g,Oze=/^-\b0\b\.?0*$/,Pze=/0*$/,Lze=new Set(["e","E","-",",",".",...MO]),Kye=t=>{const e=Array.from(t).filter(i=>Lze.has(i)).join("");return sz(e,i=>{const r=i.replace(Aze,"").replace(kze,"").replace(Xye,"$1");return La(r)?Oze.test(r)?r:Rze(r):i})};function Rze(t){const e=t.split(".")[1],i=new K_(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function sz(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function Dze(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",a=s[1]||"",l=(m,y)=>{const v=Math.abs(y)-m.length,w=v>0?`${"0".repeat(v)}${m}`:m;return`${w.slice(0,y)}.${w.slice(y)}`},c=(m,y)=>{const v=y>m.length?`${m}${"0".repeat(y-m.length)}`:m;return`${v.slice(0,y)}.${v.slice(y)}`},h=n>0?`${o}${c(a,n)}`:`${l(o,n)}${a}`;return`${r?"-":""}${h.charAt(0)==="."?"0":""}${h.replace(Ize,"").replace(Xye,"")}`}function Nze(t){return MO.some(e=>t.includes(e))}function Qye(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(Pze)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const oz="en",zze=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",oz,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const Fze=["arab","arabext","latn"],GV=[...zze],ege=t=>Fze.includes(t),HV=new Intl.NumberFormat().resolvedOptions().numberingSystem,tge=HV==="arab"||!ege(HV)?"latn":HV,Uze=t=>ege(t)?t:tge;function jze(t){return t?GV.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),GV.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":GV.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),oz)):oz}class Vze{constructor(){this.delocalize=e=>this._numberFormatOptions?sz(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?sz(e,i=>La(i.trim())?new K_(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=jze(e==null?void 0:e.locale),e.numberingSystem=Uze(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===oz&&e.numberingSystem===tge&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const wr=new Vze;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Bze=["date","datetime-local","month","number","range","time","week"],Gze=["email","password","search","tel","text","url"],Hze=["email","password","search","tel","text","textarea","url"];function Cx(t,e,i,r){const n=i.toLowerCase(),s=t[i];r&&s!=null?e.setAttribute(n,`${s}`):e.removeAttribute(n)}function ige(t,e,i){i.type=t==="textarea"?"text":t;const r=Bze.includes(t),n=e;Cx(n,i,"min",r),Cx(n,i,"max",r),Cx(n,i,"step",r);const s=Hze.includes(t),o=e;Cx(o,i,"minLength",s),Cx(o,i,"maxLength",s);const a=Gze.includes(t);Cx(o,i,"pattern",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const fo={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},qV={validationMessage:"inputValidationMessage"},zne={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},qze={action:"action"},Wze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;outline-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,Y5=class Y5 extends Yt{constructor(){super(),this.actionWrapperEl=Tn(),this.attributeWatch=CU(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childElType="input",this.inputWrapperEl=Tn(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=Mn(),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=Ne({cancelable:!1}),this.calciteInputInput=Ne(),this.calciteInternalInputBlur=Ne({cancelable:!1}),this.calciteInternalInputFocus=Ne({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){var e,i;this.type==="number"?(e=this.childNumberEl)==null||e.select():(i=this.childEl)==null||i.select()}async setFocus(){await pr(this),f1(this.type==="number"?this.childNumberEl:this.childEl)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),rf(this),g1(this),this.el.addEventListener(gA,this.onHiddenFormInputInput)}async load(){var e,i;this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=lb(zne,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:La(this.value)?this.value:""})))}willUpdate(e){var i,r;e.has("max")&&(this.maxString=((i=this.max)==null?void 0:i.toString())||null),e.has("min")&&(this.minString=((r=this.min)==null?void 0:r.toString())||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=lb(zne,this.icon,this.type))}updated(){Gr(this)}disconnectedCallback(){super.disconnectedCallback(),$b(this),v1(this),this.el.removeEventListener(gA,this.onHiddenFormInputInput)}get isClearable(){var e;return!this.isTextarea&&(this.clearable||this.type==="search")&&((e=this.value)==null?void 0:e.length)>0}get isTextarea(){return this.childElType==="textarea"}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?La(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&kO(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,n){const{value:s}=this;if(s==="Infinity"||s==="-Infinity")return;const o=e==="up"?1:-1,a=this.step==="any"?1:Math.abs(this.step||1),c=new K_(s!==""?s:"0").add(`${a*o}`),h=()=>typeof r=="number"&&!isNaN(r)&&c.subtract(`${r}`).isNegative,m=()=>typeof i=="number"&&!isNaN(i)&&!c.subtract(`${i}`).isNegative,y=h()?`${r}`:m()?`${i}`:c.toString();this.setValue({committing:!0,nativeEvent:n,origin:"user",value:y})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperEl.value)||i.includes(this.actionWrapperEl.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childEl.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=wr.delocalize(i);e.inputType==="insertFromPaste"?(La(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:Yye(r)}),this.childNumberEl.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...MO,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===wr.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(wr.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||e.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,r,n,i)},s)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!AG(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){ige(this.type,this,e)}setChildElRef(e){this.childEl=e}setChildNumberElRef(e){this.childNumberEl=e}setInputValue(e){this.type==="number"&&this.childNumberEl?this.childNumberEl.value=e:this.childEl&&(this.childEl.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?La(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:n,value:s}){var o,a;if(this.setPreviousValue(n??this.value),this.previousValueOrigin=r,this.type==="number"){wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const l=((o=this.previousValue)==null?void 0:o.length)>s.length||((a=this.value)==null?void 0:a.length)>s.length,c=s.charAt(s.length-1)===".",h=c&&l?s:Kye(s),m=s&&!h?La(this.previousValue)?this.previousValue:"":h;let y=wr.localize(m);r!=="connected"&&!c&&(y=Qye(y,m,wr)),this.displayedValue=c&&l?`${y}${wr.decimal}`:y,this.userChangedValue=r==="user"&&this.value!==m,this.value=["-","."].includes(m)?"":m}else this.userChangedValue=r==="user"&&this.value!==s,this.value=s;r==="direct"&&(this.setInputValue(s),this.previousEmittedValue=s),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?wr.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!La(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=ca(this.el),i=q`<div class=${ne(fo.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=q`<button .ariaLabel=${this.messages.clear} class=${ne(fo.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 type=button><calcite-icon icon=x .scale=${Fi(this.scale)}></calcite-icon></button>`,n=q`<calcite-icon class=${ne(fo.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${Fi(this.scale)}></calcite-icon>`,s=this.numberButtonType==="horizontal",o=q`<button aria-hidden=true class=${ne({[fo.numberButtonItem]:!0,[fo.buttonItemHorizontal]:s})} data-adjustment=up .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon icon=chevron-up .scale=${Fi(this.scale)}></calcite-icon></button>`,a=q`<button aria-hidden=true class=${ne({[fo.numberButtonItem]:!0,[fo.buttonItemHorizontal]:s})} data-adjustment=down .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon icon=chevron-down .scale=${Fi(this.scale)}></calcite-icon></button>`,l=q`<div class=${ne(fo.numberButtonWrapper)}>${o}${a}</div>`,c=q`<div class=${ne(fo.prefix)}>${this.prefixText}</div>`,h=q`<div class=${ne(fo.suffix)}>${this.suffixText}</div>`,m=this.el.autofocus,y=this.el.enterKeyHint,v=this.el.inputMode,w=this.type==="number"?nt("localized-input",q`<input accept=${this.accept??Ge} aria-errormessage=${qV.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ub(this)} autocomplete=${this.autocomplete??Ge} .autofocus=${m} value=${this.defaultValue??Ge} .disabled=${this.disabled?!0:null} enterkeyhint=${y??Ge} inputmode=${v??Ge} maxlength=${this.maxLength??Ge} minlength=${this.minLength??Ge} .multiple=${this.multiple} name=${Ge} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Ge} placeholder=${(this.placeholder||"")??Ge} .readOnly=${this.readOnly} type=text .value=${kN(this.displayedValue??"")} ${yt(this.setChildNumberElRef)}>`):null,x=this.childElType==="input"?Y_`input`:Y_`textarea`,S=this.type!=="number"?IO`<${x} accept=${this.accept??Ge} aria-errormessage=${qV.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ub(this)} autocomplete=${this.autocomplete??Ge} .autofocus=${m} class=${ne({[fo.editingEnabled]:this.editingEnabled,[fo.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${y??Ge} inputmode=${v??Ge} max=${this.maxString??Ge} maxlength=${this.maxLength??Ge} min=${this.minString??Ge} minlength=${this.minLength??Ge} .multiple=${this.multiple} name=${this.name??Ge} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??Ge} placeholder=${(this.placeholder||"")??Ge} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??Ge} step=${this.step??Ge} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??Ge} type=${this.type??Ge} .value=${kN(this.value??"")} ${yt(this.setChildElRef)}></${x}>`:null;return Hr({disabled:this.disabled,children:q`<div class=${ne({[fo.inputWrapper]:!0,[lu.rtl]:e==="rtl",[fo.hasSuffix]:this.suffixText,[fo.hasPrefix]:this.prefixText})} ${yt(this.inputWrapperEl)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${this.prefixText?c:null}<div class=${ne(fo.wrapper)}>${w}${S}${this.isClearable?r:null}${this.requestedIcon?n:null}${this.loading?i:null}</div><div class=${ne(fo.actionWrapper)} ${yt(this.actionWrapperEl)}><slot name=${qze.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?h:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${b1({component:this})}</div>${this.validationMessage&&this.status==="invalid"?AO({icon:this.validationIcon,id:qV.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};Y5.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],accept:1,alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],files:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:wu},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],multiple:[5,{},{type:Boolean}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],pattern:1,placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,type:[3,{},{reflect:!0}],validationIcon:[3,{converter:wu},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},Y5.styles=Wze;let az=Y5;Xt("calcite-input",az);const Jze=Object.freeze(Object.defineProperty({__proto__:null,Input:az},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Zze={container:"container"},Yze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .5rem)}:host([scale=m]) .container{gap:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .75rem)}:host([scale=l]) .container{gap:.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1);color:var(--calcite-label-text-color, var(--calcite-color-text-1))}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:.5rem}:host([layout=inline][scale=l]) .container{gap:.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity: 1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity: 0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,X5=class X5 extends Yt{constructor(){super(),this.alignment="start",this.layout="default",this.scale="m",this.calciteInternalLabelClick=Ne({bubbles:!1,cancelable:!1}),this.listen("click",this.labelClickHandler)}connectedCallback(){super.connectedCallback(),document.dispatchEvent(new CustomEvent(NU))}willUpdate(e){e.has("for")&&oze(this.el)}disconnectedCallback(){super.disconnectedCallback(),document.dispatchEvent(new CustomEvent(QN))}labelClickHandler(e){var i;((i=window.getSelection())==null?void 0:i.type)!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})}render(){return q`<div class=${ne(Zze.container)}><slot></slot></div>`}};X5.properties={alignment:[3,{},{reflect:!0}],for:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},X5.styles=Yze;let lz=X5;Xt("calcite-label",lz);const Xze=Object.freeze(Object.defineProperty({__proto__:null,Label:lz},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Fl={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Kze=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);box-shadow:inset 0 0 0 0 var(--calcite-button-shadow-color, var(--calcite-internal-button-shadow-color, var(--calcite-color-transparent)));border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover);--calcite-internal-button-shadow-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-shadow-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press);--calcite-internal-button-shadow-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-shadow-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover);--calcite-internal-button-shadow-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-shadow-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press);--calcite-internal-button-shadow-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press);--calcite-internal-button-shadow-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-shadow-color: var(--calcite-color-foreground-3);--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-shadow-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press);--calcite-internal-button-shadow-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,K5=class K5 extends Yt{constructor(){super(...arguments),this.attributeWatch=CU(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentEl=Tn(),this.mutationObserver=sn("mutation",()=>this.updateHasContent()),this.resizeObserver=sn("resize",()=>this.setTooltipText()),this.messages=Mn(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(){var e;await pr(this),(e=this.childEl)==null||e.focus()}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),rf(this),this.formEl=Hye(this)}async load(){this.updateHasContent()}updated(){Gr(this)}loaded(){this.setTooltipText()}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),$b(this),(i=this.resizeObserver)==null||i.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=jLe(this.el)}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?kO(this):e==="reset"&&QNe(this))}setTooltipText(){const{contentEl:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){var i;this.childEl=e,e&&((i=this.resizeObserver)==null||i.observe(e))}render(){const e=this.href?"a":"button",i=this.href?Y_`a`:Y_`button`,r=this.loading?q`<div class=${ne(Fl.buttonLoader)}><calcite-loader class=${ne(this.loading?Fl.loadingIn:Fl.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,n=!this.iconStart&&!this.iconEnd,s=q`<calcite-icon class=${ne({[Fl.icon]:!0,[Fl.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${Fi(this.scale)}></calcite-icon>`,o=q`<calcite-icon class=${ne({[Fl.icon]:!0,[Fl.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${Fi(this.scale)}></calcite-icon>`,a=q`<span class=${ne(Fl.content)} ${yt(this.contentEl)}><slot></slot></span>`;return Hr({disabled:this.disabled,children:IO`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:ub(this)} aria-live=polite class=${ne({[Fl.buttonPadding]:n,[Fl.buttonPaddingShrunk]:!n,[Fl.contentSlotted]:this.hasContent,[Fl.iconStartEmpty]:!this.iconStart,[Fl.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??Ge} href=${(e==="a"&&this.href)??Ge} name=${(e==="button"&&this.name)??Ge} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??Ge} tabindex=${(this.disabled?-1:null)??Ge} target=${(e==="a"&&this.target)??Ge} title=${this.tooltipText??Ge} type=${(e==="button"?this.type:null)??Ge} ${yt(this.setChildEl)}>${r}${this.iconStart?s:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};K5.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:wu},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},K5.styles=Kze;let cz=K5;Xt("calcite-button",cz);const OO=Object.freeze(Object.defineProperty({__proto__:null,Button:cz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qze=new Set(["children","localName","ref","style","className"]),Fne=new WeakMap,Une=(t,e,i,r,n)=>{const s=n==null?void 0:n[e];s===void 0?(t[e]=i,i==null&&e in HTMLElement.prototype&&t.removeAttribute(e)):i!==r&&((o,a,l)=>{let c=Fne.get(o);c===void 0&&Fne.set(o,c=new Map);let h=c.get(a);l!==void 0?h===void 0?(c.set(a,h={handleEvent:l}),o.addEventListener(a,h)):h.handleEvent=l:h!==void 0&&(c.delete(a),o.removeEventListener(a,h))})(t,s,i)},rge=({react:t,tagName:e,elementClass:i,events:r,displayName:n})=>{const s=new Set(Object.keys(r??{})),o=t.forwardRef((a,l)=>{const c=t.useRef(new Map),h=t.useRef(null),m={},y={};for(const[v,w]of Object.entries(a))Qze.has(v)?m[v==="className"?"class":v]=w:s.has(v)||v in i.prototype?y[v]=w:m[v]=w;return t.useLayoutEffect(()=>{if(h.current===null)return;const v=new Map;for(const w in y)Une(h.current,w,a[w],c.current.get(w),r),c.current.delete(w),v.set(w,a[w]);for(const[w,x]of c.current)Une(h.current,w,void 0,x,r);c.current=v}),t.useLayoutEffect(()=>{var v;(v=h.current)==null||v.removeAttribute("defer-hydration")},[]),m.suppressHydrationWarning=!0,t.createElement(e,{...m,ref:t.useCallback(v=>{h.current=v,typeof l=="function"?l(v):l!==null&&(l.current=v)},[l])})});return o.displayName=n??i.name,o};let bA=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};const Sn=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},eH=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},eFe=t=>t.replace(tFe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),tFe=/[A-Z]+(?![a-z])|[A-Z]/gu,iFe=(t,e)=>{const i=e/rFe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},rFe=4,aY=Symbol.for("controller"),nFe=t=>typeof t=="object"&&t!==null&&(aY in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t);let OM;const PM=t=>{OM!==t&&(OM=t,queueMicrotask(()=>OM===t?OM=void 0:0))},zU=t=>OM;let N0=[];const sFe=t=>{if(t===void 0){N0=[];return}const e=N0.indexOf(t);N0=e===-1?[...N0,t]:N0.slice(0,e+1),queueMicrotask(()=>N0=[])},oFe=()=>N0;let jne;const aFe=()=>{const t=jne;return jne=void 0,t},lFe=async(t,e)=>{const i=lY(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},cFe=async t=>{const e=lY(t);return await e.ready,e},lY=t=>{const i=zU().manager.X(t);if(i!==void 0)return i;if(nFe(t))return t;const r=aFe();if(r!==void 0)return r},uFe=(t,e,i)=>{const r=Object.keys(t),n=r.length;Ev===void 0&&queueMicrotask(cY),Ev??(Ev=new Map);let s=Ev.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Ev.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>Sn(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let Ev;const cY=()=>{Ev==null||Ev.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Ev=void 0},dFe=(t,e,i)=>{const r=t.manager;return r.V!==Ge&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>Sn(e,void 0,i===s?n:void 0)),i},hFe=(t=[zU(),...oFe()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>uFe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){dFe(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},pFe=(t="",e={},i=zU())=>{const r={emit:n=>{t===""&&cY();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&hFe(void 0,n=>t=n.key,r),r};pFe.bind(null,"");var nge;nge=aY;var vT,bT,r_,wT,_T,xT,ST,$T,_v,n_,dl,Uh,jm,TT,R3,Ufe;let fFe=(Ufe=class{constructor(e){Qe(this,TT);Qe(this,vT);Qe(this,bT);Qe(this,r_);Qe(this,wT);Qe(this,_T);Qe(this,xT);Qe(this,ST);Qe(this,$T);Qe(this,_v);Qe(this,n_);Qe(this,dl);Qe(this,Uh);Qe(this,jm);We(this,vT,[]),We(this,bT,[]),We(this,r_,[]),We(this,wT,[]),We(this,_T,[]),We(this,xT,[]),We(this,ST,[]),We(this,$T,[]),We(this,_v,[]),We(this,n_,!1),this.P=new bA,this.connectedCalled=!1,this.loadedCalled=!1,this[nge]=!0,We(this,jm,[]);const i=this,r=e??zU();We(i,dl,r),i.ready=i.P.promise,We(i,Uh,Bne(i)),i.component=r,te(i,dl).addController(i),te(i,dl).manager===void 0||(sFe(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=te(this,dl);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),te(e,n_)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return te(this,Uh)}set exports(e){const i=te(this,Uh);i!==e&&(We(this,Uh,e),te(this,jm).forEach(Sn),this.connectedCalled&&this.O!==!1&&te(this,dl).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){We(this,Uh,i?Bne(e):e),te(this,jm).forEach(Sn)}watchExports(e){const i=()=>e(te(this,Uh));return te(this,jm).push(i),()=>void te(this,jm).splice(te(this,jm).indexOf(i),1)}get use(){return PM(te(this,dl)),lFe}get useRef(){return PM(te(this,dl)),cFe}get useRefSync(){return PM(te(this,dl)),lY}controllerRemoved(){te(this,dl).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){te(this,vT).push(e)}onDisconnected(e){te(this,bT).push(e)}onLoad(e){te(this,r_).push(e)}onLoaded(e){te(this,wT).push(e)}onUpdate(e){te(this,_T).push(e)}onUpdated(e){te(this,xT).push(e)}onDestroy(e){te(this,ST).push(e)}onLifecycle(e){te(this,$T).push(e),this.connectedCalled&&te(this,dl).el.isConnected&&Er(this,TT,R3).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&Sn(e.hostConnected,e),te(e,vT).forEach(Sn),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Sn(e.hostDisconnected,e),te(e,bT).forEach(Sn),te(e,_v).forEach(Sn),We(e,_v,[])}async triggerLoad(){if(te(this,n_))return;We(this,n_,!0);const e=this;e.hostLoad&&await eH(e.hostLoad,e),te(this,r_).length>0&&await Promise.allSettled(te(this,r_).map(eH)),this.P.resolve(te(this,Uh))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Sn(this.hostLoaded,this),te(this,wT).forEach(Sn),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Sn(this.hostUpdate,this,e),te(this,_T).forEach(Vne,e)}triggerUpdated(e){this.hostUpdated&&Sn(this.hostUpdated,this,e),te(this,xT).forEach(Vne,e)}triggerDestroy(){this.hostDestroy&&Sn(this.hostDestroy,this),te(this,ST).forEach(Sn)}triggerLifecycle(){this.hostLifecycle&&Er(this,TT,R3).call(this,()=>this.hostLifecycle()),te(this,$T).forEach(Er(this,TT,R3),this)}},vT=new WeakMap,bT=new WeakMap,r_=new WeakMap,wT=new WeakMap,_T=new WeakMap,xT=new WeakMap,ST=new WeakMap,$T=new WeakMap,_v=new WeakMap,n_=new WeakMap,dl=new WeakMap,Uh=new WeakMap,jm=new WeakMap,TT=new WeakSet,R3=function(e){PM(te(this,dl));const i=Sn(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?te(this,_v).push(n):typeof n=="object"&&typeof n.remove=="function"&&te(this,_v).push(n.remove)})},Ufe);function Vne(t){Sn(t,void 0,this)}const mFe=fFe,Bne=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},yFe=1,gFe=2,vFe=4,bFe=8,wFe=16,_Fe=32,xFe=64,sge=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Gne={};function uY(){}const D3=Object.defineProperty,SFe=globalThis.HTMLElement??uY;var hl,Vm,ET,lO,tH,CT;let rEt=(CT=class extends SFe{constructor(){var n,s;super();Qe(this,lO);Qe(this,hl);Qe(this,Vm);Qe(this,ET);We(this,Vm,{}),We(this,ET,[]),this.I=new bA,this.H=new bA,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(te(i,Vm)[o]=i[o],delete i[o])}),r.A?Er(s=i,lO,tH).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,Er(l=i,lO,tH).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])D3(this.prototype,i,{configurable:!0,enumerable:!0,get(){return te(this,Vm)[i]},set(r){te(this,Vm)[i]=r}});for(const i of this.E??[])D3(this.prototype,i,{async value(...r){return te(this,hl)||await this.H.promise,await te(this,hl)[i](...r)},configurable:!0});for(const i of this.D??[])D3(this.prototype,i,{value(...r){return te(this,hl)[i](...r)},configurable:!0})}get manager(){var i;return(i=te(this,hl))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=te(this,hl))==null||s.attributeChangedCallback(i,r,n),te(this,hl)||te(this,ET).push(i)}connectedCallback(){var i,r;te(this,hl)?(r=(i=te(this,hl)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=sge(this))}disconnectedCallback(){var i,r;(r=(i=te(this,hl))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=te(this,hl))==null||i.requestUpdate()}},hl=new WeakMap,Vm=new WeakMap,ET=new WeakMap,lO=new WeakSet,tH=function(i){var y;const r=this.constructor,n=r.L,s=te(this,Vm),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);TFe(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,We(this,hl,h),We(this,Vm,h),te(this,ET).forEach(v=>h.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach($Fe,h);const m=this.isConnected;(m||this.G)&&((y=h.connectedCallback)==null||y.call(h),m||h.disconnectedCallback())},CT.lumina=!0,CT);function $Fe([t,e]){this[t]=e}const TFe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},D3(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};var Bm,bd,IT,jfe;let EFe=(jfe=class extends mFe{constructor(i){super(i);Qe(this,Bm);Qe(this,bd);Qe(this,IT);this.destroyed=!1,this.R=!1,this.V=Ge,this.T=[],We(this,IT,new WeakMap),We(this,bd,i),this.exports=void 0,this.hasDestroy=iH in i&&typeof i.destroy=="function",vc.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${iH} prop.`)}te(this,Bm)!==void 0&&clearTimeout(te(this,Bm)),cY();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():Sn(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():Sn(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):Sn(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):Sn(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),PM(i)}async destroy(){if(!this.destroyed){te(this,bd).el.isConnected&&(this.hasDestroy=!1,te(this,bd).el.remove()),We(this,Bm,void 0),this.destroyed=!0;for(const i of te(this,bd).M)"triggerDestroy"in i?i.triggerDestroy():Sn(i.hostDestroy,i);te(this,bd).M.splice(0)}}U(){te(this,Bm)!==void 0&&clearTimeout(te(this,Bm)),!te(this,bd).el.isConnected&&!te(this,bd).autoDestroyDisabled&&We(this,Bm,iFe(()=>void te(this,bd).destroy(),CFe))}S(i,r){const n=this.T;this.V=Ge,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&te(this,IT).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return te(this,IT).get(i)}},Bm=new WeakMap,bd=new WeakMap,IT=new WeakMap,jfe),CFe=1e3;const iH="autoDestroyDisabled";var s_,cO,uO,o_,jh,XE,oge,age,Wv;let sEt=(Wv=class extends vc{constructor(){super();Qe(this,XE);Qe(this,s_);Qe(this,cO);Qe(this,uO);Qe(this,o_);Qe(this,jh);this.M=[],this.manager=new EFe(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=Wv.prototype.shouldUpdate;We(i,o_,(n==null?void 0:n.H)??new bA),i.I=(n==null?void 0:n.I)??new bA,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,We(i,uO,i.enableUpdating),i.enableUpdating=uY,i.shouldUpdate!==o&&(We(i,cO,i.shouldUpdate),i.shouldUpdate=o),s&&(We(i,s_,new Map),r.elementProperties.forEach((a,l)=>te(i,s_).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===Gne;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??xO,a={attribute:n&yFe&&typeof i=="string"?eFe(i):!1,reflect:!!(n&gFe),type:n&vFe?Boolean:n&bFe?Number:void 0,state:!!(n&wFe),readOnly:!!(n&_Fe),noAccessor:!!(n&xFe),c:!1,...s,hasChanged(l,c){const h=o(l,c);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,te(this,s_).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,h;const l=this.manager;if(n.readOnly&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((h=(c=te(this,s_))==null?void 0:c.get(i))==null||h.notify()),l.T.length>0&&(l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());We(this,jh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>Er(this,XE,age).call(this).catch(o=>{te(this,o_).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=te(this,jh))==null||i.destroy(),We(this,jh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===Gne?this.el:this.el.attachShadow(n));if(i)return vc.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=te(this,cO))==null?void 0:r.call(this,i))??!0}update(i){te(this,jh)?Er(this,XE,oge).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await te(this,o_).promise,this}addController(i){var r;this.M.push(i),!(aY in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}},s_=new WeakMap,cO=new WeakMap,uO=new WeakMap,o_=new WeakMap,jh=new WeakMap,XE=new WeakSet,oge=function(i){try{te(this,jh).clear(),this.constructor.K.r(te(this,jh),()=>FL(Wv.prototype,this,"update").call(this,i))}catch(r){throw te(this,jh).clear(),r}},age=async function(){var s,o;const i=this.el.G??sge(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(eH(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(iH)&&this.manager.U()),te(this,uO).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():Sn(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),te(this,o_).resolve()},Wv.lumina=!0,Wv);const IFe={},lge=(t,e)=>i=>{const r=i.tagName;let n=IFe;const s={name:r,get prototype(){var a;if(n===void 0){const l=customElements.get(r);if(!l)throw new Error(`Custom element "${r}" not found`);(a=l.F)==null||a.call(l),l.F=uY,n=l.prototype,Object.defineProperty(s,"prototype",{value:n})}return n}},o=e({...i,react:t,elementClass:s});return n=void 0,o},ha=(t,e)=>({tagName:t,events:e}),FU=lge(ime,rge),WV=FU(ha("calcite-link",{})),MFe=FU(ha("calcite-notice",{onCalciteNoticeBeforeClose:"calciteNoticeBeforeClose",onCalciteNoticeBeforeOpen:"calciteNoticeBeforeOpen",onCalciteNoticeClose:"calciteNoticeClose",onCalciteNoticeOpen:"calciteNoticeOpen"})),cge=FU(ha("calcite-panel",{onCalcitePanelClose:"calcitePanelClose",onCalcitePanelScroll:"calcitePanelScroll",onCalcitePanelToggle:"calcitePanelToggle"})),kFe=FU(ha("calcite-shell",{}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Hne={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const YL={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},DI={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},AFe=dt`:host([scale=s]){--calcite-notice-spacing-token-small: .5rem;--calcite-notice-spacing-token-large: .75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:.5rem}:host([scale=m]){--calcite-notice-spacing-token-small: .75rem;--calcite-notice-spacing-token-large: 1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small: 1rem;--calcite-notice-spacing-token-large: 1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width: auto}:host([width=half]){--calcite-notice-width: 50%}:host([width=full]){--calcite-notice-width: 100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;opacity:0;overflow:hidden;max-block-size:0;transition-property:opacity,max-block-size;transition-duration:var(--calcite-animation-timing);text-align:start;border-inline-start:var(--calcite-border-width-md) solid;box-shadow:0 0 0 0 transparent;background-color:var(--calcite-notice-background-color, var(--calcite-color-foreground-1))}.notice-close{outline-color:transparent}.notice-close:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host{display:flex}:host([open]) .container{pointer-events:auto;max-block-size:100%;align-items:center;opacity:1;--tw-shadow: 0 4px 8px -1px rgba(0, 0, 0, .08), 0 2px 4px -1px rgba(0, 0, 0, .04);--tw-shadow-colored: 0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);overflow:visible}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-notice-title-text-color, var(--calcite-color-text-1))}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0;display:inline;font-weight:var(--calcite-font-weight-normal);margin-inline-end:var(--calcite-notice-spacing-token-small);color:var(--calcite-notice-content-text-color, var(--calcite-color-text-2))}.notice-content{box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none;color:var(--calcite-notice-close-icon-color, var(--calcite-color-text-3))}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-notice-close-background-color-focus, var(--calcite-color-foreground-2));color:var(--calcite-notice-close-icon-color-hover, var(--calcite-color-text-1))}.notice-close:active{background-color:var(--calcite-notice-close-background-color-press, var(--calcite-color-foreground-3))}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-color-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-color:var(--calcite-color-status-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-color:var(--calcite-color-status-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-color-status-warning)}:host([hidden]){display:none}[hidden]{display:none}`,Q5=class Q5 extends Yt{constructor(){super(...arguments),this.closeButton=Tn(),this.transitionProp="opacity",this.messages=Mn(),this.hasActionEnd=!1,this.closable=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.scale="m",this.width="auto",this.calciteNoticeBeforeClose=Ne({cancelable:!1}),this.calciteNoticeBeforeOpen=Ne({cancelable:!1}),this.calciteNoticeClose=Ne({cancelable:!1}),this.calciteNoticeOpen=Ne({cancelable:!1})}async setFocus(){await pr(this);const e=this.el.querySelector("calcite-link");if(!(!this.closeButton.value&&!e)){if(e)return e.setFocus();this.closeButton.value&&this.closeButton.value.focus()}}async load(){this.requestedIcon=lb(Hne,this.icon,this.kind)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&y1(this),(e.has("icon")||e.has("kind")&&(this.hasUpdated||this.kind!=="brand"))&&(this.requestedIcon=lb(Hne,this.icon,this.kind))}onBeforeClose(){this.calciteNoticeBeforeClose.emit()}onBeforeOpen(){this.calciteNoticeBeforeOpen.emit()}onClose(){this.calciteNoticeClose.emit()}onOpen(){this.calciteNoticeOpen.emit()}setTransitionEl(e){e&&(this.transitionEl=e)}close(){this.open=!1}handleActionsEndSlotChange(e){this.hasActionEnd=Ut(e)}render(){const e=q`<button .ariaLabel=${this.messages.close} class=${ne(DI.close)} @click=${this.close} ${yt(this.closeButton)}><calcite-icon icon=x .scale=${Fi(this.scale)}></calcite-icon></button>`;return q`<div class=${ne(DI.container)} ${yt(this.setTransitionEl)}>${this.requestedIcon?q`<div class=${ne(DI.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${Fi(this.scale)}></calcite-icon></div>`:null}<div class=${ne(DI.content)}><slot name=${YL.title}></slot><slot name=${YL.message}></slot><slot name=${YL.link}></slot></div><div class=${ne(DI.actionsEnd)} .hidden=${!this.hasActionEnd}><slot name=${YL.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>${this.closable?e:null}</div>`}};Q5.properties={hasActionEnd:[16,{},{state:!0}],closable:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:wu},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},Q5.styles=AFe;let uz=Q5;Xt("calcite-notice",uz);const dY=Object.freeze(Object.defineProperty({__proto__:null,Notice:uz},Symbol.toStringTag,{value:"Module"})),OFe=()=>pi.jsx(cge,{heading:"Sample ArcGIS JavaScript SDK React App",icon:"information",children:pi.jsx(MFe,{open:!0,width:"full",children:pi.jsxs("div",{slot:"message",children:[pi.jsx("p",{children:"This is a sample mapping app implemented using the ArcGIS JavaScript SDK with React and the ESRI Calcite GUI Components."}),pi.jsxs("p",{children:["Any public map on the ArcGIS Online portal can be loaded by providing a mapId query parameter for the portal item, eg ",pi.jsx(WV,{target:"_blank",href:"https://arcgis-react-map.netlify.app/?mapId=f2e9b762544945f390ca4ac3671cfa72","icon-end":"launch",children:"San Francisco"})]}),pi.jsxs("p",{children:["The source code for this app is available on ",pi.jsx(WV,{target:"_blank",href:"https://github.com/tveimo/arcgis-react-map/","icon-end":"launch",children:"GitHub"})]}),pi.jsx("p",{children:pi.jsx(WV,{target:"_blank",href:"https://www.esri.com/en-us/legal/overview","icon-end":"launch",children:"ESRI Information"})})]})})}),zs=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const n=t[r];if(typeof n=="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(typeof n=="object")for(const s in n)n[s]&&e.push(s)}const i=e.join(" ");return e.length=0,i};class wA{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const PFe=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},LFe=(t,e,i)=>{const r=RFe(e).subscribe;return r(n=>{n.some(o=>PFe(t,o.target))&&i()})},JV={},RFe=t=>{const e=t.join(","),i=JV[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),JV[e]=void 0)})};return JV[e]=s,s},DFe=(t,e)=>{var r,n;let i=t;for(;i;){const s=(r=i.closest)==null?void 0:r.call(i,e);if(s)return s;const o=(n=i.getRootNode)==null?void 0:n.call(i);if(o===globalThis.document)return null;i=o.host}return null},NFe=(t,e,i)=>{const r=DFe(t,`[${e}]`);return(r==null?void 0:r.getAttribute(e))??i},$n=(t,e,...i)=>{try{return t==null?void 0:t.call(e,...i)}catch(r){console.error(r,t)}},rH=async(t,e,...i)=>{try{return await(t==null?void 0:t.call(e,...i))}catch(r){console.error(r,t)}},zFe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),FFe=new Set(zFe),dz="en",UFe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},jFe=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return ZV[n]??(ZV[n]=uge(t,r)),await ZV[n]},ZV={},uge=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===dz?{}:await uge(dz,e)},dge=t=>{var i;const e=NFe(t,"lang",((i=globalThis.navigator)==null?void 0:i.language)||dz);return{lang:e,t9nLocale:hge(e)}},hge=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=UFe[n]??n,FFe.has(n)?n:i?hge(r):dz},VFe=(t,e,i,r)=>{let n;const s=()=>BFe(t,e(),r).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),LFe(t,["lang"],s)},BFe=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=dge(t),s=`${e}/${i}/t9n`,a=i===null?{}:await jFe(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:a}},GFe=t=>t.replace(HFe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),HFe=/[A-Z]+(?![a-z])|[A-Z]/gu,qFe=(t,e)=>{const i=e/WFe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},WFe=4,JFe=(t,e,i=!1)=>{if(!t||!e)return!1;const r=new URL(t),n=new URL(e);return!i&&r.protocol!==n.protocol||r.host==null||n.host==null?!1:r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port},hY=Symbol.for("controller"),ZFe=t=>typeof t=="object"&&t!==null&&(hY in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),YFe=t=>typeof(t==null?void 0:t.then)=="function",XFe=t=>t.M.length;let LM;const p$=t=>{LM!==t&&(LM=t,queueMicrotask(()=>LM===t?LM=void 0:0))},aC=t=>LM;let z0=[];const pY=t=>{if(t===void 0){z0=[];return}const e=z0.indexOf(t);z0=e===-1?[...z0,t]:z0.slice(0,e+1),queueMicrotask(()=>z0=[])},fY=()=>z0;let f$;const KFe=t=>{f$!==t&&(f$=t,queueMicrotask(()=>f$===t?f$=void 0:0))},QFe=()=>{const t=f$;return f$=void 0,t},e5e=async(t,e)=>{const i=mY(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},t5e=async t=>{const e=mY(t);return await e.ready,e},mY=t=>{const i=aC().manager.X(t);if(i!==void 0)return i;if(ZFe(t))return t;const r=QFe();if(r!==void 0)return r};let nH=!1;const i5e=t=>{nH=!0;try{return t()}finally{nH=!1}},r5e=(t,e,i)=>{const r=Object.keys(t),n=r.length;Cv===void 0&&queueMicrotask(yY),Cv??(Cv=new Map);let s=Cv.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},Cv.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const a=c=>$n(e,null,c),l=o[n];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let Cv;const yY=()=>{Cv==null||Cv.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),Cv=void 0},gY=(t,e,i)=>{const r=t.manager;return r.V!==Ge&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>$n(e,void 0,i===s?n:void 0)),i},vY=(t=[aC(),...fY()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>r5e(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){gY(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},bY=(t="",e={},i=aC())=>{const r={emit:n=>{t===""&&yY();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&vY(void 0,n=>t=n.key,r),r},ko=bY.bind(null,"");var pge;pge=hY;var MT,kT,a_,AT,OT,PT,LT,RT,xv,l_,pl,Vh,Gm,DT,N3;class wY{constructor(e){Qe(this,DT);Qe(this,MT);Qe(this,kT);Qe(this,a_);Qe(this,AT);Qe(this,OT);Qe(this,PT);Qe(this,LT);Qe(this,RT);Qe(this,xv);Qe(this,l_);Qe(this,pl);Qe(this,Vh);Qe(this,Gm);We(this,MT,[]),We(this,kT,[]),We(this,a_,[]),We(this,AT,[]),We(this,OT,[]),We(this,PT,[]),We(this,LT,[]),We(this,RT,[]),We(this,xv,[]),We(this,l_,!1),this.P=new wA,this.connectedCalled=!1,this.loadedCalled=!1,this[pge]=!0,We(this,Gm,[]);const i=this,r=e??aC();We(i,pl,r),i.ready=i.P.promise,We(i,Vh,Wne(i)),i.component=r,te(i,pl).addController(i),te(i,pl).manager===void 0||(pY(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=te(this,pl);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),te(e,l_)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return te(this,Vh)}set exports(e){const i=te(this,Vh);i!==e&&(We(this,Vh,e),te(this,Gm).forEach($n),this.connectedCalled&&this.O!==!1&&te(this,pl).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){We(this,Vh,i?Wne(e):e),te(this,Gm).forEach($n)}watchExports(e){const i=()=>e(te(this,Vh));return te(this,Gm).push(i),()=>void te(this,Gm).splice(te(this,Gm).indexOf(i),1)}get use(){return p$(te(this,pl)),e5e}get useRef(){return p$(te(this,pl)),t5e}get useRefSync(){return p$(te(this,pl)),mY}controllerRemoved(){te(this,pl).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){te(this,MT).push(e)}onDisconnected(e){te(this,kT).push(e)}onLoad(e){te(this,a_).push(e)}onLoaded(e){te(this,AT).push(e)}onUpdate(e){te(this,OT).push(e)}onUpdated(e){te(this,PT).push(e)}onDestroy(e){te(this,LT).push(e)}onLifecycle(e){te(this,RT).push(e),this.connectedCalled&&te(this,pl).el.isConnected&&Er(this,DT,N3).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&$n(e.hostConnected,e),te(e,MT).forEach($n),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&$n(e.hostDisconnected,e),te(e,kT).forEach($n),te(e,xv).forEach($n),We(e,xv,[])}async triggerLoad(){if(te(this,l_))return;We(this,l_,!0);const e=this;e.hostLoad&&await rH(e.hostLoad,e),te(this,a_).length>0&&await Promise.allSettled(te(this,a_).map(rH)),this.P.resolve(te(this,Vh))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&$n(this.hostLoaded,this),te(this,AT).forEach($n),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&$n(this.hostUpdate,this,e),te(this,OT).forEach(qne,e)}triggerUpdated(e){this.hostUpdated&&$n(this.hostUpdated,this,e),te(this,PT).forEach(qne,e)}triggerDestroy(){this.hostDestroy&&$n(this.hostDestroy,this),te(this,LT).forEach($n)}triggerLifecycle(){this.hostLifecycle&&Er(this,DT,N3).call(this,()=>this.hostLifecycle()),te(this,RT).forEach(Er(this,DT,N3),this)}}MT=new WeakMap,kT=new WeakMap,a_=new WeakMap,AT=new WeakMap,OT=new WeakMap,PT=new WeakMap,LT=new WeakMap,RT=new WeakMap,xv=new WeakMap,l_=new WeakMap,pl=new WeakMap,Vh=new WeakMap,Gm=new WeakMap,DT=new WeakSet,N3=function(e){p$(te(this,pl));const i=$n(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?te(this,xv).push(n):typeof n=="object"&&typeof n.remove=="function"&&te(this,xv).push(n.remove)})};function qne(t){$n(t,void 0,this)}const _Y=wY,Wne=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},n5e=1,s5e=2,o5e=4,a5e=8,l5e=16,c5e=32,u5e=64,fge=t=>{var i,r;let e=t;for(;e=e.parentNode??e.host;)if((i=e==null?void 0:e.constructor)!=null&&i.lumina){const n=e;return(r=n.manager)!=null&&r.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Zn={};function mge(){}const z3=Object.defineProperty,d5e=globalThis.HTMLElement??mge;var fl,Hm,NT,dO,sH;const YQ=class YQ extends d5e{constructor(){var n,s;super();Qe(this,dO);Qe(this,fl);Qe(this,Hm);Qe(this,NT);We(this,Hm,{}),We(this,NT,[]),this.I=new wA,this.H=new wA,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,(n=r.C)==null||n.forEach(o=>{Object.hasOwn(i,o)&&(te(i,Hm)[o]=i[o],delete i[o])}),r.A?Er(s=i,dO,sH).call(s,{a:r.A}):r.B.then(async o=>{var a,l;await r.K.p,Er(l=i,dO,sH).call(l,await(((a=o.default)==null?void 0:a.then(c=>typeof c=="function"?{a:c}:c))??o))}).catch(o=>{i.H.reject(o),setTimeout(()=>{throw o})})}static F(){for(const i of this.C??[])z3(this.prototype,i,{configurable:!0,enumerable:!0,get(){return te(this,Hm)[i]},set(r){te(this,Hm)[i]=r}});for(const i of this.E??[])z3(this.prototype,i,{async value(...r){return te(this,fl)||await this.H.promise,await te(this,fl)[i](...r)},configurable:!0});for(const i of this.D??[])z3(this.prototype,i,{value(...r){return te(this,fl)[i](...r)},configurable:!0})}get manager(){var i;return(i=te(this,fl))==null?void 0:i.manager}attributeChangedCallback(i,r,n){var s;(s=te(this,fl))==null||s.attributeChangedCallback(i,r,n),te(this,fl)||te(this,NT).push(i)}connectedCallback(){var i,r;te(this,fl)?(r=(i=te(this,fl)).connectedCallback)==null||r.call(i):queueMicrotask(()=>this.G=fge(this))}disconnectedCallback(){var i,r;(r=(i=te(this,fl))==null?void 0:i.disconnectedCallback)==null||r.call(i)}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){var i;(i=te(this,fl))==null||i.requestUpdate()}};fl=new WeakMap,Hm=new WeakMap,NT=new WeakMap,dO=new WeakSet,sH=function(i){var y;const r=this.constructor,n=r.L,s=te(this,Hm),o=Object.values(i).find(v=>v.L===n),a=`${n}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);p5e(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const h=document.createElement(a);o.N=void 0,We(this,fl,h),We(this,Hm,h),te(this,NT).forEach(v=>h.attributeChangedCallback(v,null,this.getAttribute(v))),Object.entries(s).forEach(h5e,h);const m=this.isConnected;(m||this.G)&&((y=h.connectedCallback)==null||y.call(h),m||h.disconnectedCallback())},YQ.lumina=!0;let Jne=YQ;function h5e([t,e]){this[t]=e}const p5e=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},z3(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};var qm,wd,zT;class f5e extends _Y{constructor(i){super(i);Qe(this,qm);Qe(this,wd);Qe(this,zT);this.destroyed=!1,this.R=!1,this.V=Ge,this.T=[],We(this,zT,new WeakMap),We(this,wd,i),this.exports=void 0,this.hasDestroy=oH in i&&typeof i.destroy=="function",vc.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${oH} prop.`)}te(this,qm)!==void 0&&clearTimeout(te(this,qm)),yY();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():$n(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():$n(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):$n(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):$n(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),p$(i)}async destroy(){if(!this.destroyed){te(this,wd).el.isConnected&&(this.hasDestroy=!1,te(this,wd).el.remove()),We(this,qm,void 0),this.destroyed=!0;for(const i of te(this,wd).M)"triggerDestroy"in i?i.triggerDestroy():$n(i.hostDestroy,i);te(this,wd).M.splice(0)}}U(){te(this,qm)!==void 0&&clearTimeout(te(this,qm)),!te(this,wd).el.isConnected&&!te(this,wd).autoDestroyDisabled&&We(this,qm,qFe(()=>void te(this,wd).destroy(),m5e))}S(i,r){const n=this.T;this.V=Ge,this.T=[],n.forEach(s=>s(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&te(this,zT).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return te(this,zT).get(i)}}qm=new WeakMap,wd=new WeakMap,zT=new WeakMap;let m5e=1e3;const oH="autoDestroyDisabled";var c_,hO,pO,u_,Bh,KE,yge,gge;const tA=class tA extends vc{constructor(){super();Qe(this,KE);Qe(this,c_);Qe(this,hO);Qe(this,pO);Qe(this,u_);Qe(this,Bh);this.M=[],this.manager=new f5e(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=tA.prototype.shouldUpdate;We(i,u_,(n==null?void 0:n.H)??new wA),i.I=(n==null?void 0:n.I)??new wA,i.J=(n==null?void 0:n.J)??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,We(i,pO,i.enableUpdating),i.enableUpdating=mge,i.shouldUpdate!==o&&(We(i,hO,i.shouldUpdate),i.shouldUpdate=o),s&&(We(i,c_,new Map),r.elementProperties.forEach((a,l)=>te(i,c_).set(l,s())))}static finalizeStyles(i){var s;const r=super.finalizeStyles(i),n=this.shadowRootOptions===Zn;return((s=this.K)==null?void 0:s.commonStyles)===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=(s==null?void 0:s.hasChanged)??xO,a={attribute:n&n5e&&typeof i=="string"?GFe(i):!1,reflect:!!(n&s5e),type:n&o5e?Boolean:n&a5e?Number:void 0,state:!!(n&l5e),readOnly:!!(n&c5e),noAccessor:!!(n&u5e),c:!1,...s,hasChanged(l,c){const h=o(l,c);return a.c=h,h}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){var a,l;return(a=s.t)==null||a.call(s,te(this,c_).get(i)),(l=o.get)==null?void 0:l.call(this)},set(a){var c,h;const l=this.manager;if(n.readOnly&&!nH&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),n.c&&((h=(c=te(this,c_))==null?void 0:c.get(i))==null||h.notify()),l.T.length>0&&(l==null||l.S(i,a))}}}connectedCallback(){var n,s;if(this.el.hasAttribute("defer-hydration"))return;const i=(s=(n=this.constructor.K).c)==null?void 0:s.call(n,()=>this.requestUpdate());We(this,Bh,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>Er(this,KE,gge).call(this).catch(o=>{te(this,u_).reject(o),setTimeout(()=>{throw o})})):i&&this.requestUpdate()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=te(this,Bh))==null||i.destroy(),We(this,Bh,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===Zn?this.el:this.el.attachShadow(n));if(i)return vc.prototype.createRenderRoot.call(this),i;if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=te(this,hO))==null?void 0:r.call(this,i))??!0}update(i){te(this,Bh)?Er(this,KE,yge).call(this,i):super.update(i)}listen(i,r,n){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=(n==null?void 0:n.bind(this))??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await te(this,u_).promise,this}addController(i){var r;this.M.push(i),!(hY in i)&&this.renderRoot&&this.el.isConnected&&((r=i.hostConnected)==null||r.call(i))}removeController(i){var r;this.M.splice(this.M.indexOf(i),1),(r=i.controllerRemoved)==null||r.call(i)}};c_=new WeakMap,hO=new WeakMap,pO=new WeakMap,u_=new WeakMap,Bh=new WeakMap,KE=new WeakSet,yge=function(i){try{te(this,Bh).clear(),this.constructor.K.r(te(this,Bh),()=>FL(tA.prototype,this,"update").call(this,i))}catch(r){throw te(this,Bh).clear(),r}},gge=async function(){var s,o;const i=this.el.G??fge(this.el);i&&await i;const r=[];for(const a of this.M)"triggerLoad"in a?r.push(a.triggerLoad()):r.push(rH(a.hostLoad,a));await Promise.all(r),await((s=this.load)==null?void 0:s.call(this)),this.manager.hasDestroy&&this.manager.onUpdate(a=>a.has(oH)&&this.manager.U()),te(this,pO).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(a=>{var l;return!((l=a.manager)!=null&&l.loadedCalled)});n.length&&await Promise.allSettled(n.map(async a=>await a.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const a of this.M)"triggerLoaded"in a?a.triggerLoaded():$n(a.hostLoaded,a);(o=this.loaded)==null||o.call(this),te(this,u_).resolve()},tA.lumina=!0;let qi=tA;const y5e=t=>{let e;const i=n=>{var s;e=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},r={...t,getAssetPath(n){var o;const s=new URL(n,e);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},mt=t=>typeof t=="object"&&t!=null?zme(t):t,aH=t=>typeof t=="object"&&t!=null?Ume(t):t,Ns=Ge;let Iv;function ve(t){return typeof Iv[t]=="function"?Iv[t]=Iv[t](globalThis):Iv[t]}var Vfe,Bfe,Gfe,Hfe;Iv=(Vfe=globalThis.dojoConfig)!=null&&Vfe.has||(Bfe=globalThis.esriConfig)!=null&&Bfe.has?{...(Gfe=globalThis.dojoConfig)==null?void 0:Gfe.has,...(Hfe=globalThis.esriConfig)==null?void 0:Hfe.has}:{},ve.add=(t,e,i,r)=>{(r||Iv[t]===void 0)&&(Iv[t]=e),i&&ve(t)},ve.cache=Iv,ve.add("big-integer-warning-enabled",!0),ve.add("esri-deprecation-warnings",!0),ve.add("esri-tests-disable-screenshots",!1),ve.add("esri-tests-use-full-window",!1),ve.add("esri-tests-post-to-influx",!0),ve.add("esri-cim-animations-enable-status","enabled"),ve.add("esri-cim-animations-spotlight",!1),ve.add("esri-cim-animations-freeze-time",!1),(()=>{var e;ve.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ve.add("host-browser",t),ve.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ve.add("dom",t),ve("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(ve.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ve.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ve.add("khtml",n.includes("Konqueror")?s:void 0),ve.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ve.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ve.add("webkit",!ve("wp")&&!ve("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ve.add("chrome",!ve("edge")&&!ve("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ve.add("android",!ve("wp")&&parseFloat(r.split("Android ")[1])||void 0),ve.add("safari",!n.includes("Safari")||ve("wp")||ve("chrome")||ve("android")||ve("edge")||ve("opr")?void 0:parseFloat(n.split("Version/")[1])),ve.add("mac",n.includes("Macintosh")),!ve("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));ve.add(o,l),ve.add("ios",l)}ve("webkit")||(!r.includes("Gecko")||ve("wp")||ve("khtml")||ve("edge")||ve.add("mozilla",s),ve("mozilla")&&ve.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ve.add("esri-mobile",e),i&&ve.add("esri-iPhone",i),ve.add("esri-geolocation",!!navigator.geolocation)}ve.add("esri-wasm","WebAssembly"in globalThis),ve.add("esri-performance-mode-frames-between-render",20),ve.add("esri-force-performance-mode",!1),ve.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ve.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ve.add("esri-atomics","Atomics"in globalThis),ve.add("esri-workers","Worker"in globalThis),ve.add("web-feat:cache","caches"in globalThis),ve.add("esri-workers-arraybuffer-transfer",!ve("safari")||Number(ve("safari"))>=12),ve.add("workers-pool-size",8),ve.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ve.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ve.add("featurelayer-fast-triangulation-enabled",!0),ve.add("featurelayer-animation-enabled",!0),ve.add("featurelayer-snapshot-enabled",!0),ve.add("featurelayer-snapshot-initial-tolerance",0),ve.add("featurelayer-snapshot-point-min-threshold",8e4),ve.add("featurelayer-snapshot-point-max-threshold",4e5),ve.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ve.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ve.add("featurelayer-snapshot-polygon-min-threshold",1e3),ve.add("featurelayer-snapshot-polygon-max-threshold",2e3),ve.add("featurelayer-snapshot-polyline-min-threshold",1e3),ve.add("featurelayer-snapshot-polyline-max-threshold",2e3),ve.add("featurelayer-snapshot-max-vertex-count",25e4),ve.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!1),ve.add("featurelayer-snapshot-concurrency",4),ve.add("featurelayer-snapshot-coverage",.1),ve.add("featurelayer-query-max-depth",4),ve.add("featurelayer-query-pausing-enabled",!1),ve.add("featurelayer-query-tile-concurrency",4),ve.add("featurelayer-query-tile-max-features",6e5),ve.add("featurelayer-advanced-symbols",!1),ve.add("featurelayer-pbf",!0),ve.add("featurelayer-pbf-statistics",!1),ve.add("feature-layers-workers",!0),ve.add("feature-polyline-generalization-factor",1),ve.add("mapview-transitions-duration",200),ve.add("mapview-essential-goto-duration",200),ve.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ve.add("mapserver-pbf-version-support",10.81),ve.add("mapservice-popup-identify-max-tolerance",20),ve.add("request-queue-concurrency-hosted",16),ve.add("request-queue-concurrency-non-hosted",4),ve.add("curve-densification-coarse-segments",128),ve.add("curve-densification-max-segments",2e3),ve.add("curve-densification-min-segments",3),ve.add("curve-densification-pixel-deviation",.5),ve.add("view-readyState-waiting-delay",1e3),ve.add("gradient-depth-bias",.01),ve.add("gradient-depth-epsilon",1e-8),ve.add("enable-feature:esri-compress-textures",!0),ve("host-webworker")||ve("host-browser")&&(ve.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ve.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ve.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ve.add("esri-image-decode",!1,!0,!0)})}return!1}),ve.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function oEt(t){}function g5e(t){return()=>t}function aEt(t){return t}var yl;let xY=(yl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*yl._m}getInt(){return this._seed=(yl._a*this._seed+yl._c)%yl._m,this._seed}getFloat(){return this.getInt()/(yl._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/yl._m*r}},yl._m=2147483647,yl._a=48271,yl._c=0,yl);const v5e=1.5,lEt=1/v5e,cEt=.5;function uEt(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function b5e(t,e,i,r,n,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?((t==null?void 0:t.length)??0)+i:i),s=Math.max(0,s<0?((r==null?void 0:r.length)??0)+s:s);const a=i-e;if(t==null||r==null||a!==s-n)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[n+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[n+l])return!1;return!0}function UU(t,e,i){return b5e(t,0,(t==null?void 0:t.length)??0,e,0,(e==null?void 0:e.length)??0,i)}function Zne(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(o=>i(o,s))),n=t.filter(s=>!e.some(o=>i(o,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function dEt(t){return t&&typeof t.length=="number"}let vge=class{constructor(){this.last=0}};const bge=new vge;function lH(t,e,i,r){r=r||bge;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function w5e(t,e,i,r){const n=t.length,s=lH(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const Uu=new Set;function _5e(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;Uu.clear();for(let a=0;a<r;++a)Uu.add(e[a]);n=n||bge;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(Uu.has(t[a])&&(s==null||s.push(t[a]),Uu.delete(t[a]),t[a]=t[i-1],--i,--a,Uu.size===0||i===0))return Uu.clear(),i;for(let a=0;a<o;++a)if(Uu.has(t[a])&&(s==null||s.push(t[a]),Uu.delete(t[a]),t[a]=t[i-1],--i,--a,Uu.size===0||i===0))return Uu.clear(),i;return Uu.clear(),i}function pEt(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=SY(i),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(n()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function SY(t){return t?(Yne.seed=t,()=>Yne.getFloat()):Math.random}const Yne=new xY;function wge(t,e){if(!t)return t;const i=SY(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function $Y(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Mr(t,e){return t!=null}const fEt=[];function mEt(t){return t instanceof ArrayBuffer}function TY(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function _ge(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function xge(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function EY(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function Sge(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function CY(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function $ge(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function x5e(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float16Array"}function jU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function VU(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Tge(t){return"buffer"in t}const Ege=1024;function yEt(t){return VU(t)||jU(t)||CY(t)||EY(t)||TY(t)}function gEt(t){return VU(t)||jU(t)}function vEt(t){return VU(t)?179769e303:x5e(t)?65504:jU(t)?3402823e32:$ge(t)?4294967295:Sge(t)?65535:_ge(t)||xge(t)?255:CY(t)?2147483647:EY(t)?32767:TY(t)?127:256}const bEt=-32768,wEt=-2147483648;function IY(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function ce(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Mge(t);if(e!=null)return e;if(hz(t))return t.clone();if(Cge(t))return t.map(ce);if(Ige(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=ce(t[r]);return i}function cH(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=Mge(t);if(i!=null)return i;if(Cge(t)){let n=!0;const s=t.map(o=>{const a=cH(o,e);return o!=null&&a==null&&(n=!1),a});return n?s:null}if(hz(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(Ige(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],o=cH(s);if(s!=null&&o==null)return null;r[n]=o}return r}function hz(t){return typeof t.clone=="function"}function Cge(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Ige(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Xne(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Mge(t){if(TY(t)||_ge(t)||xge(t)||EY(t)||Sge(t)||CY(t)||$ge(t)||jU(t)||VU(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,ce(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(ce(i));return e}return null}function MY(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function kge(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&UU(t,e):t instanceof Set?e instanceof Set&&$5e(t,e):t instanceof Map?e instanceof Map&&T5e(t,e):!!Xne(t)&&Xne(e)&&S5e(t,e))}function S5e(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function $5e(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function T5e(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function kY(t,e,i=!1){return Oge(t,e,i)}function Zm(t,e){if(e!=null)return e[t]||Age(t.split("."),!1,e)}function Wn(t,e,i){const r=t.split("."),n=r.pop(),s=Age(r,!0,i);s&&n&&(s[n]=e)}function Kne(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(Kne(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(Kne(t[i],e[i]))return!0;return!1}return t!==e}function Age(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function Oge(t,e,i){return e?Object.keys(e).reduce((r,n)=>{if(n==="__proto__")return r;let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=ce(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.slice())):o&&typeof o=="object"?r[n]=Oge(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)},t||{}):t}var qfe;const hi={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:(qfe=globalThis.location)==null?void 0:qfe.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(kY(hi,globalThis.esriConfig,!0),delete hi.has),!hi.assetsPath){{const t="4.34.0-next.26";hi.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${t}/assets`}hi.defaultAssetsPath=hi.assetsPath}const E5e=/\{([^}]+)\}/g;function Qne(t){return t??""}function Tb(t,e){return e?t.replaceAll(E5e,typeof e=="object"?(i,r)=>Qne(Zm(r,e)):(i,r)=>Qne(e(r))):t}function _Et(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e!=null&&e.includes(i)?i:`\\${i}`)}function Pge(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let ese;function C5e(t){return ese??(ese=new DOMParser),ese.parseFromString(t||"","text/html").body.innerText||""}function xEt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function SEt(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const tse={info:0,warn:1,error:2,none:3};var as;let Ce=(as=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,as._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=as.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,as._loggers.get(e)||new as({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!as._throttlingDisabled){const n=M5e(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=as._tickCounter)return;this._loggedMessages[e].set(n,as._tickCounter),as._scheduleTickCounterIncrement()}for(const n of hi.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",I5e)}_matchLevel(e){const i=hi.log.level||"warn";return tse[this._parentWithMember("level",i)]<=tse[e]}static _scheduleTickCounterIncrement(){as._tickCounterScheduled||(as._tickCounterScheduled=!0,Promise.resolve().then(()=>{as._tickCounter++,as._tickCounterScheduled=!1}))}},as._loggers=new Map,as._tickCounter=0,as._tickCounterScheduled=!1,as._throttlingDisabled=!1,as);function I5e(t,e,...i){console[t](`[${e}]`,...i)}function M5e(...t){return Pge(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const k5e={remove:()=>{}};function Mi(t){return t?{remove(){t&&(t(),t=void 0)}}:k5e}function Lge(t){t.forEach(e=>e==null?void 0:e.remove())}function $Et(t){Lge(t),t.length=0}function w1(t){return Mi(()=>Lge(t))}function TEt(t){return Mi(()=>{var e;return(e=t())==null?void 0:e.remove()})}function EEt(t){return Mi(()=>t==null?void 0:t.abort())}function CEt(t){return Mi(t!=null?()=>t.destroy():void 0)}function A5e(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function IEt(t){A5e(t)&&t.remove()}function MEt(t){return{[Symbol.dispose](){t.remove()}}}function Ga(t){return t.__accessor__??null}function O5e(t,e){var i;return((i=t==null?void 0:t.metadata)==null?void 0:i[e])!=null}function F3(t,e,i){return i?pz(t,e,{policy:i,path:""}):pz(t,e,null)}function pz(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;if(s==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=ce(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=o,r[s]=pz(l,c,i),i.path=h}else r[s]=pz(l,c,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=c);return r},t||{}):t}function Rge(t){return Array.isArray(t)?t:t.split(".")}function ise(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function P5e(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...ise(i));return e}return ise(t)}function Dge(t,e,i,r){const n=P5e(e);if(n.length!==1){const s=n.map(o=>r(t,o,i));return w1(s)}return r(t,n[0],i)}const Qr={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let BU=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;(e=this.accessed)==null||e.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const fz=new BU,RM=[];let ak=fz;function Lt(t){ak.onAccessed(t)}let U3=!1,j3=!1;function jp(t,e,i){if(U3)return AY(t,e,i);let r=null;return Nge(t),r=e.call(i),zge(),r}function L5e(t,e){return jp(fz,t,e)}function AY(t,e,i){const r=U3;U3=!0,Nge(t);let n=null;try{n=e.call(i)}catch(s){j3&&Ce.getLogger("esri.core.accessorSupport.tracking").error(s)}return zge(),U3=r,n}function Nge(t){ak=t,RM.push(t)}function zge(){const t=RM.length;if(t>1){const e=RM.pop();ak=RM[t-2],e.onTrackingEnd()}else if(t===1){const e=RM.pop();ak=fz,e.onTrackingEnd()}else ak=fz}function Fge(t,e){if(e.flags&Qr.DepTrackingInitialized)return;e.flags|=Qr.DepTrackingInitialized;const i=j3;j3=!1,e.flags&Qr.AutoTracked?AY(e.trackingTarget,e.metadata.get,t):Uge(t,e),j3=i}const R5e=[];function Uge(t,e){e.flags&Qr.ExplicitlyTracking||(e.flags|=Qr.ExplicitlyTracking,AY(e.trackingTarget,()=>{const i=e.metadata.dependsOn||R5e;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=Rge(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=rse(o,n[s],s!==n.length-1)}else rse(t,r,!1)}),e.flags&=-129)}function rse(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=Ga(t);if(n){const s=n.propertiesByName.get(r);s&&(Lt(s),Fge(t,s))}return i?t[r]:void 0}let D5e=class{constructor(e,i){this._observers=e,this._observer=i}remove(){$Y(this._observers,this._observer)}},jge=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return N5e;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new D5e(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const N5e=Mi();let lC=class extends jge{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},z5e=class{constructor(e,i){this._observable=new lC,this._value=e,this._equalityFunction=i}get value(){return Lt(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Q_(t,e=kge){return new z5e(t,e)}let PO=class extends BU{constructor(e){super(new F5e(e)),this._observer&&nse.register(this,new WeakRef(this._observer),this)}destroy(){var e,i;this._observer&&nse.unregister(this._observer),(e=this.accessed)==null||e.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},F5e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=U5e}};const nse=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function U5e(){}function j5e(t,e){return Q_(t,e)}function Vge(){return new lC}function V5e(t){return new PO(t)}function Bge(t){Lt(t)}function B5e(t,e){return jp(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const LO=y5e({defaultAssetPath:"https://jsdev.arcgis.com/next/map-components/",hydratedAttribute:"hydrated"}),{customElement:or,getAssetPath:Gge,setAssetPath:NEt}=LO;LO.t=Bge;LO.o=Vge;LO.c=V5e;LO.r=B5e;function GU(t){return G5e(t)||Hge(t)}function G5e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function Hge(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function oy(t,e,i){if(!GU(t))throw new TypeError("target is not a Evented or EventTarget object");return Hge(t)?H5e(t,e,i):t.on(e,i)}function H5e(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return Mi(()=>{for(const s of n)t.removeEventListener(s,i,r)})}return t.addEventListener(e,i,r),Mi(()=>t.removeEventListener(e,i,r))}function qge(t,e,i){if(!GU(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=oy(t,e,n=>{r.remove(),i.call(t,n)});return r}function RO(t,e){if(t==null)throw new Error(e??"value is None")}function xr(t){return t==null||t.destroy(),null}function zEt(t){return t==null||t.dispose(),null}function rn(t){return t==null||t.remove(),null}function TE(t){return t==null||t.abort(),null}function FEt(t){return t==null||t.release(),null}function q5e(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function _A(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}function W5e(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Mi(()=>t.clearTimeout(r))}}}const cC=W5e(globalThis);function J5e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(Zm(r,e)??"").toString())}let Wge=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&J5e(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},Q=class Jge extends Wge{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ce(i)}catch{return"[object]"}}))}}catch(e){throw Ce.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new Jge(e.name,e.message,e.details)}};Q.prototype.type="error";function Gi(t="Aborted"){return new Q("AbortError",t)}function sr(t,e="Aborted"){if(xc(t))throw Gi(e)}function DO(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function xc(t){const e=DO(t);return e!=null&&e.aborted}function Hh(t){if(ds(t))throw t}function sse(t){if(!ds(t))throw t}function no(t,e){const i=DO(t);if(i!=null){if(!i.aborted)return qge(i,"abort",()=>e());e()}}function OY(t,e){const i=DO(t);if(i!=null)return sr(i),qge(i,"abort",()=>e(Gi()))}function Zge(t,e){return DO(e)==null?t:new Promise((i,r)=>{let n=no(e,()=>r(Gi()));const s=()=>{n=rn(n)};t.then(s,s),t.then(i,r)})}function ds(t){return(t==null?void 0:t.name)==="AbortError"}async function EE(t){try{return await t}catch(e){if(!ds(e))throw e;return}}async function Vw(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),n=await Vw(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function Z5e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function jEt(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function PY(t,e=void 0,i){const r=new AbortController;return no(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);no(r,()=>{o&&(clearTimeout(o),s(Gi()))})})}function VEt(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout(()=>{s=0,n==null||n.abort()},e);const o=()=>r||new Q("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function Y5e(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return no(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function nf(t){return t&&typeof t.then=="function"}function uH(t){return nf(t)?t:Promise.resolve(t)}function NO(t,e=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(Gi()),s=Mo();const y=s.promise;if(o){const v=o;o=null,v.abort()}return y}if(n=s||Mo(),s=null,e>0){const y=new AbortController;i=uH(t(...l,y.signal));const v=i;PY(e).then(()=>{i===v&&(s?y.abort():o=y)})}else i=1,i=uH(t(...l));const c=()=>{const y=r;r=n=i=o=null,y!=null&&a(...y)},h=i,m=n;return h.then(c,c),h.then(m.resolve,m.reject),m.promise};return a}function Mo(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>cC.setTimeout(()=>r.reject(s),n),r.promise=i,r}function BEt(t,e){e.then(t.resolve,t.reject)}async function ose(t){await Promise.resolve(),sr(t)}function X5e(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function K5e(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}var Jv;let _1=(Jv=class{constructor(e,i,r,n=1,s=0){this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Jv.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):K5e(i)&&i.acquire(...e),i}release(e){e&&!Jv.test.disabled&&(this._releaseFunction?this._releaseFunction(e):X5e(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Jv.test={disabled:!!ve("esri-tests-disable-memory-pools")},Jv);function Q5e(t){t.length=0}let Ra=class{constructor(e=50,i=50){this._pool=new _1(Array,void 0,Q5e,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return YV.acquire()}static release(e){return YV.release(e)}static prune(){YV.prune()}};const YV=new Ra(100);let Yge=class extends _1{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const XL=[];function mz(t){XL.push(t),XL.length===1&&queueMicrotask(()=>{const e=XL.slice();XL.length=0;for(const i of e)i()})}let lk=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const yz=(t,e,i,r)=>{let n=e,s=e;const o=i>>>1,a=t[n-1];for(;s<=o;){s=n<<1,s<i&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,a)<=0)break;t[n-1]=l,n=s}t[n-1]=a},Xge=(t,e)=>t<e?-1:t>e?1:0;function eUe(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=Xge);for(let s=i>>>1;s>e;s--)yz(t,s,i,r);const n=e+1;for(let s=i-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,yz(t,n,s,r)}}function*tUe(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=Xge);for(let s=i>>>1;s>e;s--)yz(t,s,i,r),yield;const n=e+1;for(let s=i-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,yz(t,n,s,r),yield}}const iUe=1.5,rUe=1.1;let ck=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new vge,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>ase(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,ase(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=lH(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(lH(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=_5e(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){eUe(this.data,0,this.length,e)}iterableSort(e){return tUe(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function ase(t){t.data.length>iUe*t.length&&(t.data.length=Math.floor(t.length*rUe))}function JEt(t){return t}function nUe(t){return 1e3*t}function ZEt(t){return t}function YEt(t){return .001*t}let sUe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},oUe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},dH=0;const NI={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},hH=["prepare","preRender","render","postRender","update","finish"],pH=[],e1=new ck;let aUe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Kge()}};function lUe(){y_!=null&&(cancelAnimationFrame(y_),y_=requestAnimationFrame(LY))}function Kge(){y_==null&&(dH=performance.now(),y_=requestAnimationFrame(LY))}const gz={frameTasks:e1,willDispatch:!1,clearFrameTasks:cUe,dispatch:eve,executeFrameTasks:uUe,reschedule:lUe};function zO(t){const e=new oUe(t);return pH.push(e),gz.willDispatch||(gz.willDispatch=!0,mz(eve)),e}function CE(t){const e=new sUe(t);return e1.push(e),Kge(),new aUe(e)}let y_=null;function cUe(t=!1){e1.forAll(e=>{e.removed=!0}),t&&Qge()}function LY(){const t=performance.now();y_=null,y_=e1.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(LY):null,gz.executeFrameTasks(t)}function uUe(t){const e=t-dH;dH=t;const i=1e3/60,r=Math.max(0,e-i);NI.time=t,NI.frameDuration=i-r;for(let n=0;n<hH.length;n++){const s=performance.now(),o=hH[n];e1.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(NI.elapsedFrameTime=performance.now()-t,NI.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,NI)))}),fUe[n].push(performance.now()-s)}Qge(),mUe.push(performance.now()-t)}const KL=new ck;function Qge(){e1.forAll(t=>{t.removed&&KL.push(t)}),e1.removeUnorderedMany(KL.data,KL.length),KL.clear()}function eve(){for(;pH.length;){const t=pH.shift();t.isActive&&t.callback()}gz.willDispatch=!1}function dUe(t=1,e){const i=Mo(),r=()=>{xc(e)?i.reject(Gi()):t===0?i():(--t,mz(()=>r()))};return r(),i.promise}function hUe(t){return dUe(1,t)}async function pUe(t){await hUe(t),await new Promise(e=>requestAnimationFrame(()=>{t!=null&&t.aborted||e()}))}const fUe=hH.map(t=>new lk(t)),mUe=new lk("total");function tve(t,e){for(const i of t.values())if(e(i))return!0;return!1}function vz(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function lse(t,e){return e!=null&&t.add(e),t}function RY(t,e){const i=new Set;return vz(i,t),vz(i,e),i}function yUe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function eCt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function tCt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function gUe(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function vUe(t,e){return gUe(RY(t,e),yUe(t,e))}let bUe=0;function V3(){return++bUe}function ive(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=Ga(e);return O5e(r,i)?r.get(i):e[i]}function rve(t,e,i){if(t==null)return t;const r=ive(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:rve(r,e,i+1)}function FO(t,e,i=0){return typeof e!="string"||e.includes(".")?rve(t,Rge(e),i):ive(e,t)}function oa(t,e){return FO(t,e)}function cse(t,e){return FO(e,t)!==void 0}const dc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let N$=!1;const bz=[];function nve(t,e){let i=new PO(s),r=null,n=!1;function s(){if(!i||n)return;if(N$)return void ave(s);const a=r;i.clear(),N$=!0,n=!0,r=jp(i,t),n=!1,N$=!1,e(r,a),lve()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=jp(i,t),n=!1,Mi(o)}function sve(t,e){let i=new PO(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=jp(i,t),r):null}return o(),Mi(s)}function ove(t,e){let i=!1,r=!1;const n=!!(e!=null&&e.sync);let s=new PO(()=>{i||r||(r=!0,n?o():queueMicrotask(o))});function o(){r=!1,s&&!i&&(N$?ave(o):(s.clear(),N$=!0,i=!0,jp(s,t),i=!1,N$=!1,lve()))}function a(){s&&(s.destroy(),s=null)}return i=!0,jp(s,t),i=!1,Mi(a)}function ave(t){bz.includes(t)||bz.unshift(t)}function lve(){for(;bz.length;)bz.pop()()}var uk;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(uk||(uk={}));var $_;let DY=($_=class{constructor(){this.uid=V3(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(uk.Untracked,e,i,r,n,s,MY)}static acquireTracked(e,i,r,n){return this.pool.acquire(uk.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===uk.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=V3(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=V3(),this.removed=!0}},$_.pool=new Yge($_),$_);const B3=new Ra,ay=new Set;let wz;function _z(t){ay.delete(t),ay.add(t),wz||(wz=zO(xUe))}function wUe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function _Ue(t){for(const e of ay.values())e.target===t&&(e.removed=!0)}function xUe(){let t=10;for(;wz&&t--;){wz=null;const e=SUe(),i=B3.acquire();for(const r of e){const n=r.uid;wUe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of ay)r.removed&&(i.push(r),ay.delete(r));for(const r of i)DY.pool.release(r);B3.release(i),B3.release(e),fH.forEach(r=>r())}}function SUe(){const t=B3.acquire();t.length=ay.size;let e=0;for(const i of ay)t[e]=i,++e;return ay.clear(),t}const fH=new Set;function $Ue(t){return fH.add(t),Mi(()=>fH.delete(t))}function TUe(t,e,i){let r=Dge(t,e,i,(n,s,o)=>{let a,l,c=sve(()=>FO(n,s),(h,m)=>{var y;((y=n.__accessor__)==null?void 0:y.lifecycle)===dc.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=DY.acquireUntracked(h,o,m,n,s),l=a.uid),_z(a))});return Mi(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,_z(a)),a=null),r=c=null})});return r}function EUe(t,e,i){const r=Dge(t,e,i,(n,s,o)=>{let a=!1;return nve(()=>FO(n,s),(l,c)=>{n.__accessor__.lifecycle!==dc.DESTROYED?a||(a=!0,MY(c,l)||o.call(n,l,c,s,n),a=!1):r.remove()})});return r}function CUe(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==dc.DESTROYED?r?EUe(t,e,i):TUe(t,e,i):Mi()}function IUe(t,e,i){let r,n,s=sve(t,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=DY.acquireTracked(o,e,a,i),n=r.uid),_z(r))});return Mi(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,_z(r)),r=null),s=null})}function MUe(t,e,i){let r=!1;return nve(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function kUe(t,e,i=!1,r=kge){return i?MUe(t,e,r):IUe(t,e,r)}function use(t){return tve(ay,e=>e.oldValue===t)}function Le(t,e,i={}){return NY(t,e,i,cve)}function hs(t,e,i={}){return NY(t,e,i,uve)}function NY(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(rn(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=kUe(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function ua(t,e,i,r={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=r.onListenerRemove)==null||h.call(r,n),n=null,s=null)}function l(h){r.once&&r.once&&rn(o),i(h)}const c=Le(t,(h,m)=>{var y;a(),GU(h)&&(n=h,s=oy(h,e,l),(y=r.onListenerAdd)==null||y.call(r,h))},{sync:r.sync,initial:!0});return o=Mi(()=>{c.remove(),a()}),o}function Vp(t,e){return AUe(t,uve,e)}function AUe(t,e,i){if(xc(i))return Promise.reject(Gi());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=rn(n)}return new Promise((o,a)=>{n=w1([no(i,()=>{s(),a(Gi())}),NY(t,l=>{s(),o(l)},{sync:!1,once:!0},e??cve)])})}function cve(t){return!0}function uve(t){return!!t}function OUe(t,e,i={}){let r=!1;const n=Le(t,(s,o)=>{r||e(s,o)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const Bp={sync:!0},gi={initial:!0},Oa={sync:!0,initial:!0},UO=t=>(...e)=>{const i=fY(),r=new t(...e),n=r.exports;pY(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),KFe(r);const o=[r.component,...i].reverse();return vY(o,a=>a===void 0?void 0:PUe(r,a,n),n)},PUe=(t,{host:e,key:i,isReactive:r},n)=>{var m;const s=e,o=s[i]!==t.exports,a=s[i]!==n,l=n!==t.exports;if(o&&!a&&l&&(s[i]=t.exports),e===t.component){if(r){const y=t.component.manager;a&&y.W(t,s[i]),t.onUpdate(v=>{if(v.has(i)){const w=s[i];w!==t.exports&&y.W(t,w)}})}t.O=r?void 0:i}const h=(m=t.component.constructor.elementProperties.get(i))==null?void 0:m.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(h?i5e(()=>{s[i]=t.exports}):s[i]=t.exports)})};function LUe(t,e){for(const i of t.values())if(e(i))return!0;return!1}function iCt(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function rCt(t,e){for(const i of t.values())if(e(i))return i;return null}function x1(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function nCt(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const g_=()=>Ce.getLogger("esri.core.accessorSupport.ensureTypes");function RUe(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(g_().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function DUe(t){return t==null?t:!!t}function jO(t){return t==null?t:t.toString()}function Da(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function zY(t){return t==null?t:Math.round(parseFloat(t))}function NUe(t){return null}function zUe(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function dve(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function xz(t,e){return e!=null&&t&&!(e instanceof t)}function hve(t){return t&&"isCollection"in t}function dse(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function FUe(t,e){if(!(e!=null&&e.constructor)||!hve(e.constructor))return mH(t,e)?e:new t(e);const i=dse(t.prototype.itemType),r=dse(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(mH(t,e),e):new t(e):e}function mH(t,e){return!!dve(e)&&(g_().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+HU(t)+"'"),!0)}function S1(t,e){return e==null?e:hve(t)?FUe(t,e):xz(t,e)?mH(t,e)?e:new t(e):e}function HU(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const UUe=new WeakMap;function jUe(t){switch(t){case Number:return e=>Da(e);case fi:return zY;case Boolean:return DUe;case String:return jO;case Date:return RUe;case uC:return NUe;default:return x1(UUe,t,()=>S1.bind(null,t))}}function hr(t,e){const i=jUe(t);return arguments.length===1?i:i(e)}function xA(t,e,i){return arguments.length===1?xA.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function VUe(t,e){return arguments.length===1?xA(i=>hr(t,i)):xA(i=>hr(t,i),e)}function pve(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>pve(t,e-1,r)):t(i)}function Sz(t,e,i){if(arguments.length===2)return s=>Sz(t,e,s);if(!i)return i;i=pve(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function BUe(t,e,i){return arguments.length===2?Sz(r=>hr(t,r),e):Sz(r=>hr(t,r),e,i)}function fve(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function yH(t,e){if(arguments.length===2)return yH(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),n=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(i.has(a)||n.some(m=>c==="string"&&m===String||c==="number"&&m===Number))||c==="object"&&n.some(m=>!xz(a,m))?a:(h&&r.length?(s||(s=r.map(m=>typeof m=="string"?`'${m}'`:`${m}`).join(", ")),g_().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(m=>HU(m)).join(", ")),g_().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):g_().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Gp(t,e){if(arguments.length===2)return Gp(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=hr(c),r.push(HU(c)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!xz(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,h=i[c];if(!h)return g_().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!xz(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!dve(l)){const m={};for(const y in l)y!==t.key&&(m[y]=l[y]);return h(m)}return h(l)}}let fi=class{},uC=class{};const aCt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function GUe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function mve(t){switch(t.type){case"native":return hr(t.value);case"array":return xA(mve(t.value));case"one-of":return HUe(t);default:return null}}function HUe(t){let e=null;return(i,r)=>vH(i,t)?i:(e==null&&(e=gH(t)),g_().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function gH(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case fi:return"integer";case Date:return"date";case uC:return"null";default:return HU(t.value)}case"array":return`array of ${gH(t.value)}`;case"one-of":{const e=t.values.map(i=>gH(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function vH(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case fi:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case uC:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!vH(i,e.value));case"one-of":return e.values.some(i=>vH(t,i))}}function VO(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=ce(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function BO(t,e){const i=VO(t);let r=i[e];return r||(r=i[e]={}),r}function qUe(t,e){return F3(t,e,JUe)}const WUe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function JUe(t){return WUe.test(t)?"replace":"merge"}function $z(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))$z(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void $z(oa(t,n),s,i)}const r=t.__accessor__;r!=null&&ZUe(e,r),t[e]=i}}function ZUe(t,e){if(ve("esri-unknown-property-errors")&&!YUe(t,e))throw new Q("set:unknown-property",XUe(t,e))}function YUe(t,e){return e.metadata[t]!=null}function XUe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function p(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=BO(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&Ce.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let m=oa(this,l);if(typeof m=="function"){h||(h=l.split(".").slice(0,-1).join("."));const y=oa(this,h);y&&(m=m.bind(y))}return m},n.readOnly||(n.set=c?function(m){this._override(i,m)}:function(m){$z(this,l,m)})}const o=t.type,a=t.types;if(!n.cast){let l;o?l=KUe(o):a&&(l=Array.isArray(a)?xA(Gp(a[0])):Gp(a)),t.cast=QUe(t.cast,l)}qUe(n,t),t.range&&(n.cast=zUe(n.cast,t.range))}}function FY(t,e,i){const r=BO(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function KUe(t){let e=0,i=t;if(GUe(t))return mve(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(fve(r))return e===0?yH(r):Sz(yH(r),e);if(e===1)return VUe(r);if(e>1)return BUe(r,e);const n=t;return n.from?n.from:hr(n)}function QUe(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const e4e=Object.prototype.toString;function t4e(t){const e="__accessorMetadata__"in t?hr(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return i4e.apply(this,i)}}function i4e(t,e,i,r){BO(t,e).cast=r}function r4e(t){return(e,i)=>{BO(e,t).cast=e[i]}}function _i(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&e4e.call(t[0])==="[object Function]"?t4e(t[0]):t.length===1&&typeof t[0]=="string"?r4e(t[0]):void 0}let Et=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=n4e(e),this.apiValues=hse(this._apiToJSON),this.jsonValues=hse(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Wn(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function n4e(t){const e={};for(const i in t)e[t[i]]=i;return e}function hse(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Wt(){return function(t,e){return new Et(t,{ignoreUnknown:!0,...e})}}function at(t,e={}){const i=t instanceof Et?t:new Et(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return p({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}function Ue(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=FY(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))})}}function UY(t){return(e,i)=>{e[i]=t}}const yve=Symbol("Accessor-beforeDestroy");function s4e(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let Sc=class extends Wge{constructor(e,i,r){super(e,i,r)}};Sc.prototype.type="warning";function gve(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const bH=()=>Ce.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function pse(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||l4e(t)&&Wn("read.reader",dC(t),e))}function dC(t){var i,r;const e=t.ndimArray??0;if(e>1)return a4e(t);if(e===1)return fse(t);if("type"in t&&bve(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=fse(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const c=s(o,a,l);return c&&new t.type(c)}}return jY(t)}function jY(t){return"type"in t?o4e(t.type):c4e(t.types)}function o4e(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void bH().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function vve(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>vve(t,n,i,r-1)):t(e,void 0,i)}function a4e(t){const e=jY(t),i=vve.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function fse(t){const e=jY(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function bve(t){if(!gve(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?VY(e.Type):wve(e.Type))}function l4e(t){return"types"in t?wve(t.types):VY(t.type)}function VY(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||bve(t))}function wve(t){for(const e in t.typeMap)if(!VY(t.typeMap[e]))return!1;return!0}function c4e(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void bH().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=u4e(t));const l=t.key;if(typeof l!="string")return;const c=n[l],h=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!h){const y=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new Sc(`${i}:unsupported`,y,{definition:n,context:o})),void bH().error(y)}const m=new h;return m.read(n,o),r?r(m):m}}function u4e(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=VO(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;if((i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){e[a.json.type[0]]=s;continue}const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[n]=s;continue}const c=l.target,h=typeof c=="string"?c:t.key,m={};l.writer(n,m,h),m[h]&&(e[m[h]]=s)}return e}function d4e(t){if(t.json||(t.json={}),yse(t.json),gse(t.json),mse(t.json),t.json.origins)for(const e in t.json.origins)yse(t.json.origins[e]),gse(t.json.origins[e]),mse(t.json.origins[e]);return!0}function mse(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function yse(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function gse(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function vse(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&gve(t.type))?e.write.writer=f4e:i>1?e.write.writer=m4e(i):e.types?Array.isArray(e.types)?e.write.writer=p4e(e.types[0]):e.write.writer=h4e(e.types):e.write.writer=SA}function h4e(t){return(e,i,r,n)=>e?_ve(e,t,n)?SA(e,i,r,n):void 0:SA(e,i,r,n)}function _ve(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new Q(`${r}:unsupported`,n,{definition:t,context:i})),Ce.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function p4e(t){return(e,i,r,n)=>!e||!Array.isArray(e)?SA(e,i,r,n):SA(e.filter(s=>_ve(s,t,n)),i,r,n)}function SA(t,e,i,r){Wn(i,Tz(t,r),e)}function Tz(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Ez(t):t}function Ez(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function f4e(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>Tz(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[Tz(t,r)],Wn(i,n,e)}function xve(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>xve(r,e,i-1)):Tz(t,e)}function m4e(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=xve(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Wn(r,s,i)}}function y4e(t,e){return BY(t,"any",e==null?void 0:e.origin)}function wH(t,e){return BY(t,"read",e==null?void 0:e.origin)}function Sve(t,e){return BY(t,"write",e==null?void 0:e.origin)}function BY(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function g4e(t){var i;const e=v4e(t);if(t.json.origins)for(const r in t.json.origins){const n=t.json.origins[r],s=n.types?b4e(n):e;pse(s,n,!1),n.types&&!n.write&&((i=t.json.write)!=null&&i.enabled)&&(n.write={...t.json.write}),vse(s,n)}pse(e,t.json,!0),vse(e,t.json)}function v4e(t){return t.json.types?_H(t.json):t.type?$ve(t):_H(t)}function b4e(t){return t.type?$ve(t):_H(t)}function $ve(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!fve(i);)i=i[0],e++;return{type:i,ndimArray:e}}function _H(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function w4e(t){d4e(t)&&(s4e(t),g4e(t))}const XV=new Set,KV=new Set;function U(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,x4e(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!XV.has(n.initialize)&&(XV.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!KV.has(n.destroy)&&(KV.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);XV.clear(),KV.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[yve];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=dc.DESTROYING,l=!0,c.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=VO(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function _4e(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&Lt(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function x4e(t){const e=t.prototype,i=VO(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];w4e(s),r[n]={enumerable:!0,configurable:!0,get:_4e(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?bse("read-only",n):a.lifecycle===dc.CONSTRUCTED&&s.constructOnly?bse("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const bse=(t,e)=>{Ce.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};function qe(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=FY(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}const wse=new WeakMap;function S4e(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=wse.get(t);n||(n=new Set,wse.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const Cz="https://www.esriurl.com/";function $4e(t,e,i,r={}){ve("esri-deprecation-warnings")&&db(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${Cz}${i}/`,`Esri's move to web components: ${Cz}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function T4e(t,e,i,r={}){ve("esri-deprecation-warnings")&&db(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${Cz}${i}/`,`Esri's move to web components: ${Cz}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function E4e(t,e,i={}){ve("esri-deprecation-warnings")&&db(t,`Module: ${e}`,i)}function Tve(t,e,i={}){if(ve("esri-deprecation-warnings")){const{moduleName:r}=i;db(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function Eve(t,e,i={}){if(ve("esri-deprecation-warnings")){const{moduleName:r}=i;db(t,`Property: ${(r?r+"::":"")+e}`,i)}}function C4e(t,e,i={}){ve("esri-deprecation-warnings")&&db(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function db(t,e,i={}){if(ve("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),n&&(a+=`
	 Version: ${n}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;S4e(t,a,o)}}function uCt(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function I4e(t,e){for(const i of t)if(i!=null&&e(i))return i}function Iz(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let hC=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Iz(e)){const r=this._getOrCreateGroup(i);for(const n of e)xse(n)&&r.push(n)}else xse(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(QL(e))}remove(e){if(typeof e!="string"&&Iz(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(_se(this._getGroup(e)),this._groups.delete(QL(e)),this):this}removeAll(){return this._groups.forEach(_se),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(QL(e),i),i}_getGroup(e){return this._groups.get(QL(e))}};function QL(t){return t||"_default_"}function _se(t){for(const e of t)e instanceof hC?e.removeAll():e.remove()}function xse(t){return t!=null&&(!!t.remove||t instanceof hC)}var Bt;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Bt||(Bt={}));const xH=Bt.USER+1;function Ym(t){switch(t){case"defaults":return Bt.DEFAULTS;case"service":return Bt.SERVICE;case"portal-item":return Bt.PORTAL_ITEM;case"web-scene":return Bt.WEB_SCENE;case"web-map":return Bt.WEB_MAP;case"link-chart":return Bt.LINK_CHART;case"user":return Bt.USER;default:return null}}function $A(t){switch(t){case Bt.DEFAULTS:return"defaults";case Bt.SERVICE:return"service";case Bt.PORTAL_ITEM:return"portal-item";case Bt.WEB_SCENE:return"web-scene";case Bt.WEB_MAP:return"web-map";case Bt.LINK_CHART:return"link-chart";case Bt.USER:return"user"}}function M4e(t){return $A(t)}let Sse=class extends jge{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new BU(this),this.flags=0,this.flags=Qr.Dirty|(i.nonNullable?Qr.NonNullable:0)|(i.hasOwnProperty("value")?Qr.HasDefaultValue:0)|(i.get===void 0?Qr.DepTrackingInitialized:0)|(i.dependsOn===void 0?Qr.AutoTracked:0)}destroy(){this.flags&Qr.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Lt(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&Qr.Computing||~n&Qr.Dirty&&i.has(r))return s;this.flags|=Qr.Computing;const o=e.host;let a;n&Qr.AutoTracked?a=jp(this.trackingTarget,this.metadata.get,o):(Uge(o,this),a=this.metadata.get.call(o)),this.flags|=Qr.DepTrackingInitialized,i.set(r,a,Bt.COMPUTED);const l=i.get(r);return l===s?this.flags&=-2:L5e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Qr.Overridden&&(this.flags|=Qr.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},k4e=class Cve{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Cve;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,ce(r))}),i}get(e){return this._values.get(e)}originOf(){return Bt.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function Ix(t,e,i){return t!==void 0}function $se(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Qr.NonNullable)||(r.lifecycle,!1))}let A4e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=dc.INITIALIZING,this.store=new k4e,this.mutable=!0,this._origin=Bt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new Sse(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=dc.CONSTRUCTING}constructed(){this.lifecycle=dc.CONSTRUCTED}destroy(){this.lifecycle=dc.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==dc.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!Ix(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Lt(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Qr.HasDefaultValue)return"defaults"}return $A(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(Ix(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);Ix(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!Ix(n))return"";const s=new BU,o=jp(s,()=>{var c;return(c=n.metadata.get)==null?void 0:c.call(e)});let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof Sse&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(Ix(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Qr.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!Ix(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&Qr.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Qr.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!$se(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(QV.release(s),!o)return;i=a}r.flags|=Qr.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!$se(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(QV.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Ym(e)}getDefaultOrigin(){return $A(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==dc.INITIALIZING?this._origin:Bt.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&MY(i,n.get(s))&&~e.flags&Qr.Overridden)return;const o=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);o&&e.invalidate(),n.set(s,i,r),o&&e.commit(),Fge(this.host,e)}_cast(e,i){const r=QV.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},O4e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const QV=new _1(O4e);let P4e;function L4e(){return P4e}var Tse;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(Tse||(Tse={}));var Ese,Cse;function R4e(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const ah=Symbol("Accessor-Handles"),eB=Symbol("Accessor-Initialized");var Zv;let st=(Zv=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}VO(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let m;this.inherited=function(...y){if(s.prototype[a])return s.prototype[a].apply(this,y)};try{m=l.apply(this,c)}catch(y){throw this.inherited=h,y}return this.inherited=h,m}:e[a]}for(const a in i){const l=R4e(i[a]);p(l)(o.prototype,a)}return U(r)(o)}static freeze(e){return e instanceof Zv?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Zv?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){var r;if(this[Ese]=null,this[Cse]=!1,this.constructor===Zv)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new A4e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,e))??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[eB]=!0}initialize(){}[yve](){this[ah]=xr(this[ah])}destroy(){var e;this.destroyed||(_Ue(this),this.__accessor__.destroy(),(e=L4e())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[eB]}get destroyed(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===dc.DESTROYED||!1}get destroying(){var e;return((e=this.__accessor__)==null?void 0:e.lifecycle)===dc.DESTROYING||!1}commitProperty(e){oa(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return $z(this,e,i),this}watch(e,i,r){return Tve(Ce.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),CUe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[ah]??(this[ah]=new hC)).add(e,i)}removeHandles(e){var i;(i=this[ah])==null||i.remove(e)}removeAllHandles(){var e;(e=this[ah])==null||e.removeAll()}removeHandlesReference(e){var i;(i=this[ah])==null||i.removeReference(e)}hasHandles(e){var i;return((i=this[ah])==null?void 0:i.has(e))===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},Ese=ah,Cse=eB,Zv);const Ir=(t,e)=>{const r=aC().manager;r.onLoaded(()=>r.onLifecycle(()=>ua(t,e,n.emit)));const n=bY();return n},Ive=(t,e)=>i=>D4e(i,t);var d_,FT,Sv;class GY extends _Y{constructor(i,r){super(i);Qe(this,d_);Qe(this,FT);Qe(this,Sv);this.Y=new Map,this.A=void 0,We(this,FT,Vge());const n=this;We(n,Sv,r),n.Z(),n.setProvisionalExports(Mve(i,new WeakRef(n),i.M.length-1,n.instance,n.Y),!1),gY(i,s=>{if(s){const o=Le(()=>i[s],a=>{if(a===n.instance)return;const l=n.instance;n.exports=a,n.instance=a,n.Y.forEach((c,h)=>i.requestUpdate(c,l[h])),te(n,d_)&&l.destroy(),We(n,d_,!1)},{sync:!0});n.onDestroy(o.remove)}},n.exports)}get exports(){return Bge(te(this,FT)),super.exports}set exports(i){super.exports=i,te(this,FT).notify()}Z(){var r;const i=this;i.instance="prototype"in te(i,Sv)&&"declaredClass"in te(i,Sv).prototype?new(te(i,Sv)):te(r=i,Sv).call(r),We(i,d_,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){var i,r;te(this,d_)&&((r=(i=this.instance).destroy)==null||r.call(i))}}d_=new WeakMap,FT=new WeakMap,Sv=new WeakMap;const D4e=UO(GY),Mve=(t,e,i,r,n)=>new Proxy(r,{get:(s,o)=>{const a=s[o];if(typeof o=="symbol"||n.has(o))return a;const l=t.M[i];return l.A=o,vY(t,c=>{if(l.A=void 0,c!==void 0){const h=c.key;n.set(o,h);const m=t.constructor.getPropertyOptions(h),y=o!==h&&h.toLowerCase().includes("disable");N4e(e,m,o,h,y),m.i===void 0&&z4e(m,i,o,y)}},a)}}),N4e=(t,e,i,r,n,s)=>s=Le(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?s=s.remove():o.exports[i]},(o,a)=>{if(!s)return;const l=t.deref().component;l==null||l.requestUpdate(r,n?!a:a),e.c=!1},{sync:!0}),z4e=(t,e,i,r)=>{t.d.get=function(){var s;const n=(s=this.M[e])==null?void 0:s.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},F4e=t=>t.Y,U4e=(t,e)=>{const i=e.manager.useRefSync(t);i==null||i.hostDestroy(),i==null||i.Z(),i==null||i.hostConnected()};function u(t,e,i,r){var n,s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function mCt(t,e){return function(i,r){e(i,r,t)}}function yCt(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(m){o(m)}}function l(h){try{c(r.throw(h))}catch(m){o(m)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function gCt(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}return e}var j4e=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function vCt(t){function e(s){t.error=t.hasError?new j4e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,function(o){return e(o),n()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}const V4e="modulepreload",B4e=function(t){return"/arcgis-react-map/"+t},Ise={},$e=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){let o=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(i.map(c=>{if(c=B4e(c),c in Ise)return;Ise[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":V4e,h||(y.as="script"),y.crossOrigin="",y.href=c,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},kve=t=>{const e=t;let i=class extends e{clone(r){var h;const n=Ga(this);RO(n,"unable to clone instance of non-accessor class");const s=n.metadata,o=n.store,a={},l=new Map;for(const m in s){const y=s[m],v=o==null?void 0:o.originOf(m),w=y.clonable;if(y.readOnly||w===!1||v!==Bt.USER&&v!==Bt.DEFAULTS&&v!==Bt.WEB_MAP&&v!==Bt.WEB_SCENE)continue;const x=this[m];let S=null;S=typeof w=="function"?w(x,r):w==="reference"?x:cH(x,r),x!=null&&S==null||(v===Bt.DEFAULTS?l.set(m,S):a[m]=S)}const c=new(Object.getPrototypeOf(this)).constructor(a);if(l.size){const m=(h=Ga(c))==null?void 0:h.store;if(m)for(const[y,v]of l)m.set(y,v,Bt.DEFAULTS)}return c}};return i=u([U("esri.core.Clonable")],i),i};let DM=class extends kve(st){};DM=u([U("esri.core.Clonable")],DM),function(t){t.ClonableMixin=kve}(DM||(DM={}));const It=DM;let F0=class extends It{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],F0.prototype,"row",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],F0.prototype,"column",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],F0.prototype,"rows",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],F0.prototype,"columns",void 0),F0=u([U("esri.CameraLayout")],F0);const Ave=F0,Mse=new Float32Array(1);function _Ct(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function da(t,e,i){return Math.min(Math.max(t,e),i)}function G4e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function NM(t,e,i){return t+(e-t)*i}function xCt(t,e,i,r,n){return NM(r,n,(t-e)/(i-e))}function Ep(t){return t*Math.PI/180}function Ove(t){return 180*t/Math.PI}function SCt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function $Ct(t){return Math.acos(da(t,-1,1))}function H4e(t){return Math.asin(da(t,-1,1))}function Sl(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function Pve(t,e,i=1e-6){return!Sl(t,e,i)&&t>e}function SH(t,e,i=1e-6){return!Sl(t,e,i)&&t<e}function q4e(t,e,i=1e-6){return Sl(t,e,i)||t>e}const Mz=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function $H(t){return Mz.setFloat64(0,t),Mz.getBigInt64(0)}function W4e(t){return Mz.setBigInt64(0,t),Mz.getFloat64(0)}const G3=1000000n,J4e=Lve(1);function Lve(t){const e=$H(t=Math.abs(t)),i=W4e(e<=G3?G3:e-G3);return Math.abs(t-i)}function TCt(t,e,i=J4e){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&Lve(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=$H(t),n=$H(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>G3)}function Z4e(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function Y4e(t){return Rve(Math.max(-TH,Math.min(t,TH)))}function Rve(t){return Mse[0]=t,Mse[0]}function ECt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Sl(e,1)&&Sl(i,1)&&Sl(r,1))}const TH=Rve(34028234663852886e22);function CCt(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let HY=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return kse(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return da(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+EH(this.range,e-i,r)}minimalMonotonic(e,i,r){return kse(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function kse(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=EH(t,e-r):r>i&&(r-=EH(t,r-i)),s&&r===i&&(r=e),r+n}function EH(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const MCt=new HY(0,2*Math.PI),kCt=new HY(-Math.PI,Math.PI),X4e=new HY(0,360);let K4e=class Dve{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Dve;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,ce(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Bt.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===Bt.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new Q4e(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===Bt.DEFAULTS?e:Bt.USER}},Q4e=class{constructor(e,i){this.value=e,this.origin=i}};function Nve(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Bt.DEFAULTS)});const r=t.metadata;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Bt.DEFAULTS)})}function eje(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&cse(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&cse(n,i))return!0;return!1}function tje(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function ije(t,e,i,r,n){let s=wH(e[i],n);tje(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=wH(e[o],n),eje(s,i,r)&&(t[o]=!0)}function rje(t,e,i,r){const n=i.metadata,s=y4e(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const zve={origin:"service"};function Fve(t,e,i=zve){if(!e||typeof e!="object")return;const r=Ga(t),n=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))ije(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=wH(n[o],i).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?FO(e,l):e[o],a!=null&&a.reader&&(c=a.reader.call(t,c,e,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||rje(t,o,r,i)}r.setDefaultOrigin("user")}function Uve(t,e,i,r=zve){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)})}function nje(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function jve(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const o=oa(t,i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new Q("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&Ce.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Bt.DEFAULTS)&&sje(t,i,s,r,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Ym(s.origin))}function sje(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return UU(o,n)}return!1}return s===n}function oje(t,e,i,r){const n=Ga(t),s=n.metadata,o=Sve(s[e],r);return!!o&&jve(t,n,e,o,i,r)}function Vve(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return F3(e,t.toJSON(i));const r=Ga(t),n=r.metadata;for(const a in n){const l=Sve(n[a],i);if(!jve(t,r,a,l,void 0,i))continue;const c=oa(t,a),h=nje(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,i);Object.keys(h).length>0&&(e=F3(e,h),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>F3(e,h,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:M4e(r.store.originOf(a)),newOrigin:i.origin}))}return e}const Bve=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=Ga(this),s=n.store,o=new K4e;n.store=o,Nve(n,s,o)}read(r,n){Fve(this,r,n)}write(r,n){return Vve(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return aje.call(this,r,n)}};return i=u([U("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function aje(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let zM=class extends Bve(st){};zM=u([U("esri.core.JSONSupport")],zM),function(t){t.JSONSupportMixin=Bve}(zM||(zM={}));const ye=zM;let qY=class{constructor(e,i,r,n,s,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const yn=new qY(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Lp=new qY(3396190,1/169.8944472236118,23e4,6e4,.111),hb=new qY(1737400,0,0,0,0);function TA(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const Gve=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,lje={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function Ase(t){const e=t==null?void 0:t.match(Gve);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:h}=lje;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function WY(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function kz(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Hve(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function cje(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const uje=()=>Ce.getLogger("esri.core.urlUtils"),pC=hi.request,Ose="esri/config: esriConfig.request.proxyUrl is not set.",qve=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Wve=/^\s*http:/i,dje=/^\s*https:/i,hje=/^\s*file:/i,Jve=/:\d+$/,pje=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,fje=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),mje=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Fa=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(fje);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(mje),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const eR={},yje=new Fa(hi.applicationUrl);let ra=yje;const gje=vje();let JY=gje;const ZY=()=>ra,RCt=()=>JY;function vje(){const t=ra.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${ra.scheme}://${ra.host}${ra.port!=null?`:${ra.port}`:""}`}${e}`}function nn(t){if(!t)return null;const e={path:null,query:null},i=new Fa(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=Bw(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function Bw(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function t1(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>TA(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):TA(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Zve(t=!1){let e,i=pC.proxyUrl;if(typeof t=="string"){e=Qve(t);const r=GO(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw uje().warn(Ose),new Q("urlUtils:proxy-not-set",Ose);return e&&IH()&&(i=eX(i)),nn(i)}function DCt(t,e=!1){const i=GO(t);let r,n;if(i){const s=YY(i.proxyUrl);r=s.path,n=s.query?Bw(s.query):null}else if(e){const s=Zve(t);r=s.path,n=s.query}if(r){const s=nn(t);t=r+"?"+s.path;const o=t1({...n,...s.query});o&&(t=`${t}?${o}`)}return t}const zI={path:"",query:""};function YY(t){const e=t.indexOf("?");return e!==-1?(zI.path=t.slice(0,e),zI.query=t.slice(e+1)):(zI.path=t,zI.query=null),zI}function Yve(t){return t=(t=Oz(t=Mje(t=YY(t).path),!0)).toLowerCase()}function bje(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Yve(t.urlPrefix)},i=pC.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,e),n}function GO(t){const e=pC.proxyRules,i=Yve(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function wje(t,e){if(!t||!e)return!1;t=Az(t),e=Az(e);const i=Ase(t),r=Ase(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&io(t,e,!0)}function Xve(t,e){return t=Az(t),e=Az(e),Oz(t)===Oz(e)}function Az(t){const e=(t=so(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function CH(t,e=pC.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function io(t,e,i=!1){if(!t||!e)return!1;const r=kH(t),n=kH(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function XY(t){if(typeof t=="string"){if(!$l(t))return!0;t=kH(t)}if(io(t,ra))return!0;const e=pC.trustedServers||[];for(let i=0;i<e.length;i++){const r=_je(e[i]);for(let n=0;n<r.length;n++)if(io(t,r[n]))return!0}return!1}function _je(t){return eR[t]||(QY(t)||Hp(t)?eR[t]=[new Fa(na(t))]:eR[t]=[new Fa(`http://${t}`),new Fa(`https://${t}`)]),eR[t]}function na(t,e=JY,i){return Hp(t)?i!=null&&i.preserveProtocolRelative?t:ra.scheme==="http"&&ra.authority===wc(t).slice(2)?`http:${t}`:`https:${t}`:QY(t)?t:i1(t[0]==="/"?Ije(e):e,t)}function KY(t,e=JY,i){if(t==null||!$l(t))return t;const r=so(t),n=r.toLowerCase(),s=so(e).toLowerCase().replace(/\/+$/,""),o=i?so(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(m,y,v)=>(v=m.indexOf(y,v))===-1?m.length:v;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let m=0;m<h;m++)t=`../${t}`;else t=`./${t}`;return t}function so(t){return t=Oje(t=Aje(t=kje(t=na(t=t.trim()))))}function i1(...t){const e=t.filter(Mr);if(!(e!=null&&e.length))return;const i=[];if($l(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),Eje(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function wc(t,e=!1){if(t==null||fC(t)||Sy(t))return null;let i=t.indexOf("://");if(i===-1&&Hp(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=Oz(t,!0)),t}function $l(t){return Hp(t)||QY(t)}function fC(t){return t!=null&&t.slice(0,5)==="blob:"}function Sy(t){return t!=null&&t.slice(0,5)==="data:"}function xje(t){const e=pb(t);return e!=null&&e.isBase64?Hve(e.data):null}function tB(t){return cje(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Sje=/^data:(.*?)(;base64)?,(.*)$/;function pb(t){const e=t.match(Sje);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function Kve(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function $je(t){return(await fetch(t)).blob()}function NCt(t){const e=xje(t);if(!e)return null;const i=pb(t);return new Blob([e],{type:i.mediaType})}function Hp(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function QY(t){return t!=null&&qve.test(t)}function Qve(t){return t!=null&&dje.test(t)||ra.scheme==="https"&&Hp(t)}function Tje(t){return t!=null&&Wve.test(t)||ra.scheme==="http"&&Hp(t)}function Eje(t){return t!=null&&hje.test(t)}function eX(t){return Hp(t)?`https:${t}`:t.replace(Wve,"https:")}function Cje(){return ra.scheme==="http"}function IH(){return ra.scheme==="https"}function Oz(t,e=!1){return Hp(t)?t.slice(2):(t=t.replace(qve,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function Ije(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function tX(t){let e=0;if($l(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function zCt(t,e){if(!t)return"";const i=nn(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function Mje(t){return t.endsWith("/")?t:`${t}/`}function ebe(t){return t.replace(/\/+$/,"")}function kje(t){if(/^https?:\/\//i.test(t)){const e=YY(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function Aje(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Oje(t){const e=pC.httpsDomains;if(!Tje(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),Jve.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return Cje()&&r===ra.authority&&!pje.test(t)||(IH()&&r===ra.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||IH()&&!GO(t))&&(t=eX(t)),t}function MH(t,e,i){if(!(e&&i&&t&&$l(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function tbe(t,e){const i=new URL(t);return i.host=e,i.port&&!Jve.test(e)&&(i.port=""),i.toString()}function Pje(t){return new URL(t).host}function kH(t){return typeof t=="string"?new Fa(na(t)):(t.scheme||(t.scheme=ra.scheme),t)}function FCt(t){return Lje.test(t)}function ibe(t,e){const i=nn(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function rbe(t,e,i){const r=nn(t),n=r.query||{};return n[e]=String(i),`${r.path}?${t1(n)}`}function dk(t,e){if(!e)return t;const i=nn(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=t1(r);return n?`${i.path}?${n}`:i.path}function nbe(t){if(t==null)return null;const e=t.match(sbe);return e?e[2]:null}function Pse(t){if(t==null)return null;const e=t.match(sbe);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function UCt(t){return typeof t=="string"?pb(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(pb(r.result)),r.onerror=n=>i(n)})}const sbe=/([^.]*)\.([^/]*)$/,Lje=/(^data:image\/svg|\.svg$)/i,obe="20250627",abe="087671a5c2f91f89ecec6d08a53354e515e378ad";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const lbe="4.34";let Tt,iX=lbe;function Rje(t){Tt=t}function Dje(t){const e=Tt==null?void 0:Tt.findCredential(t);return e!=null&&e.token?rbe(t,"token",e.token):t}iX="4.34.0-next.26",ve("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ve("host-webworker");function py(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=na(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=KY(t,e.portalItem.itemUrl);n!=null&&Nje.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return(t=AH(t,e==null?void 0:e.portal))&&WU.test(t)?rX(t):t}function r1(t,e,i=IE.YES){var n,s;if((t=t&&WU.test(t)?hbe(t):t)==null)return t;!$l(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=na(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=AH(o,e.portal),l=AH(r,e.portal);r=KY(l,a,a),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=dbe(r,e==null?void 0:e.portal),$l(r)&&(r=so(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!$l(r)&&!Sy(r)&&i===IE.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function qU(t,e,i){return py(t,i)}function n1(t,e,i,r){const n=r1(t,r);n!==void 0&&(e[i]=n)}const WU=/\/items\/([^/]+)\/resources\/(.*)/,Nje=/^\.\/resources\//;function cbe(t){const e=(t==null?void 0:t.match(WU))??null;return(e==null?void 0:e[1])??null}function ube(t){const e=(t==null?void 0:t.match(WU))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=Pse(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=Pse(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function dbe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?MH(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function AH(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=ZY();return io(r,`${r.scheme}://${i}`)?MH(t,e.portalHostname,i):MH(t,i,e.portalHostname)}function rX(t){if(!t)return t||null;let e=t;return e&&Tt&&!Tt.findCredential(e)&&(e=kz(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function hbe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Tt&&!Tt.findCredential(e)&&(e=kz(e)),e}var IE;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(IE||(IE={}));const zje=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return IE},ensureMainOnlineDomain:dbe,fromCDNUrl:hbe,fromJSON:py,itemIdFromResourceUrl:cbe,prefixAndFilenameFromResourceUrl:ube,read:qU,toCDNUrl:rX,toJSON:r1,write:n1},Symbol.toStringTag,{value:"Module"})),pbe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},fbe=Object.values(pbe),mbe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${fbe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Fje=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${fbe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Uje=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function jCt(t){return mbe.test(t)}function qp(t){if(t==null)return null;const e=nn(t),i=(e==null?void 0:e.path.match(mbe))||(e==null?void 0:e.path.match(Fje));if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:nX(a!==-1?n.slice(a+1):n),serverType:pbe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function jje(t){const e=nn(t).path.match(Uje);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function nX(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Vje(t,e){const i=[];if(t){const r=qp(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=nX(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function Pz(t){let e=wc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function Bje(t,e){return t&&ebe(ibe(t,e))}function Gje(t){let{url:e}=t;if(!e)return{url:e};e=ibe(e,t.logger);const i=nn(e),r=qp(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=jje(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:ebe(e),layerId:n}}function Hje(t,e,i,r,n){n1(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=i1(r.url,i,t.layerId.toString()))}function VCt(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function BCt(t){var r;if(!t)return!1;const e=new Fa(na(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const qje=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function sX(t){if(!oX(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=hi.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:hi.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?hi.apiKey:null}function OH(){return hi.apiKey!=null||hi.apiKeys.basemapStyles!=null}function ybe(t,e){return e?oX(t):sX(t)!=null}function oX(t){const e=wc(t,!0);return!!e&&!qje.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function Wje(t,e,i=!1,r){return new Promise((n,s)=>{if(xc(r))return void s(Lse());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=()=>{const h=t;c(),n(h)},l=()=>{if(!t)return;const h=t;c(),h.src="",s(Lse())};const c=()=>{ve("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),ve("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function Lse(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const gbe="Timeout exceeded";function Jje(){return new Error(gbe)}function GCt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===gbe}function Zje(t){hi.request.crossOriginNoCorsDomains||(hi.request.crossOriginNoCorsDomains={});const e=hi.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[wc(i)??""]=0:(e[wc("http://"+i)??""]=0,e[wc("https://"+i)??""]=0)}function Yje(t){const e=hi.request.crossOriginNoCorsDomains;if(e){let i=wc(t);if(i)return i=i.toLowerCase(),!io(i,ZY())&&e[i]<Date.now()-36e5}return!1}async function Xje(t){var n;const e=nn(t);t=e.path,((n=e.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=hi.request.crossOriginNoCorsDomains,r=wc(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const PH=new Map;function Kje(t,e){const i=e==null?void 0:e.preferredHost;if(!i||io(t,`https://${i}`,!0))return;const r=qp(t);if(!r||r.serverType!=="FeatureServer"||WY(t))return;const n=r.url.path.toLowerCase();PH.has(n)||PH.set(n,i)}function Rse(t){var r;const e=(r=qp(t))==null?void 0:r.url.path.toLowerCase();if(!e)return t;const i=PH.get(e);return i?tbe(t,i):t}async function Ot(t,e){var v;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=Bw(e.query.toString().replaceAll("+"," ")));const i=Sy(t),r=fC(t);r||i||(t=so(t));const n={url:t,requestOptions:{...e}},s=w=>({data:w,getAllHeaders:ME,getHeader:ME,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=CH(t,su.internalInterceptors);if(o){const w=await Nse(o,n);if(w!=null)return s(w)}let a=CH(t);if(a){const w=await Nse(a,n);if(w!=null)return s(w);a.after||a.error||(a=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(ve("host-webworker")||ve("host-node")))throw Dd("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Dd("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Dd("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await r6e(),Lz)return Lz.execute(t,e);const l=new AbortController,c=no(e,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:su.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},m=e.useRequestQueue?l6e(h):RH(h),y=await m.finally(()=>c==null?void 0:c.remove());return(v=a==null?void 0:a.after)==null||v.call(a,y),y}let Lz,vbe=!1;const su=hi.request,bbe="FormData"in globalThis,Qje=new Set([499,498,403,401]),e6e=new Set(["COM_0056","COM_0057","SB_0008"]),t6e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ME=()=>null,Rz=Symbol();function i6e(t){const e=wc(t);e&&!Ot._corsServers.includes(e)&&Ot._corsServers.push(e)}function Dse(t){const e=wc(t);return!e||e.endsWith(".arcgis.com")||Ot._corsServers.includes(e)||XY(e)}function Dd(t,e,i,r){var o;let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:ME,getHeader:ME,ssl:!1};if(e instanceof Q)return e.details?(e.details=ce(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const a=r&&(()=>Array.from(r.headers)),l=r&&(m=>r.headers.get(m)),c=r==null?void 0:r.status,h=e.message;h&&(n=h),a&&l&&(s.getAllHeaders=a,s.getHeader=l),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??(n=e.details)):(s.messages=e.details,n??(n=(o=s.messages)==null?void 0:o[0])),s.raw=Rz in e?e[Rz]:e}return n??(n="Error"),ds(e)?Gi():new Q(t,n,s)}async function r6e(){ve("host-webworker")&&(!Lz&&globalThis.invokeStaticMessage?Lz=await $e(()=>import("./request-CaZQBkYj.js"),[]):vbe=!0)}async function LH(){Tt||await $e(()=>Promise.resolve().then(()=>j2e),void 0)}async function n6e(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(bbe&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:su.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(vbe||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken){const l=sX(e);l&&(i.query??(i.query={}),i.query.token=l,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!wbe(e)&&!xc(r)){let l;i.authMode==="immediate"?(await LH(),l=await Tt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await LH(),l=await Tt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):Tt&&(l=Tt.findCredential(e)),l&&(t.credential=l,t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function wbe(t){return t6e.some(e=>e.test(t))}async function s6e(t){let e=t.params.url,i=Rse(e);const r=t.params.requestOptions,n=t.fetchOptions??{},s=fC(e)||Sy(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:su.timeout;let l=!1;if(!s){t.useSSL&&(e=eX(e));let v={...r.query};t.credentialToken&&(v.token=t.credentialToken);let w=t1(v);ve("esri-url-encodes-apostrophe")&&(w=w.replaceAll("'","%27"));const x=i.length+1+w.length;let S;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||x>su.maxUrlLength;const C=r.useProxy||!!GO(e);if(C){const k=Zve(e);S=k.path,!l&&S.length+1+x>su.maxUrlLength&&(l=!0),k.query&&(v={...k.query,...v})}if(n.method==="HEAD"&&(l||C)){if(l)throw x>su.maxUrlLength?Dd("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Dd("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(C)throw Dd("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(l?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=dk(e,v):(n.body=t1(v),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=dk(e,v),C&&(t.useProxy=!0,e=`${S}?${e}`),v.token&&bbe&&n.body instanceof FormData&&!WY(e)&&n.body.set("token",v.token),r.hasOwnProperty("withCredentials"))t.withCredentials=r.withCredentials;else if(!io(e,ZY())){if(XY(e))t.withCredentials=!0;else if(Tt){const k=Tt.findServerInfo(e);k!=null&&k.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",Yje(e)&&await Xje(l?dk(e,v):e)),i=Rse(e)}let c,h,m=0,y=!1;a>0&&(m=setTimeout(()=>{y=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")h=n,h.url=i,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||l||o6e(r.headers)||!s&&!t.useProxy&&su.proxyUrl&&!Dse(e)){if(Ot._beforeFetch&&await Ot._beforeFetch(e,n),c=await fetch(i,n),Ot._afterFetch&&await Ot._afterFetch(c),t.useProxy||i6e(e),r.responseType==="native")h=c;else if(n.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":h=await c.arrayBuffer();break;case"blob":case"image":h=await c.blob();break;default:h=await c.text()}if(m&&(clearTimeout(m),m=0),o==="json"||o==="xml"||o==="document")if(h)switch(o){case"json":h=JSON.parse(h);break;case"xml":h=zse(h,"application/xml");break;case"document":h=zse(h,"text/html")}else h=null;if(h){if(o==="array-buffer"||o==="blob"){const v=c.headers.get("Content-Type");if(v&&/application\/json|text\/plain/i.test(v)&&h[o==="blob"?"size":"byteLength"]<=750)try{const w=await new Response(h).json();w.error&&(h=w)}catch{}}o==="image"&&h instanceof Blob&&(h=await Fse(URL.createObjectURL(h),t,!0))}}else{h=await c.text();try{h=JSON.parse(h)}catch{}}}else h=await Fse(i,t)}catch(v){if(v.name==="AbortError")throw y?Jje():Gi("Request canceled");if(!(!c&&v instanceof TypeError&&su.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||Dse(e))throw v;t.redoRequest=!0,bje({proxyUrl:su.proxyUrl,urlPrefix:wc(e)??""})}finally{m&&clearTimeout(m)}return[c,h]}async function Nse(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Dd("request:interceptor",n,e)}if((r instanceof Error||r instanceof Q)&&(i=Dd("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function o6e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function zse(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}Ot._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ot._beforeFetch=void 0,Ot._afterFetch=void 0;const a6e=new Map;async function l6e(t){const e=u6e(t.params.url);if(!e)return RH(t);const{QueueProcessor:i}=await $e(()=>import("./QueueProcessor-D8t1B8KS.js"),[]);return x1(a6e,e.origin,()=>{const n=e.isHosted?ve("request-queue-concurrency-hosted"):ve("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(xc(s.params.requestOptions))throw Dd("",Gi("Request canceled"),s.params);return RH(s)}})}).push(t)}async function RH(t){var s,o;let e,i;await n6e(t);try{do[e,i]=await s6e(t);while(!await c6e(t,e,i))}catch(a){const l=Dd("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!XY(r)){const a=wc(r,!0);a&&su.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Zje(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&Kje(r,i);const n=t.credential;if(n&&Tt){const a=Tt.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Tt.findCredential(l,n.userId);c&&Tt._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):ME,getHeader:e?a=>e.headers.get(a):ME,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function c6e(t,e,i){var c;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[Rz]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[Rz]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(c=n.message)!=null&&c.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&Qje.has(s)&&!wbe(t.params.url)&&(s!==403||(!o||!e6e.has(o))&&(a==null||a===2&&t.credentialToken))){await LH();try{const h=await Tt.getCredential(t.params.url,{error:Dd("request:server",n,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function Fse(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=su.priority,n.src=t,Wje(n,t,i,r)}function u6e(t){let e,i;return typeof t=="string"?(e=wc(t,!0),i=Pz(t)):(e=t.origin,i=Pz(t.toString())),e==null?null:{origin:e,isHosted:i}}function zr(t){if(!hi.assetsPath)throw Ce.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Q("assets:path-not-set","config.assetsPath is not set");return i1(hi.assetsPath,t)}let iB,pe=null;function JU(){return!!pe}function d6e(){return!!ve("esri-wasm")}function aX(){return iB||(iB=$e(async()=>{const{default:t}=await import("./pe-wasm-CyV_MJXv.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>zr(`esri/geometry/support/${e}`)})).then(t=>{Sbe(t)}),iB)}var DH,en;(function(t){function e(s,o,a){pe.ensureCache.prepare();const l=kw(a),c=a===l,h=pe.ensureFloat64(l),m=pe._pe_geog_to_proj(pe.getPointer(s),o,h);return m&&pv(a,o,h,c),m}function i(s,o,a,l){switch(l){case en.PE_TRANSFORM_P_TO_G:return r(s,o,a);case en.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){pe.ensureCache.prepare();const c=kw(a),h=a===c,m=pe.ensureFloat64(c),y=pe._pe_proj_to_geog_center(pe.getPointer(s),o,m,l);return y&&pv(a,o,m,h),y}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(DH||(DH={})),function(t){function e(){t.PE_BUFFER_MAX=pe.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=pe.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=pe.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=pe.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=pe.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=pe.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=pe.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=pe.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=pe.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=pe.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=pe.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=pe.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=pe.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=pe.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=pe.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=pe.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=pe.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=pe.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=pe.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=pe.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=pe.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=pe.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=pe.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=pe.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=pe.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=pe.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=pe.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(en||(en={}));let _be=null;var NH;(function(t){const e={},i={},r=v=>{const w=v.getType();switch(w){case en.PE_TYPE_GEOGCS:v=pe.castObject(v,pe.PeGeogcs);break;case en.PE_TYPE_PROJCS:v=pe.castObject(v,pe.PeProjcs);break;case en.PE_TYPE_GEOGTRAN:v=pe.castObject(v,pe.PeGeogtran);break;default:w&en.PE_TYPE_UNIT&&(v=pe.castObject(v,pe.PeUnit))}return v};function n(){pe.PeFactory.prototype.initialize(null)}function s(v){return o(en.PE_TYPE_COORDSYS,v)}function o(v,w){let x=null,S=e[v];if(S||(S={},e[v]=S),S.hasOwnProperty(String(w))&&(x=S[w],pe.compare(x,pe.NULL)&&(x=null)),!x){const C=pe.PeFactory.prototype.factoryByType(v,w);pe.compare(C,pe.NULL)||(x=r(C),S[w]=x)}return x}function a(v,w){let x=null,S=i[v];if(S||(S={},i[v]=S),S.hasOwnProperty(w)&&(x=S[w],pe.compare(x,pe.NULL)&&(x=null)),!x){const C=pe.PeFactory.prototype.fromString(v,w);pe.compare(C,pe.NULL)||(x=r(C),S[w]=x)}return x}function l(v){return o(en.PE_TYPE_GEOGCS,v)}function c(v){return o(en.PE_TYPE_GEOGTRAN,v)}function h(v){return pe.PeFactory.prototype.getCode(v)}function m(v){return o(en.PE_TYPE_PROJCS,v)}function y(v){return o(en.PE_TYPE_UNIT,v)}t.initialize=n,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=c,t.getCode=h,t.projcs=m,t.unit=y})(NH||(NH={}));let xbe=null;var Dz,zH,FH,UH,jH,VH,Nz,BH,zz,Fz,GH;function Sbe(t){function e(s,o,a){s[o]=a(s[o])}pe=t,en.init(),Dz.init(),Nz.init(),zz.init(),Fz.init(),_be=class extends pe.PeDouble{constructor(s=NaN){super(s)}destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}},xbe=class extends pe.PeGCSExtent{destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[pe.PeAngunit,pe.PeDatum,pe.PeGeogcs,pe.PeGeogtran,pe.PeObject,pe.PeParameter,pe.PePrimem,pe.PeProjcs,pe.PeSpheroid,pe.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(en.PE_NAME_MAX))});for(const s of[pe.PeGeogtran,pe.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(en.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=pe.getValue(l,"*");a[c]=h?pe.wrapPointer(h,pe.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(pe.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return pv(l,a,s.call(this),o),l}),e(pe.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=pe._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=pe.getPointer(l);for(let m=1;m<c;m++)a.push(pe.wrapPointer(h+o*m,pe.PeGTlistExtendedGTs))}}return a}});const r=pe._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=l.getNump();if(c>1){const h=pe.getPointer(l);for(let m=1;m<c;m++)a.push(pe.wrapPointer(h+r*m,pe.PeHorizon))}}return o.set(s,a),a};e(pe.PeProjcs.prototype,"horizonGcsGenerate",n),e(pe.PeProjcs.prototype,"horizonPcsGenerate",n),pe.PeObject.prototype.toString=function(s=en.PE_STR_OPTS_NONE){pe.ensureCache.prepare();const o=pe.getPointer(this),a=pe.ensureInt8(new Array(en.PE_BUFFER_MAX));return pe.UTF8ToString(pe._pe_object_to_string_ext(o,s,a))},pe.PeGeogcs.prototype.destroy=function(){this.Delete(),fd(this),this.ptr=0},pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},pe.PeProjcs.prototype.destroy=function(){this.Delete(),fd(this),this.ptr=0},pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function fd(t){if(!t)return;const e=pe.getClass(t);if(!e)return;const i=pe.getCache(e);if(!i)return;const r=pe.getPointer(t);r&&delete i[r]}function tR(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(pe.ensureInt8(r));return i}function kw(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function pv(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=pe.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=pe.getValue(i,"double"),t[s][1]=pe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=pe._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,c){let h=null;const m=new pe.PeInteger(c);try{const y=pe.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,m);if((c=m.val)&&(h=[y],c>1)){const v=pe.getPointer(y);for(let w=1;w<c;w++)h.push(pe.wrapPointer(v+e*w,pe.PeGTlistExtendedEntry))}}finally{pe.destroy(m)}return h}t.init=i,t.getGTlist=r})(Dz||(Dz={})),function(t){function e(i){if(i!=null&&i.length){for(const r of i)fd(r),r.getEntries().forEach(n=>{fd(n);const s=n.getGeogtran();fd(s),s.getParameters().forEach(fd),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{fd(o);const a=o.getDatum();fd(a),fd(a.getSpheroid()),fd(o.getPrimem()),fd(o.getUnit())})});pe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(zH||(zH={})),function(t){function e(i,r,n,s,o){pe.ensureCache.prepare();const a=kw(n),l=n===a,c=pe.ensureFloat64(a);let h=0;s&&(h=pe.ensureFloat64(s));const m=pe._pe_geog_to_geog(pe.getPointer(i),r,c,h,o);return m&&pv(n,r,c,l),m}t.geogToGeog=e}(FH||(FH={})),function(t){function e(s,o,a,l,c,h,m,y){pe.PeLineType.prototype.geodesic_coordinate(s,o,a,l,c,h,m,y)}function i(s,o,a,l,c,h,m,y,v){pe.PeLineType.prototype.geodetic_coordinate(s,o,a,l,c,h,m,y,v)}function r(s,o,a,l,c,h,m,y,v,w){pe.PeLineType.prototype.geodetic_distance(s,o,a,l,c,h,m,y,v,w)}function n(s,o,a,l,c,h,m,y,v){pe.PeLineType.prototype.great_elliptic_distance(s,o,a,l,c,h,m,y,v)}t.geodesicCoordinate=e,t.geodeticCoordinate=i,t.geodeticDistance=r,t.greatEllipticDistance=n}(UH||(UH={})),function(t){function e(o,a){return pe.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return pe.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return pe.PeMath.prototype.phi_to_phig(o,a)}function n(o,a,l){return pe.PeMath.prototype.q(o,a,l)}function s(o,a){return pe.PeMath.prototype.q90(o,a)}t.phiToEta=e,t.etaToPhi=i,t.phiToPhig=r,t.q=n,t.q90=s}(jH||(jH={})),function(t){const e=(c,h,m,y,v,w)=>{let x,S;switch(pe.ensureCache.prepare(),c){case"dd":x=pe._pe_geog_to_dd,S=en.PE_DD_MAX;break;case"ddm":x=pe._pe_geog_to_ddm,S=en.PE_DDM_MAX;break;case"dms":x=pe._pe_geog_to_dms,S=en.PE_DMS_MAX}let C=0;h&&(C=pe.getPointer(h));const k=kw(y),A=pe.ensureFloat64(k),R=tR(m,S),D=x(C,m,A,v,pe.ensureInt32(R));if(D)for(let B=0;B<m;B++)w[B]=pe.UTF8ToString(R[B]);return D},i=(c,h,m,y,v)=>{let w;switch(pe.ensureCache.prepare(),c){case"dd":w=pe._pe_dd_to_geog;break;case"ddm":w=pe._pe_ddm_to_geog;break;case"dms":w=pe._pe_dms_to_geog}let x=0;h&&(x=pe.getPointer(h));const S=y.map(R=>pe.ensureString(R)),C=pe.ensureInt32(S),k=pe.ensureFloat64(new Array(2*m)),A=w(x,m,C,k);return A&&pv(v,m,k),A};function r(c,h,m,y,v){return e("dms",c,h,m,y,v)}function n(c,h,m,y){return i("dms",c,h,m,y)}function s(c,h,m,y,v){return e("ddm",c,h,m,y,v)}function o(c,h,m,y){return i("ddm",c,h,m,y)}function a(c,h,m,y,v){return e("dd",c,h,m,y,v)}function l(c,h,m,y){return i("dd",c,h,m,y)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(VH||(VH={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,c,h){pe.ensureCache.prepare();let m=0;n&&(m=pe.getPointer(n));const y=kw(o),v=pe.ensureFloat64(y),w=tR(s,en.PE_MGRS_MAX),x=pe.ensureInt32(w),S=pe._pe_geog_to_mgrs_extended(m,s,v,a,l,c,x);if(S)for(let C=0;C<s;C++)h[C]=pe.UTF8ToString(w[C]);return S}function r(n,s,o,a,l){pe.ensureCache.prepare();let c=0;n&&(c=pe.getPointer(n));const h=o.map(w=>pe.ensureString(w)),m=pe.ensureInt32(h),y=pe.ensureFloat64(new Array(2*s)),v=pe._pe_mgrs_to_geog_extended(c,s,m,a,y);return v&&pv(l,s,y),v}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(Nz||(Nz={})),function(t){function e(r,n,s,o,a,l,c){pe.ensureCache.prepare();let h=0;r&&(h=pe.getPointer(r));const m=kw(s),y=pe.ensureFloat64(m),v=tR(n,en.PE_MGRS_MAX),w=pe.ensureInt32(v),x=pe._pe_geog_to_usng(h,n,y,o,a,l,w);if(x)for(let S=0;S<n;S++)c[S]=pe.UTF8ToString(v[S]);return x}function i(r,n,s,o){pe.ensureCache.prepare();let a=0;r&&(a=pe.getPointer(r));const l=s.map(y=>pe.ensureString(y)),c=pe.ensureInt32(l),h=pe.ensureFloat64(new Array(2*n)),m=pe._pe_usng_to_geog(a,n,c,h);return m&&pv(o,n,h),m}t.geogToUsng=e,t.usngToGeog=i}(BH||(BH={})),function(t){function e(){t.PE_UTM_OPTS_NONE=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){pe.ensureCache.prepare();let c=0;n&&(c=pe.getPointer(n));const h=kw(o),m=pe.ensureFloat64(h),y=tR(s,en.PE_UTM_MAX),v=pe.ensureInt32(y),w=pe._pe_geog_to_utm(c,s,m,a,v);if(w)for(let x=0;x<s;x++)l[x]=pe.UTF8ToString(y[x]);return w}function r(n,s,o,a,l){pe.ensureCache.prepare();let c=0;n&&(c=pe.getPointer(n));const h=o.map(w=>pe.ensureString(w)),m=pe.ensureInt32(h),y=pe.ensureFloat64(new Array(2*s)),v=pe._pe_utm_to_geog(c,s,m,a,y);return v&&pv(l,s,y),v}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(zz||(zz={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=pe.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=pe.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.init=i,t.generate=r}(Fz||(Fz={})),function(t){function e(){return pe.PeVersion.prototype.version_string()}t.versionString=e}(GH||(GH={}));const $be=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return DH},get PeDefs(){return en},get PeDouble(){return _be},get PeFactory(){return NH},get PeGCSExtent(){return xbe},get PeGTTransformations(){return FH},get PeGTlistExtended(){return Dz},get PeGTlistExtendedEntry(){return zH},get PeLineType(){return UH},get PeMath(){return jH},get PeNotationDms(){return VH},get PeNotationMgrs(){return Nz},get PeNotationUsng(){return BH},get PeNotationUtm(){return zz},get PePCSInfo(){return Fz},get PeVersion(){return GH},_init:Sbe,get _pe(){return pe},isLoaded:JU,isSupported:d6e,load:aX},Symbol.toStringTag,{value:"Module"}));var hu;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(hu||(hu={}));let b;const G={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(b=2e3;b<=2045;b++)G[b]=0;for(b=2056;b<=2065;b++)G[b]=0;for(b=2067;b<=2135;b++)G[b]=0;for(b=2137;b<=2154;b++)G[b]=0;for(b=2161;b<=2170;b++)G[b]=0;for(b=2172;b<=2193;b++)G[b]=0;for(b=2195;b<=2198;b++)G[b]=0;for(b=2200;b<=2203;b++)G[b]=0;for(b=2205;b<=2217;b++)G[b]=0;for(b=2222;b<=2224;b++)G[b]=1;for(b=2225;b<=2250;b++)G[b]=2;for(b=2251;b<=2253;b++)G[b]=1;for(b=2257;b<=2264;b++)G[b]=2;for(b=2274;b<=2279;b++)G[b]=2;for(b=2280;b<=2282;b++)G[b]=1;for(b=2283;b<=2289;b++)G[b]=2;for(b=2290;b<=2292;b++)G[b]=0;for(b=2308;b<=2313;b++)G[b]=0;for(b=2315;b<=2491;b++)G[b]=0;for(b=2494;b<=2866;b++)G[b]=0;for(b=2867;b<=2869;b++)G[b]=1;for(b=2870;b<=2888;b++)G[b]=2;for(b=2891;b<=2895;b++)G[b]=2;for(b=2896;b<=2898;b++)G[b]=1;for(b=2902;b<=2908;b++)G[b]=2;for(b=2915;b<=2920;b++)G[b]=2;for(b=2921;b<=2923;b++)G[b]=1;for(b=2924;b<=2930;b++)G[b]=2;for(b=2931;b<=2962;b++)G[b]=0;for(b=2964;b<=2968;b++)G[b]=2;for(b=2969;b<=2973;b++)G[b]=0;for(b=2975;b<=2991;b++)G[b]=0;for(b=2995;b<=3051;b++)G[b]=0;for(b=3054;b<=3079;b++)G[b]=0;for(b=3081;b<=3088;b++)G[b]=0;for(b=3092;b<=3101;b++)G[b]=0;for(b=3106;b<=3138;b++)G[b]=0;for(b=3146;b<=3151;b++)G[b]=0;for(b=3153;b<=3166;b++)G[b]=0;for(b=3168;b<=3172;b++)G[b]=0;for(b=3174;b<=3203;b++)G[b]=0;for(b=3294;b<=3358;b++)G[b]=0;for(b=3367;b<=3403;b++)G[b]=0;for(b=3408;b<=3416;b++)G[b]=0;for(b=3417;b<=3438;b++)G[b]=2;for(b=3441;b<=3446;b++)G[b]=2;for(b=3447;b<=3450;b++)G[b]=0;for(b=3451;b<=3459;b++)G[b]=2;for(b=3460;b<=3478;b++)G[b]=0;for(b=3554;b<=3559;b++)G[b]=0;for(b=3560;b<=3570;b++)G[b]=2;for(b=3571;b<=3581;b++)G[b]=0;for(b=3594;b<=3597;b++)G[b]=0;for(b=3601;b<=3604;b++)G[b]=0;for(b=3637;b<=3639;b++)G[b]=0;for(b=3665;b<=3667;b++)G[b]=0;for(b=3693;b<=3695;b++)G[b]=0;for(b=3701;b<=3727;b++)G[b]=0;for(b=3728;b<=3739;b++)G[b]=2;for(b=3740;b<=3751;b++)G[b]=0;for(b=3753;b<=3760;b++)G[b]=2;for(b=3761;b<=3773;b++)G[b]=0;for(b=3775;b<=3777;b++)G[b]=0;for(b=3779;b<=3781;b++)G[b]=0;for(b=3783;b<=3785;b++)G[b]=0;for(b=3788;b<=3791;b++)G[b]=0;for(b=3797;b<=3802;b++)G[b]=0;for(b=3814;b<=3816;b++)G[b]=0;for(b=3825;b<=3829;b++)G[b]=0;for(b=3832;b<=3841;b++)G[b]=0;for(b=3844;b<=3852;b++)G[b]=0;for(b=3873;b<=3885;b++)G[b]=0;for(b=3890;b<=3893;b++)G[b]=0;for(b=3907;b<=3912;b++)G[b]=0;for(b=3942;b<=3950;b++)G[b]=0;for(b=3968;b<=3970;b++)G[b]=0;for(b=3973;b<=3976;b++)G[b]=0;for(b=3986;b<=3989;b++)G[b]=0;for(b=3994;b<=3997;b++)G[b]=0;for(b=4048;b<=4051;b++)G[b]=0;for(b=4056;b<=4063;b++)G[b]=0;for(b=4093;b<=4096;b++)G[b]=0;for(b=4390;b<=4398;b++)G[b]=0;for(b=4399;b<=4413;b++)G[b]=2;for(b=4418;b<=4433;b++)G[b]=2;for(b=4455;b<=4457;b++)G[b]=2;for(b=4484;b<=4489;b++)G[b]=0;for(b=4491;b<=4554;b++)G[b]=0;for(b=4568;b<=4589;b++)G[b]=0;for(b=4652;b<=4656;b++)G[b]=0;for(b=4766;b<=4800;b++)G[b]=0;for(b=5014;b<=5016;b++)G[b]=0;for(b=5069;b<=5072;b++)G[b]=0;for(b=5105;b<=5130;b++)G[b]=0;for(b=5167;b<=5188;b++)G[b]=0;for(b=5253;b<=5259;b++)G[b]=0;for(b=5269;b<=5275;b++)G[b]=0;for(b=5292;b<=5311;b++)G[b]=0;for(b=5329;b<=5331;b++)G[b]=0;for(b=5343;b<=5349;b++)G[b]=0;for(b=5355;b<=5357;b++)G[b]=0;for(b=5387;b<=5389;b++)G[b]=0;for(b=5459;b<=5463;b++)G[b]=0;for(b=5479;b<=5482;b++)G[b]=0;for(b=5518;b<=5520;b++)G[b]=0;for(b=5530;b<=5539;b++)G[b]=0;for(b=5550;b<=5552;b++)G[b]=0;for(b=5562;b<=5583;b++)G[b]=0;for(b=5623;b<=5625;b++)G[b]=2;for(b=5631;b<=5639;b++)G[b]=0;for(b=5649;b<=5653;b++)G[b]=0;for(b=5663;b<=5680;b++)G[b]=0;for(b=5682;b<=5685;b++)G[b]=0;for(b=5875;b<=5877;b++)G[b]=0;for(b=5896;b<=5899;b++)G[b]=0;for(b=5921;b<=5940;b++)G[b]=0;for(b=6050;b<=6125;b++)G[b]=0;for(b=6244;b<=6275;b++)G[b]=0;for(b=6328;b<=6348;b++)G[b]=0;for(b=6350;b<=6356;b++)G[b]=0;for(b=6366;b<=6372;b++)G[b]=0;for(b=6381;b<=6387;b++)G[b]=0;for(b=6393;b<=6404;b++)G[b]=0;for(b=6480;b<=6483;b++)G[b]=0;for(b=6511;b<=6514;b++)G[b]=0;for(b=6579;b<=6581;b++)G[b]=0;for(b=6619;b<=6624;b++)G[b]=0;for(b=6625;b<=6627;b++)G[b]=2;for(b=6628;b<=6632;b++)G[b]=0;for(b=6634;b<=6637;b++)G[b]=0;for(b=6669;b<=6692;b++)G[b]=0;for(b=6707;b<=6709;b++)G[b]=0;for(b=6720;b<=6723;b++)G[b]=0;for(b=6732;b<=6738;b++)G[b]=0;for(b=6931;b<=6933;b++)G[b]=0;for(b=6956;b<=6959;b++)G[b]=0;for(b=7005;b<=7007;b++)G[b]=0;for(b=7057;b<=7070;b++)G[b]=2;for(b=7074;b<=7082;b++)G[b]=0;for(b=7109;b<=7118;b++)G[b]=0;for(b=7119;b<=7127;b++)G[b]=1;for(b=7374;b<=7376;b++)G[b]=0;for(b=7528;b<=7586;b++)G[b]=0;for(b=7587;b<=7645;b++)G[b]=2;for(b=7692;b<=7696;b++)G[b]=0;for(b=7755;b<=7787;b++)G[b]=0;for(b=7791;b<=7795;b++)G[b]=0;for(b=7799;b<=7801;b++)G[b]=0;for(b=7803;b<=7805;b++)G[b]=0;for(b=7825;b<=7831;b++)G[b]=0;for(b=7845;b<=7859;b++)G[b]=0;for(b=8013;b<=8032;b++)G[b]=0;for(b=8065;b<=8068;b++)G[b]=1;for(b=8518;b<=8529;b++)G[b]=2;for(b=8533;b<=8536;b++)G[b]=2;for(b=8538;b<=8540;b++)G[b]=2;for(b=8677;b<=8679;b++)G[b]=0;for(b=8836;b<=8840;b++)G[b]=0;for(b=8857;b<=8859;b++)G[b]=0;for(b=8908;b<=8910;b++)G[b]=0;for(b=9154;b<=9159;b++)G[b]=0;for(b=9205;b<=9218;b++)G[b]=0;for(b=9271;b<=9273;b++)G[b]=0;for(b=9295;b<=9297;b++)G[b]=0;for(b=9356;b<=9360;b++)G[b]=0;for(b=9404;b<=9407;b++)G[b]=0;for(b=9476;b<=9482;b++)G[b]=0;for(b=9487;b<=9494;b++)G[b]=0;for(b=9697;b<=9699;b++)G[b]=0;for(b=9821;b<=9865;b++)G[b]=0;for(b=10285;b<=10291;b++)G[b]=0;for(b=10314;b<=10317;b++)G[b]=0;for(b=10448;b<=10465;b++)G[b]=0;for(b=10726;b<=10729;b++)G[b]=0;for(b=10731;b<=10733;b++)G[b]=0;for(b=11114;b<=11118;b++)G[b]=0;for(b=20004;b<=20032;b++)G[b]=0;for(b=20047;b<=20049;b++)G[b]=0;for(b=20062;b<=20092;b++)G[b]=0;for(b=20135;b<=20138;b++)G[b]=0;for(b=20248;b<=20258;b++)G[b]=0;for(b=20348;b<=20358;b++)G[b]=0;for(b=20436;b<=20440;b++)G[b]=0;for(b=20822;b<=20824;b++)G[b]=0;for(b=20904;b<=20932;b++)G[b]=0;for(b=20934;b<=20936;b++)G[b]=0;for(b=21004;b<=21032;b++)G[b]=0;for(b=21035;b<=21037;b++)G[b]=0;for(b=21095;b<=21097;b++)G[b]=0;for(b=21148;b<=21150;b++)G[b]=0;for(b=21207;b<=21264;b++)G[b]=0;for(b=21307;b<=21364;b++)G[b]=0;for(b=21413;b<=21423;b++)G[b]=0;for(b=21453;b<=21463;b++)G[b]=0;for(b=21473;b<=21483;b++)G[b]=0;for(b=21780;b<=21782;b++)G[b]=0;for(b=21891;b<=21894;b++)G[b]=0;for(b=21896;b<=21899;b++)G[b]=0;for(b=22171;b<=22177;b++)G[b]=0;for(b=22181;b<=22187;b++)G[b]=0;for(b=22191;b<=22197;b++)G[b]=0;for(b=22207;b<=22222;b++)G[b]=0;for(b=22229;b<=22232;b++)G[b]=0;for(b=22234;b<=22236;b++)G[b]=0;for(b=22243;b<=22250;b++)G[b]=0;for(b=22262;b<=22265;b++)G[b]=0;for(b=22307;b<=22322;b++)G[b]=0;for(b=22348;b<=22357;b++)G[b]=0;for(b=22407;b<=22422;b++)G[b]=0;for(b=22462;b<=22465;b++)G[b]=0;for(b=22521;b<=22525;b++)G[b]=0;for(b=22607;b<=22622;b++)G[b]=0;for(b=22641;b<=22646;b++)G[b]=0;for(b=22648;b<=22657;b++)G[b]=0;for(b=22707;b<=22722;b++)G[b]=0;for(b=22762;b<=22765;b++)G[b]=0;for(b=22807;b<=22822;b++)G[b]=0;for(b=22991;b<=22994;b++)G[b]=0;for(b=23028;b<=23038;b++)G[b]=0;for(b=23301;b<=23333;b++)G[b]=2;for(b=23830;b<=23853;b++)G[b]=0;for(b=23866;b<=23872;b++)G[b]=0;for(b=23877;b<=23884;b++)G[b]=0;for(b=23886;b<=23894;b++)G[b]=0;for(b=23946;b<=23948;b++)G[b]=0;for(b=24311;b<=24313;b++)G[b]=0;for(b=24342;b<=24347;b++)G[b]=0;for(b=24370;b<=24374;b++)G[b]=10;for(b=24375;b<=24381;b++)G[b]=0;for(b=24718;b<=24721;b++)G[b]=0;for(b=24817;b<=24821;b++)G[b]=0;for(b=24877;b<=24882;b++)G[b]=0;for(b=24891;b<=24893;b++)G[b]=0;for(b=25391;b<=25395;b++)G[b]=0;for(b=25828;b<=25838;b++)G[b]=0;for(b=26191;b<=26195;b++)G[b]=0;for(b=26391;b<=26393;b++)G[b]=0;for(b=26701;b<=26722;b++)G[b]=0;for(b=26729;b<=26799;b++)G[b]=2;for(b=26801;b<=26803;b++)G[b]=2;for(b=26811;b<=26813;b++)G[b]=2;for(b=26847;b<=26870;b++)G[b]=2;for(b=26891;b<=26899;b++)G[b]=0;for(b=26901;b<=26923;b++)G[b]=0;for(b=26929;b<=26946;b++)G[b]=0;for(b=26948;b<=26998;b++)G[b]=0;for(b=27037;b<=27040;b++)G[b]=0;for(b=27205;b<=27232;b++)G[b]=0;for(b=27258;b<=27260;b++)G[b]=0;for(b=27391;b<=27398;b++)G[b]=0;for(b=27561;b<=27564;b++)G[b]=0;for(b=27571;b<=27574;b++)G[b]=0;for(b=27581;b<=27584;b++)G[b]=0;for(b=27591;b<=27594;b++)G[b]=0;for(b=27700;b<=27707;b++)G[b]=0;for(b=28191;b<=28193;b++)G[b]=0;for(b=28348;b<=28358;b++)G[b]=0;for(b=28402;b<=28432;b++)G[b]=0;for(b=28462;b<=28492;b++)G[b]=0;for(b=29118;b<=29122;b++)G[b]=0;for(b=29168;b<=29172;b++)G[b]=0;for(b=29177;b<=29185;b++)G[b]=0;for(b=29187;b<=29195;b++)G[b]=0;for(b=29900;b<=29903;b++)G[b]=0;for(b=30161;b<=30179;b++)G[b]=0;for(b=30491;b<=30494;b++)G[b]=0;for(b=30729;b<=30732;b++)G[b]=0;for(b=31251;b<=31259;b++)G[b]=0;for(b=31265;b<=31268;b++)G[b]=0;for(b=31275;b<=31279;b++)G[b]=0;for(b=31281;b<=31297;b++)G[b]=0;for(b=31461;b<=31469;b++)G[b]=0;for(b=31491;b<=31495;b++)G[b]=0;for(b=31917;b<=31922;b++)G[b]=0;for(b=31965;b<=32e3;b++)G[b]=0;for(b=32001;b<=32003;b++)G[b]=2;for(b=32005;b<=32031;b++)G[b]=2;for(b=32033;b<=32060;b++)G[b]=2;for(b=32064;b<=32067;b++)G[b]=2;for(b=32074;b<=32077;b++)G[b]=2;for(b=32081;b<=32086;b++)G[b]=0;for(b=32107;b<=32130;b++)G[b]=0;for(b=32133;b<=32159;b++)G[b]=0;for(b=32164;b<=32167;b++)G[b]=2;for(b=32180;b<=32199;b++)G[b]=0;for(b=32201;b<=32260;b++)G[b]=0;for(b=32301;b<=32360;b++)G[b]=0;for(b=32401;b<=32460;b++)G[b]=0;for(b=32501;b<=32560;b++)G[b]=0;for(b=32601;b<=32662;b++)G[b]=0;for(b=32664;b<=32667;b++)G[b]=2;for(b=32701;b<=32761;b++)G[b]=0;for(b=53001;b<=53004;b++)G[b]=0;for(b=53008;b<=53019;b++)G[b]=0;for(b=53021;b<=53032;b++)G[b]=0;for(b=53034;b<=53037;b++)G[b]=0;for(b=53042;b<=53046;b++)G[b]=0;for(b=53074;b<=53080;b++)G[b]=0;for(b=54001;b<=54004;b++)G[b]=0;for(b=54008;b<=54019;b++)G[b]=0;for(b=54021;b<=54032;b++)G[b]=0;for(b=54034;b<=54037;b++)G[b]=0;for(b=54042;b<=54046;b++)G[b]=0;for(b=54048;b<=54053;b++)G[b]=0;for(b=54074;b<=54080;b++)G[b]=0;for(b=54090;b<=54096;b++)G[b]=0;for(b=54098;b<=54101;b++)G[b]=0;for(b=65161;b<=65163;b++)G[b]=0;for(b=102001;b<=102040;b++)G[b]=0;for(b=102042;b<=102063;b++)G[b]=0;for(b=102065;b<=102067;b++)G[b]=0;for(b=102070;b<=102117;b++)G[b]=0;for(b=102122;b<=102216;b++)G[b]=0;for(b=102221;b<=102377;b++)G[b]=0;for(b=102382;b<=102388;b++)G[b]=0;for(b=102389;b<=102398;b++)G[b]=2;for(b=102399;b<=102444;b++)G[b]=0;for(b=102445;b<=102447;b++)G[b]=2;for(b=102448;b<=102458;b++)G[b]=0;for(b=102459;b<=102468;b++)G[b]=2;for(b=102469;b<=102499;b++)G[b]=0;for(b=102500;b<=102519;b++)G[b]=1;for(b=102520;b<=102524;b++)G[b]=0;for(b=102525;b<=102529;b++)G[b]=2;for(b=102530;b<=102588;b++)G[b]=0;for(b=102590;b<=102598;b++)G[b]=0;for(b=102601;b<=102603;b++)G[b]=0;for(b=102605;b<=102628;b++)G[b]=0;for(b=102629;b<=102646;b++)G[b]=2;for(b=102648;b<=102700;b++)G[b]=2;for(b=102701;b<=102703;b++)G[b]=0;for(b=102707;b<=102730;b++)G[b]=2;for(b=102733;b<=102758;b++)G[b]=2;for(b=102767;b<=102900;b++)G[b]=0;for(b=102901;b<=102933;b++)G[b]=2;for(b=102934;b<=102950;b++)G[b]=13;for(b=102951;b<=102963;b++)G[b]=0;for(b=102965;b<=102969;b++)G[b]=0;for(b=102971;b<=102973;b++)G[b]=0;for(b=102975;b<=102989;b++)G[b]=0;for(b=102990;b<=102992;b++)G[b]=1;for(b=102997;b<=103002;b++)G[b]=0;for(b=103003;b<=103008;b++)G[b]=2;for(b=103009;b<=103011;b++)G[b]=0;for(b=103012;b<=103014;b++)G[b]=2;for(b=103019;b<=103021;b++)G[b]=0;for(b=103022;b<=103024;b++)G[b]=2;for(b=103029;b<=103031;b++)G[b]=0;for(b=103032;b<=103034;b++)G[b]=2;for(b=103065;b<=103068;b++)G[b]=0;for(b=103074;b<=103076;b++)G[b]=0;for(b=103077;b<=103079;b++)G[b]=1;for(b=103080;b<=103082;b++)G[b]=0;for(b=103083;b<=103085;b++)G[b]=2;for(b=103090;b<=103093;b++)G[b]=0;for(b=103097;b<=103099;b++)G[b]=0;for(b=103100;b<=103102;b++)G[b]=2;for(b=103107;b<=103109;b++)G[b]=0;for(b=103110;b<=103112;b++)G[b]=2;for(b=103113;b<=103116;b++)G[b]=0;for(b=103117;b<=103120;b++)G[b]=2;for(b=103153;b<=103157;b++)G[b]=0;for(b=103158;b<=103162;b++)G[b]=2;for(b=103163;b<=103165;b++)G[b]=0;for(b=103166;b<=103168;b++)G[b]=1;for(b=103169;b<=103171;b++)G[b]=2;for(b=103186;b<=103188;b++)G[b]=0;for(b=103189;b<=103191;b++)G[b]=2;for(b=103192;b<=103195;b++)G[b]=0;for(b=103196;b<=103199;b++)G[b]=2;for(b=103200;b<=103224;b++)G[b]=0;for(b=103225;b<=103227;b++)G[b]=1;for(b=103232;b<=103237;b++)G[b]=0;for(b=103238;b<=103243;b++)G[b]=2;for(b=103244;b<=103246;b++)G[b]=0;for(b=103247;b<=103249;b++)G[b]=2;for(b=103254;b<=103256;b++)G[b]=0;for(b=103257;b<=103259;b++)G[b]=2;for(b=103264;b<=103266;b++)G[b]=0;for(b=103267;b<=103269;b++)G[b]=2;for(b=103300;b<=103375;b++)G[b]=0;for(b=103381;b<=103383;b++)G[b]=0;for(b=103384;b<=103386;b++)G[b]=1;for(b=103387;b<=103389;b++)G[b]=0;for(b=103390;b<=103392;b++)G[b]=2;for(b=103397;b<=103399;b++)G[b]=0;for(b=103400;b<=103471;b++)G[b]=2;for(b=103476;b<=103478;b++)G[b]=0;for(b=103479;b<=103481;b++)G[b]=2;for(b=103486;b<=103488;b++)G[b]=0;for(b=103489;b<=103491;b++)G[b]=2;for(b=103492;b<=103495;b++)G[b]=0;for(b=103496;b<=103499;b++)G[b]=2;for(b=103528;b<=103543;b++)G[b]=0;for(b=103544;b<=103548;b++)G[b]=2;for(b=103549;b<=103551;b++)G[b]=0;for(b=103552;b<=103554;b++)G[b]=1;for(b=103555;b<=103557;b++)G[b]=2;for(b=103558;b<=103560;b++)G[b]=0;for(b=103571;b<=103573;b++)G[b]=0;for(b=103574;b<=103576;b++)G[b]=2;for(b=103577;b<=103580;b++)G[b]=0;for(b=103581;b<=103583;b++)G[b]=2;for(b=103595;b<=103694;b++)G[b]=0;for(b=103696;b<=103699;b++)G[b]=0;for(b=103700;b<=103793;b++)G[b]=2;for(b=103794;b<=103890;b++)G[b]=0;for(b=103891;b<=103896;b++)G[b]=2;for(b=103900;b<=103971;b++)G[b]=2;for(b=103972;b<=103977;b++)G[b]=0;for(b=112e3;b<=112101;b++)G[b]=0;const Tbe=[102100,102113,3857,3785,900913],h6e=[104905,104971],p6e=[4326,...Tbe,...h6e],EA=[-20037508342788905e-9,20037508342788905e-9],HH=[-20037508342787e-6,20037508342787e-6],rB={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:EA,origin:HH,dx:1e-5},Ebe={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:EA,origin:HH,dx:1e-5},102100:rB,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:EA,origin:HH,dx:1e-5},3857:rB,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:rB};function Cn(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Wp(t)&&Wp(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function ja(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Ebe[e]||null}function Uz(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function $1(t){if(!mc(t))return!1;const{wkid:e}=t;if(e)return G[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function f6e(t){return!(lX(t)||cX(t))}function fb(t){return(t==null?void 0:t.wkid)===4326}function HCt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function qH(t){return(t==null?void 0:t.wkid)===hu.CGCS2000}function Wp(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&Tbe.includes(e)}function m6e(t){return(t==null?void 0:t.wkid)===32662}function ZU(t){return t===hu.GCSMARS2000||t===hu.GCSMARS2000_SPHERE}function lX(t){return ZU(t==null?void 0:t.wkid)}function YU(t){return t===hu.GCSMOON2000}function cX(t){return YU(t==null?void 0:t.wkid)}function y6e(t){const e=t==null?void 0:t.wkid;return e!=null&&e>=2e3&&p6e.includes(e)}function mc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Cbe={wkid:4326,wkt:Tb(Ebe[4326].wkTemplate,{Central_Meridian:"0.0"})},Ibe={wkid:102100,latestWkid:3857},g6e={wkid:32662};function uX(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const v6e=uX(yn),dX=uX(Lp),hX=uX(hb),b6e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${yn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},w6e=dX.wkt.toUpperCase(),_6e=hX.wkt.toUpperCase();function x6e(t){if(t!=null&&mc(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(ZU(e))return Lp;const r=i==null?void 0:i.toUpperCase();if(i&&r===w6e)return Lp;if(YU(e)||r&&r===_6e)return hb}return yn}function qCt(t){return ZU(t)?Lp:YU(t)?hb:yn}function jz(t){return Cn(t,v6e)}function mb(t){return jz(t)||Cn(t,dX)||Cn(t,hX)}const pX=39.37,S6e=yn.radius*Math.PI/200,Mbe=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,kE=G,kbe=/UNIT\[([^\]]+)]/i,$6e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),T6e=Wt()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),ju=t=>t*t,ug=t=>t*t*t,CA={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ju(.001)},"square-centimeters":{inBaseUnits:ju(.01)},"square-decimeters":{inBaseUnits:ju(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ju(1e3)},"square-inches":{inBaseUnits:ju(.0254)},"square-feet":{inBaseUnits:ju(.3048)},"square-yards":{inBaseUnits:ju(.9144)},"square-miles":{inBaseUnits:ju(1609.344)},"square-nautical-miles":{inBaseUnits:ju(1852)},"square-us-feet":{inBaseUnits:ju(1200/3937)},acres:{inBaseUnits:.0015625*ju(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ug(.001)},"cubic-centimeters":{inBaseUnits:1e3*ug(.01)},"cubic-decimeters":{inBaseUnits:1e3*ug(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ug(1e3)},"cubic-inches":{inBaseUnits:1e3*ug(.0254)},"cubic-feet":{inBaseUnits:1e3*ug(.3048)},"cubic-yards":{inBaseUnits:1e3*ug(.9144)},"cubic-miles":{inBaseUnits:1e3*ug(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},E6e=(()=>{const t={};for(const e in CA)for(const i in CA[e].units)t[i]=e;return t})();function C6e(t,e,i){return t*CA[i].units[e].inBaseUnits}function I6e(t,e,i){return t/CA[i].units[e].inBaseUnits}const M6e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],k6e=["metric","imperial"],Abe=[...k6e,...M6e],A6e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function IA(t){const e=E6e[t];if(!e)throw new Error("unknown type");return e}function Use(t,e=null){return e=e||IA(t),CA[e].baseUnit===t}function pn(t,e,i){if(e===i)return t;const r=IA(e);if(r!==IA(i))throw new Error("incompatible units");const n=Use(e,r)?t:C6e(t,e,r);return Use(i,r)?n:I6e(n,i,r)}function WCt(t,e,i,r=!1){if(!r&&$1(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=T1(e);return n!==i&&(t=n?pn(t,n,i):pn(t*=Ha(e),"meters",i)),t}function JCt(t,e,i,r=!1){if(!r&&$1(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=T1(i);return e!==n&&(t=n?pn(t,e,n):pn(t,e,"meters")/Ha(i)),t}function O6e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function ZCt(t){return O6e(t)}function YCt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function XCt(t,e){const i=pn(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function KCt(t,e){const i=pn(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function QCt(t,e){const i=pn(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function eIt(t,e){const i=pn(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function tIt(t,e){const i=pn(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function iIt(t,e){const i=pn(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function P6e(t,e,i){return pn(t,e,"meters")/(i*Math.PI/180)}function fX(t){return T6e.fromJSON(t.toLowerCase())||null}function Vz(t){if(t!=null&&!f6e(t))return 1;const e=Ha(t);return e>1e5?1:e}function Obe(t){return Ha(t)>=x6e(t).metersPerDegree?"meters":T1(t)}function Ha(t,e=yn.metersPerDegree){return L6e(t,!0)??e}function L6e(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(ZU(i))return Lp.metersPerDegree;if(YU(i))return hb.metersPerDegree;n=kE.values[kE[i]],!n&&e&&$6e.has(i)&&(n=S6e)}else r&&(Rbe(r)?n=jse(Mbe.exec(r),n):Lbe(r)&&(n=jse(kbe.exec(r),n)));return n}function rIt(t){return $1(t)?1:Ha(t)}function jse(t,e){return t!=null&&t[1]?Pbe(t[1]):e}function Pbe(t){return parseFloat(t.split(",")[1])}function T1(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=kE.units[kE[e]];else if(i){const n=Rbe(i)?Mbe:Lbe(i)?kbe:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=D6e(s[1]))}}return r!=null?fX(r):null}function nIt(t){const e=T1(t);return e!=null&&Abe.includes(e)?e:null}function sIt(t){const e=Obe(t);return e!=null&&Abe.includes(e)?e:null}function oIt(t){const e=T1(t);return e==null?null:A6e.get(e)}function Lbe(t){return/^GEOCCS/i.test(t)}function Rbe(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const R6e=1e-7;function D6e(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!fX(i)){const r=Pbe(t);i=null;const n=kE.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<R6e){i=kE.units[s];break}}return i}function aIt(t){const e=T1(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const N6e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},z6e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},F6e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},U6e=Wt()(N6e),j6e=Wt()(z6e),lIt=Wt()(F6e);var hh,Kh;let et=(Kh=class extends ye{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return hh.WebMercator;if((e==null?void 0:e.wkid)===4326)return hh.WGS84;const i=new hh;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return fb(this)}get isWebMercator(){return Wp(this)}get isGeographic(){return $1(this)}get isWrappable(){return y6e(this)}get metersPerUnit(){return Ha(this)}get unit(){return T1(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===hh.WGS84)return new hh(Cbe);if(this===hh.WebMercator)return new hh(Ibe);const e=new hh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ce(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return Cn(this,e)}toJSON(e){return this.write(void 0,e)}},hh=Kh,Kh.GCS_NAD_1927=null,Kh.WGS84=null,Kh.WebMercator=null,Kh.PlateCarree=null,Kh);u([p({readOnly:!0})],et.prototype,"isWGS84",null),u([p({readOnly:!0})],et.prototype,"isWebMercator",null),u([p({readOnly:!0})],et.prototype,"isGeographic",null),u([p({readOnly:!0})],et.prototype,"isWrappable",null),u([p({type:fi,json:{write:!0}})],et.prototype,"latestWkid",void 0),u([p({readOnly:!0})],et.prototype,"metersPerUnit",null),u([p({readOnly:!0})],et.prototype,"unit",null),u([p({type:fi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],et.prototype,"wkid",void 0),u([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],et.prototype,"wkt",void 0),u([qe("wkt"),qe("web-scene","wkt")],et.prototype,"writeWkt",null),u([p({type:String,json:{write:!1}})],et.prototype,"wkt2",void 0),u([p({type:fi,json:{write:!0}})],et.prototype,"vcsWkid",void 0),u([p({type:fi,json:{write:!0}})],et.prototype,"latestVcsWkid",void 0),u([p()],et.prototype,"imageCoordinateSystem",void 0),et=hh=u([U("esri.geometry.SpatialReference")],et),et.prototype.toJSON.isDefaultToJSON=!0,et.GCS_NAD_1927=st.freeze(new et({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),et.WGS84=st.freeze(new et(Cbe)),et.WebMercator=st.freeze(new et(Ibe)),et.PlateCarree=st.freeze(new et(g6e));let eo=class extends ye{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=et.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof et)return e;if(e!=null){const r=new et;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};u([p()],eo.prototype,"type",void 0),u([p({readOnly:!0})],eo.prototype,"cache",null),u([p({readOnly:!0})],eo.prototype,"extent",null),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],eo.prototype,"hasM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],eo.prototype,"hasZ",void 0),u([p({type:et,json:{write:!0},value:et.WGS84})],eo.prototype,"spatialReference",void 0),u([Ue("spatialReference")],eo.prototype,"readSpatialReference",null),eo=u([U("esri.geometry.Geometry")],eo);function AE(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new Q("internal:mesh","Mesh geometries are not supported for this operation")}function V6e(t){t.forEach(AE)}const B6e=57.29577951308232,G6e=.017453292519943;function Vse(t){return t*B6e}function Bse(t){return t*G6e}function Gse(t){return t/yn.radius}function Hse(t){return Math.PI/2-2*Math.atan(Math.exp(-t/yn.radius))}function WH(t){return t.wkid!=null||t.wkt!=null}const nB=[0,0];function Bz(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,nB,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,nB,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,nB,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<a.length;h++){const m=a[h];c=[],l.push(c);for(let y=0;y<m.length;y++)c.push(e(m[y][0],m[y][1],[0,0],r)),m[y].length>2&&c[y].push(m[y][2]),m[y].length>3&&c[y].push(m[y][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function H3(t,e){const i=t&&(WH(t)?t:t.spatialReference),r=e&&(WH(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Cn(r,i)||Wp(r)&&fb(i)||Wp(i)&&fb(r))}function XU(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(WH(e)?e:e.spatialReference);return H3(i,r)?Cn(i,r)?ce(t):Wp(r)?Bz(t,m$,et.WebMercator,!1,ce(t)):fb(r)?Bz(t,KU,et.WGS84,!1,ce(t)):null:null}function m$(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=Bse(e);return i[0]=Bse(t)*yn.radius,i[1]=yn.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function KU(t,e,i=[0,0],r=!1){if(t===EA[0])i[0]=-180;else if(t===EA[1])i[0]=180;else{const n=Vse(t/yn.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=Vse(Math.PI/2-2*Math.atan(Math.exp(-e/yn.radius))),i}function Rp(t,e=!1,i=ce(t)){return AE(t),AE(i),Bz(t,m$,et.WebMercator,e,i)}function y$(t,e=!1,i=ce(t)){return AE(t),AE(i),Bz(t,KU,et.WGS84,e,i)}function Dbe(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function H6e(t){var e;return((e=Nbe(t,zbe))==null?void 0:e[0])??null}function q6e(t){var e;return((e=Nbe(t,zbe))==null?void 0:e[1])??null}function Nbe({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Wp(i))return KU(t,e,r);if($1(i))return r[0]=t,r[1]=e,r}return null}const zbe=[0,0];var q3;const sB=[0,0];function qse(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ft=q3=class extends eo{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",st.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new et(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Ce.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Ce.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const a=m$(s.longitude,s.latitude,sB);t=a[0],e=a[1]}}}else qse(i)?(n=i,i=null):qse(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?Ce.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&Ce.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return q6e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",m$(i,t,sB)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return H6e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",m$(t,e,sB)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new q3;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return q3.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:h}=t;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=m$(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=KU(l,c),h=s}return e===l&&i===c&&r===o&&n===a&&s.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=ja(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return Dbe(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};u([p({readOnly:!0})],ft.prototype,"cache",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ft.prototype,"hasM",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ft.prototype,"hasZ",null),u([p({type:Number})],ft.prototype,"latitude",null),u([p({type:Number})],ft.prototype,"longitude",null),u([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),_i(t=>isNaN(t)?t:Da(t))],ft.prototype,"x",void 0),u([qe("x")],ft.prototype,"writeX",null),u([Ue("x")],ft.prototype,"readX",null),u([p({type:Number,json:{write:!0}})],ft.prototype,"y",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ft.prototype,"z",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ft.prototype,"m",void 0),ft=q3=u([U("esri.geometry.Point")],ft),ft.prototype.toJSON.isDefaultToJSON=!0;let ph=class extends It.ClonableMixin(ye){constructor(...e){super(...e),this.position=new ft([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Ave}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=Da(e.x||0),s.y=Da(e.y||0),s.z=e.hasZ?Da(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new ft;return r.read(e,i),r.x=Da(r.x||0),r.y=Da(r.y||0),r.z=r.hasZ?Da(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};u([p({type:ft,json:{write:{isRequired:!0}}})],ph.prototype,"position",void 0),u([qe("position")],ph.prototype,"writePosition",null),u([Ue("position")],ph.prototype,"readPosition",null),u([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),_i(t=>X4e.normalize(Da(t)))],ph.prototype,"heading",void 0),u([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),_i(t=>da(Da(t),-180,180))],ph.prototype,"tilt",void 0),u([p({type:Number,nonNullable:!0,json:{default:55,write:!0}}),_i(t=>da(Da(t,55),1,170))],ph.prototype,"fov",void 0),u([p({type:Ave,nonNullable:!0,json:{read:!1,write:!1}})],ph.prototype,"layout",void 0),ph=u([U("esri.Camera")],ph);const W6e=ph,oB=[0,0];function HO(t,e){return e!=null&&Ia(t,e.x,e.y,e.z)}function dIt(t,e){var i;if(!((i=e.points)!=null&&i.length))return!1;for(const r of e.points)if(!OE(t,r))return!1;return!0}function J6e(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Ia(t,i,r,n)&&Ia(t,i,o,n)&&Ia(t,s,o,n)&&Ia(t,s,r,n)&&Ia(t,i,r,a)&&Ia(t,i,o,a)&&Ia(t,s,o,a)&&Ia(t,s,r,a):Ia(t,i,r)&&Ia(t,i,o)&&Ia(t,s,o)&&Ia(t,s,r)}function OE(t,e){return Ia(t,e[0],e[1])}function Z6e(t,e){return Ia(t,e[0],e[1],e[2])}function Ia(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function mX(t,e){return oB[1]=e.y,oB[0]=e.x,Y6e(t,oB)}function Y6e(t,e){return yX(t.rings,e)}function yX(t,e){if(!t)return!1;if(X6e(t))return Wse(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=Wse(i,t[r],e);return i}function X6e(t){return!Array.isArray(t[0][0])}function Wse(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=e[a],[m,y]=e[o];(h<n&&y>=n||y<n&&h>=n)&&c+(n-h)/(y-h)*(m-c)<r&&(s=!s)}return s}function K6e(t,e){return HO(t,e)}function Q6e(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function eVe(t,e){const{points:i,hasZ:r}=e,n=r?Z6e:OE;for(const s of i)if(n(t,s))return!0;return!1}const s1=[0,0],o1=[0,0],a1=[0,0],l1=[0,0],tVe=[s1,o1,a1,l1],Fbe=[[a1,s1],[s1,o1],[o1,l1],[l1,a1]];function iVe(t,e){return rVe(t,e.rings)}function rVe(t,e){s1[0]=t.xmin,s1[1]=t.ymax,o1[0]=t.xmax,o1[1]=t.ymax,a1[0]=t.xmin,a1[1]=t.ymin,l1[0]=t.xmax,l1[1]=t.ymin;for(const i of tVe)if(yX(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(OE(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(OE(t,s)||Ube(r,s,Fbe))return!0;r=s}}return!1}function nVe(t,e){s1[0]=t.xmin,s1[1]=t.ymax,o1[0]=t.xmax,o1[1]=t.ymax,a1[0]=t.xmin,a1[1]=t.ymin,l1[0]=t.xmax,l1[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(OE(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(OE(t,o)||Ube(n,o,Fbe))return!0;n=o}}return!1}const Js=[0,0];function sVe(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],h=t[a][l+1];if(Gz(s,o,c,h,Js)&&!(Js[0]===s[0]&&Js[1]===s[1]||Js[0]===c[0]&&Js[1]===c[1]||Js[0]===o[0]&&Js[1]===o[1]||Js[0]===h[0]&&Js[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const c=i[l],h=i[l+1];if(Gz(o,a,c,h,Js)&&!(Js[0]===o[0]&&Js[1]===o[1]||Js[0]===c[0]&&Js[1]===c[1]||Js[0]===a[0]&&Js[1]===a[1]||Js[0]===h[0]&&Js[1]===h[1]))return!0}}}return!1}function Ube(t,e,i){for(let r=0;r<i.length;r++)if(Gz(t,e,i[r][0],i[r][1]))return!0;return!1}function Gz(t,e,i,r,n){const[s,o]=t,[a,l]=e,[c,h]=i,[m,y]=r,v=m-c,w=s-c,x=a-s,S=y-h,C=o-h,k=l-o,A=S*x-v*k;if(A===0)return!1;const R=(v*C-S*w)/A,D=(x*C-k*w)/A;return R>=0&&R<=1&&D>=0&&D<=1&&(n&&(n[0]=s+R*(a-s),n[1]=o+R*(l-o)),!0)}function oVe(t){switch(t){case"esriGeometryEnvelope":case"extent":return Q6e;case"esriGeometryMultipoint":case"multipoint":return eVe;case"esriGeometryPoint":case"point":return K6e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return iVe;case"esriGeometryPolyline":case"polyline":return nVe}}var ed;function aVe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function dg(t,e,i){return e==null?i:i==null?e:t(e,i)}let jt=ed=class extends eo{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return aVe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?et.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??et.WGS84}}static fromPoint(t){return new ed({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new ft({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new ed;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&H3(e,i)&&(t=e.isWebMercator?Rp(t):y$(t,!0)),t.type==="point"?HO(this,t):t.type==="extent"&&J6e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&H3(e,i)&&(t=e.isWebMercator?Rp(t):y$(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Cn(e,i)&&H3(e,i)&&(t=e.isWebMercator?Rp(t):y$(t,!0)),oVe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=dg(Math.min,this.zmin,t.zmin),this.zmax=dg(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=dg(Math.min,this.mmin,t.mmin),this.mmax=dg(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=dg(Math.max,this.zmin,t.zmin),this.zmax=dg(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=dg(Math.max,this.mmin,t.mmin),this.mmax=dg(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=ja(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?y$(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=aB(r.x,t).x),this.spatialReference=new et(Tb((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??ja(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let m=0;m<c.length;m++)c[m].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let m=0;m<c.length;m++)c[m].push(h)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;t=t||ja(o);const[m,y]=t.valid;h=aB(this.xmin,t);const v=h.x,w=h.frameId;h=aB(this.xmax,t);const x=h.x,S=h.frameId,C=v===x&&a>0;if(a>2*y){const k=new ed(l<c?v:x,n,y,s,o),A=new ed(m,n,l<c?x:v,s,o),R=new ed(0,n,y,s,o),D=new ed(m,n,0,s,o),B=[],z=[];k.contains(R)&&B.push(w),k.contains(D)&&z.push(w),A.contains(R)&&B.push(S),A.contains(D)&&z.push(S);for(let W=w+1;W<S;W++)B.push(W),z.push(W);e.push({extent:k,frameIds:[w]},{extent:A,frameIds:[S]},{extent:R,frameIds:B},{extent:D,frameIds:z})}else v>x||C?e.push({extent:new ed(v,n,y,s,o),frameIds:[w]},{extent:new ed(m,n,x,s,o),frameIds:[S]}):e.push({extent:new ed(v,n,x,s,o),frameIds:[w]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function aB(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}u([p({readOnly:!0})],jt.prototype,"cache",null),u([p({readOnly:!0})],jt.prototype,"center",null),u([p({readOnly:!0})],jt.prototype,"extent",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],jt.prototype,"hasM",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],jt.prototype,"hasZ",null),u([p({readOnly:!0})],jt.prototype,"height",null),u([p({readOnly:!0})],jt.prototype,"width",null),u([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],jt.prototype,"xmin",void 0),u([p({type:Number,json:{write:!0}})],jt.prototype,"ymin",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],jt.prototype,"mmin",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],jt.prototype,"zmin",void 0),u([p({type:Number,json:{write:!0}})],jt.prototype,"xmax",void 0),u([p({type:Number,json:{write:!0}})],jt.prototype,"ymax",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],jt.prototype,"mmax",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],jt.prototype,"zmax",void 0),jt=ed=u([U("esri.geometry.Extent")],jt),jt.prototype.toJSON.isDefaultToJSON=!0;function PE(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var JH;function Jse(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function lVe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let ou=JH=class extends eo{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):lVe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new jt,i=this.hasZ,r=this.hasM,n=i?3:2,s=t[0],o=Jse(Math.min),a=Jse(Math.max);let l,c,h,m,[y,v]=s,[w,x]=s;for(let S=0,C=t.length;S<C;S++){const k=t[S],[A,R]=k;if(y=o(y,A),v=o(v,R),w=a(w,A),x=a(x,R),i&&k.length>2){const D=k[2];l=o(l,D),h=a(h,D)}if(r&&k.length>n){const D=k[n];c=o(c,D),m=a(m,D)}}return e.xmin=y,e.ymin=v,e.xmax=w,e.ymax=x,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=h):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=c,e.mmax=m):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=ce(this.points)}addPoint(t){return PE(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:ce(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new JH(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new ft(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new ft(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(PE(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};u([p({readOnly:!0})],ou.prototype,"cache",null),u([p()],ou.prototype,"extent",null),u([p({type:[[Number]],json:{write:{isRequired:!0}}})],ou.prototype,"points",void 0),u([qe("points")],ou.prototype,"writePoints",null),ou=JH=u([U("esri.geometry.Multipoint")],ou),ou.prototype.toJSON.isDefaultToJSON=!0;function QU(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function Uv(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var Hz;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(Hz||(Hz={}));function hIt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.slice();if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function e4(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function jbe(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function cVe(t,e,i,r){return Vbe(t,e,i[r],i[r+1])}function Vbe(t,e,i,r){const[n,s]=e,[o,a]=i,[l,c]=r,h=l-o,m=c-a,y=h*h+m*m,v=(n-o)*h+(s-a)*m,w=Math.min(1,Math.max(0,v/y));return t[0]=o+h*w,t[1]=a+m*w,t}function uVe(t,e,i,r,n,s){let o=i,a=r,l=n-o,c=s-a;if(l!==0||c!==0){const h=((t-o)*l+(e-a)*c)/(l*l+c*c);h>1?(o=n,a=s):h>0&&(o+=l*h,a+=c*h)}return l=t-o,c=e-a,l*l+c*c}function Bbe(t,e){return jbe(t,e,.5)}function dVe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=e4(t[r],t[r+1]);return i}function pIt(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=e4(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return jbe(t[n],t[n+1],o)}r+=s}return t[i-1]}function Gbe(t,e=Hz.X,i=Hz.Y){let r=0;const n=t.length;let s=t[0];for(let o=1;o<n;o++){const a=t[o];r+=(a[e]-s[e])*(a[i]+s[i]),s=a}if(Hbe(t)){const o=t[0];r+=(o[e]-s[e])*(o[i]+s[i])}return r>=0}function Hbe(t){const e=t.length;return e>0&&!UU(t[0],t[e-1])}function hVe(t){"rings"in t&&(pVe(t),fVe(t))}function pVe(t){if("rings"in t)for(const e of t.rings)Hbe(e)&&e.push(e[0].slice())}function fVe(t){if(!("rings"in t)||t.rings.length===0||Gbe(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function fIt(t){return t.type!=="polygon"&&t.type!=="polyline"||mVe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function mVe(t,e){const i=ja(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let a=1/0,l=-1/0;for(const h of o){const m=yVe(h[0],r,n);a=Math.min(a,m),l=Math.max(l,m),h[0]=m}const c=l-a;s-c<c&&o.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function yVe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function mIt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((n,s)=>n.length===r[s].length)}function yIt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function qbe(t){return t?gVe(t.rings,t.hasZ??!1):null}function gVe(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=Wbe(t[s],e,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?bVe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function Wbe(t,e,i){let r=0,n=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let y=0;y<t.length;y++){const v=t[y],w=t[(y+1)%t.length],[x,S,C]=v,k=x-l,A=S-c,[R,D,B]=w,z=R-l,W=D-c,Y=k*W-z*A;if(o+=Y,r+=(k+z)*Y,n+=(A+W)*Y,e&&v.length>2&&w.length>2){const ee=C-h,ge=B-h,fe=k*ge-z*ee;s+=(ee+ge)*fe,a+=fe}x<i[0]&&(i[0]=x),x>i[1]&&(i[1]=x),S<i[2]&&(i[2]=S),S>i[3]&&(i[3]=S),e&&(C<i[4]&&(i[4]=C),C>i[5]&&(i[5]=C))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const m=[r/(6*o)+l,n/(6*o)+c,o];return e&&(i[4]===i[5]||a===0?(m[3]=(i[4]+i[5])/2,m[4]=0):(m[3]=s/(6*a)+h,m[4]=a)),m}function vVe(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[h,m]=l,y=h-s,v=m-o,[w,x]=c,S=w-s,C=x-o,k=y*C-S*v;n+=k,i+=(y+S)*k,r+=(v+C)*k,h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),m<e[2]&&(e[2]=m),m>e[3]&&(e[3]=m)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function bVe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const h=t[l],m=t[l+1];if(h&&m){i[0]=h[0],i[1]=h[1],r[0]=m[0],r[1]=m[1],e&&h.length>2&&m.length>2&&(i[2]=h[2],r[2]=m[2]);const y=e4(i,r);if(y){n+=y;const v=Bbe(h,m);s+=y*v[0],o+=y*v[1],e&&v.length>2&&(a+=y*v[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function Jbe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Wbe(Uv(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?wVe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function wVe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,h=t.z;for(;t.nextPoint();){const m=t.x,y=t.y,v=t.z;i[0]=l,i[1]=c,r[0]=m,r[1]=y,e&&(i[2]=h,r[2]=v);const w=e4(i,r);if(w){n+=w;const x=Bbe(i,r);s+=w*x[0],o+=w*x[1],e&&x.length>2&&(a+=w*x[2])}l=m,c=y,h=v}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const _Ve=1e-6;function xVe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<_Ve){const n=Jbe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)$Ve(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const SVe=1/3;function $Ve(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-n,s=.5*SVe*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const h=i.getCurrentRingArea(),m=[r,n];return m[0]-=e[0],m[1]-=e[1],m[0]*=h,m[1]*=h,t[0]+=m[0],t[1]+=m[1],t}function Br(t=OVe){return[t[0],t[1],t[2],t[3]]}function Zbe(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function TVe(t,e,i,r,n=Br()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function EVe(t,e=Br()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function CVe(t,e,i=new jt){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function FM(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function gIt(t,e,i){if(e!=null)if("length"in e)ZH(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else Zbe(i,t)}function vIt(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];n=Math.min(n,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=a,i}function bIt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function t4(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function i4(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function wIt(t){return t4(t)*i4(t)}function Zse(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function IVe(t){const e=t4(t),i=i4(t);return Math.sqrt(e*e+i*i)}function _It(t,e){return MVe(t,e.x,e.y)}function MVe(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function xIt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function SIt(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function kVe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function $It(t,e,i,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function AVe(t){return t?Zbe(t,Yse):Br(Yse)}function ZH(t){return t!=null&&t.length===4}function TIt(t,e){return ZH(t)&&ZH(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const Yse=[1/0,1/0,-1/0,-1/0],OVe=[0,0,0,0];function Ybe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Xbe(t){return t.points!==void 0}function Kbe(t){return t.x!==void 0&&t.y!==void 0}function Qbe(t){return t.paths!==void 0}function e0e(t){return t.rings!==void 0}function t0e(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Mv=t0e(Math.min),kv=t0e(Math.max);function gX(t,e){return Qbe(e)?LE(t,e.paths,!1,!1):e0e(e)?LE(t,e.rings,!1,!1):Xbe(e)?vX(t,e.points,!1,!1,!1,!1):Ybe(e)?r0e(t,e):(Kbe(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function qO(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=i0e(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return Br([e,r,i,n])}function i0e(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return Br([e,r,i,n])}function EIt(t,e){return Qbe(e)?LE(t,e.paths,!0,!1):e0e(e)?LE(t,e.rings,!0,!1):Xbe(e)?vX(t,e.points,!0,!1,!0,!1):Ybe(e)?r0e(t,e,!0,!1,!0,!1):(Kbe(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function LE(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,h]=e[0][0],[m,y]=e[0][0];for(let v=0;v<e.length;v++){const w=e[v];for(let x=0;x<w.length;x++){const S=w[x],[C,k]=S;if(c=Mv(c,C),h=Mv(h,k),m=kv(m,C),y=kv(y,k),i&&S.length>2){const A=S[2];s=Mv(s,A),o=kv(o,A)}if(r&&S.length>n){const A=S[n];a=Mv(s,A),l=kv(o,A)}}}return i?r?(t[0]=c,t[1]=h,t[2]=s,t[3]=a,t[4]=m,t[5]=y,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=h,t[2]=s,t[3]=m,t[4]=y,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=h,t[2]=a,t[3]=m,t[4]=y,t[5]=l,t.length=6,t):(t[0]=c,t[1]=h,t[2]=m,t[3]=y,t.length=4,t)}function r0e(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let h=e.zmin,m=e.zmax,y=e.mmin,v=e.mmax;return n?(h=h||0,m=m||0,s?(y=y||0,v=v||0,t[0]=o,t[1]=l,t[2]=h,t[3]=y,t[4]=a,t[5]=c,t[6]=m,t[7]=v,t):(t[0]=o,t[1]=l,t[2]=h,t[3]=a,t[4]=c,t[5]=m,t)):s?(y=y||0,v=v||0,t[0]=o,t[1]=l,t[2]=y,t[3]=a,t[4]=c,t[5]=v,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function vX(t,e,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let c,h,m,y,[v,w]=e[0],[x,S]=e[0];for(let C=0;C<e.length;C++){const k=e[C],[A,R]=k;if(v=Mv(v,A),w=Mv(w,R),x=kv(x,A),S=kv(S,R),l&&k.length>2){const D=k[2];c=Mv(c,D),h=kv(h,D)}if(a&&k.length>o){const D=k[o];m=Mv(c,D),y=kv(h,D)}}return n?(c=c||0,h=h||0,s?(m=m||0,y=y||0,t[0]=v,t[1]=w,t[2]=c,t[3]=m,t[4]=x,t[5]=S,t[6]=h,t[7]=y,t):(t[0]=v,t[1]=w,t[2]=c,t[3]=x,t[4]=S,t[5]=h,t)):s?(m=m||0,y=y||0,t[0]=v,t[1]=w,t[2]=m,t[3]=x,t[4]=S,t[5]=y,t):(t[0]=v,t[1]=w,t[2]=x,t[3]=S,t)}function PVe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function LVe(t){return t.points!==void 0}function RVe(t){return t.x!==void 0&&t.y!==void 0}function DVe(t){return t.paths!==void 0}function NVe(t){return t.rings!==void 0}const bX=[];function n0e(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function s0e(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function o0e(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function a0e(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function wX(t,e=!1,i=!1){return e?i?a0e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):s0e(t[0],t[1],t[2],t[3],t[4],t[5]):i?o0e(t[0],t[1],t[2],t[3],t[4],t[5]):n0e(t[0],t[1],t[2],t[3])}function CIt(t){return t?PVe(t)?t:RVe(t)?FVe(t):NVe(t)?l0e(t):DVe(t)?c0e(t):LVe(t)?zVe(t):null:null}function zVe(t){const{hasZ:e,hasM:i,points:r}=t;return wX(vX(bX,r,e??!1,i??!1),e,i)}function FVe(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?a0e(e,i,r,n,e,i,r,n):s0e(e,i,r,e,i,r):s?o0e(e,i,n,e,i,n):n0e(e,i,e,i)}function l0e(t){const{hasZ:e,hasM:i,rings:r}=t,n=LE(bX,r,e??!1,i??!1);return n?wX(n,e,i):null}function c0e(t){const{hasZ:e,hasM:i,paths:r}=t,n=LE(bX,r,e??!1,i??!1);return n?wX(n,e,i):null}var W3;function Xse(t){return!Array.isArray(t[0])}function UVe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function jVe(t){var s,o;if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),UVe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=et.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let rr=W3=class extends eo{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new W3(s)}constructor(t){super(jVe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const t=qbe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new ft;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}writeCurveRings(t,e){e.curveRings=ce(t)}get extent(){const t=l0e(this),{spatialReference:e}=this;return t?new jt({...t,spatialReference:e}):null}get isSelfIntersecting(){return Eve(Ce.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),sVe(this.rings)}writeRings(t,e){e.rings=ce(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(Xse(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new W3;return t.spatialReference=this.spatialReference,t.rings=ce(this.rings),t.curveRings=ce(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[l,c,h,m])=>n===l&&s===c&&(o==null&&h==null||o===h)&&(a==null&&m==null||a===m);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!UU(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=XU(t,this.spatialReference);return mX(this,e??t)}isClockwise(t){const e=Xse(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return Gbe(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new ft(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new ft(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new ft(i[0],i[1],i[2],i[3],this.spatialReference):new ft(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(PE(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ft(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new ft(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(PE(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([p({readOnly:!0})],rr.prototype,"cache",null),u([p({readOnly:!0})],rr.prototype,"centroid",null),u([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],rr.prototype,"curveRings",void 0),u([qe("curveRings")],rr.prototype,"writeCurveRings",null),u([p({readOnly:!0})],rr.prototype,"extent",null),u([p({readOnly:!0})],rr.prototype,"isSelfIntersecting",null),u([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],rr.prototype,"rings",void 0),u([qe("rings")],rr.prototype,"writeRings",null),rr=W3=u([U("esri.geometry.Polygon")],rr),rr.prototype.toJSON.isDefaultToJSON=!0;var YH;function VVe(t){return!Array.isArray(t[0])}function BVe(t){var e;return typeof((e=t[0])==null?void 0:e[0])=="number"}function GVe(t){var s,o;if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??(e=[]),BVe(e)&&(e=[e]),(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return n??(n=et.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let Ur=YH=class extends eo{constructor(t){super(GVe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=ce(t)}get extent(){const t=c0e(this),{spatialReference:e}=this;return t?new jt({...t,spatialReference:e}):null}writePaths(t,e){e.paths=ce(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(VVe(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new YH;return t.spatialReference=this.spatialReference,t.paths=ce(this.paths),t.curvePaths=ce(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new ft(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new ft(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new ft(i[0],i[1],i[2],i[3],this.spatialReference):new ft(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(PE(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new ft(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new ft(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(PE(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([p({readOnly:!0})],Ur.prototype,"cache",null),u([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Ur.prototype,"curvePaths",void 0),u([qe("curvePaths")],Ur.prototype,"writeCurvePaths",null),u([p({readOnly:!0})],Ur.prototype,"extent",null),u([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ur.prototype,"paths",void 0),u([qe("paths")],Ur.prototype,"writePaths",null),Ur=YH=u([U("esri.geometry.Polyline")],Ur),Ur.prototype.toJSON.isDefaultToJSON=!0;function Pa(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function z$(t){return t.points!==void 0}function MA(t){return t.x!==void 0&&t.y!==void 0}function Eo(t){return t.paths!==void 0||t.curvePaths!==void 0}function Hn(t){return t.rings!==void 0||t.curveRings!==void 0}function Ao(t){return t==null?null:t instanceof eo?t:MA(t)?ft.fromJSON(t):Eo(t)?Ur.fromJSON(t):Hn(t)?rr.fromJSON(t):z$(t)?ou.fromJSON(t):Pa(t)?jt.fromJSON(t):null}function mC(t){return t?MA(t)?"esriGeometryPoint":Eo(t)?"esriGeometryPolyline":Hn(t)?"esriGeometryPolygon":Pa(t)?"esriGeometryEnvelope":z$(t)?"esriGeometryMultipoint":null:null}const HVe={esriGeometryPoint:ft,esriGeometryPolyline:Ur,esriGeometryPolygon:rr,esriGeometryEnvelope:jt,esriGeometryMultipoint:ou,esriGeometryMultiPatch:rr};function qVe(t){return t&&HVe[t]||null}const WVe=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Kse=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),yC={base:eo,key:"type",typeMap:{extent:jt,multipoint:ou,point:ft,polyline:Ur,polygon:rr}};var XH;let Pg=XH=class extends ye{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new XH({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:lB}}}}})],Pg.prototype,"rotation",void 0),u([_i("rotation")],Pg.prototype,"castRotation",null),u([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:lB}}}}})],Pg.prototype,"scale",void 0),u([p({types:yC,json:{read:Ao,write:!0,origins:{"web-scene":{read:Ao,write:{overridePolicy:lB}}}}})],Pg.prototype,"targetGeometry",void 0),u([p({type:W6e,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Pg.prototype,"camera",void 0),Pg=XH=u([U("esri.Viewpoint")],Pg);const $s=Pg;function lB(){return{enabled:!this.camera}}let J3=class u0e{constructor(){this._emitter=new u0e.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const h of o.slice()){const m="deref"in h?h.deref():h;m?m==null||m.call(a,s):l=!0}return l&&(o=o.filter(h=>!("deref"in h)||h.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return w1(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Mi(()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{const n=r;let s=class extends n{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(o,a){return this._emitter.emit(o,a)}on(o,a){return this._emitter.on(o,a)}once(o,a){return this._emitter.once(o,a)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return s=u([U("esri.core.Evented")],s),s};let i=class extends st{constructor(){super(...arguments),this._emitter=new J3.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=u([U("esri.core.Evented.EventedAccessor")],i),t.EventedAccessor=i})(J3||(J3={}));const pa=J3;var Bi;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Bi||(Bi={}));var Zf;let JVe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},ZVe=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const Fc=new _1(JVe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function Qse(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function cB(t){return t?t instanceof ev?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function uB(t){if(t!=null&&t.length)return t[0]}function YVe(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function d0e(t,e,i,r){e&&e.forEach((n,s,o)=>{t.push(n),d0e(t,i.call(r,n,s,o),i,r)})}const hg=new Set,pg=new Set,fg=new Set,dB=new Map;let XVe=0;var T_;let ev=(T_=class extends pa.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Zf}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new lC,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:XVe++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Zf?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Lt(this._observable),this._items}set items(e){this._emitBeforeChanges(Bi.ADD)||(this._splice(0,this.length,cB(e)),this._emitAfterChanges(Bi.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,i){if(this.destroyed)return Mi();if(e==="change"){const r=this._chgListeners,n={removed:!1,callback:i};return r.push(n),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),Mi(()=>{n.removed=!0,r.splice(r.indexOf(n),1)})}return this._emitter.on(e,i)}once(e,i){const r="deref"in i?()=>i.deref():()=>i,n=this.on(e,s=>{var o;(o=r())==null||o.call(null,s),n.remove()});return n}add(e,i){if(Lt(this._observable),this._emitBeforeChanges(Bi.ADD))return this;const r=this.getNextIndex(i??null);return this._splice(r,0,[e]),this._emitAfterChanges(Bi.ADD),this}addMany(e,i=this._items.length){if(Lt(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Bi.ADD))return this;const r=this.getNextIndex(i);return this._splice(r,0,cB(e)),this._emitAfterChanges(Bi.ADD),this}at(e){if(Lt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Lt(this._observable),!this.length||this._emitBeforeChanges(Bi.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Bi.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Lt(this._observable),this._createNewInstance({items:this._items.map(ce)})}concat(...e){Lt(this._observable);const i=e.map(cB);return this._createNewInstance({items:this._items.concat(...i)})}drain(e,i){if(Lt(this._observable),!this.length||this._emitBeforeChanges(Bi.REMOVE))return;const r=this._splice(0,this.length),n=r.length;for(let s=0;s<n;s++)e.call(i,r[s],s,r);this._emitAfterChanges(Bi.REMOVE)}destroyAll(){this.drain(Qse)}destroyMany(e){const i=this.removeMany(e);return i.forEach(Qse),i}every(e,i){return Lt(this._observable),this._items.every(e,i)}filter(e,i){Lt(this._observable);const r=arguments.length===2?this._items.filter(e,i):this._items.filter(e);return this._createNewInstance({items:r})}find(e,i){return Lt(this._observable),this._items.find(e,i)}findIndex(e,i){return Lt(this._observable),this._items.findIndex(e,i)}flatten(e,i){Lt(this._observable);const r=[];return d0e(r,this,e,i),new Zf(r)}forEach(e,i){return Lt(this._observable),this._items.forEach(e,i)}getItemAt(e){return Lt(this._observable),this._items[e]}getNextIndex(e){Lt(this._observable);const i=this.length;return(e=e??i)<0?e=0:e>i&&(e=i),e}includes(e,i=0){return Lt(this._observable),this._items.includes(e,i)}indexOf(e,i=0){return Lt(this._observable),this._items.indexOf(e,i)}join(e=","){return Lt(this._observable),this._items.join(e)}lastIndexOf(e,i=this.length-1){return Lt(this._observable),this._items.lastIndexOf(e,i)}map(e,i){Lt(this._observable);const r=this._items.map(e,i);return new Zf({items:r})}reorder(e,i=this.length-1){Lt(this._observable);const r=this.indexOf(e);if(r!==-1){if(i<0?i=0:i>=this.length&&(i=this.length-1),r!==i){if(this._emitBeforeChanges(Bi.MOVE))return e;this._splice(r,1),this._splice(i,0,[e]),this._emitAfterChanges(Bi.MOVE)}return e}}pop(){if(Lt(this._observable),!this.length||this._emitBeforeChanges(Bi.REMOVE))return;const e=uB(this._splice(this.length-1,1));return this._emitAfterChanges(Bi.REMOVE),e}push(...e){return Lt(this._observable),this._emitBeforeChanges(Bi.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Bi.ADD)),this.length}reduce(e,i){Lt(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,i):r.reduce(e)}reduceRight(e,i){Lt(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,i):r.reduceRight(e)}remove(e){return Lt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Lt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Bi.REMOVE))return;const i=uB(this._splice(e,1));return this._emitAfterChanges(Bi.REMOVE),i}removeMany(e){if(Lt(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Bi.REMOVE))return[];const i=e instanceof Zf?e.toArray():e,r=this._items,n=[],s=i.length;for(let o=0;o<s;o++){const a=i[o],l=r.indexOf(a);if(l>-1){const c=1+YVe(i,r,o+1,l+1),h=this._splice(l,c);h&&h.length>0&&n.push.apply(n,h),o+=c-1}}return this._emitAfterChanges(Bi.REMOVE),n}reverse(){if(Lt(this._observable),this._emitBeforeChanges(Bi.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Bi.MOVE),this}shift(){if(Lt(this._observable),!this.length||this._emitBeforeChanges(Bi.REMOVE))return;const e=uB(this._splice(0,1));return this._emitAfterChanges(Bi.REMOVE),e}slice(e=0,i=this.length){return Lt(this._observable),this._createNewInstance({items:this._items.slice(e,i)})}some(e,i){return Lt(this._observable),this._items.some(e,i)}sort(e){if(Lt(this._observable),!this.length||this._emitBeforeChanges(Bi.MOVE)||!this._requiresSort(e))return this;const i=this._splice(0,this.length);return arguments.length?i.sort(e):i.sort(),this._splice(0,0,i),this._emitAfterChanges(Bi.MOVE),this}_requiresSort(e=(i,r)=>i===r?0:i<r?-1:1){const i=this.length-1;for(let r=0;r<i;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,i,...r){Lt(this._observable),arguments.length===1&&(i=this.length),i??(i=0);const n=(i?Bi.REMOVE:0)|(r.length?Bi.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,i,r)||[];return this._emitAfterChanges(n),s}toArray(){return Lt(this._observable),this._items.slice()}toJSON(e){return Lt(this._observable),this.toArray().map(i=>TA(i)?i.toJSON(e):i)}toLocaleString(){return Lt(this._observable),this._items.toLocaleString()}toString(){return Lt(this._observable),this._items.toString()}unshift(...e){return Lt(this._observable),!e.length||this._emitBeforeChanges(Bi.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Bi.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,i,r){const n=this._items,s=this.itemType;let o,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=zO(()=>this._dispatchChange())),e<0&&(e+=this.length),i){if(a=n.splice(e,i),this.hasEventListener("before-remove")){const l=Fc.acquire();l.target=this,l.cancellable=!0;for(let c=0,h=a.length;c<h;c++)o=a[c],l.reset(o),this.emit("before-remove",l),l.defaultPrevented&&(a.splice(c,1),n.splice(e,0,o),e+=1,c-=1,h-=1);Fc.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=Fc.acquire();l.target=this,l.cancellable=!1;const c=a.length;for(let h=0;h<c;h++)l.reset(a[h]),this.emit("after-remove",l);Fc.release(l)}}if(r!=null&&r.length){if(s){const m=[];for(const y of r){const v=s.ensureType(y);v==null&&y!=null||m.push(v)}r=m}const l=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),h=e===this.length;if(l||c){const m=Fc.acquire();m.target=this,m.cancellable=!0;const y=Fc.acquire();y.target=this,y.cancellable=!1;for(const v of r)l?(m.reset(v),this.emit("before-add",m),m.defaultPrevented||(h?n.push(v):n.splice(e++,0,v),this._set("length",n.length),c&&(y.reset(v),this.emit("after-add",y)))):(h?n.push(v):n.splice(e++,0,v),this._set("length",n.length),y.reset(v),this.emit("after-add",y));Fc.release(y),Fc.release(m)}else{if(h)for(const m of r)n.push(m);else n.splice(e,0,...r);this._set("length",n.length)}}if((r!=null&&r.length||a!=null&&a.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const l=new ZVe(this,r,a,e,i);this.emit("after-splice",l)}return a}_emitBeforeChanges(e){let i=!1;if(this.hasEventListener("before-changes")){const r=Fc.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),i=r.defaultPrevented,Fc.release(r)}return i}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const i=Fc.acquire();i.target=this,i.cancellable=!1,i.type=e,this.emit("after-changes",i),Fc.release(i)}this._observable.notify()}_notifyChangeEvent(e,i){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:i})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const i of e){const r=i.changes;hg.clear(),pg.clear(),fg.clear();for(const{added:c,removed:h}of r){if(c)if(fg.size===0&&pg.size===0)for(const m of c)hg.add(m);else for(const m of c)pg.has(m)?(fg.add(m),pg.delete(m)):fg.has(m)||hg.add(m);if(h)if(fg.size===0&&hg.size===0)for(const m of h)pg.add(m);else for(const m of h)hg.has(m)?hg.delete(m):(fg.delete(m),pg.add(m))}const n=Ra.acquire();hg.forEach(c=>{n.push(c)});const s=Ra.acquire();pg.forEach(c=>{s.push(c)});const o=this._items,a=i.items,l=Ra.acquire();if(fg.forEach(c=>{a.indexOf(c)!==o.indexOf(c)&&l.push(c)}),i.listeners&&(n.length||s.length||l.length)){const c={target:this,added:n,removed:s,moved:l},h=i.listeners.length;for(let m=0;m<h;m++){const y=i.listeners[m];y.removed||y.callback.call(this,c)}}Ra.release(n),Ra.release(s),Ra.release(l)}hg.clear(),pg.clear(),fg.clear()}},Zf=T_,T_.ofType=e=>{if(!e)return Zf;if(dB.has(e))return dB.get(e);let i=null;if(typeof e=="function")i=e.prototype.declaredClass;else if(e.base)i=e.base.prototype.declaredClass;else for(const n in e.typeMap){const s=e.typeMap[n].prototype.declaredClass;i?i+=` | ${s}`:i=s}let r=class extends Zf{};return u([UY({Type:e,ensureType:typeof e=="function"?hr(e):Gp(e)})],r.prototype,"itemType",void 0),r=u([U(`esri.core.Collection<${i}>`)],r),dB.set(e,r),r},T_);u([p()],ev.prototype,"_updating",void 0),u([p()],ev.prototype,"length",void 0),u([p()],ev.prototype,"items",null),u([p({readOnly:!0})],ev.prototype,"updating",null),ev=Zf=u([U("esri.core.Collection")],ev);const Ze=ev;let Jh=class extends Ze{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(ove(()=>this._refresh(),Bp))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new Ze(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};u([p()],Jh.prototype,"getCollections",void 0),u([p()],Jh.prototype,"getChildrenFunction",void 0),u([p()],Jh.prototype,"itemFilterFunction",void 0),Jh=u([U("esri.core.CollectionFlattener")],Jh);let kA=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new lC,this._items=new Set}get length(){return Lt(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Lt(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Lt(this._observable),yield*this._items}};const h0e=new FinalizationRegistry(t=>{t.close()});function KVe(t,e){h0e.register(t,e,e)}function QVe(t){h0e.unregister(t)}function p0e(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let o,a;const l=s[s.length-1];return eBe(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function eBe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const tBe={statsWorker:()=>$e(()=>import("./statsWorker-B6gj0rr-.js"),__vite__mapDeps([0,1,2,3])),geometryEngineWorker:()=>$e(()=>import("./geometryEngineWorker-nssR-Guw.js"),__vite__mapDeps([4,5,6,7,8])),arcadeGeometryOperatorsWorker:()=>$e(()=>import("./operatorsWorker-CLoEeWHX.js"),[]),CSVSourceWorker:()=>$e(()=>import("./CSVSourceWorker-CFmlUdg5.js"),__vite__mapDeps([9,10,8,11,12,13,14,15,16,17,18,19,20,1,2,3,21,22,23,24,25,26,27,28])),EdgeProcessingWorker:()=>$e(()=>import("./EdgeProcessingWorker-B3p4FNa8.js"),__vite__mapDeps([29,30,31,32,33,34,35,36,37,38,39,40])),ElevationSamplerWorker:()=>$e(()=>import("./ElevationSamplerWorker-Bf5ZZC87.js"),__vite__mapDeps([41,25,42,43,44,45,46,47,48,49,50,32,51])),FeatureServiceSnappingSourceWorker:()=>$e(()=>import("./FeatureServiceSnappingSourceWorker-DBh1ZT7M.js"),__vite__mapDeps([52,12,13,8,14,15,11,16,17,18,19,20,1,2,3,21,22,23,24,25,26,53,54,55,56,57])),GeoJSONSourceWorker:()=>$e(()=>import("./GeoJSONSourceWorker-Bqt9jFTS.js"),__vite__mapDeps([58,15,11,16,12,13,8,14,17,18,19,20,1,2,3,21,22,23,24,25,26,59,10,28,60])),LercWorker:()=>$e(()=>import("./LercWorker-CUV7kaqG.js"),[]),MemorySourceWorker:()=>$e(()=>import("./MemorySourceWorker-C3Q_u40H.js"),__vite__mapDeps([61,15,11,16,62,12,13,8,14,17,18,19,20,1,2,3,21,22,23,24,25,26,28,60,10])),PBFDecoderWorker:()=>$e(()=>import("./PBFDecoderWorker-BR5XT9cI.js"),__vite__mapDeps([63,64,15,11,16,54,55])),FeaturePipelineWorker:()=>$e(()=>import("./FeaturePipelineWorker-Clj3pqq_.js"),__vite__mapDeps([65,66,67,39,68,69,13,8,19,15,11,16,70,71,72,73,74,75,76,26,14,17,18,20,1,2,3,21,22,77,78,79,56,54,55,80,59,10,28,60,81,82,83])),PointCloudWorker:()=>$e(()=>import("./PointCloudWorker-CDstQUPp.js"),__vite__mapDeps([84,85,44,86,87,88,89,37,90,45,46,47,91,92])),RasterWorker:()=>$e(()=>import("./RasterWorker-BUKGMRj0.js"),__vite__mapDeps([93,94,95,96,7,97,98,99,100])),SceneLayerSnappingSourceWorker:()=>$e(()=>import("./SceneLayerSnappingSourceWorker-CgUmh-bb.js"),__vite__mapDeps([101,102,103,44,92,45,86,104,105,91,32,34,35,36,31,33,37,38,39,40])),SceneLayerWorker:()=>$e(()=>import("./SceneLayerWorker-B63xdVka.js"),__vite__mapDeps([106,42,50,107,48,103,44,92,45,86,108,89,37,109,110,111,112,113,90,85,46,47,91])),WFSSourceWorker:()=>$e(()=>import("./WFSSourceWorker-BxENYUh0.js"),__vite__mapDeps([114,15,11,16,12,13,8,14,17,18,19,20,1,2,3,21,22,23,24,25,26,59,10,60,115,116])),WorkerTileHandler:()=>$e(()=>import("./WorkerTileHandler-C6GfJK0V.js"),__vite__mapDeps([117,118,119,120,55,74,121,122,39,75])),Lyr3DWorker:()=>$e(()=>import("./Lyr3DWorker-CAyX7UWv.js"),[]),Feature3DPipelineWorker:()=>$e(()=>import("./Feature3DPipelineWorker-CnbacfJO.js"),__vite__mapDeps([123,14,15,11,16,17,18,19,13,8,20,1,2,3,21,22,45,124,111,49,42,107,48,125,87,126,127,128,129,130,32,36,131,103,44,92,86,102,37,113,112,132,133,91,105,134,90,85,46,47,135,136,137,31,33,138,139,110,25,56,54,55])),TextureCompressionWorker:()=>$e(()=>import("./TextureCompressionWorker-DRyDXkSo.js"),__vite__mapDeps([140,130]))},f0e="worker:port-closed";var ro;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(ro||(ro={}));let iBe=0;function m0e(){return iBe++}function rBe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function AA(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function _X(t,e,i,r){if(e.type===ro.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==ro.INVOKE&&e.type!==ro.RESPONSE)return void t.postMessage(e);let n;if(rBe(i)?(n=eoe(i.transferList),e.data=i.result):(n=eoe(r),e.data=i),n){if(ve("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case ro.INVOKE:throw o;case ro.RESPONSE:return void _X(t,{type:ro.RESPONSE,jobId:e.jobId,error:AA(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function OA(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function eoe(t){if(!(t!=null&&t.length))return null;if(ve("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!nBe(i));return e.length?e:null}function nBe(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}async function OIt(t){try{return await t}catch(e){const i=(e==null?void 0:e.name)===f0e;if(!(ds(e)||i))throw e;return}}const{CLOSE:toe,ABORT:ioe,INVOKE:roe,RESPONSE:FI,OPEN_PORT:noe,ON:sBe}=ro,oBe=2;let aBe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===ro.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var au;let RE=(au=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new au(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),au.clients.set(s,n),r.port2}static loadWorker(e){const i=tBe[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new aBe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:toe}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new Q(f0e,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=m0e();return new Promise((a,l)=>{if(xc(n))return this._processWork(),void l(Gi());const c=no(n,()=>{const m=this._outJobs.get(o);m&&(this._outJobs.delete(o),this._processWork(),rn(m.abortHandle),this._post({type:ioe,jobId:o}),l(Gi()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,h),this._post({type:roe,jobId:o,methodName:e,abortable:n!=null},i,s)})}createInvokeProxy(e){return p0e(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:ro.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Mi(()=>{r.port1.postMessage({type:ro.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:noe,port:e.port2}),e.port1}_processWork(){var o,a;if(this._outJobs.size>=oBe)return;const e=((o=this._jobQueue)==null?void 0:o.pop())??((a=this._lowPriorityJobQueue)==null?void 0:a.pop());if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then(l=>s.resolve(l)).catch(l=>s.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{rn(e.abortHandle),e.reject(Gi(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=OA(e);if(r)switch(r.type){case FI:this._onResponseMessage(r);break;case roe:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case ioe:this._onAbortMessage(r);break;case toe:this._onCloseMessage();break;case noe:this._onOpenPortMessage(r);break;case sBe:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&au.clients.get(this)===e&&e.destroy(),au.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const m=i.split(".");for(let y=0;y<m.length-1;y++)c=c[m[y]],h=c[m[y+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=h.apply(c,n)}catch(m){return void this._post({type:FI,jobId:r,error:AA(m)})}nf(l)?(a.set(r,{controller:o,promise:l}),l.then(m=>{a.has(r)&&(a.delete(r),this._post({type:FI,jobId:r},m))},m=>{a.has(r)&&(a.delete(r),ds(m)||this._post({type:FI,jobId:r,error:AA(m||{message:`Error encountered at method ${i}`})}))})):this._post({type:FI,jobId:r},l)}_onOpenPortMessage(e){new au(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=oy(e.port,"message",s=>{const o=OA(s);(o==null?void 0:o.type)===ro.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),rn(o.abortHandle),r?o.reject(Q.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return _X(this._port,e,i,r)}},au.kernelInfo={buildDate:obe,fullVersion:iX,revision:abe},au.clients=new Map,au),lBe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new kA,this._ongoingLowPriorityJobsQueue=new kA}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((r,n)=>{let s=!0;const o=a=>{sr(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];nf(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new RE(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new RE(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Gi(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Gi(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,QVe(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=Mo();((r==null?void 0:r.priority)==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a==null?void 0:a.jobAdded())}return n.promise}createInvokeProxy(e){return p0e(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>w1(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)})})}get test(){}};const cBe={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=CH(t.url))!=null&&o.after)?r:"array-buffer";const n=await Ot(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let hk;var Wfe,Jfe;const uBe=((Wfe=globalThis.esriConfig)==null?void 0:Wfe.locale)??((Jfe=globalThis.dojoConfig)==null?void 0:Jfe.locale);var Zfe;const pk=(Zfe=globalThis.document)==null?void 0:Zfe.documentElement;function y0e(){var i;const t=pk==null?void 0:pk.getAttribute("lang"),e=(i=globalThis.navigator)==null?void 0:i.language;return uBe??t??e??"en"}function Tl(){return hk===void 0&&(hk=y0e()),hk}const dBe=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function r4(t=Tl()){var e;return(e=v0e(t))==null?void 0:e.language}function g0e(t=Tl()){const e=v0e(t);return e!=null&&e.language&&(e!=null&&e.extlang)?t.replace(`${e.language}-`,""):t}function v0e(t=Tl()){var e;return(e=dBe.exec(t))==null?void 0:e.groups}const Z3=[];function WO(t){return Z3.push(t),Mi(()=>{Z3.splice(Z3.indexOf(t),1)})}const Y3=[];function xX(t){return Y3.push(t),Mi(()=>Y3.splice(Y3.indexOf(t),1))}function soe(){const t=y0e();hk!==t&&([...Y3].forEach(e=>e(t)),hk=t,[...Z3].forEach(e=>e(t)))}var Yfe;(Yfe=globalThis.addEventListener)==null||Yfe.call(globalThis,"languagechange",soe),pk&&new MutationObserver(()=>{soe()}).observe(pk,{attributeFilter:["lang"]});const _u="system",yb="unknown",Jp="UTC",hBe=Intl.DateTimeFormat().resolvedOptions().timeZone,ooe=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class E1 extends Error{}class pBe extends E1{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class fBe extends E1{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class mBe extends E1{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class g$ extends E1{}class b0e extends E1{constructor(e){super(`Invalid unit ${e}`)}}class Qo extends E1{}class mg extends E1{constructor(){super("Zone is an abstract class")}}const ut="numeric",Vd="short",_c="long",qz={year:ut,month:ut,day:ut},w0e={year:ut,month:Vd,day:ut},yBe={year:ut,month:Vd,day:ut,weekday:Vd},_0e={year:ut,month:_c,day:ut},x0e={year:ut,month:_c,day:ut,weekday:_c},S0e={hour:ut,minute:ut},$0e={hour:ut,minute:ut,second:ut},T0e={hour:ut,minute:ut,second:ut,timeZoneName:Vd},E0e={hour:ut,minute:ut,second:ut,timeZoneName:_c},C0e={hour:ut,minute:ut,hourCycle:"h23"},I0e={hour:ut,minute:ut,second:ut,hourCycle:"h23"},M0e={hour:ut,minute:ut,second:ut,hourCycle:"h23",timeZoneName:Vd},k0e={hour:ut,minute:ut,second:ut,hourCycle:"h23",timeZoneName:_c},A0e={year:ut,month:ut,day:ut,hour:ut,minute:ut},O0e={year:ut,month:ut,day:ut,hour:ut,minute:ut,second:ut},P0e={year:ut,month:Vd,day:ut,hour:ut,minute:ut},L0e={year:ut,month:Vd,day:ut,hour:ut,minute:ut,second:ut},gBe={year:ut,month:Vd,day:ut,weekday:Vd,hour:ut,minute:ut},R0e={year:ut,month:_c,day:ut,hour:ut,minute:ut,timeZoneName:Vd},D0e={year:ut,month:_c,day:ut,hour:ut,minute:ut,second:ut,timeZoneName:Vd},N0e={year:ut,month:_c,day:ut,weekday:_c,hour:ut,minute:ut,timeZoneName:_c},z0e={year:ut,month:_c,day:ut,weekday:_c,hour:ut,minute:ut,second:ut,timeZoneName:_c};class C1{get type(){throw new mg}get name(){throw new mg}get ianaName(){return this.name}get isUniversal(){throw new mg}offsetName(e,i){throw new mg}formatOffset(e,i){throw new mg}offset(e){throw new mg}equals(e){throw new mg}get isValid(){throw new mg}}let hB=null;class n4 extends C1{static get instance(){return hB===null&&(hB=new n4),hB}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Z0e(e,i,r)}formatOffset(e,i){return fk(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const KH=new Map;function vBe(t){let e=KH.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),KH.set(t,e)),e}const bBe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function wBe(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,c,h]=r;return[o,n,s,a,l,c,h]}function _Be(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=bBe[s];s==="era"?r[a]=o:ci(a)||(r[a]=parseInt(o,10))}return r}const pB=new Map;class Cl extends C1{static create(e){let i=pB.get(e);return i===void 0&&pB.set(e,i=new Cl(e)),i}static resetCache(){pB.clear(),KH.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Cl.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Z0e(e,i,r,this.name)}formatOffset(e,i){return fk(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=vBe(this.name);let[n,s,o,a,l,c,h]=r.formatToParts?_Be(r,i):wBe(r,i);a==="BC"&&(n=-Math.abs(n)+1);const y=o4({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let v=+i;const w=v%1e3;return v-=w>=0?w:1e3+w,(y-v)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let aoe={};function xBe(t,e={}){const i=JSON.stringify([t,e]);let r=aoe[i];return r||(r=new Intl.ListFormat(t,e),aoe[i]=r),r}const QH=new Map;function e9(t,e={}){const i=JSON.stringify([t,e]);let r=QH.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),QH.set(i,r)),r}const t9=new Map;function SBe(t,e={}){const i=JSON.stringify([t,e]);let r=t9.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),t9.set(i,r)),r}const i9=new Map;function $Be(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=i9.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),i9.set(n,s)),s}let UM=null;function TBe(){return UM||(UM=new Intl.DateTimeFormat().resolvedOptions().locale,UM)}const r9=new Map;function F0e(t){let e=r9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),r9.set(t,e)),e}const n9=new Map;function EBe(t){let e=n9.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...U0e,...e}),n9.set(t,e)}return e}function CBe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=e9(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=e9(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function IBe(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function MBe(t){const e=[];for(let i=1;i<=12;i++){const r=pt.utc(2009,i,1);e.push(t(r))}return e}function kBe(t){const e=[];for(let i=1;i<=7;i++){const r=pt.utc(2016,11,13+i);e.push(t(r))}return e}function iR(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function ABe(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||F0e(t.locale).numberingSystem==="latn"}class OBe{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=SBe(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):CX(e,3);return vs(i,this.padTo)}}}class PBe{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Cl.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=e9(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class LBe{constructor(e,i,r){this.opts={style:"long",...r},!i&&W0e()&&(this.rtf=$Be(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):i8e(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const U0e={firstDay:1,minimalDays:4,weekend:[6,7]};class nr{static fromOpts(e){return nr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||Vn.defaultLocale,a=o||(s?"en-US":TBe()),l=i||Vn.defaultNumberingSystem,c=r||Vn.defaultOutputCalendar,h=o9(n)||Vn.defaultWeekSettings;return new nr(a,l,c,h,o)}static resetCache(){UM=null,QH.clear(),t9.clear(),i9.clear(),r9.clear(),n9.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return nr.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,a,l]=CBe(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=IBe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ABe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:nr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,o9(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return iR(this,e,K0e,()=>{const r=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=MBe(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return iR(this,e,twe,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=kBe(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return iR(this,void 0,()=>iwe,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[pt.utc(2016,11,13,9),pt.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return iR(this,e,rwe,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[pt.utc(-40,1,1),pt.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new OBe(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new PBe(e,this.intl,i)}relFormatter(e={}){return new LBe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return xBe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||F0e(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:J0e()?EBe(this.locale):U0e}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let fB=null;class ws extends C1{static get utcInstance(){return fB===null&&(fB=new ws(0)),fB}static instance(e){return e===0?ws.utcInstance:new ws(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new ws(a4(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${fk(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${fk(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return fk(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class RBe extends C1{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function fv(t,e){if(ci(t)||t===null)return e;if(t instanceof C1)return t;if(jBe(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?n4.instance:i==="utc"||i==="gmt"?ws.utcInstance:ws.parseSpecifier(i)||Cl.create(t)}else return jv(t)?ws.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new RBe(t)}const SX={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},loe={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},DBe=SX.hanidec.replace(/[\[|\]]/g,"").split("");function NBe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(SX.hanidec)!==-1)e+=DBe.indexOf(t[i]);else for(const n in loe){const[s,o]=loe[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const s9=new Map;function zBe(){s9.clear()}function Vu({numberingSystem:t},e=""){const i=t||"latn";let r=s9.get(i);r===void 0&&(r=new Map,s9.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${SX[i]}${e}`),r.set(e,n)),n}let coe=()=>Date.now(),uoe="system",doe=null,hoe=null,poe=null,foe=60,moe,yoe=null;class Vn{static get now(){return coe}static set now(e){coe=e}static set defaultZone(e){uoe=e}static get defaultZone(){return fv(uoe,n4.instance)}static get defaultLocale(){return doe}static set defaultLocale(e){doe=e}static get defaultNumberingSystem(){return hoe}static set defaultNumberingSystem(e){hoe=e}static get defaultOutputCalendar(){return poe}static set defaultOutputCalendar(e){poe=e}static get defaultWeekSettings(){return yoe}static set defaultWeekSettings(e){yoe=o9(e)}static get twoDigitCutoffYear(){return foe}static set twoDigitCutoffYear(e){foe=e%100}static get throwOnInvalid(){return moe}static set throwOnInvalid(e){moe=e}static resetCaches(){nr.resetCache(),Cl.resetCache(),pt.resetCache(),zBe()}}class Pd{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const j0e=[0,31,59,90,120,151,181,212,243,273,304,334],V0e=[0,31,60,91,121,152,182,213,244,274,305,335];function mu(t,e){return new Pd("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function $X(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function B0e(t,e,i){return i+(JO(t)?V0e:j0e)[e-1]}function G0e(t,e){const i=JO(t)?V0e:j0e,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function TX(t,e){return(t-e+7)%7+1}function Wz(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=B0e(r,n,s),a=TX($X(r,n,s),i);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=PA(c,e,i)):l>PA(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...l4(t)}}function goe(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=TX($X(r,1,e),i),a=F$(r);let l=n*7+s-o-7+e,c;l<1?(c=r-1,l+=F$(c)):l>a?(c=r+1,l-=F$(r)):c=r;const{month:h,day:m}=G0e(c,l);return{year:c,month:h,day:m,...l4(t)}}function mB(t){const{year:e,month:i,day:r}=t,n=B0e(e,i,r);return{year:e,ordinal:n,...l4(t)}}function voe(t){const{year:e,ordinal:i}=t,{month:r,day:n}=G0e(e,i);return{year:e,month:r,day:n,...l4(t)}}function boe(t,e){if(!ci(t.localWeekday)||!ci(t.localWeekNumber)||!ci(t.localWeekYear)){if(!ci(t.weekday)||!ci(t.weekNumber)||!ci(t.weekYear))throw new g$("Cannot mix locale-based week fields with ISO-based week fields");return ci(t.localWeekday)||(t.weekday=t.localWeekday),ci(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),ci(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function FBe(t,e=4,i=1){const r=s4(t.weekYear),n=yu(t.weekNumber,1,PA(t.weekYear,e,i)),s=yu(t.weekday,1,7);return r?n?s?!1:mu("weekday",t.weekday):mu("week",t.weekNumber):mu("weekYear",t.weekYear)}function UBe(t){const e=s4(t.year),i=yu(t.ordinal,1,F$(t.year));return e?i?!1:mu("ordinal",t.ordinal):mu("year",t.year)}function H0e(t){const e=s4(t.year),i=yu(t.month,1,12),r=yu(t.day,1,Jz(t.year,t.month));return e?i?r?!1:mu("day",t.day):mu("month",t.month):mu("year",t.year)}function q0e(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=yu(e,0,23)||e===24&&i===0&&r===0&&n===0,o=yu(i,0,59),a=yu(r,0,59),l=yu(n,0,999);return s?o?a?l?!1:mu("millisecond",n):mu("second",r):mu("minute",i):mu("hour",e)}function ci(t){return typeof t>"u"}function jv(t){return typeof t=="number"}function s4(t){return typeof t=="number"&&t%1===0}function jBe(t){return typeof t=="string"}function VBe(t){return Object.prototype.toString.call(t)==="[object Date]"}function W0e(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function J0e(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function BBe(t){return Array.isArray(t)?t:[t]}function woe(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function GBe(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function DE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o9(t){if(t==null)return null;if(typeof t!="object")throw new Qo("Week settings must be an object");if(!yu(t.firstDay,1,7)||!yu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!yu(e,1,7)))throw new Qo("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function yu(t,e,i){return s4(t)&&t>=e&&t<=i}function HBe(t,e){return t-e*Math.floor(t/e)}function vs(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function tv(t){if(!(ci(t)||t===null||t===""))return parseInt(t,10)}function b0(t){if(!(ci(t)||t===null||t===""))return parseFloat(t)}function EX(t){if(!(ci(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function CX(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function JO(t){return t%4===0&&(t%100!==0||t%400===0)}function F$(t){return JO(t)?366:365}function Jz(t,e){const i=HBe(e-1,12)+1,r=t+(e-i)/12;return i===2?JO(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function o4(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function _oe(t,e,i){return-TX($X(t,1,e),i)+e-1}function PA(t,e=4,i=1){const r=_oe(t,e,i),n=_oe(t+1,e,i);return(F$(t)-r+n)/7}function a9(t){return t>99?t:t>Vn.twoDigitCutoffYear?1900+t:2e3+t}function Z0e(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function a4(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function Y0e(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Qo(`Invalid unit value ${t}`);return e}function Zz(t,e){const i={};for(const r in t)if(DE(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=Y0e(n)}return i}function fk(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${vs(i,2)}:${vs(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${vs(i,2)}${vs(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function l4(t){return GBe(t,["hour","minute","second","millisecond"])}const qBe=["January","February","March","April","May","June","July","August","September","October","November","December"],X0e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WBe=["J","F","M","A","M","J","J","A","S","O","N","D"];function K0e(t){switch(t){case"narrow":return[...WBe];case"short":return[...X0e];case"long":return[...qBe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Q0e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ewe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],JBe=["M","T","W","T","F","S","S"];function twe(t){switch(t){case"narrow":return[...JBe];case"short":return[...ewe];case"long":return[...Q0e];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const iwe=["AM","PM"],ZBe=["Before Christ","Anno Domini"],YBe=["BC","AD"],XBe=["B","A"];function rwe(t){switch(t){case"narrow":return[...XBe];case"short":return[...YBe];case"long":return[...ZBe];default:return null}}function KBe(t){return iwe[t.hour<12?0:1]}function QBe(t,e){return twe(e)[t.weekday-1]}function e8e(t,e){return K0e(e)[t.month-1]}function t8e(t,e){return rwe(e)[t.year<0?0:1]}function i8e(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const m=t==="days";switch(e){case 1:return m?"tomorrow":`next ${n[t][0]}`;case-1:return m?"yesterday":`last ${n[t][0]}`;case 0:return m?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=n[t],h=r?l?c[1]:c[2]||c[1]:l?n[t][0]:t;return o?`${a} ${h} ago`:`in ${a} ${h}`}function xoe(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const r8e={D:qz,DD:w0e,DDD:_0e,DDDD:x0e,t:S0e,tt:$0e,ttt:T0e,tttt:E0e,T:C0e,TT:I0e,TTT:M0e,TTTT:k0e,f:A0e,ff:P0e,fff:R0e,ffff:N0e,F:O0e,FF:L0e,FFF:D0e,FFFF:z0e};class sa{static create(e,i={}){return new sa(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return r8e[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return vs(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(v,w)=>this.loc.extract(e,v,w),o=v=>e.isOffsetFixed&&e.offset===0&&v.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,v.format):"",a=()=>r?KBe(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(v,w)=>r?e8e(e,v):s(w?{month:v}:{month:v,day:"numeric"},"month"),c=(v,w)=>r?QBe(e,v):s(w?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),h=v=>{const w=sa.macroTokenToFormatOpts(v);return w?this.formatWithSystemDefault(e,w):v},m=v=>r?t8e(e,v):s({era:v},"era"),y=v=>{switch(v){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return m("short");case"GG":return m("long");case"GGGGG":return m("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(v)}};return xoe(sa.parseFormat(i),y)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=r(c);return h?this.num(l.get(h),c.length):c},s=sa.parseFormat(i),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return xoe(s,n(a))}}const nwe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function gC(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function vC(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,l]=s(e,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function bC(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function swe(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=tv(e[i+n]);return[r,null,i+n]}}const owe=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,n8e=`(?:${owe.source}?(?:\\[(${nwe.source})\\])?)?`,IX=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,awe=RegExp(`${IX.source}${n8e}`),MX=RegExp(`(?:T${awe.source})?`),s8e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,o8e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,a8e=/(\d{4})-?(\d{3})/,l8e=swe("weekYear","weekNumber","weekDay"),c8e=swe("year","ordinal"),u8e=/(\d{4})-(\d\d)-(\d\d)/,lwe=RegExp(`${IX.source} ?(?:${owe.source}|(${nwe.source}))?`),d8e=RegExp(`(?: ${lwe.source})?`);function U$(t,e,i){const r=t[e];return ci(r)?i:tv(r)}function h8e(t,e){return[{year:U$(t,e),month:U$(t,e+1,1),day:U$(t,e+2,1)},null,e+3]}function wC(t,e){return[{hours:U$(t,e,0),minutes:U$(t,e+1,0),seconds:U$(t,e+2,0),milliseconds:EX(t[e+3])},null,e+4]}function ZO(t,e){const i=!t[e]&&!t[e+1],r=a4(t[e+1],t[e+2]),n=i?null:ws.instance(r);return[{},n,e+3]}function YO(t,e){const i=t[e]?Cl.create(t[e]):null;return[{},i,e+1]}const p8e=RegExp(`^T?${IX.source}$`),f8e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function m8e(t){const[e,i,r,n,s,o,a,l,c]=t,h=e[0]==="-",m=l&&l[0]==="-",y=(v,w=!1)=>v!==void 0&&(w||v&&h)?-v:v;return[{years:y(b0(i)),months:y(b0(r)),weeks:y(b0(n)),days:y(b0(s)),hours:y(b0(o)),minutes:y(b0(a)),seconds:y(b0(l),l==="-0"),milliseconds:y(EX(c),m)}]}const y8e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function kX(t,e,i,r,n,s,o){const a={year:e.length===2?a9(tv(e)):tv(e),month:X0e.indexOf(i)+1,day:tv(r),hour:tv(n),minute:tv(s)};return o&&(a.second=tv(o)),t&&(a.weekday=t.length>3?Q0e.indexOf(t)+1:ewe.indexOf(t)+1),a}const g8e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function v8e(t){const[,e,i,r,n,s,o,a,l,c,h,m]=t,y=kX(e,n,r,i,s,o,a);let v;return l?v=y8e[l]:c?v=0:v=a4(h,m),[y,new ws(v)]}function b8e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const w8e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,_8e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,x8e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Soe(t){const[,e,i,r,n,s,o,a]=t;return[kX(e,n,r,i,s,o,a),ws.utcInstance]}function S8e(t){const[,e,i,r,n,s,o,a]=t;return[kX(e,a,i,r,n,s,o),ws.utcInstance]}const $8e=gC(s8e,MX),T8e=gC(o8e,MX),E8e=gC(a8e,MX),C8e=gC(awe),cwe=vC(h8e,wC,ZO,YO),I8e=vC(l8e,wC,ZO,YO),M8e=vC(c8e,wC,ZO,YO),k8e=vC(wC,ZO,YO);function A8e(t){return bC(t,[$8e,cwe],[T8e,I8e],[E8e,M8e],[C8e,k8e])}function O8e(t){return bC(b8e(t),[g8e,v8e])}function P8e(t){return bC(t,[w8e,Soe],[_8e,Soe],[x8e,S8e])}function L8e(t){return bC(t,[f8e,m8e])}const R8e=vC(wC);function D8e(t){return bC(t,[p8e,R8e])}const N8e=gC(u8e,d8e),z8e=gC(lwe),F8e=vC(wC,ZO,YO);function U8e(t){return bC(t,[N8e,cwe],[z8e,F8e])}const $oe="Invalid Duration",uwe={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},j8e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...uwe},Uc=146097/400,Mx=146097/4800,V8e={years:{quarters:4,months:12,weeks:Uc/7,days:Uc,hours:Uc*24,minutes:Uc*24*60,seconds:Uc*24*60*60,milliseconds:Uc*24*60*60*1e3},quarters:{months:3,weeks:Uc/28,days:Uc/4,hours:Uc*24/4,minutes:Uc*24*60/4,seconds:Uc*24*60*60/4,milliseconds:Uc*24*60*60*1e3/4},months:{weeks:Mx/7,days:Mx,hours:Mx*24,minutes:Mx*24*60,seconds:Mx*24*60*60,milliseconds:Mx*24*60*60*1e3},...uwe},Gw=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],B8e=Gw.slice(0).reverse();function yg(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new zi(r)}function dwe(t,e){let i=e.milliseconds??0;for(const r of B8e.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function Toe(t,e){const i=dwe(t,e)<0?-1:1;Gw.reduceRight((r,n)=>{if(ci(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],a=Math.floor(s/o);e[n]+=a*i,e[r]-=a*o*i}return n},null),Gw.reduce((r,n)=>{if(ci(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function G8e(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class zi{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?V8e:j8e;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||nr.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return zi.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Qo(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new zi({values:Zz(e,zi.normalizeUnit),loc:nr.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(jv(e))return zi.fromMillis(e);if(zi.isDuration(e))return e;if(typeof e=="object")return zi.fromObject(e);throw new Qo(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=L8e(e);return r?zi.fromObject(r,i):zi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=D8e(e);return r?zi.fromObject(r,i):zi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Qo("need to specify a reason the Duration is invalid");const r=e instanceof Pd?e:new Pd(e,i);if(Vn.throwOnInvalid)throw new mBe(r);return new zi({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new b0e(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?sa.create(this.loc,r).formatDurationFromString(this,e):$oe}toHuman(e={}){if(!this.isValid)return $oe;const i=Gw.map(r=>{const n=this.values[r];return ci(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=CX(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},pt.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?dwe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=zi.fromDurationLike(e),r={};for(const n of Gw)(DE(i.values,n)||DE(this.values,n))&&(r[n]=i.get(n)+this.get(n));return yg(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=zi.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Y0e(e(this.values[r],r));return yg(this,{values:i},!0)}get(e){return this[zi.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...Zz(e,zi.normalizeUnit)};return yg(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return yg(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Toe(this.matrix,e),yg(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=G8e(this.normalize().shiftToAll().toObject());return yg(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>zi.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of Gw)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;jv(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else jv(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Toe(this.matrix,i),yg(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return yg(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Gw)if(!i(this.values[r],e.values[r]))return!1;return!0}}const kx="Invalid Interval";function H8e(t,e){return!t||!t.isValid?Fn.invalid("missing or invalid start"):!e||!e.isValid?Fn.invalid("missing or invalid end"):e<t?Fn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Fn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Qo("need to specify a reason the Interval is invalid");const r=e instanceof Pd?e:new Pd(e,i);if(Vn.throwOnInvalid)throw new fBe(r);return new Fn({invalid:r})}static fromDateTimes(e,i){const r=UI(e),n=UI(i),s=H8e(r,n);return s??new Fn({start:r,end:n})}static after(e,i){const r=zi.fromDurationLike(i),n=UI(e);return Fn.fromDateTimes(n,n.plus(r))}static before(e,i){const r=zi.fromDurationLike(i),n=UI(e);return Fn.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=pt.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=pt.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return Fn.fromDateTimes(s,a);if(o){const c=zi.fromISO(n,i);if(c.isValid)return Fn.after(s,c)}else if(l){const c=zi.fromISO(r,i);if(c.isValid)return Fn.before(a,c)}}return Fn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Fn.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(UI).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(Fn.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=zi.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Fn.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Fn.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Fn.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(Fn.fromDateTimes(i,l.time)),i=null);return Fn.merge(n)}difference(...e){return Fn.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:kx}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=qz,i={}){return this.isValid?sa.create(this.s.loc.clone(i),e).formatInterval(this):kx}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:kx}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:kx}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:kx}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:kx}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):zi.invalid(this.invalidReason)}mapEndpoints(e){return Fn.fromDateTimes(e(this.s),e(this.e))}}class rR{static hasDST(e=Vn.defaultZone){const i=pt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Cl.isValidZone(e)}static normalizeZone(e){return fv(e,Vn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||nr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||nr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||nr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||nr.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||nr.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||nr.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||nr.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return nr.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return nr.create(i,null,"gregory").eras(e)}static features(){return{relative:W0e(),localeWeek:J0e()}}}function Eoe(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(zi.fromMillis(r).as("days"))}function q8e(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=Eoe(l,c);return(h-h%7)/7}],["days",Eoe]],n={},s=t;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,n[l]=c(t,e),a=s.plus(n),a>e?(n[l]--,t=s.plus(n),t>e&&(a=t,n[l]--,t=s.plus(n))):t=a);return[t,n,a,o]}function W8e(t,e,i,r){let[n,s,o,a]=q8e(t,e,i);const l=e-n,c=i.filter(m=>["hours","minutes","seconds","milliseconds"].indexOf(m)>=0);c.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=zi.fromObject(s,r);return c.length>0?zi.fromMillis(l,r).shiftTo(...c).plus(h):h}const J8e="missing Intl.DateTimeFormat.formatToParts support";function Ji(t,e=i=>i){return{regex:t,deser:([i])=>e(NBe(i))}}const Z8e="",hwe=`[ ${Z8e}]`,pwe=new RegExp(hwe,"g");function Y8e(t){return t.replace(/\./g,"\\.?").replace(pwe,hwe)}function Coe(t){return t.replace(/\./g,"").replace(pwe," ").toLowerCase()}function Bu(t,e){return t===null?null:{regex:RegExp(t.map(Y8e).join("|")),deser:([i])=>t.findIndex(r=>Coe(i)===Coe(r))+e}}function Ioe(t,e){return{regex:t,deser:([,i,r])=>a4(i,r),groups:e}}function nR(t){return{regex:t,deser:([e])=>e}}function X8e(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function K8e(t,e){const i=Vu(e),r=Vu(e,"{2}"),n=Vu(e,"{3}"),s=Vu(e,"{4}"),o=Vu(e,"{6}"),a=Vu(e,"{1,2}"),l=Vu(e,"{1,3}"),c=Vu(e,"{1,6}"),h=Vu(e,"{1,9}"),m=Vu(e,"{2,4}"),y=Vu(e,"{4,6}"),v=S=>({regex:RegExp(X8e(S.val)),deser:([C])=>C,literal:!0}),x=(S=>{if(t.literal)return v(S);switch(S.val){case"G":return Bu(e.eras("short"),0);case"GG":return Bu(e.eras("long"),0);case"y":return Ji(c);case"yy":return Ji(m,a9);case"yyyy":return Ji(s);case"yyyyy":return Ji(y);case"yyyyyy":return Ji(o);case"M":return Ji(a);case"MM":return Ji(r);case"MMM":return Bu(e.months("short",!0),1);case"MMMM":return Bu(e.months("long",!0),1);case"L":return Ji(a);case"LL":return Ji(r);case"LLL":return Bu(e.months("short",!1),1);case"LLLL":return Bu(e.months("long",!1),1);case"d":return Ji(a);case"dd":return Ji(r);case"o":return Ji(l);case"ooo":return Ji(n);case"HH":return Ji(r);case"H":return Ji(a);case"hh":return Ji(r);case"h":return Ji(a);case"mm":return Ji(r);case"m":return Ji(a);case"q":return Ji(a);case"qq":return Ji(r);case"s":return Ji(a);case"ss":return Ji(r);case"S":return Ji(l);case"SSS":return Ji(n);case"u":return nR(h);case"uu":return nR(a);case"uuu":return Ji(i);case"a":return Bu(e.meridiems(),0);case"kkkk":return Ji(s);case"kk":return Ji(m,a9);case"W":return Ji(a);case"WW":return Ji(r);case"E":case"c":return Ji(i);case"EEE":return Bu(e.weekdays("short",!1),1);case"EEEE":return Bu(e.weekdays("long",!1),1);case"ccc":return Bu(e.weekdays("short",!0),1);case"cccc":return Bu(e.weekdays("long",!0),1);case"Z":case"ZZ":return Ioe(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Ioe(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return nR(/[a-z_+-/]{1,256}?/i);case" ":return nR(/[^\S\n\r]/);default:return v(S)}})(t)||{invalidReason:J8e};return x.token=t,x}const Q8e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function eGe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=Q8e[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function tGe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function iGe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(DE(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function rGe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return ci(t.z)||(i=Cl.create(t.z)),ci(t.Z)||(i||(i=new ws(t.Z)),r=t.Z),ci(t.q)||(t.M=(t.q-1)*3+1),ci(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ci(t.u)||(t.S=EX(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let yB=null;function nGe(){return yB||(yB=pt.fromMillis(1555555555555)),yB}function sGe(t,e){if(t.literal)return t;const i=sa.macroTokenToFormatOpts(t.val),r=gwe(i,e);return r==null||r.includes(void 0)?t:r}function fwe(t,e){return Array.prototype.concat(...t.map(i=>sGe(i,e)))}class mwe{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=fwe(sa.parseFormat(i),e),this.units=this.tokens.map(r=>K8e(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=tGe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=iGe(e,this.regex,this.handlers),[n,s,o]=r?rGe(r):[null,null,void 0];if(DE(r,"a")&&DE(r,"H"))throw new g$("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ywe(t,e,i){return new mwe(t,i).explainFromTokens(e)}function oGe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=ywe(t,e,i);return[r,n,s,o]}function gwe(t,e){if(!t)return null;const r=sa.create(e,t).dtFormatter(nGe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>eGe(o,t,s))}const gB="Invalid DateTime",Moe=864e13;function jM(t){return new Pd("unsupported zone",`the zone "${t.name}" is not supported`)}function vB(t){return t.weekData===null&&(t.weekData=Wz(t.c)),t.weekData}function bB(t){return t.localWeekData===null&&(t.localWeekData=Wz(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function w0(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new pt({...i,...e,old:i})}function vwe(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function sR(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function X3(t,e,i){return vwe(o4(t),e,i)}function koe(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,Jz(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=zi.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=o4(s);let[l,c]=vwe(a,i,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function Ax(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=pt.fromObject(t,{...i,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return pt.invalid(new Pd("unparsable",`the input "${n}" can't be parsed as ${r}`))}function oR(t,e,i=!0){return t.isValid?sa.create(nr.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function wB(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=vs(t.c.year,i?6:4),e?(r+="-",r+=vs(t.c.month),r+="-",r+=vs(t.c.day)):(r+=vs(t.c.month),r+=vs(t.c.day)),r}function Aoe(t,e,i,r,n,s){let o=vs(t.c.hour);return e?(o+=":",o+=vs(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=vs(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=vs(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=vs(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=vs(Math.trunc(-t.o/60)),o+=":",o+=vs(Math.trunc(-t.o%60))):(o+="+",o+=vs(Math.trunc(t.o/60)),o+=":",o+=vs(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const bwe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},aGe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},lGe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},wwe=["year","month","day","hour","minute","second","millisecond"],cGe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],uGe=["year","ordinal","hour","minute","second","millisecond"];function dGe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new b0e(t);return e}function Ooe(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return dGe(t)}}function hGe(t){if(VM===void 0&&(VM=Vn.now()),t.type!=="iana")return t.offset(VM);const e=t.name;let i=l9.get(e);return i===void 0&&(i=t.offset(VM),l9.set(e,i)),i}function Poe(t,e){const i=fv(e.zone,Vn.defaultZone);if(!i.isValid)return pt.invalid(jM(i));const r=nr.fromObject(e);let n,s;if(ci(t.year))n=Vn.now();else{for(const l of wwe)ci(t[l])&&(t[l]=bwe[l]);const o=H0e(t)||q0e(t);if(o)return pt.invalid(o);const a=hGe(i);[n,s]=X3(t,a,i)}return new pt({ts:n,zone:i,loc:r,o:s})}function Loe(t,e,i){const r=ci(i.round)?!0:i.round,n=(o,a)=>(o=CX(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function Roe(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let VM;const l9=new Map;class pt{constructor(e){const i=e.zone||Vn.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Pd("invalid input"):null)||(i.isValid?null:jM(i));this.ts=ci(e.ts)?Vn.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=jv(e.o)&&!e.old?e.o:i.offset(this.ts);n=sR(this.ts,a),r=Number.isNaN(n.year)?new Pd("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||nr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new pt({})}static local(){const[e,i]=Roe(arguments),[r,n,s,o,a,l,c]=i;return Poe({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,i]=Roe(arguments),[r,n,s,o,a,l,c]=i;return e.zone=ws.utcInstance,Poe({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=VBe(e)?e.valueOf():NaN;if(Number.isNaN(r))return pt.invalid("invalid input");const n=fv(i.zone,Vn.defaultZone);return n.isValid?new pt({ts:r,zone:n,loc:nr.fromObject(i)}):pt.invalid(jM(n))}static fromMillis(e,i={}){if(jv(e))return e<-Moe||e>Moe?pt.invalid("Timestamp out of range"):new pt({ts:e,zone:fv(i.zone,Vn.defaultZone),loc:nr.fromObject(i)});throw new Qo(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(jv(e))return new pt({ts:e*1e3,zone:fv(i.zone,Vn.defaultZone),loc:nr.fromObject(i)});throw new Qo("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=fv(i.zone,Vn.defaultZone);if(!r.isValid)return pt.invalid(jM(r));const n=nr.fromObject(i),s=Zz(e,Ooe),{minDaysInFirstWeek:o,startOfWeek:a}=boe(s,n),l=Vn.now(),c=ci(i.specificOffset)?r.offset(l):i.specificOffset,h=!ci(s.ordinal),m=!ci(s.year),y=!ci(s.month)||!ci(s.day),v=m||y,w=s.weekYear||s.weekNumber;if((v||h)&&w)throw new g$("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&h)throw new g$("Can't mix ordinal dates with month/day");const x=w||s.weekday&&!v;let S,C,k=sR(l,c);x?(S=cGe,C=aGe,k=Wz(k,o,a)):h?(S=uGe,C=lGe,k=mB(k)):(S=wwe,C=bwe);let A=!1;for(const ee of S){const ge=s[ee];ci(ge)?A?s[ee]=C[ee]:s[ee]=k[ee]:A=!0}const R=x?FBe(s,o,a):h?UBe(s):H0e(s),D=R||q0e(s);if(D)return pt.invalid(D);const B=x?goe(s,o,a):h?voe(s):s,[z,W]=X3(B,c,r),Y=new pt({ts:z,zone:r,o:W,loc:n});return s.weekday&&v&&e.weekday!==Y.weekday?pt.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${Y.toISO()}`):Y.isValid?Y:pt.invalid(Y.invalid)}static fromISO(e,i={}){const[r,n]=A8e(e);return Ax(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=O8e(e);return Ax(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=P8e(e);return Ax(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(ci(e)||ci(i))throw new Qo("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=nr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=oGe(o,e,i);return h?pt.invalid(h):Ax(a,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return pt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=U8e(e);return Ax(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Qo("need to specify a reason the DateTime is invalid");const r=e instanceof Pd?e:new Pd(e,i);if(Vn.throwOnInvalid)throw new pBe(r);return new pt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=gwe(e,nr.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return fwe(sa.parseFormat(e),nr.fromObject(i)).map(n=>n.val).join("")}static resetCache(){VM=void 0,l9.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?vB(this).weekYear:NaN}get weekNumber(){return this.isValid?vB(this).weekNumber:NaN}get weekday(){return this.isValid?vB(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?bB(this).weekday:NaN}get localWeekNumber(){return this.isValid?bB(this).weekNumber:NaN}get localWeekYear(){return this.isValid?bB(this).weekYear:NaN}get ordinal(){return this.isValid?mB(this.c).ordinal:NaN}get monthShort(){return this.isValid?rR.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?rR.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?rR.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?rR.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=o4(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),a=this.zone.offset(r-s*i);if(o===a)return[this];const l=r-o*i,c=r-a*i,h=sR(l,o),m=sR(c,a);return h.hour===m.hour&&h.minute===m.minute&&h.second===m.second&&h.millisecond===m.millisecond?[w0(this,{ts:l}),w0(this,{ts:c})]:[this]}get isInLeapYear(){return JO(this.year)}get daysInMonth(){return Jz(this.year,this.month)}get daysInYear(){return this.isValid?F$(this.year):NaN}get weeksInWeekYear(){return this.isValid?PA(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?PA(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=sa.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(ws.instance(e),i)}toLocal(){return this.setZone(Vn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=fv(e,Vn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=X3(o,s,e)}return w0(this,{ts:n,zone:e})}else return pt.invalid(jM(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return w0(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=Zz(e,Ooe),{minDaysInFirstWeek:r,startOfWeek:n}=boe(i,this.loc),s=!ci(i.weekYear)||!ci(i.weekNumber)||!ci(i.weekday),o=!ci(i.ordinal),a=!ci(i.year),l=!ci(i.month)||!ci(i.day),c=a||l,h=i.weekYear||i.weekNumber;if((c||o)&&h)throw new g$("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new g$("Can't mix ordinal dates with month/day");let m;s?m=goe({...Wz(this.c,r,n),...i},r,n):ci(i.ordinal)?(m={...this.toObject(),...i},ci(i.day)&&(m.day=Math.min(Jz(m.year,m.month),m.day))):m=voe({...mB(this.c),...i});const[y,v]=X3(m,this.o,this.zone);return w0(this,{ts:y,o:v})}plus(e){if(!this.isValid)return this;const i=zi.fromDurationLike(e);return w0(this,koe(this,i))}minus(e){if(!this.isValid)return this;const i=zi.fromDurationLike(e).negate();return w0(this,koe(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=zi.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?sa.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):gB}toLocaleString(e=qz,i={}){return this.isValid?sa.create(this.loc.clone(i),e).formatDateTime(this):gB}toLocaleParts(e={}){return this.isValid?sa.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=wB(this,o);return a+="T",a+=Aoe(this,o,i,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?wB(this,e==="extended"):null}toISOWeekDate(){return oR(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+Aoe(this,o==="extended",i,e,r,s):null}toRFC2822(){return oR(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return oR(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?wB(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),oR(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():gB}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return zi.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=BBe(i).map(zi.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=W8e(a,l,s,n);return o?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(pt.now(),e,i)}until(e){return this.isValid?Fn.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||pt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),Loe(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?Loe(e.base||pt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(pt.isDateTime))throw new Qo("min requires all arguments be DateTimes");return woe(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(pt.isDateTime))throw new Qo("max requires all arguments be DateTimes");return woe(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=nr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return ywe(o,e,i)}static fromStringExplain(e,i,r={}){return pt.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=nr.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new mwe(s,e)}static fromFormatParser(e,i,r={}){if(ci(e)||ci(i))throw new Qo("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,o=nr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(i.locale))throw new Qo(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:h}=i.explainFromTokens(e);return h?pt.invalid(h):Ax(a,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return qz}static get DATE_MED(){return w0e}static get DATE_MED_WITH_WEEKDAY(){return yBe}static get DATE_FULL(){return _0e}static get DATE_HUGE(){return x0e}static get TIME_SIMPLE(){return S0e}static get TIME_WITH_SECONDS(){return $0e}static get TIME_WITH_SHORT_OFFSET(){return T0e}static get TIME_WITH_LONG_OFFSET(){return E0e}static get TIME_24_SIMPLE(){return C0e}static get TIME_24_WITH_SECONDS(){return I0e}static get TIME_24_WITH_SHORT_OFFSET(){return M0e}static get TIME_24_WITH_LONG_OFFSET(){return k0e}static get DATETIME_SHORT(){return A0e}static get DATETIME_SHORT_WITH_SECONDS(){return O0e}static get DATETIME_MED(){return P0e}static get DATETIME_MED_WITH_SECONDS(){return L0e}static get DATETIME_MED_WITH_WEEKDAY(){return gBe}static get DATETIME_FULL(){return R0e}static get DATETIME_FULL_WITH_SECONDS(){return D0e}static get DATETIME_HUGE(){return N0e}static get DATETIME_HUGE_WITH_SECONDS(){return z0e}}function UI(t){if(pt.isDateTime(t))return t;if(t&&t.valueOf&&jv(t.valueOf()))return pt.fromJSDate(t);if(t&&typeof t=="object")return pt.fromObject(t);throw new Qo(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const pGe="shortOffset";function fGe(t){return"timeZoneIANA"in t}function mGe(t){return t.startsWith("UTC")}function Yz(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?K3(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?yGe(i):null}}}}}function K3(t,e=_u){return t?fGe(t)?t.timeZoneIANA:gGe(t,e):e}function yGe(t){return{timeZoneIANA:t}}function gGe(t,e=_u){if(!t||!ooe.has(t.timeZone))return e;const i=ooe.get(t.timeZone);return mGe(t.timeZone)||t.respectsDaylightSaving?i:vGe(i)}function vGe(t){const e=pt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${ws.instance(-i).formatOffset(0,"narrow")}`}function bGe(t,e,i,r,n){if(e&&n==="date")return{timeZone:Jp,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=i===yb;return{timeZone:o?n==="timestamp-offset"?void 0:t??Jp:i,timeZoneName:o&&s?pGe:void 0}}function wGe(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===_u||t===yb||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const _Ge={year:void 0,month:void 0,day:void 0,weekday:void 0},xGe={hour:void 0,minute:void 0,second:void 0},_we={timeZone:Jp},lh={year:"numeric",month:"numeric",day:"numeric"},jI={year:"numeric",month:"long",day:"numeric"},VI={year:"numeric",month:"short",day:"numeric"},BI={year:"numeric",month:"long",weekday:"long",day:"numeric"},iv={hour:"numeric",minute:"numeric"},U0={...iv,second:"numeric"},xwe={hourCycle:"h23"},GI={...iv,...xwe},HI={...U0,...xwe},Swe={"short-date":lh,"short-date-short-time":{...lh,...iv},"short-date-short-time-24":{...lh,...GI},"short-date-long-time":{...lh,...U0},"short-date-long-time-24":{...lh,...HI},"short-date-le":lh,"short-date-le-short-time":{...lh,...iv},"short-date-le-short-time-24":{...lh,...GI},"short-date-le-long-time":{...lh,...U0},"short-date-le-long-time-24":{...lh,...HI},"long-month-day-year":jI,"long-month-day-year-short-time":{...jI,...iv},"long-month-day-year-short-time-24":{...jI,...GI},"long-month-day-year-long-time":{...jI,...U0},"long-month-day-year-long-time-24":{...jI,...HI},"day-short-month-year":VI,"day-short-month-year-short-time":{...VI,...iv},"day-short-month-year-short-time-24":{...VI,...GI},"day-short-month-year-long-time":{...VI,...U0},"day-short-month-year-long-time-24":{...VI,...HI},"long-date":BI,"long-date-short-time":{...BI,...iv},"long-date-short-time-24":{...BI,...GI},"long-date-long-time":{...BI,...U0},"long-date-long-time-24":{...BI,...HI},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":iv,"long-time":U0},SGe=Wt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),$we={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},$Ge=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2));var Xfe;const TGe=(Xfe=$Ge.find(({type:t})=>t==="month"))==null?void 0:Xfe.value.toLowerCase();function Twe(){const t=r4();return(t&&$we[t])??g0e()}TGe!=="mart"&&($we.bs="sr-Latn-CS");let c9=new WeakMap;const c4=Swe["short-date-short-time"];function EGe(t){let e=c9.get(t);if(!e){const i=Twe(),r=AX(t.timeZone??_u),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),c9.set(t,e)}return e}function cS(t){return Swe[t]}function yc(t,e=c4){return EGe(e).format(t)}function CGe(t,e=c4){return yc(new Date(t),{...e,..._we,...xGe})}function IGe(t,e=c4){return yc(new Date(`1970-01-01T${t}Z`),{...e,..._we,..._Ge})}function MGe(t,e=c4){if(e.timeZone)return yc(new Date(t),e);const i=pt.fromISO(t,{setZone:!0}),r=i.offset===0?Jp:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:Twe()})}function AX(t){switch(t){case _u:return hBe;case yb:return Jp;default:return t}}xX(()=>{c9=new WeakMap});const kGe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let Q3=new WeakMap,Ewe={};function u9(t){const e=t||Ewe;if(!Q3.has(e)){const i=r4(),r=i&&kGe[i]||g0e();Q3.set(e,new Intl.NumberFormat(r,t))}return Q3.get(e)}function RIt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function fy(t,e){return Object.is(t,-0)&&(t=0),u9(e).format(t)}function DIt(t,e=Tl()){var r,n;if(!t)return null;let i=Doe.get(e);if(!i){const s=u9().formatToParts(12345.6),o=[...u9({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((v,w)=>[v,w])),l=new RegExp(`[${(r=s.find(v=>v.type==="group"))==null?void 0:r.value}]`,"g"),c=new RegExp(`[${(n=s.find(v=>v.type==="decimal"))==null?void 0:n.value}]`),h=new RegExp(`[${o.join("")}]`,"g"),m=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,y=/[-\u2212\u2013\u2014\u2015]/g;i=v=>{if((v=v.trim().replaceAll(l,"").replace(c,".").replace(h,x=>String(a.get(x))).replaceAll(m,"").replaceAll(y,"-"))==="")return null;const w=Number(v);return isNaN(w)?null:w},Doe.set(e,i)}return i(t)}xX(()=>{Q3=new WeakMap,Ewe={}});const Doe=new Map,Cwe=()=>Ce.getLogger("esri.intl.substitute");function Zp(t,e,i={}){const{format:r={}}=i;return Tb(t,n=>AGe(n,e,r))}function AGe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=Zm(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?OGe(o,a):n?PGe(o,n):OX(o)}function OGe(t,e){switch(e.type){case"date":return yc(t,e.intlOptions);case"number":return fy(t,e.intlOptions);default:return Cwe().warn("missing format descriptor for key {key}"),OX(t)}}function PGe(t,e){switch(e.toLowerCase()){case"dateformat":return yc(t);case"numberformat":return fy(t);default:return Cwe().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?yc(t):/^numberformat/i.test(e)?fy(t):OX(t)}}function OX(t){switch(typeof t){case"string":return t;case"number":return fy(t);case"boolean":return""+t;default:return t instanceof Date?yc(t):""}}const Iwe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function LGe(t){return t in Iwe}function Noe(t){if(LGe(t)){const e=Iwe[t];return e===!0?t:e}return null}const BM=[],j$=new Map;function zoe(t){for(const e of j$.keys())kwe(t.pattern,e)&&j$.delete(e)}function RGe(t){return BM.includes(t)||(zoe(t),BM.unshift(t)),Mi(()=>{const e=BM.indexOf(t);e>-1&&(BM.splice(e,1),zoe(t))})}async function u4(t){const e=Tl();j$.has(t)||j$.set(t,DGe(t,e));const i=j$.get(t);return i&&await NGe.add(i),i}function Mwe(t){const e=r4(t);return e?Noe(t)??Noe(e):null}async function DGe(t,e){const i=[];for(const r of BM)if(kwe(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new Q("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new Q("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function kwe(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}xX(()=>{j$.clear()});const NGe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Mo())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function zGe(t,e,i,r){const n=e.exec(i);if(!n)throw new Q("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=Mwe(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let h;try{h=await Foe(t(c))}catch(m){if(c===l)throw new Q("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m});try{h=await Foe(t(l))}catch(y){throw new Q("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:y})}}return h}async function Foe(t){if(Uoe.fetchBundleAsset!=null)return Uoe.fetchBundleAsset(t);const e=await Ot(t,{responseType:"text"});return JSON.parse(e.data)}let FGe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return zGe(this.getAssetUrl,this.matcher,e,i)}};function UGe(t){return new FGe(t)}const Uoe={};RGe(UGe({pattern:"esri/",location:zr}));const joe={};function jGe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.slice())||[],paths:{...joe.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=joe.baseUrl),e}let VGe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},eD=class{constructor(){this._dispatcher=new VGe,this._workerPostMessage({type:ro.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){mz(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){mz(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=OA(e);if(i&&i.type===ro.OPEN){const{modulePath:r,jobId:n}=i;let s=await RE.loadWorker(r);s||(s=await import(r));const o=RE.connect(s);this._workerPostMessage({type:ro.OPENED,jobId:n,data:o})}}};const d9=()=>Ce.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:BGe}=ro,GGe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let aR,lR;const Voe="Failed to create Worker. Fallback to execute module in main thread";async function HGe(){if(!ve("esri-workers"))return Boe(new eD);if(!aR&&!lR)try{const e=GGe.split("{CONFIGURATION}").join(qGe());aR=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){lR=e||{}}let t;if(aR)try{t=new Worker(aR,{name:"esri-worker-"+WGe++})}catch{d9().warn(Voe,lR),t=new eD}else d9().warn(Voe,lR),t=new eD;return Boe(t)}async function Boe(t){return new Promise(e=>{function i(n){const s=OA(n);s&&s.type===BGe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),d9().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new eD).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function qGe(){let t;if(hi.default!=null){const n={...hi};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(hi));t.assetsPath=na(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?na(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Tl(),t.has={"esri-csp-restrictions":ve("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ve("esri-2d-update-debug"),"esri-2d-log-updating":ve("esri-2d-log-updating"),"featurelayer-pbf":ve("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ve("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ve("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ve("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ve("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ve("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ve("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ve("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ve("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ve("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ve("featurelayer-snapshot-enabled"),"esri-atomics":ve("esri-atomics"),"esri-shared-array-buffer":ve("esri-shared-array-buffer"),"esri-tiles-debug":ve("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ve("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ve("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=na(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=na(t.workers.workerPath):t.workers.workerPath=na(zr("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=hi.workers.loaderConfig,i=jGe({baseUrl:e==null?void 0:e.baseUrl,locale:Tl(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:obe,fullVersion:iX,revision:abe}})}let WGe=0;const{ABORT:Goe,INVOKE:JGe,OPEN:ZGe,OPENED:YGe,RESPONSE:qI}=ro;let XGe=class Awe{static async create(e){const i=await HGe();return new Awe(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),Ce.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=m0e();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:OY(r,()=>{this._outJobs.delete(n),this._post({type:Goe,jobId:n})})};this._outJobs.set(n,a),this._post({type:ZGe,jobId:n,modulePath:e})})}_onMessage(e){const i=OA(e);if(i)switch(i.type){case YGe:this._onOpenedMessage(i);break;case qI:this._onResponseMessage(i);break;case Goe:this._onAbortMessage(i);break;case JGe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=cBe[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:qI,jobId:r,error:AA(h)})}nf(c)?(a.set(r,{controller:o,promise:c}),c.then(h=>{a.has(r)&&(a.delete(r),this._post({type:qI,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),ds(h)||this._post({type:qI,jobId:r,error:AA(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:qI,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),rn(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),rn(s.abortHandle),r?s.reject(Q.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return _X(this.worker,e,i,r)}};const Hoe=ve("host-browser")?Math.min(navigator.hardwareConcurrency-1,ve("workers-pool-size")??8):0;let Hw=ve("esri-mobile")?Math.min(Hoe,3):Hoe;Hw||(Hw=ve("safari")&&ve("mac")?7:2);let qoe=0;const tD=[];function KGe(){Owe()}async function cR(t,e){const i=new lBe,{registryTarget:r,...n}=e;return await i.open(t,n),r&&KVe(r,i),i}async function QGe(t,e={}){if(typeof t!="string")throw new Q("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ve("host-webworker")&&!ve("esri-workers")&&(i="local"),i==="local"){let r=await RE.loadWorker(t);r||(r=await import(t)),sr(e.signal);const n=e.client||r;return cR([RE.connect(r,e.schedule)],{...e,client:n})}if(await Owe(),sr(e.signal),i==="dedicated"){const r=qoe++%Hw;return cR([await tD[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Hw);if(r<Hw){const n=new Array(r);for(let s=0;s<r;++s){const o=qoe++%Hw;n[s]=tD[o].open(t,e)}return cR(n,e)}}return cR(tD.map(r=>r.open(t,e)),e)}let uR=null;async function Owe(){if(uR)return uR;new AbortController;const t=[];for(let e=0;e<Hw;e++){const i=XGe.create(e).then(r=>(tD[e]=r,r));t.push(i)}return uR=Promise.all(t),uR}function Eb(){return[0,0,0]}function eHe(t){return[t[0],t[1],t[2]]}function _C(t,e,i){return[t,e,i]}function tHe(t,e,i){return[t,e,i]}function iHe(t,e=Eb()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Pwe(){return Eb()}function Lwe(){return _C(1,1,1)}function Rwe(){return _C(1,0,0)}function Dwe(){return _C(0,1,0)}function Nwe(){return _C(0,0,1)}const rHe=Pwe(),zwe=Lwe(),nHe=Rwe(),sHe=Dwe(),oHe=Nwe();Object.freeze(Object.defineProperty({__proto__:null,ONES:zwe,UNIT_X:nHe,UNIT_Y:sHe,UNIT_Z:oHe,ZEROS:rHe,clone:eHe,create:Eb,freeze:tHe,fromArray:iHe,fromValues:_C,ones:Lwe,unitX:Rwe,unitY:Dwe,unitZ:Nwe,zeros:Pwe},Symbol.toStringTag,{value:"Module"}));const UIt=Math.PI/180,jIt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,gg=yn.radius,Gu=yn.eccentricitySquared,aHe={a1:gg*Gu,a2:gg*Gu*gg*Gu,a3:gg*Gu*Gu/2,a4:gg*Gu*gg*Gu*2.5,a5:gg*Gu+gg*Gu*Gu/2,a6:1-Gu},VIt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:yn.radius,f:yn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:hb.radius,f:hb.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Lp.radius,f:Lp.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Lp.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var xe;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=7]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=9]="GCSMOON2000",t[t.LON_LAT=10]="LON_LAT",t[t.PLATE_CARREE=11]="PLATE_CARREE"})(xe||(xe={}));const lHe={[xe.WGS84]:{[xe.CGCS2000]:Zr,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:Zr,[xe.SPHERICAL_ECEF]:yk,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:V$,[xe.PLATE_CARREE]:B$,[xe.WGS84]:Zr,[xe.WGS84_ECEF]:q$},[xe.CGCS2000]:{[xe.CGCS2000]:Zr,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:Zr,[xe.SPHERICAL_ECEF]:yk,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:V$,[xe.PLATE_CARREE]:B$,[xe.WGS84]:Zr,[xe.WGS84_ECEF]:q$},[xe.GCSMARS2000]:{[xe.CGCS2000]:null,[xe.GCSMARS2000]:Zr,[xe.GCSMOON2000]:null,[xe.LON_LAT]:Zr,[xe.SPHERICAL_ECEF]:null,[xe.SPHERICAL_MARS_PCPF]:Zoe,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:null,[xe.PLATE_CARREE]:null,[xe.WGS84]:null,[xe.WGS84_ECEF]:null},[xe.GCSMOON2000]:{[xe.CGCS2000]:null,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:Zr,[xe.LON_LAT]:Zr,[xe.SPHERICAL_ECEF]:null,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:Joe,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:null,[xe.PLATE_CARREE]:null,[xe.WGS84]:null,[xe.WGS84_ECEF]:null},[xe.WEB_MERCATOR]:{[xe.CGCS2000]:mk,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:mk,[xe.SPHERICAL_ECEF]:uHe,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:Zr,[xe.PLATE_CARREE]:pHe,[xe.WGS84]:mk,[xe.WGS84_ECEF]:dHe},[xe.WGS84_ECEF]:{[xe.CGCS2000]:W$,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:W$,[xe.SPHERICAL_ECEF]:xHe,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:SHe,[xe.PLATE_CARREE]:fHe,[xe.WGS84]:W$,[xe.WGS84_ECEF]:Zr},[xe.SPHERICAL_ECEF]:{[xe.CGCS2000]:H$,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:H$,[xe.SPHERICAL_ECEF]:Zr,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:bHe,[xe.PLATE_CARREE]:mHe,[xe.WGS84]:H$,[xe.WGS84_ECEF]:wHe},[xe.SPHERICAL_MARS_PCPF]:{[xe.CGCS2000]:null,[xe.GCSMARS2000]:Xoe,[xe.GCSMOON2000]:null,[xe.LON_LAT]:Xoe,[xe.SPHERICAL_ECEF]:null,[xe.SPHERICAL_MARS_PCPF]:Zr,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:null,[xe.PLATE_CARREE]:null,[xe.WGS84]:null,[xe.WGS84_ECEF]:null},[xe.SPHERICAL_MOON_PCPF]:{[xe.CGCS2000]:null,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:Yoe,[xe.LON_LAT]:Yoe,[xe.SPHERICAL_ECEF]:null,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:Zr,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:null,[xe.PLATE_CARREE]:null,[xe.WGS84]:null,[xe.WGS84_ECEF]:null},[xe.UNKNOWN]:{[xe.CGCS2000]:null,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:null,[xe.SPHERICAL_ECEF]:null,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:Zr,[xe.WEB_MERCATOR]:null,[xe.PLATE_CARREE]:null,[xe.WGS84]:null,[xe.WGS84_ECEF]:null},[xe.LON_LAT]:{[xe.CGCS2000]:Zr,[xe.GCSMARS2000]:Zr,[xe.GCSMOON2000]:Zr,[xe.LON_LAT]:Zr,[xe.SPHERICAL_ECEF]:yk,[xe.SPHERICAL_MARS_PCPF]:Zoe,[xe.SPHERICAL_MOON_PCPF]:Joe,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:V$,[xe.PLATE_CARREE]:B$,[xe.WGS84]:Zr,[xe.WGS84_ECEF]:q$},[xe.PLATE_CARREE]:{[xe.CGCS2000]:G$,[xe.GCSMARS2000]:null,[xe.GCSMOON2000]:null,[xe.LON_LAT]:G$,[xe.SPHERICAL_ECEF]:yHe,[xe.SPHERICAL_MARS_PCPF]:null,[xe.SPHERICAL_MOON_PCPF]:null,[xe.UNKNOWN]:null,[xe.WEB_MERCATOR]:gHe,[xe.PLATE_CARREE]:Zr,[xe.WGS84]:G$,[xe.WGS84_ECEF]:vHe}};function Fwe(t,e){var i;return(i=cHe(t,e))==null?void 0:i.projector}function cHe(t,e){if(t==null||e==null)return null;if(Rf.source.spatialReference===t&&Rf.dest.spatialReference===e)return Rf;const i=Woe(t,Rf.source),r=Woe(e,Rf.dest);return i===xe.UNKNOWN&&r===xe.UNKNOWN?Cn(t,e)?Rf.projector=Zr:Rf.projector=null:Rf.projector=lHe[i][r],Rf}function Woe(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Ha(t,1)),jz(t)?e.spatialReferenceId=xe.SPHERICAL_ECEF:fb(t)?e.spatialReferenceId=xe.WGS84:Wp(t)?e.spatialReferenceId=xe.WEB_MERCATOR:m6e(t)?e.spatialReferenceId=xe.PLATE_CARREE:t.wkt===b6e.wkt?e.spatialReferenceId=xe.WGS84_ECEF:t.wkid===hu.CGCS2000?e.spatialReferenceId=xe.CGCS2000:t.wkt===dX.wkt?e.spatialReferenceId=xe.SPHERICAL_MARS_PCPF:t.wkt===hX.wkt?e.spatialReferenceId=xe.SPHERICAL_MOON_PCPF:lX(t)?e.spatialReferenceId=xe.GCSMARS2000:cX(t)?e.spatialReferenceId=xe.GCSMOON2000:e.spatialReferenceId=xe.UNKNOWN):xe.UNKNOWN}function Zr(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function mk(t,e,i,r){i[r]=zE*(t[e]/v_),i[r+1]=zE*(Uwe-2*Math.atan(Math.exp(-t[e+1]/v_))),i[r+2]=t[e+2]}function uHe(t,e,i,r){const n=t[e]/v_,s=Uwe-2*Math.atan(Math.exp(-t[e+1]/v_)),o=v_+t[e+2],a=Math.cos(s)*o;i[r]=Math.cos(n)*a,i[r+1]=Math.sin(n)*a,i[r+2]=Math.sin(s)*o}function dHe(t,e,i,r){mk(t,e,i,r),q$(i,r,i,r)}function hHe(t,e,i,r,n){const s=.4999999*Math.PI,o=da(NE*t[e+1],-s,s),a=Math.sin(o);i[r++]=NE*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function V$(t,e,i,r){hHe(t,e,i,r,yn)}function B$(t,e,i,r){i[r]=t[e]*Koe,i[r+1]=t[e+1]*Koe,i[r+2]=t[e+2]}function G$(t,e,i,r){i[r]=t[e]*Qoe,i[r+1]=t[e+1]*Qoe,i[r+2]=t[e+2]}function pHe(t,e,i,r){mk(t,e,i,r),B$(i,r,i,r)}function fHe(t,e,i,r){W$(t,e,i,r),B$(i,r,i,r)}function mHe(t,e,i,r){H$(t,e,i,r),B$(i,r,i,r)}function yHe(t,e,i,r){G$(t,e,i,r),yk(i,r,i,r)}function gHe(t,e,i,r){G$(t,e,i,r),V$(i,r,i,r)}function vHe(t,e,i,r){G$(t,e,i,r),q$(i,r,i,r)}function PX(t,e,i,r,n){const s=n+t[e+2],o=NE*t[e+1],a=NE*t[e],l=Math.cos(o)*s;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*s}function Joe(t,e,i,r){PX(t,e,i,r,hb.radius)}function Zoe(t,e,i,r){PX(t,e,i,r,Lp.radius)}function yk(t,e,i,r){PX(t,e,i,r,yn.radius)}function LX(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=H4e(a/(l===0?1:l)),h=Math.atan2(o,s);i[r++]=zE*h,i[r++]=zE*c,i[r]=l-n}function Yoe(t,e,i,r){LX(t,e,i,r,hb.radius)}function Xoe(t,e,i,r){LX(t,e,i,r,Lp.radius)}function H$(t,e,i,r){LX(t,e,i,r,yn.radius)}function bHe(t,e,i,r){H$(t,e,i,r),V$(i,r,i,r)}function wHe(t,e,i,r){H$(t,e,i,r),q$(i,r,i,r)}function _He(t,e,i,r,n){const s=NE*t[e],o=NE*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(h+a)*c*Math.cos(s),i[r++]=(h+a)*c*Math.sin(s),i[r++]=(h*(1-n.eccentricitySquared)+a)*l}function q$(t,e,i,r){_He(t,e,i,r,yn)}function W$(t,e,i,r){const n=aHe,s=t[e],o=t[e+1],a=t[e+2];let l,c,h,m,y,v,w,x,S,C,k,A,R,D,B,z,W,Y,ee,ge,fe;l=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),m=c+a*a,y=Math.sqrt(m),ge=Math.atan2(o,s),v=a*a/m,w=c/m,D=n.a2/y,B=n.a3-n.a4/y,w>.3?(x=l/y*(1+w*(n.a1+D+v*B)/y),ee=Math.asin(x),C=x*x,S=Math.sqrt(1-C)):(S=h/y*(1-v*(n.a5-D-w*B)/y),ee=Math.acos(S),C=1-S*S,x=Math.sqrt(C)),k=1-yn.eccentricitySquared*C,A=yn.radius/Math.sqrt(k),R=n.a6*A,D=h-A*S,B=l-R*x,W=S*D+x*B,z=S*B-x*D,Y=z/(R/k+W),ee+=Y,fe=W+z*Y/2,a<0&&(ee=-ee),i[r++]=zE*ge,i[r++]=zE*ee,i[r]=fe}function xHe(t,e,i,r){W$(t,e,i,r),yk(i,r,i,r)}function SHe(t,e,i,r){W$(t,e,i,r),V$(i,r,i,r)}const Rf={source:{spatialReference:null,spatialReferenceId:xe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:xe.UNKNOWN,metersPerUnit:1},projector:Zr},NE=Ep(1),zE=Ove(1),Uwe=.5*Math.PI,v_=yn.radius,Koe=v_*Math.PI/180,Qoe=180/(v_*Math.PI);function XO(t,e,i,r,n,s,o=Math.floor(t.length/3)){const a=Fwe(e,n);if(a==null)return!1;if(a===Zr){if(t===r&&i===s)return!0;const c=i+3*o;for(let h=i,m=s;h<c;h++,m++)r[m]=t[h];return!0}const l=i+3*o;for(let c=i,h=s;c<l;c+=3,h+=3)a(t,c,r,h);return!0}const BIt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:XO},Symbol.toStringTag,{value:"Module"}));function eae(t,e,i,r,n,s){return dR[0]=t,dR[1]=e,dR[2]=i,XO(dR,r,0,n,s,0)}const dR=Eb();let hR=0,_B=class h9{static fromGE(e){const i=new h9;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=hR++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=hR++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=hR++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=hR++}getInverse(){const e=new h9;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Xz=class GM{static cacheKey(e,i){var r,n,s,o,a,l;return[((r=e.wkid)==null?void 0:r.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((s=e.wkt2)==null?void 0:s.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new GM;let r="";for(const n of e.steps){const s=_B.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof _B?this.steps.push(i):this.steps.push(new _B({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new GM;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[GM.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[GM.cacheKey(e,i)];return n===void 0?null:n}};function jwe(t,e,i){if(e==null||i==null||i.vcsWkid||Cn(e,i)||mb(e)||mb(i))return null;const r=Vz(e)/Vz(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>$He(n,r);case"polyline":case"esriGeometryPolyline":return n=>EHe(n,r);case"polygon":case"esriGeometryPolygon":return n=>THe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>CHe(n,r);case"extent":case"esriGeometryEnvelope":return n=>IHe(n,r);default:return null}}function $He(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function THe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function EHe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function CHe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function IHe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Nd=null,gb=null,gk=null,iD={};const RX=new lC;function sf(){return!!Nd&&JU()}function Vwe(){return!!sf()||(Lt(RX),Yp(),!1)}function Bwe(t,e){return!t||!e||$c(t,e)||Vwe()}function MHe(t,e){return!$c(t,e)&&!sf()}function Yp(t){return gk==null&&(gk=Promise.all([aX(),$e(()=>import("./geometryEngineBase-E1PPqbft.js"),__vite__mapDeps([6,7])).then(e=>e.g),$e(()=>import("./hydrated-DmANwNbo.js"),[])])),gk.then(([,e,{hydratedAdapter:i}])=>{sr(t),gb=i,Nd=e.default,Nd._enableProjection($be),RX.notify()})}function Cb(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:(V6e(t),p9(gb,t,t[0].spatialReference,e,i,r)):(AE(t),p9(gb,[t],t.spatialReference,e,i,r)[0])}function p9(t,e,i,r,n=null,s=null){if(i==null||r==null)return e;if($c(i,r,n))return e.map(o=>rD(o,i,r));if(n==null&&jz(i))return e.map(o=>rD(o,i,et.WGS84)).map(o=>LA(o,r));if(n==null&&jz(r))return e.map(o=>LA(o,et.WGS84)).map(o=>rD(o,et.WGS84,r));if(n==null){const o=Xz.cacheKey(i,r);iD[o]!==void 0?n=iD[o]:((n=Hwe(i,r,void 0))==null&&(n=new Xz),iD[o]=n)}if(Nd==null||t==null)throw new d4;return s!=null?Nd._project(t,e,i,r,n,s):Nd._project(t,e,i,r,n)}function kHe(t,e){const i=Gwe([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Gwe(t,e){if(!sf()){for(const i of t)if(i!=null&&!Cn(i.spatialReference,e)&&mc(i.spatialReference)&&mc(e)&&!$c(i.spatialReference,e))return Lt(RX),{pending:Yp(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Cn(i.spatialReference,e)?i:mc(i.spatialReference)&&mc(e)?LA(i,e):null)}}function Hwe(t,e,i=null){if(t==null||e==null)return null;if(Nd==null||gb==null)throw new d4;const r=Nd._getTransformation(gb,t,e,i,i==null?void 0:i.spatialReference);return r!==null?Xz.fromGE(r):null}function AHe(t,e,i=null){if(Nd==null||gb==null)throw new d4;const r=Nd._getTransformationBySuitability(gb,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const s of r)n.push(Xz.fromGE(s));return n}return[]}let d4=class extends Q{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function OHe(){Nd=null,gb=null,gk=null,iD={}}const PHe={get loadPromise(){return gk}};function LA(t,e){try{const i=Cb(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=jwe(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof d4))throw i;return null}}async function qwe(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await DX(r,e,null,i),LA(t,e)}function $c(t,e,i){return!i&&(!!Cn(t,e)||mc(t)&&mc(e)&&!!Fwe(t,e))}function LHe(t,e){if(Cn(t,e))return!0;if(!mc(t)||!mc(e))return!1;const i=fb(t)||Wp(t)||qH(t),r=fb(e)||Wp(e)||qH(e);return i&&r}async function DX(t,e,i,r){if(sf())return ose(r);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(n&&s&&!$c(n,s,o))return Yp(r)}else if(t&&e&&!$c(t,e,i))return Yp(r);return ose(r)}function rD(t,e,i){return t?"x"in t?Wwe(t,e,new ft,i,0):"xmin"in t?Kwe(t,e,new jt,i,0):"rings"in t?Xwe(t,e,new rr,i,0):"paths"in t?Zwe(t,e,new Ur,i,0):"points"in t?Jwe(t,e,new ou,i,0):null:null}function RHe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&Wwe(t,t.spatialReference,e,i,r)!=null}function Wwe(t,e,i,r,n){ea[0]=t.x,ea[1]=t.y;const s=t.z;return ea[2]=s!==void 0?s:n,XO(ea,e,0,ea,r,0)?(i.x=ea[0],i.y=ea[1],i.spatialReference=r,s!==void 0||mb(r)?(i.z=ea[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function DHe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Jwe(t,t.spatialReference,e,i,r)!=null}function Jwe(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,h=[];for(const y of s)h.push(y[0],y[1],o?y[2]:n);if(!XO(h,e,0,h,r,0,c))return null;const m=o||mb(r);for(let y=0;y<c;++y){const v=3*y,w=h[v],x=h[v+1];m&&a?l.push([w,x,h[v+2],s[y][3]]):m?l.push([w,x,h[v+2]]):a?l.push([w,x,s[y][2]]):l.push([w,x])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function NHe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Zwe(t,t.spatialReference,e,i,r)!=null}function Zwe(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!Qwe(s,o??!1,a??!1,e,l,r,n))return null;const c=o||mb(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function Ywe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Xwe(t,t.spatialReference,e,i,r)!=null}function Xwe(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!Qwe(s,o??!1,a??!1,e,l,r,n))return null;const c=o||mb(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function zHe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Kwe(t,t.spatialReference,e,i,r)!=null}function Kwe(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=t,m=c?t.zmin:n;if(!eae(s,o,m,e,ea,r))return null;const y=c||mb(r);i.xmin=ea[0],i.ymin=ea[1],y&&(i.zmin=ea[2]);const v=c?t.zmax:n;return eae(a,l,v,e,ea,r)?(i.xmax=ea[0],i.ymax=ea[1],y&&(i.zmax=ea[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function Qwe(t,e,i,r,n,s,o=0){const a=new Array;for(const h of t)for(const m of h)a.push(m[0],m[1],e?m[2]:o);if(!XO(a,r,0,a,s,0))return!1;let l=0;n.length=0;const c=e||mb(s);for(const h of t){const m=new Array;for(const y of h)c&&i?m.push([a[l++],a[l++],a[l++],y[3]]):c?m.push([a[l++],a[l++],a[l++]]):i?(m.push([a[l++],a[l++],y[2]]),l++):(m.push([a[l++],a[l++]]),l++);n.push(m)}return!0}const ea=Eb(),HIt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:$c,getTransformation:Hwe,getTransformations:AHe,initializeProjection:DX,isEqualBaseGCS:LHe,isLoaded:sf,isLoadedOrLoad:Vwe,isLoadedOrLoadFor:Bwe,load:Yp,project:Cb,projectExtent:zHe,projectMany:p9,projectMultipoint:DHe,projectOrLoad:kHe,projectOrLoadMany:Gwe,projectPoint:RHe,projectPolygon:Ywe,projectPolyline:NHe,projectWithZConversion:qwe,projectWithoutEngine:rD,requiresLoad:MHe,test:PHe,tryProjectWithZConversion:LA,unload:OHe},Symbol.toStringTag,{value:"Module"}));var f9,UT;let us=(UT=class extends ye{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new f9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},f9=UT,UT);u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],us.prototype,"cols",void 0),u([p({type:fi,json:{write:!0}})],us.prototype,"level",void 0),u([p({type:String,json:{write:!0}})],us.prototype,"levelValue",void 0),u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],us.prototype,"origin",void 0),u([p({type:Number,json:{write:!0}})],us.prototype,"resolution",void 0),u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],us.prototype,"rows",void 0),u([p({type:Number,json:{write:!0}})],us.prototype,"scale",void 0),us=f9=u([U("esri.layers.support.LOD")],us);let FHe=class{constructor(e,i,r,n,s=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=s}};var Lg;const tae=new Et({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var jT;let os=(jT=class extends ye{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=et.WebMercator,numLODs:o=24}=e;if(!mc(s)){const y=[];if(r)for(let v=0;v<r.length;v++){const w=r[v];y.push(new us({level:v,scale:w,resolution:w}))}else{let v=5e-4;for(let w=o-1;w>=0;w--)y.unshift(new us({level:w,scale:v,resolution:v})),v*=2}return new Lg({dpi:96,lods:y,origin:new ft(0,0,s),size:[n,n],spatialReference:s})}const a=ja(s),l=e.origin?new ft({x:e.origin.x,y:e.origin.y,spatialReference:s}):new ft(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,h=1/(Ha(s)*39.37*c),m=[];if(r)for(let y=0;y<r.length;y++){const v=r[y],w=v*h;m.push(new us({level:y,scale:v,resolution:w}))}else{let y=$1(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const v=Math.ceil(o/i);m.push(new us({level:0,scale:y,resolution:y*h}));for(let w=1;w<v;w++){const x=y/2**i,S=x*h;m.push(new us({level:w,scale:x,resolution:S})),y=x}}return new Lg({dpi:c,lods:m,origin:l,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=ja(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return ft.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(o=>{n.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],o=i[n+1];if(s<=e)return n;if(o===e)return n+1;if(s>e&&o<e)return n+Math.log(s/e)/Math.log(s/o)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(Cn(i.spatialReference,this.spatialReference))o=i.x,a=i.y,n=r;else{const h=XU(i,this.spatialReference);if(h==null)return null;o=h.x,a=h.y,n=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return n||(n=new FHe(null,0,0,0,Br())),n.level=e,n.row=Math.floor((this.origin.y-a)/c+.001),n.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=Lg.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&i===Lg.ExtrapolateOptions.POWER_OF_TWO){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,o=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Br()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){var i;return((i=this._levelToLOD)==null?void 0:i[e])??null}clone(){return Lg.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const o=s+i,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new us({level:s,scale:a,resolution:l}))}return new Lg({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},Lg=jT,jT);u([p({type:Number,json:{write:!0}})],os.prototype,"compressionQuality",void 0),u([p({type:Number,json:{write:!0}})],os.prototype,"dpi",void 0),u([p({type:String,json:{read:tae.read,write:tae.write,origins:{"web-scene":{read:!1,write:!1}}}})],os.prototype,"format",void 0),u([p({readOnly:!0})],os.prototype,"isWrappable",null),u([p({type:ft,json:{write:!0}})],os.prototype,"origin",void 0),u([Ue("origin")],os.prototype,"readOrigin",null),u([p({type:[us],value:null,json:{write:!0}})],os.prototype,"lods",null),u([p({readOnly:!0})],os.prototype,"scales",void 0),u([p({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],os.prototype,"size",void 0),u([Ue("size",["rows","cols"])],os.prototype,"readSize",null),u([qe("size",{cols:{type:fi},rows:{type:fi}})],os.prototype,"writeSize",null),u([p({type:et,json:{write:!0}})],os.prototype,"spatialReference",void 0),os=Lg=u([U("esri.layers.support.TileInfo")],os),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(os||(os={}));const nD={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},xB={xsmall:544,small:768,medium:992,large:1200};function UHe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function SB(t,e){return e?nD[t].valueToClassName[e].split(" "):[]}const jHe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=xB}initialize(){this.addHandles(Le(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),gi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!UHe(r)){const n=JSON.stringify(xB,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),r=xB}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Ra.acquire(),n=Ra.acquire();let s,o=!1;for(s in nD){const a=this[s],l=nD[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==l&&(o=!0,this[s]=l,SB(s,a).forEach(c=>n.push(c)),SB(s,l).forEach(c=>r.push(c)))}o&&(this._applyClassNameChanges(r,n),Ra.release(r),Ra.release(n))}_applyClassNameChanges(r,n){const s=this.container;s&&(n.forEach(o=>s.classList.remove(o)),r.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in nD)SB(n,this[n]).forEach(s=>r.classList.remove(s))}};return u([p()],i.prototype,"breakpoints",null),u([p()],i.prototype,"orientation",void 0),u([p()],i.prototype,"widthBreakpoint",void 0),u([p()],i.prototype,"heightBreakpoint",void 0),i=u([U("esri.views.BreakpointsOwner")],i),i};function NX(t){return typeof t=="string"?document.getElementById(t):t??null}function iae(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let b_=class extends st{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,Le)}addWhen(e,i,r={}){return this._installWatch(e,i,r,hs)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([ua(e,"after-changes",this._createSyncUpdatingCallback(),Bp),ua(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),Mi(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Mi(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(pR)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),Mi(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=Le(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(pR),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(zO(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(pR))}),pR)}}};u([p({readOnly:!0})],b_.prototype,"updating",void 0),b_=u([U("esri.core.support.UpdatingHandles")],b_);const pR=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kz=function(){return Kz=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Kz.apply(this,arguments)},m9={exports:{}},kn={},y9={exports:{}},I1={};function e_e(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function VHe(t,e,i){}function BHe(t,e,i){}var GHe=/javascript\s*\:/img;function HHe(t,e){return GHe.test(e)?"":e}I1.whiteList=e_e();I1.getDefaultWhiteList=e_e;I1.onAttr=VHe;I1.onIgnoreAttr=BHe;I1.safeAttrValue=HHe;var qHe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},WI=qHe;function WHe(t,e){t=WI.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var h=WI.trim(t.slice(n,s)),m=h.indexOf(":");if(m!==-1){var y=WI.trim(h.slice(0,m)),v=WI.trim(h.slice(m+1));if(y){var w=e(n,o.length,y,v,h);w&&(o+=w+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return WI.trim(o)}var JHe=WHe,fR=I1,ZHe=JHe;function rae(t){return t==null}function YHe(t){var e={};for(var i in t)e[i]=t[i];return e}function t_e(t){t=YHe(t||{}),t.whiteList=t.whiteList||fR.whiteList,t.onAttr=t.onAttr||fR.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||fR.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||fR.safeAttrValue,this.options=t}t_e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=ZHe(t,function(l,c,h,m,y){var v=r[h],w=!1;if(v===!0?w=v:typeof v=="function"?w=v(m):v instanceof RegExp&&(w=v.test(m)),w!==!0&&(w=!1),m=o(h,m),!!m){var x={position:c,sourcePosition:l,source:y,isWhite:w};if(w){var S=n(h,m,x);return rae(S)?h+":"+m:S}else{var S=s(h,m,x);if(!rae(S))return S}}});return a};var XHe=t_e;(function(t,e){var i=I1,r=XHe;function n(o,a){var l=new r(a);return l.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(y9,y9.exports);var zX=y9.exports,FX={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},KHe=zX.FilterCSS,QHe=zX.getDefaultWhiteList,Qz=FX;function i_e(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var r_e=new KHe;function e9e(t,e,i){}function t9e(t,e,i){}function i9e(t,e,i){}function r9e(t,e,i){}function n_e(t){return t.replace(s9e,"&lt;").replace(o9e,"&gt;")}function n9e(t,e,i,r){if(i=u_e(i),e==="href"||e==="src"){if(i=Qz.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(mR.lastIndex=0,mR.test(i))return""}else if(e==="style"){if(nae.lastIndex=0,nae.test(i)||(sae.lastIndex=0,sae.test(i)&&(mR.lastIndex=0,mR.test(i))))return"";r!==!1&&(r=r||r_e,i=r.process(i))}return i=d_e(i),i}var s9e=/</g,o9e=/>/g,a9e=/"/g,l9e=/&quot;/g,c9e=/&#([a-zA-Z0-9]*);?/gim,u9e=/&colon;?/gim,d9e=/&newline;?/gim,mR=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,nae=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,sae=/u\s*r\s*l\s*\(.*/gi;function s_e(t){return t.replace(a9e,"&quot;")}function o_e(t){return t.replace(l9e,'"')}function a_e(t){return t.replace(c9e,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function l_e(t){return t.replace(u9e,":").replace(d9e," ")}function c_e(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return Qz.trim(e)}function u_e(t){return t=o_e(t),t=a_e(t),t=l_e(t),t=c_e(t),t}function d_e(t){return t=s_e(t),t=n_e(t),t}function h9e(){return""}function p9e(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:Qz.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return Qz.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function f9e(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function m9e(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}kn.whiteList=i_e();kn.getDefaultWhiteList=i_e;kn.onTag=e9e;kn.onIgnoreTag=t9e;kn.onTagAttr=i9e;kn.onIgnoreTagAttr=r9e;kn.safeAttrValue=n9e;kn.escapeHtml=n_e;kn.escapeQuote=s_e;kn.unescapeQuote=o_e;kn.escapeHtmlEntities=a_e;kn.escapeDangerHtml5Entities=l_e;kn.clearNonPrintableCharacter=c_e;kn.friendlyAttrValue=u_e;kn.escapeAttrValue=d_e;kn.onIgnoreTagStripAll=h9e;kn.StripTagBody=p9e;kn.stripCommentTag=f9e;kn.stripBlankChar=m9e;kn.cssFilter=r_e;kn.getDefaultCSSWhiteList=QHe;var h4={},rv=FX;function y9e(t){var e=rv.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=rv.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function g9e(t){return t.slice(0,2)==="</"}function v9e(t,e,i){var r="",n=0,s=!1,o=!1,a=0,l=t.length,c="",h="";e:for(a=0;a<l;a++){var m=t.charAt(a);if(s===!1){if(m==="<"){s=a;continue}}else if(o===!1){if(m==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(m===">"){r+=i(t.slice(n,s)),h=t.slice(s,a+1),c=y9e(h),r+=e(s,r.length,c,h,g9e(h)),n=a+1,s=!1;continue}if(m==='"'||m==="'")for(var y=1,v=t.charAt(a-y);v.trim()===""||v==="=";){if(v==="="){o=m;continue e}v=t.charAt(a-++y)}}else if(m===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var b9e=/[^a-zA-Z0-9\\_:.-]/gim;function w9e(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(y,v){if(y=rv.trim(y),y=y.replace(b9e,"").toLowerCase(),!(y.length<1)){var w=e(y,v||"");w&&n.push(w)}}for(var l=0;l<o;l++){var c=t.charAt(l),h,m;if(s===!1&&c==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:x9e(t,l+1);continue}if(s!==!1&&l===r){if(m=t.indexOf(c,l+1),m===-1)break;h=rv.trim(t.slice(r+1,m)),a(s,h),s=!1,l=m,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(m=_9e(t,l),m===-1){h=rv.trim(t.slice(i,l)),a(h),s=!1,i=l+1;continue}else{l=m-1;continue}else if(m=S9e(t,l-1),m===-1){h=rv.trim(t.slice(i,l)),h=oae(h),a(s,h),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,oae(rv.trim(t.slice(i))))),rv.trim(n.join(" "))}function _9e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function x9e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function S9e(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function $9e(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function oae(t){return $9e(t)?t.substr(1,t.length-2):t}h4.parseTag=v9e;h4.parseAttr=w9e;var T9e=zX.FilterCSS,gd=kn,h_e=h4,E9e=h_e.parseTag,C9e=h_e.parseAttr,sD=FX;function yR(t){return t==null}function I9e(t){var e=sD.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=sD.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=sD.trim(t.slice(0,-1))),{html:t,closing:i}}function M9e(t){var e={};for(var i in t)e[i]=t[i];return e}function k9e(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function p_e(t){t=M9e(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=gd.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=k9e(t.whiteList||t.allowList):t.whiteList=gd.whiteList,t.onTag=t.onTag||gd.onTag,t.onTagAttr=t.onTagAttr||gd.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||gd.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||gd.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||gd.safeAttrValue,t.escapeHtml=t.escapeHtml||gd.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new T9e(t.css))}p_e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=gd.stripBlankChar(t)),i.allowCommentTag||(t=gd.stripCommentTag(t));var m=!1;i.stripIgnoreTagBody&&(m=gd.StripTagBody(i.stripIgnoreTagBody,s),s=m.onIgnoreTag);var y=E9e(t,function(v,w,x,S,C){var k={sourcePosition:v,position:w,isClosing:C,isWhite:Object.prototype.hasOwnProperty.call(r,x)},A=n(x,S,k);if(!yR(A))return A;if(k.isWhite){if(k.isClosing)return"</"+x+">";var R=I9e(S),D=r[x],B=C9e(R.html,function(z,W){var Y=sD.indexOf(D,z)!==-1,ee=o(x,z,W,Y);return yR(ee)?Y?(W=l(x,z,W,h),W?z+'="'+W+'"':z):(ee=a(x,z,W,Y),yR(ee)?void 0:ee):ee});return S="<"+x,B&&(S+=" "+B),R.closing&&(S+=" /"),S+=">",S}else return A=s(x,S,k),yR(A)?c(S):A},c);return m&&(y=m.remove(y)),y};var A9e=p_e;(function(t,e){var i=kn,r=h4,n=A9e;function s(a,l){var c=new n(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(m9,m9.exports);var Ox=m9.exports,O9e=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},P9e=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Kz(Kz({},Ox.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):Ox.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new Ox.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?Ox.escapeAttrValue(e):!s&&!n?Ox.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):Ox.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,i);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(O9e(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],h=r.validate(c,i);return h.isValid?a[l]=c:(n=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const L9e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],R9e=L9e.reduce((t,e)=>(t[e]=[],t),{}),D9e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],f_e=new P9e({whiteList:R9e,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(D9e.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),m_e="http://www.w3.org/",p4=`${m_e}2000/svg`,y_e=`${m_e}1999/xlink`;let aae=[],UX=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},jX=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),g_e=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},N9e=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(jX(t[r],e))return r}return-1},$B=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(jX(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},z9e=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},g9=[],v9=!1,v_e=t=>{(t.children||[]).forEach(v_e),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},lae=()=>{v9=!1,g9.forEach(v_e),g9.length=0},cae=t=>{g9.push(t),v9||(v9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(lae,{timeout:16}):setTimeout(lae,16))},uae=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),cae(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),cae(t))},F9e=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")w9(t,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let m=0;m<h;m++){let y=c[m];l[y]&&t.classList.add(y)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let m=0;m<h;m++){let y=c[m],v=l[y];v&&(g_e(v),i.styleApplyer(t,y,v))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let h=l;l=function(m){h.apply(this,[m]),m.target["oninput-value"]=m.target.value}}()),t[a]=l):i.namespace===p4?a==="href"?t.setAttributeNS(y_e,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=f_e.sanitize(l):b9(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function b9(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let eF,U9e=(t,e,i)=>{if(e)for(let r of e)vk(r,t,void 0,i)},b_e=(t,e,i)=>{U9e(t,e.children,i),e.text&&(t.textContent=e.text),F9e(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},vk=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(s-1),m=o.slice(s,l);h==="."?n.classList.add(m):h==="#"?n.id=m:(m==="svg"&&(r=UX(r,{namespace:p4})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,m):(n=t.domNode=t.domNode||a.createElement(m),m==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}b_e(n,t,r)}},w9=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},j9e=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=i[l],h=e[l];if(l==="class")h!==c&&(w9(t,h,!1),w9(t,c,!0));else if(l==="classes"){let m=t.classList,y=Object.keys(c),v=y.length;for(let w=0;w<v;w++){let x=y[w],S=!!c[x];S!==!!h[x]&&(n=!0,S?m.add(x):m.remove(x))}}else if(l==="styles"){let m=Object.keys(c),y=m.length;for(let v=0;v<y;v++){let w=m[v],x=c[w];x!==h[w]&&(n=!0,x?(g_e(x),r.styleApplyer(t,w,x)):r.styleApplyer(t,w,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||b9(t)){if(c!==h){let m=typeof c;m==="function"&&r.eventHandlerInterceptor||(r.namespace===p4?l==="href"?t.setAttributeNS(y_e,l,c):t.setAttribute(l,c):m==="string"?l==="innerHTML"?t[l]=f_e.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):b9(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),n=!0)}}else{let m=t[l];m!==c&&(t["oninput-value"]?m===t["oninput-value"]:c!==h)&&(t[l]=c,t["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},V9e=(t,e,i,r,n)=>{if(i===r)return!1;r=r||aae;let s,o=(i=i||aae).length,a=r.length,l=0,c=0,h=!1;for(;c<a;){let m=l<o?i[l]:void 0,y=r[c];if(m!==void 0&&jX(m,y))h=eF(m,y,n)||h,l++;else{let v=N9e(i,y,l+1);if(v>=0){for(s=l;s<v;s++)uae(i[s]),$B(i,s,t,"removed");h=eF(i[v],y,n)||h,l=v+1}else vk(y,e,l<o?i[l].domNode:void 0,n),z9e(y),$B(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)uae(i[s]),$B(i,s,t,"removed");return h};eF=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=UX(i,{namespace:p4})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=V9e(e,r,t.children,e.children,i)||s,s=j9e(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let gR=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,eF(r,i,e)},domNode:t.domNode});const B9e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let HM=t=>UX(B9e,t),Av={append:(t,e,i)=>(i=HM(i),vk(e,t,void 0,i),gR(e,i)),insertBefore:(t,e,i)=>(i=HM(i),vk(e,t.parentNode,t,i),gR(e,i)),merge:(t,e,i)=>(i=HM(i),e.domNode=t,b_e(t,e,i),gR(e,i)),replace:(t,e,i)=>(i=HM(i),vk(e,t.parentNode,t,i),t.parentNode.removeChild(t),gR(e,i))},w_e,G9e=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};w_e=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let H9e=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?w_e(i.children,n=>n.domNode===r):void 0}),i},q9e=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=G9e(n.currentTarget,s.domNode);o.reverse();let a,l=H9e(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},tF=t=>{let e,i,r=HM(t),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(m,y,v)=>{let w,x=()=>w;r.eventHandlerInterceptor=q9e(e,x,n),w=m(y,v(),r),a.push(w),l.push(v)},h=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let m=0;m<a.length;m++){let y=l[m]();n("rendered",void 0),a[m].update(y),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(m,y)=>{c(Av.append,m,y)},insertBefore:(m,y)=>{c(Av.insertBefore,m,y)},merge:(m,y)=>{c(Av.merge,m,y)},replace:(m,y)=>{c(Av.replace,m,y)},detach:m=>{for(let y=0;y<l.length;y++)if(l[y]===m)return l.splice(y,1),a.splice(y,1)[0];throw new Error("renderFunction was not found")}},e},Rg=class extends st{constructor(){super(...arguments),this.items=new Ze,this._watchUpdatingTracking=new b_,this._callbacks=new Map,this._projector=tF(),this._hiddenProjector=tF()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([p({readOnly:!0})],Rg.prototype,"surface",void 0),u([p({readOnly:!0})],Rg.prototype,"items",void 0),u([p({readOnly:!0})],Rg.prototype,"needsRender",null),u([p({readOnly:!0})],Rg.prototype,"_watchUpdatingTracking",void 0),u([p({readOnly:!0})],Rg.prototype,"updating",null),Rg=u([U("esri.views.overlay.ViewOverlay")],Rg);const dae=Rg,TB=[0,0];function W9e(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return TB[0]=i.left+((e==null?void 0:e.pageXOffset)??0),TB[1]=i.top+((e==null?void 0:e.pageYOffset)??0),TB}function hae(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function J9e(t){const e=document.createElement("div");return t.appendChild(e),e}const Px=16,JI=750,Z9e=512,Y9e=2,X9e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Px,time:JI},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Le(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),Le(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())})])}initialize(){this.addHandles([Le(()=>this.ui,(r,n)=>this._handleUIChange(r,n),gi),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),s=NX(r);if(s||typeof r!="string"||Ce.getLogger(this).error("#container",`element with id '${r}' not found`),n===s)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(hae(this.root),this._set("root",null)),this.userContent&&(iae(this.userContent,n),hae(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",iae(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const c=new dae;a.appendChild(c.surface),this._set("overlay",c),this.addHandles(Le(()=>c.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=CE({render:()=>{var m;return(m=this.overlay)==null?void 0:m.render()}}):this._overlayRenderTaskHandle=rn(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const n=this._get("ui");n!==r&&(n==null||n.destroy()),this._set("ui",r)}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,n,s){const o=this.position;return r-=o?o[0]:0,n-=o?o[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}containerToPage(r,n,s){const o=this.position;return r+=o?o[0]:0,n+=o?o[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(Le(()=>this.root,s=>{r.container=s?J9e(s):null},gi),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Px,r.time=JI;const n=CE({prepare:a=>{const l=this._measure(),c=this._freqInfo;if(c.time+=a.deltaTime,l&&(c.freq=Px,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const h=this._position();c.freq=h||l?Px:Math.min(JI,c.freq*Y9e),!l&&c.freq>=Z9e&&(n.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(a=>{r.freq=Px,r.time=JI,n.resume()});this.container!=null&&s.observe(this.container);const o=Mi(()=>s.disconnect());this.addHandles([oy(window,"resize",()=>{r.freq=Px,r.time=JI,n.resume()}),o,n],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,s=r?r.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return n===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:n,height:s}),!0)}_position(){const r=this.container,n=this.position,s=r&&W9e(r);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return u([p()],i.prototype,"container",null),u([p({readOnly:!0})],i.prototype,"focused",null),u([p({readOnly:!0})],i.prototype,"height",void 0),u([p()],i.prototype,"messagesCommon",void 0),u([p({type:dae})],i.prototype,"overlay",void 0),u([p({readOnly:!0})],i.prototype,"position",void 0),u([p({readOnly:!0})],i.prototype,"resizing",void 0),u([p({readOnly:!0})],i.prototype,"root",void 0),u([p({value:null,readOnly:!0})],i.prototype,"size",null),u([p({readOnly:!0})],i.prototype,"surface",void 0),u([p({readOnly:!0})],i.prototype,"suspended",void 0),u([p({nonNullable:!0})],i.prototype,"ui",null),u([p({readOnly:!0})],i.prototype,"userContent",void 0),u([p({readOnly:!0})],i.prototype,"width",void 0),u([p()],i.prototype,"widthBreakpoint",void 0),i=u([U("esri.views.DOMContainer")],i),i};function K9e(t,e,i){return Vw(t.map((r,n)=>e.apply(i,[r,n])))}async function Q9e(t,e,i){return(await Vw(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function VX(t){return{ok:!0,value:t}}function BX(t){return{ok:!1,error:t}}function e7e(t){return t!=null&&t.ok===!0?t.value:null}function t7e(t){return t!=null&&t.ok===!1?t.error:null}async function f4(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return VX(await t)}catch(e){return BX(e)}}async function i7e(t){try{return VX(await t)}catch(e){return Hh(e),BX(e)}}function m4(t,e){return new Dg(t,e)}let Dg=class extends st{get value(){return e7e(this._result)}get error(){return t7e(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=TE(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=VX(n),this._cleanup()},n=>{this._result=BX(n),this._cleanup()}),this._abortHandle=no(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=rn(this._abortHandle),this._abortController=null}};u([p()],Dg.prototype,"value",null),u([p()],Dg.prototype,"error",null),u([p()],Dg.prototype,"finished",null),u([p()],Dg.prototype,"promise",void 0),u([p()],Dg.prototype,"_result",void 0),Dg=u([U("esri.core.asyncUtils.ReactiveTask")],Dg);const __e=ve("mac")?"Meta":"Control",r7e=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),n7e=t=>r7e.has(t);let s7e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},Us=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new s7e(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const m=this._incoming[h.match.eventType];if(m){const y=m.indexOf(h);m.splice(y,1),o(),this._manager&&this._manager.updateDependencies()}},l=new o7e(s,r,{onPause:a,onRemove:a,onResume:h=>{const m=this._incoming[h.match.eventType];m&&!m.includes(h)&&(m.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new a7e(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},o7e=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},a7e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},l7e=class extends Us{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},c7e=class extends Us{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Q_(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},u7e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new Yge(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=$Ue(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)use(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)use(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},jc=class extends st{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=__e,this._latestPointerType="mouse",this._propertiesPool=new u7e({latestPointerLocation:p7e},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=zd.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,h,m)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,m,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ce.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)n7e(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new l7e((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new c7e,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],zd.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,zd.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new d7e(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new kA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new kA;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>this._onEventReceived(i,r))},disablePointerCapture:e}}};u([p({readOnly:!0})],jc.prototype,"hasPendingInputs",null),u([p({constructOnly:!0})],jc.prototype,"eventSource",void 0),u([p({constructOnly:!0})],jc.prototype,"recognizers",void 0),u([p()],jc.prototype,"_latestPointerType",void 0),u([p()],jc.prototype,"latestPointerType",null),u([p()],jc.prototype,"multiTouchActive",null),u([p({readOnly:!0})],jc.prototype,"latestPointerLocation",void 0),u([p()],jc.prototype,"_paused",void 0),u([p({readOnly:!0})],jc.prototype,"updating",null),jc=u([U("esri.views.input.InputManager")],jc);let d7e=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=nv.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=nv.STOPPED}shouldStopPropagation(){return(this._propagationState&nv.STOPPED)!==0}defer(e){this._propagationState|=nv.PAUSED;const i=(r,n)=>{this._propagationState&=~nv.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&nv.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var nv;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(nv||(nv={}));const zd={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let h7e=class{};const p7e=h7e;function vg(t){return t!=null&&"open"in t&&"declaredClass"in t}function pae(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const f7e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Le(()=>[this.ui,this.popup],([r,n],s)=>{const o="popup",a="manual";if(s){const[l,c]=s;l&&vg(c)&&(c.view=null,pae(c)&&(l.remove(c,o),c!==n&&n&&c.destroy()))}r&&vg(n)&&(n.view=this,pae(n)&&r.add(n,{key:o,position:a,internal:!0}))},Oa),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(vg(this.popup)?this.popup.viewModel.handleViewClick(r):r.defer(async()=>{await this.setupPopup(),vg(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},zd.WIDGET)]),Vp(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{$e(()=>import("./Popup-DLrcQCae.js").then(r=>r.P),__vite__mapDeps([141,142,57,143,144,145,146,56,54,55,11,16,147,148]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(vg(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void Ce.getLogger(this).error(new Q("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),vg(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,n),n)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!vg(this.popup))return this._popupSetupTask=m4(async n=>{const{default:s}=await $e(()=>import("./Popup-DLrcQCae.js").then(a=>a.P),__vite__mapDeps([141,142,57,143,144,145,146,56,54,55,11,16,147,148]));if(sr(n),!this.popup||vg(this.popup))return;const o=this.popup;delete o.open,delete o.close,this.popup=new s(o)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:n},s){const o=[],a=[];let l=!1;const c=Y5e(s,ve("popup-view-fetch-timeout")??y7e),h=v=>{const w=new m7e(v);return a.push(w),o.push(w.promise),w},m=v=>{const w=a.at(-1);return w&&w.layerView===v&&!l?w:h(v)};for(const v of n)"graphic"in v?(m(v.layerView).graphics.push(v.graphic),l=!1):(o.push(v.layerView.fetchPopupFeaturesAtLocation(v.mapPoint,c)),l=!0);a.map(v=>v.resolve(c));const y=Z5e(o).then(v=>v.filter(w=>!!w).flat());return{pendingFeatures:o,allGraphicsPromise:y,location:r}}async _getPopupHits(r,n){const{hits:s,location:o}=await this.popupHitTest(r);sr(n);const a=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,n)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;a.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&a.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n==null?void 0:n.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([p()],i.prototype,"popup",void 0),u([p()],i.prototype,"popupEnabled",void 0),i=u([U("esri.views.PopupView")],i),i};let m7e=class{constructor(e){this.layerView=e,this._resolver=Mo(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const y7e=5e3;function my(t,e,i=Ze){return e||(e=new i),e===t||(e.removeAll(),g7e(t)?e.addMany(t):t&&e.add(t)),e}function x_e(t){return t}function g7e(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var sv;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(sv||(sv={}));let v7e=class{constructor(){this._resolver=Mo(),this._status=sv.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=sv.RESOLVED,this._cleanUp()},()=>{this._status=sv.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===sv.RESOLVED}isRejected(){return this._status===sv.REJECTED}isFulfilled(){return this._status!==sv.PENDING}abort(){this._resolver.reject(Gi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Mo(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||ds(n)||this._resolver.reject(n)}),e.resolve()}};const S_e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new v7e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return i=u([U("esri.core.Promise")],i),i};let gu=class extends S_e(st){};gu=u([U("esri.core.Promise")],gu),function(t){t.EsriPromiseMixin=S_e}(gu||(gu={}));const b7e="not-loaded",w7e="loading",_7e="failed",fae="loaded",$_e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((l,c)=>{const h=OY(o,c);this.destroyed&&c(new Q("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{h&&h.remove()})});if(this.loadStatus===b7e){this._set("loadStatus",w7e);const l=this._loadController=new AbortController;s({signal:l.signal})}return n(),a}})),this.when(()=>{this._set("loadStatus",fae),this._loadController=null},n=>{this._set("loadStatus",_7e),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController&&(this._loadController=TE(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===fae}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new Q("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return u([p({readOnly:!0})],i.prototype,"loaded",null),u([p({readOnly:!0})],i.prototype,"loadError",void 0),u([p({clonable:!1})],i.prototype,"loadStatus",void 0),u([p({type:[Sc],readOnly:!0})],i.prototype,"loadWarnings",null),i=u([U("esri.core.Loadable")],i),i};let _s=class extends $_e(gu){};_s=u([U("esri.core.Loadable")],_s),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=$_e,t.isLoadable=e}(_s||(_s={}));async function y4(t,e){return await t.load(),x7e(t,e)}async function x7e(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Ze.isCollection(o)?o.forEach(a=>r(a)):_s.isLoadable(o)&&i.push(o))};e(r);let n=null;if(await Q9e(i,async s=>{const o=await f4(S7e(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function S7e(t){return"loadAll"in t&&typeof t.loadAll=="function"}let vR;function $7e(t){return vR&&!vR.destroyed||(vR=t()),vR}var _9;const T7e=new Et({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let fn=_9=class extends st{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new _9({categories:this.categories?ce(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=XU(this.extent,et.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>T7e.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};u([p()],fn.prototype,"categories",void 0),u([p()],fn.prototype,"disableExtraQuery",void 0),u([p({type:jt})],fn.prototype,"extent",void 0),u([p()],fn.prototype,"filter",void 0),u([p()],fn.prototype,"num",void 0),u([p()],fn.prototype,"query",void 0),u([p()],fn.prototype,"sortField",void 0),u([p()],fn.prototype,"sortOrder",null),u([p()],fn.prototype,"start",void 0),fn=_9=u([U("esri.portal.PortalQueryParams")],fn);var x9;let zn=x9=class extends ye{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new Q("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new x9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=hr(fn,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new fn,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new fn,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new fn({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new Q("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new fn({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new Q("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};u([p()],zn.prototype,"access",void 0),u([p({type:Date})],zn.prototype,"created",void 0),u([p()],zn.prototype,"description",void 0),u([p()],zn.prototype,"id",void 0),u([p()],zn.prototype,"isInvitationOnly",void 0),u([p({type:Date})],zn.prototype,"modified",void 0),u([p()],zn.prototype,"owner",void 0),u([p()],zn.prototype,"portal",void 0),u([p()],zn.prototype,"snippet",void 0),u([p()],zn.prototype,"sortField",void 0),u([p()],zn.prototype,"sortOrder",void 0),u([p()],zn.prototype,"sourceJSON",void 0),u([p()],zn.prototype,"tags",void 0),u([p()],zn.prototype,"thumbnail",void 0),u([p({readOnly:!0})],zn.prototype,"thumbnailUrl",null),u([p()],zn.prototype,"title",void 0),u([p({readOnly:!0})],zn.prototype,"url",null),zn=x9=u([U("esri.portal.PortalGroup")],zn);let j0=class extends st{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([p()],j0.prototype,"nextQueryParams",void 0),u([p()],j0.prototype,"queryParams",void 0),u([p()],j0.prototype,"results",void 0),u([p()],j0.prototype,"total",void 0),j0=u([U("esri.portal.PortalQueryResult")],j0);let Yf=class extends ye{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Q("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([p({type:Date})],Yf.prototype,"created",void 0),u([p()],Yf.prototype,"id",void 0),u([p()],Yf.prototype,"portal",void 0),u([p()],Yf.prototype,"title",void 0),u([p({readOnly:!0})],Yf.prototype,"url",null),u([p()],Yf.prototype,"username",void 0),Yf=u([U("esri.portal.PortalFolder")],Yf);var S9;let ir=S9=class extends ye{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,s);for(const a of o.results){const l=t.find(m=>a.itemId===m.id),c=a.success;let h=null;c?(l.id=null,l.portal=null):a.error&&(h=new Q("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:h})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=Yf.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=zn.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await $e(()=>Promise.resolve().then(()=>T_e),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new zn({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new Q("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new Q("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new S9({sourceJSON:t});return e.read(t),e}};u([p()],ir.prototype,"access",void 0),u([p({type:Date})],ir.prototype,"created",void 0),u([p()],ir.prototype,"culture",void 0),u([p()],ir.prototype,"description",void 0),u([p()],ir.prototype,"email",void 0),u([p()],ir.prototype,"favGroupId",void 0),u([p()],ir.prototype,"fullName",void 0),u([p()],ir.prototype,"id",void 0),u([p({type:Date})],ir.prototype,"modified",void 0),u([p()],ir.prototype,"orgId",void 0),u([p()],ir.prototype,"portal",void 0),u([p()],ir.prototype,"preferredView",void 0),u([p()],ir.prototype,"privileges",void 0),u([p()],ir.prototype,"region",void 0),u([p()],ir.prototype,"role",void 0),u([p()],ir.prototype,"roleId",void 0),u([p()],ir.prototype,"sourceJSON",void 0),u([p()],ir.prototype,"thumbnail",void 0),u([p({readOnly:!0})],ir.prototype,"thumbnailUrl",null),u([p()],ir.prototype,"units",void 0),u([p({readOnly:!0})],ir.prototype,"userContentUrl",null),u([p({readOnly:!0})],ir.prototype,"url",null),u([p()],ir.prototype,"username",void 0),u([p()],ir.prototype,"userLicenseTypeId",void 0),u([p()],ir.prototype,"userType",void 0),ir=S9=u([U("esri.portal.PortalUser")],ir);var Gl;let ZI;const mae={PortalGroup:()=>Promise.resolve({default:zn}),PortalItem:()=>$e(()=>Promise.resolve().then(()=>T_e),void 0),PortalUser:()=>Promise.resolve({default:ir})};var Qh;let Fe=(Qh=class extends ye.JSONSupportMixin(_s){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=hi.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){yae.unregister(this),this.defaultBasemap=xr(this.defaultBasemap),this.defaultDevBasemap=xr(this.defaultDevBasemap),this.defaultVectorBasemap=xr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=rn(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)hi.request.trustedServers.includes(i)||hi.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return ybe(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=ir.fromJSON(e),i.portal=this),i}load(e){const i=$e(async()=>{const{default:r}=await Promise.resolve().then(()=>Y7e);return{default:r}},void 0).then(({default:r})=>{sr(e),ZI=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var n;if(!this.hasAPIKey&&Tt){const s=Tt;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Gl.AUTH_MODE_AUTO&&this.authMode!==Gl.AUTH_MODE_NO_PROMPT||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",E7e(new WeakRef(this))),yae.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await $e(async()=>{const{default:r}=await import("./ElevationLayer-CqqA-gDl.js");return{default:r}},__vite__mapDeps([149,150,151,152,57,153]))).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if((i==null?void 0:i.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new fn;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(n=>n.type==="Web Scene");return r?new ZI({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):xc(e)?Promise.reject(Gi()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new fn({num:100,sortField:"title"});if(i!=null&&i.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return xc(e)?Promise.reject(Gi()):Promise.resolve([])}fetchRegions(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Tl();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){var r;const i=((r=this.user)==null?void 0:r.culture)||this.culture||Tl();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return $7e(()=>new Gl)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Tl().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=hr(fn,i),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then(l=>{const c=s.clone();return c.start=l.nextStart,new j0({nextQueryParams:c,queryParams:s,total:l.total,results:Gl._resultsToTypedArray(a,{portal:this},l,n)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(Hh(c),l)));return r&&mae[r]?mae[r]().then(({default:a})=>(sr(n),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Q("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Gl.AUTH_MODE_ANONYMOUS||this.authMode===Gl.AUTH_MODE_NO_PROMPT&&!Tt)return Promise.reject(new Q("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Tt?Tt.getCredential(this.restUrl,{prompt:this.authMode!==Gl.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){var r;const i=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(n=>{const s=Gl._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():n)).then(()=>s,()=>s)})}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===Gl.AUTH_MODE_ANONYMOUS||this.authMode===Gl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=i,h={authMode:n,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(h.withCredentials=!0),Ot(this._normalizeSSL(e),h).then(m=>m.data)}toJSON(){throw new Q("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Gl({sourceJSON:e})}_getHelperService(e){const i=this.helperServices&&this.helperServices[e];if(!i)throw new Q("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new fn;r.query=e||(OH()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,i);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new ZI({portalItem:a})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(OH())return[];const n=new fn({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const o=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=o.sortField||"name",n.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(n,i);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new ZI({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=ZI.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const o=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,i);return typeof l.load=="function"&&l.load(o),l}))}else s=[];return s}},Gl=Qh,Qh.AUTH_MODE_ANONYMOUS="anonymous",Qh.AUTH_MODE_AUTO="auto",Qh.AUTH_MODE_IMMEDIATE="immediate",Qh.AUTH_MODE_NO_PROMPT="no-prompt",Qh);u([p()],Fe.prototype,"access",void 0),u([p()],Fe.prototype,"allSSL",void 0),u([p()],Fe.prototype,"authMode",void 0),u([p()],Fe.prototype,"authorizedCrossOriginDomains",void 0),u([Ue("authorizedCrossOriginDomains")],Fe.prototype,"readAuthorizedCrossOriginDomains",null),u([p()],Fe.prototype,"basemapGalleryGroupQuery",void 0),u([p({json:{name:"3DBasemapGalleryGroupQuery"}})],Fe.prototype,"basemapGalleryGroupQuery3D",void 0),u([p()],Fe.prototype,"bingKey",void 0),u([p()],Fe.prototype,"canListApps",void 0),u([p()],Fe.prototype,"canListData",void 0),u([p()],Fe.prototype,"canListPreProvisionedItems",void 0),u([p()],Fe.prototype,"canProvisionDirectPurchase",void 0),u([p()],Fe.prototype,"canSearchPublic",void 0),u([p()],Fe.prototype,"canShareBingPublic",void 0),u([p()],Fe.prototype,"canSharePublic",void 0),u([p()],Fe.prototype,"canSignInArcGIS",void 0),u([p()],Fe.prototype,"canSignInIDP",void 0),u([p()],Fe.prototype,"colorSetsGroupQuery",void 0),u([p()],Fe.prototype,"commentsEnabled",void 0),u([p({type:Date})],Fe.prototype,"created",void 0),u([p()],Fe.prototype,"credential",void 0),u([p()],Fe.prototype,"culture",void 0),u([p()],Fe.prototype,"currentVersion",void 0),u([p()],Fe.prototype,"customBaseUrl",void 0),u([p()],Fe.prototype,"default3DBasemapQuery",void 0),u([p()],Fe.prototype,"defaultBasemap",void 0),u([Ue("defaultBasemap")],Fe.prototype,"readDefaultBasemap",null),u([p()],Fe.prototype,"defaultDevBasemap",void 0),u([Ue("defaultDevBasemap")],Fe.prototype,"readDefaultDevBasemap",null),u([p({type:jt})],Fe.prototype,"defaultExtent",void 0),u([p()],Fe.prototype,"defaultVectorBasemap",void 0),u([Ue("defaultVectorBasemap")],Fe.prototype,"readDefaultVectorBasemap",null),u([p()],Fe.prototype,"description",void 0),u([p()],Fe.prototype,"devBasemapGalleryGroupQuery",void 0),u([p()],Fe.prototype,"eueiEnabled",void 0),u([p({readOnly:!0})],Fe.prototype,"extraQuery",null),u([p()],Fe.prototype,"featuredGroups",void 0),u([p()],Fe.prototype,"featuredItemsGroupQuery",void 0),u([p()],Fe.prototype,"galleryTemplatesGroupQuery",void 0),u([p()],Fe.prototype,"layoutGroupQuery",void 0),u([p()],Fe.prototype,"livingAtlasGroupQuery",void 0),u([p({readOnly:!0})],Fe.prototype,"hasAPIKey",null),u([p()],Fe.prototype,"hasCategorySchema",void 0),u([p()],Fe.prototype,"hasClassificationSchema",void 0),u([p()],Fe.prototype,"helpBase",void 0),u([p()],Fe.prototype,"helperServices",void 0),u([p()],Fe.prototype,"helpMap",void 0),u([p()],Fe.prototype,"homePageFeaturedContent",void 0),u([p()],Fe.prototype,"homePageFeaturedContentCount",void 0),u([p()],Fe.prototype,"httpPort",void 0),u([p()],Fe.prototype,"httpsPort",void 0),u([p()],Fe.prototype,"id",void 0),u([p()],Fe.prototype,"ipCntryCode",void 0),u([p({readOnly:!0})],Fe.prototype,"isOrganization",null),u([p()],Fe.prototype,"isPortal",void 0),u([p()],Fe.prototype,"isReadOnly",void 0),u([p({readOnly:!0})],Fe.prototype,"itemPageUrl",null),u([p()],Fe.prototype,"layerTemplatesGroupQuery",void 0),u([p()],Fe.prototype,"maxTokenExpirationMinutes",void 0),u([p({type:Date})],Fe.prototype,"modified",void 0),u([p()],Fe.prototype,"name",void 0),u([p()],Fe.prototype,"portalHostname",void 0),u([p()],Fe.prototype,"portalMode",void 0),u([p()],Fe.prototype,"portalProperties",void 0),u([p()],Fe.prototype,"region",void 0),u([p()],Fe.prototype,"recycleBinEnabled",void 0),u([p({readOnly:!0})],Fe.prototype,"restUrl",null),u([p()],Fe.prototype,"rotatorPanels",void 0),u([p()],Fe.prototype,"showHomePageDescription",void 0),u([p()],Fe.prototype,"sourceJSON",void 0),u([p()],Fe.prototype,"staticImagesUrl",void 0),u([p({json:{name:"2DStylesGroupQuery"}})],Fe.prototype,"stylesGroupQuery2d",void 0),u([p({json:{name:"stylesGroupQuery"}})],Fe.prototype,"stylesGroupQuery3d",void 0),u([p()],Fe.prototype,"supportsHostedServices",void 0),u([p()],Fe.prototype,"symbolSetsGroupQuery",void 0),u([p()],Fe.prototype,"templatesGroupQuery",void 0),u([p()],Fe.prototype,"thumbnail",void 0),u([p({readOnly:!0})],Fe.prototype,"thumbnailUrl",null),u([p()],Fe.prototype,"units",void 0),u([p()],Fe.prototype,"url",void 0),u([p()],Fe.prototype,"urlKey",void 0),u([Ue("urlKey")],Fe.prototype,"readUrlKey",null),u([p()],Fe.prototype,"user",void 0),u([Ue("user")],Fe.prototype,"readUser",null),u([p()],Fe.prototype,"use3dBasemaps",void 0),u([p()],Fe.prototype,"useDefault3dBasemap",void 0),u([p()],Fe.prototype,"useStandardizedQuery",void 0),u([p()],Fe.prototype,"useVectorBasemaps",void 0),u([p()],Fe.prototype,"vectorBasemapGalleryGroupQuery",void 0),Fe=Gl=u([U("esri.portal.Portal")],Fe);const yae=new FinalizationRegistry(t=>{t.remove()});function E7e(t){const e=Tt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Xf=class extends st{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:gae(e.path,e.portalItem)}:e}set path(e){e!=null&&$l(e)?Ce.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return gae(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new Q("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResources:r}=await $e(()=>import("./resourceUtils-Dl50Z1TI.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function gae(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&$l(t)&&(t=KY(t,e.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([p()],Xf.prototype,"portalItem",void 0),u([p({type:String,value:null})],Xf.prototype,"path",null),u([_i("path")],Xf.prototype,"_castPath",null),u([p({type:String,readOnly:!0})],Xf.prototype,"url",null),u([p({type:String,readOnly:!0})],Xf.prototype,"cdnUrl",null),u([p({type:String,readOnly:!0})],Xf.prototype,"itemRelativeUrl",null),Xf=u([U("esri.portal.PortalItemResource")],Xf);let qw=class extends st{constructor(e){super(e),this.created=null,this.rating=null}};u([p({type:Date})],qw.prototype,"created",void 0),u([p()],qw.prototype,"rating",void 0),qw=u([U("esri.portal.PortalRating")],qw);var V0;const C7e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),I7e=new Set(["KML","GeoJson","CSV"]);let At=V0=class extends ye.JSONSupportMixin(_s){static from(t){return S1(V0,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t!=null&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new jt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var v;const t=((v=this.type)==null?void 0:v.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1,m=!1,y=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),m=e.includes("Relational"),n=c||m?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(y=e.includes("Map"),n=y?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":"maps",n?zr(i+n+r+".png"):null}get isLayer(){return this.type!=null&&C7e.has(this.type)}get itemCdnUrl(){return rX(this.itemUrl)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.id);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=Fe.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof qw?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new qw({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:ce(this.applicationProxies),avgRating:this.avgRating,categories:ce(this.categories),classification:ce(this.classification),created:ce(this.created),culture:this.culture,description:this.description,extent:ce(this.extent),groupCategories:ce(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ce(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ce(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ce(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ce(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new V0({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var e;const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]=(e=t[i])==null?void 0:e.join(", ");for(const i of["extent","classification"]){const r=t[i];r&&(t[i]=JSON.stringify(r))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new qw(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},V0)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new Q("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new Q("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new V0({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Sy(e)?r.query={data:e}:r.query={url:na(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Q("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await $e(()=>import("./resourceUtils-Dl50Z1TI.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await $e(()=>import("./resourceUtils-Dl50Z1TI.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await $e(()=>import("./resourceUtils-Dl50Z1TI.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new Q("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await $e(()=>import("./resourceUtils-Dl50Z1TI.js"),[]);return e(this,t)}resourceFromPath(t){return new Xf({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:ce(this.categories),classification:ce(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ce(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ce(this.typeKeywords),url:this.url};return IY(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new V0({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};u([p({type:["private","shared","org","public"]})],At.prototype,"access",void 0),u([p()],At.prototype,"accessInformation",void 0),u([p({type:String})],At.prototype,"apiKey",void 0),u([p({json:{read:{source:"appProxies"}}})],At.prototype,"applicationProxies",void 0),u([p()],At.prototype,"avgRating",void 0),u([p()],At.prototype,"categories",void 0),u([p()],At.prototype,"classification",void 0),u([p({type:Date})],At.prototype,"created",void 0),u([p()],At.prototype,"culture",void 0),u([p()],At.prototype,"description",void 0),u([p({readOnly:!0})],At.prototype,"displayName",null),u([p({type:jt})],At.prototype,"extent",void 0),u([Ue("extent")],At.prototype,"readExtent",null),u([p()],At.prototype,"groupCategories",void 0),u([p({readOnly:!0})],At.prototype,"iconUrl",null),u([p()],At.prototype,"id",void 0),u([p({readOnly:!0})],At.prototype,"isLayer",null),u([p({type:Boolean,readOnly:!0})],At.prototype,"isOrgItem",void 0),u([p()],At.prototype,"itemControl",void 0),u([p({readOnly:!0})],At.prototype,"itemPageUrl",null),u([p({readOnly:!0})],At.prototype,"itemUrl",null),u([p()],At.prototype,"licenseInfo",void 0),u([p({type:Date})],At.prototype,"modified",void 0),u([p()],At.prototype,"name",void 0),u([p()],At.prototype,"numComments",void 0),u([p()],At.prototype,"numRatings",void 0),u([p()],At.prototype,"numViews",void 0),u([p()],At.prototype,"owner",void 0),u([p()],At.prototype,"ownerFolder",void 0),u([p({type:Fe})],At.prototype,"portal",void 0),u([p()],At.prototype,"screenshots",void 0),u([p()],At.prototype,"size",void 0),u([p()],At.prototype,"snippet",void 0),u([p()],At.prototype,"sourceJSON",void 0),u([p({type:String})],At.prototype,"sourceUrl",void 0),u([p({type:String})],At.prototype,"spatialReference",void 0),u([p()],At.prototype,"tags",void 0),u([p()],At.prototype,"thumbnail",void 0),u([p({readOnly:!0})],At.prototype,"thumbnailUrl",null),u([p()],At.prototype,"title",void 0),u([p()],At.prototype,"type",void 0),u([p()],At.prototype,"typeKeywords",void 0),u([p({type:String,json:{read(t,e){var i;if(I7e.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],At.prototype,"url",void 0),u([p({readOnly:!0})],At.prototype,"userItemUrl",null),At=V0=u([U("esri.portal.PortalItem")],At);const T_e=Object.freeze(Object.defineProperty({__proto__:null,get default(){return At}},Symbol.toStringTag,{value:"Module"}));async function M7e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await u4("esri/t9n/basemaps");return i[t]||i[e]}const FE={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return zr("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return zr("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return zr("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return zr("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return zr("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return zr("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let Kf=class extends st{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:Mwe(e??Tl())??"global";return i=i==="no"?"nb":i,i}};u([p()],Kf.prototype,"apiKey",void 0),u([p()],Kf.prototype,"id",void 0),u([p()],Kf.prototype,"language",void 0),u([p()],Kf.prototype,"places",void 0),u([p()],Kf.prototype,"serviceUrl",void 0),u([p()],Kf.prototype,"worldview",void 0),Kf=u([U("esri.support.BasemapStyle")],Kf);const k7e=Kf,bR=new WeakMap;function g4(t){return!t.destroyed&&(bR.has(t)||t.addHandles([Le(()=>{const e=t.parent;return!(!e||!("type"in e))&&(e.type==="catalog-dynamic-group"||g4(e))},e=>bR.set(t,e),Oa),Mi(()=>bR.delete(t))]),bR.get(t))}function vae(t,e){var a;const i=t.parent,r=t.layer;if((r==null?void 0:r.type)!=="map-image"||!r.sourceJSON||!i)return!1;const n=r.sourceJSON.layers;if(!n)return!1;const s=n.find(l=>t.id===l.id),o=e==="footprints"?"Feature Layer":"Catalog Dynamic Group Layer";return(s==null?void 0:s.type)===o&&((a=n.find(l=>l.id===i.id))==null?void 0:a.type)==="Catalog Layer"}function A7e(t){return C_e(t)||L7e(t)}function E_e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function O7e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function P7e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function L7e(t){return(t==null?void 0:t.type)==="scene"}function bae(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function mv(t){return(t==null?void 0:t.type)==="subtype-sublayer"}function C_e(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function R7e(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const mMt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function $9(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function yMt(t){return t==="integrated-mesh"||t==="integrated-mesh-3dtiles"}function v4(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function gMt(t){var i;const e=t==null?void 0:t.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&((i=t==null?void 0:t.source)==null?void 0:i.type)==="feature-layer"}function D7e(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function GX(t,e){const i=Tt==null?void 0:Tt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await Ot(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function I_e(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function N7e(t){return I_e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function z7e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function F7e(t){return!!z7e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function vMt(t){const e=new Ze;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||g4(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function U7e(t,e){return null}function bMt(t){return null}function T9(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function wMt(t,e){!e||!T9(t)||U7e(t.url)}const j7e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),M_e=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),V7e=new Set([...M_e,"link-chart"]);function B7e(t){switch(t.layerContainerType){case"basemap":return j7e;case"operational-layers":return t.origin==="link-chart"?V7e:M_e;default:return null}}function G7e(t,e){if(e.restrictedWebMapWriting){const i=B7e(e);return i==null||i.has(t.type)&&!v4(t)}return!0}function H7e(t,e){var i;if(e)if(v4(t)){const r=Zm("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&wae(t,n)}else t.type!=="group"&&wae(t,e)}function wae(t,e){"maxScale"in t&&(e.maxScale=Ez(t.maxScale)??void 0),"minScale"in t&&(e.minScale=Ez(t.minScale)??void 0)}function q7e(t,e){if(H7e(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=Ez(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(v4(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function E9(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new Q("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(v4(t)&&!t.isTable)e=t.resourceInfo;else if(G7e(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&q7e(t,e=ce(e)),e}var qM;let W7e=0,Hl=qM=class extends ye.JSONSupportMixin(_s){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+W7e++,this.baseLayers=new Ze,this.referenceLayers=new Ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Ce.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{Ce.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroyed||i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroyed||i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=xr(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",my(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=E9(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&r.push(s)}),this.referenceLayers.forEach(n=>{const s=E9(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",my(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return y4(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>hz(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>hz(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new qM({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=ce(r);return n.url&&Hp(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Hp(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;sr(t);const n=[];if(e){const s=e.context?e.context.url:null;if(n.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const o=e.data.id;n.push(M7e(o).then(a=>{a&&this.read({title:a},e.context)}))}}else i?n.push(this._loadFromItem(i,t)):r&&n.push(this._loadFromStylesService(r,t));await Promise.all(n)}async _loadLayersFromJSON(t,e,i){var l,c;const r=(l=this.resourceInfo)==null?void 0:l.context,n=((c=this.portalItem)==null?void 0:c.portal)||(r==null?void 0:r.portal)||null,s=Z7e[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await $e(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-Dm4dyLCS.js");return{populateOperationalLayers:h}},__vite__mapDeps([154,155,156,157,158,159])),a=[];if(sr(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const h={context:{...r,origin:s,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},m=w=>s==="web-scene"&&w.layerType==="ArcGISSceneServiceLayer"||w.isReference,y=o(this.baseLayers,t.baseMapLayers.filter(w=>!m(w)),h);a.push(y);const v=o(this.referenceLayers,t.baseMapLayers.filter(m),h);a.push(v)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=nn(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:J7e[t.type||""]??"web-map",portal:t.portal||Fe.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||Fe.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}async _loadFromStylesService(t,e){const i=t.serviceUrl.endsWith("/webmaps")?t.serviceUrl.slice(0,-8):t.serviceUrl,r=`${i}/styles/${t.id}/self`,n=`${i}/webmaps/${t.id}`,s=t.apiKey??hi.apiKeys.basemapStyles,[o,a]=await Promise.all([(await Ot(r,{query:{token:s},signal:e==null?void 0:e.signal})).data,(await Ot(n,{query:{language:t.languageParameter,places:t.places,worldview:t.worldview,token:s},signal:e==null?void 0:e.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=o.thumbnailUrl);const l=nn(n);if(this._set("resourceInfo",{data:a.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:a.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,e),s)for(const c of[...this.baseLayers,...this.referenceLayers])"apiKey"in c&&(c.apiKey=s)}static fromId(t){const e=FE[t];return e?e.itemId?new qM({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):qM.fromJSON(e,e.is3d?{origin:"web-scene",portal:new Fe({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}};u([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ze}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Hl.prototype,"baseLayers",null),u([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],Hl.prototype,"id",void 0),u([p({type:At})],Hl.prototype,"portalItem",void 0),u([p()],Hl.prototype,"referenceLayers",null),u([p({readOnly:!0})],Hl.prototype,"resourceInfo",void 0),u([p({type:et})],Hl.prototype,"spatialReference",void 0),u([p({type:k7e})],Hl.prototype,"style",void 0),u([p()],Hl.prototype,"thumbnailUrl",void 0),u([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Hl.prototype,"title",void 0),u([qe("title")],Hl.prototype,"writeTitle",null),Hl=qM=u([U("esri.Basemap")],Hl);const J7e={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Z7e={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Vv=Hl,Y7e=Object.freeze(Object.defineProperty({__proto__:null,default:Vv},Symbol.toStringTag,{value:"Module"})),iF={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function k_e(t){return!!iF[t]||!!iF[t.toLowerCase()]}function HX(t){return iF[t]??iF[t.toLowerCase()]}function X7e(t){return[...HX(t)]}function EB(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function A_e(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*EB(o,s,n+1/3)),Math.round(255*EB(o,s,n)),Math.round(255*EB(o,s,n-1/3)),r]}function K7e(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}function O_e(t){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===5?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function P_e(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){const n=i[0];if(n.charAt(n.length-1)==="%"){const s=i.map(o=>2.56*parseFloat(o));return i.length===4&&(s[3]=parseFloat(i[3])),_ae(s)}return _ae(i.map(s=>parseFloat(s)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return A_e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]))}return null}function _ae(t){return t[0]=J$(t[0]),t[1]=J$(t[1]),t[2]=J$(t[2]),t[3]=t.length===4?R_e(t[3]):1,t}function L_e(t){let e=k_e(t)?HX(t):null;return e??(e=P_e(t)),e??(e=O_e(t)),e}function _Mt(t){const e=L_e(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function R_e(t){return D_e(t,0,1)}function J$(t){return Math.round(D_e(t,0,255))}function D_e(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const xMt=2.2;function wR(t){return da(zY(t),0,255)}function _R(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let oD=class el{static blendColors(e,i,r,n=new el){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=P_e(e);return r?el.fromArray(r,i):null}static fromHex(e,i=new el){const r=O_e(e);return r?el.fromArray(r,i):null}static fromArray(e,i=new el){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=L_e(e);return r?el.fromArray(r,i):null}static fromJSON(e){return e!=null?new el([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?el.fromString(e,this):Array.isArray(e)?el.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof el||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,o=`#${_R(this.r,n)}${_R(this.g,n)}${_R(this.b,n)}${s?_R(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=el.AlphaMode.ALWAYS){const i=wR(this.r),r=wR(this.g),n=wR(this.b);return e===el.AlphaMode.ALWAYS||this.a!==1?[i,r,n,wR(255*this.a)]:[i,r,n]}clone(){return new el(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=J$(this.r),this.g=J$(this.g),this.b=J$(this.b),this.a=R_e(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};oD.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(oD||(oD={}));const Ye=oD;var C9;let aD=C9=class extends ye{constructor(t){super(t),this.type="none"}clone(){return new C9({type:this.type})}};u([at({none:"none",stayAbove:"stay-above"}),p({json:{write:{isRequired:!0}}})],aD.prototype,"type",void 0),aD=C9=u([U("esri.ground.NavigationConstraint")],aD);const Q7e=Symbol("GroundInstance");function b4(t){const e=zY(100*(1-t));return Math.max(0,Math.min(e,100))}function RA(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var xae,I9,Kfe;let Qf=I9=(Kfe=class extends ye.JSONSupportMixin(_s){constructor(t){super(t),this[xae]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ze;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Ce.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{ds(t)||Ce.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)xr(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get layers(){return this._get("layers")}set layers(t){this._set("layers",my(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};g5e(s)().write(o,r)&&n.push(o)}else r!=null&&r.messages&&r.messages.push(new Q("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return y4(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await $e(()=>import("./ElevationQuery-DKIBB0ri.js"),[]);sr(e);const r=new i,n=this.layers.filter(Sae).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await $e(()=>import("./ElevationQuery-DKIBB0ri.js"),[]);sr(e);const r=new i,n=this.layers.filter(Sae).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:ce(this.surfaceColor),navigationConstraint:ce(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new I9({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await $e(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-Dm4dyLCS.js");return{populateOperationalLayers:l}},__vite__mapDeps([154,155,156,157,158,159]));sr(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},xae=Q7e,Kfe);function eqe(t){return t&&"createElevationSampler"in t}function Sae(t){return t.type==="elevation"||eqe(t)}u([p({json:{read:!1,write:{isRequired:!0}}})],Qf.prototype,"layers",null),u([qe("layers")],Qf.prototype,"writeLayers",null),u([p({readOnly:!0})],Qf.prototype,"resourceInfo",void 0),u([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:fi,read:{reader:RA,source:"transparency"},write:{writer:(t,e)=>{e.transparency=b4(t)},target:"transparency"}}})],Qf.prototype,"opacity",void 0),u([p({type:Ye,json:{type:[fi],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Qf.prototype,"surfaceColor",void 0),u([p({type:aD,json:{write:!0}})],Qf.prototype,"navigationConstraint",void 0),Qf=I9=u([U("esri.Ground")],Qf);const rF=Qf,tqe="randomUUID"in crypto;function xC(){if(tqe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function SMt(){return`{${xC().toUpperCase()}}`}function iqe(){return`{${xC()}}`}function rqe(t){const e=t.toUpperCase();return t[0]!=="{"?`{${e}}`:e}const Lx={Base64:0,Hex:1,String:2,Raw:3},Z$=8,N_e=(1<<Z$)-1;function Ov(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function nqe(t){const e=[];for(let i=0,r=t.length*Z$;i<r;i+=Z$)e[i>>5]|=(t.charCodeAt(i/Z$)&N_e)<<i%32;return e}function sqe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=Z$)e.push(String.fromCharCode(t[i>>5]>>>i%32&N_e));return e.join("")}function oqe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function aqe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function lqe(t,e){return t<<e|t>>>32-e}function w4(t,e,i,r,n,s){return Ov(lqe(Ov(Ov(e,t),Ov(r,s)),n),i)}function No(t,e,i,r,n,s,o){return w4(e&i|~e&r,t,e,n,s,o)}function zo(t,e,i,r,n,s,o){return w4(e&r|i&~r,t,e,n,s,o)}function Fo(t,e,i,r,n,s,o){return w4(e^i^r,t,e,n,s,o)}function Uo(t,e,i,r,n,s,o){return w4(i^(e|~r),t,e,n,s,o)}function cqe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,c=n,h=s;i=No(i,r,n,s,t[o],7,-680876936),s=No(s,i,r,n,t[o+1],12,-389564586),n=No(n,s,i,r,t[o+2],17,606105819),r=No(r,n,s,i,t[o+3],22,-1044525330),i=No(i,r,n,s,t[o+4],7,-176418897),s=No(s,i,r,n,t[o+5],12,1200080426),n=No(n,s,i,r,t[o+6],17,-1473231341),r=No(r,n,s,i,t[o+7],22,-45705983),i=No(i,r,n,s,t[o+8],7,1770035416),s=No(s,i,r,n,t[o+9],12,-1958414417),n=No(n,s,i,r,t[o+10],17,-42063),r=No(r,n,s,i,t[o+11],22,-1990404162),i=No(i,r,n,s,t[o+12],7,1804603682),s=No(s,i,r,n,t[o+13],12,-40341101),n=No(n,s,i,r,t[o+14],17,-1502002290),r=No(r,n,s,i,t[o+15],22,1236535329),i=zo(i,r,n,s,t[o+1],5,-165796510),s=zo(s,i,r,n,t[o+6],9,-1069501632),n=zo(n,s,i,r,t[o+11],14,643717713),r=zo(r,n,s,i,t[o],20,-373897302),i=zo(i,r,n,s,t[o+5],5,-701558691),s=zo(s,i,r,n,t[o+10],9,38016083),n=zo(n,s,i,r,t[o+15],14,-660478335),r=zo(r,n,s,i,t[o+4],20,-405537848),i=zo(i,r,n,s,t[o+9],5,568446438),s=zo(s,i,r,n,t[o+14],9,-1019803690),n=zo(n,s,i,r,t[o+3],14,-187363961),r=zo(r,n,s,i,t[o+8],20,1163531501),i=zo(i,r,n,s,t[o+13],5,-1444681467),s=zo(s,i,r,n,t[o+2],9,-51403784),n=zo(n,s,i,r,t[o+7],14,1735328473),r=zo(r,n,s,i,t[o+12],20,-1926607734),i=Fo(i,r,n,s,t[o+5],4,-378558),s=Fo(s,i,r,n,t[o+8],11,-2022574463),n=Fo(n,s,i,r,t[o+11],16,1839030562),r=Fo(r,n,s,i,t[o+14],23,-35309556),i=Fo(i,r,n,s,t[o+1],4,-1530992060),s=Fo(s,i,r,n,t[o+4],11,1272893353),n=Fo(n,s,i,r,t[o+7],16,-155497632),r=Fo(r,n,s,i,t[o+10],23,-1094730640),i=Fo(i,r,n,s,t[o+13],4,681279174),s=Fo(s,i,r,n,t[o],11,-358537222),n=Fo(n,s,i,r,t[o+3],16,-722521979),r=Fo(r,n,s,i,t[o+6],23,76029189),i=Fo(i,r,n,s,t[o+9],4,-640364487),s=Fo(s,i,r,n,t[o+12],11,-421815835),n=Fo(n,s,i,r,t[o+15],16,530742520),r=Fo(r,n,s,i,t[o+2],23,-995338651),i=Uo(i,r,n,s,t[o],6,-198630844),s=Uo(s,i,r,n,t[o+7],10,1126891415),n=Uo(n,s,i,r,t[o+14],15,-1416354905),r=Uo(r,n,s,i,t[o+5],21,-57434055),i=Uo(i,r,n,s,t[o+12],6,1700485571),s=Uo(s,i,r,n,t[o+3],10,-1894986606),n=Uo(n,s,i,r,t[o+10],15,-1051523),r=Uo(r,n,s,i,t[o+1],21,-2054922799),i=Uo(i,r,n,s,t[o+8],6,1873313359),s=Uo(s,i,r,n,t[o+15],10,-30611744),n=Uo(n,s,i,r,t[o+6],15,-1560198380),r=Uo(r,n,s,i,t[o+13],21,1309151649),i=Uo(i,r,n,s,t[o+4],6,-145523070),s=Uo(s,i,r,n,t[o+11],10,-1120210379),n=Uo(n,s,i,r,t[o+2],15,718787259),r=Uo(r,n,s,i,t[o+9],21,-343485551),i=Ov(i,a),r=Ov(r,l),n=Ov(n,c),s=Ov(s,h)}return[i,r,n,s]}function _4(t,e=Lx.Hex){const i=e||Lx.Base64,r=cqe(nqe(t),t.length*Z$);switch(i){case Lx.Raw:return r;case Lx.Hex:return oqe(r);case Lx.String:return sqe(r);case Lx.Base64:return aqe(r)}}function uqe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function M9(t){return qX[dqe(t)]||pqe}function dqe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:hqe(t.url)}function hqe(t){const e=nbe(t);return k9[e]||z_e}const qX={},z_e="text/plain",pqe=qX[z_e],k9={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in k9)qX[k9[t]]=t;function fqe(t){const e=(t==null?void 0:t.origins)??[void 0];return(i,r)=>{const n=mqe(t,i,r);for(const s of e){const o=FY(i,s,r);for(const a in n)o[a]=n[a]}}}function mqe(t,e,i){if((t==null?void 0:t.type)==="resource")return yqe(t,e,i);switch((t==null?void 0:t.type)??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=zje;return{read:r,write:n}}}}function yqe(t,e,i){var n,s;const r=BO(e,i);return{type:String,read:(o,a,l)=>{const c=qU(o,a,l);return r.type===String?c:typeof r.type=="function"?new r.type({url:c}):void 0},write:{isRequired:(s=(n=r.json)==null?void 0:n.write)==null?void 0:s.isRequired,writer(o,a,l,c){if(!(c!=null&&c.resources))return typeof o=="string"?void(a[l]=r1(o,c)):void(a[l]=o.write({},c));const h=bqe(o),m=r1(h,{...c,verifyItemRelativeUrls:c!=null&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},IE.NO),y=r.type!==String&&(!uqe(this)||(c==null?void 0:c.origin)&&this.originIdOf(i)>Ym(c.origin)),v={object:this,propertyName:i,value:o,targetUrl:m,dest:a,targetPropertyName:l,context:c,params:t};c!=null&&c.portalItem&&m&&!$l(m)?y&&(t!=null&&t.contentAddressed)?A9(v):y?gqe(v):vqe(v):c!=null&&c.portalItem&&(m==null||cbe(m)!=null||fC(m)||y)?A9(v):a[l]=m}}}}function A9(t){var w;const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:o}=t;if(!n.portalItem)return;const a=ube(e),l=U_e(r,e,n);if(i!=null&&i.contentAddressed&&l.type!=="json")return void((w=n.messages)==null?void 0:w.push(new Q("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l})));const c=i!=null&&i.contentAddressed&&l.type==="json"?_4(l.jsonString):(a==null?void 0:a.filename)??xC(),h=i1((i==null?void 0:i.prefix)??(a==null?void 0:a.prefix),c),m=`${h}.${M9(l)}`;if(i!=null&&i.contentAddressed&&n.resources&&l.type==="json"){const x=n.resources.toKeep.find(({resource:S})=>S.path===m)??n.resources.toAdd.find(({resource:S})=>S.path===m);if(x)return void(s[o]=x.resource.itemRelativeUrl)}const y=n.portalItem.resourceFromPath(m);fC(e)&&n.resources&&n.resources.pendingOperations.push($je(e).then(x=>{y.path=`${h}.${M9({type:"blob",blob:x})}`,s[o]=y.itemRelativeUrl}).catch(()=>{}));const v=(i==null?void 0:i.compress)??!1;n.resources&&F_e({...t,resource:y,content:l,compress:v,updates:n.resources.toAdd}),s[o]=y.itemRelativeUrl}function gqe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),l=U_e(n,i,e),c=M9(l),h=nbe(a.path),m=(r==null?void 0:r.compress)??!1;c===h?(e.resources&&F_e({...t,resource:a,content:l,compress:m,updates:e.resources.toUpdate}),s[o]=i):A9(t)}function vqe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function F_e({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const o=a=>{wqe(t,e,a)};i.push({resource:r,content:n,compress:s,finish:o})}function U_e(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function bqe(t){return t==null?null:typeof t=="string"?t:t.url}function wqe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let lD=class extends It.ClonableMixin(ye){constructor(e){super(e),this.color=null}};u([p({type:Ye,json:{type:[fi],write:!0}})],lD.prototype,"color",void 0),lD=u([U("esri.effects.FocusAreaOutline")],lD);const _qe=lD;var cD;let O9=cD=class extends ye.JSONSupportMixin(Ze.ofType(rr)){constructor(t){super(t)}clone(){return new cD(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){var i;const e=(i=t==null?void 0:t.layer)==null?void 0:i.spatialReference;return e?this.toArray().map(r=>{var s;if(!e.equals(r.spatialReference)){if(!$c(r.spatialReference,e))return(s=t==null?void 0:t.messages)==null||s.push(new Sc("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const o=new rr;Ywe(r,o,e),r=o}const n=r.toJSON(t);return delete n.spatialReference,n}).filter(r=>r!=null):this.toArray().map(r=>r.toJSON(t))}static fromJSON(t,e){const i=new cD;return t.forEach(r=>i.add(rr.fromJSON(r,e))),i}};O9=cD=u([U("esri.layers.support.PolygonCollection")],O9);const bk=O9;let em=class extends ye.JSONSupportMixin(It){constructor(e){super(e),this.id=`focusarea-${xC()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new bk}readGeometries(e,i,r){var n,s;Array.isArray(e)?this.geometries=bk.fromJSON(e,r):(s=(n=r.hooks)==null?void 0:n.onAfterLoad)==null||s.call(n,()=>this._loadGeometries(py(e,r),r))}async _loadGeometries(e,i){const r=await Ot(e,{responseType:"json"});this.geometries=bk.fromJSON(r.data,i)}};u([p({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),p()],em.prototype,"id",void 0),u([p({type:String,json:{write:!0}})],em.prototype,"title",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],em.prototype,"enabled",void 0),u([p({type:_qe,json:{write:!0}})],em.prototype,"outline",void 0),u([p({type:bk,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new bk(t.items.map(e=>e.clone()))}),fqe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],em.prototype,"geometries",void 0),u([Ue(["web-scene","portal-item"],"geometries")],em.prototype,"readGeometries",null),em=u([U("esri.effects.FocusArea")],em);const xqe=em;let WM=class extends ye.JSONSupportMixin(It){constructor(e){super(e),this.areas=new Ze,this.style="bright"}};u([p({type:Ze.ofType(xqe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ze(t.items.map(e=>e.clone()))})],WM.prototype,"areas",void 0),u([p({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],WM.prototype,"style",void 0),WM=u([U("esri.effects.FocusAreas")],WM);const j_e=WM;function Sqe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function $qe(t){var e,i;return!(!Sqe(t)||!((i=(e=N7e(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!F7e(t)||g4(t))}const Tqe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Eqe="screenUtils.toPt: input not recognized!",V_e=96;function ui(t){return t?t/72*V_e:0}function Di(t){return t?72*t/V_e:0}function Ii(t){if(typeof t=="string"){const e=t.match(Tqe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=r==="px"?Di(i):i;return n?-s:s}return console.warn(Eqe),null}return t}function xs(t=0,e=0){return{x:t,y:e}}function CMt(t){return t?xs(t.x,t.y):null}function IMt(t=0,e=0){return[t,e]}function MMt(t=0,e=0,i=0){return[t,e,i]}function kMt(t){return t}function AMt(t){return t}function OMt(t){return t}function PMt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function x4(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Cqe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Iqe(t,e,i,r,n,s,o,a,l,c,h,m,y,v,w,x){const S=new Float32Array(16);return S[0]=t,S[1]=e,S[2]=i,S[3]=r,S[4]=n,S[5]=s,S[6]=o,S[7]=a,S[8]=l,S[9]=c,S[10]=h,S[11]=m,S[12]=y,S[13]=v,S[14]=w,S[15]=x,S}const Mqe=x4();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Mqe,clone:Cqe,create:x4,fromValues:Iqe},Symbol.toStringTag,{value:"Module"}));let WX=1e-6;function Va(){return WX}function kqe(t){WX=t}const S4=Math.random,Aqe=Math.PI/180,Oqe=180/Math.PI;function JX(t){return t*Aqe}function Pqe(t){return t*Oqe}function Lqe(t,e){return Math.abs(t-e)<=WX*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:S4,equals:Lqe,getEpsilon:Va,setEpsilon:kqe,toDegree:Pqe,toRadian:JX},Symbol.toStringTag,{value:"Module"}));function B_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ib(t,e,i,r,n,s,o,a,l,c,h,m,y,v,w,x,S){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=h,t[10]=m,t[11]=y,t[12]=v,t[13]=w,t[14]=x,t[15]=S,t}function $4(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mb(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Rqe(t,e){return G_e(t,e)||$4(t),t}function G_e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],m=e[9],y=e[10],v=e[11],w=e[12],x=e[13],S=e[14],C=e[15],k=i*a-r*o,A=i*l-n*o,R=i*c-s*o,D=r*l-n*a,B=r*c-s*a,z=n*c-s*l,W=h*x-m*w,Y=h*S-y*w,ee=h*C-v*w,ge=m*S-y*x,fe=m*C-v*x,ue=y*C-v*S;let ae=k*ue-A*fe+R*ge+D*ee-B*Y+z*W;return ae?(ae=1/ae,t[0]=(a*ue-l*fe+c*ge)*ae,t[1]=(n*fe-r*ue-s*ge)*ae,t[2]=(x*z-S*B+C*D)*ae,t[3]=(y*B-m*z-v*D)*ae,t[4]=(l*ee-o*ue-c*Y)*ae,t[5]=(i*ue-n*ee+s*Y)*ae,t[6]=(S*R-w*z-C*A)*ae,t[7]=(h*z-y*R+v*A)*ae,t[8]=(o*fe-a*ee+c*W)*ae,t[9]=(r*ee-i*fe-s*W)*ae,t[10]=(w*B-x*R+C*k)*ae,t[11]=(m*R-h*B-v*k)*ae,t[12]=(a*Y-o*ge-l*W)*ae,t[13]=(i*ge-r*Y+n*W)*ae,t[14]=(x*A-w*D-S*k)*ae,t[15]=(h*D-m*A+y*k)*ae,t):null}function Dqe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],m=e[9],y=e[10],v=e[11],w=e[12],x=e[13],S=e[14],C=e[15];return t[0]=a*(y*C-v*S)-m*(l*C-c*S)+x*(l*v-c*y),t[1]=-(r*(y*C-v*S)-m*(n*C-s*S)+x*(n*v-s*y)),t[2]=r*(l*C-c*S)-a*(n*C-s*S)+x*(n*c-s*l),t[3]=-(r*(l*v-c*y)-a*(n*v-s*y)+m*(n*c-s*l)),t[4]=-(o*(y*C-v*S)-h*(l*C-c*S)+w*(l*v-c*y)),t[5]=i*(y*C-v*S)-h*(n*C-s*S)+w*(n*v-s*y),t[6]=-(i*(l*C-c*S)-o*(n*C-s*S)+w*(n*c-s*l)),t[7]=i*(l*v-c*y)-o*(n*v-s*y)+h*(n*c-s*l),t[8]=o*(m*C-v*x)-h*(a*C-c*x)+w*(a*v-c*m),t[9]=-(i*(m*C-v*x)-h*(r*C-s*x)+w*(r*v-s*m)),t[10]=i*(a*C-c*x)-o*(r*C-s*x)+w*(r*c-s*a),t[11]=-(i*(a*v-c*m)-o*(r*v-s*m)+h*(r*c-s*a)),t[12]=-(o*(m*S-y*x)-h*(a*S-l*x)+w*(a*y-l*m)),t[13]=i*(m*S-y*x)-h*(r*S-n*x)+w*(r*y-n*m),t[14]=-(i*(a*S-l*x)-o*(r*S-n*x)+w*(r*l-n*a)),t[15]=i*(a*y-l*m)-o*(r*y-n*m)+h*(r*l-n*a),t}function Nqe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],m=t[10],y=t[11],v=t[12],w=t[13],x=t[14],S=t[15];return(e*o-i*s)*(m*S-y*x)-(e*a-r*s)*(h*S-y*w)+(e*l-n*s)*(h*x-m*w)+(i*a-r*o)*(c*S-y*v)-(i*l-n*o)*(c*x-m*v)+(r*l-n*a)*(c*w-h*v)}function H_e(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],m=e[8],y=e[9],v=e[10],w=e[11],x=e[12],S=e[13],C=e[14],k=e[15];let A=i[0],R=i[1],D=i[2],B=i[3];return t[0]=A*r+R*a+D*m+B*x,t[1]=A*n+R*l+D*y+B*S,t[2]=A*s+R*c+D*v+B*C,t[3]=A*o+R*h+D*w+B*k,A=i[4],R=i[5],D=i[6],B=i[7],t[4]=A*r+R*a+D*m+B*x,t[5]=A*n+R*l+D*y+B*S,t[6]=A*s+R*c+D*v+B*C,t[7]=A*o+R*h+D*w+B*k,A=i[8],R=i[9],D=i[10],B=i[11],t[8]=A*r+R*a+D*m+B*x,t[9]=A*n+R*l+D*y+B*S,t[10]=A*s+R*c+D*v+B*C,t[11]=A*o+R*h+D*w+B*k,A=i[12],R=i[13],D=i[14],B=i[15],t[12]=A*r+R*a+D*m+B*x,t[13]=A*n+R*l+D*y+B*S,t[14]=A*s+R*c+D*v+B*C,t[15]=A*o+R*h+D*w+B*k,t}function zqe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],h=e[4],m=e[5],y=e[6],v=e[7],w=e[8],x=e[9],S=e[10],C=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=h,t[5]=m,t[6]=y,t[7]=v,t[8]=w,t[9]=x,t[10]=S,t[11]=C,t[12]=o*r+h*n+w*s+e[12],t[13]=a*r+m*n+x*s+e[13],t[14]=l*r+y*n+S*s+e[14],t[15]=c*r+v*n+C*s+e[15]}return t}function Fqe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Uqe(t,e,i,r){let n=r[0],s=r[1],o=r[2],a=Math.sqrt(n*n+s*s+o*o);if(a<=Va())return void B_e(t,e);a=1/a,n*=a,s*=a,o*=a;const l=Math.sin(i),c=Math.cos(i),h=1-c,m=e[0],y=e[1],v=e[2],w=e[3],x=e[4],S=e[5],C=e[6],k=e[7],A=e[8],R=e[9],D=e[10],B=e[11],z=n*n*h+c,W=s*n*h+o*l,Y=o*n*h-s*l,ee=n*s*h-o*l,ge=s*s*h+c,fe=o*s*h+n*l,ue=n*o*h+s*l,ae=s*o*h-n*l,Se=o*o*h+c;t[0]=m*z+x*W+A*Y,t[1]=y*z+S*W+R*Y,t[2]=v*z+C*W+D*Y,t[3]=w*z+k*W+B*Y,t[4]=m*ee+x*ge+A*fe,t[5]=y*ee+S*ge+R*fe,t[6]=v*ee+C*ge+D*fe,t[7]=w*ee+k*ge+B*fe,t[8]=m*ue+x*ae+A*Se,t[9]=y*ue+S*ae+R*Se,t[10]=v*ue+C*ae+D*Se,t[11]=w*ue+k*ae+B*Se,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function jqe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],m=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=o*n+h*r,t[6]=a*n+m*r,t[7]=l*n+y*r,t[8]=c*n-s*r,t[9]=h*n-o*r,t[10]=m*n-a*r,t[11]=y*n-l*r,t}function Vqe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],h=e[9],m=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=o*n-h*r,t[2]=a*n-m*r,t[3]=l*n-y*r,t[8]=s*r+c*n,t[9]=o*r+h*n,t[10]=a*r+m*n,t[11]=l*r+y*n,t}function Bqe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],h=e[5],m=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=o*n+h*r,t[2]=a*n+m*r,t[3]=l*n+y*r,t[4]=c*n-s*r,t[5]=h*n-o*r,t[6]=m*n-a*r,t[7]=y*n-l*r,t}function Gqe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Hqe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qqe(t,e,i){if(e===0)return $4(t);let r=i[0],n=i[1],s=i[2],o=Math.sqrt(r*r+n*n+s*s);if(o<=Va())return null;o=1/o,r*=o,n*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=n*r*c+s*a,t[2]=s*r*c-n*a,t[3]=0,t[4]=r*n*c-s*a,t[5]=n*n*c+l,t[6]=s*n*c+r*a,t[7]=0,t[8]=r*s*c+n*a,t[9]=n*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Wqe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jqe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zqe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function q_e(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,c=s+s,h=r*a,m=r*l,y=r*c,v=n*l,w=n*c,x=s*c,S=o*a,C=o*l,k=o*c;return t[0]=1-(v+x),t[1]=m+k,t[2]=y-C,t[3]=0,t[4]=m-k,t[5]=1-(h+x),t[6]=w+S,t[7]=0,t[8]=y+C,t[9]=w-S,t[10]=1-(h+v),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Yqe(t,e){const i=Xqe,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],m=r*r+n*n+s*s+o*o;return m>0?(i[0]=2*(a*o+h*r+l*s-c*n)/m,i[1]=2*(l*o+h*n+c*r-a*s)/m,i[2]=2*(c*o+h*s+a*n-l*r)/m):(i[0]=2*(a*o+h*r+l*s-c*n),i[1]=2*(l*o+h*n+c*r-a*s),i[2]=2*(c*o+h*s+a*n-l*r)),q_e(t,e,i),t}const Xqe=Eb();function Kqe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Qqe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+h*h),t}function eWe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function tWe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],l=n+n,c=s+s,h=o+o,m=n*l,y=n*c,v=n*h,w=s*c,x=s*h,S=o*h,C=a*l,k=a*c,A=a*h,R=r[0],D=r[1],B=r[2];return t[0]=(1-(w+S))*R,t[1]=(y+A)*R,t[2]=(v-k)*R,t[3]=0,t[4]=(y-A)*D,t[5]=(1-(m+S))*D,t[6]=(x+C)*D,t[7]=0,t[8]=(v+k)*B,t[9]=(x-C)*B,t[10]=(1-(m+w))*B,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function iWe(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,h=o+o,m=a+a,y=s*c,v=s*h,w=s*m,x=o*h,S=o*m,C=a*m,k=l*c,A=l*h,R=l*m,D=r[0],B=r[1],z=r[2],W=n[0],Y=n[1],ee=n[2],ge=(1-(x+C))*D,fe=(v+R)*D,ue=(w-A)*D,ae=(v-R)*B,Se=(1-(y+C))*B,le=(S+k)*B,be=(w+A)*z,Oe=(S-k)*z,Be=(1-(y+x))*z;return t[0]=ge,t[1]=fe,t[2]=ue,t[3]=0,t[4]=ae,t[5]=Se,t[6]=le,t[7]=0,t[8]=be,t[9]=Oe,t[10]=Be,t[11]=0,t[12]=i[0]+W-(ge*W+ae*Y+be*ee),t[13]=i[1]+Y-(fe*W+Se*Y+Oe*ee),t[14]=i[2]+ee-(ue*W+le*Y+Be*ee),t[15]=1,t}function rWe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,m=r*a,y=n*o,v=n*a,w=n*l,x=s*o,S=s*a,C=s*l;return t[0]=1-m-w,t[1]=h+C,t[2]=y-S,t[3]=0,t[4]=h-C,t[5]=1-c-w,t[6]=v+x,t[7]=0,t[8]=y+S,t[9]=v-x,t[10]=1-c-m,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nWe(t,e,i,r,n,s,o){const a=1/(i-e),l=1/(n-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function sWe(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function oWe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(n-s)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function aWe(t,e,i,r,n,s,o){const a=1/(e-i),l=1/(r-n),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*c,t[15]=1,t}function lWe(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],l=s-i[1],c=o-i[2];const h=Va();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void $4(t);let m=1/Math.sqrt(a*a+l*l+c*c);a*=m,l*=m,c*=m;const y=r[0],v=r[1],w=r[2];let x=v*c-w*l,S=w*a-y*c,C=y*l-v*a;m=Math.sqrt(x*x+S*S+C*C),m?(m=1/m,x*=m,S*=m,C*=m):(x=0,S=0,C=0);let k=l*C-c*S,A=c*x-a*C,R=a*S-l*x;m=Math.sqrt(k*k+A*A+R*R),m?(m=1/m,k*=m,A*=m,R*=m):(k=0,A=0,R=0),t[0]=x,t[1]=k,t[2]=a,t[3]=0,t[4]=S,t[5]=A,t[6]=l,t[7]=0,t[8]=C,t[9]=R,t[10]=c,t[11]=0,t[12]=-(x*n+S*s+C*o),t[13]=-(k*n+A*s+R*o),t[14]=-(a*n+l*s+c*o),t[15]=1}function cWe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let h=n-i[0],m=s-i[1],y=o-i[2],v=h*h+m*m+y*y;v>0&&(v=1/Math.sqrt(v),h*=v,m*=v,y*=v);let w=l*y-c*m,x=c*h-a*y,S=a*m-l*h;return v=w*w+x*x+S*S,v>0&&(v=1/Math.sqrt(v),w*=v,x*=v,S*=v),t[0]=w,t[1]=x,t[2]=S,t[3]=0,t[4]=m*S-y*x,t[5]=y*w-h*S,t[6]=h*x-m*w,t[7]=0,t[8]=h,t[9]=m,t[10]=y,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function uWe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function dWe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function hWe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function W_e(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function pWe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function fWe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function mWe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function yWe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],m=t[9],y=t[10],v=t[11],w=t[12],x=t[13],S=t[14],C=t[15],k=e[0],A=e[1],R=e[2],D=e[3],B=e[4],z=e[5],W=e[6],Y=e[7],ee=e[8],ge=e[9],fe=e[10],ue=e[11],ae=e[12],Se=e[13],le=e[14],be=e[15],Oe=Va();return Math.abs(i-k)<=Oe*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(r-A)<=Oe*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-R)<=Oe*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(s-D)<=Oe*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(o-B)<=Oe*Math.max(1,Math.abs(o),Math.abs(B))&&Math.abs(a-z)<=Oe*Math.max(1,Math.abs(a),Math.abs(z))&&Math.abs(l-W)<=Oe*Math.max(1,Math.abs(l),Math.abs(W))&&Math.abs(c-Y)<=Oe*Math.max(1,Math.abs(c),Math.abs(Y))&&Math.abs(h-ee)<=Oe*Math.max(1,Math.abs(h),Math.abs(ee))&&Math.abs(m-ge)<=Oe*Math.max(1,Math.abs(m),Math.abs(ge))&&Math.abs(y-fe)<=Oe*Math.max(1,Math.abs(y),Math.abs(fe))&&Math.abs(v-ue)<=Oe*Math.max(1,Math.abs(v),Math.abs(ue))&&Math.abs(w-ae)<=Oe*Math.max(1,Math.abs(w),Math.abs(ae))&&Math.abs(x-Se)<=Oe*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs(S-le)<=Oe*Math.max(1,Math.abs(S),Math.abs(le))&&Math.abs(C-be)<=Oe*Math.max(1,Math.abs(C),Math.abs(be))}function gWe(t){const e=Va(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+h*h))<=e}function vWe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const bWe=H_e,wWe=W_e;Object.freeze(Object.defineProperty({__proto__:null,add:hWe,adjoint:Dqe,copy:B_e,determinant:Nqe,equals:yWe,exactEquals:mWe,frob:dWe,fromQuat:rWe,fromQuat2:Yqe,fromRotation:qqe,fromRotationTranslation:q_e,fromRotationTranslationScale:tWe,fromRotationTranslationScaleOrigin:iWe,fromScaling:Hqe,fromTranslation:Gqe,fromXRotation:Wqe,fromYRotation:Jqe,fromZRotation:Zqe,frustum:nWe,getRotation:eWe,getScale:Qqe,getTranslation:Kqe,hasIdentityRotation:vWe,identity:$4,invert:G_e,invertOrIdentity:Rqe,isOrthoNormal:gWe,lookAt:lWe,mul:bWe,multiply:H_e,multiplyScalar:pWe,multiplyScalarAndAdd:fWe,ortho:aWe,perspective:sWe,perspectiveFromFieldOfView:oWe,rotate:Uqe,rotateX:jqe,rotateY:Vqe,rotateZ:Bqe,scale:Fqe,set:Ib,str:uWe,sub:wWe,subtract:W_e,targetTo:cWe,translate:zqe,transpose:Mb},Symbol.toStringTag,{value:"Module"}));const _We=(t,e)=>{const i=Ib(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Mb(i,i)},xWe=(t,e)=>{const i=Ib(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Mb(i,i)},SWe=(t,e)=>{const i=1-e,r=Ib(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Mb(r,r)},$We=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=Ib(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Mb(n,n)},TWe=(t,e)=>{const i=1-2*e,r=Ib(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Mb(r,r)},EWe=(t,e)=>{const i=Ib(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Mb(i,i)},CWe=(t,e)=>{const i=1-e,r=Ib(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Mb(r,r)};let J_e=class Z_e{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=vl(e.strength,i.strength,r),this.radius=vl(e.radius,i.radius,r),this.threshold=vl(e.threshold,i.threshold,r)}clone(){return new Z_e(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:wk(this.radius),strength:this.strength,threshold:this.threshold}}},Y_e=class X_e{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(vl(e.radius,i.radius,r))}clone(){return new X_e(this.radius)}toJSON(){return{type:"blur",radius:wk(this.radius)}}},P9=class K_e{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=vl(e.amount,i.amount,r),this._updateMatrix()}clone(){return new K_e(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||x4();switch(this.type){case"brightness":this._colorMatrix=_We(e,this.amount);break;case"contrast":this._colorMatrix=xWe(e,this.amount);break;case"grayscale":this._colorMatrix=SWe(e,this.amount);break;case"invert":this._colorMatrix=TWe(e,this.amount);break;case"saturate":this._colorMatrix=EWe(e,this.amount);break;case"sepia":this._colorMatrix=CWe(e,this.amount)}}},Q_e=class e1e{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=vl(e.offsetX,i.offsetX,r),this.offsetY=vl(e.offsetY,i.offsetY,r),this.blurRadius=vl(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(vl(e.color[0],i.color[0],r)),this.color[1]=Math.round(vl(e.color[1],i.color[1],r)),this.color[2]=Math.round(vl(e.color[2],i.color[2],r)),this.color[3]=vl(e.color[3],i.color[3],r)}clone(){return new e1e(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:wk(this.offsetX),yoffset:wk(this.offsetY),blurRadius:wk(this.blurRadius),color:e}}},t1e=class i1e{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=vl(e.angle,i.angle,r),this._updateMatrix()}clone(){return new i1e(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||x4();this._colorMatrix=$We(e,this.angle)}},r1e=class n1e{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=vl(e.amount,i.amount,r)}clone(){return new n1e(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function vl(t,e,i){return t+(e-t)*i}function wk(t){return Math.round(1e3*Di(t))/1e3}function IWe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new P9(t.type,0);case"saturate":case"brightness":case"contrast":return new P9(t.type,1);case"opacity":return new r1e(1);case"hue-rotate":return new t1e(0);case"blur":return new Y_e(0);case"drop-shadow":return new Q_e(0,0,0,[...HX("transparent")]);case"bloom":return new J_e(0,0,1)}}function s1e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function o1e(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(IWe(i[n]))}function MWe(t){const e=t[0];return!!e&&"type"in e}function kWe(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}function LMt(t,e){var r;const i=t.allLayerViews.find(n=>n.uid===e);return(i==null?void 0:i.layer.parent)===((r=t.map)==null?void 0:r.basemap)}function AWe(t){let e=null;const i=L9(t),r=!(i!=null&&i.baseLayers.length);for(const n in FE){const s=c1e(i,l1e(FE[n]),{mustMatchReferences:r});if(s==="equal"){e=n;break}s==="base-layers-equal"&&(e=n)}return e}function OWe(t,e){var i,r;return t===e||((i=t==null?void 0:t.portalItem)==null?void 0:i.id)!=null&&t.portalItem.id===((r=e==null?void 0:e.portalItem)==null?void 0:r.id)?!0:c1e(L9(t),L9(e),{mustMatchReferences:!0})==="equal"}function RMt(t){return!!(t!=null&&t.baseLayers.concat(t.referenceLayers).some(PWe))}function PWe(t){if($ae(t.url))return!0;if(t.type==="vector-tile")for(const e in t.sourceNameToSource){const i=t.sourceNameToSource[e];if($ae(i==null?void 0:i.sourceUrl))return!0}return!1}function a1e(t,e){var s;if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(s=i.tileInfo)==null?void 0:s.spatialReference:i.spatialReference]).filter(Boolean),n=t.spatialReference;return n?{spatialReference:r.find(o=>n.equals(o))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const LWe=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function $ae(t){if(!t)return!1;const e=new Fa(na(t));return!!e.authority&&LWe.test(e.authority)}function L9(t){return t?!t.loaded&&t.resourceInfo?l1e(t.resourceInfo.data):{baseLayers:Tae(t.baseLayers),referenceLayers:Tae(t.referenceLayers)}:null}function Tae(t){return(Ze.isCollection(t)?t.toArray():t).map(RWe)}function RWe(t){var e,i;return{type:t.type,effect:"effect"in t?t.effect:void 0,url:u1e("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null||(e=t.sublayers)==null?void 0:e.map(r=>({id:r.id,visible:r.visible})),activeLayerId:t.type==="wmts"?(i=t.activeLayer)==null?void 0:i.id:void 0}}function Eae(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function l1e(t){return t?{baseLayers:Cae((t.baseMapLayers??[]).filter(e=>!Eae(e))),referenceLayers:Cae((t.baseMapLayers??[]).filter(e=>Eae(e)))}:null}function Cae(t){return t.map(e=>DWe(e))}function DWe(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;default:e="unknown"}return{type:e,effect:t.effect,url:u1e(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function c1e(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":Iae(t.baseLayers,e.baseLayers)?Iae(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function Iae(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!NWe(t[i],e[i]))return!1;return!0}function NWe(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!kWe(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const r=t.sublayers.at(i),n=e.sublayers.at(i);if((r==null?void 0:r.id)!==(n==null?void 0:n.id)||(r==null?void 0:r.visible)!==(n==null?void 0:n.visible))return!1}}return!0}function u1e(t){return t?so(t).replace(/^\s*https?:/i,"").toLowerCase():""}function d1e(t){if(!t)return null;const{thumbnailUrl:e}=t;if(e)return e;const i=AWe(t);return i?FE[i].thumbnailUrl:_A(t.baseLayers,zWe)}function zWe(t){var e;return"portalItem"in t?(e=t.portalItem)==null?void 0:e.thumbnailUrl:void 0}const CB=()=>Ce.getLogger("esri.support.basemapUtils");function FWe(){return{}}function h1e(t){for(const e in t){const i=t[e];xr(i),delete t[e]}}function _k(t,e){let i;if(typeof t=="string"){const r=t in FE,n=!r&&t.includes("/");if(!r&&!n){if(OH())CB().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(FE).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");CB().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?Vv.fromId(t):new Vv({style:{id:t}}),e&&(e[t]=i))}else i=hr(Vv,t);return i!=null&&i.destroyed&&(CB().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function UWe(t){return new Jh({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function IB(t){for(const e of t.values())e==null||e.destroy();t.clear()}const Mae={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function jWe(t){let e=null;if(typeof t=="string")if(t in Mae){const i=Mae[t];e=new rF({resourceInfo:{data:{layers:[i]}}})}else Ce.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=hr(rF,t);return e}let p1e=0;const f1e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+p1e++})}};return i=u([U("esri.core.Identifiable")],i),i},VWe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:p1e++})}};return i=u([U("esri.core.Identifiable.NumericIdentifiable")],i),i};let JM=class extends f1e(class{}){};JM=u([U("esri.core.Identifiable")],JM),function(t){t.IdentifiableMixin=f1e,t.NumericIdentifiableMixin=VWe}(JM||(JM={}));const Hd=JM;async function BWe(t){var r;const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await $e(async()=>{const{fromItem:n}=await import("./portalLayers-rkVZs1xz.js");return{fromItem:n}},__vite__mapDeps([159,157,156,155,158]));try{return await i(e)}catch(n){const s=e==null?void 0:e.portalItem,o=(s==null?void 0:s.id)||"unset",a=((r=s==null?void 0:s.portal)==null?void 0:r.url)||hi.portalUrl;throw Ce.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",n),n}}const R9={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function MB(t,e,i,r=_u){const n=new Cl(AX(r)),s=pt.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":y1e(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function NMt(t,e,i="milliseconds"){const r=t.getTime(),n=m1e(e,i,"milliseconds");return new Date(r+n)}function kae(t,e,i=_u){const r=new Cl(AX(i)),n=pt.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=y1e(e);return n.startOf(s).toJSDate()}function m1e(t,e,i){return t===0?0:t*R9[e]/R9[i]}function zMt(t,e){return t&&e?t.intersection(e):t||e}function y1e(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Vc,VT;let Yi=(VT=class extends ye{static get allTime(){return Aae}static get empty(){return GWe}static fromArray(e){return new Vc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Vc.allTime)}get isEmpty(){return this.equals(Vc.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=(e==null?void 0:e.getTime())??null}clone(){return new Vc({end:this.end,start:this.start})}equals(e){var o,a,l,c;if(!e)return!1;const i=((o=this.start)==null?void 0:o.getTime())??this.start,r=((a=this.end)==null?void 0:a.getTime())??this.end,n=((l=e.start)==null?void 0:l.getTime())??e.start,s=((c=e.end)==null?void 0:c.getTime())??e.end;return i===n&&r===s}expandTo(e,i=_u){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=kae(r,e,i));let n=this.end;if(n){const s=kae(n,e,i);n=n.getTime()===s.getTime()?s:MB(s,1,e,i)}return new Vc({start:r,end:n})}intersection(e){var l,c,h,m;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Vc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((c=this.end)==null?void 0:c.getTime())??1/0,n=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((m=e.end)==null?void 0:m.getTime())??1/0;let o,a;return n>=i&&n<=r?o=n:i>=n&&i<=s&&(o=i),r>=n&&r<=s?a=r:s>=i&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?Vc.empty:new Vc({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=_u){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Vc,{start:s,end:o}=this;return s!=null&&(n.start=MB(s,e,i,r)),o!=null&&(n.end=MB(o,e,i,r)),n}toArray(){var e,i;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((i=this.end)==null?void 0:i.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Aae.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Vc({start:i,end:r})}},Vc=VT,VT);u([p({type:Date,json:{write:{allowNull:!0}}})],Yi.prototype,"end",void 0),u([Ue("end")],Yi.prototype,"readEnd",null),u([qe("end")],Yi.prototype,"writeEnd",null),u([p({readOnly:!0,json:{read:!1}})],Yi.prototype,"isAllTime",null),u([p({readOnly:!0,json:{read:!1}})],Yi.prototype,"isEmpty",null),u([p({type:Date,json:{write:{allowNull:!0}}})],Yi.prototype,"start",void 0),u([Ue("start")],Yi.prototype,"readStart",null),u([qe("start")],Yi.prototype,"writeStart",null),Yi=Vc=u([U("esri.time.TimeExtent")],Yi);const Aae=new Yi,GWe=new Yi({start:void 0,end:void 0});let HWe=0,un=class extends pa.EventedMixin(Hd.IdentifiableMixin(_s)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new jt(-180,-90,180,90,et.WGS84),this.id=Date.now().toString(16)+"-layer-"+HWe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=et.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await $e(async()=>{const{fromUrl:r}=await import("./arcgisLayers-Obhycpq3.js");return{fromUrl:r}},__vite__mapDeps([160,157,156,158]))).fromUrl(i)}static fromPortalItem(e){return BWe(e)}initialize(){this.when().catch(e=>{ds(e)||Ce.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const i=this.parent;return e&&i&&"effectiveVisible"in i&&e&&(e=i.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return nn(this.url)}createLayerView(e,i){return Promise.reject(new Q("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ot(e,{query:{f:"json"},responseType:"json"})).data;throw new Q("layer:no-attribution-data","Layer does not have attribution data")}};u([p({type:String})],un.prototype,"attributionDataUrl",void 0),u([p({readOnly:!0})],un.prototype,"effectiveVisible",null),u([p({type:jt})],un.prototype,"fullExtent",void 0),u([p({readOnly:!0})],un.prototype,"hasAttributionData",null),u([p({type:String,clonable:!1})],un.prototype,"id",void 0),u([p({type:Boolean,nonNullable:!0})],un.prototype,"legendEnabled",void 0),u([p({type:["show","hide","hide-children"]})],un.prototype,"listMode",void 0),u([p({type:Number,range:{min:0,max:1},nonNullable:!0})],un.prototype,"opacity",void 0),u([p({clonable:!1})],un.prototype,"parent",void 0),u([p({readOnly:!0})],un.prototype,"parsedUrl",null),u([p({type:Boolean,readOnly:!0})],un.prototype,"persistenceEnabled",void 0),u([p({type:Boolean})],un.prototype,"popupEnabled",void 0),u([p({type:Boolean})],un.prototype,"attributionVisible",void 0),u([p({type:et})],un.prototype,"spatialReference",void 0),u([p({type:String})],un.prototype,"title",void 0),u([p({readOnly:!0,json:{read:!1}})],un.prototype,"type",void 0),u([p()],un.prototype,"url",void 0),u([p({type:Yi})],un.prototype,"visibilityTimeExtent",void 0),u([p({type:Boolean,nonNullable:!0})],un.prototype,"visible",void 0),un=u([U("esri.layers.Layer")],un);function D9(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=D9(r.layers,e,i),n))return n}}const qWe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new Ze;const n=a=>{a.parent&&"remove"in a.parent&&a.parent.remove(a)},s=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||Ce.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void Ce.getLogger(this).error("#add()","Cannot add layer to itself.");n(a.item)}),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}set layers(r){this._set("layers",my(r,this._get("layers")))}add(r,n){const s=this.layers;if(n=s.getNextIndex(n),r instanceof un){const o=r;o.parent===this?this.reorder(o,n):s.add(o,n)}else nf(r)?r.then(o=>{this.destroyed||this.add(o,n)}):Ce.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const s=this.layers;let o=s.getNextIndex(n);r.slice().forEach(a=>{a.parent!==this?(s.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return D9(this.layers,"id",r)}findLayerByUid(r){return D9(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return u([p()],i.prototype,"layers",null),i=u([U("esri.support.LayersMixin")],i),i},WWe=new Set(["feature","subtype-group"]);function N9(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=N9(s.tables,e,i);if(o)return o}}}const JWe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new Ze,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,WWe.has(s.type)||Ce.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const n of r)n.destroy();this.tables.destroy()}set tables(r){this._set("tables",my(r,this._get("tables")))}findTableById(r){return N9(this.tables,"id",r)}findTableByUid(r){return N9(this.tables,"uid",r)}};return u([p()],i.prototype,"tables",null),i=u([U("esri.support.TablesMixin")],i),i};let Bc=class extends JWe(qWe(pa.EventedMixin(st))){constructor(e){super(e),this.allLayers=new Jh({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new j_e,this.allTables=UWe(this),this.basemap=null,this.editableLayers=new Jh({getCollections:()=>[this.allLayers],itemFilterFunction:$qe}),this.ground=new rF,this._basemapCache=FWe()}destroy(){h1e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=xr(this.basemap),xr(this.ground),this._set("ground",null)}castBasemap(e){return _k(e,this._basemapCache)}castGround(e){return jWe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};u([p({readOnly:!0,dependsOn:[]})],Bc.prototype,"allLayers",void 0),u([p({type:j_e,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Bc.prototype,"focusAreas",void 0),u([p({readOnly:!0})],Bc.prototype,"allTables",void 0),u([p({type:Vv,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Bc.prototype,"basemap",void 0),u([_i("basemap")],Bc.prototype,"castBasemap",null),u([p({readOnly:!0})],Bc.prototype,"editableLayers",void 0),u([p({type:rF,nonNullable:!0})],Bc.prototype,"ground",void 0),u([_i("ground")],Bc.prototype,"castGround",null),u([p()],Bc.prototype,"undoRedo",void 0),Bc=u([U("esri.Map")],Bc);const g1e=Bc;let xk=class extends Ze{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ze.ofType(this.itemType.Type))(e):new Ze(e)}};function Oae(t,e){return{type:t,cast:x_e,set(i){const r=my(i,this._get(e),t);r.owner=this,this._set(e,r)}}}u([p()],xk.prototype,"owner",null),xk=u([U("esri.core.support.OwningCollection")],xk);var ZM;const nF=Wt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),v1e=nF.jsonValues.slice();w5e(v1e,"orthometric");const Sk=Wt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ma=ZM=class extends ye{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return nF.write(t,e,i)}readHeightModel(t,e,i){return nF.read(t)||(i!=null&&i.messages&&i.messages.push(ZWe(t,{context:i})),null)}readHeightUnit(t,e,i){return Sk.read(t)||(i!=null&&i.messages&&i.messages.push(Pae(t,{context:i})),null)}readHeightUnitService(t,e,i){return fX(t)||Sk.read(t)||(i!=null&&i.messages&&i.messages.push(Pae(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new ZM({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Obe(e);return new ZM({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new ZM;return e.read(t,{origin:"web-scene"}),e}};function Pae(t,e){return new Sc("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function ZWe(t,e){return new Sc("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}u([p({type:nF.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:v1e,default:"ellipsoidal",write:{isRequired:!0}}}}})],Ma.prototype,"heightModel",void 0),u([qe("web-scene","heightModel")],Ma.prototype,"writeHeightModel",null),u([Ue(["web-scene","service"],"heightModel")],Ma.prototype,"readHeightModel",null),u([p({type:Sk.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Sk.jsonValues,write:{writer:Sk.write,isRequired:!0}}}}})],Ma.prototype,"heightUnit",void 0),u([Ue("web-scene","heightUnit")],Ma.prototype,"readHeightUnit",null),u([Ue("service","heightUnit")],Ma.prototype,"readHeightUnitService",null),u([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ma.prototype,"vertCRS",void 0),u([Ue("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ma.prototype,"readVertCRS",null),Ma=ZM=u([U("esri.geometry.HeightModelInfo")],Ma);let sF=class extends xk{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(Ce.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};sF=u([U("esri.support.AnalysesCollection")],sF);let kB;async function YWe(){return kB==null&&(kB=$e(()=>import("./WhereClauseCache-dRR1b2KG.js"),__vite__mapDeps([17,18])).then(t=>new t.WhereClauseCache(500,500))),kB}async function ZX(t,e){const i=await YWe(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function $k(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function z9(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function XWe(t,e){return e.length===0?null:`${t} IN (${KWe(e)})`}function KWe(t){return t.map(e=>typeof e=="string"?QWe(e):e).join(",")}function QWe(t){return`'${t.replaceAll("'","''")}'`}function c1(t){return typeof t=="number"}function BMt(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function GMt(t){return typeof t=="boolean"}function KO(t){return typeof t=="string"||t instanceof String}function eJe(t){return t==null||KO(t)}function HMt(t){return Array.isArray(t)}function b1e(t){return(t==null?void 0:t.declaredClass)==="esri.Graphic"}function qMt(t){return t instanceof Date}const tJe="HH:mm",iJe="HH:mm:ss",rJe="HH:mm:ss.SSS",nJe=[rJe,iJe,tJe,"TT"],sJe="yyyy-MM-dd";function Lae(t){if(!t||!KO(t))return null;const e=pt.fromFormat(t,sJe);return e.isValid?e:null}function Rae(t){return t&&KO(t)?_A(nJe,e=>{const i=pt.fromFormat(t,e);return i.isValid?i:null})??null:null}function Dae(t){if(!t||!KO(t))return null;const e=pt.fromISO(t);return e.isValid?e:null}var oF;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(oF||(oF={}));const w1e=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function oJe(t){return t!=null&&w1e.has(t.type)}function _1e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function x1e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function S1e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const aJe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);RY(w1e,aJe);function WMt(t,e){const i=t==null?void 0:t.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=oJe(t);return _1e(t)||S1e(t)||x1e(t)?{...lJe(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function lJe(t,e,i){var r,n,s,o,a,l;return _1e(t)?{min:(r=Lae(i))==null?void 0:r.toMillis(),max:(n=Lae(e))==null?void 0:n.toMillis(),rawMin:i,rawMax:e}:S1e(t)?{min:(s=Rae(i))==null?void 0:s.toMillis(),max:(o=Rae(e))==null?void 0:o.toMillis(),rawMin:i,rawMax:e}:x1e(t)?{min:(a=Dae(i))==null?void 0:a.toMillis(),max:(l=Dae(e))==null?void 0:l.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function cJe(t){if(!t)return;const e=t.match(uJe);return e!=null&&e.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const uJe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function dJe(t){var e,i;return((i=(e=t.match(hJe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const hJe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let AB;function yy(){return AB||(AB=(async()=>{const[t,e,i]=await Promise.all([$e(()=>import("./arcadeUtils-DO91Pasp.js"),__vite__mapDeps([161,162,163,164,147,27,15,11,16,18,165])),$e(()=>import("./batchExec-qbq5e7Es.js"),__vite__mapDeps([166,76])),$e(()=>import("./aiServices-MuyzOyn5.js").then(r=>r.ag),__vite__mapDeps([163,164,147,27]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel}})()),AB}const pJe=/^([0-9_])/,fJe=/[^a-z0-9_\u0080-\uffff]+/gi;function mJe(t){return t==null?null:t.trim().replaceAll(fJe,"_").replace(pJe,"F$1")||null}const yJe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],gJe=["field","normalizationField"];function Nae(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(zae(yJe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)zae(gJe,r,e)}}function zae(t,e,i){if(t)for(const r of t){const n=Zm(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Wn(r,s.name,e)}}function $1e(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const OB=new Set;function T4(t,e){return t&&e?(OB.clear(),vb(OB,t,e),Array.from(OB).sort()):[]}function vb(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)Ba(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function Ba(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function JMt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function ZMt(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=T4(t,e);return r.length/t.fields.length>=i?["*"]:r}async function Oo(t,e,i){var s;if(!i)return;let r;const n=cJe(i);if(n)r=[n];else{const{arcadeUtils:o}=await yy();r=o.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map(a=>a.name))}for(const o of r)Ba(t,e,o)}async function YX(t,e,i){if(i&&i!=="1=1"){const r=await ZX(i,e);if(!r.isStandardized)throw new Q("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});vb(t,e,r.fieldNames)}}function vJe({displayField:t,fields:e}){return t||(e!=null&&e.length?PB(e,"name-or-title")||PB(e,"unique-identifier")||PB(e,"type-or-category")||bJe(e):null)}function bJe(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function PB(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function YMt(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function wJe(t,e,i){i.onStatisticExpression?Oo(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function XMt(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(T1e(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>wJe(t,e.fieldsIndex,s))),await Promise.all(r)}async function KMt(t,e){var s,o,a;const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[(s=r.latestObservations.renderer)==null?void 0:s.collectRequiredFields(t,i),(o=r.previousObservations.renderer)==null?void 0:o.collectRequiredFields(t,i),(a=r.trackLines.renderer)==null?void 0:a.collectRequiredFields(t,i)];r.popupTemplate&&n.push(T1e(t,e,r.popupTemplate));for(const l of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(l)for(const c of l)n.push(I1e(t,i,c));await Promise.all(n)}async function T1e(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(s=>Oo(t,e.fieldsIndex,s.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(Oo(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function QMt(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&vb(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&vb(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await YX(t,e.fieldsIndex,i.where))}async function e2t(t,e,i){e&&i&&await Promise.all(i.map(r=>_Je(t,e,r)))}async function _Je(t,e,i){e&&i&&(i.valueExpression?await Oo(t,e.fieldsIndex,i.valueExpression):i.field&&Ba(t,e.fieldsIndex,i.field))}function t2t(t){return t?T4(t.fieldsIndex,E1e(t)):[]}function xJe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?T4(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function i2t(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(n=>YX(t,r,n.where)))}const SJe=new Set(["oid","global-id","guid"]),$Je=new Set(["oid","global-id"]),TJe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function EJe(t){const e=new Set;C1e(t).forEach(r=>e.add(r)),xJe(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function E1e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function C1e(t){return E1e(t).map(e=>e.toLowerCase())}function CJe(t,e){var i;return t.editable&&!SJe.has(t.type)&&!C1e(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function IJe(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||EJe(e).includes(i)||$Je.has(t.type)||TJe.some(n=>n.test(i)))}async function MJe(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map(n=>I1e(t,r,n)))}async function I1e(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await Oo(t,e,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Ba(t,e,o.slice(1,-1))})}await YX(t,e,n)}function kJe(t){const e=t.defaultValue;return e!==void 0&&k1e(t,e)?e:t.nullable?null:void 0}function r2t(t){const e=typeof t=="string"?{type:t}:t;return P1e(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function M1e(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function AJe(t){return t===null||M1e(t)}function OJe(t){return t===null||Number.isInteger(t)}function PJe(){return!0}function k1e(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?OJe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?AJe:M1e;break;case"string":case"esriFieldTypeString":i=t.nullable?eJe:KO;break;default:i=PJe}return arguments.length===1?i:i(e)}const LJe=["integer","small-integer","big-integer","long"],RJe=["single","double"],DJe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],NJe=["esriFieldTypeSingle","esriFieldTypeDouble"],A1e=new Set([...LJe,...DJe]),zJe=new Set([...RJe,...NJe]),FJe=RY(A1e,zJe);function UJe(t){return t!=null&&A1e.has(t.type)}function O1e(t){return t!=null&&FJe.has(t.type)}function P1e(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function XX(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function jJe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function VJe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function L1e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function Fae(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function Uae(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function n2t(t,e){return BJe(t,e)===null}var aF,lF;function s2t(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function BJe(t,e){return t==null||t.nullable&&e===null?null:k1e(t,e)?O1e(t)&&!GJe(t.type,Number(e))?aF.OUT_OF_RANGE:null:lF.INVALID_TYPE}function GJe(t,e){const i=typeof t=="string"?R1e(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function R1e(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return HJe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return qJe;case"esriFieldTypeBigInteger":case"big-integer":return WJe;case"esriFieldTypeSingle":case"single":return JJe;case"esriFieldTypeDouble":case"double":return ZJe}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(aF||(aF={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(lF||(lF={}));const HJe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},qJe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},WJe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},JJe={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},ZJe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function o2t(t,e,i){switch(t){case oF.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case oF.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case lF.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case aF.OUT_OF_RANGE:{const{min:r,max:n}=R1e(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function YJe(t,e){return!XJe(t,e,null)}function XJe(t,e,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function KJe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function KX(t){const e=t==null?void 0:t.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let uD=class extends ye{constructor(e){super(e),this.type=null}};u([p({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],uD.prototype,"type",void 0),uD=u([U("esri.popup.content.Content")],uD);const $y=uD,xR=new Et({asc:"ascending",desc:"descending"});let YM=class extends It.ClonableMixin(ye){constructor(e){super(e),this.field=null,this.order="ascending"}};u([p({type:String,json:{write:!0}})],YM.prototype,"field",void 0),u([p({type:xR.apiValues,json:{type:xR.jsonValues,read:xR.read,write:xR.write}})],YM.prototype,"order",void 0),YM=u([U("esri.popup.support.AttachmentsOrderByInfo")],YM);const QJe=YM;let Ng=class extends It.ClonableMixin($y){constructor(e){super(e),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([p({type:String,json:{write:!0}})],Ng.prototype,"description",void 0),u([p({type:["auto","preview","list"],json:{write:!0}})],Ng.prototype,"displayType",void 0),u([p({type:[QJe],json:{write:!0}})],Ng.prototype,"orderByFields",void 0),u([p({type:String,json:{write:!0}})],Ng.prototype,"title",void 0),u([p({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ng.prototype,"type",void 0),Ng=u([U("esri.popup.content.AttachmentsContent")],Ng);const UE=Ng;var F9;let B0=F9=class extends $y{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new F9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ce(this.outFields):null})}};u([p()],B0.prototype,"creator",void 0),u([p()],B0.prototype,"destroyer",void 0),u([p()],B0.prototype,"outFields",void 0),u([p({type:["custom"],readOnly:!0})],B0.prototype,"type",void 0),B0=F9=u([U("esri.popup.content.CustomContent")],B0);const eZe=B0;var U9;let uS=U9=class extends ye{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new U9({title:this.title,expression:this.expression})}};u([p({type:String,json:{write:!0}})],uS.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],uS.prototype,"expression",void 0),u([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],uS.prototype,"returnType",void 0),uS=U9=u([U("esri.popup.ElementExpressionInfo")],uS);const tZe=uS;var j9;let XM=j9=class extends $y{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new j9({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};u([p({type:tZe,json:{write:!0}})],XM.prototype,"expressionInfo",void 0),u([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],XM.prototype,"type",void 0),XM=j9=u([U("esri.popup.content.ExpressionContent")],XM);const E4=XM;let dS=class extends It.ClonableMixin(ye){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([at(SGe)],dS.prototype,"dateFormat",void 0),u([p({type:Boolean,json:{write:!0}})],dS.prototype,"digitSeparator",void 0),u([p({type:fi,json:{write:!0}})],dS.prototype,"places",void 0),dS=u([U("esri.popup.support.FieldInfoFormat")],dS);const dD=dS;var V9;let td=V9=class extends ye{constructor(t){super(t),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var t;return new V9({fieldName:this.fieldName,format:(t=this.format)==null?void 0:t.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([p({type:String,json:{write:!0}})],td.prototype,"fieldName",void 0),u([p({type:dD,json:{write:!0}})],td.prototype,"format",void 0),u([p({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],td.prototype,"isEditable",void 0),u([p({type:String,json:{write:!0}})],td.prototype,"label",void 0),u([at(new Et({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],td.prototype,"stringFieldOption",void 0),u([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],td.prototype,"statisticType",void 0),u([p({type:String,json:{write:!0}})],td.prototype,"tooltip",void 0),u([p({type:Boolean,json:{write:!0}})],td.prototype,"visible",void 0),td=V9=u([U("esri.popup.FieldInfo")],td);const QX=td;var B9;let tm=B9=class extends $y{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new B9(ce({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([p({type:Object,json:{write:!0}})],tm.prototype,"attributes",void 0),u([p({type:String,json:{write:!0}})],tm.prototype,"description",void 0),u([p({type:[QX]})],tm.prototype,"fieldInfos",void 0),u([qe("fieldInfos")],tm.prototype,"writeFieldInfos",null),u([p({type:String,json:{write:!0}})],tm.prototype,"title",void 0),u([p({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],tm.prototype,"type",void 0),tm=B9=u([U("esri.popup.content.FieldsContent")],tm);const jE=tm;let G0=class extends ye{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};u([p({type:String,json:{write:!0}})],G0.prototype,"altText",void 0),u([p({type:String,json:{write:!0}})],G0.prototype,"caption",void 0),u([p({type:String,json:{write:!0}})],G0.prototype,"title",void 0),u([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],G0.prototype,"type",void 0),G0=u([U("esri.popup.content.mixins.MediaInfo")],G0);const eK=G0;var G9;let H0=G9=class extends st{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var t;return new G9({color:(t=this.color)==null?void 0:t.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([p()],H0.prototype,"color",void 0),u([p()],H0.prototype,"fieldName",void 0),u([p()],H0.prototype,"tooltip",void 0),u([p()],H0.prototype,"value",void 0),H0=G9=u([U("esri.popup.content.support.ChartMediaInfoValueSeries")],H0);const iZe=H0;var H9;let zg=H9=class extends ye{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new H9({colors:ce(this.colors),fields:ce(this.fields),normalizeField:this.normalizeField,series:ce(this.series),tooltipField:this.tooltipField})}};u([p({type:[Ye],json:{type:[[fi]],write:!0}})],zg.prototype,"colors",void 0),u([p({type:[String],json:{write:{isRequired:!0}}})],zg.prototype,"fields",void 0),u([p({type:String,json:{write:!0}})],zg.prototype,"normalizeField",void 0),u([p({type:[iZe],json:{read:!1}})],zg.prototype,"series",void 0),u([p({type:String,json:{write:!0}})],zg.prototype,"tooltipField",void 0),zg=H9=u([U("esri.popup.content.support.ChartMediaInfoValue")],zg);const rZe=zg;let KM=class extends eK{constructor(e){super(e),this.type=null,this.value=void 0}};u([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],KM.prototype,"type",void 0),u([p({type:rZe,json:{write:{isRequired:!0}}})],KM.prototype,"value",void 0),KM=u([U("esri.popup.content.mixins.ChartMediaInfo")],KM);const C4=KM,I4=Wt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var q9;let hD=q9=class extends C4{constructor(t){super(t),this.type="bar-chart"}clone(){var t;return new q9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:I4.write,isRequired:!0}}})],hD.prototype,"type",void 0),hD=q9=u([U("esri.popup.content.BarChartMediaInfo")],hD);const D1e=hD;var W9;let pD=W9=class extends C4{constructor(t){super(t),this.type="column-chart"}clone(){var t;return new W9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:I4.write,isRequired:!0}}})],pD.prototype,"type",void 0),pD=W9=u([U("esri.popup.content.ColumnChartMediaInfo")],pD);const N1e=pD;var J9;let QM=J9=class extends ye{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new J9({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([p({type:String,json:{write:!0}})],QM.prototype,"linkURL",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],QM.prototype,"sourceURL",void 0),QM=J9=u([U("esri.popup.content.support.ImageMediaInfoValue")],QM);const nZe=QM;var Z9;let hS=Z9=class extends eK{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var t;return new Z9({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(t=this.value)==null?void 0:t.clone()})}};u([p({type:Number,json:{write:!0}})],hS.prototype,"refreshInterval",void 0),u([p({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],hS.prototype,"type",void 0),u([p({type:nZe,json:{write:{isRequired:!0}}})],hS.prototype,"value",void 0),hS=Z9=u([U("esri.popup.content.ImageMediaInfo")],hS);const z1e=hS;var Y9;let fD=Y9=class extends C4{constructor(t){super(t),this.type="line-chart"}clone(){var t;return new Y9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:I4.write,isRequired:!0}}})],fD.prototype,"type",void 0),fD=Y9=u([U("esri.popup.content.LineChartMediaInfo")],fD);const F1e=fD;var X9;let mD=X9=class extends C4{constructor(t){super(t),this.type="pie-chart"}clone(){var t;return new X9({altText:this.altText,title:this.title,caption:this.caption,value:(t=this.value)==null?void 0:t.clone()})}};u([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:I4.write,isRequired:!0}}})],mD.prototype,"type",void 0),mD=X9=u([U("esri.popup.content.PieChartMediaInfo")],mD);const U1e=mD,K9={base:eK,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":D1e,"column-chart":N1e,"line-chart":F1e,"pie-chart":U1e,image:z1e}};var Q9;let id=Q9=class extends $y{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?z1e.fromJSON(e):e.type==="barchart"?D1e.fromJSON(e):e.type==="columnchart"?N1e.fromJSON(e):e.type==="linechart"?F1e.fromJSON(e):e.type==="piechart"?U1e.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new Q9(ce({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([p()],id.prototype,"activeMediaInfoIndex",void 0),u([p({type:Object,json:{write:!0}})],id.prototype,"attributes",void 0),u([p({type:String,json:{write:!0}})],id.prototype,"description",void 0),u([p({types:[K9]})],id.prototype,"mediaInfos",void 0),u([Ue("mediaInfos")],id.prototype,"readMediaInfos",null),u([qe("mediaInfos")],id.prototype,"writeMediaInfos",null),u([p({type:String,json:{write:!0}})],id.prototype,"title",void 0),u([p({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],id.prototype,"type",void 0),id=Q9=u([U("esri.popup.content.MediaContent")],id);const DA=id;var e7;let e2=e7=class extends ye{constructor(t){super(t),this.field=null,this.order=null}clone(){return new e7({field:this.field,order:this.order})}};u([p({type:String,json:{write:!0}})],e2.prototype,"field",void 0),u([p({type:["asc","desc"],json:{write:!0}})],e2.prototype,"order",void 0),e2=e7=u([U("esri.popup.support.RelatedRecordsInfoFieldOrder")],e2);const tK=e2;let fh=class extends It.ClonableMixin($y){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([p({type:String,json:{write:!0}})],fh.prototype,"description",void 0),u([p({type:Number,json:{type:fi,write:!0}})],fh.prototype,"displayCount",void 0),u([p({type:["list"],json:{write:{isRequired:!0}}})],fh.prototype,"displayType",void 0),u([p({type:[tK],json:{write:!0}})],fh.prototype,"orderByFields",void 0),u([p({type:Number,json:{type:fi,write:{isRequired:!0}}})],fh.prototype,"relationshipId",void 0),u([p({type:String,json:{write:!0}})],fh.prototype,"title",void 0),u([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],fh.prototype,"type",void 0),fh=u([U("esri.popup.content.RelationshipContent")],fh);const NA=fh;var t7;let t2=t7=class extends $y{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new t7({text:this.text})}};u([p({type:String,json:{write:!0}})],t2.prototype,"text",void 0),u([p({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],t2.prototype,"type",void 0),t2=t7=u([U("esri.popup.content.TextContent")],t2);const zA=t2;let im=class extends It.ClonableMixin(ye){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([p({type:String,json:{write:!0}})],im.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],im.prototype,"description",void 0),u([p({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],im.prototype,"type",void 0),u([p({type:Number,json:{type:fi,write:!0}})],im.prototype,"associatedNetworkSourceId",void 0),u([p({type:Number,json:{type:fi,write:!0}})],im.prototype,"associatedAssetGroup",void 0),u([p({type:Number,json:{type:fi,write:!0}})],im.prototype,"associatedAssetType",void 0),im=u([U("esri.popup.support.UtilityNetworkAssociationType")],im);const j1e=im;let Fg=class extends It.ClonableMixin($y){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([p({type:String,json:{write:!0}})],Fg.prototype,"description",void 0),u([p({type:Number,json:{type:fi,write:!0}})],Fg.prototype,"displayCount",void 0),u([p({type:String,json:{write:!0}})],Fg.prototype,"title",void 0),u([p({type:[j1e],json:{write:!0}})],Fg.prototype,"associationTypes",void 0),u([at({utilityNetworkAssociations:"utility-network-associations"})],Fg.prototype,"type",void 0),Fg=u([U("esri.popup.content.UtilityNetworkAssociationsContent")],Fg);const iK=Fg,sZe={base:null,key:"type",typeMap:{attachment:UE,media:DA,text:zA,expression:E4,field:jE,relationship:NA,utilityNetworkAssociations:iK}},oZe={base:null,key:"type",typeMap:{attachment:UE,media:DA,text:zA,expression:E4,field:jE,relationship:NA}};var i7;let q0=i7=class extends ye{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new i7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([p({type:String,json:{write:!0}})],q0.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],q0.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],q0.prototype,"expression",void 0),u([p({type:["string","number"],json:{write:!0}})],q0.prototype,"returnType",void 0),q0=i7=u([U("esri.popup.ExpressionInfo")],q0);const aZe=q0;var r7;let i2=r7=class extends ye{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new r7({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([p({type:Boolean,json:{write:!0}})],i2.prototype,"returnTopmostRaster",void 0),u([p({type:Boolean,json:{write:!0}})],i2.prototype,"showNoDataRecords",void 0),i2=r7=u([U("esri.popup.LayerOptions")],i2);const lZe=i2;var n7;let r2=n7=class extends ye{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new n7({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ce(this.orderByFields):null})}};u([p({type:Boolean,json:{write:!0}})],r2.prototype,"showRelatedRecords",void 0),u([p({type:[tK],json:{write:!0}})],r2.prototype,"orderByFields",void 0),r2=n7=u([U("esri.popup.RelatedRecordsInfo")],r2);const jae=r2;var s7;let Gc=s7=class extends Hd.IdentifiableMixin(st){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new s7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([p()],Gc.prototype,"active",void 0),u([p()],Gc.prototype,"className",void 0),u([p()],Gc.prototype,"disabled",void 0),u([p()],Gc.prototype,"icon",void 0),u([p()],Gc.prototype,"id",void 0),u([p()],Gc.prototype,"indicator",void 0),u([p()],Gc.prototype,"title",void 0),u([p()],Gc.prototype,"type",void 0),u([p()],Gc.prototype,"visible",void 0),Gc=s7=u([U("esri.support.actions.ActionBase")],Gc);const M4=Gc;var o7;let yD=o7=class extends M4{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new o7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([p()],yD.prototype,"image",void 0),yD=o7=u([U("esri.support.actions.ActionButton")],yD);const rK=yD;var a7;let n2=a7=class extends M4{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new a7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([p()],n2.prototype,"image",void 0),u([p()],n2.prototype,"value",void 0),n2=a7=u([U("esri.support.actions.ActionToggle")],n2);const V1e=n2,YI="relationships/",Vae="expression/",cZe=Ze.ofType({key:"type",defaultKeyValue:"button",base:M4,typeMap:{button:rK,toggle:V1e}}),uZe={base:$y,key:"type",typeMap:{media:DA,custom:eZe,text:zA,attachments:UE,fields:jE,expression:E4,relationship:NA,utilityNetworkAssociations:iK}},B1e=new Set(["attachments","fields","media","text","expression","relationship"]),dZe=new Set([...B1e,"utility-network-associations"]);let ms=class extends It.ClonableMixin(ye){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Gp(uZe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||nf(e)?e:(Ce.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(c=>c.type==="fields"):[],l=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});i.fieldInfos=e.filter(Boolean).map(c=>{const h=c.toJSON(n);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),vb(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>(r==null?void 0:r.origin)==="web-scene"?B1e.has(n.type):dZe.has(n.type)).map(n=>n==null?void 0:n.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=ce(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const s=i.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=n.fieldName)==null?void 0:l.toLowerCase())});s?s.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=ce(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),DA.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),zA.fromJSON(s)):s.type==="attachments"?UE.fromJSON(s):s.type==="fields"?jE.fromJSON(s):s.type==="expression"?E4.fromJSON(s):s.type==="relationship"?NA.fromJSON(s):s.type==="utilityNetworkAssociations"?iK.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(YI)))return null;const n=i.replace(YI,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?NA.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${YI}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new zA({text:e})):s.push(new jE),Array.isArray(i)&&i.length&&s.push(DA.fromJSON({mediaInfos:i})),r&&s.push(UE.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:h}=s,m=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&m.push(a),l&&m.push(l),m}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(n=>Oo(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(YI)||i.startsWith(Vae))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return KX(e).filter(i=>!(i.indexOf(YI)===0||i.indexOf(Vae)===0))}};u([p({type:cZe})],ms.prototype,"actions",void 0),u([p()],ms.prototype,"content",void 0),u([_i("content")],ms.prototype,"castContent",null),u([Ue("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],ms.prototype,"readContent",null),u([qe("web-scene","content",{popupElements:{type:Ze.ofType(oZe)},showAttachments:{type:Boolean},mediaInfos:{type:Ze.ofType(K9)},description:{type:String},relatedRecordsInfo:{type:jae}})],ms.prototype,"writeWebSceneContent",null),u([qe("content",{popupElements:{type:Ze.ofType(sZe)},showAttachments:{type:Boolean},mediaInfos:{type:Ze.ofType(K9)},description:{type:String},relatedRecordsInfo:{type:jae}})],ms.prototype,"writeWebMapContent",null),u([p({type:[aZe],json:{write:!0}})],ms.prototype,"expressionInfos",void 0),u([p({type:[QX]})],ms.prototype,"fieldInfos",void 0),u([qe("fieldInfos")],ms.prototype,"writeFieldInfos",null),u([p({type:lZe})],ms.prototype,"layerOptions",void 0),u([qe("layerOptions")],ms.prototype,"writeLayerOptions",null),u([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],ms.prototype,"lastEditInfoEnabled",void 0),u([p()],ms.prototype,"outFields",void 0),u([p()],ms.prototype,"overwriteActions",void 0),u([p()],ms.prototype,"returnGeometry",void 0),u([p({json:{type:String}})],ms.prototype,"title",void 0),u([qe("title")],ms.prototype,"writeTitle",null),ms=u([U("esri.PopupTemplate")],ms);const Bd=ms;function g2t(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function hZe(t,e){var i,r,n;if("uniqueIdFields"in e&&((i=e.uniqueIdFields)!=null&&i.length)){if(e.uniqueIdFields.length===1)return(r=t.attributes)==null?void 0:r[e.uniqueIdFields[0]];const s=e.uniqueIdFields.map(o=>{var a;return(a=t.attributes)==null?void 0:a[o]});return JSON.stringify(s)}return"objectIdField"in e&&e.objectIdField?(n=t.attributes)==null?void 0:n[e.objectIdField]:null}const Bae=new Et({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let pZe=0,qn=class extends ye{constructor(e){super(e),this.id="sym"+pZe++,this.type=null,this.color=new Ye([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([p({type:Bae.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Bae.write,isRequired:!0}}})],qn.prototype,"type",void 0),u([p({type:Ye,json:{write:{allowNull:!0}}})],qn.prototype,"color",void 0),u([Ue("color")],qn.prototype,"readColor",null),qn=u([U("esri.symbols.Symbol")],qn);var l7;let Co=l7=class extends qn{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(s=>{const o=s.valueExpressionInfo;return o?Oo(t,e,o.expression):null});await Promise.all(n)}}}clone(){return new l7({data:ce(this.data)})}hash(){return Pge(JSON.stringify(this.data)).toString()}};u([p({json:{write:!1}})],Co.prototype,"color",void 0),u([p({json:{write:!0}})],Co.prototype,"data",void 0),u([Ue("data",["symbol"])],Co.prototype,"readData",null),u([qe("data",{})],Co.prototype,"writeData",null),u([at({CIMSymbolReference:"cim"},{readOnly:!0})],Co.prototype,"type",void 0),Co=l7=u([U("esri.symbols.CIMSymbol")],Co);let Ua=class extends ye{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};u([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Ua.prototype,"enabled",void 0),u([qe("enabled")],Ua.prototype,"writeEnabled",null),u([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Ua.prototype,"type",void 0),Ua=u([U("esri.symbols.Symbol3DLayer")],Ua);function fZe(t,e){const i=e.transparency!=null?RA(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ye([r[0]||0,r[1]||0,r[2]||0,i]):null}function mZe(t,e){e.color=t.toJSON().slice(0,3);const i=b4(t.a);i!==0&&(e.transparency=i)}function kb(t){return{type:Ye,nonNullable:t==null?void 0:t.nonNullable,json:{type:[fi],default:null,read:{source:["color","transparency"],reader:fZe},write:{target:{color:{type:[fi],isRequired:t==null?void 0:t.colorRequiredOnWrite},transparency:{type:fi}},writer:mZe}}}}const Xp={type:Number,cast:Ii,json:{write:!0}};var cF;function w2t(t){return t==="emissive"?cF.Emissive:cF.Color}(function(t){t[t.Emissive=0]="Emissive",t[t.Color=1]="Color"})(cF||(cF={}));let W0=class extends ye{constructor(e){super(e),this.color=new Ye([0,0,0,1]),this.extensionLength=0,this.size=Di(1)}clone(){}cloneProperties(){return{color:ce(this.color),size:this.size,extensionLength:this.extensionLength}}};u([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],W0.prototype,"type",void 0),u([p(kb({colorRequiredOnWrite:!0}))],W0.prototype,"color",void 0),u([p({...Xp,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],W0.prototype,"extensionLength",void 0),u([p(Xp)],W0.prototype,"size",void 0),W0=u([U("esri.symbols.edges.Edges3D")],W0);const nK=W0;var c7;let gD=c7=class extends nK{constructor(t){super(t),this.type="sketch"}clone(){return new c7(this.cloneProperties())}};u([at({sketch:"sketch"},{readOnly:!0})],gD.prototype,"type",void 0),gD=c7=u([U("esri.symbols.edges.SketchEdges3D")],gD);const yZe=gD;var u7;let vD=u7=class extends nK{constructor(t){super(t),this.type="solid"}clone(){return new u7(this.cloneProperties())}};u([at({solid:"solid"},{readOnly:!0})],vD.prototype,"type",void 0),vD=u7=u([U("esri.symbols.edges.SolidEdges3D")],vD);const G1e=vD,H1e={types:{key:"type",base:nK,typeMap:{solid:G1e,sketch:yZe}},json:{write:!0}};var d7;let v$=d7=class extends ye{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new d7(t)}};u([p({json:{write:!1}})],v$.prototype,"strength",void 0),u([p({json:{write:!1}})],v$.prototype,"source",void 0),v$=d7=u([U("esri.symbols.support.Symbol3DEmissive")],v$);var h7;let _l=h7=class extends ye{constructor(t){super(t),this.color=null,this.emissive=new v$({source:"emissive"})}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new h7(t)}};u([p(kb())],_l.prototype,"color",void 0),u([p({type:v$,json:{write:!1}})],_l.prototype,"emissive",void 0),_l=h7=u([U("esri.symbols.support.Symbol3DMaterial")],_l);var p7,BT;let _m=(BT=class extends Ua{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,i;return new p7({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(i=this.material)==null?void 0:i.clone(),castShadows:this.castShadows,size:this.size})}},p7=BT,BT);u([at({Extrude:"extrude"},{readOnly:!0})],_m.prototype,"type",void 0),u([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],_m.prototype,"size",void 0),u([p({type:_l,json:{write:!0}})],_m.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_m.prototype,"castShadows",void 0),u([p(H1e)],_m.prototype,"edges",void 0),_m=p7=u([U("esri.symbols.ExtrudeSymbol3DLayer")],_m);let Tk=class extends ye{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Tk.prototype,"type",void 0),Tk=u([U("esri.symbols.patterns.LinePattern3D")],Tk);const gZe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var f7;const vZe=Wt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Ww=f7=class extends Tk{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new f7(t)}};u([p({type:["style"],json:{write:{isRequired:!0}}})],Ww.prototype,"type",void 0),u([at(vZe),p({type:gZe,json:{write:{isRequired:!0}}})],Ww.prototype,"style",void 0),Ww=f7=u([U("esri.symbols.patterns.LineStylePattern3D")],Ww);let Ek=class extends ye{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ek.prototype,"type",void 0),Ek=u([U("esri.symbols.patterns.Pattern3D")],Ek);const bZe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var m7;let b$=m7=class extends Ek{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new m7({style:this.style})}};u([p({type:["style"],json:{write:{isRequired:!0}}})],b$.prototype,"type",void 0),u([p({type:bZe,json:{read:!0,write:{isRequired:!0}}})],b$.prototype,"style",void 0),b$=m7=u([U("esri.symbols.patterns.StylePattern3D")],b$);const wZe={types:{key:"type",base:Ek,typeMap:{style:b$}},json:{write:!0}},q1e={types:{key:"type",base:Tk,typeMap:{style:Ww}},json:{write:!0}},Ck=new Ye("white"),_Ze=new Ye([255,255,255,0]);function xZe(t){return t.r===0&&t.g===0&&t.b===0}var y7;let Ik=y7=class extends _l{constructor(t){super(t),this.colorMixMode=null}clone(){var e,i;const t={color:((e=this.color)==null?void 0:e.clone())??null,colorMixMode:this.colorMixMode,emissive:((i=this.emissive)==null?void 0:i.clone())??null};return new y7(t)}};u([at({multiply:"multiply",replace:"replace",tint:"tint"})],Ik.prototype,"colorMixMode",void 0),Ik=y7=u([U("esri.symbols.support.Symbol3DFillMaterial")],Ik);function SZe(t,e=!1){return t<=Ege?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function $2t(t){return(Tge(t)?t.byteLength/8:t.length)<=Ege?Array.from(t):new Float64Array(t)}function T2t(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function QO(t=CZe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function sK(t,e,i,r,n,s,o=QO()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function E2t(t,e=QO()){return $Ze(t,0,t.length/3,e)}function $Ze(t,e,i,r=QO()){return W1e(r,g7),TZe(r,t,e,i),r}function C2t(t,e=SZe(24)){const[i,r,n,s,o,a]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=n,e[21]=s,e[22]=o,e[23]=a,e}function I2t(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new jt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function M2t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function k2t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function A2t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function TZe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let h=0;h<r;h++)n=Math.min(n,e[i+3*h]),s=Math.min(s,e[i+3*h+1]),o=Math.min(o,e[i+3*h+2]),a=Math.max(a,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),c=Math.max(c,e[i+3*h+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function O2t(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(i)for(let h=0;h<r;h++){const m=e[h];n=Math.min(n,m[0]),s=Math.min(s,m[1]),o=Math.min(o,m[2]),a=Math.max(a,m[0]),l=Math.max(l,m[1]),c=Math.max(c,m[2])}else for(let h=0;h<r;h++){const m=e[h];n=Math.min(n,m[0]),s=Math.min(s,m[1]),a=Math.max(a,m[0]),l=Math.max(l,m[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function P2t(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function eP(t){return t[0]>=t[3]?0:t[3]-t[0]}function tP(t){return t[1]>=t[4]?0:t[4]-t[1]}function iP(t){return t[2]>=t[5]?0:t[5]-t[2]}function L2t(t){const e=eP(t),i=iP(t),r=tP(t);return Math.sqrt(e*e+i*i+r*r)}function R2t(t,e=[0,0,0]){return e[0]=t[0]+eP(t)/2,e[1]=t[1]+tP(t)/2,e[2]=t[2]+iP(t)/2,e}function D2t(t,e=[0,0,0]){return e[0]=eP(t),e[1]=tP(t),e[2]=iP(t),e}function N2t(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function EZe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function z2t(t,e){return e==null||EZe(t,e)}function F2t(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function U2t(t,e,i=t){const r=t[0]+eP(t)/2,n=t[1]+tP(t)/2,s=t[2]+iP(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function j2t(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function V2t(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function B2t(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function W1e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function G2t(t){return t?W1e(t,g7):QO(g7)}function H2t(t,e){return e||(e=Br()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function q2t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function W2t(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function Gae(t){return t.length===6}function J2t(t){return eP(t)===0&&tP(t)===0&&iP(t)===0}function Z2t(t,e,i){if(t==null||e==null)return t===e;if(!Gae(t)||!Gae(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const g7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],CZe=[0,0,0,0,0,0];QO();function Y2t(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=_C(i,r,n);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const IZe=sK(-.5,-.5,-.5,.5,.5,.5),MZe=sK(-.5,-.5,0,.5,.5,1),kZe=sK(-.5,-.5,0,.5,.5,.5);function X2t(t){switch(t){case"sphere":case"cube":case"diamond":return IZe;case"cylinder":case"cone":case"inverted-cone":return MZe;case"tetrahedron":return kZe;default:return}}const oK=["butt","square","round"],AZe=[...oK,"none"],J1e=["miter","bevel","round"];var v7;let J0=v7=class extends ye{constructor(t){super(t),this.color=new Ye([0,0,0,1]),this.size=Di(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new v7(t)}};u([p(kb({colorRequiredOnWrite:!0}))],J0.prototype,"color",void 0),u([p({...Xp,json:{write:{isRequired:!0}}})],J0.prototype,"size",void 0),u([p(q1e)],J0.prototype,"pattern",void 0),u([p({type:oK,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],J0.prototype,"patternCap",void 0),J0=v7=u([U("esri.symbols.support.Symbol3DOutline")],J0);var bD,GT;let Aa=(GT=class extends Ua{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new bD(e)}static fromSimpleFillSymbol(e){var n,s,o;const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Ww({style:e.outline.style}):null,r={size:((n=e.outline)==null?void 0:n.width)??0,color:(((s=e.outline)==null?void 0:s.color)??Ck).clone(),pattern:i};return i&&((o=e.outline)!=null&&o.cap)&&(r.patternCap=e.outline.cap),new bD({material:new Ik({color:(e.color??_Ze).clone()}),pattern:e.style&&e.style!=="solid"?new b$({style:e.style}):null,outline:r})}},bD=GT,GT);u([at({Fill:"fill"},{readOnly:!0})],Aa.prototype,"type",void 0),u([p({type:Ik,json:{write:!0}})],Aa.prototype,"material",void 0),u([p(wZe)],Aa.prototype,"pattern",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Aa.prototype,"castShadows",void 0),u([p({type:J0,json:{write:!0}})],Aa.prototype,"outline",void 0),u([p(H1e)],Aa.prototype,"edges",void 0),Aa=bD=u([U("esri.symbols.FillSymbol3DLayer")],Aa);var b7;const OZe=Wt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Z0=b7=class extends ye{constructor(t){super(t)}readHref(t,e,i){return t?py(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Sy(t)?e.dataURI=t:(e.href=r1(t,r),$l(e.href)&&(e.href=so(e.href))))}clone(){return new b7({href:this.href,primitive:this.primitive})}};u([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Z0.prototype,"href",void 0),u([Ue("href")],Z0.prototype,"readHref",null),u([qe("href",{href:{type:String},dataURI:{type:String}})],Z0.prototype,"writeHref",null),u([at(OZe)],Z0.prototype,"primitive",void 0),Z0=b7=u([U("esri.symbols.support.IconSymbol3DLayerResource")],Z0);const PZe="circle";var w7;let w$=w7=class extends st{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new w7({x:this.x,y:this.y})}};u([p({type:Number})],w$.prototype,"x",void 0),u([p({type:Number})],w$.prototype,"y",void 0),w$=w7=u([U("esri.symbols.support.Symbol3DAnchorPosition2D")],w$);var _7;let s2=_7=class extends ye{constructor(t){super(t),this.color=new Ye([0,0,0,1]),this.size=Di(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new _7(t)}};u([p(kb({colorRequiredOnWrite:!0}))],s2.prototype,"color",void 0),u([p({...Xp,json:{write:{isRequired:!0}}})],s2.prototype,"size",void 0),s2=_7=u([U("esri.symbols.support.Symbol3DIconOutline")],s2);var pS,HT;let $o=(HT=class extends Ua{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new pS({anchor:this.anchor,anchorPosition:ce(this.anchorPosition),enabled:this.enabled,material:ce(this.material),outline:ce(this.outline),resource:ce(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const i=e.color||Ck,r=Hae(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ck).clone()}:null;return new pS({size:e.size,angle:e.angle,resource:{primitive:RZe(()=>Ce.getLogger(this.prototype),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||xZe(e.color)?Ck:e.color,r=Hae(e);return new pS({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new pS({resource:{href:Kve({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},pS=HT,HT);function Hae(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=qae(t.xoffset),n=qae(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function qae(t){return isFinite(t)?t:0}u([p({type:_l,json:{write:!0}})],$o.prototype,"material",void 0),u([p({type:Z0,json:{write:!0}})],$o.prototype,"resource",void 0),u([at({Icon:"icon"},{readOnly:!0})],$o.prototype,"type",void 0),u([p({...Xp,json:{write:{isRequired:!0}}})],$o.prototype,"size",void 0),u([at({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],$o.prototype,"anchor",void 0),u([p({type:w$,json:{type:[Number],read:{reader:t=>new w$({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],$o.prototype,"anchorPosition",void 0),u([p({type:s2,json:{write:!0}})],$o.prototype,"outline",void 0),u([p({type:Number,json:{write:!0,default:0}})],$o.prototype,"angle",void 0),$o=pS=u([U("esri.symbols.IconSymbol3DLayer")],$o);const LZe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function RZe(t,e){return LZe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const DZe=["begin","end","begin-end"],Z1e=["arrow","circle","square","diamond","cross","x"];let Pm=class extends It.ClonableMixin(ye){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Pm.prototype,"type",void 0),u([p({type:DZe,json:{default:"begin-end",write:!0}})],Pm.prototype,"placement",void 0),u([p({type:Z1e,json:{default:"arrow",write:!0}})],Pm.prototype,"style",void 0),u([p({type:Ye,json:{type:[fi],default:null,write:!0}})],Pm.prototype,"color",void 0),Pm=u([U("esri.symbols.LineStyleMarker3D")],Pm);var wD,qT;let ka=(qT=class extends Ua{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Di(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new wD(e)}static fromSimpleLineSymbol(e){var r;const i={enabled:!0,size:e.width??Di(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Ww({style:e.style}):null,material:new _l({color:(e.color||Ck).clone()}),marker:e.marker?new Pm({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new wD(i)}},wD=qT,qT);u([p({type:_l,json:{write:!0}})],ka.prototype,"material",void 0),u([at({Line:"line"},{readOnly:!0})],ka.prototype,"type",void 0),u([p({type:J1e,json:{write:!0,default:"miter"}})],ka.prototype,"join",void 0),u([p({type:oK,json:{write:!0,default:"butt"}})],ka.prototype,"cap",void 0),u([p({...Xp,json:{write:{isRequired:!0}}})],ka.prototype,"size",void 0),u([p(q1e)],ka.prototype,"pattern",void 0),u([p({types:{key:"type",base:Pm,typeMap:{style:Pm}},json:{write:!0}})],ka.prototype,"marker",void 0),ka=wD=u([U("esri.symbols.LineSymbol3DLayer")],ka);var x7;const NZe=Wt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let o2=x7=class extends ye{clone(){return new x7({href:this.href,primitive:this.primitive})}};u([p({type:String,json:{read:qU,write:n1}})],o2.prototype,"href",void 0),u([at(NZe)],o2.prototype,"primitive",void 0),o2=x7=u([U("esri.symbols.support.ObjectSymbol3DLayerResource")],o2);const zZe="sphere";var S7;let Aw=S7=class extends st{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new S7({x:this.x,y:this.y,z:this.z})}};u([p({type:Number})],Aw.prototype,"x",void 0),u([p({type:Number})],Aw.prototype,"y",void 0),u([p({type:Number})],Aw.prototype,"z",void 0),Aw=S7=u([U("esri.symbols.support.Symbol3DAnchorPosition3D")],Aw);var $7,WT;let Ks=(WT=class extends Ua{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,i,r;return new $7({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((i=this.material)==null?void 0:i.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},$7=WT,WT);u([p({type:_l,json:{write:!0}})],Ks.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ks.prototype,"castShadows",void 0),u([p({type:o2,json:{write:!0}})],Ks.prototype,"resource",void 0),u([at({Object:"object"},{readOnly:!0})],Ks.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],Ks.prototype,"width",void 0),u([p({type:Number,json:{write:!0}})],Ks.prototype,"height",void 0),u([p({type:Number,json:{write:!0}})],Ks.prototype,"depth",void 0),u([at({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ks.prototype,"anchor",void 0),u([p({type:Aw,json:{type:[Number],read:{reader:t=>new Aw({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ks.prototype,"anchorPosition",void 0),u([p({type:Number,json:{write:!0}})],Ks.prototype,"heading",void 0),u([p({type:Number,json:{write:!0}})],Ks.prototype,"tilt",void 0),u([p({type:Number,json:{write:!0}})],Ks.prototype,"roll",void 0),u([p({readOnly:!0})],Ks.prototype,"isPrimitive",null),Ks=$7=u([U("esri.symbols.ObjectSymbol3DLayer")],Ks);var T7,JT;let xo=(JT=class extends Ua{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new T7({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},T7=JT,JT);u([p({type:_l,json:{write:!0}})],xo.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xo.prototype,"castShadows",void 0),u([at({Path:"path"},{readOnly:!0})],xo.prototype,"type",void 0),u([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],xo.prototype,"profile",void 0),u([p({type:J1e,json:{write:!0,default:"miter"}})],xo.prototype,"join",void 0),u([p({type:AZe,json:{write:!0,default:"butt"}})],xo.prototype,"cap",void 0),u([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],xo.prototype,"width",void 0),u([Ue("width",["width","size","height"])],xo.prototype,"readWidth",null),u([p({type:Number,json:{write:!0}})],xo.prototype,"height",void 0),u([Ue("height",["height","size","width"])],xo.prototype,"readHeight",null),u([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],xo.prototype,"anchor",void 0),u([p({type:["heading","all"],json:{write:!0,default:"all"}})],xo.prototype,"profileRotation",void 0),xo=T7=u([U("esri.symbols.PathSymbol3DLayer")],xo);const FZe=["none","underline","line-through"],UZe=["normal","italic","oblique"],jZe=["normal","lighter","bold","bolder"],Y1e={type:Number,cast:t=>{const e=Da(t);return e===0?1:da(e,.1,4)},nonNullable:!0},VZe=["left","right","center"],BZe=["baseline","top","middle","bottom"],X1e={type:VZe,nonNullable:!0},K1e={type:BZe,nonNullable:!0},GZe=8;var E7;let cc=E7=class extends ye{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ii(t)}clone(){return new E7({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([p({type:FZe,json:{default:"none",write:!0}})],cc.prototype,"decoration",void 0),u([p({type:String,json:{write:!0}})],cc.prototype,"family",void 0),u([p({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],cc.prototype,"size",void 0),u([_i("size")],cc.prototype,"castSize",null),u([p({type:UZe,json:{default:"normal",write:!0}})],cc.prototype,"style",void 0),u([p({type:jZe,json:{default:"normal",write:!0}})],cc.prototype,"weight",void 0),cc=E7=u([U("esri.symbols.Font")],cc);var C7;let _$=C7=class extends ye{constructor(){super(...arguments),this.color=new Ye([0,0,0,1]),this.size=0}clone(){const t={color:ce(this.color),size:this.size};return new C7(t)}};u([p(kb())],_$.prototype,"color",void 0),u([p(Xp)],_$.prototype,"size",void 0),_$=C7=u([U("esri.symbols.support.Symbol3DHalo")],_$);let Mk=class extends It.ClonableMixin(ye){constructor(e){super(e),this.color=null}};u([p(kb())],Mk.prototype,"color",void 0),Mk=u([U("esri.symbols.support.Symbol3DTextBackground")],Mk);var _D,ZT;let Rs=(ZT=class extends Ua{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new _D({enabled:this.enabled,font:this.font&&ce(this.font),halo:this.halo&&ce(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ce(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new _D({font:e.font!=null?e.font.clone():new cc,halo:HZe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new _l({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Mk({color:e.backgroundColor.clone()}):null})}},_D=ZT,ZT);function HZe(t,e){return t&&e!=null&&e>0?new _$({color:ce(t),size:e}):null}u([p({type:cc,json:{write:!0}})],Rs.prototype,"font",null),u([qe("font")],Rs.prototype,"writeFont",null),u([p({type:_$,json:{write:!0}})],Rs.prototype,"halo",void 0),u([p({...X1e,json:{default:"center",write:!0}})],Rs.prototype,"horizontalAlignment",void 0),u([p({...Y1e,json:{default:1,write:!0}})],Rs.prototype,"lineHeight",void 0),u([p({type:_l,json:{write:!0}})],Rs.prototype,"material",void 0),u([p({type:Mk,json:{write:!0}})],Rs.prototype,"background",void 0),u([p(Xp)],Rs.prototype,"size",null),u([p({type:String,json:{write:!0}})],Rs.prototype,"text",void 0),u([at({Text:"text"},{readOnly:!0})],Rs.prototype,"type",void 0),u([p({...K1e,json:{default:"baseline",write:!0}})],Rs.prototype,"verticalAlignment",void 0),Rs=_D=u([U("esri.symbols.TextSymbol3DLayer")],Rs);var I7,YT;let xm=(YT=class extends Ua{constructor(e){super(e),this.color=M7.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new I7({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},I7=YT,YT);u([p({type:Ye,nonNullable:!0,json:{type:[fi],write:(t,e,i)=>e[i]=t.toArray(Ye.AlphaMode.UNLESS_OPAQUE),default:()=>M7.clone(),defaultEquals:t=>t.toCss(!0)===M7.toCss(!0)}})],xm.prototype,"color",void 0),u([at({Water:"water"},{readOnly:!0})],xm.prototype,"type",void 0),u([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],xm.prototype,"waterbodySize",void 0),u([p({type:Number,json:{write:!0,default:null}})],xm.prototype,"waveDirection",void 0),u([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],xm.prototype,"waveStrength",void 0),xm=I7=u([U("esri.symbols.WaterSymbol3DLayer")],xm);const M7=new Ye([0,119,190]);var k7;let Md=k7=class extends st{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new k7({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([p({type:String})],Md.prototype,"name",void 0),u([p({type:String})],Md.prototype,"styleUrl",void 0),u([p({type:String})],Md.prototype,"styleName",void 0),u([p({type:Fe})],Md.prototype,"portal",void 0),Md=k7=u([U("esri.symbols.support.StyleOrigin")],Md);var A7;let w_=A7=class extends st{constructor(){super(...arguments),this.url=""}clone(){return new A7({url:this.url})}};u([p({type:String})],w_.prototype,"url",void 0),w_=A7=u([U("esri.symbols.support.Thumbnail")],w_);const Q1e={icon:$o,object:Ks,line:ka,path:xo,fill:Aa,extrude:_m,text:Rs,water:xm},qZe=Ze.ofType({base:Ua,key:"type",typeMap:Q1e,errorContext:"symbol-layer"});let ml=class extends qn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,n=r||Ze;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&Ce.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){my(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=py(e.styleUrl,r);return new Md({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new Md({portal:(r==null?void 0:r.portal)||Fe.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new Sc("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=r1(e.styleUrl,n);$l(s)&&(s=so(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!Xve(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new Sc("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ua||e&&Q1e[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};u([p({json:{read:!1,write:!1}})],ml.prototype,"color",null),u([p({type:qZe,nonNullable:!0,json:{write:!0}}),_i(x_e)],ml.prototype,"symbolLayers",null),u([p({type:Md})],ml.prototype,"styleOrigin",void 0),u([Ue("styleOrigin")],ml.prototype,"readStyleOrigin",null),u([qe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],ml.prototype,"writeStyleOrigin",null),u([p({type:w_,json:{read:!1}})],ml.prototype,"thumbnail",void 0),u([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],ml.prototype,"type",void 0),ml=u([U("esri.symbols.Symbol3D")],ml);let x$=class extends ye{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([p({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],x$.prototype,"type",void 0),u([p({readOnly:!0})],x$.prototype,"visible",void 0),x$=u([U("esri.symbols.callouts.Callout3D")],x$);var O7;let xD=O7=class extends ye{constructor(t){super(t),this.color=new Ye("white")}clone(){return new O7({color:ce(this.color)})}};u([p(kb({colorRequiredOnWrite:!0}))],xD.prototype,"color",void 0),xD=O7=u([U("esri.symbols.callouts.LineCallout3DBorder")],xD);const WZe=xD;var P7;let Sm=P7=class extends x${constructor(t){super(t),this.type="line",this.color=new Ye([0,0,0,1]),this.size=Di(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new P7({color:ce(this.color),size:this.size,border:ce(this.border)})}};u([at({line:"line"})],Sm.prototype,"type",void 0),u([p(kb({colorRequiredOnWrite:!0}))],Sm.prototype,"color",void 0),u([p({...Xp,json:{write:{isRequired:!0}}})],Sm.prototype,"size",void 0),u([p({type:WZe,json:{write:!0}})],Sm.prototype,"border",void 0),u([p({readOnly:!0})],Sm.prototype,"visible",null),Sm=P7=u([U("esri.symbols.callouts.LineCallout3D")],Sm);function aK(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function exe(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!(e!=null&&e.visible)&&!!aK(t)}function ikt(t){return t.type==="point-3d"||t.type==="label-3d"}function rkt(t){return t.horizontalAlignment==="center"}const txe={types:{key:"type",base:x$,typeMap:{line:Sm}},json:{write:!0}};var L7;let yv=L7=class extends ye{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new L7({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([p({...Xp,json:{write:{isRequired:!0}}})],yv.prototype,"screenLength",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],yv.prototype,"minWorldLength",void 0),u([p({type:Number,json:{write:!0}})],yv.prototype,"maxWorldLength",void 0),yv=L7=u([U("esri.symbols.support.Symbol3DVerticalOffset")],yv);var SD;const ixe=Ze.ofType({base:null,key:"type",typeMap:{text:Rs}});let _d=SD=class extends ml{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new ixe,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return exe(this)}hasVisibleVerticalOffset(){return aK(this)}clone(){return new SD({styleOrigin:ce(this.styleOrigin),symbolLayers:ce(this.symbolLayers),thumbnail:ce(this.thumbnail),callout:ce(this.callout),verticalOffset:ce(this.verticalOffset)})}static fromTextSymbol(t){return new SD({symbolLayers:new Ze([Rs.fromTextSymbol(t)])})}};u([p({type:yv,json:{write:!0}})],_d.prototype,"verticalOffset",void 0),u([p(txe)],_d.prototype,"callout",void 0),u([p({json:{read:!1,write:!1}})],_d.prototype,"styleOrigin",void 0),u([p({type:ixe})],_d.prototype,"symbolLayers",void 0),u([at({LabelSymbol3D:"label-3d"},{readOnly:!0})],_d.prototype,"type",void 0),_d=SD=u([U("esri.symbols.LabelSymbol3D")],_d);var $D;const rxe=Ze.ofType({base:null,key:"type",typeMap:{line:ka,path:xo}}),JZe=Ze.ofType({base:null,key:"type",typeMap:{line:ka,path:xo}});let Ld=$D=class extends ml{constructor(t){super(t),this.symbolLayers=new rxe,this.type="line-3d"}clone(){return new $D({styleOrigin:ce(this.styleOrigin),symbolLayers:ce(this.symbolLayers),thumbnail:ce(this.thumbnail)})}static fromSimpleLineSymbol(t){return new $D({symbolLayers:new Ze([ka.fromSimpleLineSymbol(t)])})}};u([p({type:rxe,json:{type:JZe}})],Ld.prototype,"symbolLayers",void 0),u([at({LineSymbol3D:"line-3d"},{readOnly:!0})],Ld.prototype,"type",void 0),Ld=$D=u([U("esri.symbols.LineSymbol3D")],Ld);var TD;const nxe=Ze.ofType({base:null,key:"type",typeMap:{fill:Aa}});let Xm=TD=class extends ml{constructor(t){super(t),this.symbolLayers=new nxe,this.type="mesh-3d"}clone(){return new TD({styleOrigin:ce(this.styleOrigin),symbolLayers:ce(this.symbolLayers),thumbnail:ce(this.thumbnail)})}static fromSimpleFillSymbol(t){return new TD({symbolLayers:new Ze([Aa.fromSimpleFillSymbol(t)])})}};u([p({type:nxe})],Xm.prototype,"symbolLayers",void 0),u([at({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Xm.prototype,"type",void 0),Xm=TD=u([U("esri.symbols.MeshSymbol3D")],Xm);let a2=class extends qn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([at({esriSLS:"simple-line"},{readOnly:!0})],a2.prototype,"type",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],a2.prototype,"width",void 0),a2=u([U("esri.symbols.LineSymbol")],a2);var R7;let mh=R7=class extends ye{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new R7({color:ce(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};u([p({type:["begin","end","begin-end"],json:{write:!0}})],mh.prototype,"placement",void 0),u([at({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],mh.prototype,"type",void 0),u([p({type:Z1e})],mh.prototype,"style",void 0),u([qe("style")],mh.prototype,"writeStyle",null),u([p({type:Ye,value:null,json:{write:{allowNull:!0}}})],mh.prototype,"color",null),u([Ue("color")],mh.prototype,"readColor",null),u([qe("color")],mh.prototype,"writeColor",null),mh=R7=u([U("esri.symbols.LineSymbolMarker")],mh);const ZZe=mh;var D7;const LB=new Et({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Vr=D7=class extends a2{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=Ii(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Ii(s)),o}clone(){var t;return new D7({color:ce(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};u([at({esriSLS:"simple-line"},{readOnly:!0})],Vr.prototype,"type",void 0),u([p({type:LB.apiValues,json:{read:LB.read,write:LB.write}})],Vr.prototype,"style",void 0),u([p({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Vr.prototype,"cap",void 0),u([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Vr.prototype,"join",void 0),u([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":ZZe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Vr.prototype,"marker",void 0),u([p({type:Number,json:{read:!1,write:!1}})],Vr.prototype,"miterLimit",void 0),Vr=D7=u([U("esri.symbols.SimpleLineSymbol")],Vr);let S$=class extends qn{constructor(e){super(e),this.outline=null,this.type=null}hash(){var e;return`${this.type}.${(e=this.outline)==null?void 0:e.hash()}`}};u([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Vr}},json:{default:null,write:!0}})],S$.prototype,"outline",void 0),u([p({type:["simple-fill","picture-fill"],readOnly:!0})],S$.prototype,"type",void 0),S$=u([U("esri.symbols.FillSymbol")],S$);function YZe(t,e,i){return e.imageData?Kve({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):sxe(e.url,i)}function sxe(t,e){if(!$l(t)){const i=KZe(e);if(i)return i1(i,"images",t)}return py(t,e)}function XZe(t,e,i,r){if(Sy(t)){const n=pb(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&n1(i.url,e,"url",r)}else n1(t,e,"url",r)}const oxe={json:{read:{source:["imageData","url"],reader:YZe},write:{writer(t,e,i,r){XZe(t,e,this.source,r)}}}},axe={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=sxe(e.url,i)),r}}}};function KZe(t){var n,s;if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(n=i.parsedUrl)==null?void 0:n.path:r==="map-image"||r==="tile"?(s=t.url)==null?void 0:s.path:null}var N7;let al=N7=class extends S${constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=Ii(i)),r!=null&&(n.height=Ii(r)),n}clone(){const t=new N7({color:ce(this.color),height:this.height,outline:ce(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",ce(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([at({esriPFS:"picture-fill"},{readOnly:!0})],al.prototype,"type",void 0),u([p(oxe)],al.prototype,"url",void 0),u([p({type:Number,json:{write:!0}})],al.prototype,"xscale",void 0),u([p({type:Number,json:{write:!0}})],al.prototype,"yscale",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],al.prototype,"width",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],al.prototype,"height",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],al.prototype,"xoffset",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],al.prototype,"yoffset",void 0),u([p(axe)],al.prototype,"source",void 0),al=N7=u([U("esri.symbols.PictureFillSymbol")],al);let $m=class extends qn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],$m.prototype,"angle",void 0),u([p({type:["simple-marker","picture-marker"],readOnly:!0})],$m.prototype,"type",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],$m.prototype,"xoffset",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],$m.prototype,"yoffset",void 0),u([p({cast:t=>t==="auto"?t:Da(Ii(t)),json:{write:!0}})],$m.prototype,"size",void 0),$m=u([U("esri.symbols.MarkerSymbol")],$m);var z7;let Yo=z7=class extends $m{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ii(e)),i!=null&&(r.height=Ii(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new z7({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",ce(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([p({json:{write:!1}})],Yo.prototype,"color",void 0),u([at({esriPMS:"picture-marker"},{readOnly:!0})],Yo.prototype,"type",void 0),u([p(oxe)],Yo.prototype,"url",void 0),u([p(axe)],Yo.prototype,"source",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],Yo.prototype,"height",void 0),u([Ue("height",["height","size"])],Yo.prototype,"readHeight",null),u([p({type:Number,cast:Ii,json:{write:!0}})],Yo.prototype,"width",void 0),u([p({json:{write:!1}})],Yo.prototype,"size",void 0),Yo=z7=u([U("esri.symbols.PictureMarkerSymbol")],Yo);var Y0;const lxe=Ze.ofType({base:null,key:"type",typeMap:{icon:$o,object:Ks,text:Rs}});let Na=Y0=class extends ml{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new lxe,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return exe(this)}hasVisibleVerticalOffset(){return aK(this)}clone(){return new Y0({verticalOffset:ce(this.verticalOffset),callout:ce(this.callout),styleOrigin:ce(this.styleOrigin),symbolLayers:ce(this.symbolLayers),thumbnail:ce(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Y0({symbolLayers:new Ze([$o.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Y0({symbolLayers:new Ze([$o.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Y0(i!=null&&i.callout?{symbolLayers:new Ze([$o.fromCIMSymbol(t)]),callout:new Sm({size:.5,color:new Ye([0,0,0])}),verticalOffset:new yv({screenLength:40})}:{symbolLayers:new Ze([$o.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Y0({symbolLayers:new Ze([Rs.fromTextSymbol(t)])})}};u([p({type:yv,json:{write:!0}})],Na.prototype,"verticalOffset",void 0),u([p(txe)],Na.prototype,"callout",void 0),u([p({type:lxe,json:{origins:{"web-scene":{write:!0}}}})],Na.prototype,"symbolLayers",void 0),u([at({PointSymbol3D:"point-3d"},{readOnly:!0})],Na.prototype,"type",void 0),Na=Y0=u([U("esri.symbols.PointSymbol3D")],Na);var l2;const cxe=Ze.ofType({base:null,key:"type",typeMap:{extrude:_m,fill:Aa,icon:$o,line:ka,object:Ks,text:Rs,water:xm}});let vu=l2=class extends ml{constructor(t){super(t),this.symbolLayers=new cxe,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&db(Ce.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&db(Ce.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(ua(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Bp))}clone(){return new l2({styleOrigin:ce(this.styleOrigin),symbolLayers:ce(this.symbolLayers),thumbnail:ce(this.thumbnail)})}static fromJSON(t){var i;const e=new l2;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new l2({symbolLayers:new Ze([Aa.fromSimpleFillSymbol(t)])})}};u([p({type:cxe,json:{write:!0}})],vu.prototype,"symbolLayers",void 0),u([at({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],vu.prototype,"type",void 0),vu=l2=u([U("esri.symbols.PolygonSymbol3D")],vu);var F7;const RB=new Et({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Io=F7=class extends S${constructor(...t){super(...t),this.color=new Ye([0,0,0,.25]),this.outline=new Vr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new F7({color:ce(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([p()],Io.prototype,"color",void 0),u([p()],Io.prototype,"outline",void 0),u([at({esriSFS:"simple-fill"},{readOnly:!0})],Io.prototype,"type",void 0),u([p({type:RB.apiValues,json:{read:RB.read,write:RB.write}})],Io.prototype,"style",void 0),Io=F7=u([U("esri.symbols.SimpleFillSymbol")],Io);var U7;const DB=new Et({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let jr=U7=class extends $m{constructor(...t){super(...t),this.color=new Ye([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Vr}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=Ii(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new U7({angle:this.angle,color:ce(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};u([p()],jr.prototype,"color",void 0),u([qe("color")],jr.prototype,"writeColor",null),u([at({esriSMS:"simple-marker"},{readOnly:!0})],jr.prototype,"type",void 0),u([p()],jr.prototype,"size",void 0),u([p({type:DB.apiValues,json:{read:DB.read,write:DB.write}})],jr.prototype,"style",void 0),u([p({type:String,json:{write:!0}})],jr.prototype,"path",null),u([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Vr}},json:{default:null,write:!0}})],jr.prototype,"outline",void 0),jr=U7=u([U("esri.symbols.SimpleMarkerSymbol")],jr);var j7;let Zi=j7=class extends qn{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new cc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Ii(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new j7({angle:this.angle,backgroundColor:ce(this.backgroundColor),borderLineColor:ce(this.borderLineColor),borderLineSize:this.borderLineSize,color:ce(this.color),font:this.font&&this.font.clone(),haloColor:ce(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([p({type:Ye,json:{write:!0}})],Zi.prototype,"backgroundColor",void 0),u([p({type:Ye,json:{write:!0}})],Zi.prototype,"borderLineColor",void 0),u([p({type:Number,json:{write:!0},cast:Ii})],Zi.prototype,"borderLineSize",void 0),u([p({type:cc,json:{write:!0}})],Zi.prototype,"font",void 0),u([p({...X1e,json:{write:!0}})],Zi.prototype,"horizontalAlignment",void 0),u([p({type:Boolean,json:{write:!0}})],Zi.prototype,"kerning",void 0),u([p({type:Ye,json:{write:!0}})],Zi.prototype,"haloColor",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],Zi.prototype,"haloSize",void 0),u([p({type:Boolean,json:{write:!0}})],Zi.prototype,"rightToLeft",void 0),u([p({type:Boolean,json:{write:!0}})],Zi.prototype,"rotated",void 0),u([p({type:String,json:{write:!0}})],Zi.prototype,"text",void 0),u([at({esriTS:"text"},{readOnly:!0})],Zi.prototype,"type",void 0),u([p({...K1e,json:{write:!0}})],Zi.prototype,"verticalAlignment",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],Zi.prototype,"xoffset",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],Zi.prototype,"yoffset",void 0),u([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Zi.prototype,"angle",void 0),u([p({type:Number,json:{write:!0}})],Zi.prototype,"width",void 0),u([p({type:Number})],Zi.prototype,"lineWidth",void 0),u([qe("lineWidth")],Zi.prototype,"writeLineWidth",null),u([_i("lineWidth")],Zi.prototype,"castLineWidth",null),u([p(Y1e)],Zi.prototype,"lineHeight",void 0),u([qe("lineHeight")],Zi.prototype,"writeLineHeight",null),Zi=j7=u([U("esri.symbols.TextSymbol")],Zi);var V7;let To=V7=class extends qn{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:Fe.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new V7({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Tve(Ce.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if((e==null?void 0:e.type)!=="cim")throw new Q("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await $e(()=>Promise.resolve().then(()=>wft),void 0);sr(t);const n=r(this,{portal:this.portal},t);n.catch(o=>{Ce.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await n;return e!=null&&e.set(i,s.clone()),s}};u([p({json:{write:!1}})],To.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],To.prototype,"styleName",void 0),u([p({type:Fe,json:{write:!1}})],To.prototype,"portal",void 0),u([p({type:String,json:{read:qU,write:n1}})],To.prototype,"styleUrl",void 0),u([p({type:w_,json:{read:!1}})],To.prototype,"thumbnail",void 0),u([p({type:String,json:{write:!0}})],To.prototype,"name",void 0),u([at({styleSymbolReference:"web-style"},{readOnly:!0})],To.prototype,"type",void 0),u([p()],To.prototype,"_fetchCacheKey",null),To=V7=u([U("esri.symbols.WebStyleSymbol")],To);function k4(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function qd(t){switch(t==null?void 0:t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Pv={base:qn,key:"type",typeMap:{"simple-fill":Io,"picture-fill":al,"picture-marker":Yo,"simple-line":Vr,"simple-marker":jr,text:Zi,"label-3d":_d,"line-3d":Ld,"mesh-3d":Xm,"point-3d":Na,"polygon-3d":vu,"web-style":To,cim:Co},errorContext:"symbol"},akt={base:qn,key:"type",typeMap:{"picture-marker":Yo,"simple-marker":jr,"point-3d":Na,cim:Co},errorContext:"symbol"},lkt={base:qn,key:"type",typeMap:{"simple-line":Vr,"line-3d":Ld,cim:Co},errorContext:"symbol"},ckt={base:qn,key:"type",typeMap:{"simple-fill":Io,"picture-fill":al,"polygon-3d":vu,cim:Co},errorContext:"symbol"},QZe={base:qn,key:"type",typeMap:{"picture-marker":Yo,"simple-marker":jr,text:Zi,"web-style":To,cim:Co},errorContext:"symbol"},eYe=dC({types:Pv}),uxe={base:qn,key:"type",typeMap:{"simple-fill":Io,"picture-fill":al,"picture-marker":Yo,"simple-line":Vr,"simple-marker":jr,text:Zi,"line-3d":Ld,"mesh-3d":Xm,"point-3d":Na,"polygon-3d":vu,"web-style":To,cim:Co},errorContext:"symbol"},tYe={base:qn,key:"type",typeMap:{text:Zi,"label-3d":_d},errorContext:"symbol"},Wae={base:qn,key:"type",typeMap:{"line-3d":Ld,"mesh-3d":Xm,"point-3d":Na,"polygon-3d":vu,"web-style":To,cim:Co},errorContext:"symbol"},iYe={base:qn,key:"type",typeMap:{"label-3d":_d},errorContext:"symbol"},dxe=Gp(Pv);var B7;function rYe(t){if(!t)return null;const e={};for(const i in t){const r=Ao(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function nYe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var XT;let _r=(XT=class extends It.ClonableMixin(ye){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:V3(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&C4e(Ce.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new B7({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[i,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=this.sourceLayer??this.layer;return e?hZe(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){var e;return{aggregateGeometries:nYe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:TA(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if((i==null?void 0:i.type)==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([hs(()=>{var e,i;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(i=this.geometry.transform)==null?void 0:i.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),hs(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var i;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(i=e.transform)==null?void 0:i.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},B7=XT,XT);u([p({value:null,json:{read:rYe}})],_r.prototype,"aggregateGeometries",null),u([p({value:null})],_r.prototype,"attributes",null),u([p({value:null,types:yC,json:{read:Ao}})],_r.prototype,"geometry",null),u([p({type:Boolean})],_r.prototype,"isAggregate",void 0),u([p({clonable:!1})],_r.prototype,"layer",void 0),u([p({clonable:"reference"})],_r.prototype,"origin",void 0),u([p({type:Bd,value:null})],_r.prototype,"popupTemplate",null),u([p({clonable:"reference"})],_r.prototype,"sourceLayer",void 0),u([p({value:null,types:Pv})],_r.prototype,"symbol",null),u([p({clonable:!1,json:{read:!1,write:!1}})],_r.prototype,"_version",void 0),u([p({type:Boolean,value:!0})],_r.prototype,"visible",null),_r=B7=u([U("esri.Graphic")],_r);let kk=class extends xk{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};u([UY({Type:_r,ensureType:hr(_r)})],kk.prototype,"itemType",void 0),kk=u([U("esri.support.GraphicsCollection")],kk);let Ug=class extends st{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ze,this.referenceLayerViews=new Ze,this._loadingHandle=Le(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},gi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){var e;return((e=this.view)==null?void 0:e.suspended)??!0}get updating(){var i,r,n;if((i=this.view)!=null&&i.suspended)return!1;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!(e!=null&&e.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};u([p({constructOnly:!0})],Ug.prototype,"view",void 0),u([p({readOnly:!0})],Ug.prototype,"baseLayerViews",void 0),u([p({readOnly:!0})],Ug.prototype,"referenceLayerViews",void 0),u([p({readOnly:!0})],Ug.prototype,"suspended",null),u([p({type:Boolean,readOnly:!0})],Ug.prototype,"updating",null),Ug=u([U("esri.views.BasemapView")],Ug);const sYe=Ug;let ql=class extends st{constructor(e){super(e),this.factor=1.5,this.offset=xs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([p({type:Number})],ql.prototype,"factor",void 0),u([p({nonNullable:!0})],ql.prototype,"offset",void 0),u([p()],ql.prototype,"position",void 0),u([p({type:Number,range:{min:0}})],ql.prototype,"size",void 0),u([p()],ql.prototype,"maskUrl",void 0),u([p()],ql.prototype,"maskEnabled",void 0),u([p()],ql.prototype,"overlayUrl",void 0),u([p()],ql.prototype,"overlayEnabled",void 0),u([p({readOnly:!0})],ql.prototype,"version",null),u([p({type:Boolean})],ql.prototype,"visible",void 0),ql=u([U("esri.views.Magnifier")],ql);const hxe=ql;let __=class{constructor(e){this._observable=new lC,this._map=new Map(e)}get size(){return Lt(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Lt(this._observable),this._map.entries()}forEach(e,i){Lt(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return Lt(this._observable),this._map.get(e)}has(e){return Lt(this._observable),this._map.has(e)}keys(){return Lt(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Lt(this._observable),this._map.values()}[Symbol.iterator](){return Lt(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var G7;let Jw=G7=class extends ye{constructor(t){super(t),this.name=null,this.code=null}clone(){return new G7({name:this.name,code:this.code})}};u([p({type:String,json:{write:{isRequired:!0}}})],Jw.prototype,"name",void 0),u([p({type:[String,Number],json:{write:{isRequired:!0}}})],Jw.prototype,"code",void 0),Jw=G7=u([U("esri.layers.support.CodedValue")],Jw);const oYe=new Et({inherited:"inherited",codedValue:"coded-value",range:"range"});let Lv=class extends ye{constructor(e){super(e),this.name=null,this.type=null}};u([p({type:String,json:{write:!0}})],Lv.prototype,"name",void 0),u([at(oYe),p({json:{write:{isRequired:!0}}})],Lv.prototype,"type",void 0),Lv=u([U("esri.layers.support.Domain")],Lv);var H7,KT;let Rv=(KT=class extends Lv{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(i=n.name),!!i))}return i}clone(){return new H7({codedValues:ce(this.codedValues),name:this.name})}},H7=KT,KT);u([p({type:[Jw],json:{write:{isRequired:!0}}})],Rv.prototype,"codedValues",void 0),u([at({codedValue:"coded-value"})],Rv.prototype,"type",void 0),Rv=H7=u([U("esri.layers.support.CodedValueDomain")],Rv);var q7,QT;let Ak=(QT=class extends Lv{constructor(e){super(e),this.type="inherited"}clone(){return new q7}},q7=QT,QT);u([at({inherited:"inherited"})],Ak.prototype,"type",void 0),Ak=q7=u([U("esri.layers.support.InheritedDomain")],Ak);var W7,eE;let Ow=(eE=class extends Lv{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new W7({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},W7=eE,eE);u([p({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],Ow.prototype,"maxValue",void 0),u([p({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],Ow.prototype,"minValue",void 0),u([at({range:"range"})],Ow.prototype,"type",void 0),Ow=W7=u([U("esri.layers.support.RangeDomain")],Ow);const pxe={key:"type",base:Lv,typeMap:{range:Ow,"coded-value":Rv,inherited:Ak}};function A4(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return Ow.fromJSON(t);case"codedValue":return Rv.fromJSON(t);case"inherited":return Ak.fromJSON(t)}return null}const lK=new Et({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var J7;const aYe=new Et({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var tE;let Ls=(tE=class extends ye{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?aYe.fromJSON(r.fieldValueType):null}clone(){var e;return new J7({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},J7=tE,tE);u([p({type:String,json:{write:!0}})],Ls.prototype,"alias",void 0),u([p({type:[String,Number],json:{write:{allowNull:!0}}})],Ls.prototype,"defaultValue",void 0),u([p()],Ls.prototype,"description",void 0),u([Ue("description")],Ls.prototype,"readDescription",null),u([p({types:pxe,json:{read:{reader:A4},write:!0}})],Ls.prototype,"domain",void 0),u([p({type:Boolean,json:{write:!0}})],Ls.prototype,"editable",void 0),u([p({type:fi,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Ls.prototype,"length",void 0),u([p({type:String,json:{write:!0}})],Ls.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0}})],Ls.prototype,"nullable",void 0),u([at(lK)],Ls.prototype,"type",void 0),u([p()],Ls.prototype,"valueType",void 0),u([Ue("valueType",["description"])],Ls.prototype,"readValueType",null),u([p({type:Boolean,json:{read:!1}})],Ls.prototype,"visible",void 0),Ls=J7=u([U("esri.layers.support.Field")],Ls);var Z7;let fS=Z7=class extends ye{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new Z7({mapLayerId:t,gdbVersion:e})}};u([at({mapLayer:"map-layer"}),p({json:{write:{isRequired:!0}}})],fS.prototype,"type",void 0),u([p({type:fi,json:{write:{isRequired:!0}}})],fS.prototype,"mapLayerId",void 0),u([p({type:String,json:{write:!0}})],fS.prototype,"gdbVersion",void 0),fS=Z7=u([U("esri.layers.support.source.MapLayerSource")],fS);var Y7;let rm=Y7=class extends ye{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new Y7(s)}};u([at({queryTable:"query-table"}),p({json:{write:{isRequired:!0}}})],rm.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],rm.prototype,"workspaceId",void 0),u([p({type:String,json:{write:!0}})],rm.prototype,"query",void 0),u([p({type:String,json:{write:!0}})],rm.prototype,"oidFields",void 0),u([p({type:et,json:{write:!0}})],rm.prototype,"spatialReference",void 0),u([at(WVe)],rm.prototype,"geometryType",void 0),rm=Y7=u([U("esri.layers.support.source.QueryTableDataSource")],rm);var X7;let mS=X7=class extends ye{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new X7({workspaceId:t,dataSourceName:e})}};u([at({raster:"raster"}),p({json:{write:{isRequired:!0}}})],mS.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],mS.prototype,"dataSourceName",void 0),u([p({type:String,json:{write:!0}})],mS.prototype,"workspaceId",void 0),mS=X7=u([U("esri.layers.support.source.RasterDataSource")],mS);var K7;let X0=K7=class extends ye{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new K7({workspaceId:t,gdbVersion:e,dataSourceName:i})}};u([at({table:"table"}),p({json:{write:{isRequired:!0}}})],X0.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],X0.prototype,"workspaceId",void 0),u([p({type:String,json:{write:!0}})],X0.prototype,"gdbVersion",void 0),u([p({type:String,json:{write:!0}})],X0.prototype,"dataSourceName",void 0),X0=K7=u([U("esri.layers.support.source.TableDataSource")],X0);var Q7,eq;const lYe=Wt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Wl=Q7=class extends ye{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return Jae()(t,e,i)}castLeftTableSource(t){return Gp(tq(),t)}readRightTableSource(t,e,i){return Jae()(t,e,i)}castRightTableSource(t){return Gp(tq(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new Q7(s)}};u([at({joinTable:"join-table"}),p({json:{write:{isRequired:!0}}})],Wl.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Wl.prototype,"leftTableKey",void 0),u([p({type:String,json:{write:!0}})],Wl.prototype,"rightTableKey",void 0),u([p({json:{write:!0}})],Wl.prototype,"leftTableSource",void 0),u([Ue("leftTableSource")],Wl.prototype,"readLeftTableSource",null),u([_i("leftTableSource")],Wl.prototype,"castLeftTableSource",null),u([p({json:{write:!0}})],Wl.prototype,"rightTableSource",void 0),u([Ue("rightTableSource")],Wl.prototype,"readRightTableSource",null),u([_i("rightTableSource")],Wl.prototype,"castRightTableSource",null),u([at(lYe)],Wl.prototype,"joinType",void 0),Wl=Q7=u([U("esri.layers.support.source.JoinTableDataSource")],Wl);let NB=null;function Jae(){return NB||(NB=dC({types:tq()})),NB}let zB=null;function tq(){return zB||(zB={key:"type",base:null,typeMap:{"data-layer":xd,"map-layer":fS}}),zB}const cYe={key:"type",base:null,typeMap:{"join-table":Wl,"query-table":rm,raster:mS,table:X0}};var iE;let xd=(iE=class extends ye{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new eq({fields:e,dataSource:i})}},eq=iE,iE);u([at({dataLayer:"data-layer"}),p({json:{write:{isRequired:!0}}})],xd.prototype,"type",void 0),u([p({type:[Ls],json:{write:!0}})],xd.prototype,"fields",void 0),u([p({types:cYe,json:{write:!0}})],xd.prototype,"dataSource",void 0),xd=eq=u([U("esri.layers.support.source.DataLayerSource")],xd),xd.from=hr(xd);let K0=class extends It.ClonableMixin(ye){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],K0.prototype,"onFields",void 0),u([p({type:String,json:{write:!0}})],K0.prototype,"operator",void 0),u([p({type:String,json:{write:!0}})],K0.prototype,"searchTerm",void 0),u([p({type:String,json:{write:!0}})],K0.prototype,"searchType",void 0),K0=u([U("esri.rest.support.FullTextSearch")],K0);const fxe=K0;var iq;const Zae=new Et({upperLeft:"upper-left",lowerLeft:"lower-left"});let ov=iq=class extends ye{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new iq(ce({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([p({type:jt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ov.prototype,"extent",void 0),u([p({type:["view","edit"],json:{write:!0}})],ov.prototype,"mode",void 0),u([p({type:String,json:{read:Zae.read,write:Zae.write}})],ov.prototype,"originPosition",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ov.prototype,"tolerance",void 0),ov=iq=u([U("esri.rest.support.QuantizationParameters")],ov);const uYe=new Et({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var rq;const Yae=new Et({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let rd=rq=class extends ye{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=ce(t))}clone(){return new rq({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ce(this.statisticParameters)})}};u([p({type:Number,json:{write:!0}})],rd.prototype,"maxPointCount",void 0),u([p({type:Number,json:{write:!0}})],rd.prototype,"maxRecordCount",void 0),u([p({type:Number,json:{write:!0}})],rd.prototype,"maxVertexCount",void 0),u([p({type:String,json:{write:!0}})],rd.prototype,"onStatisticField",void 0),u([p({type:String,json:{write:!0}})],rd.prototype,"outStatisticFieldName",void 0),u([p({type:String,json:{read:{source:"statisticType",reader:Yae.read},write:{target:"statisticType",writer:Yae.write}}})],rd.prototype,"statisticType",void 0),u([p({type:Object})],rd.prototype,"statisticParameters",void 0),u([qe("statisticParameters")],rd.prototype,"writeStatisticParameters",null),rd=rq=u([U("esri.rest.support.StatisticDefinition")],rd);var ED;const dYe=new Et({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var E_;let St=(E_=class extends ye{static from(e){return S1(ED,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new ED(ce({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},ED=E_,E_.MAX_MAX_RECORD_COUNT_FACTOR=5,E_);u([p({json:{write:!0}})],St.prototype,"aggregateIds",void 0),u([p({type:Boolean,json:{write:!0}})],St.prototype,"cacheHint",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"compactGeometryEnabled",void 0),u([p({json:{write:!0}})],St.prototype,"datumTransformation",void 0),u([_i("datumTransformation")],St.prototype,"castDatumTransformation",null),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"defaultSpatialReferenceEnabled",void 0),u([p({type:Number,json:{write:!0}})],St.prototype,"distance",void 0),u([p({type:xd,json:{write:!0}})],St.prototype,"dynamicDataSource",void 0),u([p({type:String,json:{write:!0}})],St.prototype,"formatOf3DObjects",void 0),u([p({type:[fxe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],St.prototype,"fullText",void 0),u([p({type:String,json:{write:!0}})],St.prototype,"gdbVersion",void 0),u([p({types:yC,json:{read:Ao,write:!0}})],St.prototype,"geometry",void 0),u([p({type:Number,json:{write:!0}})],St.prototype,"geometryPrecision",void 0),u([p({type:[String],json:{write:!0}})],St.prototype,"groupByFieldsForStatistics",void 0),u([p({type:String,json:{write:!0}})],St.prototype,"having",void 0),u([p({type:Date})],St.prototype,"historicMoment",void 0),u([qe("historicMoment")],St.prototype,"writeHistoricMoment",null),u([p({type:Number,json:{write:!0}})],St.prototype,"maxAllowableOffset",void 0),u([p({type:Number,cast:t=>t<1?1:t>St.MAX_MAX_RECORD_COUNT_FACTOR?St.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],St.prototype,"maxRecordCountFactor",void 0),u([p({type:["xyFootprint"],json:{write:!0}})],St.prototype,"multipatchOption",void 0),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],St.prototype,"num",void 0),u([p({json:{write:!0}})],St.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],St.prototype,"orderByFields",void 0),u([p({type:[String],json:{write:!0}})],St.prototype,"outFields",void 0),u([p({type:et,json:{name:"outSR",write:!0}})],St.prototype,"outSpatialReference",void 0),u([p({type:[rd],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],St.prototype,"outStatistics",void 0),u([p({json:{write:!0}})],St.prototype,"parameterValues",void 0),u([qe("parameterValues")],St.prototype,"writeParameterValues",null),u([p({type:ft,json:{write:!0}})],St.prototype,"pixelSize",void 0),u([p({type:ov,json:{write:!0}})],St.prototype,"quantizationParameters",void 0),u([p({type:[Object],json:{write:!0}})],St.prototype,"rangeValues",void 0),u([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],St.prototype,"relationParameter",void 0),u([p({type:String,json:{write:!0}})],St.prototype,"resultType",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"returnCentroid",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"returnDistinctValues",void 0),u([p({type:Boolean,json:{default:!0,write:!0}})],St.prototype,"returnExceededLimitFeatures",void 0),u([p({type:Boolean,json:{write:!0}})],St.prototype,"returnGeometry",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"returnQueryGeometry",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"returnM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],St.prototype,"returnZ",void 0),u([p({type:Boolean,json:{write:!0}})],St.prototype,"returnTrueCurves",void 0),u([p({type:et,json:{write:!0}})],St.prototype,"sourceSpatialReference",void 0),u([at(uYe,{ignoreUnknown:!1,name:"spatialRel"})],St.prototype,"spatialRelationship",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],St.prototype,"start",void 0),u([qe("start"),qe("num")],St.prototype,"writeStart",null),u([p({type:String,json:{write:!0}})],St.prototype,"sqlFormat",void 0),u([p({type:String,json:{write:!0}})],St.prototype,"text",void 0),u([p({type:Yi,json:{write:!0}})],St.prototype,"timeExtent",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],St.prototype,"timeReferenceUnknownClient",void 0),u([at(dYe,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],St.prototype,"units",void 0),u([p({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],St.prototype,"where",void 0),u([qe("where")],St.prototype,"writeWhere",null),St=ED=u([U("esri.rest.support.Query")],St);function bg(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Hc=class extends pa.EventedAccessor{constructor(e){super(e),this._selectionMap=new __,this._sources=new Ze,this._trashCan=[],this._layerEditHandles=new Ze,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Le(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Le(()=>this.view,e=>{e==null||e.when().then(()=>this.syncSources())},gi),ua(()=>this.sources,"change",e=>{var n;const i=this._selectionMap,r=[];for(const s of e.removed){const o=i.get(s);o&&(i.delete(s),(n=o.highlightHandle)==null||n.remove(),r.push({layer:s,selection:[],added:[],removed:[...o.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(rn)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){my(e,this._sources)}syncSources(){var n;const e=new Set,i=(n=this.view)==null?void 0:n.map;if(!i)return;const r=s=>{var o,a,l,c,h;P7e(s)?((o=s.layers)==null||o.forEach(r),(a=s.tables)==null||a.forEach(r)):O7e(s)?((l=s.sublayers)==null||l.forEach(r),(c=s.subtables)==null||c.forEach(r)):bae(s)?(h=s.sublayers)==null||h.forEach(r):bg(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return Ce.getLogger(this).warn("Cannot query layer views without a view."),[];const o=e!=null&&e.length?s.filter(l=>e.includes(l.layer)):s,a=[];return o.forEach(async l=>{const{layer:c,selection:h}=l;if(!h.length)return;const m=mv(c)?c.parent:c;if(m==null)return;if(r==="layer")return void a.push(Qae(m,h,i));if(Xae(m)||!n||!Kae(m))return;const y=await n.whenLayerView(m).catch(()=>null);y&&a.push(Qae(y,h,i))}),(await Promise.all(a)).filter(l=>l!=null)}updateSelection(e){const i=new Map;for(const[s,o]of this._selectionMap)i.set(s,[...o.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(bg(o)||mv(o))&&a!==null){const l=x1(i,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(bg(o)||mv(o))&&a!==null){const l=i.get(o),c=l==null?void 0:l.indexOf(a);c!==void 0&&c>=0&&(l==null||l.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of i){const h=s.get(l);h!==void 0&&o.push(h),s.set(l,{selection:c}),a.push({layer:l,selection:c,...Zne(h!==void 0?h.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){const i=this._selectionMap.get(e);return i==null?void 0:i.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),o=vUe(n,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){var o;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const a of e){const l=r.get(a),c=mv(a)?a.parent:a;if(c!=null&&Kae(c)){if(Xae(c))continue;i.whenLayerView(c).then(h=>{var m;(m=l==null?void 0:l.highlightHandle)==null||m.remove(),l!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=h.highlight(l.selection,this.highlightName))}).catch(()=>{var h;(h=l==null?void 0:l.highlightHandle)==null||h.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(rn);const e=new Set(this.sources.map(i=>mv(i)?i.parent:i));for(const i of e)bg(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(bae(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){var o;const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if((o=n==null?void 0:n.updateFeatures)==null||o.forEach(a=>{var m;const l=a.getObjectId()??a.attributes[i.objectIdField];if(l==null||(m=s.find(y=>y.objectId===l))!=null&&m.error)return;const c=i.findSublayerForFeature(a);if(!bg(c))return;const h=i.sublayers.find(y=>{var v;return!(!bg(y)||!((v=this.getSelection(y))!=null&&v.includes(l)))});bg(h)&&h!==c&&(this.removeFromSelection(h,[l]),this.appendToSelection(c,[l]))}),r.length){const a=[];r.forEach(({error:l,objectId:c})=>{c!=null&&l==null&&a.push(c)}),i.sublayers.forEach(l=>{bg(l)&&this._selectionMap.has(l)&&this.removeFromSelection(l,a)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!pYe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...Zne(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};u([p()],Hc.prototype,"_selectionMap",void 0),u([p()],Hc.prototype,"_sources",void 0),u([p({readOnly:!0,nonNullable:!0})],Hc.prototype,"selections",null),u([p({readOnly:!0,nonNullable:!0})],Hc.prototype,"count",null),u([p()],Hc.prototype,"view",void 0),u([p({readOnly:!0,nonNullable:!0})],Hc.prototype,"hasSelection",null),u([p()],Hc.prototype,"showHighlight",void 0),u([p()],Hc.prototype,"sources",null),u([p()],Hc.prototype,"highlightName",void 0),Hc=u([U("esri.views.SelectionManager")],Hc);const Xae=t=>{var e;return mv(t)?((e=t.parent)==null?void 0:e.isTable)===!0:t.isTable},hYe=t=>t.layer!==void 0,Kae=t=>(t==null?void 0:t.when)!==void 0,pYe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},Qae=async(t,e,i={})=>{let r;if(hYe(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new St({...i,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new St({...i,objectIds:e})).then(s=>({data:s,layer:n}))}return r},fYe=Hc;let c2=class extends It.ClonableMixin(st){constructor(e){super(e),this.accentColor=new Ye([255,127,0]),this.textColor=new Ye([255,255,255])}};u([p({type:Ye,nonNullable:!0})],c2.prototype,"accentColor",void 0),u([p({type:Ye,nonNullable:!0})],c2.prototype,"textColor",void 0),c2=u([U("esri.views.Theme")],c2);const nq=c2;var ele;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(ele||(ele={}));const mxe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],yxe={};function gxe(t){return!!yxe[t]}function mYe(t){for(const e of t)if(!gxe(e))return!1;return!0}mxe.forEach(t=>{yxe[t]=!0});let vxe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!mYe(s))return s.some(gxe)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??zd.DEFAULT;const l=this._createUniqueGroupName(),c=new yYe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:n});for(const h of s){const m=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,m+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Mi(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},yYe=class extends Us{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(bYe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(wYe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(_Ye(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(xYe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>n(SYe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n($Ye(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(TYe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(XI(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(XI(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(XI(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(EYe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(CYe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(XI(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(XI(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(IYe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(gYe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(vYe(o))})}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:m}=e,y={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:y,pointerType:o,button:a,buttons:c,radius:i.radius,angle:Ove(i.angle),native:l,timestamp:m,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}};function gYe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function vYe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function bYe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:xs(s,o),mapPoint:rP(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function wYe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:h}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:rP(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function _Ye(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:h,timestamp:m}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:m,mapPoint:rP(t,s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function xYe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:h,timestamp:m}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:m,mapPoint:rP(t,s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:y=>e.defer(y),preventDefault:()=>e.preventDefault()}}function SYe(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:rP(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function rP(t,e,i){return t.toMap(xs(e,i),{exclude:[]})}function $Ye(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function TYe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function XI(t,e){const{x:i,y:r,button:n,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:m}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:n,buttons:s,native:o,timestamp:m,eventId:a,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:y=>t.defer(y),preventDefault:()=>t.preventDefault()}}function EYe(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:m,timestamp:y}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:h,native:n,timestamp:y,eventId:s,cancelable:m,stopPropagation:()=>t.stopPropagation(),defer:v=>t.defer(v),preventDefault:()=>t.preventDefault()}}function CYe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function IYe(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}var FA,tle,ile;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(FA||(FA={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(tle||(tle={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(ile||(ile={}));const MYe="z",kYe="r",bxe={cancel:"Escape",complete:"Enter"},wkt={...bxe,redo:kYe,undo:MYe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},_kt={toggle:"Control"},xkt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Skt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:__e,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let $kt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=AYe.fromDefinition(e,i),n=x1(this._bindings,r.key,()=>[]);return n.push(r),Mi(()=>$Y(n,r))}register(e,i=zd.WIDGET){return w1([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},AYe=class sq{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new sq(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:o}=e;return new sq(r,n?Array.isArray(n)?n:[n]:[],!!s,!!o,i)}};function OYe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return Ce.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function oq(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(FA.USER)&&t.getEditableFlag(FA.MANAGER)}function PYe(t){return t.type==="key-down"&&t.key===bxe.cancel}function yh(t){return xs(t.x,t.y)}function wxe(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?xs(e.clientX-i.left,e.clientY-i.top):xs(0,0)}function _xe(t,e){return e instanceof Event?wxe(t,e):yh(e)}function xxe(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let LYe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":nle(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!sle(e))break;const n=yh(e),s=Rx(n,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!sle(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=yh(e);a.x=da(a.x,0,i.view.width),a.y=da(a.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=yh(e),s=Rx(n,e.pointerType,i.forEachTool);if(RYe(e)||i.forEachTool(c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:m})=>{m.selected&&(m.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),FB(o,r);break}case"click":{const n=yh(e),s=Rx(n,e.pointerType,i.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=yh(e),s=Rx(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),FB(o,r);break}case"immediate-double-click":{const n=yh(e),s=Rx(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&FB(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:yh(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:yh(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=rle(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=rle(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=I4e(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(xs(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!nle(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(yh(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var a;let s=Rx(e,r,n);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}};function rle(t){for(const{manipulator:e}of t.values())if(e!=null&&e.interactive){if(e.grabbing&&e.grabCursor)return e.grabCursor;if(e.cursor)return e.cursor}return null}function Rx(t,e,i){let r=null;return i(n=>{if(n.manipulators==null||!oq(n))return!1;const s=n.manipulators.intersect(t,e);return s!=null&&(r={tool:n,manipulator:s},!0)}),r}function nle(t){return t==="mouse"}function sle(t){return t.pointerType!=="mouse"||t.button===0}function RYe(t){return!!t.native.shiftKey}function FB(t,e){t!=null&&t.consumesClicks&&e()}const ole="attached",UB="tools",DYe=1e3;let gh=class extends st{constructor(e){super(e),this._updatingHandles=new b_,this._clock=cC,this._manipulatorState=new LYe,this.tools=new Ze,this.cursor=null,this._interacting=!1,this._interactingTimeout=DYe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(mxe,e=>{this._handleInputEvent(e)},zd.TOOL),...OYe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Ce.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=oq(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=rn(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Le(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],ole):this.addHandles(Le(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(ole),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&PYe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(UB),this._forEachTool(e=>{if(e instanceof st){const i=Le(()=>[e.cursor,e.visible,e.editable],()=>{oq(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,UB)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],UB)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,FA.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};u([p({constructOnly:!0,nonNullable:!0})],gh.prototype,"view",void 0),u([p({value:null})],gh.prototype,"activeTool",null),u([p({readOnly:!0,type:Ze})],gh.prototype,"tools",void 0),u([p({readOnly:!0})],gh.prototype,"cursor",void 0),u([p({readOnly:!0})],gh.prototype,"updating",null),u([p()],gh.prototype,"_interacting",void 0),u([p({readOnly:!0})],gh.prototype,"interacting",null),gh=u([U("esri.views.ToolViewManager")],gh);const NYe=new Ye("cyan"),zYe=1,FYe=.25,UYe=new Ye("black"),jYe=.4,VYe=.2,Ikt=.25,Sxe="default",BYe="temporary",GYe=new Ye("yellow");var aq;let Jl=aq=class extends st{constructor(t){super(t),this.name=Sxe,this.color=NYe.clone(),this.haloColor=null,this.haloOpacity=zYe,this.fillOpacity=FYe,this.shadowColor=UYe.clone(),this.shadowOpacity=jYe,this.shadowDifference=VYe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){var t,e;return new aq({...this,color:this.color.clone(),haloColor:(t=this.haloColor)==null?void 0:t.clone(),shadowColor:(e=this.shadowColor)==null?void 0:e.clone()})}assignFrom(t){var e;this.color=t.color.clone(),this.haloColor=(e=t.haloColor)==null?void 0:e.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};u([p({type:String,constructOnly:!0,nonNullable:!0})],Jl.prototype,"name",void 0),u([p({type:Ye,nonNullable:!0})],Jl.prototype,"color",void 0),u([p({type:Ye})],Jl.prototype,"haloColor",void 0),u([p({nonNullable:!0})],Jl.prototype,"haloOpacity",void 0),u([p({nonNullable:!0})],Jl.prototype,"fillOpacity",void 0),u([p({type:Ye,nonNullable:!0})],Jl.prototype,"shadowColor",void 0),u([p({nonNullable:!0})],Jl.prototype,"shadowOpacity",void 0),u([p({nonNullable:!0})],Jl.prototype,"shadowDifference",void 0),u([p({nonNullable:!0})],Jl.prototype,"haloWidth",void 0),u([p({nonNullable:!0})],Jl.prototype,"haloBlur",void 0),Jl=aq=u([U("esri.views.support.HighlightOptions")],Jl);const Bv=Jl;function HYe(){return new(Ze.ofType(Bv))([new Bv({name:Sxe}),new Bv({name:BYe,color:GYe})])}let yS=class extends st{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":qYe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return WYe[this.deviceType]}};u([p({nonNullable:!0,readOnly:!0})],yS.prototype,"nativeIndex",void 0),u([p({type:String,readOnly:!0})],yS.prototype,"deviceType",null),u([p({type:Number,readOnly:!0})],yS.prototype,"axisThreshold",null),yS=u([U("esri.views.input.gamepad.GamepadInputDevice")],yS);const cK=yS,qYe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),WYe={standard:.15,spacemouse:.025,unknown:0};let u2=class extends st{constructor(...e){super(...e),this.devices=new Ze,this.enabledFocusMode="document"}};u([p({type:Ze.ofType(cK),readOnly:!0})],u2.prototype,"devices",void 0),u([p({type:["document","view","none"]})],u2.prototype,"enabledFocusMode",void 0),u2=u([U("esri.views.input.gamepad.GamepadSettings")],u2);const JYe=u2;let CD=class extends st{constructor(){super(...arguments),this.gamepad=new JYe}};u([p({readOnly:!0})],CD.prototype,"gamepad",void 0),CD=u([U("esri.views.input.Input")],CD);const ZYe=CD,$xe=()=>hi.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,jB=()=>p({type:["pan","rotate","zoom","none"],nonNullable:!0});let Q0=class extends st{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([jB()],Q0.prototype,"dragPrimary",void 0),u([jB()],Q0.prototype,"dragSecondary",void 0),u([jB()],Q0.prototype,"dragTertiary",void 0),u([p({type:["zoom","none"],nonNullable:!0})],Q0.prototype,"mouseWheel",void 0),Q0=u([U("esri.views.navigation.NavigationActionMap")],Q0);const uK=Q0;let jg=class extends st{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([p({type:Boolean,nonNullable:!0})],jg.prototype,"enabled",void 0),u([p({type:cK})],jg.prototype,"device",void 0),u([p({type:["pan","zoom"],nonNullable:!0})],jg.prototype,"mode",void 0),u([p({type:["forward-down","forward-up"],nonNullable:!0})],jg.prototype,"tiltDirection",void 0),u([p({type:Number,nonNullable:!0})],jg.prototype,"velocityFactor",void 0),jg=u([U("esri.views.navigation.gamepad.GamepadSettings")],jg);const Txe=jg;let Vg=class extends st{constructor(e){super(e),this.actionMap=new uK,this.browserTouchPanEnabled=!0,this.gamepad=new Txe,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!$xe()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){Eve(Ce.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};u([p({type:uK,nonNullable:!0})],Vg.prototype,"actionMap",void 0),u([p({type:Boolean})],Vg.prototype,"browserTouchPanEnabled",void 0),u([p({type:Txe,nonNullable:!0})],Vg.prototype,"gamepad",void 0),u([p({type:Boolean})],Vg.prototype,"momentumEnabled",void 0),u([p({type:Boolean})],Vg.prototype,"mouseWheelZoomEnabled",null),Vg=u([U("esri.views.navigation.Navigation")],Vg);const O4=Vg;function Rkt(t,e,i){const r=Exe(t),n=e,s=YYe(r,n,i);if(r){const o=Ma.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new Q("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new Q("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!XYe(t)||s===gl.Unsupported)return new Q("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case gl.Units:{const o=(r==null?void 0:r.heightUnit)||"unknown",a=(n==null?void 0:n.heightUnit)||"unknown",l=new Q("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new Q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case gl.HeightModel:{const o=(r==null?void 0:r.heightModel)||"unknown",a=(n==null?void 0:n.heightModel)||"unknown",l=new Q("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new Q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}case gl.CRS:{const o=(r==null?void 0:r.vertCRS)||"unknown",a=(n==null?void 0:n.vertCRS)||"unknown",l=new Q("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new Q("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:l})}}return null}function YYe(t,e,i){if(!ale(t)||!ale(e))return gl.Unsupported;if(t==null||e==null)return gl.Ok;if(!i&&t.heightUnit!==e.heightUnit)return gl.Units;if(t.heightModel!==e.heightModel)return gl.HeightModel;switch(t.heightModel){case"gravity-related-height":return gl.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?gl.Ok:gl.CRS;default:return gl.Unsupported}}var gl;function ale(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function XYe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Mxe(t)}function Exe(t){var r;if(t.type==="integrated-mesh-3dtiles")return null;const e=t.url?qp(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&Cxe(t)&&t.heightModelInfo?t.heightModelInfo:Mxe(t)?Ma.deriveUnitFromSR(QYe,t.spatialReference):null}function Cxe(t){return"heightModelInfo"in t}function Ixe(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Mxe(t){return Ixe(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):kxe(t)}function KYe(t){return t.layers!=null||kxe(t)||Ixe(t)||Cxe(t)}function kxe(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(gl||(gl={}));const QYe=new Ma({heightModel:"gravity-related-height"});var gy;function lle(t){return t===gy.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(gy||(gy={}));let lq,VB=null;async function eXe(t){VB||(VB=$e(()=>import("./geometryServiceUtils-DgFTtQLa.js"),[]).then(e=>lq=e)),await VB,sr(t)}async function Axe(t,e,i,r){if(!t)return null;const n=t.spatialReference;return sf()||$c(n,e)?Cb(t,e):lq?lq.projectGeometry(t,e,i,r):(await Promise.race([eXe(r),Yp(r)]),Axe(t,e,i,r))}async function Dkt(t,e){try{return t!=null&&t.spatialReference?await qwe(t,e):null}catch{return null}}let gr=class extends st{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=TE(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return(e==null?void 0:e.length)===1})&&(e==null?void 0:e.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=(s=this.map)==null?void 0:s.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.baseLayers},{layers:e==null?void 0:e.layers}],a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(i)))&&(r=a,!0)},a=>"tileInfo"in a);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,n=>{var o,a;const s=Exe(n);return!!s&&(e={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=n.spatialReference)==null?void 0:a.latestVcsWkid},!0)},n=>KYe(n));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of n)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=TE(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:m4(async s=>{try{const o=await Axe(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(xc(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const o=iXe(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==gy.Local)&&(e=e.filter(({viewingMode:r})=>r!==gy.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new tXe(r,i);for(const o of e)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{ds(i)}),"loading"):e.loadStatus:"loaded"}};u([p()],gr.prototype,"required",void 0),u([p({constructOnly:!0})],gr.prototype,"map",void 0),u([p({constructOnly:!0})],gr.prototype,"getSpatialReferenceSupport",void 0),u([p()],gr.prototype,"defaultSpatialReference",void 0),u([p()],gr.prototype,"userSpatialReference",void 0),u([p()],gr.prototype,"sourcePreloadCount",void 0),u([p()],gr.prototype,"priorityCollection",void 0),u([p()],gr.prototype,"requiresExtentInSpatialReference",void 0),u([p()],gr.prototype,"suspended",void 0),u([p({readOnly:!0})],gr.prototype,"ready",null),u([p({readOnly:!0})],gr.prototype,"heightModelInfoReady",null),u([p({readOnly:!0})],gr.prototype,"spatialReference",null),u([p({readOnly:!0})],gr.prototype,"extent",null),u([p({readOnly:!0})],gr.prototype,"heightModelInfo",null),u([p({readOnly:!0})],gr.prototype,"vcsWkid",null),u([p({readOnly:!0})],gr.prototype,"latestVcsWkid",null),u([p({readOnly:!0})],gr.prototype,"viewingMode",null),u([p({readOnly:!0})],gr.prototype,"tileInfo",null),u([p({readOnly:!0})],gr.prototype,"mapCollections",null),u([p({readOnly:!0})],gr.prototype,"_spatialReferenceTask",null),u([p({readOnly:!0})],gr.prototype,"_tileInfoTask",null),u([p({readOnly:!0})],gr.prototype,"_heightModelInfoTask",null),u([p({readOnly:!0})],gr.prototype,"_extentCandidatesTask",null),u([p()],gr.prototype,"_extentTask",null),u([p()],gr.prototype,"_projectExtentTask",void 0),gr=u([U("esri.views.support.DefaultsFromMap")],gr);let tXe=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function iXe(t,e){return t!=null?e!=null?t===e&&t:t:e}function rXe(t){return"tryRecycleWith"in t}let nXe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Mo(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,no(this._controller.signal,()=>{var s;(s=this._recycleController)==null||s.abort();const n=new Q("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){var n;if(!this.done||!this.layerView||!rXe(this.layerView))return null;(n=this._recycleController)==null||n.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const o=e[s];if(o.type!==i)continue;const a=this.layerView.tryRecycleWith(o,{signal:r});if(a){e.splice(s,1),this.layer=o;const l=this.layerView,c=l.view;return this.promise=a.then(()=>(sr(r),o.emit("layerview-destroy",{view:c,layerView:l}),c.emit("layerview-destroy",{view:c,layerView:l}),o.emit("layerview-create",{view:c,layerView:l}),c.emit("layerview-create",{view:c,layerView:l}),l)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let o,a;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),sXe(r))o=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new Q("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);sr(i),o="default"in h?new h.default({layer:r,view:e}):new h({layer:r,view:e})}const l=()=>{a=rn(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=no(i,l),sr(i);try{await o.when()}catch(h){throw l(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return l(),void this._deferred.reject(new Q("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:e,layerView:o}),e.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:e,error:o}),e.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new Q("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}};function sXe(t){return t.createLayerView!==un.prototype.createLayerView}function oXe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Zl=class extends st{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new b_,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r,n;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const s of i)((n=this.layerViewFilter)==null?void 0:n.call(this,s))!==!1&&this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Mo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(zO(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var h,m,y;const i=this.view.map;if(this.destroyed||!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=v=>{var w;if(v!=null){for(const x of v)if(x){if(((w=this.layerViewFilter)==null?void 0:w.call(this,x))===!1)continue;r.add(x);const S=this._layerLayerViewInfoMap.get(x);S&&s?S.start():S||this._recyclingInfoMap.has(x)||n.push(x),"layers"in x&&x.layers&&o(x.layers)}}};for(const v of this._rootCollectionNames)o(oa(this,v));const a=new Array,l=v=>{const w=v.tryRecycle(n);w?(this._recyclingInfoMap.set(v.layer,v),this.notifyChange("updating"),w.then(()=>{this._recyclingInfoMap.delete(v.layer),this._layerLayerViewInfoMap.set(v.layer,v),this._reschedule(),this.notifyChange("updating")}).catch(x=>{ds(x)||(this._recyclingInfoMap.delete(v.layer),v.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(v)};for(const v of this._layerLayerViewInfoMap.values())r.has(v.layer)||(this._layerLayerViewInfoMap.delete(v.layer),l(v));for(const v of this._recyclingInfoMap.values())r.has(v.layer)||(this._recyclingInfoMap.delete(v.layer),l(v));for(const v of n)this._createLayerView(v);this._refreshCollections(),a.forEach(v=>v.destroy());const c=[(h=i==null?void 0:i.ground)==null?void 0:h.layers,(m=i==null?void 0:i.basemap)==null?void 0:m.baseLayers,(y=i==null?void 0:i.basemap)==null?void 0:y.referenceLayers,i==null?void 0:i.layers].filter(v=>!!v);r.forEach(v=>"layers"in v&&c.push(v.layers)),this.addHandles(c.map(v=>this._watchUpdatingTracking.addOnCollectionChange(()=>v,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([ua(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Le(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Oa)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),IB(this._recyclingInfoMap),IB(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Gi()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||LUe(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),IB(this._layerLayerViewInfoMap))}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new Q("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,i){var s;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!(r!=null&&r.done))return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&((s=e.layers)!=null&&s.length))&&e.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(oa(this,e),oa(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){var e;for(const i of this._layersToLayerViews.values())(e=oa(this,i))==null||e.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i==null?void 0:i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),"layers"in s&&oXe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new nXe(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(ds(r)||r.name==="cancelled:layerview-create")||Ce.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([p()],Zl.prototype,"_workPromise",void 0),u([p({readOnly:!0})],Zl.prototype,"_watchUpdatingTracking",void 0),u([p({readOnly:!0})],Zl.prototype,"_layersToLayerViews",null),u([p({readOnly:!0})],Zl.prototype,"_rootCollectionNames",null),u([p({constructOnly:!0})],Zl.prototype,"layerViewFilter",void 0),u([p()],Zl.prototype,"layerViewImporter",void 0),u([p()],Zl.prototype,"supportsGround",void 0),u([p({readOnly:!0})],Zl.prototype,"updating",null),u([p({readOnly:!0})],Zl.prototype,"updatingRemaining",null),u([p({constructOnly:!0})],Zl.prototype,"view",void 0),Zl=u([U("esri.views.support.LayerViewManager")],Zl);const aXe=Zl;let gS=class extends st{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([p()],gS.prototype,"featureTitleFields",void 0),u([p()],gS.prototype,"utilityNetworkFields",void 0),u([p()],gS.prototype,"globalIdField",void 0),gS=u([U("esri.views.support.RequiredFieldsOptions")],gS);const lXe=gS;var d2,C_;let xt=(C_=class extends pa.EventedMixin(gu.EsriPromiseMixin(st)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new hC,this.updatingHandles=new b_,this.allLayerViews=new Jh({getCollections:()=>{var i,r,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:uXe}),this.analyses=new sF,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new kk,this.groundView=null,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ze,this.magnifier=new hxe,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new ZYe,this.navigation=new O4,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new vxe(this),this.persistableViewModels=new Ze,this.requiredFieldsOptions=new lXe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Le(()=>this.preconditionsReady,i=>{var n,s;const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,d2.views.add(this)):(this._lockedSpatialReference=null,d2.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)(n=this.toolViewManager)==null||n.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(o){return void queueMicrotask(()=>{this.fatalError=new Q("view:startup-error","View._startup failed",o)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Bp))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Vp(()=>this.ready)))),this.basemapView=new sYe({view:this}),this.layerViewManager=new aXe({view:this,layerViewFilter:e=>{var i;return((i=this.layerViewFilter)==null?void 0:i.call(this,e))??!0},layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new gh({view:this}),this.selectionManager=new fYe({view:this}),this.addHandles([hs(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{Ce.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),Le(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Oa),Le(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Bp),Le(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Oa)])}destroy(){var e,i;this.destroyed||(d2.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=xr(this.graphics),this.analyses=xr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),xr(this.analysisViewManager),this.toolViewManager=xr(this.toolViewManager),this.layerViewManager=xr(this.layerViewManager),this.selectionManager=xr(this.selectionManager),this.basemapView=xr(this.basemapView),(e=this.groundView)==null||e.destroy(),(i=this.layerViews)==null||i.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=xr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ce.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new gr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??HYe()}set highlights(e){this._set("highlights",my(e,this._get("highlights"),Ze.ofType(Bv)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||_s.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Ce.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),_s.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,i,r,n;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,o=this.map.ground.loaded,a=((i=this.map.basemap)==null?void 0:i.loaded)??!0;return s&&a&&o&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=m4(l=>PY(ve("view-readyState-waiting-delay"),null,l)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(n=this._readyStateWaitingTask)!=null&&n.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=TE(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var i,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(i=this.defaultsFromMap)==null?void 0:i.required)!=null&&r.heightModelInfo)){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const i=!Cn(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??_u}set timeZone(e){this._userTimeZone=e,wGe(e)||Ce.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new nq}whenLayerView(e){var i;return((i=this.layerViewManager)==null?void 0:i.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new Q("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&Ce.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(hs(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}},d2=C_,C_.views=new Ze,C_);u([p()],xt.prototype,"_userSpatialReference",void 0),u([p()],xt.prototype,"activeTool",null),u([p({readOnly:!0})],xt.prototype,"allLayerViews",void 0),u([p(Oae(sF,"analyses"))],xt.prototype,"analyses",void 0),u([p()],xt.prototype,"animation",null),u([p()],xt.prototype,"basemapView",void 0),u([p()],xt.prototype,"center",null),u([p()],xt.prototype,"defaultsFromMapSettings",null),u([p()],xt.prototype,"defaultsFromMap",null),u([p()],xt.prototype,"displayFilterEnabled",void 0),u([p({type:jt})],xt.prototype,"extent",null),u([p()],xt.prototype,"fatalError",void 0),u([p(Oae(kk,"graphics"))],xt.prototype,"graphics",void 0),u([p()],xt.prototype,"groundView",void 0),u([p({readOnly:!0,type:Ma})],xt.prototype,"heightModelInfo",null),u([p({type:Ze.ofType(Bv)})],xt.prototype,"highlights",null),u([p({readOnly:!0})],xt.prototype,"interacting",null),u([p({constructOnly:!0})],xt.prototype,"layerViewFilter",void 0),u([p({readOnly:!0})],xt.prototype,"navigating",null),u([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],xt.prototype,"preconditionsReady",null),u([p({readOnly:!0})],xt.prototype,"typeSpecificPreconditionsReady",void 0),u([p({type:Ze,readOnly:!0})],xt.prototype,"layerViews",void 0),u([p()],xt.prototype,"resolution",null),u([p({type:hxe})],xt.prototype,"magnifier",void 0),u([p({value:null,type:g1e})],xt.prototype,"map",null),u([p()],xt.prototype,"padding",void 0),u([p({readOnly:!0})],xt.prototype,"ready",void 0),u([p()],xt.prototype,"_readyStateWaitingTask",void 0),u([p({readOnly:!0})],xt.prototype,"readyState",null),u([p({type:et})],xt.prototype,"spatialReference",null),u([p()],xt.prototype,"stationary",null),u([p({readOnly:!0})],xt.prototype,"supportsGround",void 0),u([p({type:Yi})],xt.prototype,"timeExtent",null),u([p({type:String,nonNullable:!0})],xt.prototype,"timeZone",null),u([p()],xt.prototype,"tools",null),u([p()],xt.prototype,"toolViewManager",void 0),u([p({readOnly:!0})],xt.prototype,"type",void 0),u([p({type:Number})],xt.prototype,"scale",void 0),u([p({readOnly:!0})],xt.prototype,"updating",void 0),u([p({readOnly:!0})],xt.prototype,"initialExtentRequired",void 0),u([p({readOnly:!0})],xt.prototype,"initialExtent",null),u([p()],xt.prototype,"cursor",null),u([p({readOnly:!0})],xt.prototype,"input",void 0),u([p({type:O4,nonNullable:!0})],xt.prototype,"navigation",void 0),u([p()],xt.prototype,"layerViewManager",void 0),u([p()],xt.prototype,"analysisViewManager",void 0),u([p()],xt.prototype,"selectionManager",void 0),u([p()],xt.prototype,"width",void 0),u([p()],xt.prototype,"height",void 0),u([p({readOnly:!0})],xt.prototype,"resizing",void 0),u([p({value:null,readOnly:!0})],xt.prototype,"size",null),u([p({readOnly:!0})],xt.prototype,"suspended",void 0),u([p({readOnly:!0})],xt.prototype,"viewEvents",void 0),u([p({readOnly:!0})],xt.prototype,"persistableViewModels",void 0),u([p()],xt.prototype,"_isValid",void 0),u([p()],xt.prototype,"_readyCycleForced",void 0),u([p()],xt.prototype,"_lockedSpatialReference",void 0),u([p()],xt.prototype,"_userTimeZone",void 0),u([p()],xt.prototype,"_lockedTimeZone",void 0),u([p()],xt.prototype,"_userTimeExtent",void 0),u([p()],xt.prototype,"_lockedTimeExtent",void 0),u([p({type:nq})],xt.prototype,"theme",void 0),u([p({readOnly:!0,type:nq})],xt.prototype,"effectiveTheme",null),xt=d2=u([U("esri.views.View")],xt);const BB=globalThis.$arcgis;BB&&!BB.views&&Object.defineProperty(BB,"views",{configurable:!1,enumerable:!0,writable:!1,value:xt.views});const cXe=xt;function uXe(t){return t.layerViews}function Y$(t,e){return t[0]=e[0],t[1]=e[1],t}function Bn(t,e,i){return t[0]=e,t[1]=i,t}function Oxe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function UA(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Pxe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Lxe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function dXe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function hXe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function pXe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function fXe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function mXe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function nP(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function yXe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function P4(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function uF(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function dF(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Rxe(t){const e=t[0],i=t[1];return e*e+i*i}function Dxe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function gXe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function cq(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Nxe(t,e){return t[0]*e[0]+t[1]*e[1]}function zxe(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function vXe(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function bXe(t,e=1){const i=2*S4()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function wXe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function ia(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function _Xe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function xXe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function SXe(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function $Xe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function TXe(t){return"vec2("+t[0]+", "+t[1]+")"}function EXe(t,e){return t[0]===e[0]&&t[1]===e[1]}function CXe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=Va();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function IXe(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const MXe=dF,dK=UA,kXe=Pxe,AXe=Lxe,OXe=P4,PXe=uF,LXe=Rxe;Object.freeze(Object.defineProperty({__proto__:null,add:Oxe,angle:$Xe,ceil:dXe,copy:Y$,cross:zxe,dist:OXe,distance:P4,div:AXe,divide:Lxe,dot:Nxe,equals:CXe,exactEquals:EXe,floor:hXe,inverse:gXe,len:MXe,length:dF,lerp:vXe,max:fXe,min:pXe,mul:kXe,multiply:Pxe,negate:Dxe,normalize:cq,projectAndScale:IXe,random:bXe,rotate:SXe,round:mXe,scale:nP,scaleAndAdd:yXe,set:Bn,sqrDist:PXe,sqrLen:LXe,squaredDistance:uF,squaredLength:Rxe,str:TXe,sub:dK,subtract:UA,transformMat2:wXe,transformMat2d:ia,transformMat3:_Xe,transformMat4:xXe},Symbol.toStringTag,{value:"Module"}));function En(){return[0,0]}function RXe(t){return[t[0],t[1]]}function sP(t,e){return[t,e]}function DXe(t,e){return[t,e]}function NXe(t,e=En()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Fxe(){return En()}function Uxe(){return sP(1,1)}function jxe(){return sP(1,0)}function Vxe(){return sP(0,1)}const zXe=Fxe(),FXe=Uxe(),UXe=jxe(),jXe=Vxe();Object.freeze(Object.defineProperty({__proto__:null,ONES:FXe,UNIT_X:UXe,UNIT_Y:jXe,ZEROS:zXe,clone:RXe,create:En,freeze:DXe,fromArray:NXe,fromValues:sP,ones:Uxe,unitX:jxe,unitY:Vxe,zeros:Fxe},Symbol.toStringTag,{value:"Module"}));function VXe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function oP(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function BXe(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function hK(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*o)*l,t[5]=(r*o-i*a)*l,t):null}function GXe(t){return t[0]*t[3]-t[1]*t[2]}function Zh(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1],m=i[2],y=i[3],v=i[4],w=i[5];return t[0]=r*c+s*h,t[1]=n*c+o*h,t[2]=r*m+s*y,t[3]=n*m+o*y,t[4]=r*v+s*w+a,t[5]=n*v+o*w+l,t}function bb(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*c,t[1]=n*h+o*c,t[2]=r*-c+s*h,t[3]=n*-c+o*h,t[4]=a,t[5]=l,t}function aP(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r*c,t[1]=n*c,t[2]=s*h,t[3]=o*h,t[4]=a,t[5]=l,t}function Dp(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=i[0],h=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*c+s*h+a,t[5]=n*c+o*h+l,t}function L4(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function Bxe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function pK(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function HXe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function qXe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function WXe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Gxe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function JXe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function ZXe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function YXe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function XXe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],h=e[2],m=e[3],y=e[4],v=e[5],w=Va();return Math.abs(i-l)<=w*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=w*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=w*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-m)<=w*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-y)<=w*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-v)<=w*Math.max(1,Math.abs(a),Math.abs(v))}const KXe=Zh,QXe=Gxe;Object.freeze(Object.defineProperty({__proto__:null,add:WXe,copy:VXe,determinant:GXe,equals:XXe,exactEquals:YXe,frob:qXe,fromRotation:L4,fromScaling:Bxe,fromTranslation:pK,identity:oP,invert:hK,mul:KXe,multiply:Zh,multiplyScalar:JXe,multiplyScalarAndAdd:ZXe,rotate:bb,scale:aP,set:BXe,str:HXe,sub:QXe,subtract:Gxe,translate:Dp},Symbol.toStringTag,{value:"Module"}));function Np(){return[1,0,0,1,0,0]}function eKe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function tKe(t,e,i,r,n,s){return[t,e,i,r,n,s]}const iKe=Np();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:iKe,clone:eKe,create:Np,fromValues:tKe},Symbol.toStringTag,{value:"Module"}));const SR={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ur({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:et.WebMercator}),minus180Line:new Ur({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:et.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ur({paths:[[[180,-180],[180,180]]],spatialReference:et.WGS84}),minus180Line:new Ur({paths:[[[-180,-180],[-180,180]]],spatialReference:et.WGS84})}};function Zw(t,e){return Math.ceil((t-e)/(2*e))}function Hxe(t,e){const i=Ok(t);for(const r of i)for(const n of r)n[0]+=e;return t}function Ok(t){return Hn(t)?t.rings:t.paths}function lP(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function Ad(t){return typeof t=="string"?nn(t):ce(t)}function R4(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map(o=>R4(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function hF(t,e){var i;return t?e&&oX(t)?e:sX(t)??((i=Tt==null?void 0:Tt.findCredential(t))==null?void 0:i.token):null}async function Vkt(t,e,i){const r=hF(t,e);if(r)return r;!Tt&&hi.request.useIdentity&&await $e(()=>Promise.resolve().then(()=>j2e),void 0);const n=await Tt.getCredential(t,i);return n==null?void 0:n.token}async function rKe(t,e,i,r){const n=Ad(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:Uz(s),target:JSON.stringify({geometryType:mC(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await Ot(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const m=Ao(h);return m.spatialReference=s,m})}}function nKe(t){return{geometryType:mC(t[0]),geometries:t.map(e=>e.toJSON())}}function qxe(t,e,i){const r=qVe(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function sKe(t,e,i){const r=typeof t=="string"?nn(t):t,n=e[0].spatialReference,s=mC(e[0]),o={...i,query:{...r.query,f:"json",sr:Uz(n),geometries:JSON.stringify(nKe(e))}},{data:a}=await Ot(r.path+"/simplify",o);return qxe(a.geometries,s,n)}const Wxe=()=>Ce.getLogger("esri.geometry.support.normalizeUtils");function oKe(t){return t.type==="polygon"}function aKe(t){return t[0].type==="polygon"}function lKe(t){return t[0].type==="polyline"}function cle(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function cKe(t,e){if(!(t instanceof Ur||t instanceof rr)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw Wxe().error(n),new Q("internal:geometry",n)}const i=Ok(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],h=n[o+1][1],m=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),y=(h-l)/m,v=(c-a)/m,w=m/e;if(w>1){for(let k=1;k<=w-1;k++){const A=k*e,R=v*A+a,D=y*A+l;s.push([R,D])}const x=(m+Math.floor(w-1)*e)/2,S=v*x+a,C=y*x+l;s.push([S,C])}s.push([c,h])}}return oKe(t)?new rr({rings:r,spatialReference:t.spatialReference}):new Ur({paths:r,spatialReference:t.spatialReference})}function ule(t,e,i){if(e){const r=cKe(t,1e6);t=y$(r,!0)}return i&&(t=Hxe(t,i)),t}function dle(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Zw(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=Zw(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=Zw(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=Zw(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function uKe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=Ok(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let y=0;y<l.length;y++){const v=l[y][0];h=v>h?v:h}h=Number(h.toFixed(9));const m=-360*Zw(h,180);for(let y=0;y<l.length;y++){const v=s.getPoint(a,y);s.setPoint(a,y,v.clone().offset(m,0))}return!0}})}if(n===i){if(aKe(t))for(const a of Ok(s))t[n]=t[n].addRing(a);else if(lKe(t))for(const a of Ok(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function Jxe(t,e,i){if(!Array.isArray(t))return Jxe([t],e);e&&typeof e!="string"&&Wxe().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??hi.geometryServiceUrl;let n,s,o,a,l,c,h,m,y=0;const v=[],w=[];for(const R of t)if(R!=null)if(n||(n=R.spatialReference,s=ja(n),o=n.isWebMercator,c=o?102100:4326,a=SR[c].maxX,l=SR[c].minX,h=SR[c].plus180Line,m=SR[c].minus180Line),s)if(R.type==="mesh")w.push(R);else if(R.type==="point")w.push(dle(R.clone(),a,l));else if(R.type==="multipoint"){const D=R.clone();D.points=D.points.map(B=>dle(B,a,l)),w.push(D)}else if(R.type==="extent"){const D=R.clone()._normalize(!1,!1,s);w.push(D.rings?new rr(D):D)}else if(R.extent){const D=R.extent,B=Zw(D.xmin,l)*(2*a);let z=B===0?R.clone():Hxe(R.clone(),B);D.offset(B,0);let{xmin:W,xmax:Y}=D;W=Number(W.toFixed(9)),Y=Number(Y.toFixed(9)),D.intersects(h)&&Y!==a?(y=Y>y?Y:y,z=ule(z,o),v.push(z),w.push("cut")):D.intersects(m)&&W!==l?(y=Y*(2*a)>y?Y*(2*a):y,z=ule(z,o,360),v.push(z),w.push("cut")):w.push(z)}else w.push(R.clone());else w.push(R);else w.push(R);let x=Zw(y,a),S=-90;const C=x,k=new Ur;for(;x>0;){const R=360*x-180;k.addPath([[R,S],[R,-1*S]]),S*=-1,x--}if(v.length>0&&C>0){const R=uKe(v,await rKe(r,v,k,i)),D=[],B=[];for(let Y=0;Y<w.length;Y++){const ee=w[Y];if(ee!=="cut")B.push(ee);else{const ge=R.shift(),fe=t[Y];fe!=null&&fe.type==="polygon"&&fe.rings&&fe.rings.length>1&&ge.rings.length>=fe.rings.length?(D.push(ge),B.push("simplify")):B.push(o?Rp(ge):ge)}}if(!D.length)return B;const z=await sKe(r,D,i),W=[];for(let Y=0;Y<B.length;Y++){const ee=B[Y];ee!=="simplify"?W.push(ee):W.push(o?Rp(z.shift()):z.shift())}return W}const A=[];for(let R=0;R<w.length;R++){const D=w[R];if(D!=="cut")A.push(D);else{const B=v.shift();A.push(o===!0?Rp(B):B)}}return A}function dKe(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&ja(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=n||o>s||l<r||c>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=cle(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=cle(t.paths);break;case"multipoint":a=t.points}const h=e.clone();for(let m=0;m<a.length;m++){let y=a[m][0];y<0?(y+=n,c=Math.max(y,c)):(y-=n,l=Math.min(y,l))}return h.xmin=l,h.xmax=c,h.width<o?(h.xmin-=n,h.xmax-=n,h):e}function fK(t,e,i){const r=ja(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<n&&(a=-Math.ceil(Math.abs(e-n)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<n&&(l=-Math.ceil(Math.abs(t-n)/o));let c=t+(a-l)*o;const h=c-e;return h>s?c-=o:h<n&&(c+=o),c}function Bkt(t,e){const i=ja(e);if(i){const[r,n]=i.valid,s=n-r;if(t<r)for(;t<r;)t+=s;if(t>n)for(;t>n;)t-=s}return t}const Zxe=96,Yxe=39.37,hKe=180/Math.PI;function Xxe(t){return t.wkid?t:t.spatialReference||et.WGS84}function mK(t,e){return e.type?Bn(t,e.x,e.y):Y$(t,e)}function Kxe(t){return Ha(t)}function D4(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const a=Ep(i),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,n=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,n/o)*bKe(t.spatialReference)}async function h2(t,e,i,r){var a,l,c;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Ze.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const h=t.every(v=>"attributes"in v),m=t.some(v=>!v.geometry);let y=t;if(h&&m&&e&&e.allLayerViews){const v=new Map;for(const C of t){const k=C.layer,A=v.get(k)||[],R=C.attributes[k.objectIdField];R!=null&&A.push(R),v.set(k,A)}const w=[];v.forEach((C,k)=>{var R;const A=(R=e.allLayerViews)==null?void 0:R.find(D=>D.layer.id===k.id);if(A&&"queryFeatures"in A){const D=k.createQuery();D.objectIds=C,D.returnGeometry=!0,w.push(A.queryFeatures(D))}});const x=await Promise.all(w),S=[];for(const C of x)if(C&&C.features&&C.features.length)for(const k of C.features)k.geometry!=null&&S.push(k.geometry);y=S}for(const v of y)r=await h2(v,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new ft(t);else if(t instanceof eo)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const h=t.layer,m=(a=e.allLayerViews)==null?void 0:a.find(y=>y.layer.id===h.id);if(m&&"queryFeatures"in m){const y=h.createQuery();y.objectIds=[t.attributes[h.objectIdField]],y.returnGeometry=!0;const v=await m.queryFeatures(y);n=(c=(l=v==null?void 0:v.features)==null?void 0:l[0])==null?void 0:c.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new jt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=dKe(n);break;default:s=n.extent}if(!s)return null;sf()||$c(s.spatialReference,i)||await Yp();const o=Cb(s,i);if(!o)return null;if(r){const h=o.center,m=h.clone();m.x=fK(h.x,r.center.x,i),m.x!==h.x&&o.centerAt(m),r=r.union(o)}else r=o;return r}function pKe(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function hle(t,e){const i=Xxe(t);return Cn(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Cb(t,e)}async function fKe(t,e){var S;if(!t||!e)return new $s({targetGeometry:new ft,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;t instanceof $s?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l!=null&&l.targetGeometry?c=l.targetGeometry:t instanceof jt?c=t:t instanceof eo?c=await h2(t,e,i):t&&(c=await h2(t.center,e,i)||await h2(t.target,e,i)||await h2(t,e,i)),!c&&(s!=null&&s.targetGeometry)?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=Xxe(e.spatialReference||e.extent||c)),sf()||Cn(c.spatialReference,i)||$c(c.spatialReference,i)||await Yp();const h=hle(c,i),m="center"in h?h.center:h;e.pickClosestTarget!==!1&&m.type==="point"&&((S=s.targetGeometry)==null?void 0:S.type)==="point"&&(m.x=fK(m.x,s.targetGeometry.x,m.spatialReference));let y=0;l?y=l.rotation:t.hasOwnProperty("rotation")?y=t.rotation:s&&(y=s.rotation);let v=0;v=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:D4(hle(c.extent,i),a,y);const w=pKe(t.target??t);w&&(w.min&&w.min<v?v=w.min:w.max&&w.max>v&&(v=w.max));let x=new $s({targetGeometry:m,scale:v,rotation:y});return r&&(x=r.fit(x),r.constrainByGeometry(x),r.rotationEnabled||(x.rotation=s.rotation)),x}function aa(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function mKe(t,e,i){return i?Bn(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):nP(t,e,.5)}const Qxe=function(){const t=En();return function(e,i,r){const n=i.targetGeometry;mK(t,n);const s=.5*SC(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}}();function yKe(t,e,i,r,n){var s;return uq(t,e,i.center),t.scale=D4(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function gKe(t,e,i,r){return vK(t,e,i,r),hK(t,t)}const eSe=function(){const t=En();return function(e,i,r){return dK(e,wKe(e,i),mKe(t,i,r))}}(),vKe=function(){const t=Np(),e=En();return function(i,r,n,s){const o=SC(r),a=yK(r);return Bn(e,o,o),Bxe(t,e),bb(t,t,a),Dp(t,t,eSe(e,n,s)),Dp(t,t,[0,s.top-s.bottom]),Bn(i,t[4],t[5])}}();function SC(t){var e;return t.scale*tSe((e=t.targetGeometry)==null?void 0:e.spatialReference)}function tSe(t){return mc(t)?1/(Kxe(t)*Yxe*Zxe):1}function yK(t){return JX(t.rotation)||0}function bKe(t){return mc(t)?Kxe(t)*Yxe*Zxe:1}function wKe(t,e){return nP(t,e,.5)}const gK=function(){const t=En(),e=En(),i=En();return function(r,n,s,o,a,l){return Dxe(t,n),nP(e,s,.5*l),Bn(i,1/o*l,-1/o*l),pK(r,e),a&&bb(r,r,a),aP(r,r,i),Dp(r,r,t),r}}(),vK=function(){const t=En();return function(e,i,r,n){const s=SC(i),o=yK(i);return mK(t,i.targetGeometry),gK(e,t,r,s,o,n)}}(),_Ke=function(){const t=En();return function(e,i,r,n){const s=SC(i);return mK(t,i.targetGeometry),gK(e,t,r,s,0,n)}}();function iSe(t){const e=ja(t);return e?e.valid[1]-e.valid[0]:0}function xKe(t,e){return Math.round(iSe(t)/e)}const SKe=function(){const t=En(),e=En(),i=[0,0,0];return function(r,n,s){UA(t,r,n),cq(t,t),UA(e,r,s),cq(e,e),zxe(i,t,e);let o=Math.acos(Nxe(t,e)/(dF(t)*dF(e)))*hKe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),$Ke=function(){const t=En();return function(e,i,r,n){const s=e.targetGeometry;return aa(e,i),vKe(t,i,r,n),s.x+=t[0],s.y+=t[1],e}}(),uq=function(t,e,i){aa(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},TKe=function(){const t=En();return function(e,i,r,n,s){s||(s="center"),dK(t,r,n),nP(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":Bn(t,0,0);break;case"left":Bn(t,-o,0);break;case"top":Bn(t,0,a);break;case"right":Bn(t,o,0);break;case"bottom":Bn(t,0,-a);break;case"top-left":Bn(t,-o,a);break;case"bottom-left":Bn(t,-o,-a);break;case"top-right":Bn(t,o,a);break;case"bottom-right":Bn(t,o,-a)}return N4(e,i,t),e}}();function Gkt(t,e,i){return aa(t,e),t.rotation+=i,t}function EKe(t,e,i){return aa(t,e),t.rotation=i,t}const CKe=function(){const t=En();return function(e,i,r,n,s){return aa(e,i),isNaN(r)||r===0||(nSe(t,n,i,s),e.scale=i.scale*r,sSe(t,t,e,s),N4(e,e,Bn(t,t[0]-n[0],n[1]-t[1]))),e}}();function ple(t,e,i){return aa(t,e),t.scale=i,t}const rSe=function(){const t=En();return function(e,i,r,n,s,o){return aa(e,i),isNaN(r)||r===0||(nSe(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,sSe(t,t,e,o),N4(e,e,Bn(t,t[0]-s[0],s[1]-t[1]))),e}}(),Hkt=function(){const t=En(),e=En();return function(i,r,n,s,o,a,l){return eSe(e,a,l),Oxe(t,o,e),s?rSe(i,r,n,s,t,a):CKe(i,r,n,t,a)}}(),nSe=function(){const t=Np();return function(e,i,r,n){return ia(e,i,gKe(t,r,n,1))}}(),sSe=function(){const t=Np();return function(e,i,r,n){return ia(e,i,vK(t,r,n,1))}}(),N4=function(){const t=En(),e=Np();return function(i,r,n){aa(i,r);const s=SC(r),o=i.targetGeometry;return L4(e,yK(r)),aP(e,e,sP(s,s)),ia(t,n,e),o.x+=t[0],o.y+=t[1],i}}();function ly(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function IKe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function MKe(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function oSe(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function aSe(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)oSe(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:IKe,create:ly,fromValues:MKe,transform:oSe,transformMany:aSe},Symbol.toStringTag,{value:"Module"}));function kKe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function AKe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function lSe(t,e,i,r,n,s,o,a,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function cSe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function OKe(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function PKe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],m=h*o-a*c,y=-h*s+a*l,v=c*s-o*l;let w=i*m+r*y+n*v;return w?(w=1/w,t[0]=m*w,t[1]=(-h*r+n*c)*w,t[2]=(a*r-n*o)*w,t[3]=y*w,t[4]=(h*i-n*l)*w,t[5]=(-a*i+n*s)*w,t[6]=v*w,t[7]=(-c*i+r*l)*w,t[8]=(o*i-r*s)*w,t):null}function LKe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t[0]=o*h-a*c,t[1]=n*c-r*h,t[2]=r*a-n*o,t[3]=a*l-s*h,t[4]=i*h-n*l,t[5]=n*s-i*a,t[6]=s*c-o*l,t[7]=r*l-i*c,t[8]=i*o-r*s,t}function RKe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+i*(-c*n+o*a)+r*(l*n-s*a)}function bK(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],m=e[8],y=i[0],v=i[1],w=i[2],x=i[3],S=i[4],C=i[5],k=i[6],A=i[7],R=i[8];return t[0]=y*r+v*o+w*c,t[1]=y*n+v*a+w*h,t[2]=y*s+v*l+w*m,t[3]=x*r+S*o+C*c,t[4]=x*n+S*a+C*h,t[5]=x*s+S*l+C*m,t[6]=k*r+A*o+R*c,t[7]=k*n+A*a+R*h,t[8]=k*s+A*l+R*m,t}function dq(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],m=e[8],y=i[0],v=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=y*r+v*o+c,t[7]=y*n+v*a+h,t[8]=y*s+v*l+m,t}function uSe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],m=e[8],y=Math.sin(i),v=Math.cos(i);return t[0]=v*r+y*o,t[1]=v*n+y*a,t[2]=v*s+y*l,t[3]=v*o-y*r,t[4]=v*a-y*n,t[5]=v*l-y*s,t[6]=c,t[7]=h,t[8]=m,t}function DKe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function NKe(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function zKe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function FKe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function UKe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jKe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function VKe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,m=r*a,y=n*o,v=n*a,w=n*l,x=s*o,S=s*a,C=s*l;return t[0]=1-m-w,t[3]=h-C,t[6]=y+S,t[1]=h+C,t[4]=1-c-w,t[7]=v-x,t[2]=y-S,t[5]=v+x,t[8]=1-c-m,t}function BKe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10],m=h*o-a*c,y=-h*s+a*l,v=c*s-o*l,w=i*m+r*y+n*v;if(!w)return null;const x=1/w;return t[0]=m*x,t[1]=(-h*r+n*c)*x,t[2]=(a*r-n*o)*x,t[3]=y*x,t[4]=(h*i-n*l)*x,t[5]=(-a*i+n*s)*x,t[6]=v*x,t[7]=(-c*i+r*l)*x,t[8]=(o*i-r*s)*x,t}function GKe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],m=e[9],y=e[10],v=e[11],w=e[12],x=e[13],S=e[14],C=e[15],k=i*a-r*o,A=i*l-n*o,R=i*c-s*o,D=r*l-n*a,B=r*c-s*a,z=n*c-s*l,W=h*x-m*w,Y=h*S-y*w,ee=h*C-v*w,ge=m*S-y*x,fe=m*C-v*x,ue=y*C-v*S;let ae=k*ue-A*fe+R*ge+D*ee-B*Y+z*W;return ae?(ae=1/ae,t[0]=(a*ue-l*fe+c*ge)*ae,t[1]=(l*ee-o*ue-c*Y)*ae,t[2]=(o*fe-a*ee+c*W)*ae,t[3]=(n*fe-r*ue-s*ge)*ae,t[4]=(i*ue-n*ee+s*Y)*ae,t[5]=(r*ee-i*fe-s*W)*ae,t[6]=(x*z-S*B+C*D)*ae,t[7]=(S*R-w*z-C*A)*ae,t[8]=(w*B-x*R+C*k)*ae,t):null}function HKe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function qKe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function WKe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function JKe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function dSe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function ZKe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function YKe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function XKe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function KKe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],m=e[0],y=e[1],v=e[2],w=e[3],x=e[4],S=e[5],C=e[6],k=e[7],A=e[8],R=Va();return Math.abs(i-m)<=R*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(r-y)<=R*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-v)<=R*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-w)<=R*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-x)<=R*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-S)<=R*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(l-C)<=R*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-k)<=R*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(h-A)<=R*Math.max(1,Math.abs(h),Math.abs(A))}function QKe(t){const e=Va(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(n*n+a*a+h*h))<=e}const eQe=bK,tQe=dSe;Object.freeze(Object.defineProperty({__proto__:null,add:JKe,adjoint:LKe,copy:AKe,determinant:RKe,equals:KKe,exactEquals:XKe,frob:WKe,fromMat2d:jKe,fromMat4:kKe,fromQuat:VKe,fromRotation:FKe,fromScaling:UKe,fromTranslation:zKe,identity:cSe,invert:PKe,isOrthoNormal:QKe,mul:eQe,multiply:bK,multiplyScalar:ZKe,multiplyScalarAndAdd:YKe,normalFromMat4:GKe,normalFromMat4Legacy:BKe,projection:HKe,rotate:uSe,scale:DKe,scaleByVec2:NKe,set:lSe,str:qKe,sub:tQe,subtract:dSe,translate:dq,transpose:OKe},Symbol.toStringTag,{value:"Module"}));function ID(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function iQe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function rQe(t,e,i,r,n,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:iQe,create:ID,fromValues:rQe},Symbol.toStringTag,{value:"Module"}));function jA(){return new Float32Array(2)}function nQe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function u1(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function hSe(){return jA()}function pSe(){return u1(1,1)}function fSe(){return u1(1,0)}function mSe(){return u1(0,1)}const sQe=hSe(),oQe=pSe(),aQe=fSe(),lQe=mSe();Object.freeze(Object.defineProperty({__proto__:null,ONES:oQe,UNIT_X:aQe,UNIT_Y:lQe,ZEROS:sQe,clone:nQe,create:jA,fromValues:u1,ones:pSe,unitX:fSe,unitY:mSe,zeros:hSe},Symbol.toStringTag,{value:"Module"}));function cQe(t){return t instanceof Float32Array&&t.length>=2}function uQe(t){return Array.isArray(t)&&t.length>=2}function GB(t){return cQe(t)||uQe(t)}var hq;const Df=[0,0];let nm=hq=class extends ye{constructor(t){super(t),this._viewpoint2D={center:En(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new jt,this.id=0,this.inverseTransform=Np(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Np(),this.transformNoRotation=Np(),this.displayMat3=ID(),this.displayViewMat3=ID(),this.viewMat3=ID(),this.viewMat2d=ly(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=aa(i,t.viewpoint),this._set("size",Y$(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new hq({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return GB(e)?ia(t,e,this.inverseTransform):(Df[0]=e,Df[1]=i,ia(t,Df,this.inverseTransform))}toScreen(t,e,i){return GB(e)?ia(t,e,this.transform):(Df[0]=e,Df[1]=i,ia(t,Df,this.transform))}toScreenNoRotation(t,e,i){return GB(e)?ia(t,e,this.transformNoRotation):(Df[0]=e,Df[1]=i,ia(t,Df,this.transformNoRotation))}wrapMapCoordinate(t,e){Y$(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:a}=n;if(s.isWrappable){const l=iSe(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=fK(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return gK(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new $s({targetGeometry:new ft(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=SC(o),this.rotation=r,this.scale=i,this.spatialReference=e,Y$(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;lSe(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=cSe(this.viewMat3),h=u1(s[0]/2,s[1]/2),m=u1(-s[0]/2,-s[1]/2),y=JX(r);dq(c,c,h),uSe(c,c,y),dq(c,c,m),bK(this.displayViewMat3,this.displayMat3,c);const v=pK(this.viewMat2d,h);return bb(v,v,y),Dp(v,v,m),Qxe(this.extent,o,s),vK(this.transform,o,s,n),hK(this.inverseTransform,this.transform),_Ke(this.transformNoRotation,o,s,n),this.worldScreenWidth=xKe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([p({readOnly:!0})],nm.prototype,"id",void 0),u([p({value:1,json:{write:!0}})],nm.prototype,"pixelRatio",null),u([p({json:{write:!0}})],nm.prototype,"size",null),u([p()],nm.prototype,"spatialReference",void 0),u([p({type:$s,json:{write:!0}})],nm.prototype,"viewpoint",null),u([p({readOnly:!0})],nm.prototype,"visibleArea",null),nm=hq=u([U("esri.views.2d.ViewState")],nm);const fle=nm;var pq,fq;let Lm=pq=class extends st{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new pq({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([p()],Lm.prototype,"left",void 0),u([p()],Lm.prototype,"top",void 0),u([p()],Lm.prototype,"right",void 0),u([p()],Lm.prototype,"bottom",void 0),Lm=pq=u([U("esri.views.2d.PaddedViewState.Padding")],Lm);let vS=fq=class extends fle{constructor(...t){super(...t),this.paddedViewState=new fle,this._updateContent=(()=>{const e=En();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Bn(e,r.left+r.right,r.top+r.bottom),UA(e,i,e),Y$(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Le(()=>[this.size,this.padding],()=>this._updateContent(),Bp)),this.padding=new Lm,this.size=[0,0]}set padding(t){this._set("padding",t||new Lm)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=$Ke(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=n,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new fq({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([p()],vS.prototype,"paddedViewState",void 0),u([p({type:Lm})],vS.prototype,"padding",null),u([p()],vS.prototype,"viewpoint",null),vS=fq=u([U("esri.views.2d.PaddedViewState")],vS);const wK=vS;var Xo;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(Xo||(Xo={}));const ySe=Symbol("Yield");let dQe=class{constructor(){this._tasks=new Array,this._numPendingTasks=Q_(0),this._running=Q_(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get running(){return this._running.value}_updateRunning(){this._running.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return ySe;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return new Promise((n,s)=>{this._tasks.push(new mle(n,s,e,i,r)),++this._numPendingTasks.value,this._updateRunning()}).finally(()=>--this._numPendingTasks.value)}unshift(e,i,r){return new Promise((n,s)=>{this._tasks.unshift(new mle(n,s,e,i,r)),++this._numPendingTasks.value,this._updateRunning()}).finally(()=>--this._numPendingTasks.value)}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateRunning();try{const n=xc(i.signal);if(n&&!i.abortCallback)i.reject(Gi());else{const s=n?(r=i.abortCallback)==null?void 0:r.call(i,Gi()):i.callback(e);nf(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(n){i.reject(n)}return!0}cancelAll(){const e=Gi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._updateRunning()}},mle=class{constructor(e,i,r,n=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},p2=class extends st{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([p()],p2.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([p()],p2.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),p2=u([U("esri.views.support.debugFlags")],p2);const hQe=new p2;function pQe(){return new pF.Scheduler}var li;(function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.STREAM_CONTROLLER="stream controller",t.OVERLAY="overlay",t.OVERLAY_RENDERER="overlay renderer",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t.MAPVIEW_FETCH_QUEUE="mapview fetch queue",t.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",t.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"})(li||(li={}));const eu=0,yle=new Map([[li.RESOURCE_CONTROLLER_IMMEDIATE,eu],[li.RESOURCE_CONTROLLER,4],[li.SLIDE,eu],[li.STREAM_DATA_LOADER,eu],[li.ELEVATION_QUERY,eu],[li.TERRAIN_SURFACE,1],[li.SURFACE_GEOMETRY_UPDATES,1],[li.LOD_RENDERER,2],[li.GRAPHICS_CORE,2],[li.I3S_CONTROLLER,2],[li.POINT_CLOUD_LAYER,2],[li.FEATURE_TILE_FETCHER,2],[li.STREAM_CONTROLLER,2],[li.CLOUDS_GENERATOR,2],[li.OVERLAY,4],[li.OVERLAY_RENDERER,4],[li.STAGE,4],[li.GRAPHICS_DECONFLICTOR,4],[li.FILTER_VISIBILITY,4],[li.SCALE_VISIBILITY,4],[li.FRUSTUM_VISIBILITY,4],[li.POINT_OF_INTEREST_FREQUENT,6],[li.POINT_OF_INTEREST_INFREQUENT,30],[li.LABELER,8],[li.FEATURE_QUERY_ENGINE,8],[li.FEATURE_TILE_TREE,16],[li.FEATURE_TILE_TREE_ACTIVE,eu],[li.ELEVATION_ALIGNMENT,12],[li.ELEVATION_ALIGNMENT_SCENE,14],[li.TEXT_TEXTURE_ATLAS,12],[li.TEXTURE_UNLOAD,12],[li.LINE_OF_SIGHT_TOOL,16],[li.LINE_OF_SIGHT_TOOL_INTERACTIVE,eu],[li.SNAPPING,eu],[li.SHADOW_ACCUMULATOR,30],[li.MAPVIEW_FETCH_QUEUE,eu],[li.MAPVIEW_LAYERVIEW_UPDATE,2],[li.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,eu]]);function gle(t){return yle.has(t)?yle.get(t):typeof t=="number"?t:1}const fQe=6.5,vle=1,mQe=30,yQe=1e3/30,gQe=100,ble=.9;var pF,_0;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=Q_(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new lk("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Xo.INTERACTING,this._tasks=new ck,this._runQueue=new ck,this._load=0,this._idleStateCallbacks=new ck,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Le(()=>hQe.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,gi);for(const s of Object.keys(li))this.performanceInfo.tasks.set(li[s],new lk(li[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.prune(),this._idleStateCallbacks.prune(),this._runQueue.prune(),rn(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(s,o){const a=new i(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new lk(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Xo.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===Xo.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Xo.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const o=this._updateBudget(s);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=fQe,a=s.frameDuration,l=vle;switch(this.state){case Xo.IDLE:o=0,a=Math.max(gQe,s.frameDuration),l=mQe;break;case Xo.INTERACTING:a=Math.max(yQe,s.frameDuration);case Xo.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Xo.IDLE&&a<vle&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Xo.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Xo.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return _0.SCHEDULED;let o=_0.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=_0.READY:o!==_0.READY&&(o=_0.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*ble+s*(1-ble)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===eu&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==eu&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===ySe&&(o.blockFrame=this._frameNumber)}catch(l){Ce.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,li.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(li))this._frameTaskTimes.set(li[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new dQe,this._handles=new hC,this._basePriority=gle(o),this.schedulePriority=this._basePriority,this._task=Q_(a??this._queue),this._handles.add(hs(()=>this.task.running,l=>s.taskRunningChanged(l)))}remove(){this.processQueue(_K),this._scheduler.removeTask(this),this.schedule=wle.schedule,this.reschedule=wle.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=gle(s);this._basePriority!==eu&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class r{constructor(){this._begin=(performance==null?void 0:performance.now())??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s){this._begin=this.now(),this._budget=s,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(pF||(pF={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(_0||(_0={}));const _K=new pF.Budget;_K.enabled=!1;let vQe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(xc(i)){const n=Gi();return r?Promise.resolve(r(n)):Promise.reject(n)}return uH(e(_K))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const wle=new vQe;let bQe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=pQe(),this._schedulerHandle=hs(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||nf(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var a,l,c;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:o}}=this.view;r==null||r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Xo.ANIMATING:this.view.interacting?this._scheduler.state=Xo.INTERACTING:this._scheduler.state=Xo.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==Xo.IDLE||((c=this._frameTaskHandle)==null||c.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new wK,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Le(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=CE(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}};function wQe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,o,a;const l=[0,0],c=_Qe(t);for(let y=0;y<c.length;y++){const v=c[y];for(let w=0;w<v.length-1;w++){cVe(l,r,v,w);const x=P4(r,l);(n==null||x<n)&&(n=x,s=[...l],o=y,a=w)}}if(n==null||!s||o==null||a==null)throw new Q("nearest-coordinate:failed","Failed to find the nearest coordinate");const[h,m]=s;return{coordinate:new ft({x:h,y:m,spatialReference:i}),distance:n}}function _Qe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var mq;let Pw=mq=class extends Hd.NumericIdentifiableMixin(st){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Cb(this.geometry,this.spatialReference)}catch(t){return Ce.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?HO(this.normalizedGeometry,i):mX(this.normalizedGeometry,i))return t;const{coordinate:r}=wQe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new mq({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};u([p({constructOnly:!0})],Pw.prototype,"geometry",void 0),u([p({readOnly:!0})],Pw.prototype,"normalizedGeometry",null),u([p({constructOnly:!0})],Pw.prototype,"spatialReference",void 0),Pw=mq=u([U("esri.views.2d.constraints.GeometryConstraint")],Pw);var yq;let f2=yq=class extends Hd.NumericIdentifiableMixin(st){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new yq({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([p()],f2.prototype,"enabled",void 0),u([p()],f2.prototype,"rotationEnabled",void 0),f2=yq=u([U("esri.views.2d.constraints.RotationConstraint")],f2);const gSe=f2;var gq;let tl=gq=class extends Hd.NumericIdentifiableMixin(st){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(h=>h.clone()),e.sort((h,m)=>m.scale-h.scale),e.forEach((h,m)=>h.level=m);for(const h of e)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!c&&r>0&&r>=h.scale&&(a=t?t.level:-1,c=!0),t=h;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach((h,m)=>{this._lodByScale[h.scale]=h,this._scales[m]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new gq({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};u([p({readOnly:!0})],tl.prototype,"effectiveLODs",void 0),u([p({readOnly:!0})],tl.prototype,"effectiveMinZoom",void 0),u([p({readOnly:!0})],tl.prototype,"effectiveMaxZoom",void 0),u([p({readOnly:!0})],tl.prototype,"effectiveMinScale",void 0),u([p({readOnly:!0})],tl.prototype,"effectiveMaxScale",void 0),u([p()],tl.prototype,"lods",void 0),u([p()],tl.prototype,"minZoom",void 0),u([p()],tl.prototype,"maxZoom",void 0),u([p()],tl.prototype,"minScale",void 0),u([p()],tl.prototype,"maxScale",void 0),u([p()],tl.prototype,"snapToZoom",void 0),tl=gq=u([U("esri.views.2d.constraints.ZoomConstraint")],tl);const vSe=tl,xQe={base:null,key:"type",typeMap:{extent:jt,polygon:rr}};let Ln=class extends st{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ze}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Pw({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new gSe({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new vSe({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};u([p({readOnly:!0})],Ln.prototype,"effectiveLODs",null),u([p({readOnly:!0})],Ln.prototype,"effectiveMinScale",null),u([p({readOnly:!0})],Ln.prototype,"effectiveMaxScale",null),u([p({readOnly:!0})],Ln.prototype,"effectiveMinZoom",null),u([p({readOnly:!0})],Ln.prototype,"effectiveMaxZoom",null),u([p({types:xQe,value:null})],Ln.prototype,"geometry",null),u([p({type:[us]})],Ln.prototype,"lods",void 0),u([p()],Ln.prototype,"minScale",void 0),u([p()],Ln.prototype,"maxScale",void 0),u([p()],Ln.prototype,"minZoom",void 0),u([p()],Ln.prototype,"maxZoom",void 0),u([p()],Ln.prototype,"rotationEnabled",void 0),u([p()],Ln.prototype,"snapToZoom",void 0),u([p({type:Ze})],Ln.prototype,"customConstraints",void 0),u([p()],Ln.prototype,"view",void 0),u([p({readOnly:!0})],Ln.prototype,"version",null),u([p({type:Pw,readOnly:!0})],Ln.prototype,"_geometry",null),u([p({type:gSe})],Ln.prototype,"_rotation",null),u([p({readOnly:!0,type:vSe})],Ln.prototype,"_zoom",null),Ln=u([U("esri.views.2d.MapViewConstraints")],Ln);const _le=Ln;let Ho=class extends st{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Le(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Bp)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new ft({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ce.getLogger(this).error(new Q("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;uq(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ce.getLogger(this).error(new Q("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void Ce.getLogger(this).error(new Q("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;yKe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;EKe(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;ple(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new Q("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new Q("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new Q("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void Ce.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new $s({targetGeometry:new ft,scale:0,rotation:0});aa(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;ple(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let m,y,v;const w=l==null?void 0:l.rotation,x=l==null?void 0:l.targetGeometry;(x==null?void 0:x.type)==="extent"?m=x:(x==null?void 0:x.type)==="point"&&(y=x,v=l==null?void 0:l.scale);const S=s??m;return{center:n??y??(S==null?void 0:S.center),rotation:a??w,scale:(o??h??v??(S&&D4(S,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){Ce.getLogger(this).warn(new Sc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new ft({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new wK({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new ft({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const c=i.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=c}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new ft({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(c){JU()||Ce.getLogger(this).warn(new Sc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:c}))}o||(o=new ft({x:0,y:0,spatialReference:e}));const a=uq(new $s({targetGeometry:new ft,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const h=[i.size[0]/2,i.size[1]/2],m=[h[0]+20,h[1]],y=i.toMap([0,0],m),{x:v,y:w}=this._project(new ft({x:y[0],y:y[1],spatialReference:i.spatialReference}),e);y[0]=v,y[1]=w,r.toScreen(y,y);const x=SKe(h,y,m),S=Math.hypot(y[0]-h[0],y[1]-h[1])/20;!Number.isFinite(S)||Math.abs(S)>4?(a.rotation=0,a.targetGeometry=new ft({x:0,y:0,spatialReference:e})):(a.scale*=S,a.scale>ve("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(x)?x:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],TKe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new ft({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),xs(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||Cn(i,r.spatialReference))return e;const n=Cb(r,i);if(!n)throw new Q("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return SQe(e)?(e.targetGeometry=n,e):n}};function SQe(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}u([p({type:ft})],Ho.prototype,"center",null),u([p()],Ho.prototype,"constraints",void 0),u([p({type:jt})],Ho.prototype,"extent",null),u([p({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Ho.prototype,"padding",null),u([p()],Ho.prototype,"ready",void 0),u([p()],Ho.prototype,"resizeAlign",void 0),u([p({readOnly:!0})],Ho.prototype,"resolution",null),u([p({type:Number})],Ho.prototype,"rotation",null),u([p({type:Number})],Ho.prototype,"scale",null),u([p({readOnly:!0})],Ho.prototype,"state",void 0),u([p({type:$s})],Ho.prototype,"viewpoint",null),u([p({readOnly:!0})],Ho.prototype,"visibleArea",null),u([p()],Ho.prototype,"zoom",null),Ho=u([U("esri.views.2d.ViewStateManager")],Ho);const xle=160;let m2=class extends st{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=xle&&this.clear()},xle))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([p()],m2.prototype,"_timer",void 0),u([p()],m2.prototype,"stationary",null),m2=u([U("esri.views.2d.support.StationaryManager")],m2);const $Qe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Ho({constraints:new _le({view:this})}),this.stationaryManager=new m2,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new bQe(this),this.viewEvents=new vxe(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Le(()=>this.viewpoint,()=>this.stationaryManager.flip(),Bp)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const n=this._get("animation");if(r===n)return;if(n&&n.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{var o;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(o=this.frameTask)==null||o.requestFrame())};r.when(s,s)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const n=this.stateManager.constraints;this.stateManager.constraints=r,n==null||n.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:n}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=n}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return u([p({readOnly:!0})],i.prototype,"animationManager",void 0),u([p({readOnly:!0})],i.prototype,"fullOpacity",void 0),u([p()],i.prototype,"stateManager",void 0),u([p()],i.prototype,"constraintsInfo",null),u([p()],i.prototype,"extent",null),u([p({readOnly:!0})],i.prototype,"state",null),u([p({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),u([p()],i.prototype,"renderingOptions",void 0),u([p({readOnly:!0})],i.prototype,"interacting",null),u([p()],i.prototype,"stationary",null),u([p()],i.prototype,"animation",null),u([p({type:_le})],i.prototype,"constraints",null),u([p()],i.prototype,"padding",null),u([p()],i.prototype,"resizeAlign",null),u([p()],i.prototype,"rotation",null),u([p({readOnly:!0})],i.prototype,"viewEvents",void 0),u([p({type:$s})],i.prototype,"viewpoint",null),i=u([U("esri.views.Viewport2DBaseMixin")],i),i};let Bg=class extends gu{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Mo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new Q("view:animation-stopped","ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=nf(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};u([p({readOnly:!0})],Bg.prototype,"done",null),u([p({readOnly:!0,type:String})],Bg.prototype,"state",void 0),u([p()],Bg.prototype,"target",void 0),Bg=u([U("esri.views.ViewAnimation")],Bg),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Bg||(Bg={}));const vq=Bg;let MD=class extends st{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void Ce.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new vq;this.view.animation=r,await Vp(()=>this.view.ready,i);const n={...i,animate:(i==null?void 0:i.animate)??!$xe(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:m}=this.view,y=fKe(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:h,allLayerViews:m,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(y),this._gotoTask={},n.animate?this._gotoAnimated(y,n):this._gotoImmediate(y,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(o=>{if(sr(i),r!==this._gotoTask)throw new Q("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(sr(i),r!==this._gotoTask)throw new Q("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return Zge(r,n).finally(()=>{s()&&(i.done||i.stop())})}};u([p({constructOnly:!0})],MD.prototype,"view",void 0),MD=u([U("esri.views.2d.GoToManager")],MD);function bSe(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function wSe(t,e){return e.some(i=>bSe(t,i))}function Sle(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(n=>n.value===t).map(n=>n.key)}let $le=class extends Us{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){bSe(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},TQe=class extends Us{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const m=l.snapScale(this._currentScale),y=(s.y>0?Math.max(m,l.snapToPreviousScale(this._startScale)):Math.min(m,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(y).then(()=>{a.end()});break}}}},z4=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},EQe=class extends Us{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new z4({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&wSe(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},CQe=class extends Us{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new z4({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&wSe(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function _Se(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function IQe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function MQe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function kQe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function xSe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function SSe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function $Se(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function AQe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function OQe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function PQe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function LQe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function RQe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function DQe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function NQe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function zQe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function TSe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function FQe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function ESe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function CSe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function ISe(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function UQe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function jQe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function bq(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function MSe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function VQe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function BQe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=n*l-s*a,h=s*o-r*l,m=r*a-n*o,y=Math.sqrt(c*c+h*h+m*m);return t[0]=c/y,t[1]=h/y,t[2]=m/y,t}function GQe(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function HQe(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+r[0]*c+n[0]*h,t[1]=e[1]*a+i[1]*l+r[1]*c+n[1]*h,t[2]=e[2]*a+i[2]*l+r[2]*c+n[2]*h,t}function qQe(t,e,i,r,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,m=3*l*o,y=l*s;return t[0]=e[0]*c+i[0]*h+r[0]*m+n[0]*y,t[1]=e[1]*c+i[1]*h+r[1]*m+n[1]*y,t[2]=e[2]*c+i[2]*h+r[2]*m+n[2]*y,t}function WQe(t,e=1){const i=S4,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function JQe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function ZQe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function YQe(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],l=e[1],c=e[2],h=n*c-s*l,m=s*a-r*c,y=r*l-n*a,v=n*y-s*m,w=s*h-r*y,x=r*m-n*h,S=2*o;return t[0]=a+h*S+2*v,t[1]=l+m*S+2*w,t[2]=c+y*S+2*x,t}function XQe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function KQe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function QQe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function eet(t,e){bq(Tle,t),bq(Ele,e);const i=MSe(Tle,Ele);return i>1?0:i<-1?Math.PI:Math.acos(i)}const Tle=Eb(),Ele=Eb();function tet(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function iet(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ret(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=Va();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function net(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const set=xSe,oet=SSe,aet=$Se,cet=ESe,uet=CSe,det=_Se,het=ISe;Object.freeze(Object.defineProperty({__proto__:null,abs:PQe,add:kQe,angle:eet,bezier:qQe,ceil:AQe,clamp:NQe,copy:IQe,cross:VQe,crossAndNormalize:BQe,direction:net,dist:cet,distance:ESe,div:aet,divide:$Se,dot:MSe,equals:ret,exactEquals:iet,floor:OQe,hermite:HQe,inverse:jQe,len:det,length:_Se,lerp:GQe,max:DQe,min:RQe,mul:oet,multiply:SSe,negate:UQe,normalize:bq,random:WQe,rotateX:XQe,rotateY:KQe,rotateZ:QQe,round:zQe,scale:TSe,scaleAndAdd:FQe,set:MQe,sign:LQe,sqrDist:uet,sqrLen:het,squaredDistance:CSe,squaredLength:ISe,str:tet,sub:set,subtract:xSe,transformMat3:ZQe,transformMat4:JQe,transformQuat:YQe},Symbol.toStringTag,{value:"Module"}));function Hu(t){let e=t*t;return t<0&&(e*=-1),e}function pet(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function fet(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Hu(n.axes[0]),r.translation[1]=Hu(n.axes[1]),r.translation[2]=Hu(n.buttons[7])-Hu(n.buttons[6]),r.heading=Hu(n.axes[2]),r.tilt=Hu(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Hu(n.axes[0]),r.translation[1]=1.2*Hu(n.axes[1]),r.translation[2]=2*-Hu(n.axes[2]),r.heading=1.2*Hu(n.axes[5]),r.tilt=1.2*Hu(n.axes[3])),r.tilt*=o,TSe(r.translation,r.translation,a),r}function met(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let yet=class extends Us{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new hC,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Le(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=CE({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},gi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){var r;const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,pet(this._transformation)):(this._currentDevice=e.data.device,fet(e.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(e){var m;const i=this._transformation;if(met(i))return void((m=this._frameTask)==null?void 0:m.pause());const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=vet*n*e;N4(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*bet*e,a=this._view.constraints.rotationEnabled?-i.heading*get*e:0,l=this._view.size,c=[l[0]/2,l[1]];rSe(r,r,o,a,c,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const get=.06,vet=.7,bet=6e-4;function kSe(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Mi(()=>document.removeEventListener("visibilitychange",e))}let wet=class extends Us{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=kSe(n=>n?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},_et=class extends Us{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=kSe(n=>n?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var $$;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})($$||($$={}));let xet=class extends Us{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=$$.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=$$.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case $$.IN:o=s.zoomIn();break;case $$.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const $et=.6;let Tet=class extends Us{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/$et**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Eet=class extends Us{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new z4({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Cle(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>Met(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Cet(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Iet(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Met(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let ket=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,Cle(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(Ile(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new cK(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=CE({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;Ile(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=Cle(s),l=r||Iet(a);o&&(o.timestamp===n.timestamp||!o.active&&l||Cet(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function Aet(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function Ile(t){for(const e of navigator.getGamepads())Aet(e)&&t(e)}const Mle=ve("edge"),Oet=ve("chrome"),Pet=ve("ff"),Let=ve("safari"),kle="esri-view-surface",Dx={touchNone:`${kle}--touch-none`,touchPan:`${kle}--touch-pan`};var I_;let Ret=(I_=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new ket(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=xr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(HB[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&HB[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(HB[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Dx.touchNone:Dx.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Dx.touchPan:Dx.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Dx.touchNone),this._element.classList.remove(Dx.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=wxe(this._element,e);return I_.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ve("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:Mle&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Mle?r*=.7:Oet||Let?r*=.6:Pet&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},I_.test={disableSubpixelCoordinates:!1},I_);const HB={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Det=class extends Us{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const ASe=()=>({maximumClickDelay:300}),Net=(t={})=>({...ASe(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),xK=(t={})=>({...ASe(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function fF(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function zet(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function Fet(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:xs()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[A,R]=t,[D,B]=[R.x-A.x,R.y-A.y];return e.radius=Math.sqrt(D*D+B*B)/2,e.center.x=(A.x+R.x)/2,e.center.y=(A.y+R.y)/2,e}let i=0,r=0;for(let A=0;A<t.length;A++)i+=t[A].x,r+=t[A].y;i/=t.length,r/=t.length;const n=t.map(A=>A.x-i),s=t.map(A=>A.y-r);let o=0,a=0,l=0,c=0,h=0,m=0,y=0;for(let A=0;A<n.length;A++){const R=n[A],D=s[A],B=R*R,z=D*D;o+=B,a+=z,l+=R*D,c+=B*R,h+=z*D,m+=R*z,y+=D*B}const v=.5*(c+m),w=.5*(h+y),x=o*a-l*l,S=(v*a-w*l)/x,C=(o*w-l*v)/x,k=xs(S+i,C+r);return{radius:Math.sqrt(S*S+C*C+(o+a)/t.length),center:k}}function x_(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let Uet=class extends Us{constructor(e={},i=cC){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=xs(0,0),this._pointerState=new Map,this._parameters=xK(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new z4({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=rn(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=rn(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=qB("begin",xs(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=qB("update",xs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=qB("end",xs(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=x_(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),fF(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=x_(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function qB(t,e,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:o,pointerType:a,timestamp:l}}let jet=class extends Us{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:Vet(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=$R(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=kD(n,OSe(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=$R(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=$R(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=kD(r,i)-e,r.lastAngle=kD(r,i)-e})}_emitEvent(e,i,r){const n=$R(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function OSe(t){const e=[];return t.forEach(i=>{e.push(xs(i.event.x,i.event.y))}),Fet(e)}function $R(t){const e=OSe(t);let i=0;return t.forEach(r=>{let n=kD(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Vet(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function kD(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var Ale;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(Ale||(Ale={}));let Bet=class extends Us{constructor(e={},i=cC){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=xK(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=x_(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=x_(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),fF(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):fF(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=x_(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},Get=class extends Us{constructor(e={},i=cC){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=Net(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=rn(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(TR("update",n,i),void 0,n.modifiers):zet(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(TR("start",n,i)):this._pointerDrag.emit(TR("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(TR("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function TR(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let Het=class extends Us{constructor(e={},i=cC){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=xK(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=rn(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=rn(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=qet(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;fF(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=x_(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=x_(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function qet(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const ER={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Ole=Symbol("handles");let ew=class extends st{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([hs(()=>!e(),()=>this._disconnect()),hs(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}isModifierKeyDown(e){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(e))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Ole),this._inputManager=xr(this._inputManager)}_connect(){const e=this.view.surface,i=new Ret(e,this.view.input),r=[new Bet,new Get,new Het,new jet(this.view.navigation),new Uet],n=new jc({eventSource:i,recognizers:r}),s=new EQe(this.view,["primary"]),o=new CQe(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new Det],zd.INTERNAL),n.installHandlers("navigation",[new Eet(this.view),new yet(this.view),new Tet(this.view),new $le(this.view),new $le(this.view,[ER.counter]),s,new wet(this.view,ER.pan),new xet(this.view,ER.zoom),new _et(this.view,ER.rotate),o,new TQe(this.view,"touch")],zd.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([Le(()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},gi),Le(()=>{const{actionMap:a}=this.view.navigation;return{panActions:Sle("pan",a),rotateActions:Sle("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},Oa)],Ole)}get test(){}};u([p()],ew.prototype,"view",void 0),u([p()],ew.prototype,"latestPointerType",null),u([p()],ew.prototype,"latestPointerLocation",null),u([p()],ew.prototype,"multiTouchActive",null),ew=u([U("esri.views.2d.input.MapViewInputManager")],ew);const Wet=ew,Jet=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new MD({view:this}),this.inputManager=new Wet({view:this}),this.addHandles([this.on("resize",n=>this.stateManager.resize(n.width,n.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,n,s,o){return this.inputManager&&this.viewEvents.on(r,n,s,o)||super.on(r,n)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,n){return this.goToManager.goTo(r,n)}toMap(r){if(!this.ready)return null;const n=xxe(r)?_xe(this,r):r;return this.stateManager.toMap(n)}};return u([p()],i.prototype,"goToManager",void 0),u([p({readOnly:!0})],i.prototype,"interacting",null),u([p()],i.prototype,"stationary",null),u([p({readOnly:!0})],i.prototype,"inputManager",void 0),i=u([U("esri.views.Viewport2DMixin")],i),i};let Ple=class{constructor(e){this._view=e,this.viewpoint=new $s({targetGeometry:new ft,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return tSe(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=Dbe(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=Ep(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=NM(e.center.x,i.center.x,n),l.y=NM(e.center.y,i.center.y,n),this.viewpoint.scale=NM(e.scale,i.scale+a,o);let c=e.rotation;const h=i.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=NM(c,h,s)}copyFrom(e){aa(this.viewpoint,e.viewpoint),this._view=e.view}};function KI(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function h(w){return((o*w+s)*w+n)*w}function m(w){return((c*w+l)*w+a)*w}function y(w){return(3*o*w+2*s)*w+n}function v(w,x){let S,C,k,A,R,D;for(k=w,D=0;D<8;D++){if(A=h(k)-w,Math.abs(A)<x)return k;if(R=y(k),Math.abs(R)<1e-6)break;k-=A/R}if(S=0,C=1,k=w,k<S)return S;if(k>C)return C;for(;S<C;){if(A=h(k),Math.abs(A-w)<x)return k;w>A?S=k:C=k,k=.5*(C-S)+S}return k}return function(w,x=1e-6){return m(v(w,x))}}const nu={};nu.ease=KI(.25,.1,.25,1),nu.linear=KI(0,0,1,1),nu.easeIn=nu["ease-in"]=KI(.42,0,1,1),nu.easeOut=nu["ease-out"]=KI(0,0,.58,1),nu.easeInOut=nu["ease-in-out"]=KI(.42,0,.58,1);const Zet=t=>t,VA=t=>t*t,mF=t=>1-VA(1-t),Lle=t=>t<.5?VA(2*t)/2:(mF(2*(t-.5))+1)/2,yF=t=>t*t*t,wq=t=>1-yF(1-t),Rle=t=>t<.5?yF(2*t)/2:(wq(2*(t-.5))+1)/2,gF=t=>t*t*t*t,_q=t=>1-gF(1-t),Dle=t=>t<.5?gF(2*t)/2:(_q(2*(t-.5))+1)/2,vF=t=>t*t*t*t*t,xq=t=>1-vF(1-t),Nle=t=>t<.5?vF(2*t)/2:(xq(2*(t-.5))+1)/2,bF=t=>1-Math.cos(t*Math.PI/2),Sq=t=>1-bF(1-t),zle=t=>t<.5?bF(2*t)/2:(Sq(2*(t-.5))+1)/2,wF=t=>2**(10*(t-1)),_F=t=>1-wF(1-t),Fle=t=>t<.5?wF(2*t)/2:(_F(2*(t-.5))+1)/2,xF=t=>-(Math.sqrt(1-t*t)-1),$q=t=>1-xF(1-t),Ule=t=>t<.5?xF(2*t)/2:($q(2*(t-.5))+1)/2;function xu(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function Su(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const jle=Su(xu(1),1),Vle=Su(xu(1),0),SF=Su(xu(1),.5),Ble=Su(xu(2),1),Gle=Su(xu(2),0),Hle=Su(xu(2),.5),qle=Su(xu(3),1),Wle=Su(xu(3),0),Jle=Su(xu(3),.5),Zle=Su(xu(4),1),Yle=Su(xu(4),0),Xle=Su(xu(4),.5),Kle={linear:Zet,"in-quad":VA,"out-quad":mF,"in-out-quad":Lle,"in-coast-quad":jle,"out-coast-quad":Vle,"in-out-coast-quad":SF,"in-cubic":yF,"out-cubic":wq,"in-out-cubic":Rle,"in-coast-cubic":Ble,"out-coast-cubic":Gle,"in-out-coast-cubic":Hle,"in-quart":gF,"out-quart":_q,"in-out-quart":Dle,"in-coast-quart":qle,"out-coast-quart":Wle,"in-out-coast-quart":Jle,"in-quint":vF,"out-quint":xq,"in-out-quint":Nle,"in-coast-quint":Zle,"out-coast-quint":Yle,"in-out-coast-quint":Xle,"in-sine":bF,"out-sine":Sq,"in-out-sine":zle,"in-expo":wF,"out-expo":_F,"in-out-expo":Fle,"in-circ":xF,"out-circ":$q,"in-out-circ":Ule,"quad-in":VA,"quad-out":mF,"quad-in-out":Lle,"quad-in-coast":jle,"quad-out-coast":Vle,"quad-in-out-coast":SF,"cubic-in":yF,"cubic-out":wq,"cubic-in-out":Rle,"cubic-in-coast":Ble,"cubic-out-coast":Gle,"cubic-in-out-coast":Hle,"quart-in":gF,"quart-out":_q,"quart-in-out":Dle,"quart-in-coast":qle,"quart-out-coast":Wle,"quart-in-out-coast":Jle,"quint-in":vF,"quint-out":xq,"quint-in-out":Nle,"quint-in-coast":Zle,"quint-out-coast":Yle,"quint-in-out-coast":Xle,"sine-in":bF,"sine-out":Sq,"sine-in-out":zle,"expo-in":wF,"expo-out":_F,"expo-in-out":Fle,"circ-in":xF,"circ-out":$q,"circ-in-out":Ule,ease:t=>nu.ease(t),"ease-in":t=>nu.easeIn(t),"ease-out":t=>nu.easeOut(t),"ease-in-out":t=>nu.easeInOut(t)};let Yet=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const $F={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},PSe={maxDuration:4e3};let Xet=class LSe{constructor(e){this._createCamera=e,this.compared=new Yet,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:$F.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new LSe(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??$F.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Va()}get hasFov(){return Math.abs(this.compared.fov)>Va()}get hasRotate(){return this.compared.rotate>Va()}},Ket=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Qet=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+c.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:h,targetZoom:m}=c.compared,y=i.zoom*(m-h)+h,v=this.segments[0].definition.compared.sourceZoom,w=this.segments[this.segments.length-1].definition.compared.targetZoom,x=Math.abs(m-v)>Math.abs(h-v)?m:h;i.zoomOffset=x-w,i.zoom=(y-v)/(x-v)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,n+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},WB=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let o=0,a=0;r&&(n&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&n&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&n){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(n&&s){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else n?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/ett:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const ett=Ep(45);function ttt(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function itt(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*n*s*o*l+t.halfWindowSize*n*s*o*c/(a*a)}function rtt(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a+2*n*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function ntt(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function stt(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function ott(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function att(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function ltt(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function ctt(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function utt(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function dtt(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*a+t.halfWindowSize*r*n*s*l/(o*o)+t.halfWindowSize*n*s*a*l/e}function htt(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*a-2*n*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function ptt(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function ftt(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function mtt(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function ytt(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function gtt(t,e){let i=vtt(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,o=n?ntt:ttt,a=n?stt:itt,l=n?ott:rtt,c=s?ptt:utt,h=s?ftt:dtt,m=s?mtt:htt,y=D=>o(t,D,r)+att(t,D,r)+c(t,D,r),v=D=>a(t,D,r)+ltt(t,D,r)+h(t,D,r),w=D=>l(t,D,r)+ctt(t,D,r)+m(t,D,r);let x=y(i);const S=ytt(t);let C;const k=e.maximumIterations||20,A=e.maximumDistance!=null?e.maximumDistance:1/0;for(C=0;C<k;C++){const D=e.desiredSlope??1e-6;let B=v(i);Math.abs(B)>D&&(B+=D);const z=B/w(i);if(isNaN(z)||i>=A&&z<0){if(!isFinite(A))return null;i=A,x=y(i);break}if(i-=z,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const W=y(i);if(Math.abs(W-x)/x<=.005)break;x=W}return isNaN(x)||x>S*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function vtt(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let btt=class extends Qet{constructor(e,i){super(),this._preallocSegments=[new WB,new WB,new WB],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i!=null&&i.apex?gtt(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=mF(r.zoom):e===this._descensionSegment&&(r.zoom=VA(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,o=(i==null?void 0:i.ascensionFactor)??.5,a=Math.min(1-o,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+l,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const wtt=new Ket;let _tt=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=SF,this.definition=new Xet(e),this.path=new btt}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(nUe(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?SF:_F)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,wtt);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??$F.minDuration/r,s=i.maxDuration??$F.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const xtt=2e3,Stt=64;let $tt=class{constructor(e){this._view=e,this._animation=new _tt(()=>new Ple(this._view)),this._current=new Ple(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){aa(this._current.viewpoint,e),aa(this._source.viewpoint,e),aa(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),aa(e,this._current.viewpoint)}},bS=class extends st{constructor(e){super(e),this._animation=null,this._destinationViewState=new wK,this.updateFunction=null,this.easing=Kle.ease,this.viewpoint=new $s({targetGeometry:new ft,scale:0,rotation:0}),this._updateTask=CE({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new $tt(e.view)}destroy(){this._updateTask=rn(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;aa(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*Stt,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??PSe.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?Kle[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,Ttt(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new vq({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==vq.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,a=o>0?s/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Ttt(t,e,i,r){if((e==null?void 0:e.duration)!=null)return!0;const{time:n,isLinear:s}=t,o=(e==null?void 0:e.speedFactor)||1;if(n>((e==null?void 0:e.maxDuration)??PSe.maxDuration/o))return!1;if(s){const l=En(),c=xs(...r.toScreen(l,...i.center)),h=xs(...i.toScreen(l,...r.center)),m=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1],y=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(n>xtt/o&&!m&&!y)return!1}return!0}u([p()],bS.prototype,"easing",void 0),u([p()],bS.prototype,"view",void 0),u([p()],bS.prototype,"viewpoint",void 0),bS=u([U("esri.views.2d.AnimationManager")],bS);const Ett=bS;function Rr(){return Promise.all([$e(()=>import("./webglDeps-Dzf_VUVT.js"),__vite__mapDeps([167,168,169,170])),$e(()=>import("./mapViewDeps-BuSgj_b4.js"),__vite__mapDeps([171,172,72,173,168,169,136,113,68,174,69,39,175,67,87,176,120,119,75,15,11,16,70,76,177,73,74,118,167,170,178,82,179,180,181,132,129,111,55,66,13,8,19,182,183,71,184,79,44,64,185,186,187,188,128,189,190]))])}const QI=()=>Rr().then(()=>$e(()=>import("./TileLayerView2D-DEqS4YVW.js"),__vite__mapDeps([191,68,176,175,67,39,168,87,120,119,75,15,11,16,118,178,173,169,136,113,174,69,82,179,180,55,72,172,70,76,73,74,132,129,111,184,66,13,8,19,79,44,64,192,193,188,194,195,186,187,196,197,198,199]))),x0=()=>Rr().then(()=>$e(()=>import("./FeatureLayerView2D-FpJbDpCl.js").then(t=>t.F),__vite__mapDeps([200,15,11,16,201,202,203,13,8,22,194,176,187,68,67,39,169,168,188,175,87,120,119,75,172,72,173,136,113,174,69,70,76,82,177,204,81,199,196]))),Qle={"base-dynamic":()=>Rr().then(()=>$e(()=>import("./BaseDynamicLayerView2D-Cl-3X_5G.js"),__vite__mapDeps([205,206,175,67,39,168,87,176,120,119,75,15,11,16,193,173,169,136,113,72,194,207,196]))),"base-tile":QI,"bing-maps":QI,catalog:()=>Rr().then(()=>$e(()=>import("./CatalogLayerView2D-BbGghhRp.js"),__vite__mapDeps([208,194,176]))),"catalog-dynamic-group":()=>Rr().then(()=>$e(()=>import("./CatalogDynamicGroupLayerView2D-C5ubLdw5.js"),__vite__mapDeps([209,194,176]))),"catalog-footprint":()=>Rr().then(()=>$e(()=>import("./CatalogFootprintLayerView2D-BqvOHS_5.js"),__vite__mapDeps([210,200,15,11,16,201,202,203,13,8,22,194,176,187,68,67,39,169,168,188,175,87,120,119,75,172,72,173,136,113,174,69,70,76,82,177,204,81,199,196]))),csv:x0,"geo-rss":()=>Rr().then(()=>$e(()=>import("./GeoRSSLayerView2D-CbMaT_MU.js"),__vite__mapDeps([211,194,176,185,186,187,68,67,39,169,168,188,175,87,120,119,75,15,11,16,172,72,173,136,113,174,69,70,76,184,66,13,8,19,79,44,64]))),feature:x0,geojson:x0,parquet:x0,graphics:()=>Rr().then(()=>$e(()=>import("./GraphicsLayerView2D-pI13lkft.js"),__vite__mapDeps([212,194,176,185,186,187,68,67,39,169,168,188,175,87,120,119,75,15,11,16,172,72,173,136,113,174,69,70,76,184,66,13,8,19,79,44,64]))),group:()=>Rr().then(()=>$e(()=>import("./GroupLayerView2D-D2U-7Lcb.js"),__vite__mapDeps([213,194,176]))),imagery:()=>Rr().then(()=>$e(()=>import("./ImageryLayerView2D-6lD-V_xa.js"),__vite__mapDeps([214,215,168,39,95,175,67,87,176,120,119,75,15,11,16,194,184,66,68,69,13,8,19,172,72,173,169,136,113,174,70,76,79,44,64,195,186,187,188,206,193,207,99,201,199,196]))),"imagery-tile":()=>Rr().then(()=>$e(()=>import("./ImageryTileLayerView2D-BCrN4E4F.js"),__vite__mapDeps([216,217,215,168,39,95,175,67,87,176,120,119,75,15,11,16,194,98,218,188,173,169,136,113,72,174,69,219,99,201,199,196]))),kml:()=>Rr().then(()=>$e(()=>import("./KMLLayerView2D-jOSi_zFO.js"),__vite__mapDeps([220,221,193,176,173,168,169,136,113,72,206,175,67,39,87,120,119,75,15,11,16,194,185,186,187,68,188,172,174,69,70,76,184,66,13,8,19,79,44,64,99,181,167,170,132,129,111,179,218]))),"knowledge-graph":()=>Rr().then(()=>$e(()=>import("./KnowledgeGraphLayerView2D-CbA6kZvD.js"),__vite__mapDeps([222,194,176]))),"link-chart":()=>Rr().then(()=>$e(()=>import("./KnowledgeGraphLayerView2D-CbA6kZvD.js"),__vite__mapDeps([222,194,176]))),"knowledge-graph-sublayer":x0,"map-image":()=>Rr().then(()=>$e(()=>import("./MapImageLayerView2D-CGySNop6.js"),__vite__mapDeps([223,206,175,67,39,168,87,176,120,119,75,15,11,16,193,173,169,136,113,72,194,184,66,68,69,13,8,19,172,174,70,76,79,44,64,195,186,187,188,207,201,196,197,198,199]))),"map-notes":()=>Rr().then(()=>$e(()=>import("./MapNotesLayerView2D-CYyJPDmd.js"),__vite__mapDeps([224,194,176,185,186,187,68,67,39,169,168,188,175,87,120,119,75,15,11,16,172,72,173,136,113,174,69,70,76,184,66,13,8,19,79,44,64]))),media:()=>Rr().then(()=>$e(()=>import("./MediaLayerView2D-BwVmmDWi.js"),__vite__mapDeps([225,226,79,44,68,176,175,67,39,168,87,120,119,75,15,11,16,118,178,173,169,136,113,174,69,82,179,180,55,72,172,70,76,73,74,132,129,111,184,66,13,8,19,64,182,227,183,194]))),"ogc-feature":()=>Rr().then(()=>$e(()=>import("./OGCFeatureLayerView2D-BQZlJf7y.js"),__vite__mapDeps([228,200,15,11,16,201,202,203,13,8,22,194,176,187,68,67,39,169,168,188,175,87,120,119,75,172,72,173,136,113,174,69,70,76,82,177,204,81,199,196]))),"open-street-map":QI,"oriented-imagery":x0,route:()=>Rr().then(()=>$e(()=>import("./RouteLayerView2D-DeG9U6ad.js"),__vite__mapDeps([229,230,194,176,185,186,187,68,67,39,169,168,188,175,87,120,119,75,15,11,16,172,72,173,136,113,174,69,70,76,184,66,13,8,19,79,44,64]))),stream:()=>Rr().then(()=>$e(()=>import("./StreamLayerView2D-BsjYgZUF.js"),__vite__mapDeps([231,200,15,11,16,201,202,203,13,8,22,194,176,187,68,67,39,169,168,188,175,87,120,119,75,172,72,173,136,113,174,69,70,76,82,177,204,81,199,196]))),"subtype-group":()=>Rr().then(()=>$e(()=>import("./SubtypeGroupLayerView2D-CqE6T3rQ.js"),__vite__mapDeps([232,200,15,11,16,201,202,203,13,8,22,194,176,187,68,67,39,169,168,188,175,87,120,119,75,172,72,173,136,113,174,69,70,76,82,177,204,81,199,196]))),tile:QI,"vector-tile":()=>Rr().then(()=>$e(()=>import("./VectorTileLayerView2D-C7GJrVK7.js"),__vite__mapDeps([233,118,55,180,119,120,168,175,67,39,87,176,75,15,11,16,188,25,121,122,194,196]))),video:()=>Rr().then(()=>$e(()=>import("./VideoLayerView2D-CaEennUb.js"),__vite__mapDeps([234,235,236,227,87,175,67,39,168,176,120,119,75,15,11,16,172,72,173,169,136,113,68,174,69,70,76,183,194,185,186,187,188,184,66,13,8,19,79,44,64]))),wcs:()=>Rr().then(()=>$e(()=>import("./ImageryTileLayerView2D-BCrN4E4F.js"),__vite__mapDeps([216,217,215,168,39,95,175,67,87,176,120,119,75,15,11,16,194,98,218,188,173,169,136,113,72,174,69,219,99,201,199,196]))),"web-tile":QI,wfs:x0,wms:()=>Rr().then(()=>$e(()=>import("./WMSLayerView2D-Bbr57QQ7.js"),__vite__mapDeps([237,206,175,67,39,168,87,176,120,119,75,15,11,16,193,173,169,136,113,72,194,207,196,238,201]))),wmts:()=>Rr().then(()=>$e(()=>import("./WMTSLayerView2D-5X3CAQFg.js"),__vite__mapDeps([239,192,193,176,173,168,169,136,113,72,175,67,39,87,120,119,75,15,11,16,188,194,196]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Ctt(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Q(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const ece={hasLayerViewModule:t=>Qle[t.type]!=null,importLayerView:t=>{const e=Qle[t.type];if(e==null)throw Ctt(t);return e(t)}};var uc;let $C=(uc=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new uc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new uc(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new uc(e,i,r,n),new uc(e,i,r+1,n),new uc(e,i+1,r,n),new uc(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},uc.pool=new _1(uc,null,null,25,50),uc);function Nx(t,e){return[t,e]}function S0(t,e,i){return t[0]=e,t[1]=i,t}function Itt(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const qu=new $C("0/0/0/0");let Mtt=class RSe{static create(e,i,r=null){const n=ja(e.spatialReference),s=i.origin||Nx(e.origin.x,e.origin.y),o=Nx(e.size[0]*i.resolution,e.size[1]*i.resolution),a=Nx(-1/0,-1/0),l=Nx(1/0,1/0),c=Nx(1/0,1/0);r!=null&&(S0(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),S0(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),S0(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:m}=i;let y,v,w,x;return!r&&h&&m&&(S0(a,h[0],m[0]),S0(l,h[1],m[1]),S0(c,h[1]-h[0]+1,m[1]-m[0]+1)),e.isWrappable?(y=Nx(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),c[1]),v=!0,w=n.origin,x=n.valid):(y=c,v=!1),new RSe(i.level,i.resolution,i.scale,s,a,l,c,o,y,v,w,x)}constructor(e,i,r,n,s,o,a,l,c,h,m,y){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=h,this._spatialReferenceOrigin=m,this._spatialReferenceValid=y}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){qu.set(i);const n=r?qu.col:this.denormalizeCol(qu.col,qu.world),s=qu.row;return Itt(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){qu.set(i);const n=r?qu.col:this.denormalizeCol(qu.col,qu.world);return Array.isArray(e)?S0(e,this.getXForColumn(n),this.getYForRow(qu.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(qu.row)),e}};var M_;let SK=(M_=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const o=e.getWorldForColumn(s);yield new $C(e.level,i,e.normalizeCol(s),o)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(i,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}},M_.pool=new _1(M_),M_),JB=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const qr=new $C("0/0/0/0");let ktt=class DSe{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,l=o-n,c=l!==0?a/l:0,h=(Math.ceil(n)-n)*c,m=(Math.floor(n)-n)*c;return new DSe(r,Math.floor(n),Math.ceil(o),c,a<0?h:m,a<0?m:h,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Ul=[[0,0],[0,0],[0,0],[0,0]],Att=1e-6;let Ott=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>Mtt.create(e,a,i));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){qr.set(i);const n=this._infoByLevel[qr.level];return n?n.getTileBounds(e,qr,r):e}getTileCoords(e,i,r=!1){qr.set(i);const n=this._infoByLevel[qr.level];return n?n.getTileCoords(e,qr,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=SK.pool.acquire(s),a=this._wrap;let l,c,h,m=1/0,y=-1/0;const v=o.spans;Ul[0][0]=Ul[0][1]=Ul[1][1]=Ul[3][0]=-i,Ul[1][0]=Ul[2][0]=e.size[0]+i,Ul[2][1]=Ul[3][1]=e.size[1]+i;for(const C of Ul)e.toMap(C,C),C[0]=s.getColumnForX(C[0]),C[1]=s.getRowForY(C[1]);const w=[];let x=3;for(let C=0;C<4;C++){if(Ul[C][1]===Ul[x][1]){x=C;continue}const k=ktt.create(Ul[C],Ul[x]);m=Math.min(k.ymin,m),y=Math.max(k.ymax,y),w[k.ymin]===void 0&&(w[k.ymin]=[]),w[k.ymin].push(k),x=C}if(m==null||y==null||y-m>100)return null;let S=[];for(l=m;l<y;){w[l]!=null&&(S=S.concat(w[l])),c=1/0,h=-1/0;for(let C=S.length-1;C>=0;C--){const k=S[C];c=Math.min(c,k.getLeftCol()),h=Math.max(h,k.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const C=Math.floor(h/s.worldSize[0]);for(let k=Math.floor(c/s.worldSize[0]);k<=C;k++)v.push(new JB(l,Math.max(s.getFirstColumnForWorld(k),c),Math.min(s.getLastColumnForWorld(k),h)))}else v.push(new JB(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),v.push(new JB(l,c,h)));l+=1;for(let C=S.length-1;C>=0;C--){const k=S[C];k.ymax>=l?k.incrRow():S.splice(C,1)}}return o}getTileParentId(e){qr.set(e);const i=this._infoByLevel[qr.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(qr,this._lodInfos[r],qr),qr.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){qr.set(i);const r=this._infoByLevel[qr.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(qr,n,qr);const o=n.denormalizeCol(qr.col,qr.world);for(const a of e.spans)if(a.row===qr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((x,S)=>(x[0]=Math.min(x[0],S.row),x[1]=Math.max(x[1],S.row),x[2]=Math.min(x[2],S.colFrom),x[3]=Math.max(x[3],S.colTo),x),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(qr.col,qr.world),m=n.getColumnForX(r.getXForColumn(h)),y=n.getRowForY(r.getYForRow(qr.row)),v=n.getColumnForX(r.getXForColumn(h+1))-1,w=n.getRowForY(r.getYForRow(qr.row+1))-1;return!(m>c||v<l||y>a||w<o)}const s=n.denormalizeCol(qr.col,qr.world);return e.spans.some(o=>o.row===qr.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=ja(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+Att)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},Ptt=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Ltt=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new __,this._controllers=new __,this._processingItems=new __,this._pausedSignal=Q_(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new kA(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=rn(this._schedule),this._task=rn(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=no(i,()=>n.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),a(),c.reject(Gi())},a=()=>{l.remove(),s!=null&&s.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=OY(n.signal,o),c=Mo();return this._deferreds.set(e,c),this._controllers.set(e,n),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var i;const e=this._queue.popLast();return e&&((i=this._deferreds.get(e))==null||i.reject(Gi()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=zO(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new Ptt(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}nf(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){}};const tce=[0,0];let sm=class extends st{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new Ltt({concurrency:e,scheduler:r,priority:n,process:(s,o)=>{const a=this._keyToItem.get(s);return i(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=xr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=x1(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(tve(a,l=>i.has(l))){const l=Math.abs(o-r);l<s&&(n=a,s=l)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(tce,a);const l=P4(tce,n);l<o&&(o=l,s=a)}return s}};u([p({constructOnly:!0})],sm.prototype,"concurrency",void 0),u([p({constructOnly:!0})],sm.prototype,"priority",void 0),u([p({constructOnly:!0})],sm.prototype,"process",void 0),u([p({constructOnly:!0})],sm.prototype,"scheduler",void 0),u([p()],sm.prototype,"state",void 0),u([p({constructOnly:!0})],sm.prototype,"tileInfoView",void 0),sm=u([U("esri.views.2d.tiling.TileQueue")],sm);const RAt=sm;let Rtt=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];ice(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],h=[0,0],m=[0,0];for(s.sort((y,v)=>(h[0]=a.x+l*(y.col+.5),h[1]=a.y-c*(y.row+.5),m[0]=a.x+l*(v.col+.5),m[1]=a.y-c*(v.row+.5),uF(h,i)-uF(m,i)));s.length>0;){const y=s.pop();if(this._removeTile(y.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),ice(this._tilePerId,e)}};function ice(t,e){t.delete(e)}const $0=new $C(0,0,0,0),Nf=new Map,eM=[],ZB=[];let NAt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Rtt(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var C,k;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:m,lodInfo:y}=h,{level:v}=y;this.tiles.length=0,r.forEach(A=>A.visible=!0);let w=0,x=0;if(m.length>0)for(const{row:A,colFrom:R,colTo:D}of m)for(let B=R;B<=D;B++){w++;const z=$0.set(v,A,y.normalizeCol(B),y.getWorldForColumn(B)).id;let W=r.get(z);if(W)W.isReady?(Nf.set(z,W),x++):c||this._addParentTile(z,Nf);else{if((C=this._tileCache)!=null&&C.has(z)){if(W=this._tileCache.pop(z),this.tileIndex.set(z,W),W.isReady){Nf.set(z,W),x++;continue}}else W=this.acquireTile($0),this.tileIndex.set(z,W);c||this._addParentTile(z,Nf)}}const S=x===w;for(const[A,R]of r){if(Nf.has(A))continue;$0.set(A);const D=this.tileInfoView.intersects(h,$0),B=this.cachePolicy==="purge"?$0.level!==v:$0.level>v;!D||!c&&S?!B&&D||eM.push(R):R.isReady?B&&this.cachePolicy==="purge"&&this._hasReadyAncestor($0,v)?eM.push(R):ZB.push(R):B&&eM.push(R)}for(const A of ZB)A.isReady&&Nf.set(A.key.id,A);for(const A of eM)this._tileCache?this._tileCache.add(A):this.releaseTile(A),r.delete(A.key.id);for(const A of Nf.values())this.tiles.push(A);for(const A of r.values())Nf.has(A.key.id)||(A.visible=!1);(k=this._tileCache)==null||k.prune(v,s,o),SK.pool.release(h),ZB.length=0,eM.length=0,Nf.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())e(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=Br();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=Br();if(this.tileInfoView.getTileBounds(s,n.key,!0),kVe(s,r))return!0}return!1}},Dtt=class{constructor(e,i={}){this.events=new pa,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=w1([oy(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||ve("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ve("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${o}, ${a}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,o=n[0],a=n[1],l=Math.round(o*s),c=Math.round(a*s);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,o]=i.center,[a,l]=e.toScreen([0,0],s,o),[c,h]=e.toScreen([0,0],r,n),m=c-a,y=h-l,v=e.scale/i.scale,w=i.rotation-e.rotation,x=Np();return oP(x),aP(x,x,[v,v]),bb(x,x,Ep(w)),Dp(x,x,[m,y]),x}};function Ntt(t,e,i,r,n){NSe(t,e,i||0,r||t.length-1,n||ztt)}function NSe(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);NSe(t,e,Math.max(i,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),n)}var h=t[e],m=i,y=r;for(tM(t,i,e),n(t[r],h)>0&&tM(t,i,r);m<y;){for(tM(t,m,y),m++,y--;n(t[m],h)<0;)m++;for(;n(t[y],h)>0;)y--}n(t[i],h)===0?tM(t,i,y):tM(t,++y,r),y<=e&&(i=y+1),e<=y&&(r=y-1)}}function tM(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function ztt(t,e){return t<e?-1:t>e?1:0}function TF(t,e){if(!(this instanceof TF))return new TF(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function Ftt(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function zx(t,e){y2(t,0,t.children.length,e,t)}function y2(t,e,i,r,n){n||(n=wS(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],g2(n,t.leaf?r(s):s);return n}function g2(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function rce(t,e){return t.minX-e.minX}function nce(t,e){return t.minY-e.minY}function YB(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function CR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Utt(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function jtt(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function XB(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function IR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function wS(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sce(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,Ntt(t,s,e,i,n),o.push(e,s,s,i))}TF.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!IR(t,e))return i;for(var n,s,o,a,l=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],IR(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):XB(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!IR(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],IR(t,o=e.leaf?i(s):s)){if(e.leaf||XB(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=wS([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=c.pop(),s=!0),o.leaf&&(n=Ftt(t,o.children,e))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!XB(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:rce,compareMinY:nce,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return zx(n=wS(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=wS([])).leaf=!1,n.height=r;var a,l,c,h,m=Math.ceil(s/o),y=m*Math.ceil(Math.sqrt(o));for(sce(t,e,i,y,this.compareMinX),a=e;a<=i;a+=y)for(sce(t,a,c=Math.min(a+y-1,i),m,this.compareMinY),l=a;l<=c;l+=m)h=Math.min(l+m-1,c),n.children.push(this._build(t,l,h,r-1));return zx(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,l,c,h,m;r.push(e),!e.leaf&&r.length-1!==i;){for(h=m=1/0,n=0,s=e.children.length;n<s;n++)l=YB(o=e.children[n]),(c=Utt(t,o)-l)<m?(m=c,h=l<h?l:h,a=o):c===m&&l<h&&(h=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),g2(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=wS(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,zx(i,this.toBBox),zx(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=wS([t,e]),this.data.height=t.height+1,this.data.leaf=!1,zx(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,l,c,h;for(l=c=1/0,r=e;r<=i-e;r++)o=jtt(n=y2(t,0,r,this.toBBox),s=y2(t,r,i,this.toBBox)),a=YB(n)+YB(s),o<l?(l=o,h=r,c=a<c?a:c):o===l&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:rce,n=t.leaf?this.compareMinY:nce;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=y2(t,0,e,o),l=y2(t,i-e,i,o),c=CR(a)+CR(l);for(n=e;n<i-e;n++)s=t.children[n],g2(a,t.leaf?o(s):s),c+=CR(a);for(n=i-e-1;n>=e;n--)s=t.children[n],g2(l,t.leaf?o(s):s),c+=CR(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)g2(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():zx(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Vtt(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let oce=class zSe{constructor(e,i){this.key=new $C(0,0,0,0),this.bounds=Br(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return CVe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return Vtt(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=Ra.acquire();for(let r=0;r<e.length;r++)i[r]=new zSe(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return ov.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const T0={added:[],removed:[]},KB=new Set,Btt=new $C(0,0,0,0);function Gtt(t,e){const i=ja(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[Br([t[0],t[1],n,t[3]]),Br([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[Br([r,t[1],t[2],t[3]]),Br([n-(r-t[0]),t[1],n,t[3]])]:null}let Htt=class extends pa{constructor(e){super(),this._tiles=new Map,this._index=TF(9,ve("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||t4(e)===0||i4(e)===0)return[];const i=Gtt(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new oce(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const h=Btt.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(KB.add(h),!this.has(h)){const m=new oce(this.tileScheme,h);this._tiles.set(h,m),this._index.insert(m),this.tiles.push(m),T0.added.push(m)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];KB.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),T0.removed.push(a))}(T0.added.length||T0.removed.length)&&this.emit("update",T0),SK.pool.release(i),KB.clear(),T0.added.length=0,T0.removed.length=0}};const jAt=1e-30,T$=512,MR=16777216,VAt=8,FSe=29,USe=24,BAt=4,GAt=0,HAt=0,qAt=0,WAt=1,JAt=2,ZAt=3,YAt=4,XAt=5,KAt=6,QAt=12,eOt=13,tOt=5,qtt=6,iOt=5,rOt=6;var ace;(function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2",t[t.LocalTimeOrigin=7]="LocalTimeOrigin"})(ace||(ace={}));const jSe=6,Wtt=1<<jSe,nOt=Wtt<<1,sOt=1.05,oOt=3,aOt=1,Jtt=3,Ztt=3,lOt=5,cOt=6,uOt=1.15,Ytt=4,dOt=128,Xtt=256,hOt=Xtt-2*Ytt,pOt=2,fOt=128,VSe=1,mOt=10,Ktt=1024,yOt=128,gOt=4,vOt=1,bOt=1<<20,wOt=.75,_Ot=10,xOt=.75,SOt=256,Qtt=32,eit=512,$Ot=0,TOt=1,tit=1,EOt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],COt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],iM=256;var lce,cce,uce,dce,hce,Tq,pce,fce,Mh,Eq,Pk,dn,EF,pu,Cq,cs,$t,CF,VE,S_,Iq,BA,mce,yce,gce;(function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"})(lce||(lce={})),function(t){t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(cce||(cce={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(uce||(uce={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(dce||(dce={})),function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(hce||(hce={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(Tq||(Tq={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(pce||(pce={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(fce||(fce={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"}(Mh||(Mh={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(Eq||(Eq={})),function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(Pk||(Pk={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(dn||(dn={})),function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(EF||(EF={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(pu||(pu={})),function(t){t[t.MIN_LOD=33082]="MIN_LOD",t[t.MAX_LOD=33083]="MAX_LOD",t[t.BASE_LEVEL=33084]="BASE_LEVEL",t[t.MAX_LEVEL=33085]="MAX_LEVEL",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE"}(Cq||(Cq={})),function(t){t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(cs||(cs={})),function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"}($t||($t={})),function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(CF||(CF={})),function(t){t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(VE||(VE={})),function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F"}(S_||(S_={})),function(t){t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8"}(Iq||(Iq={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(BA||(BA={})),function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(mce||(mce={})),function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(yce||(yce={})),function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(gce||(gce={}));const IOt=33984;var IF,vce;(function(t){t[t.Texture=0]="Texture",t[t.TileTexture=1]="TileTexture",t[t.BufferObject=2]="BufferObject",t[t.VertexArrayObject=3]="VertexArrayObject",t[t.Shader=4]="Shader",t[t.Program=5]="Program",t[t.FramebufferObject=6]="FramebufferObject",t[t.Renderbuffer=7]="Renderbuffer",t[t.TransformFeedback=8]="TransformFeedback",t[t.Sync=9]="Sync",t[t.UNCOUNTED=10]="UNCOUNTED",t[t.LinesOfCode=10]="LinesOfCode",t[t.Uniform=11]="Uniform",t[t.COUNT=12]="COUNT"})(IF||(IF={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"}(vce||(vce={}));const MOt=36064,kOt=36065,AOt=36066,OOt=33306,POt=36096,LOt=36128;var Qs,bce,wce,_ce,xce,Sce,$ce,av,Tce;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Qs||(Qs={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(bce||(bce={})),function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"}(wce||(wce={})),function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"}(_ce||(_ce={})),function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"}(xce||(xce={})),function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(Sce||(Sce={})),function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}($ce||($ce={})),function(t){t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL"}(av||(av={})),function(t){t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR"}(Tce||(Tce={}));const iit=()=>Ce.getLogger("esri.views.webgl.checkWebGLError");function rit(t){switch(t){case av.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case av.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case av.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case av.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case av.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case av.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const BSe=!!ve("enable-feature:webgl-debug");function GSe(){return BSe}function ROt(){return BSe}function E0(t,e=GSe()){if(e){const i=t.getError();if(i){const r=rit(i),n=new Error().stack;iit().error(new Q("webgl-error","WebGL error occurred",{message:r,stack:n}))}}}var MF;(function(t){t[t.TextureDescriptor=0]="TextureDescriptor",t[t.Texture=1]="Texture",t[t.Renderbuffer=2]="Renderbuffer"})(MF||(MF={}));function nit(t){switch(t){case Mh.BYTE:case Mh.UNSIGNED_BYTE:return 1;case Mh.SHORT:case Mh.UNSIGNED_SHORT:case Mh.HALF_FLOAT:return 2;case Mh.FLOAT:case Mh.INT:case Mh.UNSIGNED_INT:return 4}}function sit(t){const e=t.gl;switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case e.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case e.INVALID_OPERATION:return"The specified command is not allowed for the current state";case e.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case e.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case e.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function DOt(t,e,i,r,n=0){var o;const s=t.gl;t.bindBuffer(i);for(const a of r){const l=e.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const c=n*a.stride;if(a.count<=4)s.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+c),s.enableVertexAttribArray(l),a.divisor>0&&t.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let h=0;h<3;h++)s.vertexAttribPointer(l+h,3,a.type,a.normalized,a.stride,a.offset+12*h+c),s.enableVertexAttribArray(l+h),a.divisor>0&&t.gl.vertexAttribDivisor(l+h,a.divisor);else if(a.count===16)for(let h=0;h<4;h++)s.vertexAttribPointer(l+h,4,a.type,a.normalized,a.stride,a.offset+16*h+c),s.enableVertexAttribArray(l+h),a.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(l+h,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(GSe()){const h=sit(t),m=nit(a.type),y=a.offset,v=Math.round(m/y)!==m/y?`. Offset not a multiple of stride. DataType requires ${m} bytes, but descriptor has an offset of ${y}`:"";h&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${c}${v}:`,h,a)}}}function NOt(t,e,i,r){var s,o,a;const n=t.gl;t.bindBuffer(i);for(const l of r){const c=e.get(l.name);if(l.count<=4)n.disableVertexAttribArray(c),l.divisor&&l.divisor>0&&((s=t.gl)==null||s.vertexAttribDivisor(c,0));else if(l.count===9)for(let h=0;h<3;h++)n.disableVertexAttribArray(c+h),l.divisor&&l.divisor>0&&((o=t.gl)==null||o.vertexAttribDivisor(c+h,0));else if(l.count===16)for(let h=0;h<4;h++)n.disableVertexAttribArray(c+h),l.divisor&&l.divisor>0&&((a=t.gl)==null||a.vertexAttribDivisor(c+h,0));else console.error("Unsupported vertex attribute element count: "+l.count)}t.unbindBuffer(Tq.ARRAY_BUFFER)}function oit(t){switch(t){case cs.ALPHA:case cs.LUMINANCE:case cs.RED:case cs.RED_INTEGER:case $t.R8:case $t.R8I:case $t.R8UI:case $t.R8_SNORM:case Iq.STENCIL_INDEX8:return 1;case cs.LUMINANCE_ALPHA:case cs.RG:case cs.RG_INTEGER:case $t.RGBA4:case $t.R16F:case $t.R16I:case $t.R16UI:case $t.RG8:case $t.RG8I:case $t.RG8UI:case $t.RG8_SNORM:case $t.RGB565:case $t.RGB5_A1:case S_.DEPTH_COMPONENT16:return 2;case cs.RGB:case cs.RGB_INTEGER:case $t.RGB8:case $t.RGB8I:case $t.RGB8UI:case $t.RGB8_SNORM:case $t.SRGB8:case S_.DEPTH_COMPONENT24:return 3;case cs.RGBA:case cs.RGBA_INTEGER:case $t.RGBA8:case $t.R32F:case $t.R11F_G11F_B10F:case $t.RG16F:case $t.R32I:case $t.R32UI:case $t.RG16I:case $t.RG16UI:case $t.RGBA8I:case $t.RGBA8UI:case $t.RGBA8_SNORM:case $t.SRGB8_ALPHA8:case $t.RGB9_E5:case $t.RGB10_A2UI:case $t.RGB10_A2:case S_.DEPTH_COMPONENT32F:case VE.DEPTH24_STENCIL8:return 4;case VE.DEPTH32F_STENCIL8:return 5;case $t.RGB16F:case $t.RGB16I:case $t.RGB16UI:return 6;case $t.RG32F:case $t.RG32I:case $t.RG32UI:case $t.RGBA16F:case $t.RGBA16I:case $t.RGBA16UI:return 8;case $t.RGB32F:case $t.RGB32I:case $t.RGB32UI:return 12;case $t.RGBA32F:case $t.RGBA32I:case $t.RGBA32UI:return 16;case Qs.COMPRESSED_RGB_S3TC_DXT1_EXT:case Qs.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Qs.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Qs.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Qs.COMPRESSED_R11_EAC:case Qs.COMPRESSED_SIGNED_R11_EAC:case Qs.COMPRESSED_RGB8_ETC2:case Qs.COMPRESSED_SRGB8_ETC2:case Qs.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Qs.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Qs.COMPRESSED_RG11_EAC:case Qs.COMPRESSED_SIGNED_RG11_EAC:case Qs.COMPRESSED_RGBA8_ETC2_EAC:case Qs.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let HSe=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=MF.TextureDescriptor,this.target=pu.TEXTURE_2D,this.pixelFormat=cs.RGBA,this.dataType=BA.UNSIGNED_BYTE,this.samplingMode=dn.LINEAR,this.wrapMode=EF.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function ait(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:oit(t.internalFormat))*(t.target===pu.TEXTURE_CUBE_MAP?6:1))}const rM=()=>Ce.getLogger("esri/views/webgl/textureUtils");function nM(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&rM().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(qSe(n)||WSe(n))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&rM().error("Depth textures cannot have mipmaps"),s?a!==dn.LINEAR&&a!==dn.NEAREST&&rM().error("Depth textures cannot sample mipmaps"):(a!==dn.NEAREST&&rM().error("Depth textures without filtering must use NEAREST filtering"),o&&rM().error("Depth textures without filtering cannot use compare function"))}}function lit(t){return t in $t}function qSe(t){return t in S_}function WSe(t){return t in VE}function cit(t){return t!=null&&t in Qs}function _S(t){return t!=null&&"type"in t&&t.type==="compressed"}function uit(t){return t!=null&&"byteLength"in t}function Ece(t){return t!=null&&!_S(t)&&!uit(t)}function Fx(t){return t===pu.TEXTURE_3D||t===pu.TEXTURE_2D_ARRAY}function Cce(t,e,i,r=1){let n=Math.max(e,i);return t===pu.TEXTURE_3D&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function kR(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case BA.FLOAT:switch(t.pixelFormat){case cs.RGBA:return $t.RGBA32F;case cs.RGB:return $t.RGB32F;default:throw new Q("texture:unknown-format","Unable to derive format")}case BA.UNSIGNED_BYTE:switch(t.pixelFormat){case cs.RGBA:return $t.RGBA8;case cs.RGB:return $t.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===CF.DEPTH_STENCIL?VE.DEPTH24_STENCIL8:e===CF.DEPTH_COMPONENT?S_.DEPTH_COMPONENT24:e,t.internalFormat}function dit(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let hit=class JSe extends HSe{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case $t.R16F:case $t.R32F:case $t.R8_SNORM:case $t.R8:this.pixelFormat=cs.RED;break;case $t.R8I:case $t.R8UI:case $t.R16I:case $t.R16UI:case $t.R32I:case $t.R32UI:this.pixelFormat=cs.RED_INTEGER}}static validate(e,i){return new JSe(e,i)}};const pit=!!ve("esri-tests-disable-gpu-memory-measurements"),zf=()=>Ce.getLogger("esri/views/webgl/Texture");var gs;let fit=(gs=class{constructor(e,i=null,r=null){if(this.type=MF.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=hit.validate(e,i);if(!n)throw new Q("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===pu.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return pit?0:ait(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(IF.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new Q("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===pu.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!_S(e)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Qs&&(this._descriptor.internalFormat=void 0),this._setData(e),!_S(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,o,a=0){o||zf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||zf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=kR(l);const{context:c,pixelFormat:h,dataType:m,target:y,isImmutable:v}=l;if(v&&!this._wasImmutablyAllocated)throw new Q("texture:uninitialized","Cannot update immutable texture before allocation!");const w=c.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>l.width||r+s>l.height)&&zf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=c;a&&(n&&s||zf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),x.pixelStorei(x.UNPACK_SKIP_ROWS,a)),Ece(o)?x.texSubImage2D(y,e,i,r,n,s,h,m,o):_S(o)?x.compressedTexSubImage2D(y,e,i,r,n,s,l.internalFormat,o.levels[e]):x.texSubImage2D(y,e,i,r,n,s,h,m,o),a&&x.pixelStorei(x.UNPACK_SKIP_ROWS,0),c.bindTexture(w,gs.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,o,a,l){l||zf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||zf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=kR(c);const{context:h,pixelFormat:m,dataType:y,isImmutable:v,target:w}=c;if(v&&!this._wasImmutablyAllocated)throw new Q("texture:uninitialized","Cannot update immutable texture before allocation!");Fx(w)||zf().warn("Attempting to set 3D texture data on a non-3D texture");const x=h.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(gs.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>c.width||r+o>c.height||n+a>c.depth)&&zf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=h;if(_S(l))l=l.levels[e],S.compressedTexSubImage3D(w,e,i,r,n,s,o,a,c.internalFormat,l);else{const C=l;S.texSubImage3D(w,e,i,r,n,s,o,a,m,y,C)}h.bindTexture(x,gs.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Q("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,nM(e)}e.samplingMode===dn.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=dn.LINEAR_MIPMAP_NEAREST):e.samplingMode===dn.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=dn.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(gs.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,gs.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new Q("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,nM(e)}e.samplingMode===dn.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=dn.LINEAR):e.samplingMode===dn.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=dn.NEAREST)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,nM(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?dn.LINEAR:dn.NEAREST),nM(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=TE(this._compressionAbortController)}_setData(e,i){var l;const r=this._descriptor,n=(l=r.context)==null?void 0:l.gl;if(!n)return;E0(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(IF.Texture,this)),nM(r);const s=r.context.bindTexture(this,gs.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(gs.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),E0(n);const o=i??r.target,a=Fx(o);if(Ece(e))this._setDataFromTexImageSource(e,o);else{const{width:c,height:h,depth:m}=r;if(c==null||h==null)throw new Q("texture:missing-size","Width and height must be specified!");if(a&&m==null)throw new Q("texture:missing-depth","Depth must be specified!");if(r.internalFormat=kR(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,c,h,m),_S(e)){if(!cit(r.internalFormat))throw new Q("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,c,h,m,e),E0(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),E0(n),r.context.bindTexture(s,gs.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=pu.TEXTURE_CUBE_MAP_POSITIVE_X;i<=pu.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=kR(n);const s=Fx(i),{width:o,height:a,depth:l}=dit(e);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=a),s&&n.depth,s&&(n.depth=l),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,o,a,l),this._texImage(i,0,n.internalFormat,o,a,l,e),E0(r),n.hasMipmap&&(this.generateMipmap(),E0(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:o,depth:a}=n,l=e.levels,c=Cce(r,s,o,a),h=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(n.target,Cq.MAX_LEVEL,h),this._forEachMipmapLevel((m,y,v,w)=>{const x=l[Math.min(m,l.length-1)];this._compressedTexImage(r,m,i,y,v,w,x)},h)}_texStorage(e,i,r,n,s,o){const{gl:a}=this._descriptor.context;if(!lit(i)&&!qSe(i)&&!WSe(i))throw new Q("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?Cce(e,n,s,o):1;if(Fx(e)){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,n,s,o)}else a.texStorage2D(e,l,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,c=Fx(e),{isImmutable:h,pixelFormat:m,dataType:y}=this._descriptor;if(h){if(a!=null){const v=a;if(c){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,n,s,o,m,y,v)}else l.texSubImage2D(e,i,0,0,n,s,m,y,v)}}else{const v=a;if(c){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,n,s,o,0,m,y,v)}else l.texImage2D(e,i,r,n,s,0,m,y,v)}}_compressedTexImage(e,i,r,n,s,o,a){const l=this._descriptor.context.gl,c=Fx(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,n,s,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,n,s,r,a)}else if(c){if(o==null)throw new Q("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,n,s,o,0,a)}else l.compressedTexImage2D(e,i,r,n,s,0,a)}async _compressOnWorker(e){var v,w,x,S;const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=(v=this._descriptor.compress)==null?void 0:v.compressionTracker,c=(w=this._descriptor.compress)==null?void 0:w.compressionCallback,{compressedTextureETC:h,compressedTextureS3TC:m}=n.capabilities;if(!((x=gs.compressionWorkerHandle)!=null&&x.isCompressible(e,this._descriptor))||!h&&!m)return;this.abortCompression();const y=new AbortController;this._compressionAbortController=y,l==null||l.increment();try{let C;e instanceof Uint8Array?C=e.buffer:(C=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),sr(y));const k={data:C,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===cs.RGBA?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!h,hasS3TC:!!m},A=await gs.compressionWorkerHandle.invoke(k,y.signal,"low");if(sr(y),A.compressedTexture&&this.hasWebGLTextureObject){const R=this.usedMemory;this._descriptor.internalFormat=A.internalFormat,this._setData(A.compressedTexture),c==null||c(R-this.usedMemory)}}catch(C){ds(C)||zf().error("Texture compression failed!")}finally{l==null||l.decrement(),(S=this._compressionAbortController)!=null&&S.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===pu.TEXTURE_3D;if(r==null||n==null||l&&s==null)throw new Q("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,n,s),o&&(r!==1||n!==1||l&&s!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),n=Math.max(1,n>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const e=this._descriptor,i=(s=e.context)==null?void 0:s.gl;let r=e.samplingMode,n=e.samplingMode;r===dn.LINEAR_MIPMAP_NEAREST||r===dn.LINEAR_MIPMAP_LINEAR?(r=dn.LINEAR,e.hasMipmap||(n=dn.LINEAR)):r!==dn.NEAREST_MIPMAP_NEAREST&&r!==dn.NEAREST_MIPMAP_LINEAR||(r=dn.NEAREST,e.hasMipmap||(n=dn.NEAREST)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var r;const e=this._descriptor,i=(r=e.context)==null?void 0:r.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){var n;const e=this._descriptor,i=(n=e.context)==null?void 0:n.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),E0(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},gs.TEXTURE_UNIT_FOR_UPDATES=0,gs.compressionWorkerHandle=null,gs);const QB=()=>Ce.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function mit(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const yit=[0,0,0,0];let ZSe=class{constructor(){this.type="single",this._highlightOptions=new Bv,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*iM),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,qtt),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var e;(e=this._shadeTex)==null||e.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<jSe)-1,activeGradient:this}]}_updateGradientTexture(e){const i=git(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,mit(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*tit,c=Math.abs(n)>l?Math.round(10*(Math.abs(n)-l))/10:0,h=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let m;c&&!h?QB().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&h?QB().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&h&&QB().error("The highlight is "+Math.max(c,h)+"px away from the edge of the feature; consider reducing some width values.");const y=[void 0,void 0,void 0,void 0];function v(x,S,C){y[0]=(1-C)*x[0]+C*S[0],y[1]=(1-C)*x[1]+C*S[1],y[2]=(1-C)*x[2]+C*S[2],y[3]=(1-C)*x[3]+C*S[3]}const{_texelData:w}=this;for(let x=0;x<iM;++x)m=n+x/(iM-1)*(a-n),m<n?(y[0]=0,y[1]=0,y[2]=0,y[3]=0):m<s?v(yit,r.outlineColor,(m-n)/(s-n)):m<o?[y[0],y[1],y[2],y[3]]=r.outlineColor:m<a?v(r.outlineColor,r.fillColor,(m-o)/(a-o)):[y[0],y[1],y[2],y[3]]=r.fillColor,w[4*x]=255*y[0],w[4*x+1]=255*y[1],w[4*x+2]=255*y[2],w[4*x+3]=255*y[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=a,!this._shadeTex){const x=new HSe(iM,1);x.wrapMode=EF.CLAMP_TO_EDGE,this._shadeTex=new fit(e,x)}this._shadeTex.updateData(0,0,0,iM,1,this._texelData)}};function git(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let vit=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new ZSe),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};var Ice,Mce,kce,Ace,Oce,Pce,kF,Lce,Rce;(function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"})(Ice||(Ice={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(Mce||(Mce={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(kce||(kce={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(Ace||(Ace={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(Oce||(Oce={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"}(Pce||(Pce={})),function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"}(kF||(kF={})),function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(Lce||(Lce={})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"}(Rce||(Rce={}));const YSe={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:Eq.EQUAL,mask:255,op:{fail:Pk.KEEP,zFail:Pk.KEEP,zPass:Pk.REPLACE}}}},bit={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},wit={...YSe,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function _it({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),o=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:Ha(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function XSe(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="highlight"}function KSe(t){var e;return((e=t.passOptions)==null?void 0:e.type)==="hittest"}function xit(t){if(!KSe(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function Sit(t){if(!XSe(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function jOt(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function VOt(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:_it(t,e),hittestRequest:xit(t),highlight:Sit(t)}}function BOt(t){return{inside:t.selection===kF.InsideEffect,outside:t.selection===kF.OutsideEffect}}function $it(t){return KSe(t)?bit:XSe(t)&&t.passOptions.stepType==="clear"?wit:YSe}function GOt(t){const{row:e,col:i}=t.key,r=i*T$,n=e*T$;return{tileOffsetFromLocalOrigin:[r%MR,n%MR],maxIntsToLocalOrigin:[Math.floor(r/MR),Math.floor(n/MR)]}}const Tit=new Et({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function HOt(t){return Tit.toJSON(t)}function qOt(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function Eit(t,e){return e==null?(t==null||t.destroy(),null):((t==null?void 0:t.type)==="single"&&Array.isArray(e)&&(t.destroy(),t=null),(t==null?void 0:t.type)!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new vit:new ZSe),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function WOt(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:o}=n.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(h),i(h),c<l.length-1){let y=0;for(let v=c+1;v<l.length;v++)y|=l[v].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:y,stepType:"clear",highlightAll:e}})}const m={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState($it(t)),n.updatePipelineState(t.context),o.draw(m),o.unbind()}t.passOptions=a}const AR=t=>parseFloat(t)/100;function Cit(t,e,i){const r=typeof t.left=="string"?AR(t.left)*e:t.left,n=typeof t.right=="string"?AR(t.right)*e:t.right,s=typeof t.top=="string"?AR(t.top)*i:t.top,o=typeof t.bottom=="string"?AR(t.bottom)*i:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:a,ymax:Math.max(i-o,s)}}function QSe(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=Cit(e,n,s),{x:h,y:m}=i;return h>o&&h<a&&m>l&&m<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||yX(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?mX(e.geometry,r):HO(e.geometry,r))}}function Iit(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function Mit(t,e){if(!t.highlights){if(!e)return;t.highlights=new Ze([new Bv])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function kit(t,e,i){const r=xxe(e)?_xe(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;i!=null&&i.include?Nce(i.include,Dce(t,y=>{n.add(y),e8(y,v=>s.add(v))},(y,v)=>{s.add(y),n.add(v)},y=>{a||(a=new Set),a.add(y)},y=>n.add(y),()=>o=!0)):(o=!0,n=new Set(t.allLayerViews),n.forEach(y=>{e8(y,v=>s.add(v))})),i!=null&&i.exclude&&Nce(i.exclude,Dce(t,y=>{n.delete(y),e8(y,v=>s.delete(v))},y=>s.delete(y),y=>{l||(l=new Set),l.add(y)}));const c=t.toMap(r),h=t.allLayerViews.filter(y=>!y.suspended&&n.has(y)&&y.clips.every(v=>QSe(t,v,r,c))).reverse();let m=[...o?t.graphicsView.hitTest(c).map(y=>({type:"graphic",graphic:y,layer:null,mapPoint:c})):[],...await Promise.all(h.map(y=>y.hitTest(c,r)).toArray())].filter(Mr).flat().filter(Mr);return m=m.filter(y=>{var v;return y.type!=="graphic"||((v=y.layer)==null?void 0:v.type)!=="subtype-group"||s.has(y.graphic.layer)}),a&&(m=m.filter(y=>!("graphic"in y)||!y.graphic||(a==null?void 0:a.has(Mq(y.graphic))))),l&&(m=m.filter(y=>!("graphic"in y)||!y.graphic||!(l!=null&&l.has(Mq(y.graphic))))),{screenPoint:r,results:m}}function Dce(t,e,i,r,n,s){return o=>{if(o instanceof _r){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&(n==null||n(a))}r(Mq(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function Nce(t,e){if(t)if(Iz(t))for(const i of t)if(Iz(i))for(const r of i)e(r);else e(i);else e(t)}function Mq(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function e8({layer:t},e){(t==null?void 0:t.type)==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}let sM=null,AF=!0;function Ait(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(AF)try{return new ImageData(t,e)}catch{AF=!1}return e$e(t,e,i)}function JOt(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(AF)try{return new ImageData(t,e,i)}catch{AF=!1}const n=e$e(e,i,r);return n.data.set(t,0),n}function Oit(){return sM||(sM=document.createElement("canvas"),sM.width=1,sM.height=1),sM}function e$e(t,e,i){return i||(i=Oit()),i.getContext("2d").createImageData(t,e)}async function Pit(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await Ot(i,{...e,responseType:"image"});return r}catch(r){throw ds(r)?r:new Q("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function Lit(t,e){const{arrayBuffer:i,mediaType:r}=await Rit(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await $e(()=>import("./gif-DxkPDc2n.js"),[]);if(s(i))return o(i,e)}if(n){const{isAnimatedPNG:s,parseApng:o}=await $e(()=>import("./apng-0Mklh4Jr.js"),__vite__mapDeps([240,7]));if(s(i))return o(i,e)}return Pit(new Blob([i],{type:r}),e)}async function Rit(t,e){var n;const i=pb(t);if(i!=null&&i.isBase64)return{arrayBuffer:Hve(i.data),mediaType:i.mediaType};const r=await Ot(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:((n=r.getHeader)==null?void 0:n.call(r,"Content-Type"))??""}}function t$e(t,e,i){const{ctx:r,canvas:n}=r$e(t,i),s=r.getImageData(0,0,t.width,t.height),o=s$e(n,e);return n$e(n),{dataUrl:o,data:s}}function i$e(t,e){const{ctx:i,canvas:r}=r$e(t,e),n=i.getImageData(0,0,t.width,t.height);return n$e(r),n}function r$e(t,e){const i=Dit();e.premultipliedAlpha&&Uit(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&Fit(r),{ctx:r,canvas:i}}function n$e(t){t.width=0,t.height=0}function Dit(){return t8==null&&(t8=document.createElement("canvas")),t8}let t8=null;function s$e(t,e){const i=jit[e.format],r=e.quality/100;return t.toDataURL(i,r)}function o$e(t,e){const i=zit(t),r=Bit[i];return{format:i,quality:da(e??r,0,100)}}function a$e(t,e){return e/Math.max(t[0],t[1])}function Nit(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:l}=t,{width:c,height:h,data:m}=e,y=s/c,v=o/h,w=Math.ceil(y/2),x=Math.ceil(v/2),S=t.width;for(let C=0;C<h;C++)for(let k=0;k<c;k++){const A=4*(k+(a?h-C-1:C)*c);let R=0,D=0,B=0,z=0,W=0,Y=0;const ee=(C+.5)*v;for(let ge=Math.floor(C*v);ge<(C+1)*v;ge++){const fe=Math.abs(ee-(ge+.5))/x,ue=(k+.5)*y,ae=fe*fe;for(let Se=Math.floor(k*y);Se<(k+1)*y;Se++){const le=Math.abs(ue-(Se+.5))/w,be=Math.sqrt(ae+le*le);if(be>=1)continue;let Oe=2*be*be*be-3*be*be+1;const Be=4*(r+Se+(n+ge)*S);Y+=Oe*l[Be+3],D+=Oe,!i&&l[Be+3]<255&&(Oe=Oe*l[Be+3]/255),B+=Oe*l[Be],z+=Oe*l[Be+1],W+=Oe*l[Be+2],R+=Oe}}m[A]=B/R,m[A+1]=z/R,m[A+2]=W/R,m[A+3]=Y/D}return e}function zit(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Vit}}function Fit(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Uit(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const jit={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},zce=98,Vit="png",Bit={png:100,jpg:zce,jpeg:zce},ZOt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Ait,encode:t$e,encodeData:i$e,getFormatAndQuality:o$e,getMaximumResolutionScale:a$e,resampleHermite:Nit,toDataUrl:s$e},Symbol.toStringTag,{value:"Module"})),l$e={flipY:!0,premultipliedAlpha:!0};async function Git(t,e){const i=await c$e(t,e),{format:r,quality:n}=o$e(e==null?void 0:e.format,e==null?void 0:e.quality);return t$e(i,{format:r,quality:n},l$e)}async function Hit(t,e){const i=await c$e(t,e);return i$e(i,l$e)}function c$e(t,e){const i=Jit(e||{},Wit(t.stage,t.size),t.size,t.padding),r=qit(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function qit(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function Wit(t,e){return Math.min(4,a$e(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function Jit(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(n){const h=s/o,m=n[0]/n[1];if(m>h){const y=c.width/m;c={x:c.x,y:Math.round(c.y+(c.height-y)/2),width:c.width,height:Math.round(y)}}else{const y=c.height*m;c={x:Math.round(c.x+(c.width-y)/2),y:c.y,width:Math.round(y),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,e),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const Zit=t=>t.includes("Brush");let u$e=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Zit(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},Yit=class{constructor(e){this.getUnmaskedRenderer=e}};function Xit(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new Yit(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let Fce;function Kit(){return Fce??(Fce=trt()),Fce}let Qit=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function ert(t){var n;if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=((n=Xit(i))==null?void 0:n.getUnmaskedRenderer())??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function trt(){const t=new Qit,e=ert(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function irt(t){const e=Kit();return e.available?t==="3d"&&e.majorPerformanceCaveat?new Q("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new Q("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Q("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Q("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function rrt(t){return t&&"nodeType"in t}function nrt(t){return t&&typeof t.render=="function"}const Uce={component:"esri-component"};let tw=class extends st{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(Uce.component),i&&i.classList.remove(Uce.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||rrt(e)?(this._set("widget",null),NX(e)):(nrt(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};u([p()],tw.prototype,"id",null),u([p()],tw.prototype,"node",null),u([_i("node")],tw.prototype,"castNode",null),u([p({readOnly:!0})],tw.prototype,"widget",void 0),tw=u([U("esri.views.ui.Component")],tw);const AD=tw,d$e="calcite-mode-",h$e="dark",srt="light",ort=/\W/g,art="--esri-calcite-mode-name";function p$e(){return getComputedStyle(document.body).getPropertyValue(art).replaceAll(ort,"").toLowerCase()}function f$e(){return p$e()===h$e}function m$e(){const t=p$e();switch(t){case h$e:case srt:return`${d$e}${t}`;default:return null}}function lrt(t){const e=m$e();e&&(crt(t),t.classList.add(e))}function crt(t){Array.from(t.classList).forEach(e=>{e.startsWith(d$e)&&t.classList.remove(e)})}const F4=new Map;function y$e(){F4.clear()}function urt(t){return F4.get(t)}function drt(t,e){F4.set(t,e)}function i8(t){F4.delete(t)}function E$(...t){const e=Ra.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return Ra.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;y$e();for(const s of r)(n=t.get(s.target))==null||n(s)}),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),Mi(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let o=null;return w1([Le(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=i(a,n,s))},Oa),Mi(()=>o==null?void 0:o.remove())])}})();function U4(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function ePt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function tPt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function hrt(t){return t==="Enter"||t===" "}async function X$(t,e){await pUe(DO(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const prt={left:0,top:0,bottom:0,right:0},g$e={bottom:30,top:15,right:15,left:15},Ff="esri-ui",Ka={ui:Ff,corner:`${Ff}-corner`,innerContainer:`${Ff}-inner-container`,manualContainer:`${Ff}-manual-container`,cornerContainer:`${Ff}-corner-container`,topLeft:`${Ff}-top-left`,topRight:`${Ff}-top-right`,bottomLeft:`${Ff}-bottom-left`,bottomRight:`${Ff}-bottom-right`};function frt(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function OR(t){return t===0?"0":`${t}px`}function r8(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function n8(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let vh=class extends pa.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Tl(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&n8(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&n8(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Le(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,gi),Le(()=>this.padding,this._applyUIPadding,gi),Le(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},gi),WO(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Ka.ui),lrt(e),this._attachContainers(e)),i&&(i.classList.remove(Ka.ui),n8(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...g$e,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=r8(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const o=this._components.indexOf(r),a=r.node.parentNode;return a==null||a.removeChild(r.node),this._componentMap.delete(r),(n=r.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(l=>{const c=this._componentMap.get(l);c&&c.position===s.position&&c.index>s.index&&c.index--}),this._components.splice(o,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal});for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const n=r8(e)||r8(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof AD||(e=new AD({node:e}));const{widget:o}=e;o!=null&&o instanceof st&&o.addHandles(Mi(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._components.some(a=>{var l,c;return((l=this._componentMap.get(a))==null?void 0:l.position)===i&&((c=this._componentMap.get(a))==null?void 0:c.index)===r})&&this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===i&&l.index>=r&&l.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof AD?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??prt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ka.innerContainer,Ka.cornerContainer);const i=document.createElement("div");i.classList.add(Ka.innerContainer,Ka.manualContainer);const r=document.createElement("div");r.classList.add(Ka.topLeft,Ka.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Ka.topRight,Ka.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Ka.bottomLeft,Ka.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(Ka.bottomRight,Ka.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=U4();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){var l,c;const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(frt(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const h of a){const m=this._findByNode(h);if(m&&n<(((l=this._componentMap.get(m))==null?void 0:l.index)??0))return void((c=h.parentNode)==null?void 0:c.insertBefore(r.node,h))}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:OR(e.top),left:OR(e.left),right:OR(e.right),bottom:OR(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(Mr).filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}_getNumComponentsAtPosition(e){const i=this._positionNameToContainerLookup[e];return(i==null?void 0:i.children.length)??0}};u([p()],vh.prototype,"_locale",void 0),u([p()],vh.prototype,"container",null),u([p()],vh.prototype,"height",null),u([p({value:g$e})],vh.prototype,"padding",null),u([_i("padding")],vh.prototype,"castPadding",null),u([p()],vh.prototype,"view",void 0),u([p()],vh.prototype,"width",null),vh=u([U("esri.views.ui.UI")],vh);const mrt=vh,yrt={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},grt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},vrt=t=>({...grt,...t}),brt=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},wrt=(t,e)=>t.find(e),jce=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const o=r!=null&&r.children?wrt(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==e.length-1||(r=o)}),r},_rt=t=>{let e;const i={...yrt,...t},r=vrt(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],h=(y,v,w)=>{var C;let x;r.eventHandlerInterceptor=(k,A,R,D)=>function(B){let z;n("domEvent",B);const W=brt(B.currentTarget,x.domNode),Y=W.some(ge=>{var fe;return customElements.get((fe=ge==null?void 0:ge.tagName)==null?void 0:fe.toLowerCase())});if(B.eventPhase===Event.CAPTURING_PHASE||!Y)W.reverse(),z=jce(x.getLastRender(),W);else{const ge=B.composedPath(),fe=ge.slice(ge.indexOf(B.currentTarget),ge.indexOf(x.domNode)).reverse();z=jce(x.getLastRender(),fe,!0)}let ee;return z&&(ee=i.handleInterceptedEvent(e,z,this,B)),n("domEventProcessed",B),ee},(C=i.postProcessProjectionOptions)==null||C.call(i,r);const S=w();x=y(v,S,r),r.eventHandlerInterceptor=void 0,l.push(x),c.push(w),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(x,S)};let m=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let y=0;y<l.length;y++){const v=c[y]();n("rendered",void 0);try{l[y].update(v)}catch(w){console.error(w)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(m=i.modifyDoRenderImplementation(m,l,c)),e={renderNow:m,scheduleRender:()=>{s||a||(s=requestAnimationFrame(m))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(y,v)=>{h(Av.append,y,v)},insertBefore:(y,v)=>{h(Av.insertBefore,y,v)},merge:(y,v)=>{h(Av.merge,y,v)},replace:(y,v)=>{h(Av.replace,y,v)},detach:y=>{for(let v=0;v<c.length;v++)if(c[v]===y)return c.splice(v,1),l.splice(v,1)[0];throw new Error("renderFunction was not found")}},e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */let v$e=!1;const xrt=t=>{v$e=!0,aLe(t)};let b$e;function Srt(){v$e||xrt(na(zr(b$e)))}function Ty(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}b$e="components/assets";const w$e=Symbol("widget"),_$e=Symbol("widget-test-data"),$rt=[],Trt={},OF=new WeakMap;function x$e(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=x$e(t,i[n]);else i=$rt;const r=e.vnodeSelector;if(PF(r)){const n=e.properties||Trt,s=n.key||r,o={key:s,afterCreate:Ert,afterUpdate:Crt,afterRemoved:S$e,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function Ert(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,OF.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(Mi(()=>S$e(t))),queueMicrotask(()=>{o[_$e].projector.renderNow()})}function Crt(t,e,i,{widgetProperties:r}){var s;const n=OF.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function S$e(t){var i;const e=OF.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),OF.delete(t))}function PF(t){return typeof t=="function"&&t[w$e]}const Vce=new Set;function Irt(t){Vce.add(t),t.finally(()=>Vce.delete(t))}function Mrt(t){return Mi()}var Bce;let krt=0;function $$e(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?$$e(t[r],e[r]):t[r]=e[r]);return t}const Art=_rt({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),h=v=>a==null?void 0:a.call(s,v);s.addEventListener(c,h,l);const m=()=>s.removeEventListener(c,h,l),y=o.afterRemoved;o.afterRemoved=v=>{y==null||y(v),m()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(y$e(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let s8=!1;var k_;let Zs=(k_=class extends gu.EsriPromiseMixin(pa.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=Art,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=NO(async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const c=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:m})=>{if(this.destroyed)return;let y=await u4(h);this.uiStrings&&Object.keys(this.uiStrings)&&(y=$$e(ce(y),this.uiStrings)),this[m]=y}));if(this.destroyed)return;for(const h of c)h.status==="rejected"&&Ce.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),this.addHandles(Mrt()),Srt();const r="esri-widget-uid-"+xC(),n=this.render.bind(this);this._trackingTarget=new PO(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var m,y;if(!this._readyForTrueRender||this.destroyed)return null;const l=n()??s(),c=l.properties??(l.properties={});if(c.key??(c.key=r),PF(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(m=c.styles).display??(m.display="");let h=0;return(y=l.children)==null||y.forEach(v=>{var w;PF(v.vnodeSelector)||(v.properties??(v.properties={}),(w=v.properties).key??(w.key=`${this.id}--${h++}`))}),x$e(this,l)};this.render=()=>{if(s8)return o();let l=urt(this)??null;if(l)return l;this._trackingTarget.clear(),s8=!0;try{l=jp(this._trackingTarget,o)}catch(c){throw Ce.getLogger(this).error(c),c}finally{s8=!1}return l&&drt(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Irt(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(sse):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(xr(this._trackingTarget),xr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,i8(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return NX(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+krt++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Bce=w$e,_$e)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(i8(this),this._projector.scheduleRender())}classes(...e){return E$.apply(this,e)}renderNow(){i8(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Le(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&GU(r)&&this.addHandles(this._delegatedEventNames.map(s=>oy(r,s,o=>{this.emit(s,o)})),"delegated-events")},Oa)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(sse),this.scheduleRender()};this.addHandles([WO(e),Le(()=>this.uiStrings,e)]),this.addHandles(hs(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}},k_[Bce]=!0,k_.vnodeSelector="div",k_);u([p()],Zs.prototype,"_readyForTrueRender",void 0),u([p({value:null})],Zs.prototype,"container",null),u([_i("container")],Zs.prototype,"castContainer",null),u([p()],Zs.prototype,"icon",null),u([p()],Zs.prototype,"id",null),u([p()],Zs.prototype,"label",null),u([p()],Zs.prototype,"renderable",null),u([p()],Zs.prototype,"uiStrings",void 0),u([p()],Zs.prototype,"viewModel",void 0),u([p({value:!0})],Zs.prototype,"visible",null),u([p()],Zs.prototype,"key",void 0),u([p()],Zs.prototype,"children",void 0),u([p()],Zs.prototype,"afterCreate",void 0),u([p()],Zs.prototype,"afterUpdate",void 0),u([p()],Zs.prototype,"afterRemoved",void 0),Zs=u([U("esri.widgets.Widget")],Zs);const Yn=Zs;var Gce,Hce,qce,Wce,Jce,Zce,Yce,Xce,Kce,Qce,eue,tue,iue,rue,nue;(function(t){t.U8="U8",t.I8="I8",t.U16="U16",t.I16="I16",t.U32="U32",t.I32="I32",t.F32="F32",t.F64="F64",t.Utf8String="Utf8String",t.NotSet="NotSet"})(Gce||(Gce={})),function(t){t.Png="Png",t.Jpeg="Jpeg",t.Dds="Dds",t.Raw="Raw",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.Basis="Basis",t.Etc1="Etc1",t.Etc2="Etc2",t.Astc="Astc",t.Pvrtc="Pvrtc",t.NotSet="NotSet"}(Hce||(Hce={})),function(t){t.Position="Position",t.Normal="Normal",t.TexCoord="TexCoord",t.Color="Color",t.Tangent="Tangent",t.FeatureIndex="FeatureIndex",t.UvRegion="UvRegion",t.FeatureVariable="FeatureVariable",t.NotSet="NotSet"}(qce||(qce={})),function(t){t.Opaque="Opaque",t.Mask="Mask",t.Blend="Blend"}(Wce||(Wce={})),function(t){t.None="None",t.Mask="Mask",t.Alpha="Alpha",t.PreMultAlpha="PreMultAlpha",t.NotSet="NotSet"}(Jce||(Jce={})),function(t){t.Points="Points",t.Lines="Lines",t.LineStrip="LineStrip",t.Triangles="Triangles",t.TriangleStrip="TriangleStrip",t.NotSet="NotSet"}(Zce||(Zce={})),function(t){t.None="None",t.WrapXBit="WrapXBit",t.WrapYBit="WrapYBit",t.WrapXy="WrapXy",t.NotSet="NotSet"}(Yce||(Yce={})),function(t){t.Linear="Linear",t.Nearest="Nearest",t.NotSet="NotSet"}(Xce||(Xce={})),function(t){t.Linear="Linear",t.Nearest="Nearest",t.NearestMipmapNearest="NearestMipmapNearest",t.LinearMipmapNearest="LinearMipmapNearest",t.NearestMipmapLinear="NearestMipmapLinear",t.LinearMipmapLinear="LinearMipmapLinear",t.NotSet="NotSet"}(Kce||(Kce={})),function(t){t.FeatureId="FeatureId",t.GlobalUid="GlobalUid",t.UnspecifiedDateTime="UnspecifiedDateTime",t.EcmaIso8601DateTime="EcmaIso8601DateTime",t.EcmaIso8601DateOnly="EcmaIso8601DateOnly",t.TimeOnly="TimeOnly",t.TimeStamp="TimeStamp",t.ColorRgb="ColorRgb",t.ColorRgba="ColorRgba",t.Unrecognized="Unrecognized",t.NotSet="NotSet"}(Qce||(Qce={})),function(t){t.Texture="Texture",t.VertexAtrb="VertexAtrb",t.Implicit="Implicit",t.NotSet="NotSet"}(eue||(eue={})),function(t){t.Front="Front",t.Back="Back",t.None="None",t.NotSet="NotSet"}(tue||(tue={})),function(t){t.Pbr="Pbr",t.Unlit="Unlit"}(iue||(iue={})),function(t){t.Rgb8="Rgb8",t.Rgba8="Rgba8",t.R8="R8",t.Bgr8="Bgr8",t.Bgra8="Bgra8",t.Rg8="Rg8",t.Ga8="Ga8",t.Etc1="Etc1",t.Etc2="Etc2",t.Dxt1="Dxt1",t.Dxt5="Dxt5",t.Bc7="Bc7",t.NotSet="NotSet"}(rue||(rue={})),function(t){t[t.Succeeded=0]="Succeeded",t[t.Failed=1]="Failed",t[t.MissingInputs=2]="MissingInputs"}(nue||(nue={}));const Ort=new Map;function Prt(t){return Ort.get(t)}function sue(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function Lrt(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function oM(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function Rrt(t){return t.type==="bing-maps"}const Uf=[];let xS=class extends st{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ze,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&(this.addHandles(r.map(s=>Le(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([ua(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),hs(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;if(Uf.length=0,!e||!i)return void this._clear();i.forEach(n=>{var a,l;if(n.suspended||!((a=n.layer)!=null&&a.attributionVisible))return;const s=n.layer;if(sue(s,"user"))return void oM(Uf,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const c=this._fetchedAttributionData.get(n);return void(c?oM(Uf,n,this._getDynamicAttribution(c,e,s)):sue(s)&&oM(Uf,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(l=s.portalItem)==null?void 0:l.accessInformation:void 0;oM(Uf,n,o||s.copyright)});const r=i.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const n=Prt(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)oM(Uf,r,s[o])}}Lrt(this.items,Uf)&&(this.items.removeAll(),this.items.addMany(Uf)),Uf.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await f4(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,Rrt(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),m=l.zoomMax-(i&&l.zoomMax?1:0),y=new jt({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:et.WGS84}),v={extent:Rp(y),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let w=h;w<=m;w++)n[w]??(n[w]=[]),n[w].push(v)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var h;const{extent:n,scale:s}=i;let o=((h=r.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],l=XU(n.center.clone().normalize(),et.WebMercator),c=new Set;return a?a.filter(m=>{const y=m.id,v=!c.has(y)&&l&&m.extent&&HO(m.extent,l);return v&&c.add(y),v}).sort((m,y)=>y.score-m.score||m.objectId-y.objectId).map(m=>m.attribution).join(", "):""}};u([p({readOnly:!0,type:Ze})],xS.prototype,"items",void 0),u([p({readOnly:!0})],xS.prototype,"state",null),u([p()],xS.prototype,"view",void 0),xS=u([U("esri.widgets.Attribution.AttributionViewModel")],xS);const T$e=xS,Ss={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function Drt(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:zrt(t[e])}}}function Nrt(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function zrt(t){return function(e,...i){Nrt(e)?hrt(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Il(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var Frt=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},E$e=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?E$e(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=Frt(n)),e.push(n))}},Urt=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return E$e(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function K(t,e,...i){return typeof t!="function"||PF(t)?Urt(t,e??null,...i):t(e,...i)}function nPt(...t){return t}const Ux="esri-attribution",jx={base:Ux,poweredBy:`${Ux}__powered-by`,sources:`${Ux}__sources`,open:`${Ux}--open`,sourcesOpen:`${Ux}__sources--open`,link:`${Ux}__link`};let $a=class extends Yn{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new T$e}initialize(){this.addHandles(ua(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[jx.open]:this._isOpen};return K("div",{bind:this,class:this.classes(jx.base,Ss.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return K("div",{class:jx.poweredBy},"Powered by"," ",K("a",{class:jx.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[jx.sourcesOpen]:e,[Ss.interactive]:i};return K("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(jx.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([p()],$a.prototype,"_isOpen",void 0),u([p()],$a.prototype,"_isInteractive",null),u([p()],$a.prototype,"_attributionTextOverflowed",void 0),u([p()],$a.prototype,"_prevSourceNodeHeight",void 0),u([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],$a.prototype,"attributionText",null),u([p()],$a.prototype,"icon",null),u([p()],$a.prototype,"itemDelimiter",void 0),u([p()],$a.prototype,"label",null),u([p(),Il("esri/widgets/Attribution/t9n/Attribution")],$a.prototype,"messages",void 0),u([p()],$a.prototype,"view",null),u([p({type:T$e})],$a.prototype,"viewModel",void 0),u([Drt()],$a.prototype,"_toggleState",null),$a=u([U("esri.widgets.Attribution")],$a);const jrt=$a;function Vrt(){const t=ve("mapview-essential-goto-duration");return t==null?t:t}function Brt(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}function Grt(t,e,i){return t.goTo(e,i)}const $K=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return RO(n),this.goToOverride?this.goToOverride(n,r):Grt(n,r.target,r.options)}};return u([p()],i.prototype,"goToOverride",void 0),u([p()],i.prototype,"view",void 0),i=u([U("esri.widgets.support.GoTo")],i),i};let iw=class extends $K(st){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(gi)}destroy(){this.view=null}get canShowNorth(){return Brt(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var e,i;(e=this.view)!=null&&e.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Vrt()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?Le(()=>e==null?void 0:e.rotation,this._updateForRotation,gi):Le(()=>e==null?void 0:e.camera,this._updateForCamera,gi))}_watchForView(e){this.addHandles(Le(()=>this.view,this._updateRotationWatcher,e))}};u([p({readOnly:!0})],iw.prototype,"canShowNorth",null),u([p({readOnly:!0})],iw.prototype,"orientation",void 0),u([p({readOnly:!0})],iw.prototype,"state",null),u([p()],iw.prototype,"view",void 0),iw=u([U("esri.widgets.Compass.CompassViewModel")],iw);const C$e=iw,oue="esri-compass",aue={base:oue,iconContainer:`${oue}__icon-container`};let om=class extends Yn{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new C$e,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return Ty({button:()=>$e(()=>Promise.resolve().then(()=>OO),void 0),icon:()=>$e(()=>Promise.resolve().then(()=>qZ),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return K("div",{class:this.classes(aue.base,Ss.widget)},K("calcite-button",{class:Ss.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},K("div",{"aria-hidden":"true",class:aue.iconContainer,title:r.reset},K("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};u([p()],om.prototype,"goToOverride",null),u([p()],om.prototype,"icon",null),u([p()],om.prototype,"label",null),u([p(),Il("esri/widgets/Compass/t9n/Compass")],om.prototype,"messages",void 0),u([p()],om.prototype,"view",null),u([p({type:C$e})],om.prototype,"viewModel",void 0),om=u([U("esri.widgets.Compass")],om);const Hrt=om,lue="esri-navigation-toggle",cue={base:lue,isLayoutHorizontal:`${lue}--horizontal`};let SS=class extends st{constructor(e){super(e),this._navigationMode="pan",this.view=null,e!=null&&e.isDefaultViewModel||T4e(Ce.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(hs(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,n;const e=(n=(r=this.view)==null?void 0:r.navigation)==null?void 0:n.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};u([p({readOnly:!0})],SS.prototype,"state",null),u([p()],SS.prototype,"_navigationMode",void 0),u([p()],SS.prototype,"view",void 0),SS=u([U("esri.widgets.NavigationToggle.NavigationToggleViewModel")],SS);const I$e=SS;let am=class extends Yn{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new I$e({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;X$(r),this.toggle()},e!=null&&e.isDefaultUI||$4e(Ce.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return Ty({button:()=>$e(()=>Promise.resolve().then(()=>OO),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n,s;const e=((n=this.viewModel)==null?void 0:n.state)==="disabled",i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",r=this.messages.toggle;return K("div",{class:this.classes(cue.base,Ss.widget,{[cue.isLayoutHorizontal]:this.layout==="horizontal"})},K("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:i?"outline-fill":"solid",class:Ss.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),K("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:i?"solid":"outline-fill",class:Ss.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};u([p()],am.prototype,"icon",null),u([p()],am.prototype,"label",null),u([p({value:"vertical"})],am.prototype,"layout",null),u([p(),Il("esri/widgets/NavigationToggle/t9n/NavigationToggle")],am.prototype,"messages",void 0),u([p()],am.prototype,"view",null),u([p({type:I$e})],am.prototype,"viewModel",void 0),am=u([U("esri.widgets.NavigationToggle")],am);const qrt=am;let rw=class extends st{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};u([p({readOnly:!0})],rw.prototype,"canZoomIn",null),u([p({readOnly:!0})],rw.prototype,"canZoomOut",null),u([p()],rw.prototype,"view",void 0),u([p()],rw.prototype,"_scale",null),rw=u([U("esri.widgets.Zoom.ZoomConditions2D")],rw);const Wrt=rw;let $S=class extends st{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([p({readOnly:!0})],$S.prototype,"canZoomIn",null),u([p({readOnly:!0})],$S.prototype,"canZoomOut",null),u([p()],$S.prototype,"view",void 0),$S=u([U("esri.widgets.Zoom.ZoomConditions3D")],$S);const Jrt=$S;let Gg=class extends st{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Wrt({view:e}):e.type==="3d"&&(this._zoomConditions=new Jrt({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():EE(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():EE(e.goTo({zoomFactor:.5})))}};u([p()],Gg.prototype,"_zoomConditions",void 0),u([p()],Gg.prototype,"canZoomIn",null),u([p()],Gg.prototype,"canZoomOut",null),u([p({readOnly:!0})],Gg.prototype,"state",null),u([p()],Gg.prototype,"view",null),Gg=u([U("esri.widgets.Zoom.ZoomViewModel")],Gg);const M$e=Gg,uue={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let lm=class extends Yn{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new M$e,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Ty({button:()=>$e(()=>Promise.resolve().then(()=>OO),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[uue.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return K("div",{class:this.classes(uue.base,Ss.widget,e)},K("calcite-button",{class:Ss.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),K("calcite-button",{class:Ss.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};u([p()],lm.prototype,"icon",null),u([p()],lm.prototype,"label",null),u([p({value:"vertical"})],lm.prototype,"layout",null),u([p(),Il("esri/widgets/Zoom/t9n/Zoom")],lm.prototype,"messages",void 0),u([p()],lm.prototype,"view",null),u([p({type:M$e})],lm.prototype,"viewModel",void 0),lm=u([U("esri.widgets.Zoom")],lm);const Zrt=lm;function Yrt(t){return(t==null?void 0:t.view)!==void 0}let OD=class extends mrt{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n==null?void 0:n.widget;Yrt(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Le(()=>this.components,this._componentsWatcher,gi),Le(()=>this.view,this._updateViewAwareWidgets,gi)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new AD({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new jrt({view:i});case"compass":return new Hrt({view:i});case"navigation-toggle":return new qrt({view:i,isDefaultUI:!0});case"zoom":return new Zrt({view:i})}}};u([p()],OD.prototype,"components",void 0),OD=u([U("esri.views.ui.DefaultUI")],OD);const k$e=OD;let PD=class extends k$e{constructor(e){super(e),this.components=["attribution","zoom"]}};u([p()],PD.prototype,"components",void 0),PD=u([U("esri.views.ui.2d.DefaultUI2D")],PD);const A$e=PD;let O$e=class kq{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Q(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new kq(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new Q((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new Q((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new kq(o,a,i)}},K$=class extends O$e{constructor(e,i){super(e,i,"webmap")}};function o8(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const P$e=new K$(2,34);var Aq;let LD=Aq=class extends ye{constructor(t){super(t),this.color=new Ye([0,0,0,1])}clone(){return new Aq(ce({color:this.color}))}};u([p({type:Ye,json:{write:!0}})],LD.prototype,"color",void 0),LD=Aq=u([U("esri.webmap.background.ColorBackground")],LD);const j4=LD;let L$e,R$e,D$e,N$e,z$e,F$e,U$e;async function Xrt(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([$e(()=>import("./webglDeps-Dzf_VUVT.js"),__vite__mapDeps([167,168,169,170])),$e(()=>import("./mapViewDeps-BuSgj_b4.js"),__vite__mapDeps([171,172,72,173,168,169,136,113,68,174,69,39,175,67,87,176,120,119,75,15,11,16,70,76,177,73,74,118,167,170,178,82,179,180,181,132,129,111,55,66,13,8,19,182,183,71,184,79,44,64,185,186,187,188,128,189,190]))]);R$e=t,D$e=e,N$e=i,z$e=r,F$e=n,U$e=s,L$e=o}var rE;let Si=(rE=class extends Jet($Qe(jHe(f7e(X9e(cXe))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Jh({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new O4({actionMap:new uK({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new Ze,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new u$e,this.type="2d",this.view2dType=null,this.ui=new A$e,this.test={takeScreenshot:async i=>Hit(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},KGe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=xr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Htt(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return Bwe(i.spatialReference,r)}get background(){return o8(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return Iit(this)}set highlightOptions(e){Mit(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,n,s,o;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0)||e);if(ve("esri-2d-log-updating")){const a=this.allLayerViews.reduce((l,c)=>({...l,[`${c.layer.id}(${c.layer.type})`]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(a)}
-> updatingMagnifier: ${e}
`)}return i}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new rr({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,i){return kit(this,e,i)}async takeScreenshot(e){return Git(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return o8(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return o8(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return ece.hasLayerViewModule(e)}importLayerView(e){return ece.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Ce.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var c;const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(h=>h.clips.every(m=>QSe(this,m,e,i))).reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let a=0,l=0;for(;a<r.results.length||l<n.length;){const h=r.results.at(a);if(h&&h.type!=="graphic"){++a;continue}const m=s.get((c=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:c.uid);if((!h||m)&&l<n.length&&n.at(l)!==m){const y=n.at(l);"fetchPopupFeaturesAtLocation"in y&&o.push({mapPoint:i,layerView:y}),++l}else h&&(o.push({graphic:h.graphic,layerView:m}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=irt(this.type);if(ve("safari")&&ve("safari")<9&&(e=new Q("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ve("safari")})),e!=null){Ce.getLogger(this).warn("#validate()",e.message);const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");throw s.innerHTML="https://esriurl.com/systemRequirements",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/systemRequirements",i.appendChild(r),i.appendChild(n),i.appendChild(s),this.surface.appendChild(i),e}}loadAsyncDependencies(){return Xrt()}_getDefaultViewpoint(){var S;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,c=((S=l==null?void 0:l.targetGeometry)==null?void 0:S.extent)??i,h=c==null?void 0:c.center,m=(l==null?void 0:l.rotation)??0,y=(l==null?void 0:l.scale)||c&&D4(c,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),v=a.center??h,w=a.rotation??m,x=a.scale??y;return v&&x?new $s({targetGeometry:v,scale:x,rotation:w}):null}_startup(){var l;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const i=new Dtt(this.surface),r=new L$e(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new F$e,this._magnifierView.magnifier=this.magnifier,this._gridView=new U$e;const n=new N$e({view:this});this._set("labelManager",n);const s=new Ett({view:this});this._set("animationManager",s);const o=new z$e({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",c=>this.fatalError=c.error),Le(()=>this.stationary,c=>r.stationary=c,Oa),Le(()=>this.background,c=>{r.backgroundColor=c==null?void 0:c.color,this._magnifierView.backgroundColor=c==null?void 0:c.color},Oa),Le(()=>this.magnifier,c=>this._magnifierView.magnifier=c,Oa),Le(()=>this.grid,c=>this._gridView.grid=c,Oa),Le(()=>this.renderingOptions,c=>r.renderingOptions=c,Oa),Le(()=>this.highlights.items.map(c=>({name:c.name,options:{fillColor:c.color,haloColor:c.haloColor,fillOpacity:c.fillOpacity,haloOpacity:c.haloOpacity,haloWidth:c.haloWidth,haloBlur:c.haloBlur}})),()=>{r.highlightGradient=Eit(r.highlightGradient,this.highlights.items)},Oa),Le(()=>this.state.id,()=>r.state=this.state,Oa)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(c=>c(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new Ott(os.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new R$e({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new D$e(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},rE.type="2d",rE);u([p({constructOnly:!0})],Si.prototype,"deactivatedWebGLExtensions",void 0),u([p({constructOnly:!0})],Si.prototype,"debugWebGLExtensions",void 0),u([p({readOnly:!0})],Si.prototype,"featuresTilingScheme",void 0),u([p({readOnly:!0})],Si.prototype,"graphicsTileStore",null),u([p()],Si.prototype,"graphicsView",void 0),u([p()],Si.prototype,"constraintsInfo",null),u([p()],Si.prototype,"initialExtentRequired",null),u([p()],Si.prototype,"labelManager",void 0),u([p({type:O4,nonNullable:!0})],Si.prototype,"navigation",void 0),u([p({constructOnly:!0})],Si.prototype,"renderCanvas",void 0),u([p()],Si.prototype,"renderingOptions",void 0),u([p({constructOnly:!0})],Si.prototype,"supersampleScreenshotsEnabled",void 0),u([p({readOnly:!0})],Si.prototype,"supportsGround",void 0),u([p()],Si.prototype,"defaultsFromMapSettings",null),u([p({readOnly:!0})],Si.prototype,"typeSpecificPreconditionsReady",null),u([p({type:j4})],Si.prototype,"background",null),u([p()],Si.prototype,"center",null),u([p({type:Ze})],Si.prototype,"floors",void 0),u([p()],Si.prototype,"grid",void 0),u([p({type:Bv})],Si.prototype,"highlightOptions",null),u([p()],Si.prototype,"map",void 0),u([p()],Si.prototype,"padding",null),u([p({readOnly:!0})],Si.prototype,"rendering",null),u([p({readOnly:!0})],Si.prototype,"resolution",null),u([p()],Si.prototype,"scale",null),u([p({constructOnly:!0})],Si.prototype,"spatialReferenceLocked",void 0),u([p({readOnly:!0})],Si.prototype,"tileInfo",null),u([p({type:u$e,readOnly:!0})],Si.prototype,"timeline",void 0),u([p({readOnly:!0})],Si.prototype,"type",void 0),u([p({readOnly:!0})],Si.prototype,"updating",null),u([p({readOnly:!0})],Si.prototype,"view2dType",void 0),u([p({readOnly:!0})],Si.prototype,"visibleArea",null),u([p()],Si.prototype,"zoom",null),u([p({readOnly:!0})],Si.prototype,"navigating",null),u([p(),_i(t=>t instanceof k$e?t:S1(A$e,t))],Si.prototype,"ui",void 0),Si=u([U("esri.views.View2D")],Si);const Krt=Si;let RD=class extends Krt{constructor(e){super(e),this.view2dType="map"}};u([p({readOnly:!0})],RD.prototype,"view2dType",void 0),RD=u([U("esri.views.MapView")],RD);const Qrt=RD;let ent=class j$e{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(xH),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new j$e,r=this._originStores[Bt.DEFAULTS];r&&r.forEach((n,s)=>{i.set(s,ce(n),Bt.DEFAULTS)});for(let n=Bt.SERVICE;n<xH;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{e&&e.has(a)||i.set(a,ce(o),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Bt.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=Bt.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||Bt.DEFAULTS}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const V$e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=Ga(this),s=n.store,o=new ent;n.store=o,Nve(n,s,o)}read(r,n){Fve(this,r,n)}getAtOrigin(r,n){const s=a8(this),o=Ym(n);if(typeof r=="string")return s.get(r,o);const a={};return r.forEach(l=>{a[l]=s.get(l,o)}),a}originOf(r){return $A(this.originIdOf(r))}originIdOf(r){return a8(this).originOf(r)}revert(r,n){const s=a8(this),o=Ym(n),a=Ga(this);let l;l=typeof r=="string"?r==="*"?s.keys(o):[r]:r,l.forEach(c=>{a.invalidate(c),s.revert(c,o),a.commit(c)})}};return i=u([U("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function a8(t){return Ga(t).store}let due=class extends V$e(st){};due=u([U("esri.core.ReadOnlyMultiOriginJSONSupport")],due);const tnt=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,n="user"){Ga(this).clearOrigin(r,Ym(n))}write(r,n){return Vve(this,r=r||{},n),r}setAtOrigin(r,n,s){Ga(this).setAtOrigin(r,n,Ym(s))}removeOrigin(r){const n=hue(this),s=Ym(r),o=n.keys(s);for(const a of o)n.originOf(a)===s&&n.set(a,n.get(a,s),Bt.USER)}updateOrigin(r,n){const s=hue(this),o=Ym(n),a=oa(this,r);for(let l=o+1;l<xH;++l)s.delete(r,l);s.set(r,a,o)}toJSON(r){return this.write({},r)}};return i=u([U("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function hue(t){return Ga(t).store}const V4=t=>{const e=tnt(V$e(t));let i=class extends e{constructor(...r){super(...r)}};return i=u([U("esri.core.MultiOriginJSONSupport")],i),i};let Oq=class extends V4(st){};Oq=u([U("esri.core.MultiOriginJSONSupport")],Oq);async function int(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return y$(t);const i=et.WGS84;return await DX(e,i),Cb(t,i)}function rnt(t,e){if(!TK(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function TK(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function wPt(t){return TK(t,EK.HOSTED_SERVICE)}function nnt(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function _Pt(t,e,i){i?rnt(t,e):nnt(t,e)}async function xPt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return int(i)}const EK={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function snt(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}let Hg=class extends ye{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([p({type:String,json:{write:{isRequired:!0}}})],Hg.prototype,"facilityIdField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],Hg.prototype,"layerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],Hg.prototype,"nameField",void 0),u([p({type:String,json:{write:!0}})],Hg.prototype,"siteIdField",void 0),u([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Hg.prototype,"sublayerId",void 0),Hg=u([U("esri.layers.support.FacilityLayerInfo")],Hg);const ont=Hg;let nd=class extends ye{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"facilityIdField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"layerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"levelIdField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"levelNumberField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"longNameField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"shortNameField",void 0),u([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],nd.prototype,"sublayerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nd.prototype,"verticalOrderField",void 0),nd=u([U("esri.layers.support.LevelLayerInfo")],nd);const ant=nd;let nw=class extends ye{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([p({type:String,json:{write:{isRequired:!0}}})],nw.prototype,"layerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nw.prototype,"nameField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],nw.prototype,"siteIdField",void 0),u([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],nw.prototype,"sublayerId",void 0),nw=u([U("esri.layers.support.SiteLayerInfo")],nw);const lnt=nw;let TS=class extends ye{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};u([p({type:ant,json:{write:{isRequired:!0}}})],TS.prototype,"levelLayer",void 0),u([p({type:ont,json:{write:{isRequired:!0}}})],TS.prototype,"facilityLayer",void 0),u([p({type:lnt,json:{write:!0}})],TS.prototype,"siteLayer",void 0),TS=u([U("esri.support.MapFloorInfo")],TS);const cnt=TS;var Cp;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(Cp||(Cp={}));var Pq;let ES=Pq=class extends ye{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Pq(ce({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};u([p({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],ES.prototype,"activeRange",void 0),u([p({type:[Number],json:{write:!0}})],ES.prototype,"currentRangeExtent",void 0),u([p({type:[Number],json:{write:!0}})],ES.prototype,"fullRangeExtent",void 0),ES=Pq=u([U("esri.webdoc.RangeInfo")],ES);const CK=ES;var Lq;let bh=Lq=class extends ye{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Lq(ce({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};u([p({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],bh.prototype,"enabled",void 0),u([p({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],bh.prototype,"longNames",void 0),u([p({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],bh.prototype,"minimized",void 0),u([p({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],bh.prototype,"pinnedLevels",void 0),u([p({type:String,json:{read:{source:"site"},write:{target:"site"}}})],bh.prototype,"site",void 0),u([p({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],bh.prototype,"facility",void 0),u([p({type:String,json:{read:{source:"level"},write:{target:"level"}}})],bh.prototype,"level",void 0),bh=Lq=u([U("esri.webdoc.widgets.FloorFilter")],bh);const unt=bh;var Rq;const PR=new Et({slider:"slider",picker:"picker"});let CS=Rq=class extends ye{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Rq({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};u([p({type:PR.apiValues,nonNullable:!0,json:{type:PR.jsonValues,default:null,read:{reader:PR.read},write:{isRequired:!0,writer:PR.write}}})],CS.prototype,"interactionMode",void 0),u([p({type:fi,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],CS.prototype,"numStops",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],CS.prototype,"stopInterval",void 0),CS=Rq=u([U("esri.webdoc.widgets.Range")],CS);const dnt=CS,IK=Wt()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Rd=class extends It.ClonableMixin(ye){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return m1e(this.value,this.unit,"milliseconds")}};u([at(IK,{nonNullable:!0})],Rd.prototype,"unit",void 0),u([p({type:Number,json:{write:!0},nonNullable:!0})],Rd.prototype,"value",void 0),Rd=u([U("esri.time.TimeInterval")],Rd);var Dq;let Is=Dq=class extends ye{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?Yi.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Wn(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new Yi({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Rd.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);Wn("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t!=null&&t.length&&Wn(i,t.map(r=>r.getTime()),e)}clone(){return new Dq(ce({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};u([p({type:Yi,json:{type:[[fi,uC]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Is.prototype,"currentTimeExtent",void 0),u([Ue("currentTimeExtent")],Is.prototype,"readCurrentTimeExtent",null),u([qe("currentTimeExtent")],Is.prototype,"writeCurrentTimeExtent",null),u([p({type:Yi,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Is.prototype,"fullTimeExtent",void 0),u([Ue("fullTimeExtent")],Is.prototype,"readFullTimeExtent",null),u([qe("fullTimeExtent")],Is.prototype,"writeFullTimeExtent",null),u([p({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Is.prototype,"loop",void 0),u([p({type:fi,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],Is.prototype,"numStops",void 0),u([p({type:[1,2],nonNullable:!0,json:{type:fi,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Is.prototype,"numThumbs",void 0),u([p({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Is.prototype,"stopDelay",void 0),u([p({type:Rd,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:IK.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],Is.prototype,"stopInterval",void 0),u([Ue("stopInterval")],Is.prototype,"readStopInterval",null),u([qe("stopInterval")],Is.prototype,"writeStopInterval",null),u([p({type:[Date],json:{type:[fi],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Is.prototype,"stops",void 0),u([Ue("stops")],Is.prototype,"readStops",null),u([qe("stops")],Is.prototype,"writeStops",null),Is=Dq=u([U("esri.webdoc.widgets.TimeSlider")],Is);const hnt=Is;var Nq;let IS=Nq=class extends ye{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Nq(ce({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};u([p({type:dnt,json:{write:!0}})],IS.prototype,"range",void 0),u([p({type:hnt,json:{write:!0}})],IS.prototype,"timeSlider",void 0),u([p({type:unt,json:{write:!0}})],IS.prototype,"floorFilter",void 0),IS=Nq=u([U("esri.webdoc.Widgets")],IS);const pnt=IS,fnt={width:600,height:400},LR=1.5;function mnt(t,e){e=e||fnt;let{width:i,height:r}=e;const n=i/r;return n<LR?r=i/LR:n>LR&&(i=r*LR),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function ynt(t,e){return{...B$e(t,e),readResourcePaths:[]}}function IPt(t,e,i){const r=nn(t.itemUrl);return{...B$e(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function B$e(t,e){return{origin:e,url:nn(t.itemUrl),portal:t.portal||Fe.getDefault(),portalItem:t}}let qh=class extends ye{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=Uz(this.outSpatialReference),r.inSR=Uz(i.spatialReference),r.geometries=JSON.stringify({geometryType:mC(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};u([p()],qh.prototype,"geometries",void 0),u([p({type:et,json:{read:{source:"outSR"}}})],qh.prototype,"outSpatialReference",void 0),u([p()],qh.prototype,"transformation",void 0),u([p()],qh.prototype,"transformForward",void 0),qh=u([U("esri.rest.support.ProjectParameters")],qh);const gnt=hr(qh);async function MK(t,e,i){e=gnt(e);const r=Ad(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=mC(e.geometries[0]),a=lP(n,i);return Ot(r.path+"/project",a).then(({data:{geometries:l}})=>qxe(l,o,s))}function vnt(t,e){var i;return e.resourceInfo?G$e(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?bnt(t,e,e.portalItem):Promise.resolve()}function G$e(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||Fe.getDefault()),$e(async()=>{const{populateOperationalLayers:n}=await import("./layersCreator-Dm4dyLCS.js");return{populateOperationalLayers:n}},__vite__mapDeps([154,155,156,157,158,159])).then(({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o!=null&&o.length&&s.push(n(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&s.push(n(t.tables,l,a)),Promise.allSettled(s).then(()=>{})})}async function bnt(t,e,i){var o;if(await i.load().catch(a=>{throw new Q(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})}),i.type!==t.itemType)throw new Q(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=ynt(i,t.origin);await wnt(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await xnt(e.initialViewProperties,i,Ce.getLogger(e));if(s){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function wnt(t,e,i,r){const n=_nt(t,i);return e.read(n,r),G$e(e,n,r)}function _nt(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function xnt(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await Snt(t,e,i);return n?new $s({targetGeometry:n}):null}async function Snt(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Rp(n);const{getGeometryServiceURL:s}=await $e(()=>import("./geometryServiceUtils-DgFTtQLa.js"),[]);try{const o=await s(e),a=new qh({geometries:[n],outSpatialReference:r});return(await MK(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function pue(t){return{enabled:!!(t!=null&&t.length)}}var zq;let MS=zq=class extends ye{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new zq({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([p({type:Boolean,json:{write:!0}})],MS.prototype,"exactMatch",void 0),u([p({type:String,json:{write:!0}})],MS.prototype,"name",void 0),u([at(lK)],MS.prototype,"type",void 0),MS=zq=u([U("esri.webdoc.applicationProperties.SearchLayerField")],MS);const $nt=MS;var Fq;let kS=Fq=class extends ye{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new Fq(ce({field:this.field,id:this.id,subLayer:this.subLayer}))}};u([p({type:$nt,json:{write:{isRequired:!0}}})],kS.prototype,"field",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],kS.prototype,"id",void 0),u([p({type:fi,json:{write:!0}})],kS.prototype,"subLayer",void 0),kS=Fq=u([U("esri.webdoc.applicationProperties.SearchLayer")],kS);const Tnt=kS;var Uq;let AS=Uq=class extends ye{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Uq({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([p({type:Boolean,json:{write:!0}})],AS.prototype,"exactMatch",void 0),u([p({type:String,json:{write:!0}})],AS.prototype,"name",void 0),u([at(lK)],AS.prototype,"type",void 0),AS=Uq=u([U("esri.webdoc.applicationProperties.SearchTableField")],AS);const Ent=AS;var jq;let v2=jq=class extends ye{constructor(t){super(t),this.field=null,this.id=null}clone(){return new jq(ce({field:this.field,id:this.id}))}};u([p({type:Ent,json:{write:{isRequired:!0}}})],v2.prototype,"field",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],v2.prototype,"id",void 0),v2=jq=u([U("esri.webdoc.applicationProperties.SearchTable")],v2);const Cnt=v2;var Vq;const H$e=Ze.ofType(Tnt),q$e=Ze.ofType(Cnt);let wh=Vq=class extends ye{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new H$e,this.tables=new q$e}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new Vq(ce({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};u([p({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],wh.prototype,"addressSearchEnabled",void 0),u([Ue("addressSearchEnabled")],wh.prototype,"readAddressSearchEnabled",null),u([qe("addressSearchEnabled")],wh.prototype,"writeAddressSearchEnabled",null),u([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],wh.prototype,"enabled",void 0),u([p({type:String,json:{write:!0}})],wh.prototype,"hintText",void 0),u([p({type:H$e,json:{write:{overridePolicy:pue},origins:{"web-scene":{write:{isRequired:!0}}}}})],wh.prototype,"layers",void 0),u([p({type:q$e,json:{read:!0,write:{overridePolicy:pue}}})],wh.prototype,"tables",void 0),wh=Vq=u([U("esri.webdoc.applicationProperties.Search")],wh);const Int=wh;var Bq;let DD=Bq=class extends ye{constructor(t){super(t),this.search=null}clone(){return new Bq(ce({search:this.search}))}};u([p({type:Int,json:{write:!0}})],DD.prototype,"search",void 0),DD=Bq=u([U("esri.webdoc.applicationProperties.Viewing")],DD);const Mnt=DD;var Gq;let OS=Gq=class extends ye{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Gq(ce({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};u([p({json:{write:!0}})],OS.prototype,"editing",void 0),u([p({json:{write:!0}})],OS.prototype,"offline",void 0),u([p({type:Mnt,json:{write:!0}})],OS.prototype,"viewing",void 0),OS=Gq=u([U("esri.webmap.ApplicationProperties")],OS);const knt=OS;var Hq;let Wm=Hq=class extends ye{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Qve(this.url)}get isDataURI(){return Sy(this.url)}clone(){return new Hq({url:this.url})}};u([p({type:String,json:{write:{isRequired:!0}}})],Wm.prototype,"url",void 0),u([p()],Wm.prototype,"isSecureUrl",null),u([p()],Wm.prototype,"isDataURI",null),Wm=Hq=u([U("esri.webdoc.support.SlideThumbnail")],Wm);const Ant={type:Yi,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?Yi.fromArray(t):Yi.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r!=null&&r.messages&&r.messages.push(new Q("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[fi,uC]]}}}}};var qq;let _h=qq=class extends Hd.IdentifiableMixin(ye){constructor(t){super(t),this.name=null,this.thumbnail=new Wm,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Wm({url:t}):hr(Wm,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&Ce.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return $s.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n!=null&&n.type!=="extent"){const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";return void(r!=null&&r.messages?r.messages.push(new Q("property:unsupported",s)):Ce.getLogger(this).error(s))}n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON()}clone(){return new qq(ce({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};u([p({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],_h.prototype,"name",void 0),u([p({type:Wm,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],_h.prototype,"thumbnail",void 0),u([_i("thumbnail")],_h.prototype,"castThumbnail",null),u([p(Ant)],_h.prototype,"timeExtent",void 0),u([p({type:$s,nonNullable:!0,json:{write:!0}})],_h.prototype,"viewpoint",null),u([Ue("viewpoint",["extent","viewpoint"])],_h.prototype,"readViewpoint",null),u([qe("viewpoint")],_h.prototype,"writeViewpoint",null),_h=qq=u([U("esri.webmap.Bookmark")],_h);const Ont=_h;let cm=class extends It.ClonableMixin(st){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=_u,this.viewpoint=null}};u([p({type:j4})],cm.prototype,"background",void 0),u([p({type:CK})],cm.prototype,"rangeInfo",void 0),u([p({type:et})],cm.prototype,"spatialReference",void 0),u([p({type:Yi})],cm.prototype,"timeExtent",void 0),u([p({nonNullable:!0})],cm.prototype,"timeZone",void 0),u([p({type:$s})],cm.prototype,"viewpoint",void 0),cm=u([U("esri.webmap.InitialViewProperties")],cm);const LF=cm,W$e=Ze.ofType(Ont),Pnt=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Lnt="ArcGIS Pro",Rnt=EK.JSAPI;let Pr=class extends V4(_s.LoadableMixin(gu.EsriPromiseMixin(g1e))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new W$e,this.floorInfo=null,this.initialViewProperties=new LF,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=NO(async(i,r,n)=>{const{save:s,saveAs:o}=await $e(()=>import("./webdocSaveUtils-BbCpz2vd.js"),__vite__mapDeps([241,242,243,244,245]));switch(i){case Cp.SAVE:return s(this.context,this,r);case Cp.SAVE_AS:return o(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=xr(this.portalItem)}initialize(){if(this.when().catch(e=>{Ce.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=Rnt}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=lbe}readInitialViewProperties(e,i){var o,a;const r=new LF;i.background&&(r.background=j4.fromJSON(i.background));const n=(o=i.initialState)==null?void 0:o.timeExtent;n&&(r.timeExtent=Yi.fromArray(n));const s=(a=i.initialState)==null?void 0:a.viewpoint;return s&&(s.rotation&&K$.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===Lnt&&(s.rotation*=-1),r.viewpoint=$s.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=CK.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=et.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var a;if(!e)return;(a=e.background)!=null&&a.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:o}=e;if(o||s){const l={};o&&(l.viewpoint=o.write({},n)),s&&(l.timeExtent=s.toArray()),i.initialState=l}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new K$(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(vnt(this.context,this)),Promise.resolve(this)}loadAll(){return y4(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();Uve(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new Q("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Ce.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(Cp.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Cp.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===e.id)}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:rbe(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>E9(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(Mr).toArray()}_validateJSON(e){const i=K$.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var o,a;const e=this.applicationProperties,i=(o=e==null?void 0:e.viewing)==null?void 0:o.search,r=l=>this.allLayers.some(c=>c.id===l);if(i!=null&&i.layers&&(i.layers=i.layers.filter(l=>r(l.id))),i!=null&&i.tables&&(i.tables=i.tables.filter(l=>this.tables.some(c=>c.id===l.id))),e){const l=(a=e.editing)==null?void 0:a.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach(l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter(c=>r(c.id)))})}async _updateFromInternal(e,i){if(i??(i={}),await Vp(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new $s({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=mnt(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Sy(e)){const i=pb(e),r=i==null?void 0:i.mediaType,n=r&&Pnt.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};u([p()],Pr.prototype,"_updateFromPromise",void 0),u([p({type:knt,json:{write:!0}})],Pr.prototype,"applicationProperties",void 0),u([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Pr.prototype,"authoringApp",null),u([qe("authoringApp")],Pr.prototype,"writeAuthoringApp",null),u([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Pr.prototype,"authoringAppVersion",null),u([qe("authoringAppVersion")],Pr.prototype,"writeAuthoringAppVersion",null),u([p({type:W$e,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Pr.prototype,"bookmarks",void 0),u([p({type:cnt,json:{name:"mapFloorInfo",write:!0}})],Pr.prototype,"floorInfo",void 0),u([p({type:LF,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:j4},"initialState.timeExtent":{type:Yi},"initialState.viewpoint":{type:$s},mapRangeInfo:{type:CK},spatialReference:{type:et},"timeZone:":{type:String}}}}})],Pr.prototype,"initialViewProperties",void 0),u([Ue("initialViewProperties")],Pr.prototype,"readInitialViewProperties",null),u([qe("initialViewProperties")],Pr.prototype,"writeInitialViewProperties",null),u([p({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Pr.prototype,"layers",void 0),u([qe("layers")],Pr.prototype,"writeLayers",null),u([p({type:At})],Pr.prototype,"portalItem",void 0),u([p()],Pr.prototype,"resourceInfo",void 0),u([p({readOnly:!0,type:K$,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Pr.prototype,"sourceVersion",void 0),u([Ue("sourceVersion")],Pr.prototype,"readSourceVersion",null),u([qe("sourceVersion")],Pr.prototype,"writeSourceVersion",null),u([p({json:{read:!1,write:{ignoreOrigin:!0}}})],Pr.prototype,"tables",void 0),u([qe("tables")],Pr.prototype,"writeTables",null),u([p()],Pr.prototype,"thumbnailUrl",null),u([p()],Pr.prototype,"updatingFromView",null),u([p({type:pnt,json:{write:!0}})],Pr.prototype,"widgets",void 0),Pr=u([U("esri.WebDocument2D")],Pr);const Dnt=Pr,Sr=(t=>t)(["operational-layers","basemap","ground"]);var Wq;let sw=Wq=class extends ye{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Wq({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([p({type:String,json:{write:!0}})],sw.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],sw.prototype,"name",void 0),u([p({type:["boolean","date","number","string"],json:{write:!0}})],sw.prototype,"returnType",void 0),u([p({type:String,json:{write:!0}})],sw.prototype,"title",void 0),sw=Wq=u([U("esri.form.ExpressionInfo")],sw);const Nnt=sw;let ow=class extends ye{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([p({type:String,json:{write:!0}})],ow.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],ow.prototype,"label",void 0),u([p()],ow.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],ow.prototype,"visibilityExpression",void 0),ow=u([U("esri.form.elements.Element")],ow);const wb=ow;let ND=class extends It.ClonableMixin(ye){constructor(e){super(e),this.type=null}};u([p()],ND.prototype,"type",void 0),ND=u([U("esri.form.elements.inputs.attachments.Input")],ND);const _b=ND,B4=["any","capture","upload"];let PS=class extends _b{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([p({type:["audio"],readOnly:!0,json:{write:!0}})],PS.prototype,"type",void 0),u([p({type:B4,json:{write:!0}})],PS.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],PS.prototype,"maxDuration",void 0),PS=u([U("esri.form.elements.inputs.attachments.AudioInput")],PS);const fue=PS;let b2=class extends _b{constructor(e){super(e),this.type="document",this.maxFileSize=null}};u([p({type:["document"],readOnly:!0,json:{write:!0}})],b2.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],b2.prototype,"maxFileSize",void 0),b2=u([U("esri.form.elements.inputs.attachments.DocumentInput")],b2);const mue=b2;let LS=class extends _b{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([p({type:["image"],readOnly:!0,json:{write:!0}})],LS.prototype,"type",void 0),u([p({type:B4,json:{write:!0}})],LS.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],LS.prototype,"maxImageSize",void 0),LS=u([U("esri.form.elements.inputs.attachments.ImageInput")],LS);const yue=LS;let w2=class extends _b{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};u([p({type:["signature"],readOnly:!0,json:{write:!0}})],w2.prototype,"type",void 0),u([p({type:B4,json:{write:!0}})],w2.prototype,"inputMethod",void 0),w2=u([U("esri.form.elements.inputs.attachments.SignatureInput")],w2);const gue=w2;let RS=class extends _b{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([p({type:["video"],readOnly:!0,json:{write:!0}})],RS.prototype,"type",void 0),u([p({type:B4,json:{write:!0}})],RS.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],RS.prototype,"maxDuration",void 0),RS=u([U("esri.form.elements.inputs.attachments.VideoInput")],RS);const vue=RS;function J$e(t){return{nestableTypes:{base:_b,key:"type",typeMap:{audio:fue,document:mue,image:yue,signature:gue,video:vue}},allTypes:{base:_b,key:"type",typeMap:{attachment:t,audio:fue,document:mue,image:yue,signature:gue,video:vue}}}}function znt(t,e,i){return t?t.map(r=>Gp(e.nestableTypes,r)):null}function Fnt(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function Unt(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}let kh=class extends _b{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return znt(e,l8)}readInputs(e,i){return Fnt(i.inputTypes,l8)}writeInputs(e,i){i.inputTypes=Unt(e,l8)}};u([p({type:["attachment"],readOnly:!0,json:{write:!0}})],kh.prototype,"type",void 0),u([p({type:["any","exact","exactOrNone"],json:{write:!0}})],kh.prototype,"attachmentAssociationType",void 0),u([p({json:{write:{isRequired:!0}}})],kh.prototype,"inputTypes",void 0),u([_i("inputTypes")],kh.prototype,"castInputs",null),u([Ue("inputTypes")],kh.prototype,"readInputs",null),u([qe("inputTypes")],kh.prototype,"writeInputs",null),kh=u([U("esri.form.elements.inputs.attachments.AttachmentInput")],kh);const l8=J$e(kh),jnt=kh;var Jq;const Vnt=J$e(jnt);let Yl=Jq=class extends wb{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var t;return new Jq({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(t=this.input)==null?void 0:t.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([p({type:Boolean,json:{write:!0}})],Yl.prototype,"allowUserRename",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],Yl.prototype,"attachmentKeyword",void 0),u([p({type:Boolean,json:{write:!0}})],Yl.prototype,"displayFilename",void 0),u([p({type:String,json:{write:!0}})],Yl.prototype,"editableExpression",void 0),u([p({type:String,json:{write:!0}})],Yl.prototype,"filenameExpression",void 0),u([p({types:Vnt.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Yl.prototype,"input",void 0),u([p({type:Number,json:{write:!0}})],Yl.prototype,"maxAttachmentCount",void 0),u([p({type:Number,json:{write:!0}})],Yl.prototype,"minAttachmentCount",void 0),u([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Yl.prototype,"type",void 0),u([p({type:Boolean,json:{write:!0}})],Yl.prototype,"useOriginalFilename",void 0),Yl=Jq=u([U("esri.form.elements.AttachmentElement")],Yl);const bue=Yl;let zD=class extends ye{constructor(e){super(e),this.type=null}};u([p()],zD.prototype,"type",void 0),zD=u([U("esri.form.elements.inputs.Input")],zD);const Ey=zD;let _2=class extends Ey{constructor(e){super(e),this.maxLength=null,this.minLength=0}};u([p({type:Number,json:{write:!0}})],_2.prototype,"maxLength",void 0),u([p({type:Number,json:{write:!0}})],_2.prototype,"minLength",void 0),_2=u([U("esri.form.elements.inputs.TextInput")],_2);const kK=_2;var Zq;let FD=Zq=class extends kK{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new Zq({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],FD.prototype,"type",void 0),FD=Zq=u([U("esri.form.elements.inputs.BarcodeScannerInput")],FD);const Bnt=FD;var Yq;let DS=Yq=class extends Ey{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Yq({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([p({type:String,json:{write:!0}})],DS.prototype,"noValueOptionLabel",void 0),u([p({type:Boolean,json:{write:!0}})],DS.prototype,"showNoValueOption",void 0),u([p({type:["combo-box"],json:{read:!1,write:!0}})],DS.prototype,"type",void 0),DS=Yq=u([U("esri.form.elements.inputs.ComboBoxInput")],DS);const Gnt=DS;var Xq;function wue(t){return t??null}function _ue(t){return t??null}let xh=Xq=class extends Ey{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return wue(e.max)}writeMax(t,e){e.max=_ue(t)}readMin(t,e){return wue(e.min)}writeMin(t,e){e.min=_ue(t)}clone(){return new Xq({max:this.max,min:this.min})}};u([p({type:String,json:{type:String,write:!0}})],xh.prototype,"max",void 0),u([Ue("max")],xh.prototype,"readMax",null),u([qe("max")],xh.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],xh.prototype,"min",void 0),u([Ue("min")],xh.prototype,"readMin",null),u([qe("min")],xh.prototype,"writeMin",null),u([p({type:["date-picker"],json:{read:!1,write:!0}})],xh.prototype,"type",void 0),xh=Xq=u([U("esri.form.elements.inputs.DatePickerInput")],xh);const Hnt=xh;var Kq;function c8(t){return t??null}function u8(t){return t??null}let il=Kq=class extends Ey{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return c8(e.max)}writeMax(t,e){e.max=u8(t)}readMin(t,e){return c8(e.min)}writeMin(t,e){e.min=u8(t)}readTimeResolution(t,e){return c8(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=u8(t)}clone(){return new Kq({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([p({type:Boolean,json:{write:!0}})],il.prototype,"includeTimeOffset",void 0),u([p({type:String,json:{type:String,write:!0}})],il.prototype,"max",void 0),u([Ue("max")],il.prototype,"readMax",null),u([qe("max")],il.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],il.prototype,"min",void 0),u([Ue("min")],il.prototype,"readMin",null),u([qe("min")],il.prototype,"writeMin",null),u([p({type:String,json:{type:String,write:!0}})],il.prototype,"timeResolution",void 0),u([Ue("timeResolution")],il.prototype,"readTimeResolution",null),u([qe("timeResolution")],il.prototype,"writeTimeResolution",null),u([p({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],il.prototype,"type",void 0),il=Kq=u([U("esri.form.elements.inputs.DateTimeOffsetPickerInput")],il);const qnt=il;var Qq;function xue(t){return t!=null?new Date(t):null}function Sue(t){return t?t.getTime():null}let sd=Qq=class extends Ey{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return xue(e.max)}writeMax(t,e){e.max=Sue(t)}readMin(t,e){return xue(e.min)}writeMin(t,e){e.min=Sue(t)}clone(){return new Qq({includeTime:this.includeTime,max:this.max,min:this.min})}};u([p({type:Boolean,json:{write:!0}})],sd.prototype,"includeTime",void 0),u([p({type:Date,json:{type:Number,write:!0}})],sd.prototype,"max",void 0),u([Ue("max")],sd.prototype,"readMax",null),u([qe("max")],sd.prototype,"writeMax",null),u([p({type:Date,json:{type:Number,write:!0}})],sd.prototype,"min",void 0),u([Ue("min")],sd.prototype,"readMin",null),u([qe("min")],sd.prototype,"writeMin",null),u([p({type:["datetime-picker"],json:{read:!1,write:!0}})],sd.prototype,"type",void 0),sd=Qq=u([U("esri.form.elements.inputs.DateTimePickerInput")],sd);const Wnt=sd;var eW;let NS=eW=class extends Ey{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new eW({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([p({type:String,json:{write:!0}})],NS.prototype,"noValueOptionLabel",void 0),u([p({type:Boolean,json:{write:!0}})],NS.prototype,"showNoValueOption",void 0),u([p({type:["radio-buttons"],json:{read:!1,write:!0}})],NS.prototype,"type",void 0),NS=eW=u([U("esri.form.elements.inputs.RadioButtonsInput")],NS);const Jnt=NS;var tW;let zS=tW=class extends Ey{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new tW({offValue:this.offValue,onValue:this.onValue})}};u([p({type:[String,Number],json:{write:!0}})],zS.prototype,"offValue",void 0),u([p({type:[String,Number],json:{write:!0}})],zS.prototype,"onValue",void 0),u([p({type:["switch"],json:{read:!1,write:!0}})],zS.prototype,"type",void 0),zS=tW=u([U("esri.form.elements.inputs.SwitchInput")],zS);const Znt=zS;var iW;let UD=iW=class extends kK{constructor(t){super(t),this.type="text-area"}clone(){return new iW({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["text-area"],json:{read:!1,write:!0}})],UD.prototype,"type",void 0),UD=iW=u([U("esri.form.elements.inputs.TextAreaInput")],UD);const Ynt=UD;var rW;let jD=rW=class extends kK{constructor(t){super(t),this.type="text-box"}clone(){return new rW({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["text-box"],json:{read:!1,write:!0}})],jD.prototype,"type",void 0),jD=rW=u([U("esri.form.elements.inputs.TextBoxInput")],jD);const Xnt=jD;var nW;function d8(t){return t??null}function h8(t){return t??null}let Xl=nW=class extends Ey{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return d8(e.max)}writeMax(t,e){e.max=h8(t)}readMin(t,e){return d8(e.min)}writeMin(t,e){e.min=h8(t)}readTimeResolution(t,e){return d8(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=h8(t)}clone(){return new nW({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([p({type:String,json:{type:String,write:!0}})],Xl.prototype,"max",void 0),u([Ue("max")],Xl.prototype,"readMax",null),u([qe("max")],Xl.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],Xl.prototype,"min",void 0),u([Ue("min")],Xl.prototype,"readMin",null),u([qe("min")],Xl.prototype,"writeMin",null),u([p({type:String,json:{type:String,write:!0}})],Xl.prototype,"timeResolution",void 0),u([Ue("timeResolution")],Xl.prototype,"readTimeResolution",null),u([qe("timeResolution")],Xl.prototype,"writeTimeResolution",null),u([p({type:["time-picker"],json:{read:!1,write:!0}})],Xl.prototype,"type",void 0),Xl=nW=u([U("esri.form.elements.inputs.TimePickerInput")],Xl);const Knt=Xl,Qnt=Bnt,est=Gnt,tst=Hnt,ist=qnt,rst=Wnt,nst=Jnt,sst=Znt,ost=Ynt,ast=Xnt,lst=Knt,cst={base:Ey,key:"type",typeMap:{"barcode-scanner":Qnt,"combo-box":est,"date-picker":tst,"datetime-picker":rst,"datetimeoffset-picker":ist,"radio-buttons":nst,switch:sst,"text-area":ost,"text-box":ast,"time-picker":lst}};var sW;let qc=sW=class extends wb{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new sW({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([p({types:pxe,json:{read:{reader:A4},write:!0}})],qc.prototype,"domain",void 0),u([p({type:Boolean,json:{write:!0}})],qc.prototype,"editable",void 0),u([p({type:String,json:{write:!0}})],qc.prototype,"editableExpression",void 0),u([p({type:String,json:{write:!0}})],qc.prototype,"fieldName",void 0),u([p({type:String,json:{write:!0}})],qc.prototype,"hint",void 0),u([p({types:cst,json:{read:{source:"inputType"},write:{target:"inputType"}}})],qc.prototype,"input",void 0),u([p({type:String,json:{write:!0}})],qc.prototype,"requiredExpression",void 0),u([p({type:String,json:{read:!1,write:!0}})],qc.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],qc.prototype,"valueExpression",void 0),qc=sW=u([U("esri.form.elements.FieldElement")],qc);const $ue=qc;var oW;let um=oW=class extends wb{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new oW({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:ce(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([p({type:Number,json:{write:!0}})],um.prototype,"displayCount",void 0),u([p({type:["list"],json:{write:!0}})],um.prototype,"displayType",void 0),u([p({type:String,json:{write:!0}})],um.prototype,"editableExpression",void 0),u([p({type:[tK],json:{write:!0}})],um.prototype,"orderByFields",void 0),u([p({type:Number,json:{write:!0}})],um.prototype,"relationshipId",void 0),u([p({type:["relationship"],json:{read:!1,write:!0}})],um.prototype,"type",void 0),um=oW=u([U("esri.form.elements.RelationshipElement")],um);const Tue=um;var aW;let FS=aW=class extends wb{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new aW({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([p({type:String,json:{write:!0}})],FS.prototype,"text",void 0),u([p({type:String,json:{write:!0}})],FS.prototype,"textFormat",void 0),u([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],FS.prototype,"type",void 0),FS=aW=u([U("esri.form.elements.TextElement")],FS);const Eue=FS;let US=class extends It.ClonableMixin(wb){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([p({type:[j1e],json:{write:{isRequired:!0}}})],US.prototype,"associationTypes",void 0),u([p({type:String,json:{write:!0}})],US.prototype,"editableExpression",void 0),u([p({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],US.prototype,"type",void 0),US=u([U("esri.form.elements.UtilityNetworkAssociationsElement")],US);const Cue=US,ust=t=>t.type==="field",dst=t=>t.type==="group",hst=t=>t.type==="text";function Z$e(t){return{typesWithGroup:{base:wb,key:"type",typeMap:{attachment:bue,field:$ue,group:t,relationship:Tue,text:Eue,utilityNetworkAssociations:Cue}},typesWithoutGroup:{base:wb,key:"type",typeMap:{attachment:bue,field:$ue,relationship:Tue,text:Eue,utilityNetworkAssociations:Cue}}}}function Y$e(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function X$e(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function K$e(t,e,i=!0){return t?t.map(r=>Gp(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var lW;let Ah=lW=class extends wb{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return K$e(t,p8,!1)}readElements(t,e){return Y$e(e.formElements,p8,!1)}writeElements(t,e){e.formElements=X$e(t,p8,!1)}clone(){return new lW({description:this.description,elements:ce(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([p({json:{write:!0}})],Ah.prototype,"elements",void 0),u([_i("elements")],Ah.prototype,"castElements",null),u([Ue("elements",["formElements"])],Ah.prototype,"readElements",null),u([qe("elements")],Ah.prototype,"writeElements",null),u([p({type:["collapsed","expanded"],json:{write:!0}})],Ah.prototype,"initialState",void 0),u([p({type:String,json:{read:!1,write:!0}})],Ah.prototype,"type",void 0),Ah=lW=u([U("esri.form.elements.GroupElement")],Ah);const p8=Z$e(Ah),pst=Ah;var cW;const f8=Z$e(pst);let od=cW=class extends ye{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return K$e(t,f8)}readElements(t,e){return Y$e(e.formElements,f8)}writeElements(t,e){e.formElements=X$e(t,f8)}clone(){return new cW({description:this.description,expressionInfos:ce(this.expressionInfos),elements:ce(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:o}=this;if(Lk(i,t,r),Lk(i,t,o),!n)return[];const a=fst(n,s).map(l=>Oo(i,t,l));await Promise.all(a);for(const l of n)Q$e(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function Q$e(t,e,i){var n;const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(Lk(t,r,i.label),Lk(t,r,i.description),i.type){case"field":Ba(t,r,i.fieldName);break;case"group":i.elements.forEach(s=>Q$e(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(o=>o.id===i.relationshipId);s&&Ba(t,r,s.keyField)}vb(t,r,(n=i.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":Lk(t,r,i.text)}}function fst(t,e){if(!e||e.length===0)return[];const i=eTe(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function eTe(t){const e=new Set;for(const i of t)if(lse(e,i.visibilityExpression),!hst(i)){if(dst(i))vz(e,eTe(i.elements));else if(lse(e,i.editableExpression),ust(i)){const{requiredExpression:r,valueExpression:n}=i;vz(e,[r,n])}}return e}function Lk(t,e,i){vb(t,e,KX(i))}u([p({type:String,json:{write:!0}})],od.prototype,"description",void 0),u([p({json:{write:!0}})],od.prototype,"elements",void 0),u([_i("elements")],od.prototype,"castElements",null),u([Ue("elements",["formElements"])],od.prototype,"readElements",null),u([qe("elements")],od.prototype,"writeElements",null),u([p({type:[Nnt],json:{write:!0}})],od.prototype,"expressionInfos",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],od.prototype,"preserveFieldValuesWhenHidden",void 0),u([p({type:String,json:{write:!0}})],od.prototype,"title",void 0),od=cW=u([U("esri.form.FormTemplate")],od);const mst=od;function Iue(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function yst(t,e,i){if(!t&&!e||!i)return;const r=Vz(i);Mue(t,i,r),Mue(e,i,r)}function Mue(t,e,i){if(t)for(const r of t)gst(r.geometry,e,i)}function gst(t,e,i){if(!(t!=null&&t.spatialReference)||Cn(t.spatialReference,e))return;const r=Vz(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)Iue(t,t.rings,r);else if("paths"in t)Iue(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function kue(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=jwe(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var uW;const dW=new Et({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Un=uW=class extends ye{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,_r)}writeGeometryType(t,e,i,r){if(t)return void dW.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void dW.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Ao(t);return r&&!i&&e.spatialReference&&(r.spatialReference=et.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new uW(this.cloneProperties())}cloneProperties(){return ce({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=c=>Math.round((c-r)/e),o=c=>Math.round((n-c)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=t,this}unquantize(){var y,v;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=w=>w*s+r,l=w=>n-w*o;let c=null,h=null;if(this.hasZ&&((y=i==null?void 0:i.scale)==null?void 0:y[2])!=null){const{translate:[,,w],scale:[,,x]}=i;c=S=>S*x+w}if(this.hasM&&((v=i==null?void 0:i.scale)==null?void 0:v[3])!=null){const{translate:[,,,w],scale:[,,,x]}=i;h=S=>S==null?S:S*x+w}const m=this._getHydrationFunction(t,a,l,c,h);for(const{geometry:w}of e)w!=null&&m&&m(w);return this.transform=null,this}readFeaturesWithClass(t,e,i){var s;const r=et.fromJSON(e.spatialReference),n=[];for(let o=0;o<t.length;o++){const a=t[o],l=i.fromJSON(a),c=(s=a.geometry)==null?void 0:s.spatialReference;l.geometry==null||c||(l.geometry.spatialReference=r);const h=a.aggregateGeometries,m=l.aggregateGeometries;if(h&&m!=null)for(const y in m){const v=m[y],w=h[y],x=w==null?void 0:w.spatialReference;v==null||x||(v.spatialReference=r)}n.push(l)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const c=e(l[0]),h=i(l[1]);c===r&&h===n||(s.push([c-r,h-n]),r=c,n=h)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=Hn(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,e,i);c&&s.push(c)}return s.length>0?(Hn(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=Hn(s)?s.rings:s.paths;let a,l;for(let c=0,h=o.length;c<h;c++){const m=o[c];for(let y=0,v=m.length;y<v;y++){const w=m[y];y>0?(a+=w[0],l+=w[1]):(a=w[0],l=w[1]),w[0]=e(a),w[1]=i(l)}}if(r&&n)for(let c=0,h=o.length;c<h;c++){const m=o[c];for(let y=0,v=m.length;y<v;y++){const w=m[y];w[2]=r(w[2]),w[3]=n(w[3])}}else if(r)for(let c=0,h=o.length;c<h;c++){const m=o[c];for(let y=0,v=m.length;y<v;y++){const w=m[y];w[2]=r(w[2])}}else if(n)for(let c=0,h=o.length;c<h;c++){const m=o[c];for(let y=0,v=m.length;y<v;y++){const w=m[y];w[2]=n(w[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,h=o.length;c<h;c++){const m=o[c];c>0?(a+=m[0],l+=m[1]):(a=m[0],l=m[1]),m[0]=e(a),m[1]=i(l)}if(r&&n)for(let c=0,h=o.length;c<h;c++){const m=o[c];m[2]=r(m[2]),m[3]=n(m[3])}else if(r)for(let c=0,h=o.length;c<h;c++){const m=o[c];m[2]=r(m[2])}else if(n)for(let c=0,h=o.length;c<h;c++){const m=o[c];m[2]=n(m[2])}}:null}};u([p({type:String,json:{write:!0}})],Un.prototype,"displayFieldName",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Un.prototype,"exceededTransferLimit",void 0),u([p({type:[_r],json:{write:!0}})],Un.prototype,"features",void 0),u([Ue("features")],Un.prototype,"readFeatures",null),u([p({type:[Ls],json:{write:!0}})],Un.prototype,"fields",void 0),u([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:dW.read}}})],Un.prototype,"geometryType",void 0),u([qe("geometryType")],Un.prototype,"writeGeometryType",null),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Un.prototype,"hasM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Un.prototype,"hasZ",void 0),u([p({types:yC,json:{write:!0}})],Un.prototype,"queryGeometry",void 0),u([Ue("queryGeometry")],Un.prototype,"readQueryGeometry",null),u([p({type:et,json:{write:!0}})],Un.prototype,"spatialReference",void 0),u([qe("spatialReference")],Un.prototype,"writeSpatialReference",null),u([p({json:{write:!0}})],Un.prototype,"transform",void 0),Un=uW=u([U("esri.rest.support.FeatureSet")],Un),Un.prototype.toJSON.isDefaultToJSON=!0;let vst=0,Tm=class extends _s.LoadableMixin(gu.EsriPromiseMixin(Ze)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);kue(e,this.layer.spatialReference,r);const n=Un.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGeometry.get(a);l!==void 0&&(o.geometry=l)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new Q("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return kue(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:jt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e==null?void 0:e.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new Q("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const m=o(h);m!=null&&n.push(m)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(s.push(this._serializeFeature(h)),a&&h.geometry!=null){const m=o(h);m!=null&&a.set(m,h)}}yst(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new Q("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const c=o[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),c===-1?delete h.attributes[a]:h.attributes[a]=c,s._addIdToClientGeometry(h))}}}}_addIdToClientGeometry(e){var n;if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(vst++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?rr.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await QGe("MemorySourceWorker",{strategy:ve("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",w=>{Ce.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),w.preventDefault()}));const m={features:h.features,fields:i==null?void 0:i.map(w=>w.toJSON()),geometryType:Kse.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:c?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},y=await this._connection.invoke("load",m,{signal:e});for(const w of y.warnings)Ce.getLogger(this.layer).warn("#load()",`${w.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:w});y.featureErrors.length&&Ce.getLogger(this.layer).warn("#load()",`Encountered ${y.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:y.featureErrors});const v=y.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(v.geometryType=Kse.toJSON(h.inferredGeometryType)),this.sourceJSON=v,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),h.finish(y.assignedObjectIds)}};u([UY({Type:_r,ensureType:hr(_r)})],Tm.prototype,"itemType",void 0),u([p()],Tm.prototype,"type",void 0),u([p({constructOnly:!0})],Tm.prototype,"layer",void 0),u([p({readOnly:!0})],Tm.prototype,"_workerGeometryType",null),u([p()],Tm.prototype,"sourceJSON",void 0),Tm=u([U("esri.layers.graphics.sources.MemorySource")],Tm);function bst(t){return"portalItem"in t}const wst=t=>{const e=t;let i=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):bst(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([p({type:String})],i.prototype,"apiKey",null),i=u([U("esri.layers.mixins.APIKeyMixin")],i),i},_st=t=>{const e=t;let i=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=qp(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",Bje(r,Ce.getLogger(this)))}};return u([p()],i.prototype,"title",null),u([p({type:String})],i.prototype,"url",null),i=u([U("esri.layers.mixins.ArcGISService")],i),i};let Aue=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find(l=>l.source===this.location.source);n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(r){const l=this.location.end,c="".padEnd(o.line.toString().length," "),h=r[s.line-1],m=(s.line===l.line?l.column:h.length+1)-s.column||1;i+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+h+`
`+c+" | "+"".padEnd(s.column-1," ")+"".padEnd(m,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(y){return y.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(y){return n?y.replace(n,v=>"\\u{"+r(v)+"}"):y}function o(y){return s(y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+r(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+r(v)))}function a(y){return s(y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+r(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+r(v)))}const l={literal:y=>'"'+o(y.text)+'"',class(y){const v=y.parts.map(w=>Array.isArray(w)?a(w[0])+"-"+a(w[1]):a(w));return"["+(y.inverted?"^":"")+v.join("")+"]"+(y.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:y=>y.description};function c(y){return l[y.type](y)}function h(y){const v=y.map(c);if(v.sort(),v.length>0){let w=1;for(let x=1;x<v.length;x++)v[x-1]!==v[x]&&(v[w]=v[x],w++);v.length=w}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function m(y){return y?'"'+o(y)+'"':"end of input"}return"Expected "+h(e)+" but "+m(i)+" found."}};function xst(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:gn};let s=gn;const o="none",a=")",l=",",c="(",h="%",m="px",y="cm",v="mm",w="in",x="pt",S="pc",C="deg",k="rad",A="grad",R="turn",D="#",B=".",z="e",W=/^[ \t\n\r]/,Y=/^[a-z\-]/,ee=/^[0-9a-fA-F]/,ge=/^[+\-]/,fe=/^[0-9]/,ue=va("none"),ae=Ki("none",!1),Se=Ki(")",!1),le=Ki(",",!1),be=Yd([" ","	",`
`,"\r"],!1,!1,!1),Oe=va("function"),Be=Ki("(",!1),se=va("identifier"),Pe=Yd([["a","z"],"-"],!1,!1,!1),rt=va("percentage"),it=Ki("%",!1),_t=va("length"),ri=Ki("px",!1),zt=Ki("cm",!1),kr=Ki("mm",!1),$i=Ki("in",!1),gt=Ki("pt",!1),Eu=Ki("pc",!1),fa=va("angle"),kl=Ki("deg",!1),ma=Ki("rad",!1),ya=Ki("grad",!1),of=Ki("turn",!1),Cu=va("number"),ga=va("color"),af=Ki("#",!1),Pb=Yd([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Wd=Yd(["+","-"],!1,!1,!1),js=Yd([["0","9"]],!1,!1,!1),R1=Ki(".",!1),Lb=Ki("e",!1);function Ay(){return[]}function D1(ie,Me){return{type:"function",name:ie,parameters:Me||[]}}function Al(ie,Me){return Me.length>0?mf(ie,Me,3):[ie]}function oo(ie){return{type:"quantity",value:ie.value,unit:ie.unit}}function qa(ie){return{type:"color",colorType:ie.type,value:ie.value}}function ao(ie){return ie}function Rb(){return Bs()}function Db(ie){return{value:ie,unit:"%"}}function Nb(ie){return{value:ie,unit:"px"}}function lf(ie){return{value:ie,unit:"cm"}}function cf(ie){return{value:ie,unit:"mm"}}function Wa(ie){return{value:ie,unit:"in"}}function uf(ie){return{value:ie,unit:"pt"}}function Jd(ie){return{value:ie,unit:"pc"}}function df(ie){return{value:ie,unit:"deg"}}function Zd(ie){return{value:ie,unit:"rad"}}function Iu(ie){return{value:ie,unit:"grad"}}function Oy(ie){return{value:ie,unit:"turn"}}function Mu(ie){return{value:ie,unit:null}}function N1(){return{type:"hex",value:Bs()}}function Py(ie){return{type:"function",value:ie}}function Ly(){return{type:"named",value:Bs()}}function Ry(){return parseFloat(Bs())}let Ie=0|e.peg$currPos,ar=Ie;const Tc=[{line:1,column:1}];let Vs,Xi=Ie,Xn=e.peg$maxFailExpected||[],vt=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function Bs(){return t.substring(ar,Ie)}function ku(ie=Ie){const Me=t.codePointAt(ie);return Me===void 0?"":String.fromCodePoint(Me)}function Ki(ie,Me){return{type:"literal",text:ie,ignoreCase:Me}}function Yd(ie,Me,Ke,Pt){return{type:"class",parts:ie,inverted:Me,ignoreCase:Ke,unicode:Pt}}function hf(){return{type:"end"}}function va(ie){return{type:"other",description:ie}}function Gs(ie){let Me,Ke=Tc[ie];if(Ke)return Ke;if(ie>=Tc.length)Me=Tc.length-1;else for(Me=ie;!Tc[--Me];);for(Ke=Tc[Me],Ke={line:Ke.line,column:Ke.column};Me<ie;)t.charCodeAt(Me)===10?(Ke.line++,Ke.column=1):Ke.column++,Me++;return Tc[ie]=Ke,Ke}function Dt(ie,Me,Ke){const Pt=Gs(ie),Pi=Gs(Me);return{source:r,start:{offset:ie,line:Pt.line,column:Pt.column},end:{offset:Me,line:Pi.line,column:Pi.column}}}function Ht(ie){Ie<Xi||(Ie>Xi&&(Xi=Ie,Xn=[]),Xn.push(ie))}function Au(ie,Me,Ke){return new Aue(Aue.buildMessage(ie,Me),ie,Me,Ke)}function gn(){let ie;return ie=z1(),ie===i&&(ie=Xd()),ie}function z1(){let ie,Me;return vt++,ie=Ie,vn(),t.substr(Ie,4)===o?(Me=o,Ie+=4):(Me=i,vt===0&&Ht(ae)),Me!==i?(vn(),ar=ie,ie=Ay()):(Ie=ie,ie=i),vt--,ie===i&&vt===0&&Ht(ue),ie}function Xd(){let ie,Me;if(ie=[],Me=ba(),Me!==i)for(;Me!==i;)ie.push(Me),Me=ba();else ie=i;return ie}function ba(){let ie,Me,Ke,Pt;return ie=Ie,vn(),Me=Fb(),Me!==i?(vn(),Ke=Kd(),Ke===i&&(Ke=null),vn(),t.charCodeAt(Ie)===41?(Pt=a,Ie++):(Pt=i,vt===0&&Ht(Se)),Pt!==i?(vn(),ar=ie,ie=D1(Me,Ke)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie}function Kd(){let ie,Me,Ke,Pt,Pi,Qi,Ar,ki;if(ie=Ie,Me=zb(),Me!==i){for(Ke=[],Pt=Ie,Pi=vn(),t.charCodeAt(Ie)===44?(Qi=l,Ie++):(Qi=i,vt===0&&Ht(le)),Qi===i&&(Qi=null),Ar=vn(),ki=zb(),ki!==i?(Pi=[Pi,Qi,Ar,ki],Pt=Pi):(Ie=Pt,Pt=i);Pt!==i;)Ke.push(Pt),Pt=Ie,Pi=vn(),t.charCodeAt(Ie)===44?(Qi=l,Ie++):(Qi=i,vt===0&&Ht(le)),Qi===i&&(Qi=null),Ar=vn(),ki=zb(),ki!==i?(Pi=[Pi,Qi,Ar,ki],Pt=Pi):(Ie=Pt,Pt=i);ar=ie,ie=Al(Me,Ke)}else Ie=ie,ie=i;return ie}function zb(){let ie,Me;return ie=Ie,Me=pf(),Me===i&&(Me=ff(),Me===i&&(Me=Po(),Me===i&&(Me=Dy()))),Me!==i&&(ar=ie,Me=oo(Me)),ie=Me,ie===i&&(ie=Ie,Me=Ny(),Me!==i&&(ar=ie,Me=qa(Me)),ie=Me),ie}function vn(){let ie,Me;for(vt++,ie=[],Me=t.charAt(Ie),W.test(Me)?Ie++:(Me=i,vt===0&&Ht(be));Me!==i;)ie.push(Me),Me=t.charAt(Ie),W.test(Me)?Ie++:(Me=i,vt===0&&Ht(be));return vt--,ie}function Fb(){let ie,Me,Ke;return vt++,ie=Ie,Me=F1(),Me!==i?(t.charCodeAt(Ie)===40?(Ke=c,Ie++):(Ke=i,vt===0&&Ht(Be)),Ke!==i?(ar=ie,ie=Me):(Ie=ie,ie=i)):(Ie=ie,ie=i),vt--,ie===i&&(Me=i,vt===0&&Ht(Oe)),ie}function F1(){let ie,Me,Ke;if(vt++,ie=Ie,Me=[],Ke=t.charAt(Ie),Y.test(Ke)?Ie++:(Ke=i,vt===0&&Ht(Pe)),Ke!==i)for(;Ke!==i;)Me.push(Ke),Ke=t.charAt(Ie),Y.test(Ke)?Ie++:(Ke=i,vt===0&&Ht(Pe));else Me=i;return Me!==i&&(ar=ie,Me=Rb()),ie=Me,vt--,ie===i&&(Me=i,vt===0&&Ht(se)),ie}function pf(){let ie,Me,Ke;return vt++,ie=Ie,vn(),Me=An(),Me!==i?(t.charCodeAt(Ie)===37?(Ke=h,Ie++):(Ke=i,vt===0&&Ht(it)),Ke!==i?(ar=ie,ie=Db(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),vt--,ie===i&&vt===0&&Ht(rt),ie}function ff(){let ie,Me,Ke;return vt++,ie=Ie,vn(),Me=An(),Me!==i?(t.substr(Ie,2)===m?(Ke=m,Ie+=2):(Ke=i,vt===0&&Ht(ri)),Ke!==i?(ar=ie,ie=Nb(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,vn(),Me=An(),Me!==i?(t.substr(Ie,2)===y?(Ke=y,Ie+=2):(Ke=i,vt===0&&Ht(zt)),Ke!==i?(ar=ie,ie=lf(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,vn(),Me=An(),Me!==i?(t.substr(Ie,2)===v?(Ke=v,Ie+=2):(Ke=i,vt===0&&Ht(kr)),Ke!==i?(ar=ie,ie=cf(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,vn(),Me=An(),Me!==i?(t.substr(Ie,2)===w?(Ke=w,Ie+=2):(Ke=i,vt===0&&Ht($i)),Ke!==i?(ar=ie,ie=Wa(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,vn(),Me=An(),Me!==i?(t.substr(Ie,2)===x?(Ke=x,Ie+=2):(Ke=i,vt===0&&Ht(gt)),Ke!==i?(ar=ie,ie=uf(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,vn(),Me=An(),Me!==i?(t.substr(Ie,2)===S?(Ke=S,Ie+=2):(Ke=i,vt===0&&Ht(Eu)),Ke!==i?(ar=ie,ie=Jd(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i)))))),vt--,ie===i&&vt===0&&Ht(_t),ie}function Po(){let ie,Me,Ke;return vt++,ie=Ie,Me=An(),Me!==i?(t.substr(Ie,3)===C?(Ke=C,Ie+=3):(Ke=i,vt===0&&Ht(kl)),Ke!==i?(ar=ie,ie=df(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,Me=An(),Me!==i?(t.substr(Ie,3)===k?(Ke=k,Ie+=3):(Ke=i,vt===0&&Ht(ma)),Ke!==i?(ar=ie,ie=Zd(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,Me=An(),Me!==i?(t.substr(Ie,4)===A?(Ke=A,Ie+=4):(Ke=i,vt===0&&Ht(ya)),Ke!==i?(ar=ie,ie=Iu(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i),ie===i&&(ie=Ie,Me=An(),Me!==i?(t.substr(Ie,4)===R?(Ke=R,Ie+=4):(Ke=i,vt===0&&Ht(of)),Ke!==i?(ar=ie,ie=Oy(Me)):(Ie=ie,ie=i)):(Ie=ie,ie=i)))),vt--,ie===i&&(Me=i,vt===0&&Ht(fa)),ie}function Dy(){let ie,Me;return vt++,ie=Ie,vn(),Me=An(),Me!==i?(ar=ie,ie=Mu(Me)):(Ie=ie,ie=i),vt--,ie===i&&vt===0&&Ht(Cu),ie}function Ny(){let ie,Me,Ke,Pt;if(vt++,ie=Ie,t.charCodeAt(Ie)===35?(Me=D,Ie++):(Me=i,vt===0&&Ht(af)),Me!==i){if(Ke=[],Pt=t.charAt(Ie),ee.test(Pt)?Ie++:(Pt=i,vt===0&&Ht(Pb)),Pt!==i)for(;Pt!==i;)Ke.push(Pt),Pt=t.charAt(Ie),ee.test(Pt)?Ie++:(Pt=i,vt===0&&Ht(Pb));else Ke=i;Ke!==i?(ar=ie,ie=N1()):(Ie=ie,ie=i)}else Ie=ie,ie=i;return ie===i&&(ie=Ie,Me=ba(),Me!==i&&(ar=ie,Me=Py(Me)),ie=Me,ie===i&&(ie=Ie,Me=F1(),Me!==i&&(ar=ie,Me=Ly()),ie=Me)),vt--,ie===i&&(Me=i,vt===0&&Ht(ga)),ie}function An(){let ie,Me,Ke,Pt,Pi,Qi,Ar,ki;for(ie=Ie,Me=t.charAt(Ie),ge.test(Me)?Ie++:(Me=i,vt===0&&Ht(Wd)),Me===i&&(Me=null),Ke=Ie,Pt=[],Pi=t.charAt(Ie),fe.test(Pi)?Ie++:(Pi=i,vt===0&&Ht(js));Pi!==i;)Pt.push(Pi),Pi=t.charAt(Ie),fe.test(Pi)?Ie++:(Pi=i,vt===0&&Ht(js));if(t.charCodeAt(Ie)===46?(Pi=B,Ie++):(Pi=i,vt===0&&Ht(R1)),Pi!==i){if(Qi=[],Ar=t.charAt(Ie),fe.test(Ar)?Ie++:(Ar=i,vt===0&&Ht(js)),Ar!==i)for(;Ar!==i;)Qi.push(Ar),Ar=t.charAt(Ie),fe.test(Ar)?Ie++:(Ar=i,vt===0&&Ht(js));else Qi=i;Qi!==i?(Pt=[Pt,Pi,Qi],Ke=Pt):(Ie=Ke,Ke=i)}else Ie=Ke,Ke=i;if(Ke===i)if(Ke=[],Pt=t.charAt(Ie),fe.test(Pt)?Ie++:(Pt=i,vt===0&&Ht(js)),Pt!==i)for(;Pt!==i;)Ke.push(Pt),Pt=t.charAt(Ie),fe.test(Pt)?Ie++:(Pt=i,vt===0&&Ht(js));else Ke=i;if(Ke!==i){if(Pt=Ie,t.charCodeAt(Ie)===101?(Pi=z,Ie++):(Pi=i,vt===0&&Ht(Lb)),Pi!==i){if(Qi=t.charAt(Ie),ge.test(Qi)?Ie++:(Qi=i,vt===0&&Ht(Wd)),Qi===i&&(Qi=null),Ar=[],ki=t.charAt(Ie),fe.test(ki)?Ie++:(ki=i,vt===0&&Ht(js)),ki!==i)for(;ki!==i;)Ar.push(ki),ki=t.charAt(Ie),fe.test(ki)?Ie++:(ki=i,vt===0&&Ht(js));else Ar=i;Ar!==i?(Pi=[Pi,Qi,Ar],Pt=Pi):(Ie=Pt,Pt=i)}else Ie=Pt,Pt=i;Pt===i&&(Pt=null),ar=ie,ie=Ry()}else Ie=ie,ie=i;return ie}function Ub(ie,Me){return ie.map(function(Ke){return Ke[Me]})}function mf(ie,Me,Ke){return[ie].concat(Ub(Me,Ke))}Vs=s();const jb=Vs!==i&&Ie===t.length;function yf(){throw Vs!==i&&Ie<t.length&&Ht(hf()),Au(Xn,Xi<t.length?ku(Xi):null,Xi<t.length?Dt(Xi,Xi+1):Dt(Xi,Xi))}return e.peg$library?{peg$result:Vs,peg$currPos:Ie,peg$FAILED:i,peg$maxFailExpected:Xn,peg$maxFailPos:Xi,peg$success:jb,peg$throw:jb?void 0:yf}:jb?Vs:void yf()}function AK(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=Oue(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new Q("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:Oue(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!s1e(e[i].effects,e[i+1].effects))throw new Q("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});o1e(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function Oue(t){let e;if(!t)return[];try{e=xst(t)}catch(i){throw new Q("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Sst(i))}function Sst(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return $st(t);case"opacity":return Tst(t);case"hue-rotate":return Est(t);case"blur":return Cst(t);case"drop-shadow":return Ist(t);case"bloom":return Mst(t)}}catch(e){throw e.details.filter=t,e}throw new Q("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function $st(t){let e=1;return TC(t.parameters,1),t.parameters.length===1&&(e=Sd(t.parameters[0])),new P9(t.name,e)}function Tst(t){let e=1;return TC(t.parameters,1),t.parameters.length===1&&(e=Sd(t.parameters[0])),new r1e(e)}function Est(t){let e=0;return TC(t.parameters,1),t.parameters.length===1&&(e=Rst(t.parameters[0])),new t1e(e)}function Cst(t){let e=0;return TC(t.parameters,1),t.parameters.length===1&&(e=LK(t.parameters[0]),cP(e,t.parameters[0])),new Y_e(e)}function Ist(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new Q("effect:type-error","Accepts only one color",{});i=Dst(r)}else{const n=LK(r);if(Object.isFrozen(e))throw new Q("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&cP(n,r)}if(e.length<2||e.length>3)throw new Q("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Q_e(e[0],e[1],e[2]||0,i||tTe("black"))}function Mst(t){let e=1,i=0,r=0;return TC(t.parameters,3),t.parameters[0]&&(e=Sd(t.parameters[0])),t.parameters[1]&&(i=LK(t.parameters[1]),cP(i,t.parameters[1])),t.parameters[2]&&(r=Sd(t.parameters[2])),new J_e(e,i,r)}function TC(t,e){if(t.length>e)throw new Q("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function G4(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in PK)return"<length>";if(t.unit in OK)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function cP(t,e){if(t<0)throw new Q("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function kst(t){if(t.type!=="quantity"||t.unit!==null)throw new Q("effect:type-error",`Expected <double>, Actual: ${G4(t)}`,{term:t})}function Ast(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new Q("effect:type-error",`Expected <double> or <percentage>, Actual: ${G4(t)}`,{term:t})}const OK={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Ost(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&OK[t.unit]!=null))throw new Q("effect:type-error",`Expected <angle>, Actual: ${G4(t)}`,{term:t})}const PK={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Pst(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&PK[t.unit]!=null))throw new Q("effect:type-error",`Expected <length>, Actual: ${G4(t)}`,{term:t})}function Sd(t){Ast(t);const e=t.value;return cP(e,t),t.unit==="%"?.01*e:e}function Lst(t){return kst(t),cP(t.value,t),t.value}function Rst(t){return Ost(t),t.value*OK[t.unit]||0}function LK(t){return Pst(t),t.value*PK[t.unit]||0}function Dst(t){switch(t.colorType){case"hex":return K7e(t.value);case"named":return tTe(t.value);case"function":return Fst(t.value)}}function tTe(t){if(!k_e(t))throw new Q("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return X7e(t)}const Nst=/^rgba?/i,zst=/^hsla?/i;function Fst(t){if(TC(t.parameters,4),Nst.test(t.name))return[Sd(t.parameters[0]),Sd(t.parameters[1]),Sd(t.parameters[2]),t.parameters[3]?Sd(t.parameters[3]):1];if(zst.test(t.name))return A_e(Lst(t.parameters[0]),Sd(t.parameters[1]),Sd(t.parameters[2]),t.parameters[3]?Sd(t.parameters[3]):1);throw new Q("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function GA(t,e,i){var r;try{return jst(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function HA(t,e,i,r){try{const n=Ust(t);Wn(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function Ust(t){const e=AK(t);return e?MWe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function jst(t){if(!t||t.length===0)return null;if(Vst(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:RF(i.value)});return e}return RF(t)}function Vst(t){const e=t[0];return!!e&&"scale"in e}function RF(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[jf(i,"amount")];break;case"blur":r=[jf(i,"radius","pt")];break;case"hue-rotate":r=[jf(i,"angle","deg")];break;case"drop-shadow":r=[jf(i,"xoffset","pt"),jf(i,"yoffset","pt"),jf(i,"blurRadius","pt"),Bst(i,"color")];break;case"bloom":r=[jf(i,"strength"),jf(i,"radius","pt"),jf(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;AK(n),e.push(n)}return e.join(" ")}function jf(t,e,i){if(t[e]==null)throw new Q("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function Bst(t,e){if(t[e]==null)throw new Q("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const Gst={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Sr}},"portal-item":{read:!0,write:{layerContainerTypes:Sr}}}}},Pue={read:{reader:GA},write:{allowNull:!0,writer:HA,layerContainerTypes:Sr}},Hst={json:{read:!1,write:!1,origins:{"web-map":Pue,"portal-item":Pue}}},qst=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([p(Gst)],i.prototype,"blendMode",void 0),u([p(Hst)],i.prototype,"effect",void 0),i=u([U("esri.layers.mixins.BlendLayer")],i),i},Wst=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([p({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=u([U("esri.layers.mixins.CustomParametersMixin")],i),i},iTe=96;function HPt(t,e){const i=t.extent,r=t.width,n=Ha(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*pX*iTe:0}function Jst(t,e){return t/(Ha(e)*pX*iTe)}function Zst(t,e){const i=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),n=Jst(e,i.spatialReference);return i.clone().expand(n*r/i.width)}function Yst(t,e,i){return Xst(t,e)&&Kst(t,i)}function Xst(t,e){return e===0||Sl(t,e)||t<e}function Kst(t,e){return e===0||Sl(t,e)||t>e}function Qst(t,e){return Sl(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const Lue={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let Em=class extends It.ClonableMixin(ye){constructor(e){super(e),this.id=xC(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([p({type:String,json:{write:!0}})],Em.prototype,"id",void 0),u([p({type:Number,json:Lue})],Em.prototype,"maxScale",void 0),u([p({type:Number,json:Lue})],Em.prototype,"minScale",void 0),u([p({type:String,json:{write:!0}})],Em.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],Em.prototype,"where",void 0),Em=u([U("esri.layers.support.DisplayFilter")],Em);function eot(t,e){return{...e,filterMode:t.mode}}function tot(t,e){return rTe(t,e).next().value??null}function WPt(t,e,i){const r=iot(t);if(r&&(Pve(e,r[0])||SH(i,r[1])))return"";const n=Array.from(rTe(t,e,i)),s=rot(n,e,i)?"1=1":n.map(o=>o.where||"1=1").reduce((o,a)=>z9(o,a),"");return s&&s!=="1=1"?s:""}function iot(t){if(nTe(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],qA(i)),e[1]=Math.min(e[1],DF(r));return e}function*rTe(t,e,i){if(nTe(t)==="manual"){const r=t.filters.find(n=>n.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)not(r.minScale,r.maxScale,e,i)&&(yield r)}}function rot(t,e,i){var s,o;if(t.length===0)return!0;const r=qA((s=t.at(0))==null?void 0:s.minScale),n=DF((o=t.at(-1))==null?void 0:o.maxScale);if(SH(r,e)||Pve(n,i))return!0;for(let a=0;a<t.length-1;a++){const l=t[a],c=t[a+1];if(SH(qA(c.minScale),DF(l.maxScale)))return!0}return!1}function not(t,e,i,r){return t=qA(t),i=qA(i),e=DF(e),!(!Sl(i,t)&&(r??i)>t)&&!q4e(e,i)&&(r===void 0||!Sl(r,t))}function nTe(t){return"mode"in t?t.mode:t.filterMode}function qA(t){return t||Number.POSITIVE_INFINITY}function DF(t){return t||0}let aw=class extends It.ClonableMixin(ye){constructor(e){super(e),this.activeFilterId=null,this.filters=new(Ze.ofType(Em)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort((o,a)=>{const l=Qst(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return l===0?c:l}),i[r]=s.map(o=>o.toJSON(n))}write(e,i){return super.write(e,eot(this,i))}};u([p({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],aw.prototype,"activeFilterId",void 0),u([p({type:Ze.ofType(Em),nonNullable:!0,json:{write:!0}})],aw.prototype,"filters",void 0),u([qe("filters")],aw.prototype,"writeFilters",null),u([p({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],aw.prototype,"mode",void 0),aw=u([U("esri.layers.support.DisplayFilterInfo")],aw);const sot=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([p(oot)],i.prototype,"displayFilterEnabled",void 0),u([p(aot)],i.prototype,"displayFilterInfo",void 0),i=u([U("esri.layers.mixins.DisplayFilteredLayer")],i),i},oot={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:Sr,writer(t,e,i){Wn(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},aot={type:aw,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Sr},origins:{"web-scene":{write:!1,read:!1}}}},hW=iqe(),sTe=new Map,oTe=new Map;async function ZPt(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=sTe.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await Ot(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function Rue(t,e,i=!1){var s,o,a;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=oTe.get(r))==null?void 0:s.entries();if(n){for(const[l,c]of n)if(c.name===e){const h=!((o=c.stack)!=null&&o.hasForwardEdits());if(!h&&i){const[{deleteForwardEdits:m},{default:y}]=await Promise.all([$e(()=>import("./deleteForwardEdits-rTDIyv03.js"),[]),$e(()=>import("./DeleteForwardEditsParameters-kSBzEOt_.js"),[])]),v=await m(r,l,new y({sessionId:hW,moment:c.moment}));return v.success&&((a=c.stack)==null||a.clearForwardEdits()),v.success}return h}}return!0}function VD(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=oTe.get(i))==null?void 0:n.entries();if(r){for(const[s,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const RK=new pa.EventEmitter;function aTe(t){return RK.on("apply-edits",new WeakRef(t))}function lTe(t){return RK.on("update-moment",new WeakRef(t))}function Due(t,e,i=null,r=!1){const n=Mo();return r=e==null||r,RK.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const cTe=Symbol();function YPt(t){return t!=null&&typeof t=="object"&&cTe in t}function aM(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function Rk(t,e,i){const r=new URL(t).host,n=sTe.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const lot=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=o=>{const{serviceUrl:a,layerId:l,gdbVersion:c,mayReceiveServiceEdits:h,result:m}=o,y=a===this.url,v=l!=null&&this.layerId!=null&&l===this.layerId,w=aM(this),x=aM(this)&&Rk(a,c,this.gdbVersion);if(!y||w&&!x||!v&&!h)return;const S=m.then(C=>{var R;if(this.lastEditsEventDate=new Date,v&&(C.addedFeatures.length||C.updatedFeatures.length||C.deletedFeatures.length||C.addedAttachments.length||C.updatedAttachments.length||C.deletedAttachments.length))return this.emit("edits",ce(C)),C;const k=(R=C.editedFeatures)==null?void 0:R.find(({layerId:D})=>D===this.layerId);if(k){const{adds:D,updates:B,deletes:z}=k.editedFeatures,W={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:D?D.map(({attributes:Y})=>({objectId:this.objectIdField&&Y[this.objectIdField],globalId:this.globalIdField&&Y[this.globalIdField]})):[],deletedFeatures:z?z.map(({attributes:Y})=>({objectId:this.objectIdField&&Y[this.objectIdField],globalId:this.globalIdField&&Y[this.globalIdField]})):[],updatedFeatures:B?B.map(({current:{attributes:Y}})=>({objectId:this.objectIdField&&Y[this.objectIdField],globalId:this.globalIdField&&Y[this.globalIdField]})):[],editedFeatures:ce(C.editedFeatures),exceededTransferLimit:!1,historicMoment:ce(C.historicMoment)};return this.emit("edits",W),W}const A={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:ce(C.editedFeatures),exceededTransferLimit:!1,historicMoment:ce(C.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(a,c,A.historicMoment)&&this.emit("edits",A),A}).then(C=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(a,c,C.historicMoment)&&(this.historicMoment=C.historicMoment),C));this.emit("apply-edits",{result:S})},this._updateMomentHandler=o=>{const{serviceUrl:a,gdbVersion:l,moment:c}=o,h=a===this.url,m=aM(this),y=aM(this)&&Rk(a,l,this.gdbVersion),v=aM(this)&&!Rk(a,this.gdbVersion,null);h&&m&&y&&v&&"historicMoment"in this&&this.historicMoment!==c&&(this.historicMoment=c)},this.when().then(()=>{this.addHandles(aTe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(lTe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,o,a){return"historicMoment"in this&&this.historicMoment!==a&&VD(s,o)}},e=cTe,n);return u([p()],r.prototype,"lastEditsEventDate",void 0),r=u([U("esri.layers.mixins.EditBusLayer")],r),r};var pW;const m8=new Et({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),y8=new Et({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Sh=pW=class extends ye{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new St({geometry:ce(i),objectIds:ce(s),spatialRelationship:r,timeExtent:ce(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new pW({geometry:ce(e),objectIds:ce(n),spatialRelationship:i,timeExtent:ce(r),where:t,units:s,distance:o})}};u([p({type:String,json:{write:!0}})],Sh.prototype,"where",void 0),u([p({types:yC,json:{write:!0}})],Sh.prototype,"geometry",void 0),u([p({type:m8.apiValues,json:{name:"spatialRel",read:{reader:m8.read},write:{allowNull:!1,writer:m8.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Sh.prototype,"spatialRelationship",void 0),u([p({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Sh.prototype,"distance",void 0),u([p({type:[Number],json:{write:!0}})],Sh.prototype,"objectIds",void 0),u([p({type:y8.apiValues,json:{read:y8.read,write:{writer:y8.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Sh.prototype,"units",void 0),u([p({type:Yi,json:{write:!0}})],Sh.prototype,"timeExtent",void 0),Sh=pW=u([U("esri.layers.support.FeatureFilter")],Sh);const cot=Sh;var fW;const Nue={read:{reader:GA},write:{writer:HA,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},zue={read:{reader:GA},write:{writer:HA,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Fue={name:"showExcludedLabels",default:!0};let lw=fW=class extends ye{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new Q("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new Q("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new fW({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([p({type:cot,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?Wn(i,n,e):Wn(i,null,e)}}}})],lw.prototype,"filter",void 0),u([p({json:{read:GA,write:{writer:HA,allowNull:!0},origins:{"web-map":Nue,"portal-item":Nue}}})],lw.prototype,"includedEffect",void 0),u([p({json:{read:GA,write:{writer:HA,allowNull:!0},origins:{"web-map":zue,"portal-item":zue}}})],lw.prototype,"excludedEffect",void 0),u([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Fue,"portal-item":Fue}}})],lw.prototype,"excludedLabelsVisible",void 0),lw=fW=u([U("esri.layers.support.FeatureEffect")],lw);const Uue={write:{allowNull:!0}},uot={type:lw,json:{origins:{"web-map":Uue,"portal-item":Uue}}},dot=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([p(uot)],i.prototype,"featureEffect",void 0),i=u([U("esri.layers.mixins.FeatureEffectLayer")],i),i};var mW;let x2=mW=class extends ye{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return Oo(t,e,this.expression)}clone(){return new mW({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};u([p({type:String,json:{write:{isRequired:!0}}})],x2.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],x2.prototype,"title",void 0),x2=mW=u([U("esri.symbols.support.FeatureExpressionInfo")],x2);const jue=x2,H4={unknown:1,inches:pn(1,"meters","inches"),feet:pn(1,"meters","feet"),"us-feet":pn(1,"meters","us-feet"),yards:pn(1,"meters","yards"),miles:pn(1,"meters","miles"),"nautical-miles":pn(1,"meters","nautical-miles"),millimeters:pn(1,"meters","millimeters"),centimeters:pn(1,"meters","centimeters"),decimeters:pn(1,"meters","decimeters"),meters:pn(1,"meters","meters"),kilometers:pn(1,"meters","kilometers"),"decimal-degrees":1/P6e(1,"meters",yn.radius)};function XPt(t){return!!t&&H4[t]!=null}function KPt(t){return 1/(H4[t]||1)}function hot(){const t=Object.keys(H4);return $Y(t,"decimal-degrees"),t.sort(),t}const pot=hot(),RR=Wt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Vue=new Et({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let dm=class extends It.ClonableMixin(ye){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&q5e(this.featureExpressionInfo,e.featureExpressionInfo)}};u([p({type:jue,json:{write:!0}})],dm.prototype,"featureExpressionInfo",void 0),u([Ue("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],dm.prototype,"readFeatureExpressionInfo",null),u([qe("featureExpressionInfo",{featureExpressionInfo:{type:jue},"featureExpression.value":{type:[0]}})],dm.prototype,"writeFeatureExpressionInfo",null),u([p({type:RR.apiValues,nonNullable:!0,json:{type:RR.jsonValues,read:RR.read,write:{writer:RR.write,isRequired:!0}}})],dm.prototype,"mode",null),u([p({type:Number,json:{write:!0}})],dm.prototype,"offset",void 0),u([p({type:pot,json:{type:String,read:Vue.read,write:Vue.write}})],dm.prototype,"unit",null),dm=u([U("esri.symbols.support.ElevationInfo")],dm);let jS=class extends ye{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};u([p({type:String,json:{write:!0}})],jS.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],jS.prototype,"label",void 0),u([p()],jS.prototype,"type",void 0),jS=u([U("esri.tables.elements.AttributeTableElement")],jS);const EC=jS;let S2=class extends It.ClonableMixin(EC){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};u([p({type:["auto"],json:{write:!0}})],S2.prototype,"displayType",void 0),u([p({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S2.prototype,"type",void 0),S2=u([U("esri.tables.elements.AttributeTableAttachmentElement")],S2);const uTe=S2;let cw=class extends It.ClonableMixin(EC){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};u([p({type:String,json:{read:!1,write:!1}})],cw.prototype,"description",void 0),u([p({type:String,json:{write:{enabled:!0,isRequired:!0}}})],cw.prototype,"fieldName",void 0),u([p({type:String,json:{read:!1,write:!1}})],cw.prototype,"label",void 0),u([p({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],cw.prototype,"type",void 0),cw=u([U("esri.tables.elements.AttributeTableFieldElement")],cw);const dTe=cw;let $2=class extends It.ClonableMixin(EC){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};u([p({type:Number,json:{type:fi,write:{enabled:!0,isRequired:!0}}})],$2.prototype,"relationshipId",void 0),u([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],$2.prototype,"type",void 0),$2=u([U("esri.tables.elements.AttributeTableRelationshipElement")],$2);const hTe=$2,pTe={base:EC,key:"type",typeMap:{attachment:uTe,field:dTe,relationship:hTe}};function fot(t){return{typesWithGroup:{base:EC,key:"type",typeMap:{attachment:uTe,field:dTe,group:t,relationship:hTe}},typesWithoutGroup:pTe}}let T2=class extends It.ClonableMixin(EC){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};u([p({types:[pTe],json:{name:"attributeTableElements",write:!0}})],T2.prototype,"elements",void 0),u([p({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],T2.prototype,"type",void 0),T2=u([U("esri.tables.elements.AttributeTableGroupElement")],T2);const mot=T2;let E2=class extends It.ClonableMixin(ye){constructor(e){super(e),this.field=null,this.order=null}};u([p({type:String,json:{write:!0}})],E2.prototype,"field",void 0),u([p({type:["asc","desc"],json:{write:!0}})],E2.prototype,"order",void 0),E2=u([U("esri.tables.support.FieldOrder")],E2);const yot=E2;var yW;const got=fot(mot);let C2=yW=class extends ye{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new yW({elements:ce(this.elements),orderByFields:ce(this.orderByFields)})}};u([p({types:[got.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],C2.prototype,"elements",void 0),u([p({type:[yot],json:{write:!0}})],C2.prototype,"orderByFields",void 0),C2=yW=u([U("esri.tables.AttributeTableTemplate")],C2);const vot=C2,bot={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Sr}}},q4={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},W4={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Sr}}},wot={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:n1}}},_ot={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Sr}}},xot={value:null,type:dm,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Sr}}};function oLt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const fTe={write:{enabled:!0,layerContainerTypes:Sr},read:!0},gW={type:Number,json:{origins:{"web-document":fTe,"portal-item":{write:{layerContainerTypes:Sr}}}}},Sot={...gW,json:{...gW.json,origins:{"web-document":{...fTe,write:{enabled:!0,layerContainerTypes:Sr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?RA(e.layerDefinition.drawingInfo.transparency):void 0:RA(e.drawingInfo.transparency)}}}},aLt={type:jt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=jt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=et.fromJSON(e.spatialReference)),i}}}},read:!1}},$ot={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Tot={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Sr}}},Eot={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Sr}}},mTe={json:{write:{ignoreOrigin:!0,layerContainerTypes:Sr},origins:{"web-map":{read:!1,write:!1}}}},Cot={type:vot,json:{name:"attributeTableInfo",write:!0}};let hm=class extends It.ClonableMixin(ye){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([p()],hm.prototype,"creatorField",void 0),u([p()],hm.prototype,"creationDateField",void 0),u([p()],hm.prototype,"editorField",void 0),u([p()],hm.prototype,"editDateField",void 0),u([p()],hm.prototype,"realm",void 0),u([p(Yz("dateFieldsTimeReference",!0))],hm.prototype,"timeZone",void 0),hm=u([U("esri.layers.support.EditFieldsInfo")],hm);let Oh=class extends It.ClonableMixin(ye){constructor(e){super(e)}};u([p({constructOnly:!0,json:{write:!0}})],Oh.prototype,"name",void 0),u([p({constructOnly:!0,json:{write:!0}})],Oh.prototype,"fields",void 0),u([p({constructOnly:!0,json:{write:!0}})],Oh.prototype,"isAscending",void 0),u([p({constructOnly:!0,json:{write:!0}})],Oh.prototype,"indexType",void 0),u([p({constructOnly:!0,json:{write:!0}})],Oh.prototype,"isUnique",void 0),u([p({constructOnly:!0,json:{write:!0}})],Oh.prototype,"description",void 0),Oh=u([U("esri.layers.support.FeatureIndex")],Oh);async function yTe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=gTe(t));const r=Iot(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function Iot(t){return gTe(t)*Mot(t)}function Mot(t){return t.capabilities.query.maxRecordCount||2e3}function gTe(t){return t.capabilities.query.supportsMaxRecordCountFactor?St.MAX_MAX_RECORD_COUNT_FACTOR:1}var vW;let I2=vW=class extends ye{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new vW({minValue:this.minValue,maxValue:this.maxValue})}};u([p({type:Number,json:{write:!0}})],I2.prototype,"minValue",void 0),u([p({type:Number,json:{write:!0}})],I2.prototype,"maxValue",void 0),I2=vW=u([U("esri.renderers.support.AuthoringInfoClassBreakInfo")],I2);var bW;let lv=bW=class extends ye{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new bW({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ce(this.classBreakInfos)})}};u([p({type:String,json:{write:!0}})],lv.prototype,"field",void 0),u([p({type:String,json:{write:!0}})],lv.prototype,"normalizationField",void 0),u([p({type:String,json:{write:!0}})],lv.prototype,"label",void 0),u([p({type:[I2],json:{write:!0}})],lv.prototype,"classBreakInfos",void 0),lv=bW=u([U("esri.renderers.support.AuthoringInfoFieldInfo")],lv);var wW;let VS=wW=class extends ye{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new wW({label:this.label,value:this.value,size:this.size})}};u([p({type:String,json:{write:!0}})],VS.prototype,"label",void 0),u([p({type:Number,json:{write:!0}})],VS.prototype,"size",void 0),u([p({type:Number,json:{write:!0}})],VS.prototype,"value",void 0),VS=wW=u([U("esri.renderers.support.AuthoringInfoSizeStop")],VS);const kot=VS;var _W;const DR=new Et({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),NR=new Et({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Bue={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},Gue=["high-to-low","above-and-below","centered-on","extremes"],Hue=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],que=["seconds","minutes","hours","days","months","years"],Aot=["circle","diamond","hexagon-flat","hexagon-pointy","square"],Oot=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let Ms=_W=class extends ye{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new _W({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:ce(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([p({types:Bue,json:{write:!0}})],Ms.prototype,"endTime",void 0),u([_i("endTime")],Ms.prototype,"castEndTime",null),u([p({type:String,json:{write:!0}})],Ms.prototype,"field",void 0),u([p({type:Number,json:{write:!0}})],Ms.prototype,"maxSliderValue",void 0),u([p({type:Number,json:{write:!0}})],Ms.prototype,"minSliderValue",void 0),u([p({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ms.prototype,"normalizationField",null),u([p({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ms.prototype,"referenceSizeScale",null),u([p({type:Aot,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ms.prototype,"referenceSizeSymbolStyle",null),u([p({type:Oot,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Ms.prototype,"spikeSymbolStyle",null),u([p({types:Bue,json:{write:!0}})],Ms.prototype,"startTime",void 0),u([_i("startTime")],Ms.prototype,"castStartTime",null),u([p({type:[kot],json:{origins:{"web-scene":{write:!1}},write:!0}})],Ms.prototype,"sizeStops",null),u([p({type:DR.apiValues,value:null,json:{type:DR.jsonValues,read:DR.read,write:DR.write}})],Ms.prototype,"style",null),u([p({type:Hue,value:null,json:{type:Hue,origins:{"web-scene":{type:Gue,write:{writer:(t,e)=>{Gue.includes(t)&&(e.theme=t)}}}},write:!0}})],Ms.prototype,"theme",null),u([p({type:NR.apiValues,json:{type:NR.jsonValues,read:NR.read,write:NR.write}})],Ms.prototype,"type",void 0),u([p({type:que,json:{type:que,write:!0}})],Ms.prototype,"units",void 0),Ms=_W=u([U("esri.renderers.support.AuthoringInfoVisualVariable")],Ms);const Pot=Ms;let Q$=class extends ye{constructor(e){super(e),this.type=null}};u([p({readOnly:!0,json:{read:!1,write:!0}})],Q$.prototype,"type",void 0),Q$=u([U("esri.rest.support.ColorRamp")],Q$);var xW;let Rm=xW=class extends Q${constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new xW({fromColor:ce(this.fromColor),toColor:ce(this.toColor),algorithm:this.algorithm})}};u([at({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Rm.prototype,"algorithm",void 0),u([p({type:Ye,json:{type:[fi],write:!0}})],Rm.prototype,"fromColor",void 0),u([p({type:Ye,json:{type:[fi],write:!0}})],Rm.prototype,"toColor",void 0),u([p({type:["algorithmic"]})],Rm.prototype,"type",void 0),Rm=xW=u([U("esri.rest.support.AlgorithmicColorRamp")],Rm);var SW;let C$=SW=class extends Q${constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new SW({colorRamps:ce(this.colorRamps)})}};u([p({type:[Rm],json:{write:!0}})],C$.prototype,"colorRamps",void 0),u([p({type:["multipart"]})],C$.prototype,"type",void 0),C$=SW=u([U("esri.rest.support.MultipartColorRamp")],C$);const Lot={key:"type",base:Q$,typeMap:{algorithmic:Rm,multipart:C$}};function Rot(t){return t!=null&&t.type?t.type==="algorithmic"?Rm.fromJSON(t):t.type==="multipart"?C$.fromJSON(t):null:null}var $W;const C0=new Et({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),zR=new Et({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Wue=new Et({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),Jue=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],Dot=["high-to-low","above-and-below","above","below"],Not=["flow-line","wave-front"],zot=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Yr=$W=class extends ye{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?Rot(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new $W({classificationMethod:this.classificationMethod,colorRamp:ce(this.colorRamp),fadeRatio:ce(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(),field1:ce(this.field1),field2:ce(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([p({type:C0.apiValues,value:null,json:{type:C0.jsonValues,read:C0.read,write:C0.write,origins:{"web-document":{default:"manual",type:C0.jsonValues,read:C0.read,write:C0.write}}}})],Yr.prototype,"classificationMethod",null),u([p({types:Lot,json:{write:!0}})],Yr.prototype,"colorRamp",void 0),u([Ue("colorRamp")],Yr.prototype,"readColorRamp",null),u([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yr.prototype,"fadeRatio",void 0),u([p({type:[String],value:null,json:{write:!0}})],Yr.prototype,"fields",null),u([p({type:lv,value:null,json:{write:!0}})],Yr.prototype,"field1",null),u([p({type:lv,value:null,json:{write:!0}})],Yr.prototype,"field2",null),u([p({type:Not,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yr.prototype,"flowTheme",null),u([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Yr.prototype,"focus",null),u([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Yr.prototype,"isAutoGenerated",void 0),u([p({type:Number,value:null,json:{type:fi,write:!0}})],Yr.prototype,"numClasses",null),u([p({type:Jue,json:{type:Jue,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Yr.prototype,"lengthUnit",void 0),u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yr.prototype,"maxSliderValue",void 0),u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yr.prototype,"minSliderValue",void 0),u([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yr.prototype,"statistics",null),u([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Yr.prototype,"standardDeviationInterval",null),u([p({type:zR.apiValues,value:null,json:{type:zR.jsonValues,read:zR.read,write:zR.write,origins:{"web-scene":{type:Wue.jsonValues,write:{writer:Wue.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],Yr.prototype,"type",null),u([p({type:[Pot],json:{write:!0}})],Yr.prototype,"visualVariables",void 0),u([p({type:zot,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yr.prototype,"univariateSymbolStyle",null),u([p({type:Dot,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yr.prototype,"univariateTheme",null),Yr=$W=u([U("esri.renderers.support.AuthoringInfo")],Yr);const g8=new Et({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let gc=class extends ye{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([p({type:Yr,json:{write:!0}})],gc.prototype,"authoringInfo",void 0),u([p({type:g8.apiValues,readOnly:!0,json:{type:g8.jsonValues,read:!1,write:{writer:g8.write,ignoreOrigin:!0,isRequired:!0}}})],gc.prototype,"type",void 0),gc=u([U("esri.renderers.Renderer")],gc);let M2=class extends It.ClonableMixin(ye){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([p({type:Boolean,json:{write:!0}})],M2.prototype,"showLegend",void 0),u([p({type:String,json:{write:!0}})],M2.prototype,"title",void 0),M2=u([U("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],M2);const vTe=M2,v8=new Et({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ko=class extends ye{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Ce.getLogger(this).error(".field: field must be a string value"),null):jO(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([p()],Ko.prototype,"index",void 0),u([p({type:v8.apiValues,readOnly:!0,json:{read:v8.read,write:{writer:v8.write,isRequired:!0}}})],Ko.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Ko.prototype,"field",void 0),u([_i("field")],Ko.prototype,"castField",null),u([p({type:String,json:{write:!0}})],Ko.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],Ko.prototype,"valueExpressionTitle",void 0),u([p({readOnly:!0})],Ko.prototype,"arcadeRequired",null),u([p({type:vTe,json:{write:!0}})],Ko.prototype,"legendOptions",void 0),Ko=u([U("esri.renderers.visualVariables.VisualVariable")],Ko);var TW;let uw=TW=class extends ye{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new TW({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([p({type:Ye,json:{type:[fi],write:{isRequired:!0}}})],uw.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],uw.prototype,"label",void 0),u([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],uw.prototype,"value",void 0),u([qe("value")],uw.prototype,"writeValue",null),uw=TW=u([U("esri.renderers.visualVariables.support.ColorStop")],uw);const Fot=uw;var EW;let cv=EW=class extends Ko{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new EW({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([p({readOnly:!0})],cv.prototype,"cache",null),u([p({type:["color"],json:{type:["colorInfo"]}})],cv.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],cv.prototype,"normalizationField",void 0),u([p({type:[Fot],json:{write:!0}})],cv.prototype,"stops",null),cv=EW=u([U("esri.renderers.visualVariables.ColorVariable")],cv);var CW;let qg=CW=class extends ye{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return RA(e.transparency)}writeOpacity(t,e,i){e[i]=b4(t)}clone(){return new CW({label:this.label,opacity:this.opacity,value:this.value})}};u([p({type:String,json:{write:!0}})],qg.prototype,"label",void 0),u([p({type:Number,json:{type:fi,write:{target:"transparency",isRequired:!0}}})],qg.prototype,"opacity",void 0),u([Ue("opacity",["transparency"])],qg.prototype,"readOpacity",null),u([qe("opacity")],qg.prototype,"writeOpacity",null),u([p({type:Number,json:{write:{isRequired:!0}}})],qg.prototype,"value",void 0),qg=CW=u([U("esri.renderers.visualVariables.support.OpacityStop")],qg);const Uot=qg;var IW;let Dm=IW=class extends Ko{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new IW({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([p({readOnly:!0})],Dm.prototype,"cache",null),u([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Dm.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Dm.prototype,"normalizationField",void 0),u([p({type:[Uot],json:{write:!0}})],Dm.prototype,"stops",null),Dm=IW=u([U("esri.renderers.visualVariables.OpacityVariable")],Dm);var MW;let uv=MW=class extends Ko{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var t;return new MW({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};u([p({readOnly:!0})],uv.prototype,"cache",null),u([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],uv.prototype,"axis",void 0),u([p({type:["rotation"],json:{type:["rotationInfo"]}})],uv.prototype,"type",void 0),u([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],uv.prototype,"rotationType",void 0),uv=MW=u([U("esri.renderers.visualVariables.RotationVariable")],uv);function jot(t){return Ii(t)}var kW;let $d=kW=class extends ye{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new kW({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([p({type:String,json:{write:!0}})],$d.prototype,"label",void 0),u([p({type:Number,cast:Ii,json:{write:{isRequired:!0}}})],$d.prototype,"size",void 0),u([p({type:Number,json:{write:{isRequired:!0}}})],$d.prototype,"value",void 0),u([p({type:Boolean,json:{write:!1}})],$d.prototype,"useMinValue",void 0),u([p({type:Boolean,json:{write:!1}})],$d.prototype,"useMaxValue",void 0),$d=kW=u([U("esri.renderers.visualVariables.support.SizeStop")],$d);let BD=class extends vTe{constructor(){super(...arguments),this.customValues=null}};u([p({type:[Number],json:{write:!0}})],BD.prototype,"customValues",void 0),BD=u([U("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],BD);const bTe=BD;var cy,Ds;function I$(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function d1(t){return t!=null&&!isNaN(t)&&isFinite(t)}function wTe(t){return t.valueExpression?cy.Expression:t.field&&typeof t.field=="string"?cy.Field:cy.Unknown}function Vot(t,e){const i=e||wTe(t),r=t.valueUnit||"unknown";return i===cy.Unknown?Ds.Constant:t.stops?Ds.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?Ds.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?Ds.Proportional:Ds.Additive:Ds.Identity:Ds.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(cy||(cy={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(Ds||(Ds={}));const _Te=()=>Ce.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),J4=t=>_Te().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),Z4=()=>_Te().error("Use of arcade expressions requires an arcade context"),Zue=new _r,GD=Math.PI,xTe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function STe(t,e,i){var w;const r="visualVariables"in t?(w=t.visualVariables)==null?void 0:w.find(x=>x.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void J4("ColorVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let m=r.cache.compiledFunc;if(!l&&!h){const x=r.stops;return x&&x[0]&&x[0].color}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void Z4();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},S=i.arcade.arcadeUtils,C=S.getViewInfo(x),k=S.createExecContext(s,C,i.timeZone);if(!m){const A=S.createSyntaxTree(r.valueExpression);m=S.createFunction(A),r.cache.compiledFunc=m}a=S.executeFunction(m,k)}else o&&(a=o[l]);const y=r.normalizationField,v=o!=null&&y!=null?parseFloat(o[y]):void 0;if(a!=null&&(!y||n||!isNaN(v)&&v!==0)){d1(v)&&!n&&(a/=v);const x=DK(a,c);if(x){const S=x[0],C=x[1],k=S===C?r.stops[S].color:Ye.blendColors(r.stops[S].color,r.stops[C].color,x[2],i!=null?i.color:void 0);return new Ye(k)}}}function $Te(t,e,i){var w;const r="visualVariables"in t?(w=t.visualVariables)==null?void 0:w.find(x=>x.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void J4("OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:c,hasExpression:h}=r.cache;let m=r.cache.compiledFunc;if(!l&&!h){const x=r.stops;return x&&x[0]&&x[0].opacity}if(typeof a!="number")if(h){if((i==null?void 0:i.arcade)==null)return void Z4();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},S=i.arcade.arcadeUtils,C=S.getViewInfo(x),k=S.createExecContext(s,C,i.timeZone);if(!m){const A=S.createSyntaxTree(r.valueExpression);m=S.createFunction(A),r.cache.compiledFunc=m}a=S.executeFunction(m,k)}else o&&(a=o[l]);const y=r.normalizationField,v=o!=null&&y!=null?parseFloat(o[y]):void 0;if(a!=null&&(!y||n||!isNaN(v)&&v!==0)){d1(v)&&!n&&(a/=v);const x=DK(a,c);if(x){const S=x[0],C=x[1];if(S===C)return r.stops[S].opacity;{const k=r.stops[S].opacity;return k+(r.stops[C].opacity-k)*x[2]}}}}function TTe(t,e,i){var v;const r="visualVariables"in t?(v=t.visualVariables)==null?void 0:v.find(w=>w.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void J4("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a==null?void 0:a.attributes,c=r.field,{hasExpression:h}=r.cache;let m=r.cache.compiledFunc,y=null;if(!c&&!h)return y;if(h){if((i==null?void 0:i.arcade)==null)return void Z4();const w={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},x=i.arcade.arcadeUtils,S=x.getViewInfo(w),C=x.createExecContext(a,S,i.timeZone);if(!m){const k=x.createSyntaxTree(r.valueExpression);m=x.createFunction(k),r.cache.compiledFunc=m}y=x.executeFunction(m,C)}else l&&(y=l[c]);return y=typeof y!="number"||isNaN(y)?null:s+o*y,y}function Bot(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const h=i!=null?i.scale:void 0,m=i!=null?i.view:void 0;o=h==null||m==="3d"?Got(t):h}else if(!r)switch(t.inputValueType){case cy.Expression:{if((i==null?void 0:i.arcade)==null)return void Z4();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},m=i.arcade.arcadeUtils,y=m.getViewInfo(h),v=m.createExecContext(n,y,i.timeZone);if(!l){const w=m.createSyntaxTree(t.valueExpression);l=m.createFunction(w),t.cache.compiledFunc=l}o=m.executeFunction(l,v);break}case cy.Field:s&&(o=s[t.field]);break;case cy.Unknown:o=null}if(!d1(o))return null;if(r||!t.normalizationField)return o;const c=s?parseFloat(s[t.normalizationField]):null;return d1(c)&&c!==0?o/c:null}function Got(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function Y4(t,e,i){var s;const r="visualVariables"in t?(s=t.visualVariables)==null?void 0:s.find(o=>o.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void J4("SizeVariable");const n=CTe(Bot(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function El(t,e,i){return t==null?null:I$(t)?Y4(t,e,i):d1(t)?t:null}function ETe(t,e,i){return d1(i)&&t>i?i:d1(e)&&t<e?e:t}function Hot(t,e,i,r){const n=El(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function qot(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),El(n,e,i)}function Wot(t,e,i,r){const n=El(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:o}=e;if(s==null||o==null)return null;const a=(t-s)/(o-s),l=El(e.maxSize,i,r),c=r!=null?r.shape:void 0;if(t<=s)return n;if(t>=o)return l;if(n==null||l==null)return null;if(e.scaleBy==="area"&&c){const h=c==="circle",m=h?GD*(n/2)**2:n*n,y=m+a*((h?GD*(l/2)**2:l*l)-m);return h?2*Math.sqrt(y/GD):Math.sqrt(y)}return n+a*(l-n)}function Jot(t,e,i,r){const n=El(e.minSize,i,r);if(t==null||n==null)return n;const s=r!=null?r.shape:void 0,{minDataValue:o}=e;if(o==null)return null;const a=t/o,l=El(e.maxSize,i,r);let c=null;return c=s==="circle"?2*Math.sqrt(a*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(a*n**2):a*n,ETe(c,n,l)}function Zot(t,e,i,r,n){var l,c,h;if(t==null)return null;const[s,o,a]=DK(t,n);if(s===o)return El((l=e.stops)==null?void 0:l[s].size,i,r);{const m=El((c=e.stops)==null?void 0:c[s].size,i,r),y=El((h=e.stops)==null?void 0:h[o].size,i,r);return m==null||y==null?null:m+(y-m)*a}}function Yot(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*H4[e.valueUnit],s=El(e.minSize,i,r),o=El(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return s;let l=null;return l=a==="area"?2*Math.sqrt(t/GD)/n:a==="radius"||a==="distance"?2*t/n:t/n,ETe(l,s,o)}function CTe(t,e,i,r,n){switch(e.transformationType){case Ds.Additive:return Hot(t,e,i,r);case Ds.Constant:return qot(e,i,r);case Ds.ClampedLinear:return Wot(t,e,i,r);case Ds.Proportional:return Jot(t,e,i,r);case Ds.Stops:return Zot(t,e,i,r,n);case Ds.RealWorldSize:return Yot(t,e,i,r);case Ds.Identity:return t;case Ds.Unknown:return null}}function ITe(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=El(t.minSize,Zue,n),o=El(t.maxSize,Zue,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function Xot(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const c=STe(l,e,i);r.push({variable:l,value:c})}),s.forEach(l=>{const c=$Te(l,e,i);r.push({variable:l,value:c})}),a.forEach(l=>{const c=TTe(l,e,i);r.push({variable:l,value:c})}),o.forEach(l=>{const c=Y4(l,e,i);r.push({variable:l,value:c})}),r}function DK(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function Kot(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":Y4(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const M1=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Kot,getColor:STe,getOpacity:$Te,getRotationAngle:TTe,getSize:Y4,getSizeForValue:CTe,getSizeFromNumberOrVariable:El,getSizeRangeAtScale:ITe,getVisualVariableValues:Xot,viewScaleRE:xTe},Symbol.toStringTag,{value:"Module"}));var AW;const FR=new Et({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),OW=new Et({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function Yue(t){if(t!=null)return typeof t=="string"||typeof t=="number"?jot(t):t.type==="size"?I$(t)?t:(delete(t={...t}).type,new Ci(t)):void 0}function Xue(t,e,i){if(typeof t!="object")return t;const r=new Ci;return r.read(t,i),r}let Ci=AW=class extends Ko{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&xTe.test(this.valueExpression)}}set index(t){I$(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),I$(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return wTe(this)}set maxDataValue(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return Yue(t)}readMaxSize(t,e,i){return Xue(t,e,i)}set minDataValue(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(Ce.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return Yue(t)}readMinSize(t,e,i){return Xue(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(Ce.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return Vot(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new Q("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?OW.read(t):null}clone(){var t,e;return new AW({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:I$(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:I$(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===Ds.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===Ds.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};u([p({readOnly:!0})],Ci.prototype,"cache",null),u([p({type:FR.apiValues,json:{type:FR.jsonValues,origins:{"web-map":{read:!1}},read:FR.read,write:FR.write}})],Ci.prototype,"axis",void 0),u([p()],Ci.prototype,"index",null),u([p({type:String,readOnly:!0})],Ci.prototype,"inputValueType",null),u([p({type:bTe,json:{write:!0}})],Ci.prototype,"legendOptions",void 0),u([p({type:Number,value:null,json:{write:!0}})],Ci.prototype,"maxDataValue",null),u([p({type:Number,value:null,json:{write:!0}})],Ci.prototype,"maxSize",null),u([_i("maxSize")],Ci.prototype,"castMaxSize",null),u([Ue("maxSize")],Ci.prototype,"readMaxSize",null),u([p({type:Number,value:null,json:{write:!0}})],Ci.prototype,"minDataValue",null),u([p({type:Number,value:null,json:{write:!0}})],Ci.prototype,"minSize",null),u([_i("minSize")],Ci.prototype,"castMinSize",null),u([Ue("minSize")],Ci.prototype,"readMinSize",null),u([p({type:String,json:{write:!0}})],Ci.prototype,"normalizationField",void 0),u([p({readOnly:!0})],Ci.prototype,"arcadeRequired",null),u([p({type:String})],Ci.prototype,"scaleBy",void 0),u([p({type:[$d],value:null,json:{write:!0}})],Ci.prototype,"stops",null),u([p({type:["outline"],json:{write:!0}})],Ci.prototype,"target",void 0),u([p({type:String,readOnly:!0})],Ci.prototype,"transformationType",null),u([p({type:["size"],json:{type:["sizeInfo"]}})],Ci.prototype,"type",void 0),u([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ci.prototype,"useSymbolValue",void 0),u([p({type:String,json:{write:!0}})],Ci.prototype,"valueExpression",void 0),u([Ue("valueExpression",["valueExpression","expression"])],Ci.prototype,"readValueExpression",null),u([qe("web-scene","valueExpression")],Ci.prototype,"writeValueExpressionWebScene",null),u([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ci.prototype,"valueRepresentation",void 0),u([p({type:OW.apiValues,json:{write:OW.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ci.prototype,"valueUnit",void 0),u([Ue("valueUnit")],Ci.prototype,"readValueUnit",null),Ci=AW=u([U("esri.renderers.visualVariables.SizeVariable")],Ci);const Qot={color:cv,size:Ci,opacity:Dm,rotation:uv},eat=new Et({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),tat=/^\[([^\]]+)\]$/i;let HD=class extends st{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e==null?void 0:e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n==null?void 0:n.match(tat),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map(l=>{const c=eat.read(l.type),h=Qot[c];h||(Ce.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new Sc("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const m=new h;return m.read(l,r),m})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([p()],HD.prototype,"visualVariables",null),HD=u([U("esri.renderers.visualVariables.VisualVariableFactory")],HD);const iat={base:Ko,key:"type",typeMap:{opacity:Dm,color:cv,rotation:uv,size:Ci}},CC=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new HD}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,s){return this._vvFactory.readVariables(r,n,s)}writeVisualVariables(r,n,s,o){n[s]=this._vvFactory.writeVariables(r,o)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some(({arcadeRequired:n})=>n))??!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){var s;return((s=this.visualVariables)==null?void 0:s.filter(o=>o.type===r&&(typeof n=="string"?o.target===n:n!==!1||!o.target)))??[]}async collectVVRequiredFields(r,n){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const o of s)o&&(o.field&&Ba(r,n,o.field),o.normalizationField&&Ba(r,n,o.normalizationField),o.valueExpression&&(rat(o.valueExpression,r,n)||await Oo(r,n,o.valueExpression)))}};return u([p({types:[iat],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),u([Ue("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),u([qe("visualVariables")],i.prototype,"writeVisualVariables",null),i=u([U("esri.renderers.mixins.VisualVariablesMixin")],i),i};function rat(t,e,i){const r=dJe(t);return r!=null&&(Ba(e,i,r),!0)}const NK=[252,146,31,255],nat=[153,153,153,255],sat={type:"esriSMS",style:"esriSMSCircle",size:6,color:NK,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},oat={type:"esriSLS",style:"esriSLSSolid",width:.75,color:NK},aat={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},lat={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},cat={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},uat={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},dat={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},NF=jr.fromJSON(sat),X4=Vr.fromJSON(oat),MTe=Io.fromJSON(aat),hat=Zi.fromJSON(lat);function yLt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return NF;case"polyline":return X4;case"polygon":case"extent":return MTe}return null}const gLt=jr.fromJSON(cat),vLt=Vr.fromJSON(uat),bLt=Io.fromJSON(dat),pat=Na.fromSimpleMarkerSymbol(NF),fat=Ld.fromSimpleLineSymbol(X4),mat=vu.fromSimpleFillSymbol(MTe),yat=new Xm({symbolLayers:new Ze([new Aa({material:{color:NK},edges:new G1e({size:Di(1),color:new Ye(nat)})})])}),gat=new Ld({symbolLayers:new Ze([new ka({material:{color:new Ye([0,0,0])},size:Di(1)})])}),vat=new vu({symbolLayers:new Ze([new Aa({outline:{color:new Ye([0,0,0]),size:Di(1)}})])});function wLt(t){if(t==null)return null;switch(t.type){case"mesh":return yat;case"point":case"multipoint":return pat;case"polyline":return fat;case"polygon":case"extent":return mat}return null}const Kue="#useCIMFallbackSymbology()",Nm={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function BE(t,e=Nm){var l,c,h,m;if(!t)return{symbol:null};const{retainId:i=Nm.retainId,ignoreDrivers:r=Nm.ignoreDrivers,hasLabelingContext:n=Nm.hasLabelingContext,retainCIM:s=Nm.retainCIM,cimFallbackEnabled:o=Nm.cimFallbackEnabled}=e;let a=null;if(qd(t))a=t.clone();else if(t.type==="web-style")a=t.clone();else if(t.type==="cim"){const y=(c=(l=t.data)==null?void 0:l.symbol)==null?void 0:c.type;switch(y){case"CIMPointSymbol":a=s?t.clone():Na.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=gat.clone(),(h=e==null?void 0:e.logWarning)==null||h.call(e,Kue,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=vat.clone(),(m=e==null?void 0:e.logWarning)==null||m.call(e,Kue,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new Q("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${y||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Vr)a=Ld.fromSimpleLineSymbol(t);else if(t instanceof jr)a=Na.fromSimpleMarkerSymbol(t);else if(t instanceof Yo)a=Na.fromPictureMarkerSymbol(t);else if(t instanceof Io)a=e.geometryType&&e.geometryType==="mesh"?Xm.fromSimpleFillSymbol(t):vu.fromSimpleFillSymbol(t);else{if(!(t instanceof Zi))return{error:new Q("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=n?_d.fromTextSymbol(t):Na.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof To||a.symbolLayers.forEach(y=>y.ignoreDrivers=!0),{symbol:a}}function zF(t,e,i,r){const n=kTe(t,{},{context:r,isLabelSymbol:!1});n!=null&&Wn(i,n,e)}function Que(t,e,i,r){const n=kTe(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function ede(t){return qd(t)||t instanceof To}function bat(t){return(t==null?void 0:t.type)==="polygon-3d"||(t==null?void 0:t.type)==="line-3d"}function kTe(t,e,i){var a;if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!ede(t)){const l=BE(t,{retainCIM:!0,hasLabelingContext:n});return l.symbol!=null?l.symbol.write(e,r):(o==null||o.push(new Q("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:l.error})),null)}return $9(r==null?void 0:r.layer)&&bat(t)?(o==null||o.push(new Q("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${(a=r==null?void 0:r.layer)==null?void 0:a.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!$9(r==null?void 0:r.layer))&&ede(t)?(o==null||o.push(new Q("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function ATe(t,e){return eYe(t,null,e)}const K4={types:uxe,json:{write:{writer:zF},origins:{"web-scene":{types:Wae,write:{writer:zF},read:{reader:dC({types:Wae})}}}}},zK=kY({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},K4),FK={types:{base:qn,key:"type",typeMap:{"simple-fill":Pv.typeMap["simple-fill"],"picture-fill":Pv.typeMap["picture-fill"],"polygon-3d":Pv.typeMap["polygon-3d"],cim:Pv.typeMap.cim}},json:{write:{writer:zF},origins:{"web-scene":{type:vu,write:{writer:zF}}}}},qD={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var PW;let za=PW=class extends CC(gc){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new PW({description:this.description,label:this.label,symbol:ce(this.symbol),visualVariables:ce(this.visualVariables),authoringInfo:ce(this.authoringInfo)})}};u([p({type:String,json:{write:!0}})],za.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],za.prototype,"label",void 0),u([p(zK)],za.prototype,"symbol",void 0),u([at({simple:"simple"})],za.prototype,"type",void 0),za=PW=u([U("esri.renderers.SimpleRenderer")],za);const wat=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function LW(t){return t instanceof st}function tde(t){return t instanceof Ze?Object.keys(t.items):LW(t)?Ga(t).keys():t?Object.keys(t):[]}function UR(t,e){return t instanceof Ze?t.items[e]:t[e]}function _at(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Dk(t){return t?t.declaredClass:null}function OTe(t,e){var m;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=tde(t),n=tde(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||_at(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(y=>!r.includes(y)),o=r.filter(y=>!n.includes(y)),a=r.filter(y=>n.includes(y)&&UR(t,y)!==UR(e,y)).concat(s,o).sort(),l=Dk(t);if(l&&wat.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let c;const h=LW(t)&&LW(e);for(const y of a){const v=UR(t,y),w=UR(e,y);let x;if((h||typeof v!="function"&&typeof w!="function")&&v!==w&&(v!=null||w!=null)){if(i&&i[y]&&typeof i[y]=="function")x=(m=i[y])==null?void 0:m.call(i,v,w);else if(v instanceof Date&&w instanceof Date){if(v.getTime()===w.getTime())continue;x={type:"complete",oldValue:v,newValue:w}}else x=typeof v=="object"&&typeof w=="object"&&Dk(v)===Dk(w)?OTe(v,w):{type:"complete",oldValue:v,newValue:w};x!=null&&(c!=null?c.diff[y]=x:c={type:"partial",diff:{[y]:x}})}}return c}function _Lt(t,e){return xat(t,e)}function xat(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function xLt(t,e){if(!t)return!1;if(t.type==="partial"){const i=Object.keys(t.diff);return i.length===1&&i[0]===e}return!1}function Sat(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Dk(t)!==Dk(e)?{type:"complete",oldValue:t,newValue:e}:OTe(t,e)}function jR(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!jR(i))return!1;for(const i of e.removed)if(!jR(i))return!1;for(const i of e.changed)if(!jR(i))return!1;return!0}case"partial":for(const e in t.diff)if(!jR(t.diff[e]))return!1;return!0}}var RW;const $at=Wt()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let k2=RW=class extends It.ClonableMixin(ye){static from(t){return S1(RW,t)}constructor(t){super(t),this.title=null,this.order=null}};u([p({type:String,json:{write:!0}})],k2.prototype,"title",void 0),u([at($at)],k2.prototype,"order",void 0),k2=RW=u([U("esri.renderers.support.RendererLegendOptions")],k2);const UK=k2;let Od=class extends It.ClonableMixin(ye){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};u([p(qD)],Od.prototype,"value",void 0),u([p(qD)],Od.prototype,"value2",void 0),u([p(qD)],Od.prototype,"value3",void 0),Od=u([U("esri.renderers.support.UniqueValue")],Od);let Cm=class extends It.ClonableMixin(ye){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new Od({value:r})):i==="object"?e[0]instanceof Od?e:e.map(r=>new Od(r)):null}};u([p({type:String,json:{write:!0}})],Cm.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Cm.prototype,"label",void 0),u([p(K4)],Cm.prototype,"symbol",void 0),u([p({type:[Od],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Od({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(Mr).map(s=>s.toString());i.push(n)}e.values=i}}}})],Cm.prototype,"values",void 0),u([_i("values")],Cm.prototype,"castValues",null),Cm=u([U("esri.renderers.support.UniqueValueClass")],Cm);let Yw=class extends It.ClonableMixin(ye){constructor(e){super(e),this.heading=null,this.classes=null}};u([p({type:String,json:{write:!0}})],Yw.prototype,"heading",void 0),u([p({type:[Cm],json:{write:{isRequired:!0}}})],Yw.prototype,"classes",void 0),Yw=u([U("esri.renderers.support.UniqueValueGroup")],Yw);var DW;let kd=DW=class extends ye{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new DW({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};u([p({type:String,json:{write:!0}})],kd.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],kd.prototype,"label",void 0),u([p(zK)],kd.prototype,"symbol",void 0),u([p(qD)],kd.prototype,"value",void 0),kd=DW=u([U("esri.renderers.support.UniqueValueInfo")],kd);const ide=new Map;async function Tat(t,e){try{return{data:(await jK(t,e)).data,baseUrl:tX(t),styleUrl:t}}catch(i){return Hh(i),null}}function Eat(t,e,i){var l;const r=e.portal!=null?e.portal:Fe.getDefault();let n;const s=`${r.url} - ${(l=r.user)==null?void 0:l.username} - ${t}`,o=ide.get(s);if(o)return o;const a=Cat(t,r,i).then(c=>(n=c,c.fetchData())).then(c=>({data:c,baseUrl:n.itemUrl??"",styleName:t}));return ide.set(s,a),a}function Cat(t,e,i){return e.load(i).then(()=>{const r=new fn({disableExtraQuery:!0,query:`owner:${rde} AND type:${nde} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===nde&&a.owner===rde){n=a;break}}if(!n)throw new Q("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function PTe(t,e,i){return(t==null?void 0:t.styleUrl)!=null?Tat(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?Eat(t.styleName,e,i):Promise.reject(new Q("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function LTe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Iat(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=b8(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=b8(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=b8(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function b8(t,e){var i,r;if(!ve("enable-feature:force-wosr"))return(r=(i=t.formatInfos)==null?void 0:i.find(n=>n.type===e))==null?void 0:r.href}function jK(t,e){const i={responseType:"json",query:{f:"json"},...e};return Ot(so(t),i)}const rde="esri_en",nde="Style",Mat="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var A2;const sde="uvInfos-watcher",ode="uvGroups-watcher",kat=",",Aat=hr(kd);function Oat(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map(l=>{var C;const{symbol:c,label:h,value:m,description:y}=l,[v,w,x]=a?((C=m==null?void 0:m.toString())==null?void 0:C.split(n||""))||[]:[m],S=[];return(e||o)&&S.push(v),i&&S.push(w),r&&S.push(x),{symbol:c,label:h,values:[S],description:y}})}]}function Vx(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let Cr=A2=class extends CC(gc){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(a=>a.value===i[s].value);o?Sat(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:jO(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new Q("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ce.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||Fe.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=py(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=r1(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?Ce.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?Ce.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void Ce.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?Aat(t):new kd({value:t,symbol:dxe(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[Vx(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void Ce.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[Vx(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await yy()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ce.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await yy(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,s)=>n+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new A2({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ce(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ce(this.visualVariables),legendOptions:ce(this.legendOptions),authoringInfo:ce(this.authoringInfo),backgroundFillSymbol:ce(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=ce(this.uniqueValueInfos),i=ce(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(ce(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Oo(t,e,this.valueExpression)];Ba(t,e,this.field),Ba(t,e,this.field2),Ba(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return PTe(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t!=null&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new To({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new kd({value:r.name,symbol:n});e.push(s),this._valueInfoMap[Vx(r.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",kat)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[Vx(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(sde);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Le(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,sde)}}_watchUniqueValueGroups(){this.removeHandles(ode);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Le(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(Le(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,ode)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:m,values:y,description:v}=c;for(const w of y??[]){const{value:x,value2:S,value3:C}=w,k=[x];i&&k.push(S),r&&k.push(C);const A=a?k.join(n||""):k[0]??void 0;t.push(new kd({symbol:h,label:m,value:A,description:v}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map(c=>{var C;const{symbol:h,label:m,value:y,description:v}=c,[w,x,S]=o?((C=y==null?void 0:y.toString())==null?void 0:C.split(n||""))||[]:[y];return new Cm({symbol:h,label:m,description:v,values:[new Od({value:w,value2:x,value3:S})]})}),l=[new Yw({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const h=l.createSyntaxTree(this.valueExpression);a=l.createFunction(h),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[Vx(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[Vx(r)]}static fromPortalStyle(t,e){const i=new A2(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||Fe.getDefault());const r=i.populateFromStyle();return r.catch(n=>{Ce.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new A2(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{Ce.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};u([p({readOnly:!0})],Cr.prototype,"_cache",null),u([at({uniqueValue:"unique-value"})],Cr.prototype,"type",void 0),u([p(FK)],Cr.prototype,"backgroundFillSymbol",void 0),u([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Cr.prototype,"field",null),u([_i("field")],Cr.prototype,"castField",null),u([qe("field")],Cr.prototype,"writeField",null),u([p({type:String,value:null,json:{write:!0}})],Cr.prototype,"field2",null),u([p({type:String,value:null,json:{write:!0}})],Cr.prototype,"field3",null),u([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Cr.prototype,"orderByClassesEnabled",void 0),u([p({type:String,value:null,json:{write:!0}})],Cr.prototype,"valueExpression",null),u([p({type:String,json:{write:!0}})],Cr.prototype,"valueExpressionTitle",void 0),u([p({type:UK,json:{write:!0}})],Cr.prototype,"legendOptions",void 0),u([p({type:String,json:{write:!0}})],Cr.prototype,"defaultLabel",void 0),u([p(kY({...K4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Cr.prototype,"defaultSymbol",null),u([p({type:String,value:null,json:{write:!0}})],Cr.prototype,"fieldDelimiter",null),u([p({type:Fe,readOnly:!0})],Cr.prototype,"portal",void 0),u([Ue("portal",["styleName"])],Cr.prototype,"readPortal",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Cr.prototype,"styleOrigin",void 0),u([Ue("styleOrigin",["styleName","styleUrl"])],Cr.prototype,"readStyleOrigin",null),u([qe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Cr.prototype,"writeStyleOrigin",null),u([p({type:[Yw],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||Oat(e)).map(r=>Yw.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Cr.prototype,"uniqueValueGroups",null),u([p({type:[kd],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Cr.prototype,"uniqueValueInfos",null),Cr=A2=u([U("esri.renderers.UniqueValueRenderer")],Cr);var NW,nE;let ks=(nE=class extends ye{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new NW(ce({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},NW=nE,nE);u([p({type:[String],json:{write:!0}})],ks.prototype,"attachmentTypes",void 0),u([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],ks.prototype,"attachmentsWhere",void 0),u([p({type:Boolean,json:{write:!0}})],ks.prototype,"cacheHint",void 0),u([p({type:[String],json:{write:!0}})],ks.prototype,"keywords",void 0),u([p({type:[String],json:{write:!0}})],ks.prototype,"globalIds",void 0),u([p({json:{write:!0}})],ks.prototype,"name",void 0),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],ks.prototype,"num",void 0),u([p({type:[Number],json:{write:!0}})],ks.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],ks.prototype,"orderByFields",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],ks.prototype,"returnMetadata",void 0),u([p({type:[Number],json:{write:!0}})],ks.prototype,"size",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],ks.prototype,"start",void 0),u([qe("start"),qe("num")],ks.prototype,"writeStart",null),u([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ks.prototype,"where",void 0),ks=NW=u([U("esri.rest.support.AttachmentQuery")],ks),ks.from=hr(ks);const RTe=Wt()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),ade="percent-of-total",lde="field",ELt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const n=!!this.normalizationField,s=this.normalizationTotal!=null;return n||s?(r=n&&lde||s&&ade||null,n&&s&&Ce.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==lde&&r!==ade||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return u([p({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),u([p({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),u([p({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),u([p({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),u([at(RTe,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=u([U("esri.rest.support.NormalizationBinParametersMixin")],i),i};var zW,sE;let Dr=(sE=class extends ye{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new zW(ce({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},zW=sE,sE);u([p({type:Boolean,json:{write:!0}})],Dr.prototype,"cacheHint",void 0),u([p({type:xd,json:{write:!0}})],Dr.prototype,"dynamicDataSource",void 0),u([p({type:String,json:{write:!0}})],Dr.prototype,"gdbVersion",void 0),u([p({type:Number,json:{write:!0}})],Dr.prototype,"geometryPrecision",void 0),u([p({type:Date})],Dr.prototype,"historicMoment",void 0),u([qe("historicMoment")],Dr.prototype,"_writeHistoricMoment",null),u([p({type:Number,json:{write:!0}})],Dr.prototype,"maxAllowableOffset",void 0),u([p({json:{write:!0}})],Dr.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Dr.prototype,"orderByFields",void 0),u([p({type:[String],json:{write:!0}})],Dr.prototype,"outFields",void 0),u([p({type:et,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Dr.prototype,"outSpatialReference",void 0),u([p({json:{write:!0}})],Dr.prototype,"relationshipId",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Dr.prototype,"start",void 0),u([qe("start"),qe("num")],Dr.prototype,"writeStart",null),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Dr.prototype,"num",void 0),u([p({json:{write:!0}})],Dr.prototype,"returnGeometry",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Dr.prototype,"returnM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Dr.prototype,"returnZ",void 0),u([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Dr.prototype,"where",void 0),Dr=zW=u([U("esri.rest.support.RelationshipQuery")],Dr),Dr.from=hr(Dr);const CLt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Dr}},Symbol.toStringTag,{value:"Module"})),FW=new Et({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Pat(t,e,i,r){const n=await Ab(t);if(await VK(t,e,r),!n.addAttachment)throw new Q(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function VK(t,e,i){var s,o;const{attributes:r}=e,{objectIdField:n}=t;return(o=(s=t.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new Q(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new Q(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new Q(i,"A feature is required to add/delete/update attachments")):Promise.reject(new Q(i,"this layer doesn't support attachments"))}async function Lat(t,e,i,r,n){const s=await Ab(t);if(await VK(t,e,n),!s.updateAttachment)throw new Q(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function Rat(t,e,i){const{applyEdits:r}=await $e(()=>import("./editingSupport-ZCv18SyN.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await rlt(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function Dat(t,e,i){const{uploadAssets:r}=await $e(()=>import("./editingSupport-ZCv18SyN.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function Nat(t,e,i,r){const n=await Ab(t);if(await VK(t,e,r),!n.deleteAttachments)throw new Q(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function zat(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new Q(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function Fat(t,e,i,r){var v,w,x,S;e=ks.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((v=s==null?void 0:s.data)!=null&&v.supportsAttachment))throw new Q(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:h,start:m,where:y}=e;if(!((w=s==null?void 0:s.operations)!=null&&w.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||c||m||y))throw new Q(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||y))throw new Q(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new Q(r,"Layer source does not support queryAttachments capability",e);return!((x=s==null?void 0:s.attachment)!=null&&x.supportsOrderByFields)&&((S=e.orderByFields)!=null&&S.length)&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function Uat(t,e,i,r){const n=await Ab(t);if(!n.queryObjectIds)throw new Q(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(St.from(e)??t.createQuery(),i)}async function jat(t,e,i,r){const n=await Ab(t);if(!n.queryFeatureCount)throw new Q(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(St.from(e)??t.createQuery(),i)}async function Vat(t,e,i,r){const n=await Ab(t);if(!n.queryExtent)throw new Q(r,"Layer source does not support queryExtent capability");return n.queryExtent(St.from(e)??t.createQuery(),i)}async function Bat(t,e,i,r){const n=await Ab(t);if(!n.queryRelatedFeatures)throw new Q(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Dr.from(e),i)}async function Gat(t,e,i,r){const n=await Ab(t);if(!n.queryRelatedFeaturesCount)throw new Q(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Dr.from(e),i)}async function Hat(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await ZX(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function qat(t){var o,a;const e=new St;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=(o=t.capabilities)==null?void 0:o.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=(a=t.capabilities)==null?void 0:a.data;r!=null&&r.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r!=null&&r.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function DTe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function NTe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function Wat(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function Jat(t,e,i,r){var l,c;const n=i==null?void 0:i.feature,s=!!((l=t.subtypes)!=null&&l.length);if(s&&!(i!=null&&i.excludeImpliedDomains)){const h=Yat(t,e);if(h)return h}const o=s&&Zat(t,n);if(o){const h=(c=o==null?void 0:o.domains)==null?void 0:c[e];return(h==null?void 0:h.type)==="inherited"?r:h}const a=UTe(t.types,t.typeIdField,n);if(a){const h=a.domains&&a.domains[e];if(h&&(h==null?void 0:h.type)!=="inherited")return h}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const h=Xat(t,e);if(h)return h}return null}function Zat(t,e){const{subtypes:i,subtypeField:r}=t;if(!(e!=null&&e.attributes)||!(i!=null&&i.length)||!r)return null;const n=e.attributes[r];return n==null?null:i.find(s=>s.code===n)}function Yat(t,e){var o,a;const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&((o=i.get(r))==null?void 0:o.name))===n&&((a=t.subtypes)!=null&&a.length)){const l=t.subtypes.map(c=>new Jw({code:zTe(c.code,s),name:c.name}));if(l!=null&&l.length)return new Rv({codedValues:l})}return null}function Xat(t,e){var s,o;const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?(s=i.get(t.typeIdField))==null?void 0:s.name:null)===r&&"types"in t&&((o=t.types)!=null&&o.length)){const a=t.types.map(l=>new Jw({code:zTe(l.id,n),name:l.name}));return new Rv({codedValues:a})}return null}function zTe(t,e){return e?P1e({type:e})&&typeof t=="number"?`${t}`:UJe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Ab(t){return(await t.load()).source}async function ILt(t,e){if(!Tt)return;const i=Tt.findCredential(t);if(i)return i.userId;let r;try{const n=await GX(t,e);n&&(r=await Tt.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function FTe(t,e){if(!Tt||Tt.findCredential(t))return;let i;try{const r=await GX(t,e);r&&(i=await Tt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Tt.getCredential(t,{signal:r})}catch{}}async function Kat(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await FTe(r,i)}async function MLt(t){var i;const e=(i=t.parsedUrl)==null?void 0:i.path;e&&Qat(t)&&await FTe(e)}function Qat(t){return elt(t)&&("serviceDefinitionExpression"in t&&FF(t.serviceDefinitionExpression)||"definitionExpression"in t&&FF(t.definitionExpression))}function elt(t){var e;return!(!I_e(t)||!((e=t.capabilities)!=null&&e.query.supportsCurrentUser))}function FF(t){return!!(t!=null&&t.toLowerCase().includes("current_user"))}function tlt(t){return!WD(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const w8=dC({types:uxe});function BK(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new Cr({defaultSymbol:w8(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:w8(r.symbol,r,e)}))}):new za({symbol:w8(t.defaultSymbol,t,e)})}function ilt(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function rlt(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(c=>{let h=null;if("attributes"in c){const{attributes:m}=c;h={globalId:m[i],objectId:m[n]!=null&&m[n]!==-1?m[n]:null}}else h={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(c=>`${i}='${c}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await i7e(yTe(t,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const h=c.attributes[i],m=c.attributes[n];h!=null&&m!=null&&m!==-1&&a.set(rqe(h),m)}return a}function UTe(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()})??null}function WD(t){var e;return((e=t.sourceJSON)==null?void 0:e.isMultiServicesView)||nlt(t)}function nlt(t){var e,i;return!!((i=(e=t.sourceJSON)==null?void 0:e.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function slt(t,e,i){var s;const r=e==null?void 0:e.queryAttributeBins;if(!((s=e==null?void 0:e.operations)!=null&&s.supportsQueryBins)||!r)throw new Q(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new Q(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!cde(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new Q(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new Q(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new Q(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new Q(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new Q(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new Q(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!cde(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new Q(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new Q(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new Q(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new Q(i,"Layer source does not support firstDayOfWeek binning");const n=r==null?void 0:r.supportedStatistics;if(t.outStatistics&&n){const o=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:a}of t.outStatistics){const l=o.get(a);if(l&&!n[l])throw new Q(i,`Layer source does not support ${a} statistic type`)}}}function cde(t,e){return t!=null&&!!(e!=null&&e[RTe.toJSON(t)])}let BS=class extends It.ClonableMixin(ye){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],BS.prototype,"shapeAreaField",void 0),u([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],BS.prototype,"shapeLengthField",void 0),u([p({type:String,json:{read:t=>U6e.read(t)||j6e.read(t)}})],BS.prototype,"units",void 0),BS=u([U("esri.layers.support.GeometryFieldsInfo")],BS);var UW;let GS=UW=class extends ye{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Ze}clone(){return new UW({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([p({type:String,json:{write:{isRequired:!0}}})],GS.prototype,"floorField",void 0),u([p({json:{read:!1,write:!1}})],GS.prototype,"viewAllMode",void 0),u([p({json:{read:!1,write:!1}})],GS.prototype,"viewAllLevelIds",void 0),GS=UW=u([U("esri.layers.support.LayerFloorInfo")],GS);function olt(t){var s;const{nonStandardUrlAllowed:e=!1,separator:i}=t??{},r=ce(wot),n=(s=r.json)==null?void 0:s.write;return typeof n=="object"&&n&&(n.writer=function(o,a,l,c){Hje(this,o,i,a,c)}),{...r,set:function(o){if(o==null)return void this._set("url",o);const a=Gje({layer:this,url:o,nonStandardUrlAllowed:e,logger:Ce.getLogger(this)});this._set("url",a.url),a.layerId!=null&&this._set("layerId",a.layerId)}}}function alt(t,e){const{separator:i}=e??{},r=nn(t.url);return r!=null&&(t.dynamicDataSource!=null?r.path=i1(r.path,"dynamicLayer"):t.layerId!=null&&(r.path=i1(r.path,i??"",t.layerId.toString()))),r}const ude=new Et({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),dde=new Et({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Kl=class extends It.ClonableMixin(ye){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([p({json:{read:ude.read,write:ude.write}})],Kl.prototype,"cardinality",void 0),u([p({json:{name:"catalogID"}})],Kl.prototype,"catalogId",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"composite",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"id",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"keyField",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"keyFieldInRelationshipTable",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"name",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"relatedTableId",void 0),u([p({json:{read:!0,write:!0}})],Kl.prototype,"relationshipTableId",void 0),u([p({json:{read:dde.read,write:dde.write}})],Kl.prototype,"role",void 0),Kl=u([U("esri.layers.support.Relationship")],Kl);const llt=[["binary","application/octet-stream","bin",""]];function OLt(t,e){return GTe(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function PLt(t,e){if(!t)return!1;const i=clt(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function jTe(t,e){return HK(plt(t,e))}function VTe(t,e){return HK(GTe(t,e))}function LLt(t,e){return HTe(hlt(t,e))}function clt(t,e){return VTe(t.name,e)??jTe(t.type,e)}function Q4(t,e,i){return jTe(t,i)??VTe(e,i)}function BTe({supportedFormats:t}){return Q4("model/gltf-binary","glb",t)}function RLt(t){const e=BTe(t);return e!=null&&t.editFormats.includes(e)}function ult({supportedFormats:t}){return Q4("model/gltf+json","gltf",t)}function dlt(t){if(!t)return null;const e=BTe(t),i=ult(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function DLt({supportedFormats:t}){return Q4("application/esri3do-SR_world","wld",t)}function NLt({supportedFormats:t}){return Q4("application/esri3do-SR_prj","prj",t)}function GK(t){return[...llt,...t]}function hlt(t,e){return GK(e).find(i=>HK(i)===t)}function plt(t,e){const i=t.toLowerCase();return GK(e).find(r=>HTe(r)===i)}function GTe(t,e){const i=t.toLowerCase();return GK(e).find(r=>flt(r).some(n=>i.endsWith(n)))}function HK(t){return t==null?void 0:t[0]}function HTe(t){return t==null?void 0:t[1].toLowerCase()}function flt(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function zLt(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function lt(t,e,i){return!!qTe(t,e,i)}function HS(t,e,i){return qTe(t,e,i)}function qTe(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const mlt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function ylt(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function uP(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function glt(t){var i;const e=(i=t==null?void 0:t.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(e!=null&&e.includes("count")),sum:!!(e!=null&&e.includes("sum")),min:!!(e!=null&&e.includes("min")),max:!!(e!=null&&e.includes("max")),avg:!!(e!=null&&e.includes("avg")),var:!!(e!=null&&e.includes("var")),stddev:!!(e!=null&&e.includes("stddev")),percentileContinuous:!!(e!=null&&e.includes("percentile_cont")),percentileDiscrete:!!(e!=null&&e.includes("percentile_disc")),envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function vlt(t){var i;const e=(i=t==null?void 0:t.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(e!=null&&e.includes("field")),log:!!(e!=null&&e.includes("log")),naturalLog:!!(e!=null&&e.includes("naturallog")),percentOfTotal:!!(e!=null&&e.includes("percentoftotal")),squareRoot:!!(e!=null&&e.includes("squareroot"))}}function WTe(t,e){return{analytics:blt(t),attachment:wlt(t),data:_lt(t),metadata:xlt(t),operations:Slt(t.capabilities,t,e),query:$lt(t,e),queryAttributeBins:Clt(t),queryRelated:Tlt(t),queryTopFeatures:Elt(t),editing:Ilt(t)}}function blt(t){return{supportsCacheHint:uP(t.advancedQueryCapabilities,"queryAnalytics")}}function wlt(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:uP(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:lt(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:lt(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=mlt[r.name];n&&(i[n]=!!r.isEnabled)}),i}function _lt(t){return{isVersioned:lt(t,"isDataVersioned",!1),isBranchVersioned:lt(t,"isDataBranchVersioned",!1),supportsAttachment:lt(t,"hasAttachments",!1),supportsM:lt(t,"hasM",!1),supportsZ:lt(t,"hasZ",!1)}}function xlt(t){return{supportsAdvancedFieldProperties:lt(t,"supportsFieldDescriptionProperty",!1)}}function Slt(t,e,i){var y;const r=(t==null?void 0:t.toLowerCase().split(",").map(v=>v.trim()))??[],n=i?qp(i):null,s=r.includes((n==null?void 0:n.serverType)==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&((y=e.uniqueIdInfo)==null?void 0:y.OIDFieldContainsHashValue)!==!0;let a=o&&r.includes("create"),l=o&&r.includes("delete"),c=o&&r.includes("update");const h=r.includes("changetracking"),m=e.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:lt(e,"supportsCalculate",!1),supportsTruncate:lt(e,"supportsTruncate",!1),supportsValidateSql:lt(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:lt(m,"supportsQueryAnalytic",!1),supportsQueryAttachments:lt(m,"supportsQueryAttachments",!1),supportsQueryBins:lt(m,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryTopFeatures:lt(m,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:lt(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:lt(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:lt(e,"supportsAsyncConvert3D",!1)}}function $lt(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=ve("mapserver-pbf-version-support"),l=Pz(e),c=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:HS(t,"maxRecordCount",void 0),maxRecordCountFactor:HS(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:HS(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:HS(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:ylt(i),supportsCacheHint:lt(i,"supportsQueryWithCacheHint",!1)||uP(i,"query"),supportsCentroid:lt(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsCurrentUser:lt(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:lt(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:lt(i,"supportsDisjointSpatialRel",!1),supportsDistance:lt(i,"supportsQueryWithDistance",!1),supportsDistinct:lt(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:lt(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:lt(i,"supportsFullTextSearch",!1),supportsGeometryProperties:lt(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:lt(i,"supportsHavingClause",!1),supportsHistoricMoment:lt(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:lt(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:lt(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:lt(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:lt(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:lt(i,"supportsPercentileStatistics",!1),supportsQuantization:lt(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:lt(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:lt(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:lt(r,"allowOthersToQuery",!0),supportsQueryGeometry:lt(t,"supportsReturningQueryGeometry",!1),supportsResultType:lt(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!dlt(t.infoFor3D),supportsSpatialAggregationStatistics:lt(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:lt(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:lt(t,"useStandardizedQueries",!1),supportsStatistics:lt(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:lt(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:lt(i,"supportsTrueCurve",!1),tileMaxRecordCount:HS(t,"tileMaxRecordCount",void 0)}}function Tlt(t){const e=t.advancedQueryCapabilities,i=lt(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:lt(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:uP(e,"queryRelated")}}function Elt(t){return{supportsCacheHint:uP(t.advancedQueryCapabilities,"queryTopFilter")}}function Clt(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:lt(e,"supportsDateBin",!1),supportsFixedInterval:lt(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:lt(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:lt(e,"supportsFixedBoundariesBin",!1),supportsStackBy:lt(e,"supportsStackBy",!1),supportsSplitBy:lt(e,"supportsSplitBy",!1),supportsSnapToData:lt(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:lt(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:lt(e,"supportsFirstDayOfWeek",!1),supportsNormalization:lt(e,"supportsNormalization",!1),supportedStatistics:glt(e),supportedNormalizationTypes:vlt(e)}}function Ilt(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:lt(t,"allowGeometryUpdates",!0),supportsGlobalId:lt(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:lt(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:lt(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:lt(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:lt(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:lt(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:lt(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:lt(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:lt(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:lt(i,"supportsAsyncApplyEdits",!1),zDefault:HS(t,"zDefault",void 0)}}function FLt(t){var e;return{operations:{supportsAppend:lt(t,"supportsAppend",!1),supportsCoverageQuery:((e=t==null?void 0:t.playbackInfo)==null?void 0:e.klv["0601"])??!1,supportsExportClip:lt(t,"supportsExportClip",!1),supportsExportFrameset:lt(t,"supportsExportFrameset",!1),supportsMensuration:lt(t,"supportsMensuration",!1),supportsPreviews:lt(t,"supportsPreviews",!1),supportsUpdate:lt(t,"supportsUpdate",!1)}}}let pm=class extends It.ClonableMixin(ye){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=A4(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};u([p({type:Number,json:{write:!0}})],pm.prototype,"code",void 0),u([p({type:Object,json:{write:!0}})],pm.prototype,"defaultValues",void 0),u([p({json:{write:!0}})],pm.prototype,"domains",void 0),u([Ue("domains")],pm.prototype,"readDomains",null),u([qe("domains")],pm.prototype,"writeDomains",null),u([p({type:String,json:{write:!0}})],pm.prototype,"name",void 0),pm=u([U("esri.layers.support.Subtype")],pm);const Mlt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Ze.ofType(Oh)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=et.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(r,n){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:o,editing:a}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||o.supportsEditing&&!(a.supportsUpdateByOthers&&a.supportsUpdateByAnonymous&&a.supportsDeleteByOthers&&a.supportsDeleteByAnonymous))return"load"}if(FF(this.serviceDefinitionExpression)||FF(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(ilt(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n!=null&&n.creatorField||n!=null&&n.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,n){return WTe(n,this.url)}readEditingInfo(r,n){const{editingInfo:s}=n;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const n=ce(r),{operations:s,editing:o}=n;return WD(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=o.supportsGeometryUpdate=!0),n)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,n){return DTe(n)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||WD(this))return!1;const{operations:n,editing:s}=r;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:n,editing:s}=r;return WD(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,n){return n.type==="Table"}readMaxScale(r,n){return n.effectiveMaxScale||r||0}readMinScale(r,n){return n.effectiveMinScale||r||0}readObjectIdFieldFromService(r,n){return NTe(n)}get parsedUrl(){return alt(this)}readServiceDefinitionExpression(r,n){return n.definitionQuery||n.definitionExpression}readUniqueIdFields(r,n){var s;return(s=n.uniqueIdInfo)!=null&&s.OIDFieldContainsHashValue?n.uniqueIdInfo.fields:null}readVersion(r,n){return Wat(n)}get isUrlHostModified(){var a;const{loaded:r,url:n,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!n||this.originIdOf("url")<Bt.USER)return!1;const o=(a=this.sourceJSON)==null?void 0:a.preferredHost;if(!o||!io(n,`https://${o}`,!0))return!1;for(let l=Bt.USER-1;l>=Bt.PORTAL_ITEM;l--){const c=this.getAtOrigin("url",$A(l));if(c)return!io(n,c,!0)}return!1}applyPreferredHost(r){const{url:n,portalItem:s}=this;!n||T9(s)}applyHostFromPortalItem(){const{url:r,portalItem:n}=this;if(!r||this.originIdOf("url")===Bt.USER||!(n!=null&&n.url)||!T9(n)||!TK(n,EK.HOSTED_SERVICE)||io(r,n.url,!0)||!this._isUrlHostModificationEnabled)return;const s=Pje(n.url);this._set("url",tbe(r,s)),this._isUrlHostModified=!0}};return u([p({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),u([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),u([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),u([Ue("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),u([p(Yz("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),u([p({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),u([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),u([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),u([p({readOnly:!0,type:hm})],i.prototype,"editFieldsInfo",void 0),u([p({readOnly:!0})],i.prototype,"editingInfo",void 0),u([Ue("editingInfo")],i.prototype,"readEditingInfo",null),u([p({readOnly:!0})],i.prototype,"effectiveCapabilities",null),u([p()],i.prototype,"effectiveEditingEnabled",null),u([p((()=>{const r=ce(xot),n=r.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),u([p()],i.prototype,"fieldsIndex",void 0),u([p({type:GS,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Sr}}})],i.prototype,"floorInfo",void 0),u([p({type:jt,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),u([p()],i.prototype,"gdbVersion",void 0),u([p({readOnly:!0,type:BS,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),u([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:FW.read}}}})],i.prototype,"geometryType",void 0),u([p({type:String})],i.prototype,"globalIdField",void 0),u([Ue("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),u([p({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),u([p({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),u([p({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),u([p({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),u([p({readOnly:!0,type:Ma})],i.prototype,"heightModelInfo",void 0),u([p({type:Date})],i.prototype,"historicMoment",void 0),u([p({type:Ze.ofType(Oh),readOnly:!0})],i.prototype,"indexes",void 0),u([p({readOnly:!0})],i.prototype,"isTable",void 0),u([Ue("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),u([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),u([p(Eot)],i.prototype,"maxScale",void 0),u([Ue("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),u([p(Tot)],i.prototype,"minScale",void 0),u([Ue("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),u([p({type:String})],i.prototype,"objectIdField",void 0),u([Ue("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),u([p({readOnly:!0})],i.prototype,"parsedUrl",null),u([p(Yz("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),u([p({type:[Kl],readOnly:!0})],i.prototype,"relationships",void 0),u([p({type:Boolean})],i.prototype,"returnM",void 0),u([p({type:Boolean})],i.prototype,"returnZ",void 0),u([p({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),u([p({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),u([Ue("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),u([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),u([p()],i.prototype,"sourceJSON",void 0),u([p({type:et,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),u([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),u([p({type:[pm],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),u([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),u([p({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),u([Ue("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),u([p(olt({nonStandardUrlAllowed:!0}))],i.prototype,"url",void 0),u([p({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),u([Ue("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),u([p({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=u([U("esri.layers.mixins.FeatureLayerBase")],i),i};let gv=class extends It.ClonableMixin(ye){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};u([p({type:String,json:{write:!0}})],gv.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],gv.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],gv.prototype,"returnType",void 0),gv=u([U("esri.layers.support.ExpressionInfo")],gv);var jW,oE;let ta=(oE=class extends ye{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new jW({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ce(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},jW=oE,oE);u([p({type:Boolean,json:{write:!0}})],ta.prototype,"isAutoGenerated",void 0),u([p({type:String,json:{write:!0}})],ta.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],ta.prototype,"alias",void 0),u([p({type:String,json:{write:!0}})],ta.prototype,"onStatisticField",void 0),u([p({type:gv,json:{write:!0}})],ta.prototype,"onStatisticExpression",void 0),u([p({type:String,json:{write:!0}})],ta.prototype,"statisticType",void 0),ta=jW=u([U("esri.layers.support.AggregateField")],ta);let Gv=class extends ye{constructor(){super(...arguments),this.type=null}};u([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Gv.prototype,"type",void 0),Gv=u([U("esri.layers.support.FeatureReduction")],Gv);const qK="__begin__",WK="__end__",klt=new RegExp(qK,"ig"),Alt=new RegExp(WK,"ig"),hde=new RegExp("^"+qK,"i"),pde=new RegExp(WK+"$","i"),UF='"',Olt=UF+" + ",Plt=" + "+UF;function Llt(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Rlt(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function JK(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=Llt(t.labelExpression),e.type="conventional"),e}function Dlt(t){const e=JK(t);if(!e)return null;switch(e.type){case"conventional":return VW(e.expression);case"arcade":return e.expression}return null}function Nlt(t){const e=JK(t);if(!e)return null;switch(e.type){case"conventional":return Flt(e.expression);case"arcade":return JTe(e.expression)}return null}function VW(t){let e;return t?(e=Tb(t,i=>qK+'$feature["'+i+'"]'+WK),e=hde.test(e)?e.replace(hde,""):UF+e,e=pde.test(e)?e.replace(pde,""):e+UF,e=e.replaceAll(klt,Olt).replaceAll(Alt,Plt)):e='""',e}const zlt=/^\s*\{([^}]+)\}\s*$/i;function Flt(t){const e=t==null?void 0:t.match(zlt);return(e==null?void 0:e[1].trim())||null}const Ult=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,jlt=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Vlt=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function JTe(t){if(!t)return null;let e=Ult.exec(t)||jlt.exec(t);return e?e[1]||e[3]:(e=Vlt.exec(t),e?e[2]:null)}var BW,aE;let Im=(aE=class extends ye{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?VW(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=VW(this.value)),e!=null&&(i[r]=e)}clone(){return new BW({expression:this.expression,title:this.title,value:this.value})}},BW=aE,aE);u([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Im.prototype,"expression",void 0),u([Ue("expression",["expression","value"])],Im.prototype,"readExpression",null),u([qe("expression")],Im.prototype,"writeExpression",null),u([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Im.prototype,"title",void 0),u([p({json:{read:!1,write:!1}})],Im.prototype,"value",void 0),Im=BW=u([U("esri.layers.support.LabelExpressionInfo")],Im);var GW;const VR=new Et({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function BR(t,e,i){return{enabled:!$9(i==null?void 0:i.layer)}}function ZTe(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Blt(t){return(t==null?void 0:t.type)==="map-image"}function YTe(t){var e,i;return!!Blt(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Glt(t){return ZTe(t)||YTe(t==null?void 0:t.layer)}var lE;let Nr=(lE=class extends ye{static evaluateWhere(e,i){const r=(n,s,o)=>{switch(s){case"=":return n==o;case"<>":return n!=o;case">":return n>o;case">=":return n>=o;case"<":return n<o;case"<=":return n<=o}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),o=n[3],a=r(i[n[4]],n[5],n[6]);switch(o){case"AND":return s&&a;case"OR":return s||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=hat,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Rlt(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=JTe(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&ZTe(n))e=new Im({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return JK(this)}getLabelExpressionArcade(){return Dlt(this)}getLabelExpressionSingleField(){return Nlt(this)}hash(){return JSON.stringify(this)}clone(){return new GW({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ce(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ce(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},GW=lE,lE);u([p({type:String,json:{write:!0}})],Nr.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:BR}}}}})],Nr.prototype,"allowOverrun",void 0),u([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:BR}}}}})],Nr.prototype,"deconflictionStrategy",void 0),u([p({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&YTe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Nr.prototype,"labelExpression",void 0),u([Ue("labelExpression")],Nr.prototype,"readLabelExpression",null),u([qe("labelExpression")],Nr.prototype,"writeLabelExpression",null),u([p({type:Im,json:{write:{overridePolicy:(t,e,i)=>Glt(i)?{allowNull:!0}:{enabled:!1}}}})],Nr.prototype,"labelExpressionInfo",void 0),u([qe("labelExpressionInfo")],Nr.prototype,"writeLabelExpressionInfo",null),u([p({type:VR.apiValues,json:{type:VR.jsonValues,read:VR.read,write:VR.write}})],Nr.prototype,"labelPlacement",void 0),u([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Nr.prototype,"labelPosition",void 0),u([p({type:Number})],Nr.prototype,"maxScale",void 0),u([qe("maxScale")],Nr.prototype,"writeMaxScale",null),u([p({type:Number})],Nr.prototype,"minScale",void 0),u([qe("minScale")],Nr.prototype,"writeMinScale",null),u([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:BR}}}}})],Nr.prototype,"repeatLabel",void 0),u([p({type:Number,cast:Ii,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:BR}}}}})],Nr.prototype,"repeatLabelDistance",void 0),u([p({types:tYe,json:{origins:{"web-scene":{types:iYe,write:Que,default:null}},write:Que,default:null}})],Nr.prototype,"symbol",void 0),u([p({type:Boolean,json:{write:!0}})],Nr.prototype,"useCodedValues",void 0),u([p({type:String,json:{write:!0}})],Nr.prototype,"where",void 0),Nr=GW=u([U("esri.layers.support.LabelClass")],Nr);var HW;let Td=HW=class extends ye{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var t;return new HW({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((t=this.symbol)==null?void 0:t.clone())??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};u([p({type:String,json:{write:!0}})],Td.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Td.prototype,"label",void 0),u([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Td.prototype,"minValue",void 0),u([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Td.prototype,"maxValue",void 0),u([p(zK)],Td.prototype,"symbol",void 0),Td=HW=u([U("esri.renderers.support.ClassBreakInfo")],Td);var qW;const XTe="log",JD="percent-of-total",ZD="field",GR=new Et({esriNormalizeByLog:XTe,esriNormalizeByPercentOfTotal:JD,esriNormalizeByField:ZD}),Hlt=hr(Td);let ns=qW=class extends CC(gc){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new Td;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(Ce.getLogger(this).error(".field: field must be a string value"),null):jO(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&ZD||i&&JD||null,e&&i&&Ce.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==ZD&&t!==JD||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Td({minValue:t,maxValue:e,symbol:dxe(i)}):Hlt(ce(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&Ce.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await yy()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void Ce.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await yy(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new qW({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ce(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ce(this.visualVariables),legendOptions:ce(this.legendOptions),authoringInfo:ce(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Oo(t,e,this.valueExpression)];Ba(t,e,this.field),Ba(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const m=c.createSyntaxTree(a);l=c.createFunction(m),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===XTe)n=Math.log(n)*Math.LOG10E;else if(r!==JD||s==null||isNaN(s)){if(r===ZD&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};u([p(FK)],ns.prototype,"backgroundFillSymbol",void 0),u([p({type:[Td],json:{write:{isRequired:!0}}})],ns.prototype,"classBreakInfos",void 0),u([Ue("classBreakInfos")],ns.prototype,"readClassBreakInfos",null),u([qe("classBreakInfos")],ns.prototype,"writeClassBreakInfos",null),u([p({type:String,json:{write:!0}})],ns.prototype,"defaultLabel",void 0),u([p(K4)],ns.prototype,"defaultSymbol",void 0),u([p({type:String,json:{write:!0}})],ns.prototype,"field",void 0),u([_i("field")],ns.prototype,"castField",null),u([p({type:Boolean})],ns.prototype,"isMaxInclusive",void 0),u([p({type:UK,json:{write:!0}})],ns.prototype,"legendOptions",void 0),u([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ns.prototype,"minValue",null),u([p({type:String,json:{write:!0}})],ns.prototype,"normalizationField",void 0),u([p({type:Number,json:{write:!0}})],ns.prototype,"normalizationTotal",void 0),u([p({type:GR.apiValues,value:null,json:{type:GR.jsonValues,read:GR.read,write:GR.write}})],ns.prototype,"normalizationType",null),u([at({classBreaks:"class-breaks"})],ns.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],ns.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],ns.prototype,"valueExpressionTitle",void 0),ns=qW=u([U("esri.renderers.ClassBreaksRenderer")],ns);const WW=-3,qlt=WW-1;var Mm;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Mm||(Mm={}));const Wlt=!!ve("esri-tests-disable-gpu-memory-measurements");let Jlt=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){const r=this._db.get(e.id+i);return(r==null?void 0:r.size)??0}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,Mm.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,n,Mm.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return Wlt||console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,Mm.ALL);const a=1+Math.max(s,qlt)-WW;this._db.set(i,new Zlt(r,n,a)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i,r,n){i=e.id+i;const s=this._db.get(i);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(i,r,n,Mm.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forEach(c=>{const{id:h,name:m}=c;if(a.startsWith(h)){const y=i[m]||0;i[m]=y+o.size}})});const n={};this._users.forEach(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+WW-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,Mm.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,Mm.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){var a;const s=(a=this._users.get(e.split(_8)[0]))==null?void 0:a.removeFunc,o=s==null?void 0:s(i,n,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i==null?void 0:i.id;let s=!0;for(;s;){s=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!n||o.startsWith(n))){const l=i??this._users.get(o.split(_8)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return;s||(s=this._db.has(o))}}for(const[o,a]of this._db)if(!n||o.startsWith(n)){const l=i??this._users.get(o.split(_8)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,Mm.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},Zlt=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const _8=":";let KTe=class{constructor(e,i){this.removeFunc=i,this._storage=new Jlt,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},fde=class QTe{static parse(e,i,r){const n=[],s=[],o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[h,m,y]=c,v=Xlt(h,m,y);v&&s.push(v)}continue}if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){n.push(c);break}}else if(i.has(l))n.push(l);else if(a===0){n.length=0,n.push(Klt(r));break}}}return new QTe(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function Ylt(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Ye(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function Xlt(t,e,i){return{primitiveName:t,propertyName:e,value:Ylt(e,i),defaultValue:null}}function Klt(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var cE;let Wh=(cE=class{},cE.instance=new Cl("Etc/UTC"),cE);function Qlt(t){return t instanceof C1?t===Wh.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function qLt(t){return Qlt(t)?Wh.instance:t}function ect(t){return"timeZone"in t}function tct(t){return"timeZone"in t}function ict(t){return"dateFieldsTimeZone"in t}const rct=new Map;let WA=class YD{static fromJSON(e){return new YD(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new YD(e.fields??[],yde(e))}static fromLayerJSON(e){return new YD(e.fields??[],yde(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=mde(o);if(o&&a){const l=Lw(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),r.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),XX(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):O1e(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),Fae(s)||Uae(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)Fae(e)||Uae(e)||e.nullable||kJe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(Lw(e))??this._normalizedFieldsMap.get(mde(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(Ce.getLogger("esri.layers.support.FieldsIndex").errorOnce(new Q("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Jp):eEe.has(i.type)?yb:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===yb?Wh.instance:i===Jp?ws.utcInstance:x1(rct,i,()=>Cl.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return L1e(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>TA(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Lw(t){return t.trim().toLowerCase()}function mde(t){var e;return((e=mJe(t))==null?void 0:e.toLowerCase())??""}const eEe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function yde(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=ict(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?K3(t.dateFieldsTimeReference):null,l=n?ect(n)?n.timeZone??a:n.dateFieldsTimeReference?K3(n.dateFieldsTimeReference):a??Jp:null,c=r?tct(r)?r.timeZone??a:r.timeReference?K3(r.timeReference):a:null,h=new Map([[Lw((n==null?void 0:n.creationDateField)??""),l],[Lw((n==null?void 0:n.editDateField)??""),l],[Lw(s),c],[Lw(o),c]]);for(const{name:m,type:y}of t.fields)if(eEe.has(y))e.set(m,yb);else if(y!=="date"&&y!=="esriFieldTypeDate")e.set(m,null);else if(i)e.set(m,yb);else{const v=h.get(Lw(m??""))??a;e.set(m,v)}return e}var ai;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.CannotCompareDateAndTime="CannotCompareDateAndTime",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",t.UnexpectedToken="UnexpectedToken",t.Unrecognized="Unrecognized",t.UnrecognizedType="UnrecognizedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FunctionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference",t.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",t.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(ai||(ai={}));const tEe={[ai.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[ai.LogicError]:"Logic error - {reason}",[ai.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[ai.NeverReach]:"Encountered unreachable logic",[ai.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[ai.ModuleAccessorMustBeString]:"Module accessor must be a string",[ai.ModuleExportNotFound]:"Module has no export with provided identifier",[ai.ModulesNotSupported]:"Current profile does not support modules",[ai.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[ai.FunctionNotFound]:"Function not found",[ai.FieldNotFound]:"Key not found - {key}",[ai.CircularModules]:"Circular module dependencies are not allowed",[ai.Cancelled]:"Execution cancelled",[ai.UnsupportedHashType]:"Type not supported in hash function",[ai.IllegalResult]:"Value is not a supported return type",[ai.PortalRequired]:"Portal is required",[ai.InvalidParameter]:"Invalid parameter",[ai.WrongNumberOfParameters]:"Call with wrong number of parameters",[ai.Unrecognized]:"Unrecognized code structure",[ai.UnrecognizedType]:"Unrecognized type",[ai.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[ai.BooleanConditionRequired]:"Conditions must use booleans",[ai.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[ai.NoFunctionInArray]:"Arrays cannot contain functions.",[ai.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[ai.KeyAccessorMustBeString]:"Accessor must be a string",[ai.KeyMustBeString]:"Object keys must be a string",[ai.Immutable]:"Object is immutable",[ai.UnexpectedToken]:"Unexpected token",[ai.MemberOfNull]:"Cannot access property of null object",[ai.MaximumCallDepth]:"Exceeded maximum function depth",[ai.OutOfBounds]:"Out of bounds",[ai.InvalidIdentifier]:"Identifier not recognized",[ai.CallNonFunction]:"Expression is not a function",[ai.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[ai.AssignModuleFunction]:"Cannot assign function to module variable",[ai.UnsupportedUnaryOperator]:"Unsupported unary operator",[ai.UnsupportedOperator]:"Unsupported operator",[ai.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[ai.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[ai.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[ai.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[ai.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};let nct=class extends Error{constructor(...e){super(...e)}},gde=class iEe extends nct{constructor(e,i){super(ZK(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,iEe),i!=null&&i.loc&&(this.loc=i.loc)}},sct=class rEe extends Error{constructor(e,i,r,n){super("Execution error - "+ZK(r)+Tb(tEe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,rEe),r!=null&&r.loc&&(this.loc=r.loc)}};function ZK(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let JLt=class nEe extends Error{constructor(e,i,r,n){super("Compilation error - "+ZK(r)+Tb(tEe[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,nEe),r!=null&&r.loc&&(this.loc=r.loc)}},ZLt=class sEe extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,sEe)}};function YLt(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&(e!=null&&e.loc)?new gde(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e!=null&&e.loc?new gde(i,{cause:i}):i)}var jF;(function(t){t.UnrecognizedUri="UnrecognizedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(jF||(jF={}));const oct={[jF.UnrecognizedUri]:"Unrecognized uri - {uri}",[jF.UnsupportedUriProtocol]:"Unrecognized uri protocol"};let XLt=class oEe extends Error{constructor(e,i){super(Tb(oct[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,oEe)}};function XD(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let KLt=class{constructor(e,i){const r=new Map;for(const n of e){const s=XD(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const o=XD(n);if(r.has(o))throw new Error(`${n} already associated with ${r.get(o)}`);r.set(o,s)}this._enumMap=r}lookup(e){return this._enumMap.get(XD(e))}get(e){const i=this.lookup(e);if(i==null)throw new sct(null,ai.InvalidParameter,null);return i}};var VF;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(VF||(VF={}));const act={[VF.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let lct=class aEe extends Error{constructor(e,i){super(Tb(act[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,aEe)}};function Bx(t,e,i){return t<e?t-e:t>i?t-i:0}function Gx(t,e,i){return t<e?e:t>i?i:t}let Km=class ts{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(a))return null;const c=pt.local(e,i).daysInMonth;let h=pt.fromObject({day:Gx(r,1,c),year:e,month:Gx(i,1,12),hour:Gx(n,0,23),minute:Gx(s,0,59),second:Gx(o,0,59),millisecond:Gx(a,0,999)},{zone:Rh(l)});return h=h.plus({months:Bx(i,1,12),days:Bx(r,1,c),hours:Bx(n,0,23),minutes:Bx(s,0,59),seconds:Bx(o,0,59),milliseconds:Bx(a,0,999)}),new ts(h)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Rh(i);return e.isUnknownTimeZone||r===Wh.instance?ts.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new ts(e._date.setZone(r))}static dateJSToArcadeDate(e){return new ts(pt.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Rh(i);return new ts(pt.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new ts(pt.fromMillis(e,{zone:Wh.instance}))}static unknownDateJSToArcadeDate(e){return new ts(pt.fromMillis(e.getTime(),{zone:Wh.instance}))}static epochToArcadeDate(e,i="system"){const r=Rh(i);return new ts(pt.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new ts(e)}clone(){return new ts(this._date)}changeTimeZone(e){const i=Rh(e);return ts.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Rh(i);return e.zone===Wh.instance||r===Wh.instance?ts.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new ts(e.setZone(r))}static nowToArcadeDate(e){const i=Rh(e);return new ts(pt.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new ts(pt.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===ts.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Wh.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new ts(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new ts(this._date.toUTC())}toLocal(){return new ts(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=pt.fromISO(e,{setZone:!0});return new ts(i)}};function Rh(t,e=!0){if(t instanceof C1)return t;switch(XD(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Wh.instance}if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const r=ws.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Cl.create(t);if(!i.isValid){if(e)throw new lct(VF.TimeZoneNotRecognized);return null}return i}function vde(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const bde="esri.core.sql.dateonly";let cct=class Ql{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=bde}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===bde}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return Ql.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new Ql(this._year,this._month,this._day)}toDateTime(e){return pt.fromObject({day:this.day,month:this.month,year:this.year},{zone:Rh(e)})}toDateTimeLuxon(e){return pt.fromObject({day:this.day,month:this.month,year:this.year},{zone:Rh(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=vde(e)),!e)return"";const r=this.toDateTime("unknown");return Km.dateTimeToArcadeDate(r).toFormat(e,{locale:Tl(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Km.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return Ql.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return pt.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=pt.fromMillis(e,{zone:ws.utcInstance});return i.isValid?Ql.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=pt.fromSeconds(e,{zone:ws.utcInstance});return i.isValid?Ql.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new Ql(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new Ql(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return Ql.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return Ql.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=vde(i))&&r.push(i);else if(i===null||i===""){const n=pt.fromISO(e,{setZone:!0});return n.isValid?Ql.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=pt.fromFormat(e,i??n);if(s.isValid)return new Ql(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=pt.fromJSDate(new Date).setZone(Rh(e));return new Ql(i.year,i.month,i.day)}};function eRt(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new jt({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function tRt(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function HR(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function wde(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const _de="esri.core.sql.timeonly";let uct=class $h{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=_de}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===_de}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return $h.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new $h(this.hour,this.minute,this.second,this.millisecond)}isValid(){return HR(this.hour)&&HR(this.minute)&&HR(this.second)&&HR(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=wde(e))?pt.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:Tl(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new $h(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new $h(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new $h(n,r,i,s)}static fromDateJS(e){return new $h(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new $h(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=wde(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=pt.fromFormat(e,n);if(s.isValid)return new $h(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return $h.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return pt.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const dct=["geometry","scale","timeProperties"];function iRt(t,e){if(e!=null)for(const i of dct)e.hasArcadeDependency(i)&&t.add(i);return t}function hct(t,e){return lEe.create(t,e,null,["$feature","$view"])}function pct(t,e,i){return lEe.create(t,e,i,["$feature","$view","$config"])}let lEe=class cEe{static async create(e,i,r,n){const{arcade:s,Dictionary:o}=await yy();let a;try{a=s.parseScript(e)}catch(v){throw new Q("arcade-bad-expression","Failed to parse arcade script",{script:e,error:v})}const l=s.scriptUsesGeometryEngine(a);l&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,a,null,!1,l);const c={vars:n.reduce((v,w)=>({...v,[w]:null}),{}),spatialReference:i,useAsync:!1},h=s.compileScript(a,c);let m=null;r!=null&&(m=new o(r),m.immutable=!0);const y=new o;return y.immutable=!1,y.setField("scale",0),new cEe(e,s,a,h,i,y,m,o)}constructor(e,i,r,n,s,o,a,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=o,this._configDict=a,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new uEe,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){var n;const r=(n=i.$view)==null?void 0:n.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:o,currentEnd:a}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:o!=null?r!=null?Km.epochToArcadeDate(o,r):Km.unknownEpochToArcadeDate(o):void 0,currentEnd:a!=null?r!=null?Km.epochToArcadeDate(a,r):Km.unknownEpochToArcadeDate(a):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},uEe=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new WA(dEe(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Ao(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===yb}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return cct.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return uct.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Km.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Km.unknownEpochToArcadeDate(n):Km.epochToArcadeDate(n,this.contextTimeZone??_u);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){var i;return{attributes:this._boundTarget.attributes,geometry:(e==null?void 0:e.keepGeometryType)===!0?this.geometry():((i=this.geometry())==null?void 0:i.toJSON())??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function dEe(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let fct=class hEe{static async from(e,i,r){const n=e.dictionary_version?O$e.parse(e.dictionary_version):null,s=new Set(e.itemsNames),o={};if(i)for(const m in i)o[m]=i[m];if(e.authoringInfo.configuration)for(const m of e.authoringInfo.configuration)o.hasOwnProperty(m.name)||(o[m.name]=m.value);const a=new Set(e.authoringInfo.symbol);for(const m of Object.keys(r))a.delete(m);a.size&&Ce.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const l=await pct(e.expression,null,o);if(!l)throw new Q("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!n||!n.greaterEqual(4,0);c&&Ce.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const h=new mct(r,c);return new hEe(c,s,l,h)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){Ce.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new WA(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new WA(i)}},mct=class extends uEe{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};var xde,Sde,$de,Tde,Ip,Ede,JW,ZW,YW,Cde,XW,KW,Ide,Mde,kde,Ade,QW,eJ,Ode,Pde,eT,Kt,Rw,BF,Lde,Qm,Rde,Dde,M$,tJ,Nde,zde,Fde,Ude,jde,Vde,Bde,xl,So,Gde,Hde,bu,qde,Wde,Jde,Zde,md,Nk,Dw,k$,Yde,Xde,Kde,iJ,Qde,GF,ehe,HF,A$,the,rJ,ihe,rhe;(function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"})(xde||(xde={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(Sde||(Sde={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}($de||($de={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(Tde||(Tde={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(Ip||(Ip={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(Ede||(Ede={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(JW||(JW={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(ZW||(ZW={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(YW||(YW={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(Cde||(Cde={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(XW||(XW={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(KW||(KW={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(Ide||(Ide={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(Mde||(Mde={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(kde||(kde={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(Ade||(Ade={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(QW||(QW={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(eJ||(eJ={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(Ode||(Ode={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(Pde||(Pde={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(eT||(eT={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(Kt||(Kt={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(Rw||(Rw={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(BF||(BF={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(Lde||(Lde={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(Qm||(Qm={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(Rde||(Rde={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(Dde||(Dde={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(M$||(M$={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(tJ||(tJ={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(Nde||(Nde={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(zde||(zde={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(Fde||(Fde={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AlongLine=1]="AlongLine"}(Ude||(Ude={})),function(t){t[t.Auto=0]="Auto",t[t.Clockwise=1]="Clockwise",t[t.Counterclockwise=2]="Counterclockwise"}(jde||(jde={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(Vde||(Vde={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(Bde||(Bde={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(xl||(xl={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(So||(So={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(Gde||(Gde={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(Hde||(Hde={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(bu||(bu={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(qde||(qde={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(Wde||(Wde={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(Jde||(Jde={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(Zde||(Zde={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(md||(md={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(Nk||(Nk={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(Dw||(Dw={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(k$||(k$={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(Yde||(Yde={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(Xde||(Xde={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(Kde||(Kde={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(iJ||(iJ={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(Qde||(Qde={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(GF||(GF={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(ehe||(ehe={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(HF||(HF={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(A$||(A$={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(the||(the={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(rJ||(rJ={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(ihe||(ihe={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(rhe||(rhe={}));const yct={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Jn={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:GF.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:GF.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:XW.Loop,repeatdelay:0,easing:KW.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function gct(t){return typeof t=="function"}function sRt(t,e,i,r){return gct(t)?t(e,i,r):t}function oRt(t){return[t.r,t.g,t.b,t.a]}const vct=` /-,
`;function nhe(t){let e=t.length;for(;e--;)if(!vct.includes(t.charAt(e)))return!1;return!0}function bct(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,nhe(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,nhe(s)])}return i}function aRt(t,e,i){let r="",n=null;for(const s of e){const[o,a,l]=s;if(o!=null&&o!=="")l?n=o:(n!=null&&(r+=n,n=null),r+=o);else{const c=t.readAttribute(a);c!=null&&c!==""&&(n!==null&&(r+=n,n=null),r+=c)}}return pEe(r,i)}function wct(t,e,i,r){let n="",s=null;for(const o of e){const[a,l,c]=o;if(a!=null&&a!=="")c?s=a:(s!=null&&(n+=s,s=null),n+=a);else{let h=l;i!=null&&(h=Lct(l,i));const m=t.attributes[h];m!=null&&m!==""&&(s!=null&&(n+=s,s=null),n+=m)}}return pEe(n,r)}function pEe(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function lRt(t,e,i,r,n,s,o=!0){const a=e/n,l=i/s,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let m=0;m<s;m++)for(let y=0;y<n;y++){const v=4*(y+(o?s-m-1:m)*n);let w=0,x=0,S=0,C=0,k=0,A=0,R=0;const D=(m+.5)*l;for(let B=Math.floor(m*l);B<(m+1)*l;B++){const z=Math.abs(D-(B+.5))/h,W=(y+.5)*a,Y=z*z;for(let ee=Math.floor(y*a);ee<(y+1)*a;ee++){let ge=Math.abs(W-(ee+.5))/c;const fe=Math.sqrt(Y+ge*ge);fe>=-1&&fe<=1&&(w=2*fe*fe*fe-3*fe*fe+1,w>0&&(ge=4*(ee+B*e),R+=w*t[ge+3],S+=w,t[ge+3]<255&&(w=w*t[ge+3]/250),C+=w*t[ge],k+=w*t[ge+1],A+=w*t[ge+2],x+=w))}}r[v]=C/x,r[v+1]=k/x,r[v+2]=A/x,r[v+3]=R/S}}function fEe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function YK(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function XK(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function mEe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function _ct(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function ej(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const qt=(t,e=0)=>t==null||isNaN(t)?e:t,cRt=(t,e)=>t??e,uRt=(t,e)=>t??e,dRt=t=>t.tintColor?fEe(t.tintColor):[255,255,255,1],xct=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function Sct(){return $e(()=>import("./geometryEngineJSON-BVpgM-_G.js").then(t=>t.g),__vite__mapDeps([5,6,7,8]))}function $ct(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Tct(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function yEe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function gEe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function zk(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=zk(e);if(i!=null)return i}break;case"CIMTextSymbol":return zk(t.symbol);case"CIMSolidFill":return t.color}return null}function qF(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=qF(i);if(r!=null)return r}break}case"CIMTextSymbol":return qF(t.symbol);case"CIMSolidStroke":return t.color}}function hRt(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function WF(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=WF(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return WF(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function Ect(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Cct(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Ict(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Hx=t=>t.includes("data:image/svg+xml");function JF(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function dP(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function pRt(t,e,i,r,n,s,o=!0){const{infos:a}=s;let l=1,c=0,h=0,m=0,y=1;for(const{absoluteAnchorPoint:x,offsetX:S,offsetY:C,rotation:k,size:A,frameHeight:R,rotateClockWise:D,scaleSymbolsProportionally:B}of a)y=x?1:l,h=ahe(S,C,c,y,h),m=ohe(S,C,c,y,m),R&&(B||o)&&(l*=A/R),c=lhe(k,D,c);const v=ahe(r,n,c,y,h),w=ohe(r,n,c,y,m);return{size:t*l,rotation:lhe(e,i,c),offsetX:v,offsetY:w}}function Mct(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>Mct(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function kct(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...yct[e]];const i=Jn[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function Act(t){return t.split(" ").map(e=>Number(e))}function Oct(t){return typeof t=="string"?Act(t):t}function vEe(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=Oct(t.dashTemplate)),t}function nJ(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return nJ(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return nJ(i.symbol)}}return"Normal"}function Pct(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Jn.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&ej(i.markerPlacement)){const r=i.size??Jn.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function Lct(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function Rct(t){return t.map(e=>({...e,propertyName:dP(e.propertyName)}))}function she(t){const e={};for(const i in t){const r=t[i];e[dP(i)]=r}return e}function ohe(t,e,i,r,n){const s=i*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*t+o*e)*r+n}return e*r+n}function ahe(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function lhe(t,e,i){return e?i-t:i+t}function fRt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[dP(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=kct(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function mRt(t,e,i){if(e[dP(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function lM(t,e){return Math.max(Math.min((t??e)/100,1),0)}const Dct={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let bEe=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new KTe(100);const s=async()=>fct.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){var m;const n=await this._evaluator,s=(i==null?void 0:i.fields)??dEe(e.attributes),o=n.createDictionaryFieldsIndex(s),a=n.evaluate(e,(i==null?void 0:i.scale)??0,o,i==null?void 0:i.spatialReference);if(a==null)return null;const l=mC(e.geometry),c=fde.parse(a,n.itemNames,l),h=l==="esriGeometryPoint"&&!((m=e.geometry)!=null&&m.hasZ);return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,h,i,r,o)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=fde.parse(e,n.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=che(await Promise.all(s.partNames.map(l=>this._getSymbolPart(l))),s.overrides,o);return new Co({data:a})}async _cimPartsToCIMSymbol(e,i,r,n,s,o,a){const l=i.map(m=>this._getSymbolPart(m,s));let c=await Promise.all(l);if(o&&this.fieldMap&&c.length>0){const{OverrideHelper:m}=await $e(()=>Promise.resolve().then(()=>Zvt),void 0);c=ce(c);for(const y of c)m.applyDictionaryTextOverrides(y,e,this.fieldMap,a,nJ(y))}const h=che(c,r,n);return new Co({data:h})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await Ot(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.get(e)),r}};function che(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=Dct),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var sJ;let ad=sJ=class extends CC(gc){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new bEe(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new sJ({config:ce(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ce(this.fieldMap),url:ce(this.url),visualVariables:ce(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Oo(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await Ot(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};u([p({type:bEe})],ad.prototype,"_loader",null),u([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ad.prototype,"config",void 0),u([p({type:Object,json:{write:!0}})],ad.prototype,"fieldMap",void 0),u([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ad.prototype,"scaleExpression",void 0),u([qe("scaleExpression")],ad.prototype,"writeData",null),u([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],ad.prototype,"scaleExpressionTitle",void 0),u([p({type:String,json:{write:!0}})],ad.prototype,"url",void 0),u([qe("visualVariables")],ad.prototype,"writeVisualVariables",null),ad=sJ=u([U("esri.renderers.DictionaryRenderer")],ad);var oJ;let fm=oJ=class extends ye{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(Ce.getLogger(this).error(".field: field must be a string value"),null):jO(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new oJ({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([p({type:Ye,json:{type:[Number],write:!0}})],fm.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],fm.prototype,"field",void 0),u([_i("field")],fm.prototype,"castField",null),u([p({type:String,json:{write:!0}})],fm.prototype,"label",void 0),u([p({type:String,json:{write:!0}})],fm.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],fm.prototype,"valueExpressionTitle",void 0),fm=oJ=u([U("esri.renderers.support.AttributeColorInfo")],fm);const wEe=fm;var aJ;let KD=aJ=class extends ye{constructor(){super(...arguments),this.unit=null}clone(){return new aJ({unit:this.unit})}};u([p({type:String,json:{write:!0}})],KD.prototype,"unit",void 0),KD=aJ=u([U("esri.renderers.support.DotDensityLegendOptions")],KD);const Nct=KD;var lJ;let rl=lJ=class extends CC(gc){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ye([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Vr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Io({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new lJ({attributes:ce(this.attributes),backgroundColor:ce(this.backgroundColor),dotBlendingEnabled:ce(this.dotBlendingEnabled),dotShape:ce(this.dotShape),dotSize:ce(this.dotSize),dotValue:ce(this.dotValue),legendOptions:ce(this.legendOptions),outline:ce(this.outline),referenceScale:ce(this.referenceScale),seed:ce(this.seed),visualVariables:ce(this.visualVariables),authoringInfo:ce(this.authoringInfo)})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Oo(t,e,i.valueExpression),i.field&&t.add(i.field)}};u([p({type:[wEe],json:{write:!0}})],rl.prototype,"attributes",void 0),u([p({type:Ye,json:{write:!0}})],rl.prototype,"backgroundColor",void 0),u([p({type:Boolean,json:{write:!0}})],rl.prototype,"dotBlendingEnabled",void 0),u([p({type:String,json:{write:!1}})],rl.prototype,"dotShape",void 0),u([p({type:Number,json:{write:!0}})],rl.prototype,"dotSize",void 0),u([p({type:Nct,json:{write:!0}})],rl.prototype,"legendOptions",void 0),u([p({type:Vr,json:{default:null,write:!0}})],rl.prototype,"outline",void 0),u([p({type:Number,json:{write:!0}})],rl.prototype,"dotValue",void 0),u([p({type:Number,json:{write:!0}})],rl.prototype,"referenceScale",void 0),u([p({type:Number,json:{write:!0}})],rl.prototype,"seed",void 0),u([at({dotDensity:"dot-density"})],rl.prototype,"type",void 0),rl=lJ=u([U("esri.renderers.DotDensityRenderer")],rl);var cJ;let ey=cJ=class extends ye{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new cJ({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([p({type:Ye,json:{type:[fi],default:null,write:{isRequired:!0}}})],ey.prototype,"color",void 0),u([p({type:Number,json:{write:{isRequired:!0}}})],ey.prototype,"ratio",void 0),ey=cJ=u([U("esri.renderers.support.HeatmapColorStop")],ey);let qS=class extends It.ClonableMixin(ye){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([p({type:String,json:{write:!0}})],qS.prototype,"minLabel",void 0),u([p({type:String,json:{write:!0}})],qS.prototype,"maxLabel",void 0),u([p({type:String,json:{write:!0}})],qS.prototype,"title",void 0),qS=u([U("esri.renderers.support.HeatmapLegendOptions")],qS);function zct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Fct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Uct(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function jct(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function _Ee(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function xEe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function SEe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Vct(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Bct(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Gct(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Hct(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function qct(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Wct(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function Jct(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function $Ee(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function TEe(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function EEe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function CEe(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function Zct(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Yct(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Xct(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function Kct(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function IEe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function Qct(t,e=1){const i=S4;let r,n,s,o,a,l;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*c,t[3]=e*o*c,t}function eut(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function tut(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],c=i[3],h=c*r+a*s-l*n,m=c*n+l*r-o*s,y=c*s+o*n-a*r,v=-o*r-a*n-l*s;return t[0]=h*c+v*-o+m*-l-y*-a,t[1]=m*c+v*-a+y*-o-h*-l,t[2]=y*c+v*-l+h*-a-m*-o,t[3]=e[3],t}function iut(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function rut(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function nut(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3],h=Va();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const sut=_Ee,out=xEe,aut=SEe,lut=$Ee,cut=TEe,uut=EEe,dut=CEe;Object.freeze(Object.defineProperty({__proto__:null,add:jct,ceil:Vct,copy:zct,copyVec3:Fct,dist:lut,distance:$Ee,div:aut,divide:SEe,dot:Kct,equals:nut,exactEquals:rut,floor:Bct,inverse:Yct,len:uut,length:EEe,lerp:IEe,max:Hct,min:Gct,mul:out,multiply:xEe,negate:Zct,normalize:Xct,random:Qct,round:qct,scale:Wct,scaleAndAdd:Jct,set:Uct,sqrDist:cut,sqrLen:dut,squaredDistance:TEe,squaredLength:CEe,str:iut,sub:sut,subtract:_Ee,transformMat4:eut,transformQuat:tut},Symbol.toStringTag,{value:"Module"}));function tj(){return[0,0,0,0]}function hut(t){return[t[0],t[1],t[2],t[3]]}function k1(t,e,i,r){return[t,e,i,r]}function put(t,e,i,r){return[t,e,i,r]}function fut(t,e=tj()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function MEe(){return tj()}function kEe(){return k1(1,1,1,1)}function AEe(){return k1(1,0,0,0)}function OEe(){return k1(0,1,0,0)}function PEe(){return k1(0,0,1,0)}function LEe(){return k1(0,0,0,1)}const mut=MEe(),yut=kEe(),gut=AEe(),vut=OEe(),but=PEe(),wut=LEe();Object.freeze(Object.defineProperty({__proto__:null,ONES:yut,UNIT_W:wut,UNIT_X:gut,UNIT_Y:vut,UNIT_Z:but,ZEROS:mut,clone:hut,create:tj,freeze:put,fromArray:fut,fromValues:k1,ones:kEe,unitW:LEe,unitX:AEe,unitY:OEe,unitZ:PEe,zeros:MEe},Symbol.toStringTag,{value:"Module"}));const KK=2.4;function _ut(t){return Di(t*KK)}function xut(t){return ui(t)/KK}function Sut(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=da((r-s)/(a-s),0,1);IEe(t,n.toArray(),o.toArray(),l)}function vRt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=tj();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];Sut(o,r,n,l),i.set(o,4*a)}return i}function bRt(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function wRt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var uJ;function uhe(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let Ps=uJ=class extends gc{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new ey({ratio:0,color:new Ye("rgba(255, 140, 0, 0)")}),new ey({ratio:.75,color:new Ye("rgba(255, 140, 0, 1)")}),new ey({ratio:.9,color:new Ye("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return uhe(t)}get blurRadius(){return xut(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",_ut(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(KK**2*this.blurRadius**4)}read(t,e){t=uhe(t),super.read(t,e)}getSymbol(){return new jr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Ba(t,e,i),r&&typeof r=="string"&&await Oo(t,e,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new uJ({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ce(this.colorStops),field:this.field,legendOptions:ce(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([p({type:Yr,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ps.prototype,"authoringInfo",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ps.prototype,"blurRadius",null),u([p({type:[ey],json:{write:{isRequired:!0}}})],Ps.prototype,"colorStops",void 0),u([p({type:String,json:{write:!0}})],Ps.prototype,"field",void 0),u([p({type:qS,json:{write:!0}})],Ps.prototype,"legendOptions",void 0),u([p({type:Number,json:{write:!0}})],Ps.prototype,"maxDensity",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ps.prototype,"maxPixelIntensity",null),u([p({type:Number,json:{write:!0}})],Ps.prototype,"minDensity",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ps.prototype,"minPixelIntensity",null),u([p({type:Number,cast:Ii,json:{write:!0}})],Ps.prototype,"radius",void 0),u([p({type:Number,range:{min:0},json:{default:0,write:!0}})],Ps.prototype,"referenceScale",void 0),u([at({heatmap:"heatmap"})],Ps.prototype,"type",void 0),u([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Ps.prototype,"valueExpression",void 0),u([p({type:String})],Ps.prototype,"valueExpressionTitle",void 0),u([p({readOnly:!0})],Ps.prototype,"_pixelIntensityToDensity",null),Ps=uJ=u([U("esri.renderers.HeatmapRenderer")],Ps);let Nw=class extends It.ClonableMixin(ye){constructor(){super(...arguments),this.color=new Ye([0,0,0,0]),this.label=null,this.threshold=0}};u([p({type:Ye,json:{write:!0}})],Nw.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],Nw.prototype,"label",void 0),u([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Nw.prototype,"threshold",void 0),Nw=u([U("esri.renderers.support.OthersCategory")],Nw);const $ut={base:Ko,key:"type",typeMap:{size:Ci,opacity:Dm}};let nl=class extends CC(It.ClonableMixin(gc)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ye([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Nw,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var e;return new jr({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Mr)}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Oo(e,i,r.valueExpression),r.field&&e.add(r.field)}};u([p({type:[wEe],json:{write:!0}})],nl.prototype,"attributes",void 0),u([p(FK)],nl.prototype,"backgroundFillSymbol",void 0),u([p({type:Ye,json:{write:!0}})],nl.prototype,"defaultColor",void 0),u([p({type:String,json:{write:!0}})],nl.prototype,"defaultLabel",void 0),u([p({type:Number,range:{min:0,max:1},json:{write:!0}})],nl.prototype,"holePercentage",void 0),u([p({type:Nw,json:{write:!0}})],nl.prototype,"othersCategory",void 0),u([p({type:UK,json:{write:!0}})],nl.prototype,"legendOptions",void 0),u([p({type:Vr,json:{default:null,write:!0}})],nl.prototype,"outline",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],nl.prototype,"size",void 0),u([at({pieChart:"pie-chart"})],nl.prototype,"type",void 0),u([p({types:[$ut]})],nl.prototype,"visualVariables",void 0),nl=u([U("esri.renderers.PieChartRenderer")],nl);const hP={key:"type",base:gc,typeMap:{heatmap:Ps,simple:za,"unique-value":Cr,"class-breaks":ns,"dot-density":rl,dictionary:ad,"pie-chart":nl},errorContext:"renderer"},Tut={key:"type",base:gc,typeMap:{simple:za,"unique-value":Cr,"class-breaks":ns,heatmap:Ps},errorContext:"renderer",validate:Eut};function Eut(t){switch(t.type){case"simple":return Cut(t);case"unique-value":return Iut(t);case"class-breaks":return Mut(t);case"heatmap":return t}}function Cut(t){if(t.symbol)return t;Ce.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Iut(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||Ce.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function Mut(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||Ce.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function kut(t,e){return JA(t,null,e)}const Aut=dC({types:hP});function JA(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Sc("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Aut(t,e,i):null}var dJ;let wo=dJ=class extends Gv{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Ii("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Wn(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?JA(r,e,i)??void 0:BK(e,i)}clone(){return new dJ({fields:ce(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ce(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:ce(this.popupTemplate),renderer:ce(this.renderer),binType:ce(this.binType),size:this.size})}};u([at({binning:"binning"})],wo.prototype,"type",void 0),u([at({geohash:"geohash",square:"square"}),p({type:["geohash","square"]})],wo.prototype,"binType",void 0),u([p({type:Number,json:{write:!0}})],wo.prototype,"fixedBinLevel",void 0),u([p({type:[Nr],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],wo.prototype,"labelingInfo",void 0),u([p(W4)],wo.prototype,"labelsVisible",void 0),u([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],wo.prototype,"maxScale",void 0),u([p(q4)],wo.prototype,"popupEnabled",void 0),u([p({type:Bd,json:{name:"popupInfo",write:!0}})],wo.prototype,"popupTemplate",void 0),u([p({cast:t=>t==="auto"?t:Da(Ii(t))})],wo.prototype,"size",void 0),u([p({type:[ta],json:{write:!0}})],wo.prototype,"fields",void 0),u([qe("fields")],wo.prototype,"writeFields",null),u([p({types:hP,json:{write:{target:"drawingInfo.renderer"}}})],wo.prototype,"renderer",void 0),u([Ue("renderer",["drawingInfo.renderer"])],wo.prototype,"readRenderer",null),wo=dJ=u([U("esri.layers.support.FeatureReductionBinning")],wo);var hJ;function dhe(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let ss=hJ=class extends ye{constructor(t){super(t),this.type="cluster",this.clusterRadius=Ii("80px"),this.clusterMinSize=Ii("12px"),this.clusterMaxSize=Ii("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?dhe(r)?null:JA(r,e,i)??void 0:BK(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&dhe(r)){const o=JA(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new za({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Wn(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>ta.fromJSON(r))}clone(){return new hJ({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ce(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ce(this.fields),maxScale:this.maxScale,renderer:ce(this.renderer),symbol:ce(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ce(this.popupTemplate)})}};u([p({type:["cluster"],readOnly:!0,json:{write:!0}})],ss.prototype,"type",void 0),u([p({cast:t=>t==="auto"?t:Da(Ii(t)),json:{write:!0}})],ss.prototype,"clusterRadius",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],ss.prototype,"clusterMinSize",void 0),u([p({type:Number,cast:Ii,json:{write:!0}})],ss.prototype,"clusterMaxSize",void 0),u([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ss.prototype,"maxScale",void 0),u([p(q4)],ss.prototype,"popupEnabled",void 0),u([p({type:Bd,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ss.prototype,"popupTemplate",void 0),u([p({types:hP,json:{write:{target:"drawingInfo.renderer"}}})],ss.prototype,"renderer",void 0),u([Ue("renderer",["drawingInfo.renderer"])],ss.prototype,"readRenderer",null),u([p({types:QZe})],ss.prototype,"symbol",void 0),u([Ue("symbol",["drawingInfo.renderer"])],ss.prototype,"readSymbol",null),u([qe("symbol")],ss.prototype,"writeSymbol",null),u([p({type:[Nr],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ss.prototype,"labelingInfo",void 0),u([p(W4)],ss.prototype,"labelsVisible",void 0),u([p({type:[ta],json:{write:!0}})],ss.prototype,"fields",void 0),u([qe("fields")],ss.prototype,"writeFields",null),u([Ue("fields")],ss.prototype,"readFields",null),ss=hJ=u([U("esri.layers.support.FeatureReductionCluster")],ss);var pJ;let Fk=pJ=class extends Gv{constructor(t){super(t),this.type="selection"}clone(){return new pJ}};u([p({type:["selection"]})],Fk.prototype,"type",void 0),Fk=pJ=u([U("esri.layers.support.FeatureReductionSelection")],Fk);const hhe={key:"type",base:Gv,typeMap:{cluster:ss,binning:wo}},Out={types:{key:"type",base:Gv,typeMap:{selection:Fk,cluster:ss,binning:wo}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:hhe},"portal-item":{types:hhe},"web-scene":{types:{key:"type",base:Gv,typeMap:{selection:Fk}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Sr}}}}},Put=()=>Ce.getLogger("esri.views.2d.layers.support.clusterUtils");ve.add("esri-cluster-arcade-enabled",!0);const Lut=ve("esri-cluster-arcade-enabled"),Rut=new Set(["simple-line","simple-fill","picture-fill"]);function phe(t,e){let i=e.clone();if(!Dut(i))return i;if(e.symbols.some(r=>Rut.has(r.type))&&(i=new za({symbol:new jr})),i.authoringInfo||(i.authoringInfo=new Yr),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=I0(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=cM(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=I0(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=I0(t,n.field,"avg","number"):n.valueExpression&&(n.field=cM(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=I0(t,r.field,"sum","number"):r.valueExpression&&(r.field=cM(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=I0(t,i.field,"mode","string"):i.valueExpression&&(i.field=cM(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=I0(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=I0(t,i.field,"avg","number"):i.valueExpression&&(i.field=cM(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Dut=t=>{const e=i=>Put().error(new Q("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Lut){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Nut(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+_4(s)}}}function cM(t,e,i,r){const n=_4(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===s)||t.push(new ta({name:s,isAutoGenerated:!0,onStatisticExpression:new gv({expression:e,returnType:r}),statisticType:i})),s}function I0(t,e,i,r,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=Nut(i,e,n);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new ta({name:s,isAutoGenerated:!0,onStatisticExpression:new gv({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new ta({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const zut=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.addHandles(Le(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},Bp))}set featureReduction(r){const n=this._normalizeFeatureReduction(r);this._set("featureReduction",n)}set renderer(r){}_withClusterVariable(r,n,s){const o=r.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(a=>a.type==="size")||o.visualVariables.push(new Ci({field:"cluster_count",stops:[new $d({value:1}),new $d({useMinValue:!0,size:n}),new $d({useMaxValue:!0,size:s})]}))),o}_normalizeFeatureReduction(r){var y;if((r==null?void 0:r.type)!=="cluster")return r;const n=r.clone(),s=[new ta({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(n.fields??[]).filter(v=>!v.isAutoGenerated),a=r.renderer&&!((y=r.renderer.authoringInfo)!=null&&y.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:c}=n;if(a){n.fields=[...s,...o];const v=this._withClusterVariable(n.renderer,l,c);return n.effectiveFeatureRenderer=v,n.effectiveClusterRenderer=v,n}if(r.symbol){if(n.fields=[...s,...o],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const v=phe(s,this.renderer),w=this._withClusterVariable(v,l,c),x="visualVariables"in w&&w.visualVariables?w.visualVariables:[],S=new za({symbol:r.symbol,visualVariables:x});return n.fields=[...s,...o],n.effectiveFeatureRenderer=w,n.effectiveClusterRenderer=S,n}if(!this.renderer)return r;const h=phe(s,this.renderer);n.fields=[...s,...o],n.renderer=h;const m=this._withClusterVariable(h,l,c);return n.effectiveFeatureRenderer=m,n.effectiveClusterRenderer=m,n}};return u([p(Out)],i.prototype,"featureReduction",null),i=u([U("esri.layers.mixins.FeatureReductionLayer")],i),i},fhe={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},mhe={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},yhe={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Fut={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":fhe,"web-map/basemap":mhe,"web-map/tables":yhe,"link-chart/operational-layers":{...fhe,LinkChartLayer:!0},"link-chart/basemap":mhe,"link-chart/tables":yhe,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Uut=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,n,s){var o;return((o=s==null?void 0:s.portalItem)==null?void 0:o.type)==="Group Layer"?void 0:r}writeListMode(r,n,s,o){(o&&o.layerContainerType==="ground"||r&&oje(this,s,{},o))&&(n[s]=r)}writeOperationalLayerType(r,n,s){r&&(n[s]=r)}writeTitle(r,n){n.title=r??"Layer"}readVisibilityTimeExtent(r){return r?Yi.fromArray(r):null}writeVisibilityTimeExtent(r,n,s,o){r&&o.layerContainerType!=="tables"&&(r.isEmpty?o!=null&&o.messages&&o.messages.push(new Q("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=r.toArray())}read(r,n){n&&(n.layer=this),Uve(this,r,s=>super.read(r,s),n)}write(r,n){var a,l;if(!this.persistenceEnabled&&!(n!=null&&n.ignorePersistenceEnabled))return null;if(n!=null&&n.origin){const c=`${n.origin}/${n.layerContainerType||"operational-layers"}`,h=Fut[c];let m=!!(h!=null&&h[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&c==="web-scene/operational-layers"&&(m=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&c==="web-map/operational-layers"&&(m=!1),!m)return(a=n.messages)==null||a.push(new Q("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${c}'`,{layer:this})),null}const s=super.write(r,{...n,layer:this}),o=!!n&&!!n.messages&&!!n.messages.filter(c=>c instanceof Q&&c.name==="web-document-write:property-required").length;return fC(s==null?void 0:s.url)?((l=n==null?void 0:n.messages)==null||l.push(new Q("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return u([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),u([Ue("id",["id"])],i.prototype,"readId",null),u([p(mTe)],i.prototype,"listMode",void 0),u([qe("listMode")],i.prototype,"writeListMode",null),u([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Sr,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),u([qe("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),u([p(gW)],i.prototype,"opacity",void 0),u([p({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),u([qe("title"),qe(["web-scene"],"title")],i.prototype,"writeTitle",null),u([p({type:Yi,json:{origins:{"web-scene":{write:{layerContainerTypes:Sr}}}}})],i.prototype,"visibilityTimeExtent",void 0),u([Ue("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),u([qe(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[fi,uC]]}})],i.prototype,"writeVisibilityTimeExtent",null),u([p({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Sr}}})],i.prototype,"visible",void 0),i=u([U("esri.layers.mixins.OperationalLayer")],i),i};var fJ;const qR=new Et({asc:"ascending",desc:"descending"});var uE;let zw=(uE=class extends ye{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new fJ({field:this.field,valueExpression:this.valueExpression,order:this.order})}},fJ=uE,uE);u([p({type:String,json:{write:!0}})],zw.prototype,"field",void 0),u([p({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],zw.prototype,"valueExpression",void 0),u([p({type:qR.apiValues,json:{type:qR.jsonValues,read:qR.read,write:qR.write}})],zw.prototype,"order",void 0),zw=fJ=u([U("esri.layers.support.OrderByInfo")],zw);function jut(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new zw;return n.read(r,i),[n]}function Vut(t,e,i,r){const n=t.find(s=>!!s.field);n&&Wn(i,[n.toJSON()],e)}const But={type:[zw],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:jut},write:{writer:Vut}}},Gut=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([p(But)],i.prototype,"orderBy",void 0),i=u([U("esri.layers.mixins.OrderedLayer")],i),i},Hut=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=xr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,s){if(n.itemId)return new At({id:n.itemId,portal:s==null?void 0:s.portal})}writePortalItem(r,n){r!=null&&r.id&&(n.itemId=r.id)}async loadFromPortal(r,n){var s;if((s=this.portalItem)!=null&&s.id)try{const{load:o}=await $e(()=>import("./layersLoader-Bx6cuUoE.js"),__vite__mapDeps([246,156,155,157]));return sr(n),await o({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},n)}catch(o){throw ds(o)||Ce.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${o}`),o}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(Hh(n),!0)))}async setUserPrivileges(r,n){if(!hi.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:s,fullEdit:o},content:{updateItem:a}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",a)}catch(s){Hh(s)}}async _fetchUserPrivileges(r,n){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(n);const o=!(Tt!=null&&Tt.findCredential(this.url)),a=r===s.id;if(a&&s.portal.user)return this._getUserPrivileges(s,o);let l,c;if(a)l=s.portal.url;else try{l=await GX(this.url,n)}catch(v){Hh(v)}if(!l||!wje(l,s.portal.url))return this._fetchFallbackUserPrivileges(n);try{const v=n!=null?n.signal:null;c=await(Tt==null?void 0:Tt.getCredential(`${l}/sharing`,{prompt:!1,signal:v}))}catch(v){Hh(v)}const h=!0,m=!1,y=!1;if(!c)return{features:{edit:h,fullEdit:m},content:{updateItem:y}};try{if(a?await s.reload():(s=new At({id:r,portal:{url:l}}),await s.load(n)),s.portal.user)return this._getUserPrivileges(s,o)}catch(v){Hh(v)}return{features:{edit:h,fullEdit:m},content:{updateItem:y}}}_getUserPrivileges(r,n){const s=snt(r);return n&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(s){Hh(s)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?Tt==null?void 0:Tt.findCredential(this.url):null;if(!n)return!0;const s=WR.credential===n?WR.user:await this._fetchEditingUser(r);return WR.credential=n,WR.user=s,(s==null?void 0:s.privileges)==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var m,y;const n=(y=(m=this.portalItem)==null?void 0:m.portal)==null?void 0:y.user;if(n)return n;const s=Tt==null?void 0:Tt.findServerInfo(this.url??"");if(!(s!=null&&s.owningSystemUrl))return null;const o=`${s.owningSystemUrl}/sharing/rest`,a=Fe.getDefault();if(a&&a.loaded&&so(a.restUrl)===so(o))return a.user;const l=`${o}/community/self`,c=r!=null?r.signal:null,h=await f4(Ot(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return h.ok?ir.fromJSON(h.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){var a;const s=n==null?void 0:n.portal,o=((a=this.portalItem)==null?void 0:a.id)&&(this.portalItem.portal||Fe.getDefault());return s&&o&&!Xve(o.restUrl,s.restUrl)?(n.messages&&n.messages.push(new Q("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return u([p({type:At})],i.prototype,"portalItem",null),u([Ue("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),u([qe("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),u([p({clonable:!1})],i.prototype,"resourceReferences",void 0),u([p({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),u([p({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),u([p({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=u([U("esri.layers.mixins.PortalLayer")],i),i},WR={credential:null,user:null};let O2=class extends st{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([p()],O2.prototype,"updating",void 0),u([p()],O2.prototype,"status",void 0),O2=u([U("esri.layers.support.PublishingInfo")],O2);const qut=Symbol(),Wut=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const o=new O2;return this._checkPublishingStatus(o),o}_checkPublishingStatus(s){let l=0;const c=async m=>{let y;s.updating=!0;try{y=await this.fetchPublishingStatus()}catch{y="unavailable"}y!=="published"&&y!=="unavailable"||(s.status==="publishing"&&this.refresh(),h.remove()),s.status=y,s.updating=!1,h.removed||(l=setTimeout(c,m,m+125))},h={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch(()=>h.remove()),c(250),this.addHandles(h)}},e=qut,n);return u([p({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([U("esri.layers.mixins.PublishableLayer")],r),r},Dv=new Ze,Uk=new WeakMap;function Jut(t){Yut(t)&&Dv.push(new WeakRef(t))}function Zut(t){const e=Dv.find(i=>i.deref()===t);e&&Dv.remove(e)}function Yut(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function REe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:REe(e,t%e):0}let x8=0,JR=0;function Xut(){const t=Date.now();let e=!1;for(const i of Dv){const r=i.deref();r?r.refreshInterval&&t-(Uk.get(r)??0)+5>=6e4*r.refreshInterval&&(Uk.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=Dv.length-1;i>=0;i--)Dv.at(i).deref()||Dv.removeAt(i)}ove(()=>{const t=Date.now();let e=0;for(const i of Dv){const r=i.deref();r&&(e=REe(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?Uk.get(r)||Uk.set(r,t):Uk.delete(r))}if(e!==JR){if(JR=e,clearInterval(x8),JR===0)return void(x8=0);x8=setInterval(Xut,JR)}},Bp);const ghe=.1,Kut=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=NO(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Jut(this)},()=>{})}destroy(){Zut(this)}castRefreshInterval(r){return r>=ghe?r:r<=0?0:ghe}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){EE(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{Ce.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Sr}}}}})],i.prototype,"refreshInterval",void 0),u([_i("refreshInterval")],i.prototype,"castRefreshInterval",null),u([p({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),u([p({readOnly:!0})],i.prototype,"refreshParameters",null),i=u([U("esri.layers.mixins.RefreshableLayer")],i),i},Qut=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&edt(r,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return u([p({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),u([p({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=u([U("esri.layers.mixins.ScaleRangeLayer")],i),i};function edt(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function vhe(t,e){return Rd.fromJSON({value:t,unit:e})}let Ys=class extends It.ClonableMixin(ye){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Yi.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?vhe(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?vhe(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};u([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ys.prototype,"cumulative",void 0),u([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ys.prototype,"endField",void 0),u([p({type:Yi,json:{write:{enabled:!0,allowNull:!0}}})],Ys.prototype,"fullTimeExtent",void 0),u([Ue("fullTimeExtent",["timeExtent"])],Ys.prototype,"readFullTimeExtent",null),u([qe("fullTimeExtent")],Ys.prototype,"writeFullTimeExtent",null),u([p({type:Boolean,json:{write:!0}})],Ys.prototype,"hasLiveData",void 0),u([p({type:Rd,json:{write:{enabled:!0,allowNull:!0}}})],Ys.prototype,"interval",void 0),u([Ue("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ys.prototype,"readInterval",null),u([qe("interval")],Ys.prototype,"writeInterval",null),u([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ys.prototype,"startField",void 0),u([p(Yz("timeReference",!0))],Ys.prototype,"timeZone",void 0),u([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ys.prototype,"trackIdField",void 0),u([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ys.prototype,"useTime",void 0),u([p({type:[Date],json:{read:!1}})],Ys.prototype,"stops",void 0),Ys=u([U("esri.layers.support.TimeInfo")],Ys);const tdt={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Sr}}},idt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const s=n.timeInfo.exportOptions;if(!s)return null;const o=s.timeOffset,a=IK.fromJSON(s.timeOffsetUnits);return o&&a?new Rd({value:o,unit:a}):null}set timeInfo(r){$1e(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([p({type:Yi,json:{write:!1}})],i.prototype,"timeExtent",void 0),u([p({type:Rd})],i.prototype,"timeOffset",void 0),u([Ue("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),u([p({value:null,type:Ys,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),u([p(tdt)],i.prototype,"useViewTime",void 0),i=u([U("esri.layers.mixins.TemporalLayer")],i),i};let cu=class extends It.ClonableMixin(ye){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([p({type:[Nr],json:{write:!0}})],cu.prototype,"labelingInfo",void 0),u([p(W4)],cu.prototype,"labelsVisible",void 0),u([p({types:hP,json:{write:!0}})],cu.prototype,"renderer",void 0),u([p({type:Boolean,json:{write:!0}})],cu.prototype,"visible",void 0),cu=u([U("esri.layers.support.TrackPartInfo")],cu);let sl=class extends It.ClonableMixin(ye){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new cu({renderer:new za({symbol:NF.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new cu({renderer:new za({symbol:NF.clone()})}),this.trackLines=new cu({renderer:new za({symbol:X4.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Wn(r,n,i)}};u([p({type:Boolean,json:{write:!0}})],sl.prototype,"enabled",void 0),u([p({type:[ta],json:{write:!0}})],sl.prototype,"fields",void 0),u([qe("fields")],sl.prototype,"writeFields",null),u([p({type:cu,json:{write:!0}})],sl.prototype,"latestObservations",void 0),u([p({type:Rd,json:{write:!0}})],sl.prototype,"maxDisplayDuration",void 0),u([p({type:Number,json:{write:!0}})],sl.prototype,"maxDisplayObservationsPerTrack",void 0),u([p(q4)],sl.prototype,"popupEnabled",void 0),u([p({type:Bd,json:{name:"popupInfo",write:!0}})],sl.prototype,"popupTemplate",void 0),u([p({type:cu,json:{write:!0}})],sl.prototype,"previousObservations",void 0),u([p({type:cu,json:{write:!0}})],sl.prototype,"trackLines",void 0),u([p({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],sl.prototype,"timeField",void 0),sl=u([U("esri.layers.support.TrackInfo")],sl);const rdt=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return u([p({type:sl})],i.prototype,"trackInfo",void 0),i=u([U("esri.layers.mixins.TrackableLayer")],i),i},bhe=new Et({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Dh=class extends It.ClonableMixin(ye){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([p({json:{write:!0}})],Dh.prototype,"name",void 0),u([p({json:{write:!0}})],Dh.prototype,"description",void 0),u([p({json:{read:bhe.read,write:bhe.write}})],Dh.prototype,"drawingTool",void 0),u([p({json:{write:!0}})],Dh.prototype,"prototype",void 0),u([p({json:{write:!0}})],Dh.prototype,"thumbnail",void 0),Dh=u([U("esri.layers.support.FeatureTemplate")],Dh);let Ph=class extends It.ClonableMixin(ye){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=A4(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};u([p({json:{write:!0}})],Ph.prototype,"id",void 0),u([p({json:{write:!0}})],Ph.prototype,"name",void 0),u([p({json:{write:!0}})],Ph.prototype,"domains",void 0),u([Ue("domains")],Ph.prototype,"readDomains",null),u([qe("domains")],Ph.prototype,"writeDomains",null),u([p({type:[Dh],json:{write:!0}})],Ph.prototype,"templates",void 0),Ph=u([U("esri.layers.support.FeatureType")],Ph);function ndt(){return{fields:{type:[Ls],value:null,set:function(t){if(t&&ve("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");Ce.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return WA.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||Ce.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return T4(this.fieldsIndex,t)}}}}const S8=()=>Ce.getLogger("esri.layers.support.labelingInfo"),sdt=/\[([^[\]]+)\]/gi;function whe(t,e,i){return t?t.map(r=>{var s;const n=new Nr;if(n.read(r,i),n.labelExpression){const o=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(sdt,(a,l)=>`[${odt(l,o)}]`)}return n}):null}function odt(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const _he=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],adt={esriGeometryPoint:_he,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:_he,esriGeometryEnvelope:null};function MRt(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=adt[e];if(!r.symbol)return S8().warn("No ILabelClass symbol specified."),[];if(!s)return S8().error(new Q("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const o=s[0];n&&S8().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const ldt="relationships/",cdt="expression/";let Ta=class extends st{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||m4(()=>yy()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??$e(()=>import("./featureUtils-Dfz6_vDg.js"),[]).then(e=>this._featureUtils=e)}get calculatedExpressions(){var i;const e=new Ze;if(!this.expressionsUsedInTitle.length)return e;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])e.push({name:r.name,invalid:!0});return e}for(const r of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:r.name,invalid:!0});break}e.push({name:r.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:r.name,invalid:!0});break}return e}get expressionsUsedInTitle(){var i,r,n;let e=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof e!="string"?[]:(e=e.toLowerCase(),((n=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:n.filter(s=>e.includes(`{expression/${s.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){var r,n;const e=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const a of o){const l=a.split("."),c=this.fieldsIndex.get(l.at(-1)??"");c&&e.add(c.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const s of i){const o=this.fieldsIndex.get(s);o&&e.add(o.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){var i,r;let e="";return this.displayField&&(e=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),e||(e=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){var o;const n=new Map,s=(r==null?void 0:r.timeZone)??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,(o=this._arcadeTask)==null?void 0:o.promise]);r!=null&&r.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:l,workingTitle:c}=this,h=c&&l;i.forEach(m=>{const y=m.getObjectId()??m.attributes[e.objectIdField],v=h?a({attributes:m.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,m,s).global,layer:e,text:c}):"";n.set(y,v)})}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map(n=>n.getObjectId()??n.attributes[e.objectIdField]).filter(Mr);if(r.length!==i.length)return i;if(i.some(n=>!YJe(n,this.requiredFields))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if((s==null?void 0:s.features.length)===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=(n==null?void 0:n.name)??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){var a,l;const n=((a=this.effectivePopupTemplate)==null?void 0:a.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((l=this._arcadeTask)!=null&&l.value)){const c=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const h of this.calculatedExpressions)try{s[`expression/${h.name}`]=h.func({vars:{$feature:c}})}catch{}}const o={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return KX(e).filter(i=>!(i.indexOf(ldt)===0||i.indexOf(cdt)===0))}};u([p({readOnly:!0})],Ta.prototype,"_arcadeTask",null),u([p()],Ta.prototype,"_featureUtils",void 0),u([p({readOnly:!0})],Ta.prototype,"featureUtilsPromise",null),u([p({readOnly:!0})],Ta.prototype,"calculatedExpressions",null),u([p()],Ta.prototype,"displayField",void 0),u([p()],Ta.prototype,"effectivePopupTemplate",void 0),u([p()],Ta.prototype,"expressionsUsedInTitle",null),u([p()],Ta.prototype,"fieldsIndex",void 0),u([p()],Ta.prototype,"fieldInfoMap",null),u([p()],Ta.prototype,"fields",void 0),u([p()],Ta.prototype,"objectIdField",void 0),u([p()],Ta.prototype,"requiredFields",null),Ta=u([U("esri.layers.support.TitleCreator")],Ta);const WS=[];function udt(t,e){if(Pz(t.url??""))return!0;const{wkid:i}=e;for(const r of WS){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}WS.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),WS.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),WS.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),WS.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),WS.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function ddt(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await f4(r.populateFromStyle());if(sr(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new Sc("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}function hdt({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=ydt({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=bdt({titleBase:n,fields:i,displayField:t}),l=vdt();return new Bd({title:a,content:l,fieldInfos:o})}const pdt=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):IJe(t,e);function fdt({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(mdt),t}function mdt(t,e){return t.type==="oid"?-1:e.type==="oid"?1:xhe(t)?-1:xhe(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function ydt(t,e){const i=e==null?void 0:e.visibleFieldNames;return fdt({fields:t.fields??[],ignoreFieldTypes:(e==null?void 0:e.ignoreFieldTypes)||wdt,sortDisabled:e==null?void 0:e.sortDisabled}).map(r=>new QX({fieldName:r.name,isEditable:CJe(r,t),label:r.alias,format:gdt(r),visible:pdt(r,{...t,visibleFieldNames:i})}))}function gdt(t){switch(t.type){case"small-integer":case"integer":case"single":return new dD({digitSeparator:!0,places:0});case"double":return new dD({digitSeparator:!0,places:2});case"string":return KJe(t.name)?new dD({digitSeparator:!0,places:0}):void 0;default:return}}function vdt(){return[new jE,new UE]}function bdt(t){const e=vJe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function xhe(t){var i;return(t.name&&t.name.toLowerCase())==="name"?!0:((i=t.alias)==null?void 0:i.toLowerCase())==="name"}const wdt=["geometry","blob","raster","guid","xml"],mo="FeatureLayer";function ZR(t,e){return new Q("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function She(t){return t&&t instanceof Ze}const $8=ndt();function T8(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let wt=class extends Mlt(zut(dot(Wut(lot(sot(qst(Gut(idt(rdt(Qut(Kut(_st(Uut(Hut(V4(Wst(wst(It.ClonableMixin(un))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=et.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=NO(async(i,r,n)=>{const{save:s,saveAs:o}=await $e(()=>import("./featureLayerUtils-DSZdswsF.js"),__vite__mapDeps([247,242,248,245,156]));switch(i){case Cp.SAVE:return s(this,r);case Cp.SAVE_AS:return o(this,n,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Hh).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new Q("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>Kat(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return xr(e),new Ta({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,WTe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return tlt(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&Wn(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return DTe(i.layerDefinition||i)}readObjectIdField(e,i){return NTe(i.layerDefinition||i)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Nae(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const o=JA(n,i,r)??void 0;return o||Ce.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return BK(i,r)}set source(e){const i=this._get("source");i!==e&&(She(i)&&this._resetMemorySource(i),She(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Ze?new Tm({layer:this,items:e}):e:null}readSource(e,i){const r=Un.fromJSON(i.featureSet);return new Tm({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(o=>Dh.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s,o,a;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?Vje(this.url,r):r;let c=r;if(!c&&this.url){const h=qp(this.url);h!=null&&(c=h.title)}return c?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==c&&(c=l+" - "+c),nX(c)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map(o=>(o=Ph.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await Pat(this,e,i,mo);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await Lat(this,e,i,r,mo);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return Rat(this,e,i)}async uploadAssets(e,i){return Dat(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return hdt(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await Zge($e(()=>import("./FeatureLayerSource-1GLOBK7N.js"),__vite__mapDeps([249,42,49,250,251,252,45,85,44,86,253,254,28,20,255,256,56,54,55,11,16,146,15])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=qat(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=$k(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await Nat(this,e,i,mo);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return zat(this,e,mo)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return UTe(this.types,this.typeIdField,e)}getFieldDomain(e,i){var r;return Jat(this,e,i,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,i){return Fat(this,e,i,mo)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(St.from(e)??r.createQuery(),i);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=r;return n}async queryObjectIds(e,i){return await Uat(this,e,i,mo)}async queryFeatureCount(e,i){return jat(this,e,i,mo)}async queryExtent(e,i){return Vat(this,e,i,mo)}async queryRelatedFeatures(e,i){return Bat(this,e,i,mo)}async queryRelatedFeaturesCount(e,i){return Gat(this,e,i,mo)}async queryTopFeatures(e,i){var a;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((a=n==null?void 0:n.query)!=null&&a.supportsTopFeaturesQuery))throw new Q(mo,"Layer source does not support queryTopFeatures capability");const s=await $e(()=>import("./TopFeaturesQuery-DmepbKAI.js"),[]),o=await r.queryTopFeatures(s.default.from(e),i);if(o!=null&&o.features)for(const l of o.features)l.layer=l.sourceLayer=this;return o}async queryAttributeBins(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins)throw new Q(mo,"Layer source does not support queryAttributeBins capability");slt(e,n,mo);const s=await $e(()=>import("./AttributeBinsQuery-BNJ1eaiH.js"),__vite__mapDeps([203,13,8,22])),o=await r.queryAttributeBins(s.default.from(e),i);if(o.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new Q(mo,"Layer source does not support queryTopObjectIds capability");const s=await $e(()=>import("./TopFeaturesQuery-DmepbKAI.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(c1)}async queryTopFeaturesExtent(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new Q(mo,"Layer source does not support queryTopExtents capability");const s=await $e(()=>import("./TopFeaturesQuery-DmepbKAI.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new Q(mo,"Layer source does not support queryFeatureCount capability");const s=await $e(()=>import("./TopFeaturesQuery-DmepbKAI.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:n,showLegend:s}=r;(n==null?void 0:n.length)===1&&(super.read(n[0],i),s!=null&&super.read({showLegend:s},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(ZR(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s==null||s.push(ZR(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(ZR(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s==null||s.push(ZR(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new Q(mo,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||udt(this,e))}async save(e){return this._debouncedSaveOperations(Cp.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(Cp.SAVE_AS,i,e)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Wn("layerDefinition.capabilities",a,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=a)}}_fetchFirstValidLayerId(e){return Ot(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Nae(this.renderer,this.fieldsIndex),$1e(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),ddt(this,{origin:"service"})}async hasDataChanged(){return Hat(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{var s;const n=(s=r.prototype)==null?void 0:s.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Q("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Q("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([p({clonable:!1,readOnly:!0})],wt.prototype,"_titleCreator",null),u([p(Cot)],wt.prototype,"attributeTableTemplate",void 0),u([Ue("service","capabilities")],wt.prototype,"readCapabilities",null),u([p({json:{origins:{"web-scene":{write:!1}},write:!0}})],wt.prototype,"charts",void 0),u([p({readOnly:!0})],wt.prototype,"createQueryVersion",null),u([p({json:{read:{source:"layerDefinition.copyrightText"}}})],wt.prototype,"copyright",void 0),u([p({json:{read:{source:"layerDefinition.displayField"}}})],wt.prototype,"displayField",void 0),u([p({types:Pv,readOnly:!0})],wt.prototype,"defaultSymbol",void 0),u([p({type:xd})],wt.prototype,"dynamicDataSource",void 0),u([p({type:Boolean})],wt.prototype,"editingEnabled",null),u([Ue(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],wt.prototype,"readEditingEnabled",null),u([Ue("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],wt.prototype,"readEditingEnabledFromWebMap",null),u([qe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],wt.prototype,"writeEditingEnabled",null),u([qe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],wt.prototype,"writeEditingEnabledToWebMap",null),u([p({readOnly:!0})],wt.prototype,"effectiveEditingEnabled",null),u([p({clonable:!1,readOnly:!0})],wt.prototype,"featureTitleFields",null),u([p({...$8.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:T8}}}}})],wt.prototype,"fields",void 0),u([p($8.fieldsIndex)],wt.prototype,"fieldsIndex",void 0),u([p({type:mst,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],wt.prototype,"formTemplate",void 0),u([p({json:{read:{source:"layerDefinition.extent"}}})],wt.prototype,"fullExtent",void 0),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:T8,writer(t,e,i){const r=t?FW.toJSON(t):null;r&&Wn(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:FW.read}}})],wt.prototype,"geometryType",void 0),u([p({json:{read:{source:"layerDefinition.hasM"}}})],wt.prototype,"hasM",void 0),u([p({json:{read:{source:"layerDefinition.hasZ"}}})],wt.prototype,"hasZ",void 0),u([p($ot)],wt.prototype,"id",void 0),u([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],wt.prototype,"infoFor3D",void 0),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],wt.prototype,"isTable",void 0),u([Ue("service","isTable",["type","geometryType"]),Ue("isTable",["layerDefinition.type","layerDefinition.geometryType"])],wt.prototype,"readIsTable",null),u([qe("web-map","isTable")],wt.prototype,"writeIsTable",null),u([p(W4)],wt.prototype,"labelsVisible",void 0),u([p({type:[Nr],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:whe,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:whe,write:{layerContainerTypes:Sr}}})],wt.prototype,"labelingInfo",void 0),u([p((()=>{const t=ce(Sot);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Wn(r,b4(e),i)}}},t})())],wt.prototype,"opacity",void 0),u([p(_ot)],wt.prototype,"legendEnabled",void 0),u([p({type:["show","hide"],json:(()=>{const t=ce(mTe.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],wt.prototype,"listMode",void 0),u([Ue("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],wt.prototype,"readGlobalIdField",null),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:T8}}}}})],wt.prototype,"objectIdField",void 0),u([Ue("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],wt.prototype,"readObjectIdField",null),u([p({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Sr}}})],wt.prototype,"operationalLayerType",void 0),u([p($8.outFields)],wt.prototype,"outFields",void 0),u([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],wt.prototype,"path",void 0),u([p(q4)],wt.prototype,"popupEnabled",void 0),u([p({type:Bd,json:{name:"popupInfo",write:!0}})],wt.prototype,"popupTemplate",void 0),u([p({readOnly:!0})],wt.prototype,"defaultPopupTemplate",null),u([p({types:hP,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Tut,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Sr,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:Sr})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema,layerContainerTypes:Sr})}}})],wt.prototype,"renderer",null),u([Ue("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ue("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],wt.prototype,"readRenderer",null),u([p()],wt.prototype,"resourceInfo",void 0),u([p((()=>{const t=ce(bot);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],wt.prototype,"screenSizePerspectiveEnabled",void 0),u([p({clonable:!1})],wt.prototype,"source",null),u([_i("source")],wt.prototype,"castSource",null),u([Ue("portal-item","source",["featureSet"]),Ue("web-map","source",["featureSet"])],wt.prototype,"readSource",null),u([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],wt.prototype,"spatialReference",void 0),u([p({type:Number})],wt.prototype,"subtypeCode",void 0),u([p({type:[Dh]})],wt.prototype,"templates",void 0),u([Ue("templates",["editFieldsInfo","creatorField","editorField","templates"])],wt.prototype,"readTemplates",null),u([p({type:Ys})],wt.prototype,"timeInfo",void 0),u([p()],wt.prototype,"title",void 0),u([Ue("service","title",["name"]),Ue("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],wt.prototype,"readTitle",null),u([Ue("web-map","title",["layerDefinition.name","title"])],wt.prototype,"readTitleFromWebMap",null),u([p({type:String})],wt.prototype,"sublayerTitleMode",void 0),u([p({json:{read:!1}})],wt.prototype,"type",void 0),u([p({type:String})],wt.prototype,"typeIdField",void 0),u([Ue("service","typeIdField"),Ue("typeIdField",["layerDefinition.typeIdField"])],wt.prototype,"readTypeIdField",null),u([p({type:[Ph]})],wt.prototype,"types",void 0),u([Ue("service","types",["types"]),Ue("types",["layerDefinition.types"])],wt.prototype,"readTypes",null),u([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:Sr}}}}})],wt.prototype,"visible",void 0),u([Ue("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],wt.prototype,"readVisible",null),wt=u([U("esri.layers.FeatureLayer")],wt);const _dt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return wt}},Symbol.toStringTag,{value:"Module"}));let mm=class extends ye{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],mm.prototype,"moment",void 0),u([p({type:Boolean,json:{write:!0}})],mm.prototype,"fullUpdate",void 0),u([p({type:Boolean,json:{write:!0}})],mm.prototype,"validateErrorsCreated",void 0),u([p({type:Boolean,json:{write:!0}})],mm.prototype,"exceededTransferLimit",void 0),u([p({type:[Object],json:{write:!0}})],mm.prototype,"serviceEdits",void 0),u([p({type:[Object],json:{write:!0}})],mm.prototype,"discoveredSubnetworks",void 0),mm=u([U("esri.rest.networks.support.ValidateNetworkTopologyResult")],mm);const xdt=mm,Sdt=Wt()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Wg=class extends xdt{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Ot(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(Gi()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([p()],Wg.prototype,"editsResolver",void 0),u([p({type:String,json:{write:!0}})],Wg.prototype,"statusUrl",void 0),u([at(Sdt)],Wg.prototype,"status",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Wg.prototype,"submissionTime",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Wg.prototype,"lastUpdatedTime",void 0),Wg=u([U("esri.networks.support.TopologyValidationJobInfo")],Wg);const $dt=Wg;var Gn;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(Gn||(Gn={}));const YR=new Et({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),LRt=new Et({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),Tdt={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},RRt=new Et({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});function Edt(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=DEe(t),o=[];switch(t.ruleType){case Gn.RTContainment:case Gn.RTAttachment:i==="from"&&Ed(e,r,!1)?o.push(s):i==="to"&&Ed(e,s,!1)&&o.push(r);break;case Gn.RTJunctionEdgeConnectivity:case Gn.RTJunctionJunctionConnectivity:Ed(e,r,!0)?o.push(s):Ed(e,s,!0)&&o.push(r);break;case Gn.RTEdgeJunctionEdgeConnectivity:n&&(Ed(e,n,!0)?(o.push(r),o.push(s)):(Ed(e,r,!0)||Ed(e,s,!0))&&o.push(n));break;default:return[]}return o}function P2(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=DEe(t);switch(t.ruleType){case Gn.RTContainment:case Gn.RTAttachment:return XR(e,i,r,s,!1,!1);case Gn.RTJunctionEdgeConnectivity:case Gn.RTJunctionJunctionConnectivity:return XR(e,i,r,s,!0,!0);case Gn.RTEdgeJunctionEdgeConnectivity:return XR(e,i,r,n,!0,!0)||XR(e,i,s,n,!0,!0);default:return!1}}function XR(t,e,i,r,n,s){if(!i||!r)return!1;const o=Ed(t,i,s),a=Ed(e,r,s);if(n){const l=Ed(t,r,s),c=Ed(e,i,s);return o&&a||l&&c}return o&&a}function Cdt(t,e){var n;const i=(n=t.terminal)==null?void 0:n.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Ed(t,e,i){var s,o,a,l;const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===((s=e.networkSource)==null?void 0:s.layerId):t.networkSourceId===((o=e.networkSource)==null?void 0:o.sourceId))&&(r==null||r===((a=e.assetGroup)==null?void 0:a.assetGroupCode))&&(n==null||n===((l=e.assetType)==null?void 0:l.assetTypeCode))&&(!i||!("terminalId"in t)||Cdt(e,t))}function DEe(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function qx(t){var n;let e=null,i=null,r=null;if(b1e(t))e=mJ(t),[i,r]=Idt(t);else if(mv(t)){e=((n=t.parent)==null?void 0:n.layerId)??null;const[s]=ZF(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function mJ(t){var r;const{sourceLayer:e}=t;let i;return E_e(e)?i=e.layerId:mv(e)&&(i=(r=e.parent)==null?void 0:r.layerId),i??null}function Idt(t){const[e,i]=ZF(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function ZF(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function $he(t,e){if(t==="Utility Network Layer"){const{default:i}=await $e(()=>Promise.resolve().then(()=>Udt),void 0);return new i({layerUrl:e})}return null}async function Mdt(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof At||(e={...e,portalItem:new At(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new Q("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await Ot(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return $he(n.data.type,r);if(n.data.layers){const a=n.data.layers.find(l=>l.type.includes(s));if(a){const l=`${r}/${a.id}`;return $he(a.type,l)}}return null}let is=class extends V4(_s){static fromPortalItem(e){return Mdt(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,o=r===this.featureServiceUrl,a=Rk(r,n,this.gdbVersion);o&&a&&s.then(l=>{VD(r,n)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,o=r===this.featureServiceUrl,a=Rk(r,n,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([aTe(this._applyEditsHandler),lTe(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{ds(e)||Ce.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return nn(this.layerUrl)}get featureServiceUrl(){return qp(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return qp(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(s.objectId),r.set(o,a)}const n=this.featureServiceUrl;return r.forEach((s,o)=>i.push({layerUrl:`${n}/${o}`,objectIds:s})),i}async queryNamedTraceConfigurations(e,i){var a;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([$e(()=>import("./queryNamedTraceConfigurations-_wvopcW4.js"),[]),$e(()=>import("./QueryNamedTraceConfigurationsParameters-BtEGbZqq.js"),[])]),s=this.networkServiceUrl,o=n.from(e);return(a=await r(s,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(e,i){var h,m,y;if(!e.validateArea)throw new Q("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([$e(()=>import("./validateNetworkTopology-BjzhJTdD.js"),[]),$e(()=>import("./ValidateNetworkTopologyParameters-f_YiLsR2.js"),[])]),s=n.from(e);VD(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=hW,await Rue(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=Due(a,null,this.gdbVersion,!0),c=await r(o,s,{...i});if(c!=null&&c.serviceEdits){const v=[];for(const w of c.serviceEdits){const{editedFeatures:x}=w,S=x!=null&&x.spatialReference?new et(x.spatialReference):null;v.push({layerId:w.layerId,editedFeatures:{adds:((h=x==null?void 0:x.adds)==null?void 0:h.map(C=>KR(C,S)))||[],updates:((m=x==null?void 0:x.updates)==null?void 0:m.map(C=>({original:KR(C[0],S),current:KR(C[1],S)})))||[],deletes:((y=x==null?void 0:x.deletes)==null?void 0:y.map(C=>KR(C,S)))||[],spatialReference:S}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:v,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new Q("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const h=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await Ot(h,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([$e(()=>import("./validateNetworkTopology-BjzhJTdD.js"),[]),$e(()=>import("./ValidateNetworkTopologyParameters-f_YiLsR2.js"),[])]),o=s.from(e);VD(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=hW,await Rue(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?Due(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await n(a,o,{...i});return new $dt({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const o of e)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const l of a)if(l[r]===s)return i.set(s,l[n]),l[n];return-1}async _fetchLayerMetaData(e,i){const r=await Ot(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await Ot(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]});n&&this.read(n,{origin:"service"})}};function KR(t,e){return new _r({attributes:t.attributes,geometry:Ao({...t.geometry,spatialReference:e})})}u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],is.prototype,"id",void 0),u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],is.prototype,"title",void 0),u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],is.prototype,"layerUrl",void 0),u([p({type:Object,json:{origins:{service:{read:!0}},read:!1}})],is.prototype,"dataElement",void 0),u([p({type:jt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],is.prototype,"fullExtent",void 0),u([p({type:et,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],is.prototype,"spatialReference",void 0),u([p({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],is.prototype,"type",void 0),u([p({readOnly:!0})],is.prototype,"datasetName",null),u([p({readOnly:!0})],is.prototype,"owner",null),u([p({readOnly:!0})],is.prototype,"schemaGeneration",null),u([p({readOnly:!0})],is.prototype,"parsedUrl",null),u([p({readOnly:!0})],is.prototype,"featureServiceUrl",null),u([p({readOnly:!0})],is.prototype,"networkServiceUrl",null),u([p({readOnly:!0})],is.prototype,"layerId",null),u([p()],is.prototype,"sourceJSON",void 0),u([p({readOnly:!0})],is.prototype,"networkSystemLayers",null),u([p()],is.prototype,"gdbVersion",void 0),u([p({type:Date})],is.prototype,"historicMoment",void 0),is=u([U("esri.networks.Network")],is);const kdt=is;let Jg=class extends ye.JSONSupportMixin(_s){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Ot}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,o]=ZF(e.sourceLayer);if(!s||!o)return"";const a=qx(e),l=qx(i);r.forEach(h=>{const{type:m,direction:y}=h;this._getRulesForAssociationType(m).forEach(v=>{Edt(v,a,y).filter(w=>{var x;return((x=w.networkSource)==null?void 0:x.layerId)===l.layerId}).forEach(w=>{var C,k;const x=(C=w.assetGroup)==null?void 0:C.assetGroupCode,S=(k=w.assetType)==null?void 0:k.assetTypeCode;if(x!=null&&S!=null){const A=n.get(x)??new Set;A.add(S),n.set(x,A)}})})});let c=[];return this._mergeAssetCodes(n).forEach((h,m)=>{const y=`${s} IN (${m})`,v=XWe(o,[...h]);y&&v&&c.push($k(y,v))}),c.length>1&&(c=c.map(h=>`(${h})`)),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return mJ(e)==null?[]:i.filter(n=>this.canAssociateFeatures(e,n,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=qx(e),s=qx(i);return r.some(o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some(c=>l==="to"?P2(c,s,n):P2(c,n,s))})}getLayersCanAssociateWith(e,i,r){return mJ(e)==null?[]:i.filter(n=>this.canAssociateFeatureToLayer(e,n,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=qx(e),s=qx(i);return r.some(o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some(c=>l==="to"?P2(c,s,n):P2(c,n,s))})}getFeatureSQL(e,i){var c,h;const r=e.layerId.toString(),n=(c=e.fieldsIndex)==null?void 0:c.normalizeFieldName("assetGroup"),s=(h=e.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,a=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const m=l.assetGroupHash[o];if(m)return m.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var n,s,o,a,l,c,h,m,y,v,w;const e={};let i;(function(x){x[x.from=0]="from",x[x.to=1]="to",x[x.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const x of this.rules){if(x.ruleType===Gn.RTAttachment){this.rulesCategorized.attachment.push(x);continue}if(x.ruleType===Gn.RTContainment){this.rulesCategorized.containment.push(x);continue}if(x.ruleType===Gn.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(x);continue}this.rulesCategorized.connectivity.push(x);let S=[[i.from,i.to],[i.to,i.from]];x.ruleType===Gn.RTEdgeJunctionEdgeConnectivity&&(S=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const C of S){const k=C.shift(),A=C.shift();let R=!1;switch(x.ruleType){case Gn.RTEdgeJunctionEdgeConnectivity:R=k===i.from||k===i.to;break;case Gn.RTJunctionEdgeConnectivity:R=k===i.to}const D=r[k],B=((n=x[D.networkSourceId])==null?void 0:n.layerId.toString())??"",z=(o=(s=x[D.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),W=x[D.assetTypeId],Y=(a=W==null?void 0:W.assetTypeCode)==null?void 0:a.toString(),ee=r[A],ge=((l=x[ee.networkSourceId])==null?void 0:l.layerId.toString())??"",fe=(h=(c=x[ee.assetGroupId])==null?void 0:c.assetGroupCode)==null?void 0:h.toString(),ue=x[ee.assetTypeId],ae=(m=ue==null?void 0:ue.assetTypeCode)==null?void 0:m.toString(),Se=e[B]??{assetGroupHash:{}};if(!(z&&Y&&fe&&ae))continue;const le=Se.assetGroupHash[z]??{assetTypeHash:{}},be=le.assetTypeHash[Y]??{};if(be[ge]=be[ge]??{},R){be[B]=be[B]??{};const Be=$k(`assetgroup = ${z}`,`assettype = ${Y}`);(ue==null?void 0:ue.connectivityPolicy)==="esriNECPEndVertex"?be[B].endVertex=(y=be[B])!=null&&y.endVertex?`${be[B].endVertex}`:`(${Be})`:be[B].anyVertex=be[B].anyVertex?`${be[B].anyVertex}`:`(${Be})`}const Oe=$k(`assetgroup = ${fe}`,`assettype = ${ae}`);(ue==null?void 0:ue.connectivityPolicy)==="esriNECPEndVertex"?be[ge].endVertex=(v=be[ge])!=null&&v.endVertex?z9(be[ge].endVertex,Oe):`(${Oe})`:be[ge].anyVertex=(w=be[ge])!=null&&w.anyVertex?z9(be[ge].anyVertex,Oe):`(${Oe})`,le.assetTypeHash[Y]=be,Se.assetGroupHash[z]=le,e[B]=Se}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===Gn.RTJunctionJunctionConnectivity);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===Gn.RTJunctionEdgeConnectivity||r.ruleType===Gn.RTEdgeJunctionEdgeConnectivity);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const o=new Set([n]);for(const[l,c]of e)n!==l&&!r.has(l)&&this._areSetsEqual(s,c)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(",");i.set(a,s)}return i}_canSupportAssociations(e){return e.every(i=>{const r=b1e(i)?i.sourceLayer:i,[n,s]=ZF(r);return n!=null&&s!=null})}};u([p({constructOnly:!0})],Jg.prototype,"rulesLayer",void 0),u([p({constructOnly:!0})],Jg.prototype,"rules",void 0),u([p({readOnly:!0})],Jg.prototype,"rulesHash",void 0),u([p()],Jg.prototype,"rulesCategorized",void 0),u([p({constructOnly:!0})],Jg.prototype,"request",void 0),Jg=u([U("esri.networks.RulesTable")],Jg);let Wc=class extends ye{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};u([p({type:[Object],json:{write:!0}})],Wc.prototype,"conditionBarriers",void 0),u([p({type:[Object],json:{write:!0}})],Wc.prototype,"outputConditions",void 0),u([p({type:[Object],json:{write:!0}})],Wc.prototype,"functions",void 0),u([p({type:[Object],json:{write:!0}})],Wc.prototype,"functionBarriers",void 0),u([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Wc.prototype,"traversabilityScope",void 0),u([p({type:String,json:{write:!0}})],Wc.prototype,"shortestPathNetworkAttributeName",void 0),u([p({type:Boolean,json:{write:!0}})],Wc.prototype,"includeBarriers",void 0),u([p({type:Boolean,json:{write:!0}})],Wc.prototype,"validateConsistency",void 0),u([p({type:Boolean,json:{write:!0}})],Wc.prototype,"ignoreBarriersAtStartingPoints",void 0),Wc=u([U("esri.networks.support.TraceConfiguration")],Wc);const QK=Wc;let vr=class extends QK{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};u([p({type:[Object],json:{write:!0}})],vr.prototype,"filterBarriers",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"arcadeExpressionBarrier",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"circuitName",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"domainNetworkName",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"filterBitsetNetworkAttributeName",void 0),u([p({type:[Object],json:{write:!0}})],vr.prototype,"filterFunctionBarriers",void 0),u([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],vr.prototype,"filterScope",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"includeContainers",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"includeContent",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"includeIsolated",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"includeStructures",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"allowIndeterminateFlow",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"includeUpToFirstSpatialContainer",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"inferConnectivity",void 0),u([p({type:Number,json:{write:!0}})],vr.prototype,"maxHops",void 0),u([p({type:Object,json:{write:!0}})],vr.prototype,"nearestNeighbor",void 0),u([p({type:Number,json:{write:!0}})],vr.prototype,"numPaths",void 0),u([p({type:[Object],json:{write:!0}})],vr.prototype,"outputFilterCategories",void 0),u([p({type:[Object],json:{write:!0}})],vr.prototype,"outputFilters",void 0),u([p({type:[Object],json:{write:!0}})],vr.prototype,"propagators",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"subnetworkName",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"targetTierName",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"diagramTemplateName",void 0),u([p({type:String,json:{write:!0}})],vr.prototype,"tierName",void 0),u([p({type:Boolean,json:{write:!0}})],vr.prototype,"validateLocatability",void 0),vr=u([U("esri.networks.support.UNTraceConfiguration")],vr);const Adt=vr;let ol=class extends Oq{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?Adt.fromJSON(e):QK.fromJSON(e)}};u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],ol.prototype,"globalId",void 0),u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],ol.prototype,"title",void 0),u([p({type:QK,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ol.prototype,"traceConfiguration",void 0),u([Ue("service","traceConfiguration")],ol.prototype,"readTraceConfiguration",null),u([p({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ol.prototype,"creationDate",void 0),u([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ol.prototype,"creator",void 0),u([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],ol.prototype,"description",void 0),u([p({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],ol.prototype,"minStartingPoints",void 0),u([p({json:{origins:{service:{read:!0,write:!0}},read:!1}})],ol.prototype,"resultTypes",void 0),u([p({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],ol.prototype,"tags",void 0),u([p({type:YR.apiValues,json:{type:YR.jsonValues,origins:{service:{read:YR.read,write:YR.write}},read:!1}})],ol.prototype,"traceType",void 0),ol=u([U("esri.networks.support.NamedTraceConfiguration")],ol);const Odt=ol;function Pdt(t){var v,w,x,S,C,k,A,R,D,B,z;const e=t==null?void 0:t.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="tonetworksourceid",o="toglobalid",a="toterminalid",l="status",c="associationtype",h="iscontentvisible",m="percentalong",y="globalid";return{fromNetworkSourceId:((v=e==null?void 0:e.get(i))==null?void 0:v.name)??i,fromGlobalId:((w=e==null?void 0:e.get(r))==null?void 0:w.name)??r,fromTerminalId:((x=e==null?void 0:e.get(n))==null?void 0:x.name)??n,toNetworkSourceId:((S=e==null?void 0:e.get(s))==null?void 0:S.name)??s,toGlobalId:((C=e==null?void 0:e.get(o))==null?void 0:C.name)??o,toTerminalId:((k=e==null?void 0:e.get(a))==null?void 0:k.name)??a,status:((A=e==null?void 0:e.get(l))==null?void 0:A.name)??l,associationType:((R=e==null?void 0:e.get(c))==null?void 0:R.name)??c,isContentVisible:((D=e==null?void 0:e.get(h))==null?void 0:D.name)??h,percentAlong:((B=e==null?void 0:e.get(m))==null?void 0:B.name)??m,globalId:((z=e==null?void 0:e.get((t==null?void 0:t.globalIdField)??y))==null?void 0:z.name)??y}}function jRt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter(o=>o!=null)}return[]}let Jc=class extends st{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var e;(e=this.associationsTable)==null||e.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:e}=this;if(!e)throw new Q("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new wt({url:e})}return await this.associationsTable.load(),this.associationsTable}};u([p({constructOnly:!0})],Jc.prototype,"rulesTableId",void 0),u([p({constructOnly:!0})],Jc.prototype,"rulesTableUrl",void 0),u([p({constructOnly:!0})],Jc.prototype,"subnetworksTableId",void 0),u([p({constructOnly:!0})],Jc.prototype,"subnetworksTableUrl",void 0),u([p({constructOnly:!0})],Jc.prototype,"dirtyAreasLayerId",void 0),u([p({constructOnly:!0})],Jc.prototype,"dirtyAreasLayerUrl",void 0),u([p()],Jc.prototype,"associationsTable",void 0),u([p({constructOnly:!0})],Jc.prototype,"associationsTableId",void 0),u([p({constructOnly:!0})],Jc.prototype,"associationsTableUrl",void 0),Jc=u([U("esri.networks.support.NetworkSystemLayers")],Jc);let JS=class extends ye{constructor(e){super(e),this.id=null,this.name=null}};u([p({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],JS.prototype,"id",void 0),u([p({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],JS.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0}})],JS.prototype,"isUpstreamTerminal",void 0),JS=u([U("esri.networks.support.Terminal")],JS);const Ldt=JS,QR=new Et({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let km=class extends ye{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};u([p({type:String,json:{write:!0}})],km.prototype,"defaultConfiguration",void 0),u([p({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],km.prototype,"id",void 0),u([p({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],km.prototype,"name",void 0),u([p({type:[Ldt],json:{write:!0}})],km.prototype,"terminals",void 0),u([p({type:QR.apiValues,json:{type:QR.jsonValues,read:QR.read,write:QR.write}})],km.prototype,"traversabilityModel",void 0),km=u([U("esri.networks.support.TerminalConfiguration")],km);let ZS=class extends ye{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};u([p({type:Ur,json:{write:!0},readOnly:!0})],ZS.prototype,"line",void 0),u([p({type:ou,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],ZS.prototype,"multipoint",void 0),u([p({type:rr,json:{write:!0},readOnly:!0})],ZS.prototype,"polygon",void 0),ZS=u([U("esri.rest.networks.support.AggregatedGeometry")],ZS);const Rdt=ZS;let ll=class extends ye{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};u([p({json:{write:!1}})],ll.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"assetGroupCode",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"assetTypeCode",void 0),u([p({type:String,json:{write:!0}})],ll.prototype,"globalId",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"networkSourceId",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"objectId",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"positionFrom",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"positionTo",void 0),u([p({type:Number,json:{write:!0}})],ll.prototype,"terminalId",void 0),ll=u([U("esri.rest.networks.support.NetworkElement")],ll);let Yh=class extends ll{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};u([p({json:{write:!1}})],Yh.prototype,"type",void 0),u([p({json:{write:!0}})],Yh.prototype,"firstUnit",void 0),u([p({json:{write:!0}})],Yh.prototype,"numUnits",void 0),Yh=u([U("esri.rest.networks.support.TelecomNetworkElement")],Yh);let ym=class extends ye{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new Yh({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new Yh({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};u([p({type:Yh,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],ym.prototype,"edgeElement",void 0),u([Ue("edgeElement")],ym.prototype,"readEdgeElement",null),u([qe("edgeElement")],ym.prototype,"writeEdgeElement",null),u([p({type:Yh,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],ym.prototype,"junctionElement",void 0),u([Ue("junctionElement")],ym.prototype,"readJunctionElement",null),u([qe("junctionElement")],ym.prototype,"writeJunctionElement",null),ym=u([U("esri.rest.networks.support.CircuitPathConnectivityElement")],ym);const Ddt=ym,e3=new Et({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"});let Th=class extends ye{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null}};u([p({type:String,json:{write:!0}})],Th.prototype,"globalId",void 0),u([p({type:Boolean,json:{write:!0}})],Th.prototype,"isFilterBarrier",void 0),u([p({type:Number,json:{write:!0}})],Th.prototype,"percentAlong",void 0),u([p({type:Number,json:{write:!0}})],Th.prototype,"terminalId",void 0),u([p({type:e3.apiValues,json:{type:e3.jsonValues,read:{reader:e3.read,source:"traceLocationType"},write:{writer:e3.write,target:"traceLocationType"}}})],Th.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],Th.prototype,"firstUnit",void 0),u([p({type:Number,json:{write:!0}})],Th.prototype,"numUnits",void 0),Th=u([U("esri.rest.networks.support.TraceLocation")],Th);const The=Th;let gm=class extends ye{constructor(e){super(e),this.pathId=null,this.orderId=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};u([p({type:Number,json:{write:!0}})],gm.prototype,"pathId",void 0),u([p({type:Number,json:{write:!0}})],gm.prototype,"orderId",void 0),u([p({type:The,json:{write:!0}})],gm.prototype,"startingPoint",void 0),u([p({type:The,json:{write:!0}})],gm.prototype,"stoppingPoint",void 0),u([p({type:[Ddt],json:{write:!0}})],gm.prototype,"pathConnectivity",void 0),u([p({type:Ur,json:{write:!0}})],gm.prototype,"geometry",void 0),gm=u([U("esri.rest.networks.support.CircuitPath")],gm);const eQ=gm;let dw=class extends ye{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){var n;const r=(n=i.sections)==null?void 0:n.map(s=>({...s,path:eQ.fromJSON(s.path)}));return{name:i.name,globalId:i.globalId,isSectioned:i.isSectioned,sectionOrder:i.sectionOrder,startLocation:i.startLocation,stopLocation:i.stopLocation,sections:r,subcircuits:i.subcircuits,lastVerifiedTime:i.lastVerifiedTime?new Date(i.lastVerifiedTime):null,lastExportedTime:i.lastExportedTime?new Date(i.lastExportedTime):null,circuitType:i.circuitType,status:i.status}}};u([p({type:Object,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],dw.prototype,"circuit",void 0),u([Ue("circuit")],dw.prototype,"readCircuit",null),u([p({type:Ur,json:{write:!0}})],dw.prototype,"geometry",void 0),u([p({type:eQ,json:{write:!0}})],dw.prototype,"path",void 0),dw=u([U("esri.rest.networks.support.CircuitTraceResult")],dw);const Ndt=dw;let YS=class extends ye{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};u([p({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],YS.prototype,"functionType",void 0),u([p({type:String,json:{write:!0},readOnly:!0})],YS.prototype,"networkAttributeName",void 0),u([p({type:Number,json:{write:!0},readOnly:!0})],YS.prototype,"result",void 0),YS=u([U("esri.rest.networks.support.FunctionResult")],YS);const zdt=YS;let ec=class extends ye{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new Yh({...r}):new ll({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};u([p({type:Rdt,json:{write:!0},readOnly:!0})],ec.prototype,"aggregatedGeometry",void 0),u([p({type:[Ndt],json:{write:!0},readOnly:!0})],ec.prototype,"circuits",void 0),u([p({type:[ll],json:{write:!0},readOnly:!0})],ec.prototype,"elements",void 0),u([Ue("elements")],ec.prototype,"readNetworkElements",null),u([qe("elements")],ec.prototype,"writeNetworkElements",null),u([p({type:[zdt],json:{write:!0},readOnly:!0})],ec.prototype,"globalFunctionResults",void 0),u([p({type:Boolean,json:{write:!0},readOnly:!0})],ec.prototype,"kFeaturesForKNNFound",void 0),u([p({type:[eQ],json:{write:!0},readOnly:!0})],ec.prototype,"paths",void 0),u([p({type:Boolean,json:{write:!0},readOnly:!0})],ec.prototype,"startingPointsIgnored",void 0),u([p({type:[String],json:{write:!0},readOnly:!0})],ec.prototype,"warnings",void 0),ec=u([U("esri.rest.networks.support.TraceResult")],ec);const Fdt=Wt()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let hw=class extends ec{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Ot(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(Gi()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([p({type:String,json:{write:!0}})],hw.prototype,"statusUrl",void 0),u([at(Fdt)],hw.prototype,"status",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],hw.prototype,"submissionTime",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],hw.prototype,"lastUpdatedTime",void 0),hw=u([U("esri.networks.support.TraceJobInfo")],hw);let ld=class extends kdt{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}get _rulesLayer(){const{gdbVersion:e,historicMoment:i}=this,r=this.networkSystemLayers.rulesTableUrl;return new wt({url:r,gdbVersion:e,historicMoment:i})}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{var s,o;(s=n==null?void 0:n.edgeSources)==null||s.map(({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)}),(o=n==null?void 0:n.junctionSources)==null||o.map(({layerId:a,sourceId:l})=>{this._layerIdBySourceId.set(l,a),this._sourceIdByLayerId.set(a,l),e.add(a)})}),e}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,o,a,l;return new Jc({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(a=this.sourceJSON)==null?void 0:a.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(i=>km.fromJSON(i)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(i=>i.domainNetworkName))||[]}get hasTelecomNetwork(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.some(i=>i.isTelecomNetwork))??!1}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var c,h,m,y;let i=null,r=null;const n=e.sourceLayer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((c=n==null?void 0:n.parent)==null?void 0:c.layerId)??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const v of Object.keys(o))v.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(v)),v.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(v));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const v of l){const w=(h=v.junctionSources)==null?void 0:h.find(x=>x.layerId===s);if(w){const x=(m=w.assetGroups)==null?void 0:m.find(S=>S.assetGroupCode===i);if(x){const S=(y=x.assetTypes)==null?void 0:y.find(C=>C.assetTypeCode===r);if(S!=null&&S.isTerminalConfigurationSupported){a=S.terminalConfigurationId;break}}}}if(a!=null){const v=this.dataElement.terminalConfigurations,w=v==null?void 0:v.find(x=>x.terminalConfigurationId===a);return w?km.fromJSON(w):null}return null}getTierNames(e){var r,n;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(s=>s.domainNetworkName===e);return((n=i==null?void 0:i.tiers)==null?void 0:n.map(s=>s.name))||[]}async getRulesTable(){var s;const e=this._rulesLayer;e.loaded||await e.load();const i=(s=this.dataElement)==null?void 0:s.domainNetworks;if(!i)return null;const r=i.flatMap(o=>[...o.edgeSources||[],...o.junctionSources||[]]),n=(await this._queryRulesTable(e)).map(o=>this._hydrateRuleInfo(e,r,o));return new Jg({rulesLayer:e,rules:n})}async getCircuitManager(e){var n;if(!this.hasTelecomNetwork)return null;const i=(n=this.dataElement)==null?void 0:n.domainNetworks.find(s=>s.domainNetworkName===e&&s.isTelecomNetwork);if(!i)return null;const{default:r}=await $e(()=>import("./CircuitManager-BxtacIcZ.js"),[]);return x1(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await $e(()=>import("./UnitIdentifierManager-DL-jzUeZ.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(e))}isUtilityLayer(e){var i,r;return"layerId"in e?this._utilityLayerList.has(e==null?void 0:e.layerId)&&(((i=e.url)==null?void 0:i.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([$e(()=>import("./queryAssociations-D8xZK8Yz.js"),__vite__mapDeps([257,258])),$e(()=>import("./QueryAssociationsParameters-D9nnC7oY.js"),[])]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([$e(()=>import("./synthesizeAssociationGeometries-BHxhi6ne.js"),__vite__mapDeps([259,258])),$e(()=>import("./SynthesizeAssociationGeometriesParameters-54cBC043.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([$e(()=>import("./trace-BJi60o5Z.js"),[]),$e(()=>import("./TraceParameters-qGMTkfbN.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([$e(()=>import("./trace-BJi60o5Z.js"),[]),$e(()=>import("./TraceParameters-qGMTkfbN.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new hw({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some(o=>P2(o,r,n))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,toNetworkSourceId:o,toGlobalId:a,toTerminalId:l,associationType:c,isContentVisible:h,percentAlong:m,globalId:y}=Pdt(i);return{addFeatures:e.map(v=>{var w,x,S,C,k,A;return new _r({attributes:{[r]:(w=v.fromNetworkElement)==null?void 0:w.networkSourceId,[n]:(x=v.fromNetworkElement)==null?void 0:x.globalId,[s]:(S=v.fromNetworkElement)==null?void 0:S.terminalId,[o]:(C=v.toNetworkElement)==null?void 0:C.networkSourceId,[a]:(k=v.toNetworkElement)==null?void 0:k.globalId,[l]:(A=v.toNetworkElement)==null?void 0:A.terminalId,[c]:Tdt[v.associationType],[h]:v.isContentVisible==null?void 0:v.isContentVisible?1:0,[m]:v.percentAlong,[y]:v.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map(n=>({globalId:n.globalId})),id:r,identifierFields:{globalIdField:(i==null?void 0:i.globalIdField)??"globalid",objectIdField:(i==null?void 0:i.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),c=n.get("FROMASSETTYPE"),h=n.get("FROMTERMINALID"),m=n.get("TONETWORKSOURCEID"),y=n.get("TOASSETGROUP"),v=n.get("TOASSETTYPE"),w=n.get("TOTERMINALID"),x=n.get("VIANETWORKSOURCEID"),S=n.get("VIAASSETGROUP"),C=n.get("VIAASSETTYPE"),k=n.get("VIATERMINALID"),A=r.attributes[s.name],R=new Date(r.attributes[o.name]),D=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[h.name]},{networkSourceId:r.attributes[m.name],assetGroupId:r.attributes[y.name],assetTypeId:r.attributes[v.name],terminalId:r.attributes[w.name]},{networkSourceId:r.attributes[x.name],assetGroupId:r.attributes[S.name],assetTypeId:r.attributes[C.name],terminalId:r.attributes[k.name]}];let B;(function(W){W[W.from=0]="from",W[W.to=1]="to",W[W.via=2]="via"})(B||(B={}));const z={ruleType:A,creationDate:R};for(const W of[B.from,B.to,B.via]){if(A!==Gn.RTEdgeJunctionEdgeConnectivity&&W===B.via)continue;const Y=D[W],ee=i.find(Se=>Se.sourceId===Y.networkSourceId),ge=ee==null?void 0:ee.assetGroups.find(Se=>Se.assetGroupCode===Y.assetGroupId),fe=ge==null?void 0:ge.assetTypes.find(Se=>Se.assetTypeCode===Y.assetTypeId),ue=this._getTerminal(fe,Y);let ae="";switch(W){case B.from:ae="from";break;case B.to:ae="to";break;case B.via:ae="via"}z[`${ae}NetworkSource`]=ee,z[`${ae}AssetGroup`]=ge,z[`${ae}AssetType`]=fe,z[`${ae}Terminal`]=ue==null?void 0:ue.toJSON()}return z}_getTerminal(e,i){var s,o;const r=e==null?void 0:e.terminalConfigurationId,n=(s=this.terminalConfigurations)==null?void 0:s.find(a=>a.id===r);return((o=n==null?void 0:n.terminals)==null?void 0:o.find(a=>a.id===i.terminalId))??null}async _queryRulesTable(e){const{gdbVersion:i,historicMoment:r}=this,n=new St({where:"1=1",outFields:["*"],gdbVersion:i,historicMoment:r});return(await yTe(e,n)).features}};u([p({readOnly:!0})],ld.prototype,"_rulesLayer",null),u([p({type:[Odt],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],ld.prototype,"sharedNamedTraceConfigurations",void 0),u([p({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],ld.prototype,"type",void 0),u([p({readOnly:!0})],ld.prototype,"serviceTerritoryFeatureLayerId",null),u([p({readOnly:!0})],ld.prototype,"networkSystemLayers",null),u([p({readOnly:!0})],ld.prototype,"terminalConfigurations",null),u([p({readOnly:!0})],ld.prototype,"domainNetworkNames",null),u([p({readOnly:!0})],ld.prototype,"hasTelecomNetwork",null),ld=u([U("esri.networks.UtilityNetwork")],ld);const NEe=ld,Udt=Object.freeze(Object.defineProperty({__proto__:null,default:NEe},Symbol.toStringTag,{value:"Module"}));let XS=class extends It.ClonableMixin(ye){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};u([p({type:String,json:{write:{isRequired:!0}}})],XS.prototype,"expression",void 0),u([p({type:["number","string"],json:{write:!0}})],XS.prototype,"returnType",void 0),u([p({type:String,json:{write:!0}})],XS.prototype,"title",void 0),XS=u([U("esri.webdoc.geotriggersInfo.ExpressionInfo")],XS);const zEe=XS,t3=new Et({deviceLocation:"device-location"});let L2=class extends It.ClonableMixin(ye){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};u([p({type:zEe,json:{write:!0}})],L2.prototype,"filterExpression",void 0),u([p({type:t3.apiValues,readOnly:!0,json:{type:t3.jsonValues,read:t3.read,write:t3.write}})],L2.prototype,"type",void 0),L2=u([U("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],L2);const jdt=L2;let R2=class extends It.ClonableMixin(ye){constructor(e){super(e),this.geometry=null,this.where=null}};u([p({types:yC,json:{read:Ao,write:!0}})],R2.prototype,"geometry",void 0),u([p({type:String,json:{write:!0}})],R2.prototype,"where",void 0),R2=u([U("esri.webdoc.geotriggersInfo.FeatureFilter")],R2);const Vdt=R2;let KS=class extends It.ClonableMixin(ye){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};u([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],KS.prototype,"layerId",void 0),u([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],KS.prototype,"layerUrl",void 0),u([at({featureLayer:"feature-layer"},{readOnly:!0})],KS.prototype,"type",void 0),KS=u([U("esri.webdoc.geotriggersInfo.FeatureLayerSource")],KS);const Bdt=KS;let pw=class extends It.ClonableMixin(ye){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};u([p({type:Bdt,json:{write:{isRequired:!0}}})],pw.prototype,"fenceSource",void 0),u([p({type:Vdt,json:{write:!0}})],pw.prototype,"filter",void 0),u([p({type:Number,json:{write:!0}})],pw.prototype,"bufferDistance",void 0),u([at({features:"features"},{readOnly:!0})],pw.prototype,"type",void 0),pw=u([U("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],pw);const Gdt=pw;let QD=class extends It.ClonableMixin(ye){constructor(e){super(e),this.type="fence"}};u([at({fence:"fence"},{readOnly:!0})],QD.prototype,"type",void 0),QD=u([U("esri.webdoc.geotriggersInfo.Geotrigger")],QD);const FEe=QD;let D2=class extends It.ClonableMixin(ye){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};u([p({type:zEe,json:{write:!0}})],D2.prototype,"expressionInfo",void 0),u([p({type:[String],json:{write:!0}})],D2.prototype,"requestedActions",void 0),D2=u([U("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],D2);const Hdt=D2,qdt=new Et({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Wdt=new Et({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),i3=new Et({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let cd=class extends FEe{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};u([at(qdt)],cd.prototype,"enterExitRule",void 0),u([p({type:jdt,json:{write:{isRequired:!0}}})],cd.prototype,"feed",void 0),u([at(Wdt)],cd.prototype,"feedAccuracyMode",void 0),u([p({type:i3.apiValues,json:{type:i3.jsonValues,read:i3.read,write:{writer:i3.write,isRequired:!0}}})],cd.prototype,"fenceNotificationRule",void 0),u([p({type:Gdt,json:{write:{isRequired:!0}}})],cd.prototype,"fenceParameters",void 0),u([p({type:String,json:{write:!0}})],cd.prototype,"name",void 0),u([p({type:Hdt,json:{write:!0}})],cd.prototype,"notificationOptions",void 0),u([at({fence:"fence"},{readOnly:!0})],cd.prototype,"type",void 0),cd=u([U("esri.webdoc.geotriggersInfo.FenceGeotrigger")],cd);const Jdt=cd,Zdt={base:FEe,key:"type",typeMap:{fence:Jdt}};let eN=class extends It.ClonableMixin(ye){constructor(e){super(e),this.geotriggers=null}};u([p({types:[Zdt],json:{write:{isRequired:!0}}})],eN.prototype,"geotriggers",void 0),eN=u([U("esri.webdoc.GeotriggersInfo")],eN);const Ydt=eN;let tN=class extends It.ClonableMixin(ye){constructor(e){super(e),this.enabled=!0}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],tN.prototype,"enabled",void 0),tN=u([U("esri.webdoc.ips.AppleIPSProperties")],tN);const Xdt=tN;let iN=class extends It.ClonableMixin(ye){constructor(e){super(e),this.enabled=!0}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],iN.prototype,"enabled",void 0),iN=u([U("esri.webdoc.ips.GNSSProperties")],iN);const Kdt=iN;let QS=class extends It.ClonableMixin(ye){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],QS.prototype,"enabled",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0}})],QS.prototype,"distance",void 0),u([p({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],QS.prototype,"units",void 0),QS=u([U("esri.webdoc.ips.PathSnappingProperties")],QS);const Qdt=QS;let rN=class extends It.ClonableMixin(ye){constructor(e){super(e),this.enabled=!0}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],rN.prototype,"enabled",void 0),rN=u([U("esri.webdoc.ips.SmoothingProperties")],rN);const eht=rN;let fw=class extends It.ClonableMixin(ye){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};u([p({type:Xdt,json:{name:"AppleIPS",write:!0}})],fw.prototype,"appleIPS",void 0),u([p({type:Kdt,json:{name:"GNSS",write:!0}})],fw.prototype,"gnss",void 0),u([p({type:eht,json:{write:!0}})],fw.prototype,"smoothing",void 0),u([p({type:Qdt,json:{write:!0}})],fw.prototype,"pathSnapping",void 0),fw=u([U("esri.webdoc.ips.Configuration")],fw);const tht=fw;let e$=class extends It.ClonableMixin(ye){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new At({id:n,portal:r==null?void 0:r.portal})}writePortalItem(e,i){e!=null&&e.id&&(i.itemId=e.id)}};u([p({type:At,json:{write:{isRequired:!0}}})],e$.prototype,"portalItem",void 0),u([Ue("portalItem",["itemId"])],e$.prototype,"readPortalItem",null),u([qe("portalItem",{itemId:{type:String}})],e$.prototype,"writePortalItem",null),e$=u([U("esri.webdoc.ips.PositioningService")],e$);const iht=e$;let N2=class extends It.ClonableMixin(ye){constructor(e){super(e),this.positioningService=null,this.configuration=null}};u([p({type:iht,json:{write:{isRequired:!0}}})],N2.prototype,"positioningService",void 0),u([p({type:tht,json:{write:!0}})],N2.prototype,"configuration",void 0),N2=u([U("esri.webdoc.IPSInfo")],N2);const rht=N2,nht={currentVersion:P$e,createInitialViewProperties:()=>new LF,parseVersion:K$.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},sht=Ze.ofType(NEe);var dE;let mw=(dE=class extends Dnt{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return nht}loadAll(){return y4(this,e=>{var i,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(i=this.ipsInfo)==null?void 0:i.positioningService)==null?void 0:r.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new Q("webmap:empty-resource","Expected a JSON resource but got nothing")}},dE.VERSION=P$e,dE);u([p({type:Ydt,json:{write:!0}})],mw.prototype,"geotriggersInfo",void 0),u([p({type:rht,json:{write:!0,name:"mapIPSInfo"}})],mw.prototype,"ipsInfo",void 0),u([p({json:{write:!0}})],mw.prototype,"presentation",void 0),u([p({type:sht,json:{read:!0,write:!0}})],mw.prototype,"utilityNetworks",void 0),mw=u([U("esri.WebMap")],mw);const oht=mw;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */function z2(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el);const e=aht(t);if(!e){const i=VEe(t);if(!i){jEe(t);return}return Che(i,t,!0),i}return lht(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?cht(e,t):e.localName==="arcgis-placement"?uht(e,t):Che(e,t,!1)),e}function aht({el:t}){for(let e=t.parentElement;e;e=(e==null?void 0:e.parentElement)??null){if(Ehe.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&Ehe.has(e.ownedBy.localName))return e.ownedBy}}const Ehe=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function lht(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function ij(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(ij(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const cht=(t,e)=>ij(t,i=>{var r;e.el.childElem&&t.content!=null&&t.content.append(e.el.childElem),t.expandIcon=e.icon||((r=e.widget)==null?void 0:r.icon)||t.expandIcon,e.position=t.position,e.el.view=i}),uht=(t,e)=>ij(t,i=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=t.position,e.el.view=i}),Che=(t,e,i)=>ij(t,r=>{i?jEe(e):e.el.childElem&&dht(t,e),e.el.view=r},"arcgisViewReadyChange");function dht(t,e){var l;const i=e.el.childElem??e.el,r=t==null?void 0:t.childElem,n=[...t.children],s={};for(const c of n){if(c===r)continue;const h=c.position??"manual";s[h]??(s[h]=[]),s[h].push({child:c,position:h,index:n.indexOf(c)})}const o=(l=s[e.position??"manual"])==null?void 0:l.findIndex(({child:c})=>c===e.el),a=t.view.ui;a.remove(i),a.add(i,{position:e.position,index:o})}function hht(t){let e=!1,i=t.el.view;const r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.el),"view")??{get:()=>i,set:n=>i=n};Object.defineProperty(t.el,"view",{get:r.get.bind(t.el),set:n=>{r.set.call(t.el,n),n&&!e&&(e=!0,t.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(t.el.view=i)}function pht(t,e){return e===void 0||(t==null?void 0:t.targetGeometry)!==(e==null?void 0:e.targetGeometry)||(t==null?void 0:t.rotation)!==(e==null?void 0:e.rotation)||(t==null?void 0:t.scale)!==(e==null?void 0:e.scale)}function fht(t,e){return UEe(e==null?void 0:e.center,t)}function UEe(t,e){if(typeof e=="string")return UEe(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!(t!=null&&t.equals(e)))return e}async function mht(t,e){e!=null&&(typeof e=="string"?t.el.view=await yht(t,e):t.widget&&(t.el.view=e.view))}async function yht(t,e){const i=VEe(t,e);return await new Promise(r=>{var n;typeof((n=i==null?void 0:i.view)==null?void 0:n.ready)=="boolean"?r(i.view):i&&i.addEventListener("arcgisViewReadyChange",()=>r(i.view),{once:!0})})}function jEe(t){t.el.childElem&&(t.el.shadowRoot??t.el).append(t.el.childElem)}function VEe(t,e){const i=e??t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}const F2=t=>t.el.childElem;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const ght=dt`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`,vht=Ive(oht),bht=Ive(Qrt);var Yv;let wht=(Yv=class extends qi{constructor(){super(),this._map=vht(this),this.view=bht(this),this.allLayerViews=this.view.allLayerViews,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewChange=ko(),this.arcgisViewClick=Ir(()=>this.view,"click"),this.arcgisViewDoubleClick=Ir(()=>this.view,"double-click"),this.arcgisViewDrag=Ir(()=>this.view,"drag"),this.arcgisViewHold=Ir(()=>this.view,"hold"),this.arcgisViewImmediateClick=Ir(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Ir(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Ir(()=>this.view,"key-down"),this.arcgisViewKeyUp=Ir(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Ir(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Ir(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Ir(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Ir(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Ir(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Ir(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Ir(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Ir(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Ir(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=ko(),this.view.ui={components:["attribution"]}}get center(){return this.view.center}set center(e){const i=fht(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){var i;e&&!((i=this.extent)!=null&&i.equals(e))&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){var e;return(e=this._map.portalItem)==null?void 0:e.id}set itemId(e){U4e(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){pht(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){var r;(r=this.map)==null||r.add(e,i)}async addLayers(e,i){var r;(r=this.map)==null||r.addMany(e,i)}async addTable(e){var i;(i=this.map)==null||i.tables.add(e)}async addTables(e,i){var r;(r=this.map)==null||r.tables.addMany(e,i)}async closePopup(){this.view.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){await this.view.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async whenLayerView(e){return await this.view.whenLayerView(e)}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e==null?void 0:e()).catch(i)}load(){const e=this;e.el.childElem=document.createElement("div"),e.el.append(e.el.childElem),this.view.container=e.el.childElem}loaded(){this.map||(this.map=this._map),this.manager.onLifecycle(()=>[Le(()=>this.map,e=>{e&&(this._map=e)},{initial:!0,sync:!0}),Le(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),Le(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}},Yv.properties={_map:16,view:32,allLayerViews:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9},Yv.shadowRootOptions=Zn,Yv.styles=ght,Yv);or("arcgis-map",wht);const _ht=t=>BEe(void 0,t),xht=t=>e=>BEe(e,t);class Sht extends wY{constructor(e,i){super(e);const r=this.exports;try{p$(this.component);const n=i(this.component,this),s=this.exports!==r;if(YFe(n)){s||this.setProvisionalExports(n);const o=n.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const BEe=UO(Sht),$ht=t=>(...e)=>{const i=fY(),r=new t(...e);return pY(i.at(-1)),r},Tht=t=>(e={})=>_ht((i,r)=>{const n=dge(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>VFe(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:h})=>{const m={...c,_lang:h,_t9nLocale:l,_loading:!1};r.exports=m;const y=c.componentLabel;typeof y=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=y)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,h=c._original??c,m=GEe(h,l);l&&(m._original=h),r.exports=m};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),GEe=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=GEe(t[r],n):i[r]=n??t[r]}),i},Cy=t=>Cht,Eht="arcgisPropertyChange",Cht=(...t)=>{const e=aC(),i=bY(Eht,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};function Ihe(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const ZA=-1;let ud=class extends st{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=ve("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(Mhe(e))}catch(i){this._transitionTo([]),Ce.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&khe(this._current,Mhe(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&khe(this._current,e,this.scale)?(this._final=e,this._to=ce(e),Iht(this._current,this._to,this.scale),this._from=ce(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?ce(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],o=this._to[r];n.scale=Mht(s.scale,o.scale,i);for(let a=0;a<n.effects.length;a++){const l=n.effects[a],c=s.effects[a],h=o.effects[a];l.interpolate(c,h,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?ce(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,o=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],c=i[a+1];if(l.scale>=e&&c.scale<=e){o=(e-l.scale)/(c.scale-l.scale),n=l.effects,s=c.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],s[a],o)}};function Mhe(t){const e=AK(t)||[];return kht(e)?[{scale:ZA,effects:e}]:e}function khe(t,e,i){var r,n,s,o;return!((r=t[0])!=null&&r.effects)||!((n=e[0])!=null&&n.effects)?!0:!((((s=t[0])==null?void 0:s.scale)===ZA||((o=e[0])==null?void 0:o.scale)===ZA)&&(t.length>1||e.length>1)&&i<=0)&&s1e(t[0].effects,e[0].effects)}function Iht(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],o=(s==null?void 0:s.scale)??i,a=(s==null?void 0:s.effects)??[];for(let l=n.length;l<r.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===ZA?i:n[l].scale,r[l].scale=r[l].scale===ZA?i:r[l].scale,o1e(n[l].effects,r[l].effects)}function Mht(t,e,i){return t+(e-t)*i}function kht(t){const e=t[0];return!!e&&"type"in e}u([p()],ud.prototype,"_to",void 0),u([p()],ud.prototype,"duration",void 0),u([p({value:""})],ud.prototype,"effect",null),u([p({readOnly:!0})],ud.prototype,"effects",void 0),u([p({readOnly:!0})],ud.prototype,"final",null),u([p({readOnly:!0})],ud.prototype,"hasEffects",null),u([p({value:0})],ud.prototype,"scale",null),u([p({readOnly:!0})],ud.prototype,"transitioning",null),ud=u([U("esri.layers.effects.EffectView")],ud);function Aht(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?HEe(t.view.floors,e.floorInfo.floorField):null}function Ahe(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?HEe(t,e.floorInfo.floorField):null}function HEe(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function b3t(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!qEe(t,e)}function Oht(t,e,i){return!!t.some(r=>{var a,l,c;const n=r.source,s=!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=((c=(l=(a=r.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:c.supportsSublayerOrderBy)??!1;return!s||r.originIdOf("renderer")>Bt.SERVICE||r.originIdOf("labelingInfo")>Bt.SERVICE||r.originIdOf("opacity")>Bt.SERVICE||r.originIdOf("labelsVisible")>Bt.SERVICE||o&&r.originIdOf("orderBy")>Bt.SERVICE})||!qEe(t,e)}function qEe(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function w3t(t){return!!t&&t.some(e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null})}const Pht={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Zc=class extends st{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=Ahe(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Oht(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(Pht[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||e&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,s)=>{const o=Ahe(this.floors,s),a=$k(o,s.definitionExpression);return a!=null&&(n[s.id]=a),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=o=>{o.visible&&(r===0||Yst(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(n):e.unshift(o))};i&&i.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((o,a)=>e[a]!==o)?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};u([p({readOnly:!0})],Zc.prototype,"dynamicLayers",null),u([p()],Zc.prototype,"floors",void 0),u([p({readOnly:!0})],Zc.prototype,"hasDynamicLayers",null),u([p()],Zc.prototype,"layer",null),u([p({readOnly:!0})],Zc.prototype,"layers",null),u([p({readOnly:!0})],Zc.prototype,"layerDefs",null),u([p({type:Number})],Zc.prototype,"scale",void 0),u([p({readOnly:!0})],Zc.prototype,"version",null),u([p({readOnly:!0})],Zc.prototype,"visibleSublayers",null),Zc=u([U("esri.layers.support.ExportImageParameters")],Zc);const Lht=9999999e31,Rht=2e-7,Dht={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function YF(t){return Dht[t]??[-34028234663852886e22,34028234663852886e22]}const Nht={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function zht(t){return Nht[t]}function x3t(t){return zht(t.pixelType)*t.bandCount}function S3t(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function Fht(t){return((t==null?void 0:t.startsWith("s"))||(t==null?void 0:t.startsWith("u")))??!1}function $3t(t,e,i,r){let[n,s]=YF(i);const o=Fht(i);return o&&(n-=1e-5,s+=1e-5),o?i.startsWith("u")?Uht(t,e,r,[n,s]):jht(t,e,r,[n,s]):Vht(t,e,r,[n,s])}function T3t(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function Uht(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+.5|0}}function jht(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function Vht(t,e,i,r){const[n,s]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<n||a>s?e[o]=0:i[o]=a}}function E3t(t,e,i){var v,w;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),c=s==="f32"||s==="f64",h=YF(s);let m=!1;for(let x=0;x<r.length;x++){const S=typeof e=="number"?e:e[x];if(S==null)continue;const C=((v=n==null?void 0:n[x])==null?void 0:v.minValue)??h[0],k=((w=n==null?void 0:n[x])==null?void 0:w.maxValue)??h[1];if(C>S+Number.EPSILON||k<S-Number.EPSILON)continue;const A=a[x]||l.slice(),R=r[x],D=i==null?void 0:i.customFloatTolerance;if(c&&D!==0){let B=D;B||(B=Math.abs(S)>=Lht?Rht*Math.abs(S):s==="f32"?2**-23:Number.EPSILON);for(let z=0;z<R.length;z++)A[z]&&Math.abs(R[z]-S)<B&&(R[z]=0,A[z]=0,l[z]=0,m=!0)}else for(let B=0;B<R.length;B++)A[B]&&R[B]===S&&(R[B]=0,A[B]=0,l[B]=0,m=!0);a[x]=A}if(m){const x=t.bandMasks||t.pixels.length>1?a:null;i!=null&&i.matchAllNoData?t.mask=x&&x.length>1?y(x):l:(t.bandMasks=x,t.mask=l)}function y(x){if(x.length<2)return x[0];const S=x[0].length,C=new Uint8Array(S).fill(0);for(let k=0;k<x.length;k++){const A=x[k];for(let R=0;R<S;R++)A[R]&&(C[R]=255)}return C}m&&"updateStatistics"in t&&t.updateStatistics()}function WEe(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function C3t(t,e){if(t==null)return null;if(!WEe(t))return new Q("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type}'`,{renderer:t});switch(t.type){case"simple":return Bht(t,e);case"unique-value":return Ght(t,e);case"class-breaks":return Hht(t,e);case"dictionary":case"heatmap":return null}return null}function tQ(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map(n=>n.details.symbol.type||n.details.symbol.declaredClass).filter(n=>!!n);i.sort();const r=new Array;return i.forEach((n,s)=>{s!==0&&n===i[s-1]||r.push(n)}),new Q("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function Bht(t,e){const i={...Nm,...e,cimFallbackEnabled:!0};return tQ(t,BE(t.symbol,i).error)}function Ght(t,e){var s;const i={...Nm,...e,cimFallbackEnabled:!0},r=(s=t.uniqueValueInfos)==null?void 0:s.map(o=>BE(o.symbol,i).error).filter(Mr),n=BE(t.defaultSymbol,i);return n.error&&(r==null||r.unshift(n.error)),tQ(t,r)}function Hht(t,e){const i={...Nm,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map(s=>BE(s.symbol,i).error).filter(Mr),n=BE(t.defaultSymbol,i);return n.error&&r.unshift(n.error),tQ(t,r)}var yJ;function qht(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function iQ(t){var e;return(t==null?void 0:t.type)==="CIMVectorMarker"?(e=t.markerGraphics)==null?void 0:e[0]:void 0}function JEe(t){var e,i;return((e=t==null?void 0:t.symbol)==null?void 0:e.type)==="CIMPolygonSymbol"?(i=t.symbol.symbolLayers)==null?void 0:i[0]:void 0}function Wht(t,e){(t==null?void 0:t.type)==="CIMVectorMarker"&&e!=null&&(t.size=e)}function Jht(t,e){const i=iQ(t);i&&e!=null&&(i.geometry=qht(e))}function Zht(t,e){const i=JEe(iQ(t));i&&e!=null&&(i.color=e.toArray())}function Yht(t,e,i){const r=JEe(iQ(t));r&&e!=null&&i&&(r.colorLocked=e)}function rQ(t,e){var c;const{outerRingSize:i,innerDotSize:r,type:n,color:s,colorLocked:o,primitiveOverrides:a}=e,l=((c=t.data.symbol)==null?void 0:c.type)==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if((l==null?void 0:l.length)===2)for(const h of l){const m=h.primitiveName===yJ.OuterRing;Wht(h,m?i:r),Jht(h,n),Zht(h,s),Yht(h,o,m)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),a!==void 0&&(t.data.primitiveOverrides=ce(a)),t}(function(t){t.OuterRing="reference-size-outer-ring",t.InnerDot="reference-size-inner-dot"})(yJ||(yJ={}));function ZEe(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const n of t.effects)Ohe(n,e);if(t.symbolLayers)for(const n of t.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":Xht(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":ZEe(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}if(n.effects)for(const s of n.effects)Ohe(s,e)}}else t.height!=null&&(t.height*=e)}function Xht(t,e,i){if(t&&(t.markerPlacement&&Kht(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||ZEe(r.symbol,e,!0,i)}function Kht(t,e){switch(ej(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function Ohe(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function YEe(t){const e=[];return gJ(YK(t),e),e.length?new Ye(fEe(e[0])):null}function gJ(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(mEe(s)||XK(s)&&s.markerPlacement&&ej(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&XF(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach(o=>{gJ(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":XF(e,s.color);break;case"CIMGradientFill":Qht(e,s);break;case"CIMHatchFill":gJ(s.lineSymbol,e)}}}function XF(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function Qht(t,e){var r,n;switch((r=e.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=e.colorRamp.colorRamps)==null||n.forEach(s=>{s.type==="CIMLinearContinuousColorRamp"&&Phe(t,s)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Phe(t,e.colorRamp)}}function Phe(t,e){e&&(e.fromColor&&XF(t,e.fromColor),e.toColor&&XF(t,e.toColor))}function XEe(t,e,i){e instanceof Ye||(e=new Ye(e));const r=YK(t);r&&vJ(r,e)}function vJ(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked||n&&(mEe(o)||XK(o)&&o.markerPlacement&&ej(o.markerPlacement)))continue;const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{vJ(l.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMGradientFill":ept(o,e);break;case"CIMHatchFill":vJ(o.lineSymbol,e)}}}function ept(t,e){var r,n;switch((r=t.colorRamp)==null?void 0:r.type){case"CIMMultipartColorRamp":(n=t.colorRamp.colorRamps)==null||n.forEach(s=>{s.type==="CIMLinearContinuousColorRamp"&&Lhe(s,e)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":Lhe(t.colorRamp,e)}}function Lhe(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function I3t(t,e,i=!1){const r=YK(t);if(i&&(e=360-e),(r==null?void 0:r.type)!=="CIMTextSymbol"){if((r==null?void 0:r.type)==="CIMPointSymbol"&&r.symbolLayers){const n=e-(r.angle||0);for(const s of r.symbolLayers)if(XK(s)){let o=s.rotation||0;s.rotateClockwise?o-=n:o+=n,s.rotation=o}r.angle=e}}else r.angle=e}var In;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(In||(In={}));const jk={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function tpt(t,e,i){const r=In.size;let n=r,s=r;t<1?n*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=r,c=r;return e&&i&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[i?n-.5*l:a,s-.5*c]},{command:"L",values:[i?n-.5*l:a,e?s-.5*c:c]},{command:"L",values:[n-.5*l,e?s-.5*c:c]},{command:"Z",values:[]}]}]}function ipt(t){const e=In.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function rpt(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function npt(t,e){let i=e?In.tallSymbolWidth:t;const r=t,n=e?4:6;i<=In.size?i-=.5*n:i-=n;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function spt(t,e){let i=e?In.tallSymbolWidth:t;const r=t,n=e?4:6;i<=In.size?i-=.5*n:i-=n;const s=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function opt(t,e){let i=e?In.tallSymbolWidth:t;const r=t,n=e?4:6;i<=In.size?i-=.5*n:i-=n;const s=.15*i,o=r-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function apt(t){let e=t;const i=t,r=6;e<In.size?e-=.5*r:e-=r;const n=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:n}]}function lpt(t){let e=t;const i=t,r=4;e<In.size?e-=.5*r:e-=r;const n=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function cpt(t){const e=t,i=2;let r=t;r<In.size?r-=.5*i:r-=i;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[s,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Hv(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function M3t(t,e){if(t==null)return new Ye;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Ye(t);return new Ye([Hv(i.r,e),Hv(i.g,e),Hv(i.b,e),i.a])}function KEe(t){return"r"in t&&"g"in t&&"b"in t}function QEe(t){return"h"in t&&"s"in t&&"v"in t}function eCe(t){return"l"in t&&"a"in t&&"b"in t}function tCe(t){return"l"in t&&"c"in t&&"h"in t}function upt(t){return"x"in t&&"y"in t&&"z"in t}const dpt=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],hpt=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function iCe(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function rCe(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=iCe(dpt,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function nQ(t){const e=iCe(hpt,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function nCe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function sCe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function ppt(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function fpt(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function mpt(t){return nCe(rCe(t))}function ypt(t){return nQ(sCe(t))}function gpt(t){return ppt(nCe(rCe(t)))}function vpt(t){return nQ(sCe(fpt(t)))}function bpt(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function wpt(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function A1(t){return KEe(t)?t:tCe(t)?vpt(t):eCe(t)?ypt(t):upt(t)?nQ(t):QEe(t)?wpt(t):t}function rj(t){return QEe(t)?t:bpt(A1(t))}function _pt(t){return eCe(t)?t:mpt(A1(t))}function k3t(t){return tCe(t)?t:gpt(A1(t))}function xpt(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new Ye({r:e,g:i,b:r})}function oCe(t,e){const{r:i,g:r,b:n}=e!=null&&e.ignoreAlpha?t:xpt(t);return .2126*i+.7152*r+.0722*n}var bJ;function A3t(t,e=bJ.High){return oCe(t,{ignoreAlpha:!0})>e?new Ye([0,0,0,t.a]):new Ye([255,255,255,t.a])}function O3t(t,e){const i=_pt(t);i.l*=1-e;const r=A1(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function P3t(t,e){const i=t.clone();return i.a*=e,i}function L3t(t,e){const i=rj(t);i.s*=e;const r=A1(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function R3t(t){return Ye.toUnitRGBA(t)}function D3t(t){return k1(t[0],t[1],t[2],t.length>3?t[3]:1)}function N3t(t,e){const i=Ye.toUnitRGBA(t);return i[3]*=e,i}function z3t(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(r=>typeof r=="string"?new Ye(r):r)).length===1||e===1){const r=[],n=t[0];for(let s=0;s<e;s++)r.push(n.clone());return r}if(i.shuffle&&(t=wge(ce(t),i.seed)),t.length>=e){const r=[],n=(t.length-1)/(e-1);for(let s=0;s<e;s++){const o=Math.round(s*n);r.push(t[o].clone())}return r}return Spt(t,e,i)}function Spt(t,e,i={}){const r=[],n=t.length-1,s=Math.ceil((e-t.length)/n);e:for(let o=0;o<n;o++){const a=t[o],l=t[o+1];for(let c=1;c<=s;c++){const h=c/(s+1);if(r.push($pt(a,l,h,i)),r.length+t.length===e)break e}}return[...t.map(o=>o.clone()),...wge(r,i.seed??1)]}(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(bJ||(bJ={}));const E8=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function $pt(t,e,i,r={}){const n=t.r,s=t.g,o=t.b,a=e.r,l=e.g,c=e.b,h=Math.round(n+(a-n)*i),m=Math.round(s+(l-s)*i),y=Math.round(o+(c-o)*i);if(!r.offset)return new Ye([h,m,y]);const v=SY(r.seed);return new Ye([E8(h,v),E8(m,v),E8(y,v)])}const aCe="picture-fill",lCe="simple-fill",Tpt="simple-line",cCe="simple-marker",Ept="text",Cpt="cim",Rhe=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),C8=new KTe(1e3);function Ipt(t){const e=t.style;let i=null;if(t)switch(t.type){case cCe:e!=="cross"&&e!=="x"&&(i=t.color);break;case lCe:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:zr(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case aCe:i={type:"pattern",src:t.url,width:ui(t.width)*t.xscale,height:ui(t.height)*t.yscale,x:ui(t.xoffset),y:ui(t.yoffset)};break;case Ept:i=t.color;break;case Cpt:i=YEe(t)}return i}function Mpt(t,e){const i=t+"-"+e;return C8.get(i)!==void 0?Promise.resolve(C8.get(i)):Ot(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const c=a.toDataURL();return C8.put(i,c),c})}function YA(t){if(!t)return null;let e=null;switch(t.type){case lCe:case aCe:case cCe:e=YA(t.outline);break;case Tpt:{const i=ui(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:sQ(t.style),width:i,cap:t.cap,join:t.join==="miter"?ui(t.miterLimit):t.join},e.dashArray=uCe(e).join(",")||"none");break}default:e=null}return e}function uCe(t){if(!(t!=null&&t.style))return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(o=>Number(o));const n=r??0,s=Rhe.has(i)?Rhe.get(i).map(o=>o*n):[];if(t.cap!=="butt")for(const[o,a]of s.entries())s[o]=o%2==1?a+n:Math.max(a-n,1);return s}const sQ=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),kpt=new Ye([128,128,128]);let Apt=0;function Opt(){return Apt++}let Ppt=0;function Lpt(){return Ppt++}let Rpt=0;function Dpt(){return Rpt++}const Npt="http://www.w3.org/2000/svg",Dhe=ve("android"),zpt=ve("chrome")||Dhe&&Dhe>=4?"auto":"optimizeLegibility",Fpt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Upt=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let hn={},Vi={};const jpt=Math.PI;function Nv(t,e){const i=t*(jpt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function dCe(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function oQ(t,e,i,r,n){if(t){if(t.type==="circle")return K("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return K("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return K("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return K("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const s=typeof t.path!="string"?dCe(t.path):t.path;return K("path",{d:s,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return RO(r),K("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":zpt,x:t.x,y:t.y},t.text)}return null}function aQ(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new Ye(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${Opt()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${Lpt()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new Ye(i.color).toString()}))}}}function lQ(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Ye(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=uCe(t).join(",")||"none")),e}function hCe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",RO(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function pCe(t){const{pattern:e,linearGradient:i}=t;if(e)return K("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},K("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((n,s)=>K("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return K("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function Vpt(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:o,font:a}=r,l=aQ(s),c=lQ(o),h=n.type==="text"?hCe(n,a):null,m=oQ(n,l.fill,c,h);m&&i.push(m)}return K("mask",{id:e,maskUnits:"userSpaceOnUse"},K("g",null,i))}function Nhe(t,e,i){return Dp(t,oP(t),[e,i])}function zhe(t,e,i,r,n){return aP(t,oP(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function Bpt(t,e,i,r){const n=e%360*Math.PI/180;bb(t,oP(t),n);const s=Math.cos(n),o=Math.sin(n),a=t[4],l=t[5];return t[4]=a*s-l*o+r*o-i*s+i,t[5]=l*s+a*o-i*o-r*s+r,t}function xa(t,e){hn&&"left"in hn?(hn.left!=null&&hn.left>t&&(hn.left=t),(hn.right==null||hn.right<t)&&(hn.right=t),(hn.top==null||hn.top>e)&&(hn.top=e),(hn.bottom==null||hn.bottom<e)&&(hn.bottom=e)):hn={left:t,bottom:e,right:t,top:e}}function Fhe(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)xa(e[r],e[r+1]);Vi.x=e[i-2],Vi.y=e[i-1];break;case"H":for(r=0;r<i;++r)xa(e[r],Vi.y);Vi.x=e[i-1];break;case"V":for(r=0;r<i;++r)xa(Vi.x,e[r]);Vi.y=e[i-1];break;case"m":{let n=0;for(("x"in Vi)||(xa(Vi.x=e[0],Vi.y=e[1]),n=2),r=n;r<i;r+=2)xa(Vi.x+=e[r],Vi.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)xa(Vi.x+=e[r],Vi.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)xa(Vi.x+=e[r],Vi.y);break;case"v":for(r=0;r<i;++r)xa(Vi.x,Vi.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)xa(Vi.x+e[r],Vi.y+e[r+1]),xa(Vi.x+e[r+2],Vi.y+e[r+3]),xa(Vi.x+=e[r+4],Vi.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)xa(Vi.x+e[r],Vi.y+e[r+1]),xa(Vi.x+=e[r+2],Vi.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)xa(e[r+5],e[r+6]);Vi.x=e[i-2],Vi.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)xa(Vi.x+=e[r+5],Vi.y+=e[r+6])}}function Uhe(t,e,i){const r=Fpt[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),Fhe(n)):(n={action:t,args:[]},i.push(n),Fhe(n)))}function Gpt(t){const e=(typeof t.path!="string"?dCe(t.path):t.path).match(Upt),i=[];if(hn={},Vi={},!e)return null;let r="",n=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(r&&Uhe(r,n,i),n=[],r=l):n.push(c)}Uhe(r,n,i);const o={x:0,y:0,width:0,height:0};return hn&&"left"in hn&&(o.x=hn.left,o.y=hn.top,o.width=hn.right-hn.left,o.height=hn.bottom-hn.top),o}function fCe(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=Gpt(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function mCe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function wJ(t,e,i,r,n,s,o,a,l){let c=(o&&s?Nv(s,e):e)/2,h=(o&&s?Nv(s,i):i)/2;if(l){const k=l[0],A=l[1];c=(o&&s?Nv(s,k):k)/2,h=(o&&s?Nv(s,A):A)/2}const m=t.width+r,y=t.height+r,v=ly(),w=ly();let x=!1;if(n&&m!==0&&y!==0){const k=e!==i?e/i:m/y,A=e>i?e:i;let R=1,D=1;isNaN(A)||(k>1?(R=A/m,D=A/k/y):(D=A/y,R=A*k/m)),Zh(w,w,zhe(v,R,D,c,h)),x=!0}const S=t.x+(m-r)/2,C=t.y+(y-r)/2;if(Zh(w,w,Nhe(v,c-S,h-C)),!x&&(m>e||y>i)){const k=m/e>y/i,A=(k?e:i)/(k?m:y);Zh(w,w,zhe(v,A,A,S,C))}return a&&Zh(w,w,Nhe(v,a[0],a[1])),s&&Zh(w,w,Bpt(v,s,S,C)),`matrix(${w[0]},${w[1]},${w[2]},${w[3]},${w[4]},${w[5]})`}function Hpt(t,e,i){const r=t==null?void 0:t.effects.find(c=>c.type==="bloom");if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*e,l=4*n+1;return K("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},K("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),K("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),K("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),K("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},K("feFuncR",{slope:l,type:"linear"}),K("feFuncG",{slope:l,type:"linear"}),K("feFuncB",{slope:l,type:"linear"})),K("feMerge",null,K("feMergeNode",{in:"intensityBlur"}),K("feMergeNode",{in:"intensityBrightness"}),K("feGaussianBlur",{stdDeviation:n/10})))}function yCe(t,e,i,r={}){var y,v,w;const n=[],s=[],o=Dpt(),a=Hpt(r.effectView,e,o);let l=null;if(a){const x=(y=r.effectView)==null?void 0:y.effects.find(A=>A.type==="bloom"),S=r.clipBloomEffect||!x.strength?0:(x.strength+x.radius/2)/3,C=e+e*S,k=i+i*S;l=[Math.max(C,10),Math.max(k,10)]}let c=e,h=i;if(r.useRotationSize)for(let x=0;x<t.length;x++){const S=((v=r.rotations)==null?void 0:v[x])??0;c=Math.max(Nv(S,e),c),h=Math.max(Nv(S,i),h)}for(let x=0;x<t.length;x++){const S=t[x],C=[],k=[];let A=0,R=0,D=0;for(const Y of S){const{shape:ee,fill:ge,stroke:fe,font:ue,offset:ae}=Y;r.ignoreStrokeWidth||ee.type==="text"||(A+=(fe==null?void 0:fe.width)||0);const Se=aQ(ge),le=lQ(fe),be=ee.type==="text"?hCe(ee,ue):null;n.push(pCe(Se)),C.push(oQ(ee,Se.fill,le,be,r.ariaLabel)),k.push(fCe(ee)),ae&&(R+=ae[0],D+=ae[1])}const B=((w=r.rotations)==null?void 0:w[x])??0;r.useRotationSize&&(R+=(c-Nv(B,e))/2,D+=(h-Nv(B,i))/2);const z=wJ(mCe(k),e,i,A,r.scale??!1,B,r.useRotationSize??!1,[R,D],l);let W=null;if(r.masking){const Y=`mask-${x}`,ee=r.masking[x];n.push(Vpt(ee,Y)),W=`url(#${Y})`}s.push(W?K("g",{mask:W},K("g",{transform:z},C)):K("g",{transform:z},C))}return a&&(RO(l),c=l[0],h=l[1]),K("svg",{"aria-label":r.ariaLabel,focusable:!1,height:h,role:"img",style:"display: block;",width:c,xmlns:Npt},a,K("defs",null,n),a?K("g",{filter:`url(#bloom${o})`},s):s)}function qpt(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function Wpt(t){var e;if(!t)return 0;if(qd(t)){const i=qpt(t);return i??0}return Di((e=YA(t))==null?void 0:e.width)}function nj(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function Jpt(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function F3t(t,e){if(!t)return null;let i=null;return qd(t)?i=Zpt(t):k4(t)&&(i=t.type==="cim"?YEe(t):t.color?new Ye(t.color):null),i?tT(i,e):null}function Zpt(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Ye(i):null}function tT(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Ye(i)}function Ypt(t,e,i){const r=t.symbolLayers;if(!r)return;const n=(s,o=!1)=>{let a=e??s??null;return(i==null?void 0:i.override)!=null&&(!a&&o&&(a=new Ye([255,255,255])),a&&(a.a=i.override)),tT(a,i==null?void 0:i.add)};r.forEach(s=>{var l,c;if(s.type==="water")return void(s.color=tT(s.color,i==null?void 0:i.add));const o=s.material!=null?s.material.color:null,a=n(o,s.type==="icon"&&((l=s.resource)==null?void 0:l.href)!=null);s.material==null?s.material=new _l({color:a}):s.material.color=a,"outline"in s&&((c=s.outline)!=null&&c.color)&&(i==null?void 0:i.add)!=null&&(s.outline.color=tT(s.outline.color,i.add)),"marker"in s&&s.marker!=null&&(s.marker.color=n(s.marker.color))})}function Xpt(t,e,i){var r;e=e??t.color,(i==null?void 0:i.override)!=null&&e&&(e.a=i.override),e&&(t.color=tT(e,i==null?void 0:i.add)),"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=tT(t.outline.color,i==null?void 0:i.add))}function I8(t,e,i){t&&(e||i!=null)&&(e&&(e=new Ye(e)),qd(t)?Ypt(t,e,i):k4(t)&&Xpt(t,e,i))}async function Kpt(t,e){const i=t.symbolLayers;i&&await K9e(i,async r=>Qpt(r,e))}async function Qpt(t,e){switch(t.type){case"extrude":tft(t,e);break;case"icon":case"line":case"text":eft(t,e);break;case"path":rft(t,e);break;case"object":await ift(t,e)}}function eft(t,e){const i=gCe(e);i!=null&&(t.size=i)}function gCe(t){for(const e of t)if(typeof e=="number")return e;return null}function tft(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function ift(t,e){const{resourceSize:i,symbolSize:r}=await nft(t),n=vCe(e,i,r);n!=null&&(t.width=Vk(e[0],r[0],i[0],n),t.depth=Vk(e[1],r[1],i[1],n),t.height=Vk(e[2],r[2],i[2],n))}function rft(t,e){const i=vCe(e,zwe,[t.width,void 0,t.height]);i!=null&&(t.width=Vk(e[0],t.width,1,i),t.height=Vk(e[2],t.height,1,i))}function vCe(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return null}async function nft(t){const{computeObjectLayerResourceSize:e}=await $e(()=>import("./symbolLayerUtils-BZdkBZmv.js"),[]),i=await e(t,10),{width:r,height:n,depth:s}=t,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function Vk(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function sft(t,e){const i=gCe(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function oft(t,e){if(t&&e)return qd(t)?Kpt(t,e):void(k4(t)&&sft(t,e))}function aft(t,e,i){if(t&&e!=null)if(qd(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n.type==="object")switch(i){case"tilt":n.tilt=(n.tilt??0)+e;break;case"roll":n.roll=(n.roll??0)+e;break;default:n.heading=(n.heading??0)+e}n.type==="icon"&&(n.angle+=e)})}else k4(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle+=e))}function pP(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return RF(e)}function U3t(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}const jhe=tF();function lft(t,e){jhe.append(t,e),jhe.detach(e)}function IC(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(o=>!!o.length))return null;const s=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=pP(i.effectView)),lft(s,()=>yCe(t,r,n,i)),s}function cft(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function uft(t,e,i){return t?Ot(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.width,o=n.height,a=s/o;let l=e;if(i){const c=Math.max(s,o);l=Math.min(l,c)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new Q("renderUtils: imageDataSize","href not provided."))}function dft(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function hft(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=rj({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const o=A1(s);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function pft(t,e,i,r,n){return uft(t,e,n).then(s=>{const o=s.width??e,a=s.height??e;if(s.image&&dft(i,r)){let l=s.image.width,c=s.image.height;ve("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const h=cft(o,a);h.drawImage(s.image,0,0,l,c,0,0,o,a);const m=h.getImageData(0,0,o,a),y=[i.r/255,i.g/255,i.b/255,i.a],v=rj(i);for(let w=0;w<m.data.length;w+=4)hft(m.data,w,y,v,r);h.putImageData(m,0,0),t=h.canvas.toDataURL("image/png")}else{const l=Tt==null?void 0:Tt.findCredential(t);if(l!=null&&l.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:o,height:a}}).catch(()=>({url:t,width:e,height:e}))}const bCe="esri-relationship-ramp",Wx=`${bCe}--diamond`,wg=`${bCe}--square`,fft="http://www.w3.org/2000/svg",br={diamondContainer:`${Wx}__container`,diamondLeftCol:`${Wx}__left-column`,diamondRightCol:`${Wx}__right-column`,diamondMidCol:`${Wx}__middle-column`,diamondMidColLabel:`${Wx}__middle-column--label`,diamondMidColRamp:`${Wx}__middle-column--ramp`,squareTable:`${wg}__table`,squareTableRow:`${wg}__table-row`,squareTableCell:`${wg}__table-cell`,squareTableLabel:`${wg}__table-label`,squareTableLabelLeftBottom:`${wg}__table-label--left-bottom`,squareTableLabelRightBottom:`${wg}__table-label--right-bottom`,squareTableLabelLeftTop:`${wg}__table-label--left-top`,squareTableLabelRightTop:`${wg}__table-label--right-top`};function wCe(t,e,i={}){const{focus:r,labels:n}=t,s=!!r,o=mft(t,e,i),a={justifyContent:"center"},l=U4(),c=i.key??e;return s?K("div",{class:br.diamondContainer,key:`${c}-container`,styles:a},K("div",{class:br.diamondLeftCol},l?n.right:n.left),K("div",{class:br.diamondMidCol},K("div",{class:br.diamondMidColLabel},n.top),o,K("div",{class:br.diamondMidColLabel},n.bottom)),K("div",{class:br.diamondRightCol},l?n.left:n.right)):K("div",{class:br.squareTable,key:`${c}-container`},K("div",{class:br.squareTableRow},K("div",{class:E$(br.squareTableCell,br.squareTableLabel,br.squareTableLabelRightBottom)},l?n.top:n.left),K("div",{class:br.squareTableCell}),K("div",{class:E$(br.squareTableCell,br.squareTableLabel,br.squareTableLabelLeftBottom)},l?n.left:n.top)),K("div",{class:br.squareTableRow},K("div",{class:br.squareTableCell}),o,K("div",{class:br.squareTableCell})),K("div",{class:br.squareTableRow},K("div",{class:E$(br.squareTableCell,br.squareTableLabel,br.squareTableLabelRightTop)},l?n.right:n.bottom),K("div",{class:br.squareTableCell}),K("div",{class:E$(br.squareTableCell,br.squareTableLabel,br.squareTableLabelLeftTop)},l?n.bottom:n.right)))}function Vhe(t,e,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,s=t==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${r})`}return o}function mft(t,e,i={}){const{focus:r,numClasses:n,colors:s,rotation:o}=t,{opacity:a,effectList:l,ariaLabel:c}=i,h=i.size??60,m=!!r,y=Math.sqrt(h**2+h**2)+(m?0:5),v=[],w=[],x=[],S=(h||75)/n;for(let ge=0;ge<n;ge++){const fe=ge*S;for(let ue=0;ue<n;ue++){const ae=ue*S,Se=aQ(s[ge][ue]),le=lQ(null),be={type:"rect",x:ae,y:fe,width:S,height:S},Oe=pCe(Se);Oe&&v.push(Oe);const Be=oQ(be,Se.fill,le,null);Be&&w.push(Be),x.push(fCe(be))}}const C=15,k=15,A=10;let R=null;m||(R="margin: -15px -15px -18px -15px");const D=Vhe("left",r,e),B=Vhe("right",r,e),z=mCe(x),W=wJ(z,y,y,0,!1,o,!1),Y=wJ(z,y,y,0,!1,m?-45:null,!1),ee={filter:pP(l)??void 0,opacity:a==null?"":`${a}`};return K("div",{class:m?br.diamondMidColRamp:br.squareTableCell,styles:ee},K("svg",{"aria-label":c,focusable:!1,height:y,role:"image",style:R,width:y,xmlns:fft},K("defs",null,K("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},K("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),K("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},K("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),v),K("g",{transform:W},w),K("g",{transform:Y},K("line",{fill:"none","marker-end":D.markerEnd,"marker-start":D.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:h-C,y2:C}),K("line",{fill:"none","marker-end":B.markerEnd,"marker-start":B.markerStart,stroke:"#555555","stroke-width":"1",x1:k,x2:h-k,y1:h+A,y2:h+A}))))}function yft(t){return t=t||globalThis.location.hostname,gft.some(e=>(t==null?void 0:t.match(e))!=null)}function Bhe(t,e){return t?(e=e||globalThis.location.hostname)?e.match(_Ce)!=null||e.match(SCe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(xCe)!=null||e.match($Ce)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const _Ce=/^devext\.arcgis\.com$/,xCe=/^qaext\.arcgis\.com$/,SCe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,$Ce=/^[\w-]*\.mapsqa\.arcgis\.com$/,gft=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,_Ce,xCe,/^jsapps\.esri\.com$/,SCe,$Ce],vft=["web-gltf","web","cim"];function TCe(t,e,i){const r=t.name;return r==null?Promise.reject(new Q("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?bft(r,e,i):PTe(t,e,i).then(n=>CCe(n,r,e,Iat,i))}function ECe(t,e){return e.items.find(i=>i.name===t)}async function CCe(t,e,i,r,n){var S,C;const s=(i==null?void 0:i.portal)!=null?i.portal:Fe.getDefault(),o={portal:s,url:nn(t.baseUrl)},a=ECe(e,t.data);if(!a)throw new Q("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=(n==null?void 0:n.acceptedFormats)??vft,c=r(a,l);if(!c)throw new Q("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:h,format:m}=c;let y=py(h,o),v=((S=a.thumbnail)==null?void 0:S.href)??null;const w=(C=a.thumbnail)==null?void 0:C.imageData;yft()&&(y=Bhe(y)??"",v=Bhe(v));const x={portal:s,url:nn(tX(y)),origin:"portal-item"};return jK(y,n).then(k=>{const A=m==="cim"?LTe(k.data):k.data,R=ATe(A,x);if(R&&qd(R)){if(v){const D=py(v,o);R.thumbnail=new w_({url:D})}else w&&(R.thumbnail=new w_({url:`data:image/png;base64,${w}`}));t.styleUrl?R.styleOrigin=new Md({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(R.styleOrigin=new Md({portal:i.portal,styleName:t.styleName,name:e}))}return R})}function bft(t,e,i){const r=Mat.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:Fe.getDefault();return jK(r,i).then(s=>{const o=LTe(s.data);return ATe(o,{portal:n,url:nn(tX(r)),origin:"portal-item"})})}const wft=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:CCe,getStyleItemFromStyle:ECe,resolveWebStyleSymbol:TCe},Symbol.toStringTag,{value:"Module"})),Fw=In.size,nN=In.maxSize,cQ=In.maxOutlineSize,Ghe=In.lineWidth,_J=In.tallSymbolWidth;function O$(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=ui(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,cQ),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?sQ(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function _ft(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return Jpt(e);const i=zr("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await TCe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch(()=>null);if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return i}function M8(t,e=1){const i=t.a,r=rj(t),n=r.h,s=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:c}=A1({h:n,s,v:o});return[a,l,c,i]}function KF(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function Ni(t,e=0){const i=KF(t);if(!i){if(t.type==="fill")return null;const n=kpt.r,s=Hv(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Hv(r[n],e);return r}async function ICe(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await Mpt(zr(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function Hhe(t){return t.outline?O$(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function uQ(t,e){const i=KF(t);if(!i)return null;let r="rgba(";return r+=Hv(i.r,e)+",",r+=Hv(i.g,e)+",",r+=Hv(i.b,e)+",",r+i.a+");"}function xJ(t,e){const i=uQ(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?ui(t.size):.75,cQ),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?sQ(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?ui(2):t.join:null}:{}}function r3(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function xft(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function Sft(t,e,i){var n,s;const r=[];if(!t)return r;switch(t.type){case"icon":{const l=e,c=e;switch(((n=t.resource)==null?void 0:n.primitive)??PZe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Ni(t,0),stroke:O$(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Ni(t,0),stroke:O$(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,c]},{command:"Z",values:[]}]},fill:Ni(t,0),stroke:O$(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*l,0]},{command:"L",values:[.5*l,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:Hhe(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[l,c]},{command:"M",values:[l,0]},{command:"L",values:[0,c]}]},stroke:Hhe(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*l,0]},{command:"L",values:[l,.5*c]},{command:"L",values:[.5*l,c]},{command:"Z",values:[]}]},fill:Ni(t,0),stroke:O$(t)})}break}case"object":switch(((s=t.resource)==null?void 0:s.primitive)??zZe){case"cone":{const o=r3(Ni(t,0),Ni(t,-.6),i?_J:e),a=opt(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o});break}case"inverted-cone":{const o=Ni(t,0),a=r3(o,Ni(t,-.6),e),l=apt(e);r.push({shape:l[0],fill:a},{shape:l[1],fill:o});break}case"cube":{const o=npt(e,i);r.push({shape:o[0],fill:Ni(t,0)},{shape:o[1],fill:Ni(t,-.3)},{shape:o[2],fill:Ni(t,-.5)});break}case"cylinder":{const o=r3(Ni(t,0),Ni(t,-.6),i?_J:e),a=spt(e,i);r.push({shape:a[0],fill:o},{shape:a[1],fill:o},{shape:a[2],fill:Ni(t,0)});break}case"diamond":{const o=lpt(e);r.push({shape:o[0],fill:Ni(t,-.3)},{shape:o[1],fill:Ni(t,0)},{shape:o[2],fill:Ni(t,-.3)},{shape:o[3],fill:Ni(t,-.7)});break}case"sphere":{const o=r3(Ni(t,0),Ni(t,-.6));o.x1=0,o.y1=0,o.x2=.25*e,o.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:o});break}case"tetrahedron":{const o=cpt(e);r.push({shape:o[0],fill:Ni(t,-.3)},{shape:o[1],fill:Ni(t,0)},{shape:o[2],fill:Ni(t,-.6)});break}}break}return r}function sj(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?ui(e):null}function $ft(t){return t.type==="icon"?"multiply":"tint"}async function Tft(t,e){const i=sj(e),r=e!=null&&e.maxSize?ui(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[],a=[];let l=!1,c=0,h=0,m=0;s.forEach(w=>{var k,A,R,D;if(w.type!=="icon"&&w.type!=="object")return;w&&w.type==="icon"&&(m=Math.max(w.size&&ui(w.size),m));const x=w.type==="icon"?w.size&&ui(w.size):0,S=i||x?Math.ceil(Math.min(i||x,r||nN)):Fw;let C=w.type==="icon"?w.angle:null;if((e==null?void 0:e.rotation)!=null&&(C=(C??0)+e.rotation),a.push(C),(k=w==null?void 0:w.resource)==null?void 0:k.href){const B=_ft(t,w).then(z=>{var ee;const W=(ee=w==null?void 0:w.material)==null?void 0:ee.color,Y=$ft(w);return pft(z,S,W,Y,n)}).then(z=>{const W=z.width,Y=z.height;return c=Math.max(c,W),h=Math.max(h,Y),C&&(l=!0),[{shape:{type:"image",x:0,y:0,width:W,height:Y,src:z.url},fill:null,stroke:null}]});o.push(B)}else{let B=S;w.type==="icon"&&i&&(B=S*(x/m));const z=(e==null?void 0:e.symbolConfig)==="tall"||((A=e==null?void 0:e.symbolConfig)==null?void 0:A.isTall)||w.type==="object"&&xft(w);c=Math.max(c,z?_J:B),h=Math.max(h,B),C&&((R=w.resource)!=null&&R.primitive)&&["square","triangle","x"].includes((D=w.resource)==null?void 0:D.primitive)&&(l=!0),o.push(Promise.resolve(Sft(w,B,z)))}});const y=await Promise.allSettled(o),v=[];return y.forEach(w=>{w.status==="fulfilled"?v.push(w.value):w.reason&&Ce.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",w.reason)}),IC(v,[c,h],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel,rotations:a,useRotationSize:l})}function Eft(t,e){const i=t.symbolLayers,r=[],n=nj(t),s=sj(e),o=(e!=null&&e.maxSize?ui(e.maxSize):null)||cQ;let a,l=0,c=0;return i.forEach((h,m)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const y=[];switch(h.type){case"line":{const v=xJ(h,0);if(v==null)break;const w=(v==null?void 0:v.width)||0;m===0&&(a=w);const x=Math.min(s||w,o),S=m===0?x:s?x*(w/a):x,C=S>Ghe/2?2*S:Ghe;c=Math.max(c,S),l=Math.max(l,C),v.width=S,y.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:v});break}case"path":{const v=Math.min(s||Fw,o),w=Ni(h,0),x=Ni(h,-.2),S=uQ(h,-.4),C=S?{color:S,width:1}:{};if(h.profile==="quad"){const k=h.width,A=h.height,R=tpt(k&&A?k/A:1,A===0,k===0),D={...C,join:"bevel"};y.push({shape:R[0],fill:x,stroke:D},{shape:R[1],fill:x,stroke:D},{shape:R[2],fill:w,stroke:D})}else y.push({shape:jk.pathSymbol3DLayer[0],fill:x,stroke:C},{shape:jk.pathSymbol3DLayer[1],fill:w,stroke:C});c=Math.max(c,v),l=c}}r.push(y)}),Promise.resolve(IC(r,[l,c],{node:e==null?void 0:e.node,scale:n,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function Cft(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=sj(e),s=e!=null&&e.maxSize?ui(e.maxSize):null,o=n||Fw,a=[];let l=0,c=0,h=!1;for(let m=0;m<r.length;m++){const y=r.at(m),v=[];if(!i||y.type==="fill"){switch(y.type){case"fill":{const w=Math.min(o,s||nN);if(l=Math.max(l,w),c=Math.max(c,w),h=!0,i){const x=jk.meshSymbol3DFill,S=uQ(y,-.4),C=S?{color:S,width:1,join:"round"}:{};v.push({shape:x[0],fill:Ni(y,0),stroke:C},{shape:x[1],fill:Ni(y,-.2),stroke:C},{shape:x[2],fill:Ni(y,-.6),stroke:C})}else{let x=Ni(y,0);const S="pattern"in y?y.pattern:null,C=O$(y),k=KF(y);S!=null&&S.type==="style"&&S.style!=="solid"&&k&&(x=await ICe(S,k)),v.push({shape:jk.fill[0],fill:x,stroke:C})}break}case"line":{const w=xJ(y,0);if(w==null)break;const x={stroke:w,shape:jk.fill[0]};l=Math.max(l,Fw),c=Math.max(c,Fw),v.push(x);break}case"extrude":{const w={join:"round",width:1,...xJ(y,-.4)},x=Ni(y,0),S=Ni(y,-.2),C=Math.min(o,s||nN),k=ipt(C);w.width=1,v.push({shape:k[0],fill:S,stroke:w},{shape:k[1],fill:S,stroke:w},{shape:k[2],fill:x,stroke:w});const A=Fw,R=.7*Fw+.5*C;l=Math.max(l,A),c=Math.max(c,R);break}case"water":{const w=KF(y),x=M8(w),S=M8(w,2),C=M8(w,3),k=rpt();h=!0,v.push({shape:k[0],fill:x},{shape:k[1],fill:S},{shape:k[2],fill:C});const A=Math.min(o,s||nN);l=Math.max(l,A),c=Math.max(c,A);break}}a.push(v)}}return IC(a,[l,c],{node:e==null?void 0:e.node,scale:h,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function Ift(t,e){if(t.symbolLayers.length===0)return Promise.reject(new Q("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return Tft(t,e);case"line-3d":return Eft(t,e);case"polygon-3d":case"mesh-3d":return Cft(t,e)}return Promise.reject(new Q("symbolPreview: swatchInfo3D","symbol not supported."))}const Mft=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:ICe,getSizeFromOptions:sj,getSymbolLayerFill:Ni,previewSymbol3D:Ift},Symbol.toStringTag,{value:"Module"})),qhe={HH:315,HL:45,LL:135,LH:225},kft={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Aft(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Ni(t.symbolLayers.at(0));if(e==="simple-line"){const i=YA(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=YA(t);return i&&i.color}return Ipt(t)}function Oft(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function Pft(t){const{focus:e,infos:i,numClasses:r}=t,n=kft[r],s={};i.forEach(a=>{s[a.value]={label:a.label,fill:Aft(a.symbol)}});const o=[];for(let a=0;a<r;a++){const l=[];for(let c=0;c<r;c++){const h=s[n[a][c]];l.push(h.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:Oft(e,s),rotation:MCe(e)}}function MCe(t){let e=qhe[t];return t&&e==null&&(e=qhe.HH),e||0}let Jx=null;const Whe=[255,255,255];function Jhe(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Lft(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,o=(i==null?void 0:i.swatchSize)||In.size,a=.8,l=Math.round(o*o/Math.max(s,.5)**2*a),c=window.devicePixelRatio,h=document.createElement("canvas"),m=o*c;h.width=m,h.height=m,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const y=h.getContext("2d");if(r&&(y.fillStyle=r.toCss(!0),y.fillRect(0,0,m,m),y.fill()),y.fillStyle=(e==null?void 0:e.toCss(!0))??"",Jx&&Jx.length/2===l)for(let w=0;w<2*l;w+=2){const x=Jx[w],S=Jx[w+1];y.fillRect(x,S,s*c,s*c),y.fill()}else{Jx=[];for(let w=0;w<2*l;w+=2){const x=Jhe(0,m),S=Jhe(0,m);Jx.push(x,S),y.fillRect(x,S,s*c,s*c),y.fill()}}n&&(n.color&&(y.strokeStyle=n.color.toCss(!0)),y.lineWidth=n.width,y.strokeRect(0,0,m,m));const v=new Image(o,o);return v.src=h.toDataURL(),v.ariaLabel=(i==null?void 0:i.ariaLabel)??null,v.alt=(i==null?void 0:i.ariaLabel)??"",v}function Rft(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,o=[],a=YA(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===n&&l.reduce((w,x)=>w+x,0)===100,h=[0];for(let w=0;w<n;w++){let x=null;c&&(x=l[w]*r/100,h.push(x+h[w])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(x??s)/2} ${r}`,dashoffset:"-"+(c?h[w]/2:w*(s/2)),color:t[w]},offset:[0,0]})}let m=null;const y=2*i+((a==null?void 0:a.width)||0),v=e.holePercentage;if(v){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*v},fill:null,stroke:a,offset:[0,0]});const w=y/2;m=[[{shape:{type:"circle",cx:w,cy:w,r:w},fill:Whe,stroke:a?{...a,color:Whe}:null,offset:[0,0]},{shape:{type:"circle",cx:w,cy:w,r:i*v},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return IC([o],[y,y],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:m,rotations:[-90],ariaLabel:e.ariaLabel})}function yw(t,e={}){const n=e.align==="horizontal",s=n?75:24,o=n?24:75,a=e.width??s,l=e.height??o,c=e.gradient??!0,h=window.devicePixelRatio,m=a*h,y=l*h,v=document.createElement("canvas");v.width=m,v.height=y,v.ariaLabel=e.ariaLabel??null,v.style.width=`${a}px`,v.style.height=`${l}px`;const w=v.getContext("2d"),x=n?m:0,S=n?0:y;if(c){const k=w.createLinearGradient(0,0,x,S),A=t.length,R=A===1?0:1/(A-1);t.forEach((D,B)=>k.addColorStop(B*R,D.toString())),w.fillStyle=k,w.fillRect(0,0,m,y)}else{const k=n?m/t.length:m,A=n?y:y/t.length;let R=0,D=0;for(const B of t)w.fillStyle=B.toString(),w.fillRect(R,D,k,A),R=n?R+k:0,D=n?0:D+A}const C=document.createElement("div");return C.style.width=`${a}px`,C.style.height=`${l}px`,Dft(C,e==null?void 0:e.effectList),C.appendChild(v),C}function Dft(t,e){if(!e)return;t.style.filter=pP(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function kCe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await $e(()=>import("./previewWebStyleSymbol-DmfXHXSG.js"),[]);return i(t,kCe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await $e(()=>Promise.resolve().then(()=>Mft),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await $e(()=>import("./previewSymbol2D-BuHuRqg-.js"),[]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await $e(()=>Promise.resolve().then(()=>tbt),void 0);return i(t,e)}default:return}}function ACe(t){return t&&"opacity"in t?t.opacity*ACe(t.parent):1}async function j3t(t,e){var R;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=e!=null&&e.ignoreOpacity?1:ACe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const D=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):t.symbol.clone();return I8(D,null,{add:n}),D}const s=(e==null?void 0:e.renderer)??zft(r);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):o.clone(),!(s&&"visualVariables"in s&&((R=s.visualVariables)!=null&&R.length)&&Nft(o)))return I8(o,null,{add:n}),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const D={...e};D.arcade=await yy(),e=D}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:h}=await $e(()=>Promise.resolve().then(()=>M1),void 0),m=[],y=[],v=[],w=[];for(const D of s.visualVariables)switch(D.type){case"color":m.push(D);break;case"opacity":y.push(D);break;case"rotation":w.push(D);break;case"size":D.target||v.push(D)}const x=!!m.length&&m[m.length-1],S=x?a(x,t,e):null,C=!!(e!=null&&e.ignoreOpacity),k=!!y.length&&y[y.length-1],A=k?l(k,t,e):null;if(I8(o,S,C?void 0:{override:A,add:n}),v.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const D=c(v,t,e);await oft(o,D)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const D of w)aft(o,h(D,t,e),D.axis);return o}function Nft(t){var e;return!qd(t)||((e=t.symbolLayers.at(0))==null?void 0:e.type)!=="water"}function zft(t){if(t)return"renderer"in t?t.renderer:void 0}function Fft(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const n=r.visualVariables.find(h=>h.type==="size");if(!("stops"in n)||!n.stops)return null;const s=n.stops.find(h=>h.useMinValue),o=n.stops.find(h=>h.useMaxValue);if(s==null||o==null)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=n.field,c=e.getDisplayStatistics(a,l);return c?new Ci({field:n.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const Uft=/^-?(\d+)(\.(\d+))?$/i;function jft(t,e){return t-e}function Vft(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function Bft(t,e,i,r,n){const s=sN(t,e,i,r),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function QF(t){const e=String(t),i=e.match(Uft);if(i!=null&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const c=QF(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function sN(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;n.previous=Math.floor(Math.abs(100*o/s))}if(r!=null){const s=r-t,o=r-e-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function e5(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map((o,a)=>a)}=e;s.sort(jft);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],c=a===0?null:i[a-1],h=a===i.length-1?null:i[a+1],m=QF(l).fractional;if(m){let y,v=0,w=!1;for(;v<=m&&!w;){const x=Vft(l,v);y=n&&o===0?x[1]:x[0],w=Bft(l,y,c,h,r),v++}w&&(i[a]=y)}}return i}const Gft={maximumFractionDigits:20};function Hft(t){return fy(t,Gft)}const V3t=",",qft={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},Wft=new Set(["integer","small-integer"]);let k8=null;function Jft(t){return XX(t)||jJe(t)||VJe(t)}async function B3t(t){const{field:e,field2:i,field3:r,normalizationField:n,valueExpression:s}=t;let o=[];if(s){if(!k8){const{arcadeUtils:a}=await yy();k8=a}o=k8.extractFieldNames(s)}return e&&o.push(e),i&&o.push(i),r&&o.push(r),n&&o.push(n),o}function uM(t){return String(t).padStart(2,"0")}function Zhe(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${uM((i?t.getMonth():t.getUTCMonth())+1)}-${uM(i?t.getDate():t.getUTCDate())} ${uM(i?t.getHours():t.getUTCHours())}:${uM(i?t.getMinutes():t.getUTCMinutes())}:${uM(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function G3t(t,e,i,r){const{hasQueryEngine:n}=t,s=`(${Zhe(i,Yhe(t,i),n)} - ${Zhe(e,Yhe(t,e),n)})`;let o=qft[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?s:`(${s} ${a} ${o})`,sqlWhere:null}}function Yhe(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(XX(i))return"field"}}function H3t(t,e){const i=e&&t.getField(e);return!!i&&Wft.has(i.type)}function q3t(t){return`cast(${t} as float)`}function Zft(t,e){const{format:i,timeZoneOptions:r,fieldType:n}=e??{};let s,o;if(r&&({timeZone:s,timeZoneName:o}=bGe(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,cS(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const a=cS(i||"short-date");return typeof t=="string"?CGe(t,{...a}):yc(t,{...a,timeZone:Jp})}case"time-only":{const a=cS(i||"short-time");return typeof t=="string"?IGe(t,a):yc(t,{...a,timeZone:Jp})}case"timestamp-offset":{if(!s&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const a=i||r?cS(i||"short-date-short-time"):void 0,l=a?{...a,timeZone:s,timeZoneName:o}:void 0;return typeof t=="string"?MGe(t,l):yc(t,l)}default:{const a=i||r?cS(i||"short-date-short-time"):void 0;return yc(typeof t=="string"?new Date(t):t,a?{...a,timeZone:s,timeZoneName:o}:void 0)}}}const OCe="<",PCe=">";function LCe(t,e,i,r){let n="";return e===0?n=`${OCe} `:e===i&&(n=`${PCe} `),n+(r?Zft(t,r):Hft(t))}const Yft=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function SJ(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(o=>o.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await $e(async()=>{const{getColor:o}=await Promise.resolve().then(()=>M1);return{getColor:o}},void 0);return s(e,n)??null}async function RCe(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await SJ(t)||t.color;return new Vr({cap:i,color:n,width:r})}function Xft(t,e){var i,r;if(!e.field)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find(({name:s})=>s.toLowerCase()===e.field.toLowerCase());return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e.field):null}function Kft(t,e){var r,n,s;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return(s=(n=i.find(o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===e.toLowerCase()}))==null?void 0:n.format)==null?void 0:s.dateFormat}function Qft(t,e,i){var s,o,a,l;const r=Xft(t,e);if(!r||!Jft(r)&&!L1e(r))return null;let n=Kft(t,r.name);if(!n&&r.type==="date"){let c=0,h=0;e.stops?(c=((o=(s=e.stops)==null?void 0:s.at(0))==null?void 0:o.value)??c,h=((l=(a=e.stops)==null?void 0:a.at(-1))==null?void 0:l.value)??h):"minDataValue"in e&&"maxDataValue"in e&&(c=e.minDataValue??c,h=e.maxDataValue??h),n=h-c>2*R9.days?"short-date":"short-date-short-time"}return{fieldType:r.type,format:n,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function Mp(t,e){var i,r;if("authoringInfo"in t)return(r=(i=t.authoringInfo)==null?void 0:i.visualVariables)==null?void 0:r.find(({theme:n})=>n===e)}const emt=new Ye([64,64,64]);function DCe(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,s)=>i.includes(s)?LCe(n,s,r,e):null)}async function Xhe(t,e,i){let r=!1,n=[],s=[];if(t.stops){const c=t.stops;n=c.map(h=>h.value),r=c.some(h=>!!h.label),r&&(s=c.map(h=>h.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:DCe(n,i);return(await Promise.all(n.map(async(c,h)=>{const m=t.type==="opacity"?await tmt(c,t,e):(await $e(async()=>{const{getColor:v}=await Promise.resolve().then(()=>M1);return{getColor:v}},void 0)).getColor(t,c),y=r?s[h]:(l==null?void 0:l[h])??"";return m==null?null:{value:c,color:m,label:y}}))).filter(Mr).reverse()}async function tmt(t,e,i){const r=new Ye(i??emt),n=(await $e(async()=>{const{getOpacity:s}=await Promise.resolve().then(()=>M1);return{getOpacity:s}},void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function imt(t){let e=!1,i=[],r=[];i=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(r=t.map(a=>a.label??""));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const o=e?null:DCe(i);return i.map((a,l)=>({value:a,color:NCe(a,t),label:e?r[l]:(o==null?void 0:o[l])??""})).reverse()}function NCe(t,e){const{startIndex:i,endIndex:r,weight:n}=rmt(t,e);if(i===r)return e[i].color;const s=Ye.blendColors(e[i].color,e[r].color,n);return new Ye(s)}function rmt(t,e){let i=0,r=e.length-1;return e.some((n,s)=>t<n.value?(r=s,!0):(i=s,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function nmt(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new Ye(r.toColor),label:"high"}):i.push({value:null,color:new Ye(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new Ye(r.fromColor),label:"low"}):i.push({value:null,color:new Ye(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new Ye(n),label:"high"},{value:e.min,color:new Ye(r),label:"low"}]}return i}function smt(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new ey({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var o,a;let s="";return n===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}const omt="spike-height-override";function amt(t){var a;const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,n=(r==null?void 0:r.includes("solid-fill"))||(r==null?void 0:r.includes("gradient-fill"));let s=e==null?void 0:e.toArray(),o=!1;return r!=null&&r.includes("outline")&&n?o=!0:s=(a=t.color)==null?void 0:a.toArray(),{type:"CIMSolidStroke",effects:lmt(r),enable:!0,colorLocked:o,capStyle:xl.Round,joinStyle:bu.Round,lineStyle3D:iJ.Strip,miterLimit:4,width:i??Di(1),color:s}}function lmt(t){if(!(t!=null&&t.includes("closed")))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function Khe(t){const{color:e,symbolStyle:i}=t,r=i==null?void 0:i.includes("solid-fill"),n=i==null?void 0:i.includes("gradient-fill");if(!r&&!n||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e==null?void 0:e.toArray()};const s=e.clone();return s.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:s.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function zCe(t,e){var k,A,R;const{defaultHeight:i,baseWidth:r,color:n,strokeColor:s,primitiveOverrides:o,symbolStyle:a,strokeWidth:l}=e,c=((k=t.data.symbol)==null?void 0:k.type)==="CIMPointSymbol"?t.data.symbol:null,h=c==null?void 0:c.symbolLayers;if(!h)return t;const m=c.effects,y=m==null?void 0:m.find(D=>D.type==="CIMGeometricEffectTaperedPolygon"),v=m==null?void 0:m.find(D=>D.type==="CIMGeometricEffectRadial"&&D.primitiveName===omt);r!=null&&y&&(y.fromWidth=r),i!=null&&v&&(v.length=i);const w=h==null?void 0:h.find(D=>D.type==="CIMSolidStroke"),x=h==null?void 0:h.find(D=>D.type==="CIMSolidFill"),S=h==null?void 0:h.find(D=>D.type==="CIMGradientFill"),C=((A=S==null?void 0:S.colorRamp)==null?void 0:A.type)==="CIMMultipartColorRamp"&&((R=S.colorRamp.colorRamps[0])==null?void 0:R.type)==="CIMLinearContinuousColorRamp"?S.colorRamp.colorRamps[0]:null;if(a){const D=(x==null?void 0:x.color)??(C==null?void 0:C.fromColor)??(w==null?void 0:w.color),B=n??(D?new Ye(D):void 0),z=(w==null?void 0:w.color)??D,W=s??(z?new Ye(z):void 0),Y=a.includes("solid-fill"),ee=a.includes("gradient-fill");if(Y||ee||A8(h,x??S),B){if(Y)A8(h,S),x?x.color=B==null?void 0:B.toArray():h.push(Khe({...e,color:B}));else if(ee)if(A8(h,x),S){if(C&&n){const ge=B.clone();ge.a=0,C.fromColor=B.toArray(),C.toColor=ge.toArray()}}else h.push(Khe({...e,color:B}))}if(w){const ge=amt({...e,strokeColor:W,color:B});w.effects=ge.effects,w.color=ge.color,w.width=ge.width,w.colorLocked=ge.colorLocked}}else if(w&&(s&&(w.color=s.toArray()),l!=null&&(w.width=l)),x&&n&&(x.color=n.toArray()),C&&n){const D=n.clone();D.a=0,C.fromColor=n.toArray(),C.toColor=D.toArray()}return o!==void 0&&(t.data.primitiveOverrides=ce(o)),t}function A8(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const n3=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],GE=["","","",""],cmt=["","","",""],umt=["","","",""],t5=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],dmt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],hmt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],pmt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],fmt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Qhe=["","","","","","","","","","","","",""],mmt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],epe=["",""],ymt=["",""],gmt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],vmt=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F=0,De=1,kt=2,jn=3,P=4,Nh=5,oN=6,L=7,qo=8,Sa=9,Wu=10,Gt=11,he=12,bmt=13,wmt=14,_mt=15,xmt=16,Smt=17,bt=18,$mt=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],Lh=100,Tmt=[Lh+0,F,F,F,F,Lh+1,Lh+2,Lh+3,De,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,Lh+4,P,P,P,F,P,F,P,F,P,P,P,F,F,P,P,F,F,F,F,F,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,F,F,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,F,F,P,P,F,F,P,P,F,F,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,F,F,F,Lh+5,L,L,Lh+6,Lh+7],Emt=[[bt,bt,bt,bt,bt,bt,bt,bt,bt,oN,Nh,oN,qo,Nh,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,Nh,Nh,Nh,oN,qo,P,P,Gt,Gt,Gt,P,P,P,P,P,Wu,Sa,Wu,Sa,Sa,kt,kt,kt,kt,kt,kt,kt,kt,kt,kt,Sa,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,P,bt,bt,bt,bt,bt,bt,Nh,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,bt,Sa,P,Gt,Gt,Gt,Gt,P,P,P,P,F,P,P,bt,P,P,Gt,Gt,kt,kt,P,F,P,P,P,kt,F,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,F,F,F,F,F,F,F,F],[F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,F,F,F,F,F,F,F,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,F,P,P,P,P,P,P,P,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,De,he,De,he,he,De,he,he,De,he,P,P,P,P,P,P,P,P,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,P,P,P,P,P,De,De,De,De,De,P,P,P,P,P,P,P,P,P,P,P],[jn,jn,jn,jn,P,P,P,P,L,Gt,Gt,L,Sa,L,P,P,he,he,he,he,he,he,he,he,he,he,he,L,P,P,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,jn,jn,jn,jn,jn,jn,jn,jn,jn,jn,Gt,jn,jn,L,L,L,he,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,he,he,he,he,he,he,he,jn,P,he,he,he,he,he,he,L,L,he,he,P,he,he,he,he,L,L,kt,kt,kt,kt,kt,kt,kt,kt,kt,kt,L,L,L,L,L,L],[L,L,L,L,L,L,L,L,L,L,L,L,L,L,P,L,L,he,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,P,P,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,he,he,he,he,he,he,he,he,he,he,he,L,P,P,P,P,P,P,P,P,P,P,P,P,P,P,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,De,he,he,he,he,he,he,he,he,he,De,De,P,P,P,P,De,P,P,P,P,P],[qo,qo,qo,qo,qo,qo,qo,qo,qo,qo,qo,bt,bt,bt,F,De,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,qo,Nh,bmt,wmt,_mt,xmt,Smt,Sa,Gt,Gt,Gt,Gt,Gt,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Sa,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,qo,bt,bt,bt,bt,bt,P,P,P,P,P,bt,bt,bt,bt,bt,bt,kt,F,P,P,kt,kt,kt,kt,kt,kt,Wu,Wu,P,P,P,F,kt,kt,kt,kt,kt,kt,kt,kt,kt,kt,Wu,Wu,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,Gt,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[F,F,F,F,F,F,F,P,P,P,P,P,P,P,P,P,P,P,P,F,F,F,F,F,P,P,P,P,P,De,he,De,De,De,De,De,De,De,De,De,De,Wu,De,De,De,De,De,De,De,De,De,De,De,De,De,P,De,De,De,De,De,P,De,P,De,De,P,De,De,P,De,De,De,De,De,De,De,De,De,De,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L],[he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,he,he,he,he,he,he,he,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Sa,P,Sa,P,P,Sa,P,P,P,P,P,P,P,P,P,Gt,P,P,Wu,Wu,P,P,P,P,P,Gt,Gt,P,P,P,P,P,L,L,L,L,L,P,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,P,P,bt],[P,P,P,Gt,Gt,Gt,P,P,P,P,P,Wu,Sa,Wu,Sa,Sa,kt,kt,kt,kt,kt,kt,kt,kt,kt,kt,Sa,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,P,P,P,P,P,P,P,P,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,P,P,P,F,F,F,F,F,F,P,P,F,F,F,F,F,F,P,P,F,F,F,F,F,F,P,P,F,F,F,P,P,P,Gt,Gt,P,P,P,Gt,Gt,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P]];let Cmt=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(Gmt(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let n=e;const s=qmt,o=rpe(i.charAt(1)),a=rpe(r.charAt(1)),l=(i.charAt(0)==="I"?"L":i.charAt(0))+o,c=(r.charAt(0)==="I"?"L":r.charAt(0))+a,h=i.charAt(2)+r.charAt(2);s.defInFormat=l,s.defOutFormat=c,s.defSwap=h;const m=U2(e,l,c,h,s);let y=!1;return r.charAt(1)==="R"?y=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(y=this.checkContextual(m)==="rtl"),this.sourceToTarget=pc,this.targetToSource=Hmt(this.sourceToTarget),r5=this.targetToSource,n=i.charAt(3)===r.charAt(3)?m:r.charAt(3)==="S"?Mmt(y,m):Omt(m,y,!0),this.sourceToTarget=pc,this.targetToSource=r5,this.levels=oj,n}_inputFormatSetter(e){if(!npe.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!npe.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=i5(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return Zmt.test(e)}};function U2(t,e,i,r,n){const s=Imt(t,{inFormat:e,outFormat:i,swap:r},n);if(s.inFormat===s.outFormat)return t;e=s.inFormat,i=s.outFormat,r=s.swap;const o=e.slice(0,1),a=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(n.inFormat=e,n.outFormat=i,n.swap=r,o==="L"&&i==="VLTR"){if(a==="LTR")return n.dir=Zx,_g(t,n);if(a==="RTL")return n.dir=j2,_g(t,n)}if(o==="V"&&l==="V")return n.dir=a==="RTL"?j2:Zx,O8(t,n);if(o==="L"&&i==="VRTL")return a==="LTR"?(n.dir=Zx,t=_g(t,n)):(n.dir=j2,t=_g(t,n)),O8(t);if(e==="VLTR"&&i==="LLTR")return n.dir=Zx,_g(t,n);if(o==="V"&&l==="L"&&a!==c)return t=O8(t),a==="RTL"?U2(t,"LLTR","VLTR",r,n):U2(t,"LRTL","VRTL",r,n);if(e==="VRTL"&&i==="LRTL")return U2(t,"LRTL","VRTL",r,n);if(o==="L"&&l==="L"){const h=n.swap;return n.swap=h.slice(0,1)+"N",a==="RTL"?(n.dir=j2,t=_g(t,n),n.swap="N"+h.slice(1,3),n.dir=Zx,t=_g(t,n)):(n.dir=Zx,t=_g(t,n),n.swap="N"+h.slice(1,3),t=U2(t,"VLTR","LRTL",n.swap,n)),t}return t}function Imt(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),n=e.outFormat.slice(0,1);let s,o=e.inFormat.slice(1,4),a=e.outFormat.slice(1,4);return o.charAt(0)==="C"&&(s=i5(t),o=s==="ltr"||s==="rtl"?s.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+o),a.charAt(0)==="C"&&(s=i5(t),s==="rtl"?a="RTL":s==="ltr"?(s=Amt(t),a=s.toUpperCase()):a=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=n+a),e}function Mmt(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let n=0,s=1,o=r.length;t||(n=r.length-1,s=-1,o=1);const a=kmt(r,n,s,o);let l="";for(let c=0;c<r.length;c++)Dmt(a,a.length,c)>-1?(jCe(r5,c,!t,-1),pc.splice(c,1)):l+=r[c];return l}function kmt(t,e,i,r,n){let s=0;const o=[];let a=0;for(let l=e;l*i<r;l+=i)if(UCe(t[l])||XA(t[l])){if(t[l]===""&&Nmt(t,l+i,i,r)){t[l]=Bmt(t[l+i],s===0?cmt:umt),l+=i,Vmt(t,l,i,r),o[a]=l,a++,s=0;continue}const c=t[l];s===1?t[l]=tpe(t,l+i,i,r)?jmt(t[l]):P8(t[l],hmt):tpe(t,l+i,i,r)===!0?t[l]=P8(t[l],fmt):t[l]=P8(t[l],dmt),XA(c)||(s=1),Umt(c)===!0&&(s=0)}else s=0;return o}function i5(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function Amt(t){const e=t.split("");return e.reverse(),i5(e.join(""))}function Omt(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const n=(t=String(t)).split("");for(let s=0;s<t.length;s++){let o=!1;if(n[s]>=""&&n[s]<"\uFEFF"){const a=t.charCodeAt(s);n[s]>=""&&n[s]<=""?(e?(s>0&&i&&n[s-1]===" "?r=r.slice(0,-1)+"":(r+="",o=!0),r+=GE[(a-65269)/2]):(r+=GE[(a-65269)/2],r+="",s+1<t.length&&i&&n[s+1]===" "?s++:o=!0),o&&(jCe(r5,s,!0,1),pc.splice(s,0,pc[s]))):r+=mmt[a-65136]}else r+=n[s]}return r}function _g(t,e){const i=t.split(""),r=[];return FCe(i,r,e),Lmt(i,r,e),ipe(2,i,r,e),ipe(1,i,r,e),oj=r,i.join("")}function FCe(t,e,i){const r=t.length,n=i.dir?vmt:gmt;let s=0,o=-1;const a=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)a[c]=Rmt(t[c]);for(let c=0;c<r;c++){const h=s,m=zmt(t,a,l,c,i);l[c]=m,s=n[h][m];const y=240&s;s&=15;const v=n[s][Wmt];if(e[c]=v,y>0)if(y===16){for(let w=o;w<c;w++)e[w]=1;o=-1}else o=-1;if(n[s][Jmt])o===-1&&(o=c);else if(o>-1){for(let w=o;w<c;w++)e[w]=v;o=-1}a[c]===Nh&&(e[c]=0),i.hiLevel|=v}i.hasUbatS&&Pmt(a,e,r,i)}function Pmt(t,e,i,r){for(let n=0;n<i;n++)if(t[n]===oN){e[n]=r.dir;for(let s=n-1;s>=0&&t[s]===qo;s--)e[s]=r.dir}}function Lmt(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=Fmt(t[r]))}function Rmt(t){const e=t.charCodeAt(0),i=Tmt[e>>8];return i<Lh?i:Emt[i-Lh][255&e]}function O8(t,e){const i=t.split("");if(e){const r=[];FCe(i,r,e),oj=r}return i.reverse(),pc.reverse(),i.join("")}function Dmt(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function UCe(t){for(let e=0;e<epe.length;e++)if(t>=epe[e]&&t<=ymt[e])return!0;return!1}function tpe(t,e,i,r){for(;e*i<r&&XA(t[e]);)e+=i;return!!(e*i<r&&UCe(t[e]))}function Nmt(t,e,i,r){for(;e*i<r&&XA(t[e]);)e+=i;let n=" ";if(!(e*i<r))return!1;n=t[e];for(let s=0;s<GE.length;s++)if(GE[s]===n)return!0;return!1}function ipe(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===j2&&!r.hasUbatB)return e.reverse(),void pc.reverse();const n=e.length;let s,o,a,l,c,h=0;for(;h<n;){if(i[h]>=t){for(s=h+1;s<n&&i[s]>=t;)s++;for(o=h,a=s-1;o<a;o++,a--)l=e[o],e[o]=e[a],e[a]=l,c=pc[o],pc[o]=pc[a],pc[a]=c;h=s}h++}}function zmt(t,e,i,r,n){const s=e[r];return{UBAT_L:()=>(n.lastArabic=!1,F),UBAT_R:()=>(n.lastArabic=!1,De),UBAT_ON:()=>P,UBAT_AN:()=>jn,UBAT_EN:()=>n.lastArabic?jn:kt,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,De),UBAT_WS:()=>P,UBAT_CS:()=>{let o,a;return r<1||r+1>=e.length||(o=i[r-1])!==kt&&o!==jn||(a=e[r+1])!==kt&&a!==jn?P:(n.lastArabic&&(a=jn),a===o?a:P)},UBAT_ES:()=>(r>0?i[r-1]:Nh)===kt&&r+1<e.length&&e[r+1]===kt?kt:P,UBAT_ET:()=>{if(r>0&&i[r-1]===kt)return kt;if(n.lastArabic)return P;let o=r+1;const a=e.length;for(;o<a&&e[o]===Gt;)o++;return o<a&&e[o]===kt?kt:P},UBAT_NSM:()=>{if(n.inFormat==="VLTR"){const o=e.length;let a=r+1;for(;a<o&&e[a]===he;)a++;if(a<o){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,h=e[a];if(c&&(h===De||h===L))return De}}return r<1||e[r-1]===Nh?P:i[r-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,P),UBAT_LRE:()=>(n.lastArabic=!1,P),UBAT_RLE:()=>(n.lastArabic=!1,P),UBAT_LRO:()=>(n.lastArabic=!1,P),UBAT_RLO:()=>(n.lastArabic=!1,P),UBAT_PDF:()=>(n.lastArabic=!1,P),UBAT_BN:()=>P}[$mt[s]]()}function Fmt(t){let e,i=0,r=n3.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<n3[e][0])r=e-1;else{if(!(t>n3[e][0]))return n3[e][1];i=e+1}return t}function Umt(t){for(let e=0;e<Qhe.length;e++)if(Qhe[e]===t)return!0;return!1}function jmt(t){for(let e=0;e<t5.length;e++)if(t===t5[e])return pmt[e];return t}function P8(t,e){for(let i=0;i<t5.length;i++)if(t===t5[i])return e[i];return t}function XA(t){return t>=""&&t<=""}function rpe(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function Vmt(t,e,i,r){for(;e*i<r&&XA(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function Bmt(t,e){for(let i=0;i<GE.length;i++)if(t===GE[i])return e[i];return t}function Gmt(t,e,i){pc=[],oj=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,pc[r]=r}function Hmt(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function jCe(t,e,i,r){for(let n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}let pc=[],r5=[],oj=[];const qmt={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Wmt=5,Jmt=6,Zx=0,j2=1,npe=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Zmt=/[\u0591-\u06ff\ufb1d-\ufefc]/,L8=new Cmt;function Ymt(t){if(t==null)return["",!1];if(!L8.hasBidiChar(t))return[t,!1];let e;return e=L8.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[L8.bidiTransform(t,e,"VLYSN"),!0]}let MC=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const dQ="arial-unicode-ms",spe="woff2",ope=new Map,VCe=new Set;let Xmt=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function Kmt(t){const e=tyt(t),i=eyt(t),r=ope.get(e);if(r)return r.promise;const n=new FontFace(t.family,`url('${hi.fontsUrl}/woff2/${i}.${spe}') format('${spe}')`,{style:t.style,weight:t.weight}),s=document.fonts;if(s.has(n)&&n.status==="loading")return n.loaded;const o=n.load().then(()=>(s.add(n),n));return ope.set(e,new Xmt(n,o)),VCe.add(n),o}function Y3t(t){return VCe.has(t)}function Qmt(t){if(!t)return dQ;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function eyt(t){const e=BCe(t)+GCe(t);return Qmt(t.family)+(e.length>0?e:"-regular")}function tyt(t){const e=BCe(t)+GCe(t);return(t.family||dQ)+(e.length>0?e:"-regular")}function BCe(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function GCe(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}function iyt(t){return 32+t.length}const HCe=16;function X3t(t){if(!t)return 0;let e=pQ;for(const i in t)t.hasOwnProperty(i)&&(e+=hQ(t[i],!1));return e}function ryt(t){if(!t)return 0;if(typeof t[0]=="number")return qCe(t);if(Array.isArray(t))return nyt(t);let e=pQ;for(const i in t)t.hasOwnProperty(i)&&(e+=hQ(t[i]));return e}function nyt(t){const e=t.length;if(e===0||typeof t[0]=="number")return WCe(t,8);let i=JCe;for(let r=0;r<e;r++)i+=hQ(t[r]);return i}function hQ(t,e=!0){switch(typeof t){case"object":return e?ryt(t):pQ;case"string":return iyt(t);case"number":return HCe;case"boolean":return 4;default:return 8}}function qCe(...t){return t.reduce((e,i)=>e+(i?Tge(i)?i.byteLength+syt:Array.isArray(i)?WCe(i,HCe):0:0),0)}function WCe(t,e){return JCe+t.length*e}const pQ=32,JCe=16,syt=145,M0=2;let n5=class t${constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new t$(e.lengths,e.coords)}static fromRect(e){const[i,r,n,s]=e,o=n-i,a=s-r;return new t$([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}get usedMemory(){return 64+qCe(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];if(n<3)continue;let s=this.coords[M0*i],o=this.coords[M0*i+1];for(let a=1;a<n;a+=1){const l=this.coords[M0*(a+i)],c=this.coords[M0*(a+i)+1];e+=-.5*(l-s)*(c+o),s=l,o=c}i+=n}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let s=0;s<n;s++)e(this.coords[M0*(s+i)],this.coords[M0*(s+i)+1]);i+=n}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let n=0;for(const s of r){for(let o=1;o<s;o++)i[2*(n+o)]+=i[2*(n+o)-2],i[2*(n+o)+1]+=i[2*(n+o)-1];n+=s}return e}clone(e){if(this.lengths.length===0)return new t$([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((n,s)=>n+s))*M0,r=this.coords.slice(0,i);return e?(e.set(r),new t$(this.lengths,e)):new t$(Array.from(this.lengths),Array.from(r))}},Hi=class{static fromOptimized(e,i,r=!1,n=!1,s=1){return new $J().initialize(e,i,r,n,s)}static fromJSON(e,i=!1,r=!1){const[n,s]=ape(e);return new EJ().initialize(n,s,i,r,1)}static fromOptimizedCIM(e,i,r=!1,n=!1,s=1){return new lpe().initialize(e,i,r,n,s)}static fromJSONCIM(e,i=!1,r=!1,n=1){const[s,o]=ape(e);return new cpe().initialize(s,o,i,r,n)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,n=1){return new $J().initialize(new n5,e,i,r,n)}static createEmptyJSON(e,i=!1,r=!1){return new EJ().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,n=1){return new lpe().initialize(new n5,e,i,r,n)}static createEmptyJSONCIM(e,i=!1,r=!1,n=1){return new cpe().initialize([],e,i,r,n)}asJSON(){const e=QU(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const n=e,s=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-n)*(i+s),-.5*r}invertY(){this.yFactor*=-1}},$J=class TJ extends Hi{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,n,s){return this.hasZ=r,this.hasM=n,this.geometryType=i,this._stride=2+Number(r)+Number(n),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=s,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new TJ().initialize(new n5([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let n=0;for(let s=this._pathOffset+i;s<e;s+=i){const o=r[s-i],a=r[s-i+1],l=r[s]-o,c=r[s+1]-a;n+=Math.sqrt(l*l+c*c)}return n}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let n=0;n<this._stride;n++)if(e[i+n]!==e[r+n])return!1;return!0}clone(){return new TJ().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce((e,i)=>e+i)}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function oyt(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function ape(t){return Hn(t)?[t.rings,"esriGeometryPolygon"]:Eo(t)?[t.paths,"esriGeometryPolyline"]:z$(t)?[[t.points],"esriGeometryMultipoint"]:Pa(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:MA(t)?[[[oyt(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let EJ=class CJ extends Hi{initialize(e,i,r,n,s){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=n,this._pathIndex=this._pointIndex=-1,this.yFactor=s,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let n=1;n<e;n++){const s=i[n-1],o=i[n],a=s[0],l=s[1],c=o[0]-a,h=o[1]-l;r+=Math.sqrt(c*c+h*h)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new CJ().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=QU(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new n5;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new CJ().initialize(ce(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map(e=>e.length).reduce((e,i)=>e+i)}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const s3=4,o3=1;let lpe=class ZCe extends $J{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map(o=>new Set)),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new ZCe().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},cpe=class YCe extends EJ{initialize(e,i,r,n,s){return super.initialize(e,i,r,n,s)}clone(){return new YCe().initialize(ce(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][s3]=o3}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][s3]===o3}setControlPointAt(e){this._paths[this.pathIndex][e][s3]=o3}getControlPointAt(e){return this._paths[this.pathIndex][e][s3]===o3}};const ayt=512;var Cd,Xs;(function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon"})(Cd||(Cd={}));let yi=class V2{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new V2(e[0],e[1])}clone(){return new V2(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,n=this.y;return this.x=r*e-n*i,this.y=r*i+n*e,this}rotateReverse(e,i){const r=this.x,n=this.y;return this.x=r*e+n*i,this.y=-r*i+n*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static add(e,i){return new V2(e.x+i.x,e.y+i.y)}static sub(e,i){return new V2(e.x-i.x,e.y-i.y)}},a3=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},lyt=class{constructor(e,i,r,n=8,s=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=n,this._pixelMargin=s,this._tileSize=ayt*n,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new yi(e,i),this._firstPt=new yi(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),n=new yi(e,i),s=yi.distance(this._prevPt,n);let o,a,l,c,h,m,y,v;if(r)this._prevIsIn?this._lineTo(e,i,!0):(o=this._prevPt,a=n,l=this._intersect(a,o),this._start=this._dist+s*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!0));else if(this._prevIsIn)a=this._prevPt,o=n,l=this._intersect(a,o),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!1);else{const w=this._prevPt,x=n;if(w.x<=this._xmin&&x.x<=this._xmin||w.x>=this._xmax&&x.x>=this._xmax||w.y<=this._ymin&&x.y<=this._ymin||w.y>=this._ymax&&x.y>=this._ymax)this._lineTo(x.x,x.y,!1);else{const S=[];if((w.x<this._xmin&&x.x>this._xmin||w.x>this._xmin&&x.x<this._xmin)&&(c=(this._xmin-w.x)/(x.x-w.x),v=w.y+c*(x.y-w.y),v<=this._ymin?m=!1:v>=this._ymax?m=!0:S.push(new a3(c,this._xmin,v))),(w.x<this._xmax&&x.x>this._xmax||w.x>this._xmax&&x.x<this._xmax)&&(c=(this._xmax-w.x)/(x.x-w.x),v=w.y+c*(x.y-w.y),v<=this._ymin?m=!1:v>=this._ymax?m=!0:S.push(new a3(c,this._xmax,v))),(w.y<this._ymin&&x.y>this._ymin||w.y>this._ymin&&x.y<this._ymin)&&(c=(this._ymin-w.y)/(x.y-w.y),y=w.x+c*(x.x-w.x),y<=this._xmin?h=!1:y>=this._xmax?h=!0:S.push(new a3(c,y,this._ymin))),(w.y<this._ymax&&x.y>this._ymax||w.y>this._ymax&&x.y<this._ymax)&&(c=(this._ymax-w.y)/(x.y-w.y),y=w.x+c*(x.x-w.x),y<=this._xmin?h=!1:y>=this._xmax?h=!0:S.push(new a3(c,y,this._ymax))),S.length===0)h?m?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):m?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(S.length>1&&S[0].ratio>S[1].ratio)this._start=this._dist+s*S[1].ratio,this._lineTo(S[1].x,S[1].y,!0),this._lineTo(S[0].x,S[0].y,!0);else{this._start=this._dist+s*S[0].ratio;for(let C=0;C<S.length;C++)this._lineTo(S[C].x,S[C].y,!0)}this._lineTo(x.x,x.y,!1)}}this._dist+=s,this._prevIsIn=r,this._prevPt=n}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let n=r.length;for(;n>=4&&(r[0].x===r[1].x&&r[0].x===r[n-2].x||r[0].y===r[1].y&&r[0].y===r[n-2].y);)r.pop(),r[0].x=r[n-2].x,r[0].y=r[n-2].y,--n}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===Cd.Polygon&&e&&cyt.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==Cd.LineString)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let n=0;n<i;n++)r.push({line:e[n],start:this._starts[n]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,n,s;if(i.x>=this._xmin&&i.x<=this._xmax)n=i.y<=this._ymin?this._ymin:this._ymax,s=(n-e.y)/(i.y-e.y),r=e.x+s*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,s=(r-e.x)/(i.x-e.x),n=e.y+s*(i.y-e.y);else{n=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const o=(r-e.x)/(i.x-e.x),a=(n-e.y)/(i.y-e.y);o<a?(s=o,n=e.y+o*(i.y-e.y)):(s=a,r=e.x+a*(i.x-e.x))}return this._r=s,new yi(r,n)}_pushLine(){this._line&&(this._type===Cd.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===Cd.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===Cd.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==Cd.Polygon?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new yi(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new yi(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let n,s;if(this._type!==Cd.Polygon)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(e,i)))return;this._line.push(new yi(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const o=n.x===e,a=n.y===i;if(o&&a)return;this._isH&&o||this._isV&&a?(n.x=e,n.y=i,s=this._line[this._line.length-2],s.x===e&&s.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===e,this._isV=s.y===i)):(this._isH=s.x===e,this._isV=s.y===i)):(this._line.push(new yi(e,i)),this._isH=o,this._isV=a)}else this._line.push(new yi(e,i))}},tDt=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new yi(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new yi(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}};(function(t){t[t.sideLeft=0]="sideLeft",t[t.sideRight=1]="sideRight",t[t.sideTop=2]="sideTop",t[t.sideBottom=3]="sideBottom"})(Xs||(Xs={}));let cyt=class Zg{static simplify(e,i,r){if(!r)return;const n=-i,s=e+i,o=-i,a=e+i,l=[],c=[],h=r.length;for(let y=0;y<h;++y){const v=r[y];if(!v||v.length<2)continue;let w,x=v[0];const S=v.length;for(let C=1;C<S;++C)w=v[C],x.x===w.x&&(x.x<=n&&(x.y>w.y?(l.push(y),l.push(C),l.push(Xs.sideLeft),l.push(-1)):(c.push(y),c.push(C),c.push(Xs.sideLeft),c.push(-1))),x.x>=s&&(x.y<w.y?(l.push(y),l.push(C),l.push(Xs.sideRight),l.push(-1)):(c.push(y),c.push(C),c.push(Xs.sideRight),c.push(-1)))),x.y===w.y&&(x.y<=o&&(x.x<w.x?(l.push(y),l.push(C),l.push(Xs.sideTop),l.push(-1)):(c.push(y),c.push(C),c.push(Xs.sideTop),c.push(-1))),x.y>=a&&(x.x>w.x?(l.push(y),l.push(C),l.push(Xs.sideBottom),l.push(-1)):(c.push(y),c.push(C),c.push(Xs.sideBottom),c.push(-1)))),x=w}if(l.length===0||c.length===0)return;Zg.fillParent(r,c,l),Zg.fillParent(r,l,c);const m=[];Zg.calcDeltas(m,c,l),Zg.calcDeltas(m,l,c),Zg.addDeltas(m,r)}static fillParent(e,i,r){const n=r.length,s=i.length;for(let o=0;o<s;o+=4){const a=i[o],l=i[o+1],c=i[o+2],h=e[a][l-1],m=e[a][l];let y=8092,v=-1;for(let w=0;w<n;w+=4){if(r[w+2]!==c)continue;const x=r[w],S=r[w+1],C=e[x][S-1],k=e[x][S];switch(c){case Xs.sideLeft:case Xs.sideRight:if(l3(h.y,C.y,k.y)&&l3(m.y,C.y,k.y)){const A=Math.abs(k.y-C.y);A<y&&(y=A,v=w)}break;case Xs.sideTop:case Xs.sideBottom:if(l3(h.x,C.x,k.x)&&l3(m.x,C.x,k.x)){const A=Math.abs(k.x-C.x);A<y&&(y=A,v=w)}}}i[o+3]=v}}static calcDeltas(e,i,r){const n=i.length;for(let s=0;s<n;s+=4){const o=[],a=Zg.calcDelta(s,i,r,o);e.push(i[s]),e.push(i[s+1]),e.push(i[s+2]),e.push(a)}}static calcDelta(e,i,r,n){const s=i[e+3];if(s===-1)return 0;const o=n.length;return o>1&&n[o-2]===s?0:(n.push(s),Zg.calcDelta(s,r,i,n)+1)}static addDeltas(e,i){const r=e.length;let n=0;for(let s=0;s<r;s+=4){const o=e[s+3];o>n&&(n=o)}for(let s=0;s<r;s+=4){const o=i[e[s]],a=e[s+1],l=n-e[s+3];switch(e[s+2]){case Xs.sideLeft:o[a-1].x-=l,o[a].x-=l,a===1&&(o[o.length-1].x-=l),a===o.length-1&&(o[0].x-=l);break;case Xs.sideRight:o[a-1].x+=l,o[a].x+=l,a===1&&(o[o.length-1].x+=l),a===o.length-1&&(o[0].x+=l);break;case Xs.sideTop:o[a-1].y-=l,o[a].y-=l,a===1&&(o[o.length-1].y-=l),a===o.length-1&&(o[0].y-=l);break;case Xs.sideBottom:o[a-1].y+=l,o[a].y+=l,a===1&&(o[o.length-1].y+=l),a===o.length-1&&(o[0].y+=l)}}}};const l3=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,uyt=512;let Vf,dyt=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function fQ(t,e,i){if(!t)return null;Vf||(Vf=new lyt(0,0,0,1));const r=i?-1:1,n=t.geometryType==="esriGeometryPolygon",s=n?Cd.Polygon:Cd.LineString,o=n?3:2;let a,l;for(Vf.reset(s),Vf.setPixelMargin(e+1),Vf.setExtent(uyt);t.nextPath();)if(!(t.pathSize<o)){for(t.nextPoint(),a=t.x,l=r*t.y,Vf.moveTo(a,l);t.nextPoint();)a=t.x,l=r*t.y,Vf.lineTo(a,l);n&&Vf.close()}const c=Vf.result(!1);if(c){const h=Hi.createEmptyOptimizedCIM(t.geometryType);for(const m of c){h.startPath();for(const y of m)h.pushXY(y.x,r*y.y)}return h.reset(),h}return null}let hyt=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,o=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,o.drawImage(e,0,0,r,n));const a=o.getImageData(0,0,r,n).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[h,m,y,v]=c.oldColor,[w,x,S,C]=c.newColor;if(h===w&&m===x&&y===S&&v===C)continue;for(let k=0;k<a.length;k+=4)h===a[k]&&m===a[k+1]&&y===a[k+2]&&v===a[k+3]&&(a[k]=w,a[k+1]=x,a[k+2]=S,a[k+3]=C)}}const l=new ImageData(a,r,n);return o.putImageData(l,0,0),s}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:n}=e,s=this._rasterizationCanvas,o=s.getContext("2d",{willReadFrequently:!0});e!==s&&(s.width=r,s.height=n,o.drawImage(e,0,0,r,n));const a=o.getImageData(0,0,r,n),l=new Uint8Array(a.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let m=0;m<l.length;m+=4)l[m]*=c[0],l[m+1]*=c[1],l[m+2]*=c[2],l[m+3]*=c[3];const h=new ImageData(new Uint8ClampedArray(l.buffer),r,n);return o.putImageData(h,0,0),s}};var ep;let pyt=(ep=class{static local(){return ep.instance===null&&(ep.instance=new ep),ep.instance}execute(e,i,r,n){return new fyt(e,i)}},ep.instance=null,ep),fyt=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let n=i,s=r,o=e.pathSize,a=0,l=0,c=0,h=0,m=0,y=0;this._isClosed&&++o;for(let v=1;e.nextPoint()||v<o;++v){let w,x;this._isClosed&&v===o-1?(w=i,x=r):(w=e.x,x=e.y);const S=w-n,C=x-s,k=Math.sqrt(S*S+C*C);v>1&&k>0&&c>0&&(a*S+l*C)/k/c<=this._maxCosAngle&&e.setControlPointAt(v-1),v===1&&(h=S,m=C,y=k),k>0&&(n=w,s=x,a=S,l=C,c=k)}this._isClosed&&c>0&&y>0&&(a*h+l*m)/y/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function dM(t,e){t[4]=e}let fP=class{constructor(e,i=!0,r=!0,n=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=n,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new MC}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},kC=class{constructor(e,i,r,n=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=n,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const KA=.03;let Iy=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,n,s;for(i=e.x,r=e.y;e.nextPoint();i=r,r=s)if(n=e.x,s=e.y,n!==i||s!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,n){const s=r-e,o=n-i;return Math.sqrt(s*s+o*o)}getSegLength(e){const[[i,r],[n,s]]=e;return this.getLength(i,r,n,s)}getCoord2D(e,i,r,n,s){return[e+(r-e)*s,i+(n-i)*s]}getSegCoord2D(e,i){const[[r,n],[s,o]]=e;return this.getCoord2D(r,n,s,o,i)}getAngle(e,i,r,n,s){const o=r-e,a=n-i;return Math.atan2(a,o)}getAngleCS(e,i,r,n,s,o){e==null&&(e=[0,0]);const a=n-i,l=s-r,c=Math.sqrt(a*a+l*l);return c!==0?(e[0]=a/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[n,s],[o,a]]=i;return this.getAngleCS(e,n,s,o,a,r)}cut(e,i,r,n,s,o){return[s<=0?[e,i]:this.getCoord2D(e,i,r,n,s),o>=1?[r,n]:this.getCoord2D(e,i,r,n,o)]}getSubCurve(e,i,r){const n=Hi.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(n,e,i,r)?n:null}appendSubCurve(e,i,r,n){e.startPath(),i.seekPathStart();let s=0,o=!0;if(!i.nextPoint())return!1;let a=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(a,l,i.x,i.y);if(c!==0){if(o){if(s+c>r){const h=(r-s)/c;let m=1,y=!1;s+c>=n&&(m=(n-s)/c,y=!0);const v=this.cut(a,l,i.x,i.y,h,m);if(v&&e.pushPoints(v),y)break;o=!1}}else{if(s+c>n){const h=this.cut(a,l,i.x,i.y,0,(n-s)/c);h&&e.pushPoint(h[1]);break}e.pushXY(i.x,i.y)}s+=c,a=i.x,l=i.y}else a=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,n,s,o,a=0;for(r=e.x,n=e.y;e.nextPoint();r=s,n=o){s=e.x,o=e.y;const l=this.getLength(r,n,s,o);if(l!==0){if(a+l>i){const c=(i-a)/l;return this.getCoord2D(r,n,s,o,c)}a+=l}}return null}offset(e,i,r,n,s){if(!e||e.length<2)return null;let o=0,a=e[o++],l=o;for(;o<e.length;){const y=e[o];y[0]===a[0]&&y[1]===a[1]||(o!==l&&(e[l]=e[o]),a=e[l++]),o++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const h=[];a=c?e[l-1]:null;let m=e[0];for(let y=0;y<l;y++){const v=y===l-1?c?e[0]:null:e[y+1];if(a)if(v){const w=[v[0]-m[0],v[1]-m[1]];this.normalize(w);const x=[m[0]-a[0],m[1]-a[1]];this.normalize(x);const S=x[0]*w[1]-x[1]*w[0],C=x[0]*w[0]+x[1]*w[1];if(S===0&&C===1){m=v;continue}if(S>=0==i<=0){if(C<1){const k=[w[0]-x[0],w[1]-x[1]];this.normalize(k);const A=Math.sqrt((1+C)/2);if(A>1/n){const R=-Math.abs(i)/A;h.push([m[0]-k[0]*R,m[1]-k[1]*R])}}}else switch(r){case Qm.Mitered:{const k=Math.sqrt((1+C)/2);if(k>0&&1/k<n){const A=[w[0]-x[0],w[1]-x[1]];this.normalize(A);const R=Math.abs(i)/k;h.push([m[0]-A[0]*R,m[1]-A[1]*R]);break}}case Qm.Bevelled:h.push([m[0]+x[1]*i,m[1]-x[0]*i]),h.push([m[0]+w[1]*i,m[1]-w[0]*i]);break;case Qm.Rounded:if(C<1){h.push([m[0]+x[1]*i,m[1]-x[0]*i]);const k=Math.floor(2.5*(1-C));if(k>0){const A=1/k;let R=A;for(let D=1;D<k;D++,R+=A){const B=[x[1]*(1-R)+w[1]*R,-x[0]*(1-R)-w[0]*R];this.normalize(B),h.push([m[0]+B[0]*i,m[1]+B[1]*i])}}h.push([m[0]+w[1]*i,m[1]-w[0]*i])}break;case Qm.Square:default:if(S<0)h.push([m[0]+(x[1]+x[0])*i,m[1]+(x[1]-x[0])*i]),h.push([m[0]+(w[1]-w[0])*i,m[1]-(w[0]+w[1])*i]);else{const k=Math.sqrt((1+Math.abs(C))/2),A=[w[0]-x[0],w[1]-x[1]];this.normalize(A);const R=i/k;h.push([m[0]-A[0]*R,m[1]-A[1]*R])}}}else{const w=[m[0]-a[0],m[1]-a[1]];this.normalize(w),h.push([m[0]+w[1]*i,m[1]-w[0]*i])}else{const w=[v[0]-m[0],v[1]-m[1]];this.normalize(w),h.push([m[0]+w[1]*i,m[1]-w[0]*i])}a=m,m=v}return h.length<(c?3:2)?null:(c&&h.push([h[0][0],h[0][1]]),h)}};const R8=1.7320508075688772,myt=5,yyt=eT.OpenEnded;var tp;let gyt=(tp=class{static local(){return tp.instance===null&&(tp.instance=new tp),tp.instance}execute(e,i,r,n,s){return new vyt(e,i,r)}},tp.instance=null,tp),vyt=class extends kC{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Iy,this._width=(i.width!==void 0?i.width:myt)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:yyt,this._offsetFlattenError=KA*r}processPath(e){const i=Hi.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case eT.OpenEnded:default:this._constructSimpleArrow(i,e,!0);break;case eT.Block:this._constructSimpleArrow(i,e,!1);break;case eT.Crossed:this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const n=i.pathLength();let s=this._width;n<2*s&&(s=n/2);const o=this._curveHelper.getSubCurve(i,0,n-s);if(!o||!o.nextPath())return;o.seekPathStart();const a=s/2;if(this._curveHelper.isEmpty(o))return;const l=Uv(o),c=this._constructOffset(l,-a);if(!c)return;const h=this._constructOffset(l,a);if(!h)return;const m=this._constructArrowBasePoint(c,-a/2);if(!m)return;const y=this._constructArrowBasePoint(h,a/2);if(!y)return;i.seekInPath(i.pathSize-1);const v=[i.x,i.y];e.pushPath(h),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoint(v),e.nextPoint(),e.setControlPoint(),e.pushPoint(m),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(h[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let n=this._width;r<n*(1+R8+1)&&(n=r/(1+R8+1)),i.seekPathStart();const s=this._curveHelper.getSubCurve(i,0,r-n*(1+R8));if(!s)return;s.nextPath();const o=n/2;if(this._curveHelper.isEmpty(s))return;const a=Uv(s),l=this._constructOffset(a,o);if(!l)return;const c=this._constructOffset(a,-o);if(!c)return;const h=this._curveHelper.getSubCurve(i,0,r-n);if(!h||(h.nextPath(),this._curveHelper.isEmpty(h)))return;const m=Uv(h),y=this._constructOffset(m,o);if(!y)return;const v=this._constructOffset(m,-o);if(!v)return;const w=y[y.length-1],x=this._constructArrowBasePoint(y,o/2);if(!x)return;const S=v[v.length-1],C=this._constructArrowBasePoint(v,-o/2);if(!C)return;i.seekInPath(i.pathSize-1);const k=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(S),e.nextPoint(),e.setControlPoint(),e.pushPoint(C),e.nextPoint(),e.setControlPoint(),e.pushPoint(k),e.nextPoint(),e.setControlPoint(),e.pushPoint(x),e.nextPoint(),e.setControlPoint(),e.pushPoint(w),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,Qm.Rounded,4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],n=e[e.length-1],s=[n[0]-r[0],n[1]-r[1]];return this._curveHelper.normalize(s),[n[0]+s[1]*i,n[1]-s[0]*i]}};var ip;let byt=(ip=class{static local(){return ip.instance===null&&(ip.instance=new ip),ip.instance}execute(e,i,r,n,s,o,a){return new wyt(e,i,r,n,s,o,a)}},ip.instance=null,ip),wyt=class{constructor(e,i,r,n,s,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._curveHelper=new Iy,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=o*r,this._offsetFlattenError=KA*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const s=Hi.createEmptyOptimizedCIM(e.geometryType),o=QU(e)[0],a=this._curveHelper.offset(o,this._size,Qm.Rounded,4,this._offsetFlattenError);if(a)return s.pushPath(a),s}else if(this._size<0){const s=e.asJSON();if(Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._size>0)return Hi.fromJSONCIM({xmin:s.xmin-this._size,xmax:s.xmax+this._size,ymin:s.ymin-this._size,ymax:s.ymax+this._size})}}const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?fQ(e,this._maxInflateSize,!0):e;if(!r)continue;const n=i.buffer(et.WebMercator,r.asJSON(),this._size,1);return n?Hi.fromJSONCIM(n):null}return null}};var rp;let _yt=(rp=class{static local(){return rp.instance===null&&(rp.instance=new rp),rp.instance}execute(e,i,r,n,s){return new xyt(e,i,r)}},rp.instance=null,rp),xyt=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??Kt.FullGeometry,this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(QU(e));if(i!=null&&i.length)return Hi.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,n){return[e[0]*i+r[0]*n,e[1]*i+r[1]*n]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const n=e[0]*i-e[1]*r,s=e[0]*r+e[1]*i;e[0]=n,e[1]=s}_makeCtrlPt(e){const i=[e[0],e[1]];return dM(i,1),i}_addAngledTicks(e,i,r,n){const s=this._sub(r,i);this._normalize(s);const o=this._crossProduct(s,this._sub(n,i));let a;a=o>0?this._rightPerp(s):this._leftPerp(s);const l=Math.abs(o)/2,c=[];c.push([i[0]+(a[0]-s[0])*l,i[1]+(a[1]-s[1])*l]),c.push(i),c.push(r),c.push([r[0]+(a[0]+s[0])*l,r[1]+(a[1]+s[1])*l]),e.push(c)}_addBezier2(e,i,r,n,s){if(s--===0)return void e.push(n);const o=this._mid(i,r),a=this._mid(r,n),l=this._mid(o,a);this._addBezier2(e,i,o,l,s),this._addBezier2(e,l,a,n,s)}_addBezier3(e,i,r,n,s,o){if(o--===0)return void e.push(s);const a=this._mid(i,r),l=this._mid(r,n),c=this._mid(n,s),h=this._mid(a,l),m=this._mid(l,c),y=this._mid(h,m);this._addBezier3(e,i,a,h,y,o),this._addBezier3(e,y,m,c,s,o)}_add90DegArc(e,i,r,n,s){const o=s??this._crossProduct(this._sub(r,i),this._sub(n,i))>0,a=this._mid(i,r),l=this._sub(a,i);o?this._leftPerpendicular(l):this._rightPerpendicular(l),a[0]+=l[0],a[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,a,.66667),this._mix(r,.33333,a,.66667),r,4)}_addArrow(e,i,r){const n=i[0],s=i[1],o=i[i.length-1],a=this._sub(n,s),l=this._norm(a);this._normalize(a);const c=Math.abs(this._crossProduct(a,this._sub(o,s)));let h=this._dotProduct(a,this._sub(o,s));h<.05*l?h=.05*l:h>.95*l&&(h=.95*l);const m=.5*c,y=this._leftPerp(a),v=[s[0]+a[0]*h,s[1]+a[1]*h],w=i.length-1,x=[];x.push(r?[-y[0],-y[1]]:y);let S=[-a[0],-a[1]];for(let C=1;C<w-1;C++){const k=this._sub(i[C+1],i[C]);this._normalize(k);const A=this._dotProduct(k,S),R=this._crossProduct(k,S),D=Math.sqrt((1+A)/2),B=this._sub(k,S);this._normalize(B),B[0]/=D,B[1]/=D,x.push(R<0?[-B[0],-B[1]]:B),S=k}x.push(this._rightPerp(S));for(let C=x.length-1;C>0;C--)e.push([i[C][0]+x[C][0]*m,i[C][1]+x[C][1]*m]);e.push([v[0]+x[0][0]*m,v[1]+x[0][1]*m]),e.push([v[0]+x[0][0]*c,v[1]+x[0][1]*c]),e.push(n),e.push([v[0]-x[0][0]*c,v[1]-x[0][1]*c]),e.push([v[0]-x[0][0]*m,v[1]-x[0][1]*m]);for(let C=1;C<x.length;C++)e.push([i[C][0]-x[C][0]*m,i[C][1]-x[C][1]*m])}_addDash(e,i,r){const n=this._norm(r)/7;this._normalize(r);let s=[];for(let o=0;o<=7;o++)s.push([i[0]+r[0]*o*n,i[1]+r[1]*o*n]),1&o&&(e.push(s),s=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,n){if(e.length>=3)return e[2];const s=this._mix(e[0],1-r,i,r),o=this._sub(i,e[0]);return this._normalize(o),this._rightPerpendicular(o),[s[0]+o[0]*n*this._defaultSize,s[1]+o[1]*n*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),n=this._sub(i,r);this._normalize(n);const s=this._rightPerp(n);return[i,r,[i[0]+(s[0]-n[0])*this._defaultSize,i[1]+(s[1]-n[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let n;if(e.length>=3)n=e[e.length-1];else{const s=this._sub(i,r);this._normalize(s);const o=this._rightPerp(s);n=[i[0]+(o[0]-s[0])*this._defaultSize,i[1]+(o[1]-s[1])*this._defaultSize]}return[r,n]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const n=r.length>1&&dVe(r)<this._defaultSize;if(!r||r.length===0||n)continue;const s=r.length;let o=r[0];switch(this._rule){case Kt.PerpendicularFromFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=[];c.push(l),c.push(this._mid(o,a)),i.push(c);break}case Kt.ReversedFirstSegment:{const a=this._cp2(r,0,-1);i.push([a,o]);break}case Kt.PerpendicularToSecondSegment:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=[];c.push(this._mid(a,l)),c.push(o),i.push(c);break}case Kt.SecondSegmentWithTicks:{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);let h;h=this._crossProduct(c,this._sub(o,a))>0?this._rightPerp(c):this._leftPerp(c);const m=[];m.push([a[0]+(h[0]-c[0])/3,a[1]+(h[1]-c[1])/3]),m.push(a),m.push(l),m.push([l[0]+(h[0]+c[0])/3,l[1]+(h[1]+c[1])/3]),i.push(m);break}case Kt.DoublePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),h=this._sub(c,l);this._normalize(h);const m=this._crossProduct(h,this._sub(o,l));this._leftPerpendicular(h);const y=[];y.push(o),y.push([l[0]+h[0]*m,l[1]+h[1]*m]),i.push(y);const v=[];v.push([l[0]-h[0]*m,l[1]-h[1]*m]),v.push(a),i.push(v);break}case Kt.OppositeToFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),h=this._sub(c,l);this._normalize(h);const m=this._crossProduct(h,this._sub(o,l));this._leftPerpendicular(h);const y=[];y.push([l[0]+h[0]*m,l[1]+h[1]*m]),y.push([l[0]-h[0]*m,l[1]-h[1]*m]),i.push(y);break}case Kt.TriplePerpendicular:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a),h=this._sub(c,l);this._normalize(h);const m=this._crossProduct(h,this._sub(o,l));this._leftPerpendicular(h);const y=[];y.push([l[0]+h[0]*m*.8,l[1]+h[1]*m*.8]),y.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(y),i.push([l,c]);const v=[];v.push([l[0]-h[0]*m*.8,l[1]-h[1]*m*.8]),v.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(v);break}case Kt.HalfCircleFirstSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a);let h=this._sub(a,o);const m=Math.cos(Math.PI/18),y=Math.sin(Math.PI/18),v=Math.sqrt((1+m)/2),w=Math.sqrt((1-m)/2),x=[];let S;this._crossProduct(h,this._sub(l,o))>0?(x.push(o),h=this._sub(o,c),S=a):(x.push(a),h=this._sub(a,c),S=o),this._rotateDirect(h,v,w),h[0]/=v,h[1]/=v;for(let C=1;C<=18;C++)x.push(this._add(c,h)),this._rotateDirect(h,m,y);x.push(S),i.push(x);break}case Kt.HalfCircleSecondSegment:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,1,-1);let c=this._sub(o,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a))/2;this._leftPerpendicular(c);const m=[a[0]+c[0]*h,a[1]+c[1]*h];c=this._sub(a,m);const y=Math.cos(Math.PI/18);let v=Math.sin(Math.PI/18);h>0&&(v=-v);const w=[a];for(let x=1;x<=18;x++)this._rotateDirect(c,y,v),w.push(this._add(m,c));i.push(w);break}case Kt.HalfCircleExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-1);let c;if(s>=4)c=r[3];else{const x=this._sub(o,a);c=this._add(l,x)}const h=this._dist(a,l)/2/.75,m=this._sub(a,o);this._normalize(m,h);const y=this._sub(l,c);this._normalize(y,h);const v=[c,l];i.push(v);const w=[this._clone(l)];this._addBezier3(w,l,this._add(l,y),this._add(a,m),a,4),w.push(o),i.push(w);break}case Kt.OpenCircle:{const a=this._cp2(r,-2,0),l=this._sub(a,o),c=Math.cos(Math.PI/18),h=-Math.sin(Math.PI/18),m=[a];for(let y=1;y<=33;y++)this._rotateDirect(l,c,h),m.push(this._add(o,l));i.push(m);break}case Kt.CoverageEdgesWithTicks:{const a=this._cp2(r,0,-1);let l,c;if(s>=3)l=r[2];else{const v=this._sub(a,o),w=this._leftPerp(v);l=[o[0]+w[0]-.25*v[0],o[1]+w[1]-.25*v[1]]}if(s>=4)c=r[3];else{const v=this._mid(o,a),w=this._sub(o,a);this._normalize(w),this._leftPerpendicular(w);const x=this._crossProduct(w,this._sub(l,v));this._rightPerpendicular(w),c=[l[0]+w[0]*x*2,l[1]+w[1]*x*2]}const h=this._sub(a,o);let m,y;m=this._crossProduct(h,this._sub(l,o))>0?this._rightPerp(h):this._leftPerp(h),y=[],y.push(l),y.push(o),y.push([o[0]+(m[0]-h[0])/3,o[1]+(m[1]-h[1])/3]),i.push(y),m=this._crossProduct(h,this._sub(c,a))>0?this._rightPerp(h):this._leftPerp(h),y=[],y.push([a[0]+(m[0]+h[0])/3,a[1]+(m[1]+h[1])/3]),y.push(a),y.push(c),i.push(y);break}case Kt.GapExtentWithDoubleTicks:{const a=this._cp2(r,0,2),l=this._cp3(r,a,0,1);let c;if(s>=4)c=r[3];else{const h=this._sub(a,o);c=this._add(l,h)}this._addAngledTicks(i,o,a,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(o,a));break}case Kt.GapExtentMidline:{const a=this._cp2(r,2,0),l=this._cp3(r,a,0,1);let c;if(s>=4)c=r[3];else{const m=this._sub(a,o);c=this._add(l,m)}const h=[];h.push(this._mid(o,l)),h.push(this._mid(a,c)),i.push(h);break}case Kt.Chevron:{const a=this._cp2(r,-1,-1);let l;if(s>=3)l=r[2];else{const c=this._sub(a,o);this._leftPerpendicular(c),l=this._add(o,c)}i.push([a,this._makeCtrlPt(o),l]);break}case Kt.PerpendicularWithArc:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,.5,-1),c=this._sub(a,o),h=this._norm(c);c[0]/=h,c[1]/=h;const m=this._crossProduct(c,this._sub(l,o));let y=this._dotProduct(c,this._sub(l,o));y<.05*h?y=.05*h:y>.95*h&&(y=.95*h);const v=[o[0]+c[0]*y,o[1]+c[1]*y];let w=this._leftPerp(c),x=[];if(x.push([v[0]-w[0]*m,v[1]-w[1]*m]),x.push([v[0]+w[0]*m,v[1]+w[1]*m]),i.push(x),s>=4){const A=r[3];let R=this._dotProduct(c,this._sub(A,o));R<.1*h?R=.1*h:R>.9*h&&(R=.9*h);const D=[o[0]+c[0]*R,o[1]+c[1]*R],B=this._crossProduct(c,this._sub(A,o)),z=[];z.push([D[0]-w[0]*B,D[1]-w[1]*B]),z.push([D[0]+w[0]*B,D[1]+w[1]*B]),i.push(z)}const S=[a[0]+w[0]*m,a[1]+w[1]*m];w=this._sub(a,S);const C=Math.cos(Math.PI/18);let k=Math.sin(Math.PI/18);m<0&&(k=-k),x=[o,a];for(let A=1;A<=9;A++)this._rotateDirect(w,C,k),x.push(this._add(S,w));i.push(x);break}case Kt.ClosedHalfCircle:{const a=this._cp2(r,2,0),l=this._mid(o,a),c=this._sub(a,l),h=Math.cos(Math.PI/18),m=Math.sin(Math.PI/18),y=[o,a];for(let v=1;v<=18;v++)this._rotateDirect(c,h,m),y.push(this._add(l,c));i.push(y);break}case Kt.TripleParallelExtended:{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-2),c=this._mid(o,a),h=this._sub(l,a);this._normalize(h);const m=Math.abs(this._crossProduct(h,this._sub(c,a)))/2,y=this._dist(a,l),v=[a,o];v.push([o[0]+h[0]*y*.5,o[1]+h[1]*y*.5]),i.push(v);const w=[];w.push([c[0]-h[0]*m,c[1]-h[1]*m]),w.push([c[0]+h[0]*y*.375,c[1]+h[1]*y*.375]),dM(w[w.length-1],1),w.push([c[0]+h[0]*y*.75,c[1]+h[1]*y*.75]),i.push(w);const x=[a,l];i.push(x);break}case Kt.ParallelWithTicks:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(l,a);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),this._addAngledTicks(i,o,a,l),this._addAngledTicks(i,this._mix(o,1,c,h),this._mix(a,1,c,h),this._mid(o,a));break}case Kt.Parallel:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._leftPerp(c),m=this._crossProduct(c,this._sub(l,o));let y=[o,a];i.push(y),y=[],y.push([o[0]+h[0]*m,o[1]+h[1]*m]),y.push([a[0]+h[0]*m,a[1]+h[1]*m]),i.push(y);break}case Kt.PerpendicularToFirstSegment:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._mid(o,a),h=this._sub(a,o);this._normalize(h);const m=this._crossProduct(h,this._sub(l,o));this._leftPerpendicular(h);const y=[];y.push([c[0]-h[0]*m*.25,c[1]-h[1]*m*.25]),y.push([c[0]+h[0]*m*1.25,c[1]+h[1]*m*1.25]),i.push(y);break}case Kt.ParallelOffset:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const m=[];m.push([o[0]-c[0]*h,o[1]-c[1]*h]),m.push([a[0]-c[0]*h,a[1]-c[1]*h]),i.push(m);const y=[];y.push([o[0]+c[0]*h,o[1]+c[1]*h]),y.push([a[0]+c[0]*h,a[1]+c[1]*h]),i.push(y);break}case Kt.OffsetOpposite:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const m=[];m.push([o[0]-c[0]*h,o[1]-c[1]*h]),m.push([a[0]-c[0]*h,a[1]-c[1]*h]),i.push(m);break}case Kt.OffsetSame:{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const m=[];m.push([o[0]+c[0]*h,o[1]+c[1]*h]),m.push([a[0]+c[0]*h,a[1]+c[1]*h]),i.push(m);break}case Kt.CircleWithArc:{let a=this._cp2(r,3,0);const l=this._cp3(r,a,.5,-1);let c,h;if(s>=4)c=r[3],h=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;else{c=a,h=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;const x=24*this._geomUnitsPerPoint,S=this._sub(c,o);this._normalize(S,x);const C=Math.sqrt(2)/2;this._rotateDirect(S,C,h?C:-C),a=this._add(o,S)}const m=this._sub(a,o),y=Math.cos(Math.PI/18),v=Math.sin(Math.PI/18),w=[a];for(let x=1;x<=36;x++)this._rotateDirect(m,y,v),w.push(this._add(o,m));this._add90DegArc(w,a,c,l,h),dM(w[w.length-8],1),i.push(w);break}case Kt.DoubleJog:{let a,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(s>=4)a=r[3];else{const k=o;o=l,a=c;const A=this._dist(o,k),R=this._dist(a,k);let D=30*this._geomUnitsPerPoint;.5*A<D&&(D=.5*A),.5*R<D&&(D=.5*R),l=this._mix(o,D/A,k,(A-D)/A),c=this._mix(a,D/R,k,(R-D)/R)}const h=this._mid(o,l),m=this._mid(a,c),y=this._dist(o,l),v=this._dist(c,a);let w=Math.min(y,v)/8;w=Math.min(w,24*this._geomUnitsPerPoint);const x=Math.cos(Math.PI/4);let S=this._sub(o,l);this._normalize(S,w),this._crossProduct(S,this._sub(a,l))>0?this._rotateDirect(S,x,-x):this._rotateDirect(S,x,x);let C=[];C.push(l),C.push(this._add(h,S)),C.push(this._sub(h,S)),C.push(o),i.push(C),S=this._sub(a,c),this._normalize(S,w),this._crossProduct(S,this._sub(o,c))<0?this._rotateDirect(S,x,x):this._rotateDirect(S,x,-x),C=[],C.push(c),C.push(this._add(m,S)),C.push(this._sub(m,S)),C.push(a),i.push(C);break}case Kt.PerpendicularOffset:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],m=this._sub(this._mid(a,l),h);i.push([m,o]);break}case Kt.LineExcludingLastSegment:{const a=this._arrowPath(r),l=[];let c=a.length-2;for(;c--;)l.push(a[c]);i.push(l);break}case Kt.MultivertexArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!1),i.push(l);break}case Kt.CrossedArrow:{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!0),i.push(l);break}case Kt.ChevronArrow:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(o,a),m=this._norm(h);this._normalize(h);const y=this._crossProduct(h,this._sub(l,a));let v=this._dotProduct(h,this._sub(l,a));v<.05*m?v=.05*m:v>.95*m-c&&(v=.95*m-c);const w=[a[0]+h[0]*v,a[1]+h[1]*v],x=this._leftPerp(h),S=[];S.push([w[0]+x[0]*y+h[0]*c,w[1]+x[1]*y+h[1]*c]),S.push(o),S.push([w[0]-x[0]*y+h[0]*c,w[1]-x[1]*y+h[1]*c]),i.push(S);break}case Kt.ChevronArrowOffset:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),h=this._norm(c);this._normalize(c);const m=this._crossProduct(c,this._sub(l,a));let y=this._dotProduct(c,this._sub(l,a));y<.05*h?y=.05*h:y>.95*h&&(y=.95*h);const v=[a[0]+c[0]*y,a[1]+c[1]*y];this._leftPerpendicular(c);const w=[];w.push([v[0]+c[0]*m*.5,v[1]+c[1]*m*.5]),w.push(this._mid(v,o)),w.push([v[0]-c[0]*m*.5,v[1]-c[1]*m*.5]),i.push(w);break}case Kt.PartialFirstSegment:{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),h=this._norm(c);this._normalize(c);let m=this._dotProduct(c,this._sub(l,a));m<.05*h?m=.05*h:m>.95*h&&(m=.95*h);const y=[a[0]+c[0]*m,a[1]+c[1]*m];i.push([a,y]);break}case Kt.Arch:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=this._sub(o,a),h=this._mix(l,1,c,.55),m=this._mix(l,1,c,-.55),y=[o];this._addBezier2(y,o,h,l,4),this._addBezier2(y,l,m,a,4),i.push(y);break}case Kt.CurvedParallelTicks:{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const h=[c[0]/8,c[1]/8],m=this._sub(this._mid(a,l),h),y=this._sub(this._mix(a,.75,l,.25),h),v=this._sub(this._mix(a,.25,l,.75),h),w=[a];this._addBezier2(w,a,y,m,3),this._addBezier2(w,m,v,l,3),i.push(w);for(let x=0;x<8;x++){const S=w[2*x+1],C=[this._clone(S)];C.push(this._add(S,[c[0]/4,c[1]/4])),i.push(C)}break}case Kt.Arc90Degrees:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=[a];this._add90DegArc(c,a,o,l),i.push(c);break}case Kt.TipWithPerpendicularAndTicks:{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,h=this._sub(o,a),m=this._norm(h);this._normalize(h);let y=this._crossProduct(h,this._sub(l,a)),v=this._dotProduct(h,this._sub(l,a));v<.05*m?v=.05*m:v>.95*m-c&&(v=.95*m-c);const w=this._leftPerp(h),x=[o[0]-h[0]*c,o[1]-h[1]*c],S=.5*Math.max(m-v-c,c);y=Math.abs(y);const C=[];C.push([x[0]+w[0]*(y+S)-h[0]*S,x[1]+w[1]*(y+S)-h[1]*S]),C.push([x[0]+w[0]*y,x[1]+w[1]*y]),C.push([x[0]-w[0]*y,x[1]-w[1]*y]),C.push([x[0]-w[0]*(y+S)-h[0]*S,x[1]-w[1]*(y+S)-h[1]*S]),i.push(C),i.push([x,o]);break}case Kt.ConcentricCircles:{const a=this._cp2(r,1,0),l=this._cp3(r,a,2,0),c=Math.cos(Math.PI/18),h=Math.sin(Math.PI/18);let m=this._dist(a,o),y=[m,0],v=[];for(let w=0;w<=36;w++)v.push(this._add(o,y)),this._rotateDirect(y,c,h);if(i.push(v),s>=4){v=[];const w=r[3];m=this._dist(w,o),y=[m,0];for(let x=0;x<=36;x++)v.push(this._add(o,y)),x===0&&(v.push(this._add(o,y)),dM(v[1],1)),this._rotateDirect(y,c,h);i.push(v)}v=[],m=this._dist(l,o),y=[m,0];for(let w=0;w<=36;w++)v.push(this._add(o,y)),this._rotateDirect(y,c,h);i.push(v);break}case Kt.DoubleJogArrow:{o=this._arrowPath(r)[0];const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),h=this._norm(c);this._normalize(c);const m=Math.abs(this._crossProduct(c,this._sub(l,o)));let y=Math.abs(this._dotProduct(c,this._sub(l,o)));y<.05*h?y=.05*h:y>.95*h&&(y=.95*h);const v=Math.max(m,y),w=this._leftPerp(c);let x=[];const S=[o[0]-c[0]*y*.5+w[0]*m*.5,o[1]-c[1]*y*.5+w[1]*m*.5];x.push([S[0],S[1]]),S[0]+=c[0]*v*.5+w[0]*v*.4,S[1]+=c[1]*v*.5+w[1]*v*.4,x.push([S[0],S[1]]),S[0]-=w[0]*v*.25,S[1]-=w[1]*v*.25,x.push([S[0],S[1]]),S[0]+=c[0]*v*.5+w[0]*v*.4,S[1]+=c[1]*v*.5+w[1]*v*.4,x.push([S[0],S[1]]),i.push(x),x=[],S[0]=o[0]-c[0]*y*.5-w[0]*m*.5,S[1]=o[1]-c[1]*y*.5-w[1]*m*.5,x.push([S[0],S[1]]),S[0]+=c[0]*v*.5-w[0]*v*.4,S[1]+=c[1]*v*.5-w[1]*v*.4,x.push([S[0],S[1]]),S[0]+=w[0]*v*.25,S[1]+=w[1]*v*.25,x.push([S[0],S[1]]),S[0]+=c[0]*v*.5-w[0]*v*.4,S[1]+=c[1]*v*.5-w[1]*v*.4,x.push([S[0],S[1]]),i.push(x);break}case Kt.LinkedChevrons:{const a=this._cp2(r,-5,0),l=this._cp3(r,a,-.2,1),c=this._sub(o,a);this._normalize(c);const h=this._leftPerp(c),m=Math.abs(this._crossProduct(c,this._sub(l,a)));i.push([a,o]);const y=[];y.push([o[0]-c[0]*m+h[0]*m,o[1]-c[1]*m+h[1]*m]),y.push(o),y.push([o[0]-c[0]*m-h[0]*m,o[1]-c[1]*m-h[1]*m]),i.push(y),this._addDash(i,a,[-c[0]*m+h[0]*m,-c[1]*m+h[1]*m]),this._addDash(i,a,[-c[0]*m-h[0]*m,-c[1]*m-h[1]*m]);break}case Kt.SegmentThenHalfCircle:{const a=this._cp2(r,2,0),l=this._cp3(r,a,1.5,0);let c;c=s>=4?r[3]:this._cp3(r,a,1.25,-.5);const h=this._sub(a,o);this._normalize(h);const m=.5*this._dist(a,l),y=this._crossProduct(h,this._sub(c,o))>0,v=Math.cos(Math.PI/18);let w=Math.sin(Math.PI/18);y&&(w=-w);const x=[o,a];h[0]*=m,h[1]*=m;const S=this._add(a,h);h[0]=-h[0],h[1]=-h[1];for(let C=1;C<=18;C++)this._rotateDirect(h,v,w),x.push(this._add(S,h));i.push(x);break}case Kt.LineWithStraightTicks:{const a=this._cp2(r,-2,1),l=this._cp3(r,a,-1,-.5),c=this._sub(l,a);this._normalize(c);const h=this._dotProduct(c,this._sub(a,o)),m=this._dotProduct(c,this._sub(l,o));let y=[o];y.push([o[0]+c[0]*h,o[1]+c[1]*h]),y.push(a),i.push(y),y=[o],y.push([o[0]+c[0]*m,o[1]+c[1]*m]),y.push(l),i.push(y);break}case Kt.DoubleCurve:{const a=this._cp2(r,-5,-1),l=this._cp3(r,a,2,0),c=Math.atan2(1,5),h=Math.cos(c),m=Math.sin(c),y=this._sub(a,o),v=this._dist(o,a);this._normalize(y),this._rotateDirect(y,h,-m);const w=[o];w.push([o[0]+y[0]*v*.5,o[1]+y[1]*v*.5]),dM(w[1],1),w.push([o[0]+y[0]*v*.8,o[1]+y[1]*v*.8]),this._addBezier2(w,w[2],[o[0]+y[0]*v,o[1]+y[1]*v],a,3);const x=this._sub(l,a),S=this._dist(a,l);this._normalize(x),this._rotateDirect(x,h,-m),this._addBezier2(w,a,[l[0]-x[0]*S,l[1]-x[1]*S],[l[0]-x[0]*S*.8,l[1]-x[1]*S*.8],3),w.push(l),i.push(w);break}case Kt.ParallelWithTicksByWidth:{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._sub(a,o);this._normalize(c);const h=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),h>0?(this._addAngledTicks(i,o,[o[0]+c[0]*h,o[1]+c[1]*h],a),this._addAngledTicks(i,a,[a[0]+c[0]*h,a[1]+c[1]*h],o)):(this._addAngledTicks(i,[o[0]+c[0]*h,o[1]+c[1]*h],o,a),this._addAngledTicks(i,[a[0]+c[0]*h,a[1]+c[1]*h],o,a));break}case Kt.EnclosingRoundedRectangle:{const a=this._cp2(r,3,-2),l=[Math.min(o[0],a[0]),Math.max(o[1],a[1])],c=[Math.max(o[0],a[0]),Math.min(o[1],a[1])],h=c[0]-l[0],m=l[1]-c[1],y=Math.min(h,m)/10,v=[];v.push([l[0]+y+.75*(h-2*y),l[1]]),v.push([c[0]-y,l[1]]),this._add90DegArc(v,[c[0]-y,l[1]],[c[0],l[1]-y],[c[0],l[1]]),v.push([c[0],c[1]+y]),this._add90DegArc(v,[c[0],c[1]+y],[c[0]-y,c[1]],c),v.push([l[0]+y,c[1]]),this._add90DegArc(v,[l[0]+y,c[1]],[l[0],c[1]+y],[l[0],c[1]]),v.push([l[0],l[1]-y]),this._add90DegArc(v,[l[0],l[1]-y],[l[0]+y,l[1]],l),v.push([l[0]+y+.75*(h-2*y),l[1]]);break}case Kt.FullGeometry:default:i.push(r)}}return i}};var np;let Syt=(np=class{static local(){return np.instance===null&&(np.instance=new np),np.instance}execute(e,i,r,n,s){return new $yt(e,i,r)}},np.instance=null,np),$yt=class extends kC{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new Iy,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:n}=this,s=e.pathLength(),o=Hi.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||n!==0)if(i+r+n>=s)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(o,e,0,i),this._curveHelper.appendSubCurve(o,e,.5*(s-n),.5*(s+n)),this._curveHelper.appendSubCurve(o,e,s-r,r)}else if(i===0&&r===0&&n===0)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else i+r+n<s&&(n===0?this._curveHelper.appendSubCurve(o,e,i,s-r):(this._curveHelper.appendSubCurve(o,e,i,.5*(s-n)),this._curveHelper.appendSubCurve(o,e,.5*(s+n),s-r)));return o.totalSize===0?null:o}};const upe=1e-7;let aj=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let n=0;n<e.length;n++){let s=Math.abs(e[n]);r&&s<upe&&(s=upe),this._values.push(s),this._length+=s}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},Am=class{constructor(){this.pt=null,this.ca=0,this.sa=0}};var vv;(function(t){t[t.FAIL=0]="FAIL",t[t.END=1]="END",t[t.CONTINUE=2]="CONTINUE"})(vv||(vv={}));let c3=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},lj=class extends Iy{constructor(e=0,i=!1){super(e,i),this._tempPos=new c3,this._tempPt=[0,0],this._tolerance=KA,this._currentPosition=new c3}updateTolerance(e){this._tolerance=KA*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=vv.FAIL){const r=new c3;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=vv.FAIL){const n=this._tempPos;if(!this._nextPosition(e,n,null,r))return!1;n.copyTo(this._currentPosition),i.pt=this._getPoint(n);const[s,o]=this._getAngleCS(this._tempPt,n);return i.ca=s,i.sa=o,!0}nextCurve(e){if(e===0)return null;const i=Hi.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new c3;return this._nextPosition(e,r,i,vv.END)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,n){if(this._currentPosition.isPathEnd)return!1;let s=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(s/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(s===0){const a=i.segment[0];r.pushXY(a[0],a[1])}else r.pushPoint(this.getSegCoord2D(i.segment,s));const o=i.segment[1];r.pushXY(o[0],o[1])}if(s=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==vv.FAIL&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,n===vv.END?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(s===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,s)));const o=i.abscissa/i.segmentLength;o===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,o))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,s=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let o=Math.round((this._partLength-(n+s))/this._patternLength);o<=0&&(o=n+s>0?0:1),this._partLengthRatio=this._partLength/(n+s+o*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var sp;let Tyt=(sp=class{static local(){return sp.instance===null&&(sp.instance=new sp),sp.instance}execute(e,i,r,n,s){return new Eyt(e,i,r)}},sp.instance=null,sp),Eyt=class extends kC{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new lj,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let n=vEe(i).dashTemplate;n==null&&(n=[]),n.length%2&&(n=[...n,...n]),this._pattern=new aj,this._pattern.init(n,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const n=Uv(e);return Hi.fromJSONCIM({paths:[n]})}if(!this.iteratePath){let n=!0;switch(this._endings){case So.HalfPattern:case So.HalfGap:default:this._pattern.extPtGap=0;break;case So.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case So.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case So.NoConstraint:this.isClosed||(n=!1);break;case So.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=e.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){const o=Uv(e);return Hi.fromJSONCIM({paths:[o]})}if(!this._walker.init(e,this._pattern,n)){const o=Uv(e);return Hi.fromJSONCIM({paths:[o]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let n;switch(this._endings){case So.HalfPattern:default:n=.5*this._pattern.firstValue();break;case So.HalfGap:n=.5*-this._pattern.lastValue();break;case So.FullGap:n=-this._pattern.lastValue();break;case So.FullPattern:n=0;break;case So.NoConstraint:case So.Custom:n=-this._customDashPos}let s=n/this._pattern.length();s-=Math.floor(s),n=s*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let o=!1;for(;n>=i;)n-=i,i=this._pattern.nextValue(),o=!o;i-=n,o?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r==null||r.reset(),r}};var op;let Cyt=(op=class{static local(){return op.instance===null&&(op.instance=new op),op.instance}execute(e,i,r,n,s,o,a){return new Iyt(e,i,r,n,s,o,a)}},op.instance=null,op),Iyt=class{constructor(e,i,r,n,s,o,a){switch(this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._maxInflateSize=o*r,this._width=(i.width!==void 0?i.width:2)*r,i.method){case Rw.Mitered:case Rw.Bevelled:case Rw.Rounded:case Rw.TrueBuffer:case Rw.Square:}this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Hi.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=this._geometryEngine;if(i==null)return null;const r=!this._preventClipping&&this._tileKey?fQ(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n=i.buffer(et.WebMercator,r.asJSON(),-this._width,1);if(n){for(const s of n.rings)if(s){r.startPath();for(const o of s.reverse())r.pushXY(o[0],r.yFactor*o[1])}}return r}}return null}};var ap;let Myt=(ap=class{static local(){return ap.instance===null&&(ap.instance=new ap),ap.instance}execute(e,i,r,n,s){return new kyt(e,i,r,s)}},ap.instance=null,ap),kyt=class{constructor(e,i,r,n){this._inputGeometries=e,this._medhod=i.method,this._geometryEngine=n}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case BF.RectangularBox:return Ayt(e);case BF.ConvexHull:return this._constructConvexHull(e);default:return Oyt(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=this._geometryEngine;if(i==null)return null;const r=i.convexHull(et.WebMercator,e.asJSON());return r?Hi.fromJSONCIM(r):null}case"esriGeometryEnvelope":return e;default:return null}}};function Ayt(t){const e=qO(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Hi.fromJSONCIM(i)}function Oyt(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)Pyt(t,e);return Hi.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function Pyt(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,n=[[i,r]];for(e.push(n);t.nextPoint();)n.push([t.x,t.y]);n.push([i,r])}var lp;let Lyt=(lp=class{static local(){return lp.instance===null&&(lp.instance=new lp),lp.instance}execute(e,i,r,n,s){return new Ryt(e,i,r)}},lp.instance=null,lp),Ryt=class extends kC{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Iy,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Hi.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,n=e.y;e.seekInPath(e.pathSize-1);const s=e.x,o=e.y,a=[s-r,o-n];this._curveHelper.normalize(a);const l=r+(s-r)*this._position/100,c=n+(o-n)*this._position/100,h=Math.cos((90-this._angle)/180*Math.PI);let m=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(m=-m),this._mirror=!this._mirror;const y=[l-this._length/2*h,c-this._length/2*m],v=[l+this._length/2*h,c+this._length/2*m];return i.pushPath([[r,n],y,v,[s,o]]),i}};var cp;let Dyt=(cp=class{static local(){return cp.instance===null&&(cp.instance=new cp),cp.instance}execute(e,i,r,n,s){return new Nyt(e,i,r)}},cp.instance=null,cp),Nyt=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const zyt=10;var up;let Fyt=(up=class{static local(){return up.instance===null&&(up.instance=new up),up.instance}execute(e,i,r,n,s,o,a){return new Uyt(e,i,r,n,s,o,a)}},up.instance=null,up),Uyt=class{constructor(e,i,r,n,s,o,a){this._preventClipping=a,this._inputGeometries=e,this._tileKey=n,this._geometryEngine=s,this._curveHelper=new Iy,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(o*r),zyt),this._option=i.option,this._offsetFlattenError=KA*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method===Qm.Rounded&&this._offset>0){const o=Uv(e),a=this._curveHelper.offset(o,-this._offset,this._method,4,this._offsetFlattenError);if(a){const l=Hi.createEmptyOptimizedCIM(e.geometryType);return l.pushPath(a),l}return null}const s=e.asJSON();if(Pa(s)&&Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._offset>0)return Hi.fromJSONCIM({xmin:s.xmin-this._offset,xmax:s.xmax+this._offset,ymin:s.ymin-this._offset,ymax:s.ymax+this._offset})}const i=this._geometryEngine;if(i==null)continue;const r=!this._preventClipping&&this._tileKey?fQ(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const n=i.offset(et.WebMercator,r.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return n?Hi.fromJSONCIM(n):null}return null}};var dp;let jyt=(dp=class{static local(){return dp.instance===null&&(dp.instance=new dp),dp.instance}execute(e,i,r,n,s){return new Vyt(e,i,r)}},dp.instance=null,dp),Vyt=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:Jn.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:Jn.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Hi.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=Jbe(e);if(!i)return null;const r=Hi.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var hp;let Byt=(hp=class{static local(){return hp.instance===null&&(hp.instance=new hp),hp.instance}execute(e,i,r,n,s){return new Gyt(e,i,r)}},hp.instance=null,hp),Gyt=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return Hyt(e.clone());e=this._inputGeometries.next()}return null}};function Hyt(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const n=t.x,s=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=n,t.y=s}return t.reset(),t}var pp;let qyt=(pp=class{static local(){return pp.instance===null&&(pp.instance=new pp),pp.instance}execute(e,i,r,n,s){return new Wyt(e,i,r)}},pp.instance=null,pp),Wyt=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=qO(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,n)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const n=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const o=e.x-i,a=e.y-r;e.x=i+o*n-a*s,e.y=r+o*s+a*n}return e.reset(),e}};var fp;let Jyt=(fp=class{static local(){return fp.instance===null&&(fp.instance=new fp),fp.instance}execute(e,i,r,n,s){return new Zyt(e,i,r)}},fp.instance=null,fp),Zyt=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=qO(e),r=(i[2]+i[0])/2,n=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,n)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},IJ=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce((e,i)=>e+i.length,0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var mp;let Yyt=(mp=class{static local(){return mp.instance===null&&(mp.instance=new mp),mp.instance}execute(e,i,r,n,s){return new Xyt(e,i,r)}},mp.instance=null,mp),Xyt=class extends kC{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const v=Hi.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)v.pushXY(e.x,e.y);return v}const i=[],r=new Array(e.pathSize);let n=0;for(e.seekPathStart();e.nextPoint();)r[n++]=e.getControlPoint(),i.push([e.x,e.y]);let s=!0,o=!0,a=!1,l=!this._invert;n=0;const c=new IJ;let h=i[0];for(;n<i.length;){const v=i[n+1],w=r[n],x=r[n+1];n++,o&&(l=w||x?this._invert:!this._invert,o=!1),l?(c.addSegment(h,v,s),s=!1):a=!0,h=v,x&&(l?(l=!1,s=!0):l=!0)}const m=c.getGeometry();if(m.length===0)return null;if(!a&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const v=m[m.length-1];return v[0][0]===v[v.length-1][0]&&v[0][1]===v[v.length-1][1]||v.push([v[0][0],v[0][1]]),Hi.fromJSONCIM({paths:m})}const y=m[m.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&y[0][0]===y[y.length-1][0]&&y[0][1]===y[y.length-1][1]&&m.length>1&&(m[m.length-1].push(...m[0]),m.splice(0,1)),Hi.fromJSONCIM({paths:m})}};function dpe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function XCe(t,e){return Math.sqrt(t*t+e*e)}function hpe(t){const e=XCe(t[0],t[1]);t[0]/=e,t[1]/=e}function Kyt(t,e){return XCe(t[0]-e[0],t[1]-e[1])}function Qyt(t,e){return t[e+1]}function KCe(t){return t.length-1}function egt(t){let e=0;for(let i=0;i<KCe(t);i++)e+=tgt(t,i);return e}function tgt(t,e,i=1){let[r,n]=Qyt(t,e);return[r,n]=[Math.round(r),Math.round(n)],Math.sqrt(r*r+n*n)*i}let MJ=class kJ{constructor(e,i,r,n,s){this._segments=e,this._index=i,this._distance=r,this._xStart=n,this._yStart=s,this._done=!1}static create(e){return new kJ(e,0,0,e[0][0],e[0][1])}clone(){return new kJ(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(e){return this._index===e._index||e._index===this._index-1&&(this._distance===0||e._distance===1)||e._index===this._index+1&&(this._distance===1||e._distance===0)}leq(e){return this._index<e._index||this._index===e._index&&this._distance<=e._distance}geq(e){return this._index>e._index||this._index===e._index&&this._distance>=e._distance}get _segment(){return this._segments[this._index+1]}get angle(){const e=this.dy,i=(0*e+-1*-this.dx)/(1*this.length);let r=Math.acos(i);return e>0&&(r=2*Math.PI-r),r}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:e,dy:i}=this;return Math.sqrt(e*e+i*i)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<KCe(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(e,i){const r=this.backwardLength;if(e<=r)return this._distance=(r-e)/this.length,this;let n=this.backwardLength;for(;this.prev();){if(n+this.length>e)return this._seekBackwards(e-n);n+=this.length}return this._distance=0,i?this:null}seek(e,i=!1){if(e<0)return this._seekBackwards(Math.abs(e),i);if(e<=this.remainingLength)return this._distance=(this.backwardLength+e)/this.length,this;let r=this.remainingLength;for(;this.next();){if(r+this.length>e)return this.seek(e-r,i);r+=this.length}return this._distance=1,i?this:null}};function MDt(t,e,i,r=!0){const n=egt(t),s=MJ.create(t),o=n/2;if(!r)return s.seek(o),void(s.x<T$&&s.y<T$&&s.x>0&&s.y>0&&i(s.clone(),0,o+0*e,n));const a=Math.max((n-e)/2,0),l=Math.floor(a/e),c=o-l*e;s.seek(c);for(let h=-l;h<=l;h++)s.x<T$&&s.y<T$&&s.x>0&&s.y>0&&i(s.clone(),h,o+h*e,n),s.seek(e)}function kDt(t,e){const i=e;for(let r=0;r<t.length;r++){let n=t[r];igt(n,i);const s=[];s.push(n[0]);for(let o=1;o<n.length;o++){const[a,l]=n[o-1],[c,h]=n[o],m=c-a,y=h-l;s.push([m,y])}t[r]=s,n=s}return t}function igt(t,e){if(e<=0)return;const r=t.length;if(r<3)return;const n=[];let s=0;n.push(0);for(let m=1;m<r;m++)s+=Kyt(t[m],t[m-1]),n.push(s);e=Math.min(e,.2*s);const o=[];o.push(t[0][0]),o.push(t[0][1]);const a=t[r-1][0],l=t[r-1][1],c=dpe([0,0],t[0],t[1]);hpe(c),t[0][0]+=e*c[0],t[0][1]+=e*c[1],dpe(c,t[r-1],t[r-2]),hpe(c),t[r-1][0]+=e*c[0],t[r-1][1]+=e*c[1];for(let m=1;m<r;m++)n[m]+=e;n[r-1]+=e;const h=.5*e;for(let m=1;m<r-1;m++){let y=0,v=0,w=0;for(let x=m-1;x>=0&&!(n[x+1]<n[m]-h);x--){const S=h+n[x+1]-n[m],C=n[x+1]-n[x],k=n[m]-n[x]<h?1:S/C;if(Math.abs(k)<1e-6)break;const A=k*k,R=k*S-.5*A*C,D=k*C/e,B=t[x+1],z=t[x][0]-B[0],W=t[x][1]-B[1];y+=D/R*(B[0]*k*S+.5*A*(S*z-C*B[0])-A*k*C*z/3),v+=D/R*(B[1]*k*S+.5*A*(S*W-C*B[1])-A*k*C*W/3),w+=D}for(let x=m+1;x<r&&!(n[x-1]>n[m]+h);x++){const S=h-n[x-1]+n[m],C=n[x]-n[x-1],k=n[x]-n[m]<h?1:S/C;if(Math.abs(k)<1e-6)break;const A=k*k,R=k*S-.5*A*C,D=k*C/e,B=t[x-1],z=t[x][0]-B[0],W=t[x][1]-B[1];y+=D/R*(B[0]*k*S+.5*A*(S*z-C*B[0])-A*k*C*z/3),v+=D/R*(B[1]*k*S+.5*A*(S*W-C*B[1])-A*k*C*W/3),w+=D}o.push(y/w),o.push(v/w)}o.push(a),o.push(l);for(let m=0,y=0;m<r;m++)t[m][0]=o[y++],t[m][1]=o[y++]}const hM=()=>Ce.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var yp;let rgt=(yp=class{static local(){return yp.instance===null&&(yp.instance=new yp),yp.instance}execute(e,i,r,n,s){return new ngt(e,i,r,n,s)}},yp.instance=null,yp),ngt=class extends kC{constructor(e,i,r,n,s){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new yi(NaN,NaN),this._lastWidth=0,this._tileKey=null,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0,this._tileKey=n,this._geometryEngine=s}processPath(e){var w,x;if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const S=Hi.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)S.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)S.pushXY(e.x,e.y);return S}const i=[];e.seekPathStart();let r=0,n=0;for(;e.nextPoint();)i.push([e.x-r,e.y-n]),r=e.x,n=e.y;let s=(w=this._geometryEngine)==null?void 0:w.simplify(et.WebMercator,{paths:[i]});s||this._tileKey!=null||(s={paths:[i]});const o=Hn(s)?s.rings:Eo(s)?s.paths:null;if(!o)return hM().error(new Q("mapview-bad-resource","Unable to process geometry")),null;const a=new IJ,l=new IJ;let c=0;for(const S of o){r=S[0][0],n=S[0][1];for(let C=1;C<S.length;C++){const k=r+S[C][0],A=n+S[C][1];c+=Math.sqrt((k-r)*(k-r)+(A-n)*(A-n)),r=k,n=A}}if(this._originalLength===0||this._originalLength>c){this._length=c;const S=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(S)<1){const C=S*S;this._slopeC=Math.sqrt(1/(1+C)),this._slopeS=Math.sqrt(C/(1+C)),S<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;let h=0;const m=[];for(const S of o){const C=MJ.create(S),k=MJ.create(S);this._setFromOffset(k,a,l);let A=k.next(),R=C;for(;A&&R;)h=this._setOffset(R,A,h,a,l),R=C.next(),A=k.next();R=C,R&&this._setToOffset(R,h,a,l);const D=a.getGeometry(),B=l.getGeometry(),z=[];for(const W of D)z.push(...W);for(let W=B.length-1;W>=0;W--){const Y=B[W];for(let ee=Y.length-1;ee>=0;ee--)z.push(Y[ee])}m.push(z)}const y={rings:m};hVe(y);let v=(x=this._geometryEngine)==null?void 0:x.simplify(et.WebMercator,y);if(!v){if(this._tileKey!=null)return null;v=y}return Hi.fromJSONCIM(v)}_setFromOffset(e,i,r){const n=this._halfFromWidth,s=new yi(e.xEnd-e.xStart,e.yEnd-e.yStart);s.normalize(),s.scale(n),i.beginPath([e.xStart-s.y,e.yStart+s.x]),r.beginPath([e.xStart+s.y,e.yStart-s.x])}_setToOffset(e,i,r,n){let s;s=(i+=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart)))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*i/this._length;const o=new yi(e.xEnd-e.xStart,e.yEnd-e.yStart);o.normalize(),o.scale(s),r.lineTo([e.xEnd-o.y,e.yEnd+o.x]),n.lineTo([e.xEnd+o.y,e.yEnd-o.x])}_setOffset(e,i,r,n,s){const o=Math.sqrt((e.xEnd-e.xStart)*(e.xEnd-e.xStart)+(e.yEnd-e.yStart)*(e.yEnd-e.yStart));let a;a=r+o>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(r+o)/this._length,r+=o;const l=new yi(e.xEnd,e.yEnd),c=new yi(e.xEnd-e.xStart,e.yEnd-e.yStart);c.normalize();const h=new yi(i.xEnd-i.xStart,i.yEnd-i.yStart);h.normalize();const m=c.x*h.y-c.y*h.x;let y;y=Math.abs(m)===0?new yi(h.x,h.y):new yi((h.x-c.x)/m,(h.y-c.y)/m);const v=n.getPointCount(),w=s.getPointCount();c.leftPerpendicular(),h.leftPerpendicular();const x=c.x*h.x+c.y*h.y;if(x>.99){const S=new yi((c.x+h.x)*a/2,(c.y+h.y)*a/2),C=S.clone();C.rotate(this._slopeC,this._slopeS),n.lineTo([l.x+C.x,l.y+C.y]);const k=S.clone();k.rotateReverse(this._slopeC,this._slopeS),s.lineTo([l.x-k.x,l.y-k.y])}else{if(m<0){const D=y.clone().scale(-a);D.rotateReverse(this._slopeC,this._slopeS);const B=s.getXY(w-1);B||hM().error(new Q("mapview-bad-resource","Unable to process geometry, index out of scope"));const z=yi.add(l,D),W=yi.sub(z,yi.fromArray(B));if(c.x*W.y-c.y*W.x>0){const Y=new yi(-c.x*a,-c.y*a);Y.rotateReverse(this._slopeC,this._slopeS);const ee=new yi(-h.x*a,-h.y*a);ee.rotateReverse(this._slopeC,this._slopeS),s.lineTo([l.x+Y.x,l.y+Y.y]),s.lineTo([l.x,l.y]),s.lineTo([l.x+ee.x,l.y+ee.y])}else s.lineTo([l.x+D.x,l.y+D.y])}else{const D=y.clone().scale(a);D.rotate(this._slopeC,this._slopeS);const B=n.getXY(v-1);B||hM().error(new Q("mapview-bad-resource","Unable to process geometry, index out of scope"));const z=yi.add(l,D),W=yi.sub(z,yi.fromArray(B));if(c.x*W.y-c.y*W.x>0){const Y=c.clone().scale(a);Y.rotate(this._slopeC,this._slopeS);const ee=h.clone().scale(a);ee.rotate(this._slopeC,this._slopeS),n.lineTo([l.x+Y.x,l.y+Y.y]),n.lineTo([l.x,l.y]),n.lineTo([l.x+ee.x,l.y+ee.y])}else n.lineTo([l.x+D.x,l.y+D.y])}const S=Math.acos(x);let C=1;if(a>.25){const D=2*Math.acos(1-.25/a);D<S&&(C=Math.round(S/D))}const k=Math.cos(S/C),A=Math.sin(S/C),R=c.clone();if(m<0){R.rotate(this._slopeC,this._slopeS);const D=n.getXY(v-1);D||hM().error(new Q("mapview-bad-resource","Unable to process geometry, index out of scope"));const B=yi.add(l,R.clone().scale(this._lastWidth)),z=yi.sub(B,yi.fromArray(D)),W=c.x*z.y-c.y*z.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&W>0){const Y=new yi(e.xStart,e.yStart),ee=this._lastTangent1.clone().scale(this._lastWidth);ee.rotate(this._slopeC,this._slopeS);const ge=c.clone().scale(this._lastWidth);ge.rotate(this._slopeC,this._slopeS),n.lineTo([Y.x+ee.x,Y.y+ee.y]),n.lineTo([Y.x,Y.y]),n.lineTo([Y.x+ge.x,Y.y+ge.y])}}else{R.scale(-1).rotateReverse(this._slopeC,this._slopeS);const D=s.getXY(w-1);D||hM().error(new Q("mapview-bad-resource","Unable to process geometry, index out of scope"));const B=yi.add(l,R.clone().scale(this._lastWidth)),z=yi.sub(B,yi.fromArray(D)),W=c.x*z.y-c.y*z.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&W>0){const Y=new yi(e.xStart,e.yStart),ee=this._lastTangent1.clone().scale(-this._lastWidth);ee.rotateReverse(this._slopeC,this._slopeS);const ge=c.clone().scale(-this._lastWidth);ge.rotateReverse(this._slopeC,this._slopeS),s.lineTo([Y.x+ee.x,Y.y+ee.y]),s.lineTo([Y.x,Y.y]),s.lineTo([Y.x+ge.x,Y.y+ge.y])}}R.scale(a);for(let D=0;D<=C;D++)m<0?(n.lineTo([l.x+R.x,l.y+R.y]),R.rotateReverse(k,A)):(s.lineTo([l.x+R.x,l.y+R.y]),R.rotate(k,A))}return this._lastTangent1.setCoords(c.x,c.y),this._lastWidth=a,r}};var gp;let sgt=(gp=class{static local(){return gp.instance===null&&(gp.instance=new gp),gp.instance}execute(e,i,r,n,s){return new ogt(e,i,r)}},gp.instance=null,gp),ogt=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new aj,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new lj,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Hi.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case M$.Sinus:default:this._constructCurve(i,r,!1);break;case M$.Square:this._constructSquare(i,r);break;case M$.Triangle:this._constructTriangle(i,r);break;case M$.Random:this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let n=Math.round(i/this._period);n===0&&(n=1);const s=n*16+1,o=i/n,a=this._period/16,l=1/s,c=2*Math.PI*i/o,h=2*Math.PI*Math.random(),m=2*Math.PI*Math.random(),y=2*Math.PI*Math.random(),v=.75-Math.random()/2,w=.75-Math.random()/2,x=new Am;this._walker.curPointAndAngle(x),e.pushPoint(x.pt);let S=0;for(;;){if(!this._walker.nextPointAndAngle(a,x)){e.pushPoint(this._walker.getPathEnd());break}{const C=S;let k;if(S+=l,r){const A=this._height/2*(1+.3*Math.sin(v*c*C+h));k=A*Math.sin(c*C+m),k+=A*Math.sin(w*c*C+y),k/=2}else k=.5*this._height*Math.sin(.5*c*C);e.pushXY(x.pt[0]-k*x.sa,x.pt[1]+k*x.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new Am;this._walker.curPointAndAngle(s);const o=new Am;if(this._walker.nextPointAndAngle(this._period,o)){const a=new Am;this._walker.nextPointAndAngle(this._period,a)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let n=!1;if(this._walker.curPositionIsValid()){const s=new Am;this._walker.curPointAndAngle(s);const o=new Am;if(this._walker.nextPointAndAngle(this._period/2,o)){const a=new Am;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(s.pt),r=!1):e.pushPoint(s.pt),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca)),n=!0)}}if(!n){e.pushPoint(this._walker.getPathEnd());break}}}};var vp;let agt=(vp=class{static local(){return vp.instance===null&&(vp.instance=new vp),vp.instance}execute(e,i,r,n,s){return new lgt(e,i,r)}},vp.instance=null,vp),lgt=class extends fP{constructor(e,i,r){super(e),this._geometryWalker=new lj,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new aj,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings===md.WithFullGap&&this.isClosed?this._endings=md.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let n,s=!0;switch(this._endings){case md.NoConstraint:n=-this._position,n=this._adjustPosition(n),s=!1;break;case md.WithHalfGap:default:n=-this._pattern.lastValue()/2;break;case md.WithFullGap:n=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case md.WithMarkers:n=0;break;case md.Custom:n=-this._position,n=this._adjustPosition(n),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,s))return null;this._pattern.reset();let o=0;for(;n>o;)n-=o,o=this._pattern.nextValue();o-=n,i=o,this.iteratePath=!0}const r=new Am;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings===md.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===md.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var bp;let cgt=(bp=class{static local(){return bp.instance===null&&(bp.instance=new bp),bp.instance}execute(e,i,r,n,s){return new ugt(e,i,r)}},bp.instance=null,bp),ugt=class extends fP{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Iy,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case Ip.Both:default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case Ip.JustBegin:i=this._atExtremities(e,this._position,!0);break;case Ip.JustEnd:i=this._atExtremities(e,this._position,!1);case Ip.None:}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let n=0,[s,o]=[0,0],[a,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){s=a,o=l,a=e.x,l=e.y;const h=this._curveHelper.getLength(s,o,a,l);if(n+h>i){const m=(i-n)/h,[y,v]=this._curveHelper.getAngleCS(c,s,o,a,l,m),w=this._curveHelper.getCoord2D(s,o,a,l,m);return this.internalPlacement.setTranslate(w[0]-this._offset*v,w[1]+this._offset*y),this._angleToLine&&this.internalPlacement.setRotateCS(-y,-v),this.internalPlacement}n+=h}}return null}};var wp;let dgt=(wp=class{static local(){return wp.instance===null&&(wp.instance=new wp),wp.instance}execute(e,i,r,n,s){return new hgt(e,i,r)}},wp.instance=null,wp),hgt=class extends fP{constructor(e,i,r){super(e),this._walker=new lj,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new aj,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new Am;if(!this._walker.nextPointAndAngle(i,r,vv.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const n=this._isFirst&&this._flipFirst;let s,o;return this._angleToLine?(s=r.ca,o=r.sa):(s=1,o=0),n&&(s=-s,o=-o),this.internalPlacement.setRotateCS(s,o),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const xg=512,pgt=10,ch=24,s5=1e-6;var _p;let fgt=(_p=class{static local(){return _p.instance===null&&(_p.instance=new _p),_p.instance}execute(e,i,r,n,s){return new mgt(e,i,r,n,s)}},_p.instance=null,_p),mgt=class gw{constructor(e,i,r,n,s){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??Nk.Fixed,this._gridType===Nk.Random){const o=i.seed??13,a=1;this._randomLCG=new xY(o*a),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,n!=null){const[o,a,l,c]=n.split("/"),h=parseFloat(o),m=parseFloat(a),y=parseFloat(l),v=parseFloat(c);this._graphicOriginX=-(v*2**h+y)*xg,this._graphicOriginY=m*xg,this._testInsidePolygon=!0}this._internalPlacement=new MC,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!gw._randValues){gw._randValues=[];for(let e=0;e<ch;e++)for(let i=0;i<ch;i++)gw._randValues.push(this._randomLCG.getFloat()),gw._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,n,s,o,a,l,c,h,m,y,v,w,x;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=w=y=Number.MAX_VALUE,h=m=x=v=-Number.MAX_VALUE;const S=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)a=e.x,o=e.y,i=a-this._graphicOriginX-this._offsetX,r=o-this._graphicOriginY-this._offsetY,S?(n=this._cosAngle*i-this._sinAngle*r,s=this._sinAngle*i+this._cosAngle*r):(n=i,s=r),l=Math.min(l,n),h=Math.max(h,n),c=Math.min(c,s),m=Math.max(m,s),y=Math.min(y,o),v=Math.max(v,o),w=Math.min(w,a),x=Math.max(x,a);y=y!==Number.MAX_VALUE?y:-xg-this._stepY,v=v!==-Number.MAX_VALUE?v:this._stepY,w=w!==Number.MAX_VALUE?w:-this._stepX,x=x!==-Number.MAX_VALUE?x:xg+this._stepX;const C=v-y,k=x-w;if(this._verticalSubdivision=C>=k,this._polygonMin=this._verticalSubdivision?y:w,this._testInsidePolygon){let A=0-this._graphicOriginX-this._offsetX-this._stepX,R=xg-this._graphicOriginX-this._offsetX+this._stepX,D=-xg-this._graphicOriginY-this._offsetY-this._stepY,B=0-this._graphicOriginY-this._offsetY+this._stepY;if(S){const z=[[A,D],[A,B],[R,D],[R,B]];A=D=Number.MAX_VALUE,R=B=-Number.MAX_VALUE;for(const W of z){const Y=this._cosAngle*W[0]-this._sinAngle*W[1],ee=this._sinAngle*W[0]+this._cosAngle*W[1];A=Math.min(A,Y),R=Math.max(R,Y),D=Math.min(D,ee),B=Math.max(B,ee)}}l=l!==Number.MAX_VALUE?Math.max(l,A):A,c=c!==Number.MAX_VALUE?Math.max(c,D):D,h=h!==-Number.MAX_VALUE?Math.min(h,R):R,m=m!==-Number.MAX_VALUE?Math.min(m,B):B}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(m/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,w,x,y,v)}_buildAccelerationMap(e,i,r,n,s){e.reset();const o=new Map,a=this._verticalSubdivision,l=a?s-n:r-i;let c=Math.ceil(l/pgt);if(c<=1)return;const h=Math.floor(l/c);let m,y,v,w,x,S,C,k,A,R,D;for(c++,this._delta=h,a?(A=-xg-2*this._stepY,R=2*this._stepY,D=n):(A=-2*this._stepX,R=xg+2*this._stepX,D=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(m=e.x,y=e.y;e.nextPoint();m=v,y=w){if(v=e.x,w=e.y,a){if(y===w||y<A&&w<A||y>R&&w>R)continue;x=Math.min(y,w),S=Math.max(y,w)}else{if(m===v||m<A&&v<A||m>R&&v>R)continue;x=Math.min(m,v),S=Math.max(m,v)}for(;x<S;)C=Math.floor((x-D)/h),ppe(C,m,y,v,w,o),x+=h;k=Math.floor((S-D)/h),k>C&&ppe(k,m,y,v,w,o)}this._accelerationMap=o}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,n;if(this._currentX++,this._gridType===Nk.Random){const s=(this._currentX%ch+ch)%ch,o=(this._currentY%ch+ch)%ch;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-gw._randValues[o*ch+s])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-gw._randValues[o*ch+s+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return ygt(e,i,r);e+=s5,i+=s5;const n=this._verticalSubdivision,s=n?i:e,o=Math.floor((s-this._polygonMin)/this._delta),a=this._accelerationMap.get(o);if(!a)return!1;let l,c,h,m=0;for(const y of a){if(l=y[0],c=y[1],n){if(l[1]>i==c[1]>i)continue;h=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;h=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}h>0?m++:m--}return m!==0}};function ygt(t,e,i){let r,n,s,o,a=0;for(t+=s5,e+=s5,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=s,n=o)s=i.x,o=i.y,n>e!=o>e&&((s-r)*(e-n)-(o-n)*(t-r)>0?a++:a--);return a!==0}function ppe(t,e,i,r,n,s){let o=s.get(t);o||(o=[],s.set(t,o)),o.push([[e,i],[r,n]])}const ggt=.001;var xp;let vgt=(xp=class{static local(){return xp.instance===null&&(xp.instance=new xp),xp.instance}execute(e,i,r,n,s){return new bgt(e,i,r)}},xp.instance=null,xp),bgt=class extends fP{constructor(e,i,r){super(e),this._curveHelper=new Iy,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=ggt*r}processPath(e){const i=this._position;if(this._relativeTo===Dw.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[n,s]=[e.x,e.y],[o,a]=[0,0];const l=[0,0];for(;e.nextPoint();){o=e.x,a=e.y;const c=this._curveHelper.getLength(n,s,o,a);if(c<this._epsilon){n=o,s=a;continue}const h=.5+this._position/c,[m,y]=this._curveHelper.getAngleCS(l,n,s,o,a,h),v=this._curveHelper.getCoord2D(n,s,o,a,h);return this.internalPlacement.setTranslate(v[0]-this._offset*y,v[1]+this._offset*m),this._angleToLine&&this.internalPlacement.setRotateCS(m,y),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo===Dw.LineEnd;return this.onLine(e,i,r)}onLine(e,i,r){let n,s=!1;switch(this._relativeTo){case Dw.LineMiddle:default:e.seekPathStart(),n=e.pathLength()/2+i;break;case Dw.LineBeginning:n=i;break;case Dw.LineEnd:n=i,s=!0}r?e.seekPathEnd():e.seekPathStart();let o=0;if(r?e.prevPoint():e.nextPoint()){let[a,l]=[e.x,e.y],[c,h]=[0,0];const m=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,h=e.y;const y=this._curveHelper.getLength(a,l,c,h);if(o+y>n){const v=(n-o)/y,[w,x]=this._curveHelper.getAngleCS(m,a,l,c,h,v),S=this._curveHelper.getCoord2D(a,l,c,h,v),C=s?-this._offset:this._offset;return this.internalPlacement.setTranslate(S[0]-C*x,S[1]+C*w),this._angleToLine&&(s?this.internalPlacement.setRotateCS(-w,-x):this.internalPlacement.setRotateCS(w,x)),this.internalPlacement}a=c,l=h,o+=y}}return null}};const wgt=1e-15;var Sp;let _gt=(Sp=class{static local(){return Sp.instance===null&&(Sp.instance=new Sp),Sp.instance}execute(e,i,r,n,s){return new xgt(e,i,r)}},Sp.instance=null,Sp),xgt=class extends fP{constructor(e,i,r){super(e),this._curveHelper=new Iy,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],n=i[1];if(this._offset!==0){const s=Math.cos(i[2]),o=Math.sin(i[2]);r-=this._offset*o,n+=this._offset*s}return this.internalPlacement.setTranslate(r,n),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,n=!1,s=0,o=0;if(e.seekPathStart(),e.nextPoint()){let a=e.x,l=e.y,c=e.getControlPoint(),h=!0,m=e.nextPoint();for(;m;){const y=e.x,v=e.y,w=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(s=this._curveHelper.getAngle(a,l,y,v,0)),h?(h=!1,i?(r=s,n=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([a,l,s])):c?this._controlPoints&&this._tags.push([a,l,u3(o,s)]):this._regularVertices&&this._tags.push([a,l,u3(o,s)]),(this._angleToLine||this._offset!==0)&&(o=this._curveHelper.getAngle(a,l,y,v,1)),m=e.nextPoint(),m||(i?w||n?this._controlPoints&&this._tags.push([y,v,u3(o,r)]):this._regularVertices&&this._tags.push([y,v,u3(o,r)]):(this._endPoints||this._controlPoints&&w)&&this._tags.push([y,v,o])),a=y,l=v,c=w}}this._tagIterator=0}};function u3(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*wgt;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const Sgt=100*222045e-21;function $gt(t){if(t.totalSize===0)return null;const e=qO(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*Sgt;let r=0,n=0;t.reset();for(let Y=0;t.nextPath();Y++){const ee=t.getCurrentRingArea();ee>n&&(n=ee,r=Y)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const s=i0e(t);if(Math.abs(n)<=2*i*i)return[(s[0]+s[2])/2,(s[1]+s[3])/2];t.seekPathStart();const o=vVe(t,Br());if(o===null)return null;if(t.totalPoints<4)return o;const a=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let h=!1,m=pM(o,t,!0);m.distance===0&&(h=!0,a[0][0]=o[0],a[0][1]=o[1],m=pM(o,t,!1)),l[0]=m.distance,c[0]=0;const y=[NaN,NaN];let v=!1,w=.25,x=-1,S=NaN;do if(S=NaN,a[1]=D8(t,N8(s[0],s[2],w),i,e),isNaN(a[1][0])||isNaN(a[1][1])||(m=pM(a[1],t,!1),S=m.distance),!isNaN(S)&&S>i&&aN(a[1],t))v=!0,l[1]=S,c[1]=vw(a[1],o);else if(!isNaN(S)&&S>x&&(x=S,y[0]=a[1][0],y[1]=a[1][1]),w-=.01,w<.1){if(!(x>=0))break;v=!0,l[1]=x,a[1][0]=y[0],a[1][1]=y[1],c[1]=vw(a[1],o)}while(!v);v=!1,w=.5,x=-1;let C=.01,k=1;do if(S=NaN,a[2]=D8(t,N8(s[0],s[2],w),i,e),isNaN(a[2][0])||isNaN(a[2][1])||(m=pM(a[2],t,!1),S=m.distance),!isNaN(S)&&S>i&&aN(a[2],t))v=!0,l[2]=S,c[2]=vw(a[2],o);else if(!isNaN(S)&&S>x)x=S,y[0]=a[2][0],y[1]=a[2][1];else if(S>x&&(x=S,y[0]=a[2][0],y[1]=a[2][1]),w=.5+C*k,C+=.01,k*=-1,w<.3||w>.7){if(!(x>=0))break;v=!0,l[2]=x,a[2][0]=y[0],a[2][1]=y[1],c[2]=vw(a[2],o)}while(!v);v=!1,w=.75,x=-1;do if(S=NaN,a[3]=D8(t,N8(s[0],s[2],w),i,e),isNaN(a[3][0])||isNaN(a[3][1])||(m=pM(a[3],t,!1),S=m.distance),!isNaN(S)&&S>i&&aN(a[3],t))v=!0,l[3]=S,c[3]=vw(a[3],o);else if(S>x&&(x=S,y[0]=a[3][0],y[1]=a[3][1]),w+=.01,w>.9){if(!(x>=0))break;v=!0,l[3]=x,a[3][0]=y[0],a[3][1]=y[1],c[3]=vw(a[3],o)}while(!v);const A=[0,1,2,3],R=h?0:1;let D;for(let Y=R;Y<4;Y++)for(let ee=R;ee<3;ee++){const ge=c[ee],fe=c[ee+1];Cgt(ge,fe)>0&&(D=A[ee],A[ee]=A[ee+1],A[ee+1]=D,c[ee]=fe,c[ee+1]=ge)}let B=R,z=0,W=0;for(let Y=R;Y<4;Y++){switch(Y){case 0:W=2*l[A[Y]];break;case 1:W=1.66666666*l[A[Y]];break;case 2:W=1.33333333*l[A[Y]];break;case 3:W=l[A[Y]]}W>z&&(z=W,B=A[Y])}return a[B]}function aN(t,e){let i,r,n,s,o=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=n,r=s)n=e.x,s=e.y,r>t[1]!=s>t[1]&&((n-i)*(t[1]-r)-(s-r)*(t[0]-i)>0?o++:o--);return o!==0}function pM(t,e,i){if(i&&aN(t,e))return{coord:t,distance:0};let r=1/0,n=0,s=0,o=[0,0],a=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(o[0]=e.x,o[1]=e.y;e.nextPoint();o=a){a=[e.x,e.y],Vbe(l,t,o,a);const c=vw(t,l);c<r&&(r=c,n=l[0],s=l[1])}return{coord:[n,s],distance:Math.sqrt(r)}}function D8(t,e,i,r){const n=[e,0];let s=1/0,o=1/0,a=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],h=[0,0],m=[0,0],y=[0,0],v=[[0,0],[0,0]],w=Br();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(v[0][0]=t.x,v[0][1]=t.y;t.nextPoint();v[0][0]=v[1][0],v[0][1]=v[1][1]){if(v[1][0]=t.x,v[1][1]=t.y,Tgt(w,v)===null||(m[0]=c[0][0],m[1]=c[0][1],y[0]=c[1][0],y[1]=c[1][1],Egt(w,m,y)===0)||!Gz(c[0],c[1],v[0],v[1],h))continue;const x=h[1];s>o?x<s&&(s=x,a=!0):x<o&&(o=x,l=!0)}return a&&l?n[1]=(s+o)/2:n[0]=n[1]=NaN,n}function Tgt(t,e){if(e.length<2)return null;t||(t=Br());const[i,r]=e[0],[n,s]=e[1];return t[0]=Math.min(i,n),t[1]=Math.min(r,s),t[2]=Math.max(i,n),t[3]=Math.max(r,s),t}const d3=1,h3=4,fpe=3,mpe=12;function Egt(t,e,i){let r=uh(e,t),n=uh(i,t);const s=t[0],o=t[1],a=t[2],l=t[3];if(r&n)return 0;if(!(r|n))return 4;const c=(r?1:0)|(n?2:0);do{const h=i[0]-e[0],m=i[1]-e[1];if(h>m)r&fpe?(r&d3?(e[1]+=m*(s-e[0])/h,e[0]=s):(e[1]+=m*(a-e[0])/h,e[0]=a),r=uh(e,t)):n&fpe?(n&d3?(i[1]+=m*(s-i[0])/h,i[0]=s):(i[1]+=m*(a-i[0])/h,i[0]=a),n=uh(i,t)):r?(r&h3?(e[0]+=h*(o-e[1])/m,e[1]=o):(e[0]+=h*(l-e[1])/m,e[1]=l),r=uh(e,t)):(n&h3?(i[0]+=h*(o-i[1])/m,i[1]=o):(i[0]+=h*(l-i[1])/m,i[1]=l),n=uh(i,t));else if(r&mpe?(r&h3?(e[0]+=h*(o-e[1])/m,e[1]=o):(e[0]+=h*(l-e[1])/m,e[1]=l),r=uh(e,t)):n&mpe?(n&h3?(i[0]+=h*(o-i[1])/m,i[1]=o):(i[0]+=h*(l-i[1])/m,i[1]=l),n=uh(i,t)):r?(r&d3?(e[1]+=m*(s-e[0])/h,e[0]=s):(e[1]+=m*(a-e[0])/h,e[0]=a),r=uh(e,t)):(n&d3?(i[1]+=m*(s-i[0])/h,i[0]=s):(i[1]+=m*(a-i[0])/h,i[0]=a),n=uh(i,t)),r&n)return 0}while(r|n);return c}function uh(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function N8(t,e,i){return t+(e-t)*i}function vw(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function Cgt(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var $p;let Igt=($p=class{static local(){return $p.instance===null&&($p.instance=new $p),$p.instance}execute(e,i,r,n,s){return new Mgt(e,i,r)}},$p.instance=null,$p),Mgt=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:k$.OnPolygon,this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new MC}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case k$.CenterOfMass:{const r=xVe(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case k$.BoundingBoxCenter:{const r=qO(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;case k$.OnPolygon:default:{const r=$gt(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function kgt(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return pyt.local();case"CIMGeometricEffectArrow":return gyt.local();case"CIMGeometricEffectBuffer":return byt.local();case"CIMGeometricEffectControlMeasureLine":return _yt.local();case"CIMGeometricEffectCut":return Syt.local();case"CIMGeometricEffectDashes":return Tyt.local();case"CIMGeometricEffectDonut":return Cyt.local();case"CIMGeometricEffectJog":return Lyt.local();case"CIMGeometricEffectMove":return Dyt.local();case"CIMGeometricEffectOffset":return Fyt.local();case"CIMGeometricEffectRadial":return jyt.local();case"CIMGeometricEffectReverse":return Byt.local();case"CIMGeometricEffectRotate":return qyt.local();case"CIMGeometricEffectScale":return Jyt.local();case"CIMGeometricEffectSuppress":return Yyt.local();case"CIMGeometricEffectTaperedPolygon":return rgt.local();case"CIMGeometricEffectWave":return sgt.local();case"CIMGeometricEffectEnclosingPolygon":return Myt.local()}return null}function Agt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return agt.local();case"CIMMarkerPlacementAtExtremities":return cgt.local();case"CIMMarkerPlacementAtRatioPositions":return dgt.local();case"CIMMarkerPlacementInsidePolygon":return fgt.local();case"CIMMarkerPlacementOnLine":return vgt.local();case"CIMMarkerPlacementOnVertices":return _gt.local();case"CIMMarkerPlacementPolygonCenter":return Igt.local()}return null}function z8(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Bf(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[n,s]=t;return[n*i+s*-r,n*r+s*i]}function QCe(t,e,i=0){const r=da(t,0,Rgt);for(let n=0;n<4;n++)e[i+n]=Math.floor(256*Dgt(r*Pgt[n]))}function Ogt(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*Lgt[r];return i}const Pgt=[1,256,65536,16777216],Lgt=[1/256,1/65536,1/16777216,1/4294967296],Rgt=Ogt(new Uint8ClampedArray([255,255,255,255]));function Dgt(t){return t-Math.floor(t)}const Ngt=15.5,F8=4,zgt=64,FDt=1024,UDt={outlineWidth:.75,referenceWidth:.75,cap:Jn.CIMSolidStroke.capstyle,join:Jn.CIMSolidStroke.joinstyle,miterLimit:Jn.CIMSolidStroke.miterlimit},ype=()=>Ce.getLogger("esri.symbols.cim.rasterizingUtils"),Fgt=32,Ugt=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function jDt(t,e,i){const r=e.style,n=G4e(Math.ceil(i)),s=Ugt(r)?8*n:16*n,o=2*n;t.width=s,t.height=s;const a=t.getContext("2d");a.strokeStyle="#ffffff",a.lineWidth=n,a.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(a.moveTo(s/2,-o),a.lineTo(s/2,s+o)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(a.moveTo(-o,s/2),a.lineTo(s+o,s/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(a.moveTo(-o,-o),a.lineTo(s+o,s+o),a.moveTo(s-o,-o),a.lineTo(s+o,o),a.moveTo(-o,s-o),a.lineTo(o,s+o)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(a.moveTo(s+o,-o),a.lineTo(-o,s+o),a.moveTo(o,-o),a.lineTo(-o,o),a.moveTo(s+o,s-o),a.lineTo(s-o,s+o)),a.stroke();const l=a.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let h;for(let m=0;m<c.length;m+=4)h=c[m+3]/255,c[m]=c[m]*h,c[m+1]=c[m+1]*h,c[m+2]=c[m+2]*h;return[c,t.width,t.height,n]}function VDt(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce((m,y)=>m+y,0),i=Math.round(e*F8),r=1,n=new Float32Array(i*r);let s=0,o=0,a=.5,l=!0;for(const m of t){for(s=o,o+=m*F8;a<=o;){const y=a-.5,v=Math.min(Math.abs(a-s),Math.abs(a-o));n[y]=l?-v:v,a++}l=!l}const c=n.length,h=new Uint8Array(4*c);for(let m=0;m<c;++m){const y=n[m]/F8;QCe(y/zgt*.5+.5,h,4*m)}return[h,i,r]}function BDt(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",n=!i&&!r;t.length%2==1&&(t=[...t,...t]);const s=Ngt,o=2*s;let a=0;for(const C of t)a+=C;const l=Math.round(a*s),c=new Float32Array(l*o),h=.5*s;let m=0,y=0,v=.5,w=!0;for(const C of t){for(m=y,y+=C*s;v<=y;){let k=.5;for(;k<o;){const A=(k-.5)*l+v-.5,R=n?(k-s)*(k-s):Math.abs(k-s);c[A]=w?i?Math.max(Math.max(m+h-v,R),Math.max(v-y+h,R)):R:n?Math.min((v-m)*(v-m)+R,(v-y)*(v-y)+R):r?Math.min(Math.max(v-m,R),Math.max(y-v,R)):Math.min(Math.max(v-m+h,R),Math.max(y+h-v,R)),k++}v++}w=!w}const x=c.length,S=new Uint8Array(4*x);for(let C=0;C<x;++C){const k=(n?Math.sqrt(c[C]):c[C])/s;QCe(k,S,4*C)}return[S,l,o]}function GDt(t,e){const{colorRamp:i,gradientType:r}=e,n=i.type==="CIMFixedColorRamp",s=e.interval||Jn.CIMGradientFill.interval;let o=mQ(i);return n&&(o=eIe(o,s)),r==="Discrete"||n?Vgt(t,o,s):jgt(t,o)}let U8;function p3(t,e){const{colorRamp:i,gradientType:r}=e,n=mQ(i),s=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!s)return lN(t,n);const o=e.interval??Jn.CIMGradientFill.interval;if(s)return lN(t,eIe(n,o));const a=[];U8??(U8=document.createElement("canvas")),yQ(U8,n,o,1,0);const l=U8.getContext("2d").getImageData(0,0,o,1).data;for(let c=0,h=0;c<o;c++,h=4*c){const m=[l[h+0],l[h+1],l[h+2],l[h+3]];a.push({offset:c/o,color:m}),a.push({offset:(c+1)/o,color:m})}return lN(t,a)}function mQ(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&ype().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let n=0;for(const s of i.colors)e.push({offset:n,color:[s[0],s[1],s[2],s[3]/255]}),n+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce((s,o)=>s+o,0);let n=0;for(let s=0;s<i.colorRamps.length;s++){const o=i.colorRamps[s],a=i.weights[s],l=mQ(o);for(const c of l)e.push({offset:(n+c.offset*a)/r,color:c.color});n+=a}break}default:ype().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function eIe(t,e){const i=[],r=(t.length-1)/(e-1);for(let n=0;n<e;n++){const s=t[Math.round(n*r)].color;i.push({offset:n/e,color:s}),i.push({offset:(n+1)/e,color:s})}return i}function jgt(t,e){return yQ(t,e,Fgt,1,VSe),tIe(t)}function Vgt(t,e,i){return yQ(t,e,i,1,VSe),tIe(t)}function lN(t,e,i=0){for(const{offset:r,color:n}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`)}function yQ(t,e,i,r,n){const s=i+2*n;t.width=s,t.height=r;const o=(n+1)/s,a=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=a.createLinearGradient(0,0,s,r);lN(l,e,o),a.fillStyle=l}else a.fillStyle="rgba(128, 128, 128, 1)";a.fillRect(0,0,s,r)}function tIe(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),n=new Uint8Array(r.data);for(let s=0;s<n.length;s+=4){const o=n[s+3]/255;n[s]*=o,n[s+1]*=o,n[s+2]*=o}return[n,e,i]}function Bgt(t){var n,s,o,a;const e=((s=(n=t[0])==null?void 0:n[0])==null?void 0:s[0])??0,i=((a=(o=t[0])==null?void 0:o[0])==null?void 0:a[1])??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let l=0;l<t.length;l++){const c=t[l];for(let h=0;h<c.length;h++){const m=c[h][0],y=c[h][1];m<r.xmin&&(r.xmin=m),m>r.xmax&&(r.xmax=m),y<r.ymin&&(r.ymin=y),y>r.ymax&&(r.ymax=y)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function o5(t,e){const i=Bgt(t),r=i.width===0?1:i.width,n=i.height===0?1:i.height,s=[];for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){let h=Math.round(a[c][0]-i.xmin),m=Math.round(a[c][1]-i.ymin);if(h=e.xmin+h*e.width/r,m=e.ymin+m*e.height/n,isNaN(h)||isNaN(m))throw new Error("Scaled shape has NaN values");l.push([h,m])}s.push(l)}return s}function gpe(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=t[n],o=[];for(let a=0;a<s.length;a++){const l=s[a][0]+e,c=s[a][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");o.push([l,c])}r.push(o)}return r}let Ggt=class iIe{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}static fromExtent(e){return new iIe(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function Hgt(t){return`rgb(${t.slice(0,3).toString()})`}function f3(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let rIe=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){var ue,ae;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d",{willReadFrequently:!0});fM(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:s,weight:o}=i.font;this._lineThroughWidthOffset=s&&s==="line-through"?.1*this._lineHeight:0;const a=i.backgroundColor!=null||i.borderLine!=null,l=a?GZe:0,c=this._computeTextWidth(n,i)+2*l,h=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=h,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=h,this._lineThroughWidthOffset*=i.pixelRatio;const m=(i.outline&&i.outline.color)??[0,0,0,0],y=i.color??[0,0,0,0],v=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=f3(y),this._outlineStyle=f3(m),this._haloStyle=Hgt(v);const w=this._renderedLineHeight,x=this._renderedOutlineSize,S=this._renderedHaloSize;n.save(),n.clearRect(0,0,r.width,r.height),fM(n,i);const C=l*i.pixelRatio,k=qgt(n.textAlign,this._renderedWidth-2*C,this._renderedHaloSize+this._renderedOutlineSize)+C,A=S+x+C,R=S>0;let D=this._lineThroughWidthOffset,B=0;if(a){n.save();const Se=i.backgroundColor??[0,0,0,0],le=((ue=i.borderLine)==null?void 0:ue.color)??[0,0,0,0],be=2*(((ae=i.borderLine)==null?void 0:ae.size)??0);n.fillStyle=f3(Se),n.strokeStyle=f3(le),n.lineWidth=be,n.fillRect(0,0,r.width,r.height),n.strokeRect(0,0,r.width,r.height),n.restore()}R&&this._renderHalo(n,k,A,D,B,i),x>0&&this._renderOutline(n,k,A,D,B,i),B+=A,D+=k;for(const Se of this._textLines)R?(n.globalCompositeOperation="destination-out",n.fillStyle="rgb(0, 0, 0)",n.fillText(Se,D,B),n.globalCompositeOperation="source-over",n.fillStyle=this._fillStyle,n.fillText(Se,D,B)):(n.fillStyle=this._fillStyle,n.fillText(Se,D,B)),s&&s!=="none"&&this._renderDecoration(n,D,B,s,o),B+=w;n.restore();const z=this._renderedWidth+2*this._lineThroughWidthOffset,W=this._renderedHeight,Y=n.getImageData(0,0,z,W),ee=new Uint8Array(Y.data);if(i.premultiplyColors){let Se;for(let le=0;le<ee.length;le+=4)Se=ee[le+3]/255,ee[le]=ee[le]*Se,ee[le+1]=ee[le+1]*Se,ee[le+2]=ee[le+2]*Se}let ge,fe;switch(i.horizontalAlignment){case"left":ge=-.5;break;case"right":ge=.5;break;default:ge=0}switch(i.verticalAlignment){case"bottom":fe=-.5;break;case"top":fe=.5;break;case"baseline":fe=-1/6;break;default:fe=0}return{size:[z,W],image:new Uint32Array(ee.buffer),sdf:!1,simplePattern:!1,anchorX:ge,anchorY:fe,canvas:r}}_renderHalo(e,i,r,n,s,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,a,l),fM(h,o);const{decoration:m,weight:y}=o.font;h.fillStyle=this._haloStyle,h.strokeStyle=this._haloStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,m,y,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,a,l,n,s,a,l),e.globalAlpha=1}_renderOutline(e,i,r,n,s,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,h=c.getContext("2d");h.clearRect(0,0,a,l),fM(h,o);const{decoration:m,weight:y}=o.font;h.fillStyle=this._outlineStyle,h.strokeStyle=this._outlineStyle,h.lineJoin="round",this._renderOutlineNative(h,i,r,m,y,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,a,l,n,s,a,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,n,s,o){const a=this._renderedLineHeight;for(const l of this._textLines){const c=2*o,h=5,m=.1;for(let y=0;y<h;y++){const v=(1-(h-1)*m+y*m)*c;e.lineWidth=v,e.strokeText(l,i,r),n&&n!=="none"&&this._renderDecoration(e,i,r,n,s,v)}r+=a}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,n=r.getContext("2d");fM(n,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const s=this._computeTextWidth(n,i),o=this._lineHeight*this._textLines.length;return r.width=s,r.height=o,[s*i.pixelRatio,o*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const s of this._textLines)r=Math.max(r,e.measureText(s).width);const n=i.font;return(n.style==="italic"||n.style==="oblique"||typeof n.weight=="string"&&(n.weight==="bold"||n.weight==="bolder")||typeof n.weight=="number"&&n.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*ui(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*ui(this._parameters.halo.size))}_renderDecoration(e,i,r,n,s,o){let a=.9*this._lineHeight;const l=s==="bold"?.06:s==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(n==="underline")switch(a=.9*this._computeLineHeightBase(),c){case"top":r+=a;break;case"middle":r+=a/2}else if(n==="line-through")switch(c){case"top":r+=a/1.5;break;case"middle":r+=a/3}const h=o?1.5*o:Math.ceil(a*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=h,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function fM(t,e){const i=Math.max(e.size,.5),r=e.font,n=`${r.style} ${r.weight} ${ui(i).toFixed(1)}px ${r.family}, sans-serif`;let s;switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:s="left";break;case"right":s="right";break;case"center":s="center"}t.textAlign=s}function qgt(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function nIe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Wgt(){const t=nIe("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function Jgt(t){return t!=null&&document.body.removeChild(t),null}const Zgt=()=>Ce.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var Xh,fu;function Ygt(t){if(!t)return Xh.Center;switch(t){case"Left":case"left":return Xh.Left;case"Right":case"right":return Xh.Right;case"Justify":return Zgt().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),Xh.Center;case"Center":case"center":return Xh.Center}}function Xgt(t){if(!t)return fu.Center;switch(t){case"Top":case"top":return fu.Top;case"Center":case"middle":return fu.Center;case"Baseline":case"baseline":return fu.Baseline;case"Bottom":case"bottom":return fu.Bottom}}function qDt(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function WDt(t){switch(t){case Xh.Right:case"right":return-1;case Xh.Center:case"center":return 0;case Xh.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function JDt(t){switch(t){case fu.Top:case"top":return 1;case fu.Center:case"middle":return 0;case fu.Bottom:case fu.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}(function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"})(Xh||(Xh={})),function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(fu||(fu={}));let Kgt=class{constructor(e=0,i=0,r=0,n=0){this.x=e,this.y=i,this.width=r,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},B2=class AJ{constructor(e,i,r,n){this.transformedX=0,this.transformedY=0,this.center=u1(e,i),this.centerT=jA(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new AJ(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+i)/r,o=(e.halfHeight+this.halfHeight+i)/n,a=Math.min(s,o);return Math.log2(a)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-i,s=Math.max(this.ymax,e.ymax)-r,o=i+n/2,a=r+s/2;this.width=n,this.height=s,this.halfWidth=n/2,this.halfHeight=s/2,this.x=o,this.y=a}static deserialize(e){const i=e.readF32(),r=e.readF32(),n=e.readInt32(),s=e.readInt32();return new AJ(i,r,n,s)}};const gQ=22,sIe=4,Qgt=gQ+sIe,evt=gQ-6,vpe=3,tvt=Math.PI/180,Sg=8,ivt=1.5;let oIe=class{constructor(e,i,r,n){this._rotationT=ly(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const s=r.rect,o=new Float32Array(8);e*=n,i*=n;const a=r.code?s.width*n:r.metrics.width,l=r.code?s.height*n:r.metrics.height;this.width=a,this.height=l,o[0]=e,o[1]=i,o[2]=e+a,o[3]=i,o[4]=e,o[5]=i+l,o[6]=e+a,o[7]=i+l,this._data=o,this._setTextureCoords(s),this._scale=n,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+a,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,L4(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,n=Math.abs(e)*this._scale,s=new Float32Array(8);s[0]=this.x,s[1]=this.y,s[2]=this.x+r,s[3]=this.y,s[4]=this.x,s[5]=this.y+n,s[6]=this.x+r,s[7]=this.y+n;const o=Zh(ly(),this._rotationT,this._transform);aSe(s,s,o);let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let x=0;x<4;x++){const S=s[2*x],C=s[2*x+1];a=Math.min(a,S),l=Math.min(l,C),c=Math.max(c,S),h=Math.max(h,C)}const m=c-a,y=h-l,v=a+m/2,w=l+y/2;this._bounds=new B2(v,w,m,y)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=Zh(ly(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],ia(this._offsets.topLeft,this._offsets.topLeft,e),ia(this._offsets.topRight,this._offsets.topRight,e),ia(this._offsets.bottomLeft,this._offsets.bottomLeft,e),ia(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:n}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+n],bottomRight:[e+r,i+n]}}};const rvt=(t,e)=>({code:0,page:0,sdf:!0,rect:new Kgt(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function mM(t,e){return t.forEach(i=>ia(i,i,e)),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let nvt=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const n of e)n.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=L4(ly(),e);Zh(i,r,i);for(const n of this.glyphs)n.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const n=r.scale,s=r.decoration==="underline"?Qgt:evt,o=e[0].textureBinding;for(const a of i){const l=a.startX*n,c=a.startY*n,h=(a.width+a.glyphWidthEnd)*n;e.push(new oIe(l,c+s*n,rvt(h,o),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(ivt+i)/2,n=this._borderLineSizePx?r:0,{xmin:s,ymin:o,xmax:a,ymax:l,x:c,y:h,width:m,height:y}=this.bounds,v=[s-Sg,o-Sg],w=[a+Sg,o-Sg],x=[s-Sg,l+Sg],S=[a+Sg,l+Sg],C=mM([[v[0]-r,v[1]-r],[w[0]+r,w[1]-r],[v[0]+n,v[1]+n],[w[0]-n,w[1]+n]],e),k=mM([[x[0]+n,x[1]-n],[S[0]-n,S[1]-n],[x[0]-r,x[1]+r],[S[0]+r,S[1]+r]],e),A=mM([[v[0]-r,v[1]-r],[v[0]+n,v[1]+n],[x[0]-r,x[1]+r],[x[0]+n,x[1]-n]],e),R=mM([[w[0]-n,w[1]+n],[w[0]+r,w[1]-r],[S[0]-n,S[1]-n],[S[0]+r,S[1]+r]],e),D={main:mM([v,w,x,S],e),top:C,bot:k,left:A,right:R};return[new B2(c,h,m+2*r,y+2*r),D]}get boundsT(){const e=this.bounds,i=Bn(jA(),e.x,e.y);if(ia(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new B2(i[0],i[1],r,r)}return new B2(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,n=0,s=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),n=Math.max(n,l.xBottomRight),s=Math.max(s,l.yBottomRight);const o=n-i,a=s-r;return new B2(i+o/2,r+a/2,o,a)}_createGlyphTransform(e,i){const r=tvt*i.angle,n=ly(),s=jA();return Dp(n,n,Bn(s,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?bb(n,n,r):(Dp(n,n,Bn(s,e.x,e.y)),bb(n,n,r),Dp(n,n,Bn(s,-e.x,-e.y))),n}},m3=class{constructor(e,i,r,n,s,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=n,this.yMin=s,this.yMax=o}};const OJ=t=>t===10,bpe=t=>t===32;function svt(t,e,i){const r=new Array,n=1/i.scale,s=i.maxLineWidth*n,o=e?t.length-1:0,a=e?-1:t.length,l=e?-1:1;let c=o,h=0,m=0,y=c,v=y,w=0,x=1/0,S=0;for(;c!==a;){const{code:k,metrics:A}=t[c],R=Math.abs(A.top);if(OJ(k)||bpe(k)||(x=Math.min(x,R),S=Math.max(S,R+A.height)),OJ(k))c!==o&&(r.push(new m3(t,y,c-l,h,x===1/0?0:x,S)),x=1/0,S=0),h=0,y=c+l,v=c+l,m=0;else if(bpe(k))v=c+l,m=0,w=A.advance,h+=A.advance;else if(h>s){if(v!==y){const D=v-2*l;h-=w,r.push(new m3(t,y,D,h-m,x,S)),x=1/0,S=0,y=v,h=m}else r.push(new m3(t,y,c-l,h,x,S)),x=1/0,S=0,y=c,v=c,h=0;h+=A.advance,m+=A.advance}else h+=A.advance,m+=A.advance;c+=l}const C=new m3(t,y,c-l,h,x,S);return C.start>=0&&C.end<t.length&&r.push(C),r}function ovt(t,e){let i=0;for(let s=0;s<t.length;s++){const{width:o}=t[s];i=Math.max(o,i)}const r=e.decoration==="underline"?sIe:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-n,width:i}}function aIe(t,e){const i=e.scale,r=new Array,{glyphs:n,isRightToLeft:s}=t,o=svt(n,s,e),a=o.length?ovt(o,e):{y:0,height:0},l=Ygt(e.horizontalAlignment),c=Xgt(e.verticalAlignment),h=c===fu.Baseline?1:0,m=h?0:c-1,y=(1-h)*-a.y+m*(a.height/2)+(h?1:0)*-gQ;for(let v=0;v<o.length;v++){const{start:w,end:x,width:S}=o[v];let C=-1*(l+1)*(S/2)-vpe;const k=(t.isRightToLeft?o.length-1-v:v)*e.lineHeight+y-vpe;o[v].startX=C,o[v].startY=k;for(let A=w;A<=x;A++){const R=n[A];if(OJ(R.code))continue;const D=new oIe(C+R.metrics.left,k-R.metrics.top,R,i);C+=R.metrics.advance,r.push(D)}}return new nvt(r,o,e)}const QDt=50;function eNt(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:n,spatialReference:s}=t;return new rr({rings:[[[e,i],[e,n],[r,n],[r,i],[e,i]]],spatialReference:s})}function lIe(t){return Di(Math.round(ui(t)))}function cIe(t){const e=Di(Qtt),i=Di(eit);return Math.max(e,Math.min(t||i,i))}const Uw=Math.PI/180,uIe=.5,G2=()=>Ce.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");class to{constructor(e){this._t=e}static createIdentity(){return new to([1,0,0,0,1,0])}clone(){const e=this._t;return new to(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new to([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new to([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new to([i,-r,0,r,i,0])}rotate(e){return to.multiply(this,to.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const n=e._t,s=i._t,o=n[0]*s[0]+n[3]*s[1],a=n[1]*s[0]+n[4]*s[1],l=n[2]*s[0]+n[5]*s[1]+s[2],c=n[0]*s[3]+n[3]*s[4],h=n[1]*s[3]+n[4]*s[4],m=n[2]*s[3]+n[5]*s[4]+s[5],y=r._t;return y[0]=o,y[1]=a,y[2]=l,y[3]=c,y[4]=h,y[5]=m,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new to([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i,s=e[4]*i,o=-e[1]*i,a=-e[3]*i,l=e[0]*i;return new to([s,o,r,a,l,n])}}class vQ{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new _1(MC,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||to.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||to.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;to.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const n=e.effects;if(n&&n.length>0){const s=this.executeEffects(n,i);if(s){let o=s.next();for(;o;)this.drawSymbolLayers(r,o.asJSON()),o=s.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){const r=this._resourceManager.geometryEngine;let n=new dyt(Hi.fromJSONCIM(i));for(const s of e){const o=kgt(s);o&&(n=o.execute(n,s,this.geomUnitsPerPoint(),null,r))}return n}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const n=e[r];if(!n||n.enable===!1)continue;const s=n.effects;if(s&&s.length>0){const o=this.executeEffects(s,i);if(o){let a=null;for(;(a=o.next())&&(this.drawSymbolLayer(n,a.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(n,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=lvt(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const n=Agt(r);if(n){const s=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;s&&this.pushClipPath(i);const o=n.execute(Hi.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(o){let a=null;for(;(a=o.next())&&(this.drawMarker(e,a),!this._earlyReturn););}s&&this.popClipPath()}}else{const n=this._placementPool.acquire();if(MA(i))n.tx=i.x,n.ty=i.y,this.drawMarker(e,n);else if(Hn(i)){const s=qbe(i);s&&([n.tx,n.ty]=s,this.drawMarker(e,n))}else if(Eo(i)){for(const s of i.paths)for(const o of s)if(n.tx=o[0],n.ty=o[1],this.drawMarker(e,n),this._earlyReturn)break}else for(const s of i.points)if(n.tx=s[0],n.ty=s[1],this.drawMarker(e,n),this._earlyReturn)break;this._placementPool.release(n)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),n=qt(e.size,Jn.CIMPictureMarker.size);if(r==null||n<=0)return;const s=r.width,o=r.height;if(!s||!o)return;const a=s/o,l=qt(e.scaleX,1),c=to.createIdentity(),h=e.anchorPoint;if(h){let S=h.x,C=h.y;e.anchorPointUnits!=="Absolute"&&(S*=n*a*l,C*=n),c.translate(-S,-C)}let m=qt(e.rotation);e.rotateClockwise&&(m=-m),this._mapRotation&&(m+=this._mapRotation),m&&c.rotate(m*Uw);let y=qt(e.offsetX),v=qt(e.offsetY);if(y||v){if(this._mapRotation){const S=Uw*this._mapRotation,C=Math.cos(S),k=Math.sin(S),A=y*k+v*C;y=y*C-v*k,v=A}c.translate(y,v)}const w=this.geomUnitsPerPoint();w!==1&&c.scale(w,w);const x=i.getAngle();x&&c.rotate(x),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,n),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const n=qt(e.size,Jn.CIMVectorMarker.size),s=e.frame,o=s?s.ymax-s.ymin:0,a=n&&o?n/o:1,l=to.createIdentity();s&&l.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const c=e.anchorPoint;if(c){let x=c.x,S=c.y;e.anchorPointUnits!=="Absolute"?s&&(x*=s.xmax-s.xmin,S*=s.ymax-s.ymin):(x/=a,S/=a),l.translate(-x,-S)}a!==1&&l.scale(a,a);let h=qt(e.rotation);e.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&l.rotate(h*Uw);let m=qt(e.offsetX),y=qt(e.offsetY);if(m||y){if(this._mapRotation){const x=Uw*this._mapRotation,S=Math.cos(x),C=Math.sin(x),k=m*C+y*S;m=m*S-y*C,y=k}l.translate(m,y)}const v=this.geomUnitsPerPoint();v!==1&&l.scale(v,v);const w=i.getAngle();w&&l.rotate(w),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const x of r){x!=null&&x.symbol&&x.geometry||G2().error("Invalid marker graphic",x);let S=x.textString;if(typeof S=="number"&&(S=S.toString()),this.drawSymbol(x.symbol,x.geometry,S),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!MA(i)||qt(e.height,Jn.CIMTextSymbol.height)<=0)return;const n=to.createIdentity();let s=qt(e.angle);s=-s,s&&n.rotate(s*Uw);const o=qt(e.offsetX),a=qt(e.offsetY);(o||a)&&n.translate(o,a);const l=this.geomUnitsPerPoint();l!==1&&n.scale(l,l),n.translate(i.x,i.y),this.push(n,!1),this.drawText(e,r),this.pop()}}class avt extends vQ{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new Ggt(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return TVe(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(Hn(e))this._processPath(e.rings,0);else if(Eo(e))this._processPath(e.paths,0);else if(Pa(e)){const i=Om(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const n=Math.max(.5*this.transformSize(qt(r,Jn.CIMSolidStroke.width)),.5*uIe);if(Hn(e))this._processPath(e.rings,n);else if(Eo(e))this._processPath(e.paths,n);else if(Pa(e)){const s=Om(e);s&&this._processPath(s.rings,n)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){Hn(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,n=qt(e.scaleX,1);let s=n*i,o=i;const a=this._resourceManager.getResource(r);if(a!=null){const l=a.height/a.width;s=n*(i?l>1?i:i/l:a.width),o=i?l>1?i*l:i:a.height}this._merge(this.transformPt([-s/2,-o/2]),0),this._merge(this.transformPt([-s/2,o/2]),0),this._merge(this.transformPt([s/2,-o/2]),0),this._merge(this.transformPt([s/2,o/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new rIe);const r=pIe(e);let[n,s]=this._textRasterizer.computeTextSize(i,r);n=Di(n),s=Di(s);const o=this.transformSize(1)*this.reverseTransformScalar(1);n*=o,s*=o;let a=0;switch(e.horizontalAlignment){case"Left":a=n/2;break;case"Right":a=-n/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=s/2;break;case"Top":l=-s/2;break;case"Baseline":l=s/6}this._merge(this.transformPt([-n/2+a,-s/2+l]),0),this._merge(this.transformPt([-n/2+a,s/2+l]),0),this._merge(this.transformPt([n/2+a,-s/2+l]),0),this._merge(this.transformPt([n/2+a,s/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const n=r?r.length:0;if(n>1){this._merge(this.transformPt(r[0]),i);for(let s=1;s<n;s++)this._merge(this.transformPt(r[s]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}}class tNt extends vQ{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=Jgt(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,n,s,o){var c;const a=o*ui(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/a,this._textInfo=n;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?s:0,!ve("esri-mobile")){const h=Di(Jtt*window.devicePixelRatio),m=Di(Ztt);!(((i==null?void 0:i.type)==="CIMLineSymbol"||(i==null?void 0:i.type)==="CIMPolygonSymbol")&&((c=i.symbolLayers)!=null&&c.some(_ct)))&&(i==null?void 0:i.type)!=="CIMMeshSymbol"&&(Pct(i)??0)<m&&(this._searchDistPoint=h)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){var r;return((r=e.at(-1))==null?void 0:r.type)==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,n,s,o,a){a!=null?this._hittestSvgPath(e,a,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,n=qt(e.scaleX,1),s=this._resourceManager.getResource(r);if(s==null||s.height===0||i===0)return;const o=i*this.geomUnitsPerPoint(),a=o*n*(s.width/s.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<a/2+c&&Math.abs(l[1])<o/2+c&&(this._earlyReturn=!0)}drawText(e,i){var w;const r=this._textInfo;if(!r)return;const n=r.get(e);if(!n||!n.glyphMosaicItems.glyphs.length)return;const s=lIe(qt(e.height,Jn.CIMTextSymbol.height)),{lineGapType:o,lineGap:a}=e,l=o?hIe(o,qt(a),s):0,c=((w=e.callout)==null?void 0:w.type)==="CIMBackgroundCallout",h=aIe(n.glyphMosaicItems,{scale:s/USe,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:cIe(e.lineWidth),lineHeight:FSe*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),m=this.reverseTransformPt(this._searchPoint),y=m[0],v=m[1];for(const x of h.glyphs)if(y>x.xTopLeft&&y<x.xBottomRight&&v>-x.yBottomRight&&v<-x.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(Pa(e)){const n=e;i=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(Hn(e))i=e.rings;else{if(!Eo(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);cvt(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&wpe(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??(this._svg=Wgt()),this._path??(this._path=nIe("path")),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??(this._canvas=document.createElement("canvas")),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,n=0){const s=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),o=this.reverseTransformPt(this._searchPoint),a=Br();gX(a,e);const l={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]},c=this._getSvgPath();c.setAttribute("d",i);const h=c.getBBox();let m=Math.max(h.width/l.width,h.height/l.height),y=1;const v=2*s*m;v<1&&(y=2/v,m*=y,h.x*=y,h.y*=y,h.width*=y,h.height*=y);const w=1+n*m/2,x=this._getCanvasContext(h.width+2*w,h.height+2*w);x.setTransform(y,0,0,y,-h.x+w,-h.y+w);const S=new Path2D(i);r?x.fill(S):(x.lineWidth=n*(m/y),x.stroke(S));const C=(l.width*m-h.width)/2,k=(l.height*m-h.height)/2,A=Math.floor((o[0]-l.x-s)*m-C+w),R=Math.floor((l.height-(o[1]-l.y)-s)*m+k+w),D=Math.ceil(2*s*m),B=Math.ceil(2*s*m),z=x.getImageData(A,R,D,B).data;for(let W=3;W<z.length;W+=4)if(z[W]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(Pa(e)){const n=e;r=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}else if(Hn(e))r=e.rings;else{if(!Eo(e))return;r=e.paths}wpe(this.reverseTransformPt(this._searchPoint),r,qt(i,Jn.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}}class dIe extends vQ{constructor(e,i,r,n){super(i,r),this._applyAdditionalRenderProps=n,this._colorSubstitutionHelper=new hyt,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(Hn(e))this._buildPath(e.rings,!0);else if(Eo(e))this._buildPath(e.paths,!0);else if(Pa(e))this._buildPath(Om(e).rings,!0);else{if(!z$(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,n,s,o){if(!e||!i||r===0)return;if(Hn(e))this._buildPath(e.rings,!0);else if(Eo(e))this._buildPath(e.paths,!1);else{if(!Pa(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(Om(e).rings,!0)}const a=this._ctx;a.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",a.lineWidth=Math.max(this.transformSize(r),uIe),this._setCapStyle(n),this._setJoinStyle(s),a.miterLimit=o,a.stroke()}pushClipPath(e){if(this._ctx.save(),Hn(e))this._buildPath(e.rings,!0);else if(Eo(e))this._buildPath(e.paths,!0);else{if(!Pa(e))return;this._buildPath(Om(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:n,tintColor:s}=e,o=qt(e.scaleX,1),a=this._resourceManager.getResource(n);if(a==null)return;let l=i*(a.width/a.height),c=i;i||(l=a.width,c=a.height);const h=Hx(n)||"src"in a&&Hx(a.src);let m="getFrame"in a?z8(a):a;r&&(m=this._colorSubstitutionHelper.applyColorSubstitution(m,r)),this._applyAdditionalRenderProps&&!h&&s&&(m=this._colorSubstitutionHelper.tintImageData(m,s));const y=this.transformPt([0,0]),[v,w]=this.getTransformAngle(),x=this.transformSize(1),S=this._ctx;S.save(),S.setTransform({m11:o*x*v,m12:o*x*w,m21:-x*w,m22:x*v,m41:y[0],m42:y[1]}),S.drawImage(m,-l/2,-c/2,l,c),S.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new rIe);const r=pIe(e,this.transformSize(Di(1))),n=this._textRasterizer.rasterizeText(i,r);if(!n)return;const{size:s,anchorX:o,anchorY:a,canvas:l}=n,c=s[0]*(o+.5),h=s[1]*(a-.5),m=this._ctx,y=this.transformPt([0,0]),[v,w]=this.getTransformAngle(),x=1;m.save(),m.setTransform({m11:x*v,m12:x*w,m21:-x*w,m22:x*v,m41:y[0]-x*c,m42:y[1]+x*h}),m.drawImage(l,0,0),m.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:n,offsetX:s,offsetY:o,rotation:a,scaleX:l,tintColor:c,url:h}=i;const m=this._resourceManager.getResource(h);if(m==null)return;if(Hn(e))this._buildPath(e.rings,!0);else if(Eo(e))this._buildPath(e.paths,!0);else if(Pa(e))this._buildPath(Om(e).rings,!0);else{if(!z$(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const y=this._ctx,v=Hx(h)||"src"in m&&Hx(m.src);let w,x="getFrame"in m?z8(m):m;if(r&&(x=this._colorSubstitutionHelper.applyColorSubstitution(x,r)),this._applyAdditionalRenderProps){v||c&&(x=this._colorSubstitutionHelper.tintImageData(x,c)),w=y.createPattern(x,"repeat");const S=this.transformSize(1);a||(a=0),s?s*=S:s=0,o?o*=S:o=0,n&&(n*=S);const C=n?n/m.height:1,k=l&&n?l*n/m.width:1;if(a!==0||C!==1||k!==1||s!==0||o!==0){const A=new DOMMatrix;A.rotateSelf(0,0,-a).translateSelf(s,o).scaleSelf(k,C,1),w.setTransform(A)}}else w=y.createPattern(x,"repeat");y.save(),y.fillStyle=w,y.fill("evenodd"),y.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:n,joinStyle:s,miterLimit:o,tintColor:a,url:l,width:c}=i;const h=this._resourceManager.getResource(l);if(h==null)return;let m;if(Hn(e))m=e.rings;else if(Eo(e))m=e.paths;else{if(!Pa(e))return z$(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;m=Om(e).rings}c||(c=h.width);const y=Hx(l)||"src"in h&&Hx(h.src);let v="getFrame"in h?z8(h):h;r&&(v=this._colorSubstitutionHelper.applyColorSubstitution(v,r)),this._applyAdditionalRenderProps&&(y||a&&(v=this._colorSubstitutionHelper.tintImageData(v,a)));const w=Math.max(this.transformSize(ui(c)),.5),x=w/v.width,S=this._ctx,C=S.createPattern(v,"repeat-y");let k,A;S.save(),this._setCapStyle(n),this._setJoinStyle(s),o!==void 0&&(S.miterLimit=o),S.lineWidth=w;for(let R of m)if(R=ce(R),_pe(R),R&&!(R.length<=1)){k=this.transformPt(R[0]);for(let D=1;D<R.length;D++){A=this.transformPt(R[D]);const B=uvt(k,A),z=new DOMMatrix;z.translateSelf(0,k[1]-w/2).scaleSelf(x,x,1).rotateSelf(0,0,90-B),C.setTransform(z),S.strokeStyle=C,S.beginPath(),S.moveTo(k[0],k[1]),S.lineTo(A[0],A[1]),S.stroke(),k=A}}S.restore()}drawGradientFill(e,i){if(!e)return;let r;if(Hn(e))r=e.rings;else if(Eo(e))r=e.paths;else{if(!Pa(e))return void G2().error("Unable to draw gradient fill");r=Om(e).rings}this._buildPath(r,!0);const{angle:n,gradientMethod:s,gradientSize:o,gradientSizeUnits:a}=i,l=Jn.CIMGradientFill,c=i.gradientType??l.gradientType,h=-Ep(n??0),m=AVe();for(const C of r){const k=C?C.length:0;if(k>1)for(let A=0;A<k;A++){let R=this.transformPt(C[A]);s!=="Linear"&&s!=="Rectangular"||(R=Bf(R,-h)),FM(m,R)}}const[y,v,w,x]=m,S=this._ctx;switch(S.save(),s){case"Buffered":G2().error(`Gradient method "${s}" currently unsupported.`);break;case"Linear":{const C=(v+x)/2,k=a==="Absolute"?this.transformSize(ui(o)):lM(o,l.gradientSize)*(w-y),[A,R]=c==="Discrete"?[w,w-k]:[y+k,y],D=Bf([A,C],h),B=Bf([R,C],h),z=S.createLinearGradient(D[0],D[1],B[0],B[1]);p3(z,i),S.fillStyle=z,S.fill("evenodd");break}case"Circular":{const C=Zse(m),k=IVe(m)/2,A=a==="Absolute"?this.transformSize(ui(o)):lM(o,l.gradientSize)*k,[R,D]=c==="Discrete"?[k,k-A]:[A,0],B=S.createRadialGradient(C[0],C[1],R,C[0],C[1],D);p3(B,i),S.fillStyle=B,S.fill("evenodd");break}case"Rectangular":{const C=Zse(m),k=C[0],A=C[1],R=Bf(C,h),D=(ge,fe,ue,ae,Se,le,be,Oe)=>{S.save(),this.pushClipPath(e);const Be=Bf([Se,le],h),se=Bf([be,Oe],h);S.beginPath(),S.moveTo(R[0],R[1]),S.lineTo(Be[0],Be[1]),S.lineTo(se[0],se[1]),S.lineTo(R[0],R[1]),S.clip();const Pe=Bf([ge,fe],h),rt=Bf([ue,ae],h),it=S.createLinearGradient(Pe[0],Pe[1],rt[0],rt[1]);p3(it,i),S.fillStyle=it,S.fill("evenodd"),S.restore()};let B=a==="Absolute"?this.transformSize(ui(o)):lM(o,l.gradientSize)*(t4(m)/2),[z,W]=c==="Discrete"?[w,w-B]:[k+B,k];D(z,A,W,A,w,v,w,x),[z,W]=c==="Discrete"?[y,y+B]:[k-B,k],D(z,A,W,A,y,x,y,v),B=a==="Absolute"?this.transformSize(ui(o)):lM(o,l.gradientSize)*(i4(m)/2);let[Y,ee]=c==="Discrete"?[x,x-B]:[A+B,A];D(k,Y,k,ee,w,x,y,x),[Y,ee]=c==="Discrete"?[v,v+B]:[A-B,A],D(k,Y,k,ee,y,v,w,v);break}}S.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:n,gradientSize:s,gradientSizeUnits:o,joinStyle:a,miterLimit:l,width:c}=i;if(!e||c===0)return;let h;if(Hn(e))h=e.rings;else if(Eo(e))h=e.paths;else{if(!Pa(e))return void G2().error("Unable to draw gradient stroke");h=Om(e).rings}const m=i.gradientType??Jn.CIMGradientStroke.gradientType,y=Math.max(this.transformSize(ui(c)),.5),v=this._ctx;let w,x;v.save(),this._setCapStyle(r),this._setJoinStyle(a),l!==void 0&&(v.miterLimit=l),v.lineWidth=y;for(let S of h){if(S=ce(S),_pe(S),!S||S.length<=1)continue;let C=0;w=this.transformPt(S[0]);for(let R=1;R<S.length;R++){x=this.transformPt(S[R]);const D=x[0]-w[0],B=x[1]-w[1];C+=Math.sqrt(D*D+B*B),w=x}const k=o==="Absolute"?this.transformSize(ui(s)):lM(s,Jn.CIMGradientStroke.gradientSize)*(n==="AcrossLine"?y:C);let A=0;w=this.transformPt(S[0]);for(let R=1;R<S.length;R++){x=this.transformPt(S[R]);const D=x[0]-w[0],B=x[1]-w[1],z=Math.sqrt(D*D+B*B);let W,Y,ee,ge;switch(n){case"AcrossLine":{const[ue,ae]=Bf([D/z,B/z],-Math.PI/2),Se=y/2,le=m==="Discrete"?Se:k-Se;W=(w[0]+x[0])/2+ue*le,Y=(w[1]+x[1])/2+ae*le,ee=W-ue*k,ge=Y-ae*k;break}case"AlongLine":{const ue=D/z,ae=B/z;m==="Discrete"?(W=w[0]-ue*A,Y=w[1]-ae*A,ee=W+ue*k,ge=Y+ae*k):(ee=w[0]+ue*(C-A),ge=w[1]+ae*(C-A),W=ee-ue*k,Y=ge-ae*k);break}default:return G2().error("Unrecognized gradient method:",n),void v.restore()}const fe=v.createLinearGradient(W,Y,ee,ge);p3(fe,i),v.strokeStyle=fe,v.beginPath(),v.moveTo(w[0],w[1]),v.lineTo(x[0],x[1]),v.stroke(),A+=z,w=x}}v.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const n of e){const s=n?n.length:0;if(s>1){let o=this.transformPt(n[0]);r.moveTo(o[0],o[1]);for(let a=1;a<s;a++)o=this.transformPt(n[a]),r.lineTo(o[0],o[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case xl.Butt:this._ctx.lineCap="butt";break;case xl.Round:this._ctx.lineCap="round";break;case xl.Square:this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case bu.Bevel:this._ctx.lineJoin="bevel";break;case bu.Round:this._ctx.lineJoin="round";break;case bu.Miter:this._ctx.lineJoin="miter"}}}function lvt(t,e,i){let r=qt(t.separation,Jn.CIMHatchFill.separation)*i,n=qt(t.rotation);if(r===0)return null;r<0&&(r=-r);let s=0;const o=.5*r;for(;s>o;)s-=r;for(;s<-o;)s+=r;const a=Br();gX(a,e),a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o;const l=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;n>180;)n-=180;for(;n<0;)n+=180;const c=Math.cos(n*Uw),h=Math.sin(n*Uw),m=-r*h,y=r*c;let v,w,x,S;s=qt(t.offsetX)*i*h-qt(t.offsetY)*i*c,v=x=Number.MAX_VALUE,w=S=-Number.MAX_VALUE;for(const z of l){const W=z[0],Y=z[1],ee=c*W+h*Y,ge=-h*W+c*Y;v=Math.min(v,ee),x=Math.min(x,ge),w=Math.max(w,ee),S=Math.max(S,ge)}x=Math.floor(x/r)*r;let C=c*v-h*x-m*s/r,k=h*v+c*x-y*s/r,A=c*w-h*x-m*s/r,R=h*w+c*x-y*s/r;const D=1+Math.round((S-x)/r),B=[];for(let z=0;z<D;z++)C+=m,k+=y,A+=m,R+=y,B.push([[C,k],[A,R]]);return{paths:B}}function cvt(t,e){let i=0;for(const r of e){const n=r.length;for(let s=1;s<n;s++){const o=r[s-1],a=r[s];o[1]>t[1]!=a[1]>t[1]&&((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0])>0?i++:i--)}}return i!==0}function wpe(t,e,i){for(const r of e){const n=r.length;for(let s=1;s<n;s++){const o=r[s-1],a=r[s];let l=(a[0]-o[0])*(a[0]-o[0])+(a[1]-o[1])*(a[1]-o[1]);if(l===0)continue;l=Math.sqrt(l);const c=((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0]))/l;if(Math.abs(c)<i){const h=((a[0]-o[0])*(t[0]-o[0])+(a[1]-o[1])*(t[1]-o[1]))/l;if(h>-i&&h<l+i)return!0}}}return!1}function uvt(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const Om=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,hIe=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function pIe(t,e=1){var A;const i=gEe(t),r=yEe(t.fontStyleName),n=t.fontFamilyName??dQ,{weight:s,style:o}=r,a=e*(t.height||5),l=Ect(t.horizontalAlignment),c=Cct(t.verticalAlignment),h=zk(t),m=zk(t.haloSymbol),y=m!=null?e*(t.haloSize??0):0,v=qF(t.symbol),w=e*(WF(t.symbol)||0),x=((A=t.callout)==null?void 0:A.type)==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,S=zk(x),C=WF(x),k=qF(x);return{color:h,size:a,horizontalAlignment:l,verticalAlignment:c,font:{family:n,style:$ct(o),weight:Tct(s),decoration:i},outline:{size:w||0,color:v},halo:{size:y||0,color:m,style:o},backgroundColor:S,borderLine:C!=null&&k!=null?{size:C,color:k}:null,pixelRatio:1,premultiplyColors:!0}}const dvt=1e-4;function _pe(t){let e,i,r,n,s,o=t[0],a=1;for(;a<t.length;)e=t[a][0]-o[0],i=t[a][1]-o[1],n=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(n-r)<=dvt?(t.splice(a-1,1),o=s):(s=o,o=t[a],a++),r=n}const y3=Number.POSITIVE_INFINITY,bQ=Math.PI,iNt=2*bQ,hvt=128/bQ,pvt=256/360,rNt=bQ/180,fvt=1/Math.LN2;function fIe(t,e){return(t%=e)>=0?t:t+e}function nNt(t){return fIe(t*hvt,256)}function sNt(t){return fIe(t*pvt,256)}function oNt(t){return Math.log(t)*fvt}function aNt(t,e,i){return t*(1-i)+e*i}const mvt=8,yvt=14,gvt=16;function lNt(t){return mvt+Math.max((t-yvt)*gvt,0)}function cNt(t,e,i){let r,n,s,o=0;for(const a of i){r=a.length;for(let l=1;l<r;++l)n=a[l-1],s=a[l],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?o++:o--)}return o!==0}function uNt(t,e,i,r){let n,s,o,a;const l=r*r;for(const c of i){const h=c.length;if(!(h<2)){n=c[0].x,s=c[0].y;for(let m=1;m<h;++m){if(o=c[m].x,a=c[m].y,uVe(t,e,n,s,o,a)<l)return!0;n=o,s=a}}}return!1}function dNt(t,e,i,r,n,s,o){const a=Math.max(r,Math.min(e,s))-e,l=Math.max(n,Math.min(i,o))-i;return a*a+l*l<=t*t}function hNt(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new yi(0,0),n=new yi(0,0),s=new yi(0,0);for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){const h=a[c-1],m=a[c],y=a[c+1];c===0?r.setCoords(0,0):r.assignSub(m,h).normalize().rightPerpendicular(),c===a.length-1?n.setCoords(0,0):n.assignSub(y,m).normalize().rightPerpendicular(),s.assignAdd(r,n).normalize();const v=s.x*n.x+s.y*n.y;v!==0&&s.scale(1/v),l.push(yi.add(m,s.scale(e)))}i.push(l)}return i}function pNt(t,e,i,r){const n=new yi(t[0],t[1]);if(n.scale(r),e==="viewport"){const s=-i*(Math.PI/180),o=Math.cos(s),a=Math.sin(s);n.rotate(o,a)}return n}const mIe=Math.PI,vvt=mIe/2,xpe=Math.PI/180,j8=96/72,bvt=1.4142135623730951,Spe=2,$pe=4,a5=()=>Ce.getLogger("esri.symbols.cim.CIMSymbolHelper");function fNt(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=uu.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=uu.fromPictureMarker(t);break;case"simple-line":e=uu.fromSimpleLineSymbol(t);break;case"simple-fill":e=uu.fromSimpleFillSymbol(t);break;case"picture-fill":e=uu.fromPictureFillSymbol(t);break;case"text":e=uu.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function cN(t,e,i){switch(e.type){case"CIMSymbolReference":return cN(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new MC;t.drawMarker(e,r);break}}return t.envelope()}function wvt(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function _vt(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(qt(t.offsetX)),Math.abs(qt(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function Tpe(t){if(!t)return 0;let e=0;for(const i of t)e+=_vt(i);return e}let mNt=class{static getSymbolInflateSize(e,i,r,n,s){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,n,s):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,n){let s=!0;const o=Br();if(i!=null&&i.markerGraphics)for(const a of i.markerGraphics){const l=[0,0,0,0];a.geometry&&(gX(o,a.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,a.symbol,r,0,n),o[0]+=l[0],o[1]+=l[1],o[2]+=l[2],o[3]+=l[3],s?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],s=!1):(e[0]=Math.min(e[0],o[0]),e[1]=Math.min(e[1],o[1]),e[2]=Math.max(e[2],o[2]),e[3]=Math.max(e[3],o[3])))}return e}static _getInflateSize(e,i,r,n,s){if(Cvt(i)){const o=this._getLayersInflateSize(e,i.symbolLayers,r,n,s),a=Tpe(i.effects);return a>0&&(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a),o}return this._getTextInflatedSize(e,i,s)}static _getLayersInflateSize(e,i,r,n,s){let o=!0;if(!i)return e;for(const a of i){if(!a)continue;let l=[0,0,0,0];switch(a.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const h=a;let m=h.width;m!=null&&(h.capStyle===xl.Square||h.joinStyle===bu.Miter?m/=bvt:m/=2,l[0]=-m,l[1]=-m,l[2]=m,l[3]=m);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const h=a;if(a.type==="CIMVectorMarker"){const x=a;if(l=this._vectorMarkerBounds(l,x,r,s),x.frame){const S=(x.frame.xmin+x.frame.xmax)/2,C=(x.frame.ymin+x.frame.ymax)/2;if(l[0]-=S,l[1]-=C,l[2]-=S,l[3]-=C,x.size!=null){const k=x.size/(x.frame.ymax-x.frame.ymin);l[0]*=k,l[1]*=k,l[2]*=k,l[3]*=k}}}else if(a.type==="CIMPictureMarker"){const x=a,S=r.getResource(x.url);let C=1;if(S!=null&&S.height&&(C=S.width/S.height),h.size!=null){const k=h.size/2,A=h.size*C*x.scaleX/2;l=[-A,-k,A,k]}}else if(h.size!=null){const x=h.size/2;l=[-x,-x,x,x]}if(h.anchorPoint){let x,S;h.anchorPointUnits==="Absolute"?(x=h.anchorPoint.x,S=h.anchorPoint.y):(x=h.anchorPoint.x*(l[2]-l[0]),S=h.anchorPoint.y*(l[3]-l[1]));const C=1.25*Math.sqrt(x*x+S*S);l[0]-=C,l[1]-=C,l[2]+=C,l[3]+=C}let m=qt(h.rotation);if(h.rotateClockwise&&(m=-m),n&&(m-=n),m){const x=xpe*m,S=Math.cos(x),C=Math.sin(x),k=Br([y3,y3,-y3,-y3]);FM(k,[l[0]*S-l[1]*C,l[0]*C+l[1]*S]),FM(k,[l[0]*S-l[3]*C,l[0]*C+l[3]*S]),FM(k,[l[2]*S-l[1]*C,l[2]*C+l[1]*S]),FM(k,[l[2]*S-l[3]*C,l[2]*C+l[3]*S]),l=k}let y=qt(h.offsetX),v=qt(h.offsetY);if(n){const x=xpe*n,S=Math.cos(x),C=Math.sin(x),k=y*C+v*S;y=y*S-v*C,v=k}l[0]+=y,l[1]+=v,l[2]+=y,l[3]+=v;const w=wvt(h.markerPlacement);w>0&&(l[0]-=w,l[1]-=w,l[2]+=w,l[3]+=w);break}}const c=Tpe(a.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),o?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],o=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){var y;const n=lIe(i.height??Jn.CIMTextSymbol.height);if(e[0]=-n/2,e[1]=-n/2,e[2]=n/2,e[3]=n/2,!r)return e;const s=r.get(i);if(!s||!s.glyphMosaicItems.glyphs.length)return e;const{lineGapType:o,lineGap:a}=i,l=o?hIe(o,a??0,n):0,c=((y=i.callout)==null?void 0:y.type)==="CIMBackgroundCallout",h=aIe(s.glyphMosaicItems,{scale:n/USe,angle:qt(i.angle),xOffset:qt(i.offsetX),yOffset:qt(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:cIe(i.lineWidth),lineHeight:FSe*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,m=Math.sqrt(h.width*h.width+h.height*h.height);return e[0]-=h.x+m,e[1]-=h.y-m,e[2]+=h.x+m,e[3]+=-h.y+m,e}},uu=class uN{static getEnvelope(e,i,r){if(!e)return null;const n=new avt(r);if(Array.isArray(e)){let s;for(const o of e)s?s.union(cN(n,o,i)):s=cN(n,o,i);return s}return cN(n,e,i)}static getTextureInfo(e,i,r,n,s){const o=n??this.getEnvelope(e,null,i);if(!o)return[0,0,0,0,1];const a=Math.max(o.width,o.height)*j8;let l=s!=null?Math.max(s/a,1):1;l*=j8,o.x*=l,o.y*=l,o.width*=l,o.height*=l,o.width=Math.max(Math.ceil(o.x+o.width)-Math.floor(o.x),1)-1,o.height=Math.max(Math.ceil(o.y+o.height)-Math.floor(o.y),1)-1;let c=o.x+.5*o.width,h=o.y+.5*o.height;return c+=o.x-Math.floor(o.x),h+=o.y-Math.floor(o.y),n||(o.width+=r,o.height+=r,c+=r/2,h+=r/2),[o.width,o.height,c,h,l]}static getTextureAnchor(e,i,r){const[n,s,o,a,l]=this.getTextureInfo(e,i,Spe,null,r);return[-o/n,-a/s,s/l*j8]}static rasterize(e,i,r,n,s=!0,o){const[a,l,c,h,m]=this.getTextureInfo(i,n,Spe,r,o);e.width=a,e.height=l;const y=e.getContext("2d",{willReadFrequently:!0}),v=to.createScale(m,-m);v.translate(.5*a-c,.5*l+h);const w=new dIe(y,n,v);switch(i.type){case"CIMPointSymbol":{const C={type:"point",x:0,y:0};w.drawSymbol(i,C);break}case"CIMVectorMarker":{const C=new MC;w.drawMarker(i,C);break}}const x=y.getImageData(0,0,e.width,e.height),S=new Uint8Array(x.data);if(s){let C;for(let k=0;k<S.length;k+=4)C=S[k+3]/255,S[k]=S[k]*C,S[k+1]=S[k+1]*C,S[k+2]=S[k+2]*C}return[S,e.width,e.height,-c/a,-h/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:uN.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:n,xoffset:s,xscale:o,yoffset:a,yscale:l}=e,c=[],h={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const x=Epe(r);x&&c.push(x)}let m=e.url;e.type==="esriPFS"&&e.imageData&&(m=e.imageData);const y="angle"in e?e.angle??0:0,v=(n??0)*(o||1),w=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:A$.Picture,tintColor:null,url:m,height:w,width:v,offsetX:qt(s),offsetY:qt(a),rotation:qt(-y),colorSubstitutions:null}),h}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:n}=e,s=[],o={type:"CIMPolygonSymbol",symbolLayers:s};if(n){const a=Epe(n);a&&s.push(a)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const a={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:tc(i),capStyle:xl.Butt,joinStyle:bu.Miter,width:.75}]};let l=0;const c=Di(Ivt(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}s.push({type:"CIMHatchFill",lineSymbol:a,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?s.push({type:"CIMHatchFill",lineSymbol:ce(a),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||s.push({type:"CIMHatchFill",lineSymbol:ce(a),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||s.push({type:"CIMSolidFill",enable:!0,color:tc(i)});return o}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:n,marker:s,miterLimit:o,style:a,width:l}=e;let c=null;a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:PJ(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const h=[];if(s){let m;switch(s.placement){case"begin-end":m=Ip.Both;break;case"begin":m=Ip.JustBegin;break;case"end":m=Ip.JustEnd;break;default:m=Ip.None}const y=uN.fromSimpleMarker(s,l,r).symbolLayers[0];y.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:m,offsetAlongLine:0},h.push(y)}return h.push({type:"CIMSolidStroke",color:a!=="none"&&a!=="esriSLSNull"?tc(r):[0,0,0,0],capStyle:gIe(i),joinStyle:vIe(n),miterLimit:o,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:h}}static fromPictureMarker(e){const{angle:i,height:r,width:n,xoffset:s,yoffset:o}=e;let a=e.url;return e.type==="esriPMS"&&e.imageData&&(a=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:A$.Picture,tintColor:null,url:a,size:r,width:n,offsetX:qt(s),offsetY:qt(o),rotation:qt(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:n,haloColor:s,haloSize:o,horizontalAlignment:a,kerning:l,lineWidth:c,text:h,verticalAlignment:m,xoffset:y,yoffset:v,backgroundColor:w,borderLineColor:x,borderLineSize:S}=e;let C,k,A,R,D,B;n&&(C=n.family,k=n.style,A=n.weight,R=n.size,D=n.decoration);let z=!1;return h&&(z=Ymt(h)[1]),(w||S)&&(B={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:tc(w)},{type:"CIMSolidStroke",color:tc(x),width:S}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:QW.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:JW.Normal,fontEncoding:ZW.Unicode,fontFamilyName:C||"Arial",fontStyleName:$vt(k,A),fontType:YW.Unspecified,haloSize:o,height:R,hinting:tJ.Default,horizontalAlignment:xvt(a??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:qt(y),offsetY:qt(v),strikethrough:D==="line-through",underline:D==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:tc(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:tc(s)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:z?HF.RTL:HF.LTR,verticalAlignment:Svt(m??"baseline"),verticalGlyphOrientation:rJ.Right,wordSpacing:100,billboardMode3D:eJ.FaceNearPlane,callout:B}}static createPictureMarkerRasterizationParam(e){var l,c;const{angle:i,height:r,width:n,xoffset:s,yoffset:o}=e,a=e.url??((l=e.source)==null?void 0:l.url)??((c=e.source)==null?void 0:c.imageData);return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:A$.Picture,tintColor:null,url:a,size:r,width:n,offsetX:qt(s),offsetY:qt(o),rotation:qt(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:n,yoffset:s,url:o}=e;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:A$.Picture,tintColor:null,url:o,width:i,height:r,offsetX:qt(n),offsetY:qt(s),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:n}=e,s=e.color??r;if(n==="path"||n==="esriSMSPath"){const m=[];if("outline"in e&&e.outline){const w=e.outline;m.push({type:"CIMSolidStroke",enable:!0,width:w.width,color:tc(w.color),path:e.path})}m.push({type:"CIMSolidFill",enable:!0,color:tc(s),path:e.path});const[y,v]=yM("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-qt(e.angle),size:qt(e.size||6),offsetX:qt(e.xoffset),offsetY:qt(e.yoffset),scaleSymbolsProportionally:!1,frame:y,markerGraphics:[{type:"CIMMarkerGraphic",geometry:v,symbol:{type:"CIMPolygonSymbol",symbolLayers:m}}]}]}}const o=[];let a,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const m=e.outline,y=m.style!=="solid"&&m.style!=="esriSLSSolid";[a,l]=y?yM(n,e.size):yM(n);const v=m.width??X4.width;if(y){const S=v/e.size,C=(a.xmax-a.xmin)*S/2,k=(a.ymax-a.ymin)*S/2;a.xmin-=C,a.xmax+=C,a.ymin-=k,a.ymax+=k,c&&(c+=v)}const w=e.style!=="cross"&&e.style!=="x"||(e==null?void 0:e.outline.style)==="dot"||(e==null?void 0:e.outline.style)==="short-dot"?So.HalfGap:So.FullPattern,x=y?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:PJ(m.style,null).map(S=>m.width&&m.width>0?S*m.width:S),lineDashEnding:w,controlPointEnding:So.FullPattern}]:void 0;o.push({type:"CIMSolidStroke",capStyle:y?xl.Round:xl.Butt,enable:!0,width:v,color:tc(m.color),effects:x})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[a,l]=yM(n):([a,l]=yM(n),o.push({type:"CIMSolidStroke",enable:!0,width:i,color:tc(s)}));o.push({type:"CIMSolidFill",enable:!0,color:tc(s)});const h={type:"CIMPolygonSymbol",symbolLayers:o};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:qt(-e.angle),size:qt(c||6*i),offsetX:qt(e.xoffset),offsetY:qt(e.yoffset),scaleSymbolsProportionally:!1,frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:h}]}]}}static fromCIMHatchFill(e,i){var l;const r=i*(e.separation??Jn.CIMHatchFill.separation),n=r/2,s=ce(e.lineSymbol);(l=s.symbolLayers)==null||l.forEach(c=>{var h;switch(c.type){case"CIMSolidStroke":c.width!=null&&(c.width*=i),(h=c.effects)==null||h.forEach(m=>{if(m.type==="CIMGeometricEffectDashes"){const y=m.dashTemplate;m.dashTemplate=y==null?void 0:y.map(v=>v*i)}});break;case"CIMVectorMarker":{c.size!=null&&(c.size*=i);const m=c.markerPlacement;m!=null&&"placementTemplate"in m&&(m.placementTemplate=m.placementTemplate.map(y=>y*i));break}}});let o=this._getLineSymbolPeriod(s)||$pe;for(;o<$pe;)o*=2;const a=o/2;return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-n,ymax:n},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-a,0],[a,0]]]},symbol:s}],size:r}}static fetchResources(e,i,r,n=null){return e&&i&&yIe(e,s=>{Mvt(s,i,r),"url"in s&&s.url&&r.push(i.fetchResource(s.url,{signal:n}))}),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const n of e.symbolLayers)if(n.type==="CIMVectorMarker"&&n.markerGraphics)for(const s of n.markerGraphics)s!=null&&s.symbol&&uN.fetchFonts(s.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:n,fontStyleName:s}=e;if(!n||n.toLowerCase()==="calcitewebcoreicons")return;const{style:o,weight:a}=yEe(s),l=gEe(e),c=new cc({family:n,style:o,weight:a,decoration:l});r.push(i.loadFont(c).catch(()=>{a5().error(`Unsupported font ${n} in CIM symbol`)}))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const n=this._getEffectsRepeat(r.effects);if(n)return n;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const s=this._getPlacementRepeat(r.markerPlacement);if(s)return s}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let n=0;for(const s of r)n+=s;return 1&r.length&&(n*=2),n}break}case"CIMGeometricEffectWave":return i.period;default:a5().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const n of i)r+=+n;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const n=Math.abs(i.stepX),s=Math.abs(i.stepY),o=(i.randomness??100)/100;let a,l,c,h;if(i.gridType==="Random"){const m=Di(Ktt),y=Math.max(Math.floor(m/n),1),v=Math.max(Math.floor(m/s),1);a=y*n/2,l=v*s/2,c=2*l;const w=new xY(i.seed),x=o*n/1.5,S=o*s/1.5;h=[];for(let C=0;C<y;C++)for(let k=0;k<v;k++){const A=C*n-a+x*(.5-w.getFloat()),R=k*s-l+S*(.5-w.getFloat());h.push({x:A,y:R}),C===0&&h.push({x:A+2*a,y:R}),k===0&&h.push({x:A,y:R+2*l})}}else i.shiftOddRows===!0?(a=n/2,l=s,c=2*s,h=[{x:-a,y:0},{x:a,y:0},{x:0,y:l},{x:0,y:-l}]):(a=n/2,l=s/2,c=s,h=[{x:-n,y:0},{x:0,y:-s},{x:-n,y:-s},{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:-n,y:s},{x:n,y:-s}]);return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-l,ymax:l},markerGraphics:h.map(m=>({type:"CIMMarkerGraphic",geometry:m,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}})),size:c}}};function yIe(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const n=r.markerGraphics;if(!n)continue;for(const s of n)if(s){const o=s.symbol;o&&yIe(o,e)}}break}}}const gIe=t=>{if(!t)return xl.Butt;switch(t){case"butt":return xl.Butt;case"square":return xl.Square;case"round":return xl.Round}},vIe=t=>{if(!t)return bu.Miter;switch(t){case"miter":return bu.Miter;case"round":return bu.Round;case"bevel":return bu.Bevel}},xvt=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},Svt=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},tc=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]},$vt=(t,e)=>{const i=Tvt(e),r=Evt(t);return i&&r?`${i}-${r}`:`${i}${r}`},Tvt=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},Evt=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},PJ=(t,e)=>{const i=ve("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return a5().error("Unexpected: style does not require rasterization"),[0,0];default:return a5().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function Cvt(t){return t.symbolLayers!==void 0}const yM=(t,e=100)=>{const i=e/2;let r,n;const s=t;if(s==="circle"||s==="esriSMSCircle"){let a=Math.acos(1-.25/i),l=Math.ceil(mIe/a/4);l===0&&(l=1),a=vvt/l,l*=4;const c=[];c.push([i,0]);for(let h=1;h<l;h++)c.push([i*Math.cos(h*a),-i*Math.sin(h*a)]);c.push([i,0]),r={rings:[c]},n={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(s==="cross"||s==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="diamond"||s==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="square"||s==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="x"||s==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(s==="triangle"||s==="esriSMSTriangle"){const o=e*.5773502691896257,a=-o,l=2/3*e,c=l-e;r={rings:[[[a,c],[0,l],[o,c],[a,c]]]},n={xmin:a,ymin:c,xmax:o,ymax:l}}else s==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},n={xmin:-i,ymin:-i,xmax:i,ymax:i});return[n,r]},Ivt=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function Mvt(t,e,i){if(!(!t.effects||e.geometryEngine!=null)){if(e.geometryEnginePromise)return void i.push(e.geometryEnginePromise);xct(t.effects)&&(e.geometryEnginePromise=Sct(),i.push(e.geometryEnginePromise),e.geometryEnginePromise.then(r=>e.geometryEngine=r))}}function Epe(t){if(!t)return null;let e=null;const{cap:i,color:r,join:n,miterLimit:s,style:o,width:a}=t;return o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:PJ(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:o!=="esriSLSNull"&&o!=="none"?tc(r):[0,0,0,0],capStyle:gIe(i),joinStyle:vIe(n),miterLimit:s,width:a,effects:e}}let kvt=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let n=this._inFlightResourceMap.get(e);return n?n.then(s=>({width:s.width,height:s.height})):(n=Lit(e,i),this._inFlightResourceMap.set(e,n),n.then(s=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,s),{width:s.width,height:s.height}),()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return Kmt(e)}};function vNt(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function Avt(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function O1(t){if(Avt(t))return t;const{originPosition:e,scale:i,translate:r}=t,n=i[0]??1,s=i[1]??1;return{originPosition:"lowerLeft",scale:[n,e==="lowerLeft"?s:-s,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function vy({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function by({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function QA({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function eO({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function bIe(t,e){return t&&e?Rvt:t&&!e?Pvt:!t&&e?Lvt:Ovt}const Ovt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=vy(t,r[0]),s=by(t,r[1]);i.push([n,s]);for(let o=1;o<e.length;o++){const[a,l]=e[o],c=vy(t,a),h=by(t,l);c===n&&h===s||i.push([c-n,h-s]),n=c,s=h}return i},Pvt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=vy(t,r[0]),s=by(t,r[1]),o=QA(t,r[2]);i.push([n,s,o]);for(let a=1;a<e.length;a++){const[l,c,h]=e[a],m=vy(t,l),y=by(t,c),v=QA(t,h);m===n&&y===s&&v===o||i.push([m-n,y-s,v]),n=m,s=y,o=v}return i},Lvt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=vy(t,r[0]),s=by(t,r[1]),o=eO(t,r[2]);i.push([n,s,o]);for(let a=1;a<e.length;a++){const[l,c,h]=e[a],m=vy(t,l),y=by(t,c),v=eO(t,h);m===n&&y===s&&v===o||i.push([m-n,y-s,v]),n=m,s=y,o=v}return i},Rvt=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let n=vy(t,r[0]),s=by(t,r[1]),o=QA(t,r[2]),a=eO(t,r[3]);i.push([n,s,o,a]);for(let l=1;l<e.length;l++){const[c,h,m,y]=e[l],v=vy(t,c),w=by(t,h),x=QA(t,m),S=eO(t,y);v===n&&w===s&&x===o&&S===a||i.push([v-n,w-s,x,S]),n=v,s=w,o=x,a=S}return i};function Dvt(t,e,i,r){const n=[],s=bIe(i,r);for(let o=0;o<e.length;o++){const a=s(t,e[o]);a&&a.length>=3&&n.push(a)}return n.length?n:null}function Nvt(t,e,i,r){const n=[],s=bIe(i,r);for(let o=0;o<e.length;o++){const a=s(t,e[o]);a&&a.length>=2&&n.push(a)}return n.length?n:null}function mP({scale:t,translate:e},i){return i*t[0]+e[0]}function yP({scale:t,translate:e},i){return i*t[1]+e[1]}function tO({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function iO({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function wQ(t,e){return t&&e?jvt:t&&!e?Fvt:!t&&e?Uvt:zvt}const zvt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=mP(t,r[0]),s=yP(t,r[1]);i[0]=[n,s];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[m,y]=e[h];n+=l*m,s+=c*y,i[h]=[n,s]}return i},Fvt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=mP(t,r[0]),s=yP(t,r[1]);i[0]=[n,s,tO(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[m,y,v]=e[h];n+=l*m,s+=c*y,i[h]=[n,s,tO(t,v)]}return i},Uvt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=mP(t,r[0]),s=yP(t,r[1]);i[0]=[n,s,iO(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[m,y,v]=e[h];n+=l*m,s+=c*y,i[h]=[n,s,iO(t,v)]}return i},jvt=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let n=mP(t,r[0]),s=yP(t,r[1]);i[0]=[n,s,tO(t,r[2]),iO(t,r[3])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<e.length;h++){const[m,y,v,w]=e[h];n+=l*m,s+=c*y,i[h]=[n,s,tO(t,v),iO(t,w)]}return i};function wIe(t,e,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=e(t,i[n]);return r}function bNt(t,e,i){const r=O1(t);return e.x=vy(r,i.x),e.y=by(r,i.y),i.z!=null&&(e.z=QA(r,i.z)),i.m!=null&&(e.m=eO(r,i.m)),e}function wNt(t,e,i){const r=Dvt(O1(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function _Nt(t,e,i){const r=Nvt(O1(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function Vvt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=O1(t);e.points=wQ(r,n)(s,i.points),e.hasZ=r,e.hasM=n}return e}function Bvt(t,e,i,r=(i==null?void 0:i.z)!=null,n=(i==null?void 0:i.m)!=null){if(i==null)return e;const s=O1(t);return e.x=mP(s,i.x),e.y=yP(s,i.y),r&&(e.z=tO(s,i.z)),n&&(e.m=iO(s,i.m)),e}function Gvt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=O1(t);e.rings=wIe(s,wQ(r,n),i.rings),e.hasZ=r,e.hasM=n}return e}function Hvt(t,e,i,r=(i==null?void 0:i.hasZ)??!1,n=(i==null?void 0:i.hasM)??!1){if(i!=null){const s=O1(t);e.paths=wIe(s,wQ(r,n),i.paths),e.hasZ=r,e.hasM=n}return e}function _Ie(t,e,i,r,n,s){if(t==null)return null;const o=t.references("geometry")&&s?qvt(e,r,s):e,a=t.repurposeFeature(o,n);try{return t.evaluate(a,i)}catch(l){return Ce.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const V8=new Map;function qvt(t,e,i){const{transform:r,hasZ:n,hasM:s}=i;V8.has(e)||V8.set(e,Wvt(e));const o=V8.get(e)(t.geometry,r,n,s);return{...t,geometry:o}}function Wvt(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,n,s)=>Bvt(r,e,i,n,s);case"esriGeometryPolygon":return(i,r,n,s)=>Gvt(r,e,i,n,s);case"esriGeometryPolyline":return(i,r,n,s)=>Hvt(r,e,i,n,s);case"esriGeometryMultipoint":return(i,r,n,s)=>Vvt(r,e,i,n,s);default:return Ce.getLogger("esri.views.2d.support.arcadeOnDemand").error(new Q("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const xNt=Object.freeze(Object.defineProperty({__proto__:null,default:_Ie},Symbol.toStringTag,{value:"Module"})),Jvt=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:n}=t;return[e,i,r,255*n]};var dr;let _Q=(dr=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let n=!1;for(const s of r)if(s.primitiveName===e.primitiveName){n=!0;break}if(!n)for(const s of i)s.primitiveName===e.primitiveName&&r.push(s)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)dr.findApplicableOverrides(n,i,r);if(e.symbolLayers)for(const n of e.symbolLayers)dr.findApplicableOverrides(n,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const n of e.effects)dr.findApplicableOverrides(n,i,r);if(e.markerPlacement&&dr.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const n of e.markerGraphics)dr.findApplicableOverrides(n,i,r),dr.findApplicableOverrides(n.symbol,i,r)}else e.type==="CIMCharacterMarker"?dr.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?dr.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&dr.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&vEe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=she(e),n=e.primitiveName,s=[];for(const o of i)o.primitiveName===n&&s.push(she(o));return{type:"cim-effect-param",effect:r,overrides:Rct(s)}}static async resolveSymbolOverrides(e,i,r,n,s,o,a){if(!(e!=null&&e.symbol))return null;let{symbol:l,primitiveOverrides:c}=e;const h=!!c;if(!h&&!n)return l;l=ce(l),c=ce(c);let m=!0;if(i||(i={attributes:{}},m=!1),h){if(m||(c=c.filter(y=>{var v;return!((v=y.valueExpressionInfo)!=null&&v.expression.includes("$feature"))})),a||(c=c.filter(y=>{var v;return!((v=y.valueExpressionInfo)!=null&&v.expression.includes("$view"))})),c.length>0){const y=Ict(i.attributes),v={spatialReference:r,fields:y,geometryType:s};await dr.createRenderExpressions(c,v),dr.evaluateOverrides(c,i,s??"esriGeometryPoint",o,a,new WA(y))}dr.applyOverrides(l,c)}return n&&dr.applyDictionaryTextOverrides(l,i,n,null),l}static async createRenderExpressions(e,i){const r=[];for(const n of e){const s=n.valueExpressionInfo;if(!s||dr._expressionToRenderExpression.has(s.expression))continue;const o=hct(s.expression,i.spatialReference);r.push(o),o.then(a=>dr._expressionToRenderExpression.set(s.expression,a))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,n,s,o){const a={$view:{scale:s==null?void 0:s.scale}};for(const l of e){l.value&&typeof l.value=="object"&&KEe(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=Jvt(l.value));const c=l.valueExpressionInfo;if(!c)continue;const h=dr._expressionToRenderExpression.get(c.expression);h&&(l.value=_Ie(h,i,a,r,o,n))}}static applyDictionaryTextOverrides(e,i,r,n,s="Normal"){if(e!=null&&e.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&dr.applyDictionaryTextOverrides(a,i,r,n,e.type==="CIMTextSymbol"?e.textCase:s)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const a of o)a&&dr.applyDictionaryTextOverrides(a,i,r,n)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const a=bct(o,r);e.textString=wct(i,a,n,s)}}}}static applyOverrides(e,i,r,n){if(e.primitiveName){for(const s of i)if(s.primitiveName===e.primitiveName){const o=dP(s.propertyName);if(n&&n.push({cim:e,nocapPropertyName:o,value:e[o]}),r){let a=!1;for(const l of r)l.primitiveName===e.primitiveName&&(a=!0);a||r.push(s)}s.value!=null&&(e[o]=s.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)dr.applyOverrides(s,i,r,n);if(e.symbolLayers)for(const s of e.symbolLayers)dr.applyOverrides(s,i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)dr.applyOverrides(s,i,r,n);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const s of e.markerGraphics)dr.applyOverrides(s,i,r,n),dr.applyOverrides(s.symbol,i,r,n)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(r=>Number(r));if(e==="Color"){const r=new Ye(i).toRgba();return r[3]*=255,r}return i}},dr._expressionToRenderExpression=new Map,dr);const Zvt=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:_Q},Symbol.toStringTag,{value:"Module"})),Yvt=96/72;let xIe=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new kvt}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,n,s,o,a,l,c,h){if(!e)return null;const{data:m}=e;if(!m||m.type!=="CIMSymbolReference"||!m.symbol)return null;const{symbol:y}=m;o||(o=JF(y));const v=await _Q.resolveSymbolOverrides(m,i,this._spatialReference,s,o,a,l),w=this._cimResourceManager,x=[];uu.fetchResources(v,w,x),uu.fetchFonts(v,w,x),x.length>0&&await Promise.all(x);const{width:S,height:C}=r;let k=Cpe(o,S,C,n,h);const A=uu.getEnvelope(v,k,w);if(!A)return null;A.x===1/0&&(A.x=S+2),A.y===1/0&&(A.y=-C/2),A.width===-1/0&&(A.width=S),A.height===-1/0&&(A.height=C);let R=1,D=0,B=0;switch(y.type){case"CIMPointSymbol":case"CIMTextSymbol":{let W=1;A.width>S&&(W=S/A.width);let Y=1;A.height>C&&(Y=C/A.height),n==="preview"&&(A.width<S&&(W=S/A.width),A.height<C&&(Y=C/A.height)),R=Math.min(W,Y),D=A.x+A.width/2,B=A.y+A.height/2}break;case"CIMLineSymbol":if(h){B=A.y+A.height/2,D=A.x+A.width/2;const W=A.width-S,Y=A.height-C;k={paths:o5(k.paths,{xmin:-1*A.width/2+W,xmax:A.width/2-W,ymin:-1*A.height/2+Y,ymax:A.height/2-Y,width:A.width-2*W,height:A.height-2*Y})}}else{(c||A.height>C)&&(R=C/A.height),B=A.y+A.height/2;const W=A.x*R+S/2,Y=(A.x+A.width)*R+S/2,ee=Eo(k)?k.paths:Hn(k)?k.rings:null;if(ee===null)throw new Error("Bad geometry, can't rasterise symbol!");ee[0][0][0]-=W/R,ee[0][2][0]-=(Y-S)/R}break;case"CIMPolygonSymbol":if(h){B=A.y+A.height/2,D=A.x+A.width/2;const W=A.width-S,Y=A.height-C;k={paths:o5(k.rings,{xmin:-1*A.width/2+W,xmax:A.width/2-W,ymin:-1*A.height/2+Y,ymax:A.height/2-Y,width:A.width-2*W,height:A.height-2*Y})}}else{D=A.x+A.width/2,B=A.y+A.height/2;const W=A.x*R+S/2,Y=(A.x+A.width)*R+S/2,ee=A.y*R+C/2,ge=(A.y+A.height)*R+C/2,{rings:fe}=k;W<0&&(fe[0][0][0]-=W,fe[0][3][0]-=W,fe[0][4][0]-=W),ee<0&&(fe[0][0][1]+=ee,fe[0][1][1]+=ee,fe[0][4][1]+=ee),Y>S&&(fe[0][1][0]-=Y-S,fe[0][2][0]-=Y-S),ge>C&&(fe[0][2][1]+=ge-C,fe[0][3][1]+=ge-C)}}const z={type:"cim",data:{type:"CIMSymbolReference",symbol:v}};return this.rasterize(z,S,C,D,B,R,o,1,k)}rasterize(e,i,r,n,s,o,a,l=0,c=null,h=window.devicePixelRatio||1){const{data:m}=e;if(!m||m.type!=="CIMSymbolReference"||!m.symbol)return null;const{symbol:y}=m,v=this._canvas,w=h*Yvt;v.width=i*w,v.height=r*w,a||(a=JF(y)),c||(c=Cpe(a,i,r,"legend")),v.width+=2*l,v.height+=2*l;const x=v.getContext("2d",{willReadFrequently:!0}),S=to.createIdentity();return S.translate(-n,-s),S.scale(o*w,-o*w),S.translate(i*w/2+l,r*w/2+l),x.clearRect(0,0,v.width,v.height),new dIe(x,this._cimResourceManager,S,!0).drawSymbol(y,c),x.getImageData(0,0,v.width,v.height)}};function Xvt(t,e,i,r){return e==="esriGeometryPolygon"?{rings:gpe(o5(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:gpe(o5(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function Cpe(t,e,i,r,n){const o=-e/2+1,a=e/2-1,l=i/2-1,c=-i/2+1;if(n&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const h=Xvt(n,t,e,i);if(h)return h}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[o,0],[0,0],[a,0]]]};default:return r==="legend"?{rings:[[[o,l],[a,0],[a,c],[o,c],[o,l]]]}:{rings:[[[o,l],[a,l],[a,c],[o,c],[o,l]]]}}}const $Nt=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:xIe},Symbol.toStringTag,{value:"Module"})),dN=new xIe(null),g3=Di(In.size),Ipe=Di(In.maxSize),B8=Di(In.lineWidth),Kvt=1;async function Qvt(t,e,i){const r=e==null?void 0:e.size;let n=r!=null&&typeof r=="object"&&"width"in r?r.width:r,s=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!n||!s)if(i==="esriGeometryPolygon")n=s=e.maxSize?Math.min(e.maxSize,g3):g3;else{const o=await xQ(t,e,i);o&&(n=o.width,s=o.height),i==="esriGeometryPolyline"&&(n=e.maxSize?Math.min(e.maxSize,B8):B8),n=n!=null&&isFinite(n)?Math.min(n,Ipe):g3,s=s!=null&&isFinite(s)?Math.max(Math.min(s,Ipe),Kvt):g3}return e.style==="legend"&&i==="esriGeometryPolyline"&&(n=B8),{width:n,height:s}}async function xQ(t,e={},i){var c;const r=e.cimOptions||e;i??(i=r.geometryType||JF((c=t==null?void 0:t.data)==null?void 0:c.symbol));const{feature:n,fieldMap:s,viewParams:o}=r,a=await _Q.resolveSymbolOverrides(t.data,n,null,s,i,null,o);if(!a)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:a},t.data.primitiveOverrides=void 0;const l=[];return uu.fetchResources(a,dN.resourceManager,l),uu.fetchFonts(a,dN.resourceManager,l),l.length>0&&await Promise.all(l),uu.getEnvelope(a,null,dN.resourceManager)}async function ebt(t,e={}){var B,z;const{node:i,opacity:r,symbolConfig:n}=e,s=n!=null&&typeof n=="object"&&"isSquareFill"in n&&n.isSquareFill,o=e.cimOptions||e,a=o.geometryType||JF((B=t==null?void 0:t.data)==null?void 0:B.symbol),l=await Qvt(t,e,a),{feature:c,fieldMap:h}=o,m=e!=null&&e.geometry||s||a!=="esriGeometryPolygon"?"preview":"legend";let y=l;const v=l;if(e!=null&&e.geometry&&(a==="esriGeometryPolygon"||a==="esriGeometryPolyline")&&(ui(l.width)<200||ui(l.height)<200)){const Y=l.width>l.height?Di(200)*l.height/l.width:Di(200);y={width:l.width>l.height?Di(200):Di(200)*l.width/l.height,height:Y}}const w=await dN.rasterizeCIMSymbolAsync(t,c,y,m,h,a,null,o.viewParams,o.allowScalingUp,(z=e==null?void 0:e.geometry)==null?void 0:z.toJSON());if(!w)return null;const{width:x,height:S}=w,C=document.createElement("canvas");C.width=x,C.height=S,C.getContext("2d").putImageData(w,0,0);const k=ui(v.width),A=ui(v.height),R=new Image(k,A);R.src=C.toDataURL(),R.ariaLabel=e.ariaLabel??null,R.alt=e.ariaLabel??"",r!=null&&(R.style.opacity=`${r}`);let D=R;if(e.effectView!=null){const W={shape:{type:"image",x:0,y:0,width:k,height:A,src:R.src},fill:null,stroke:null,offset:[0,0]};D=IC([[W]],[k,A],e)}return i&&D&&i.appendChild(D),D}const tbt=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:xQ,previewCIMSymbol:ebt},Symbol.toStringTag,{value:"Module"})),LJ=30,RJ=12,DJ=24,SIe=[255,255,255],l5=[200,200,200],Xw=[128,128,128],ibt=20,rbt=5;function nbt(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function sbt(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function obt(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function abt(t){return t.declaredClass==="esri.symbols.TextSymbol"}function lbt(t,e){const i=t.length-1;return t.map((r,n)=>LCe(r,n,i,e))}async function cbt(t,e,i,r,n,s,o){const a=e.legendOptions,l=a==null?void 0:a.customValues,c=o||await hbt(t,i),h=e.stops,m=!!c,y=!!l,v=e.minSize!=null&&e.maxSize!=null,w=h&&h.length>1,x=!!e.target;if(!m||!y&&!(v||w&&!x))return;const S=nj(c);let C=!1,k=null,A=null;k=S&&!w?e5([e.minDataValue,e.maxDataValue]):l??await fbt(e,c,r,n==null?void 0:n.type);const R=t==null?void 0:t.authoringInfo,D=(R==null?void 0:R.type)==="univariate-color-size",B=D&&(R==null?void 0:R.univariateTheme)==="above-and-below",z=!!Mp(t,"reference-size"),W=!!Mp(t,"spike");if(!k&&w&&(k=h.map(ue=>ue.value),C=h.some(ue=>!!ue.label),t.type==="flow"&&(k=e5(k)),C&&(A=h.map(ue=>ue.label))),S&&k!=null&&(k==null?void 0:k.length)>2&&!B&&(k=[k[0],k[k.length-1]]),!k)return null;D&&(k==null?void 0:k.length)!==5&&(k=EIe({minSize:k[0],maxSize:k[k.length-1]}));const Y=S?ubt(t,k):null,ee=Wpt(c),ge=C?null:lbt(k,s);return(await Promise.all(k.map(async(ue,ae)=>{let Se=S?Y[ae]:await i$(e,c,ue,r,n==null?void 0:n.type),le=Se;z&&(Se*=DJ/e.maxSize||1,le=DJ);const be=gbt(c,Se,t,ae);return W&&be.type==="cim"&&(le=await xQ(be)),{value:ue,symbol:be,label:C?A[ae]:ge[ae],size:le,outlineSize:ee}}))).reverse()}function ubt(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[RJ,LJ];if(r){const s=e[0],o=e[e.length-1],a=RJ,l=LJ;n=e.map(c=>a+(c-s)/(o-s)*(l-a))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function dbt(t,e){var o;const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return((o=t.visualVariables)==null?void 0:o.some(a=>a.type==="color"))&&(n.type.includes("3d")?$Ie(n):TIe(n)),n}async function hbt(t,e){var n,s,o,a,l;if(t.type==="flow")return RCe(t,e);if(t.type==="pie-chart")return new jr({color:null,outline:(n=t.outline)!=null&&n.width?t.outline:new Vr});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const c=t.classBreakInfos;i=c&&c[0]&&c[0].symbol,r=c.length>1}else if(t.type==="unique-value"){const c=t.uniqueValueInfos;i=(s=c==null?void 0:c[0])==null?void 0:s.symbol,r=c!=null&&c.length>1}if(!i||pbt(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))$Ie(i);else if(Mp(t,"reference-size")&&i.type==="cim")rQ(i,{color:e??(t.type!=="class-breaks"?new Ye(l5):null)});else if(Mp(t,"spike")&&i.type==="cim"){const c=new Ye(l5),h=new Ye(Xw),m=((o=i.data.symbol)==null?void 0:o.type)==="CIMPointSymbol"?i.data.symbol:null,y=!!((l=(a=m==null?void 0:m.symbolLayers)==null?void 0:a.find(({type:x})=>x==="CIMSolidStroke"))!=null&&l.colorLocked);let v,w=e??void 0;if(w){const x=oCe(w),S=f$e();(!S&&x>225||S&&x<25)&&(w=c,v=y?h:c)}else w=c,v=y?h:c;zCe(i,{color:w,strokeColor:v})}else TIe(i);return i}function pbt(t){var e;return qd(t)?((e=t.symbolLayers)==null?void 0:e.some(i=>(i==null?void 0:i.type)==="fill"))??!1:(t==null?void 0:t.type.includes("fill"))??!1}function $Ie(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:Xw}}):t.symbolLayers.forEach(e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:l5}:(e.material={color:SIe},e.outline={color:Xw,size:1.5})})}function TIe(t){var i,r;const e=f$e();t.type==="cim"?XEe(t,new Ye(l5)):t.type.includes("line")?t.color=Xw:(t.color=e?Xw:SIe,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=Xw):t.outline={color:Xw,width:1.5}))}async function fbt(t,e,i,r){const n=(await $e(async()=>{const{getSizeRangeAtScale:a}=await Promise.resolve().then(()=>M1);return{getSizeRangeAtScale:a}},void 0)).getSizeRangeAtScale(t,i,r),s=n&&EIe(n);if(!n||!s)return;let o=s.map(a=>mbt(a,t,n));o=e5(o);for(let a=1;a<o.length-1;a++){const l=await ybt(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],s[a]=l[1])}return o}function EIe(t){const e=t.minSize,i=t.maxSize,r=rbt,n=(i-e)/(r-1),s=[];for(let o=0;o<r;o++)s.push(e+n*o);return s}function mbt(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=s:t>=n?a=o:a=(t-r)/(n-r)*(o-s)+s,a}async function ybt(t,e,i,r,n,s){const o=await i$(t,e,i,n,s),a=await i$(t,e,r,n,s),l=QF(i),c=l.fractional,h=ibt;let m=l.integer,y=null,v=null;i>0&&i<1&&(y=10**c,m=QF(i*=y).integer);for(let w=m-1;w>=0;w--){const x=10**w;let S=Math.floor(i/x)*x,C=Math.ceil(i/x)*x;y!=null&&(S/=y,C/=y);let k=(S+C)/2;[,k]=e5([S,k,C],{indexes:[1]});const A=await i$(t,e,S,n,s),R=await i$(t,e,C,n,s),D=await i$(t,e,k,n,s),B=sN(o,A,a,null),z=sN(o,R,a,null),W=sN(o,D,a,null);let Y=B.previous<=h,ee=z.previous<=h;if(Y&&ee&&(B.previous<=z.previous?(Y=!0,ee=!1):(ee=!0,Y=!1)),Y?v=[S,A]:ee?v=[C,R]:W.previous<=h&&(v=[k,D]),v)break}return v}async function i$(t,e,i,r,n){const{getSize:s}=await $e(()=>Promise.resolve().then(()=>M1),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function gbt(t,e,i,r){var s,o;((s=i==null?void 0:i.authoringInfo)==null?void 0:s.type)==="univariate-color-size"&&((o=i==null?void 0:i.authoringInfo)==null?void 0:o.univariateTheme)==="above-and-below"&&i.type==="class-breaks"&&(t=dbt(i,r));const n=t.clone();if(qd(n))nj(n)||n.symbolLayers.forEach(a=>{a.type!=="fill"&&(a.size=e)});else if(nbt(n))n.size=e;else if(sbt(n)){const a=n.width,l=n.height;n.height=e,n.width=e*(a/l)}else obt(n)?n.width=e:abt(n)?n.font&&(n.font.size=e):n.type==="cim"&&Mp(i,"reference-size")?rQ(n,{innerDotSize:e,outerRingSize:DJ}):n.type==="cim"&&Mp(i,"spike")&&zCe(n,{defaultHeight:e,primitiveOverrides:null});return n}function vbt(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return fy(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Mpe=16,bbt="https://utility.arcgis.com/sharing/tools/legend",wbt="esri.layers.ImageryLayer",_bt="esri.layers.ImageryTileLayer",xbt="esri.layers.WCSLayer",v3=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Sbt=new Et({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),b3=new jr({size:6,outline:{color:[128,128,128,.5],width:.5}}),$bt=new Io({style:"solid"});function NJ(t){return t.type==="flow"}function CIe(t){return t.type==="vector-field"}function IIe(t){return t.type==="raster-colormap"}function MIe(t){return t.type==="raster-stretch"}function kIe(t){return t.type==="raster-shaded-relief"}function r$(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function bw(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function ww(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function AIe(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function Tbt(t){return SQ(t)||$Q(t)||TQ(t)||Ebt(t)}function Ebt(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function SQ(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function $Q(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function TQ(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function OIe(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function PIe(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function Cbt(t,e){return r$(t)||bw(t)||ww(t)||AIe(t)||OIe(t)||PIe(t)?e.type==="2d"||WEe(t):MIe(t)||IIe(t)||kIe(t)||SQ(t)||$Q(t)||TQ(t)||CIe(t)||NJ(t)}function Ibt(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function G8(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function Mbt(t){return t.declaredClass==="esri.layers.VoxelLayer"}function kbt(t){return t.declaredClass==="esri.layers.WMSLayer"}function Abt(t){return t.declaredClass==="esri.layers.WMTSLayer"}function H8(t){return t.declaredClass==="esri.layers.MapImageLayer"}function kpe(t){return t.declaredClass==="esri.layers.TileLayer"}function Yx(t){return t.declaredClass===wbt}function w3(t){return t.declaredClass===_bt}function Obt(t){return t.declaredClass===xbt}function Pbt(t){return t.type==="stretch-ramp"}function Lbt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function Rbt(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function Ape(t){return"sublayers"in t}function Ope(t){return t&&"symbol"in t}async function Gf(t,e){const i=await u4("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),Zp(i[t],{label:e})}function Dbt(t,e){const{field:i,field2:r,field3:n,fieldDelimiter:s,valueExpression:o}=t;if(!i)return null;const a=!i&&!o||!r&&!n?[e]:e==null?void 0:e.toString().split(s||""),l=i?{[i]:a==null?void 0:a[0]}:null;return l&&(r&&(l[r]=a==null?void 0:a[1]),n&&(l[n]=a==null?void 0:a[2])),l}const Nbt=new jr({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Xx={},Nn=class extends st{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new Ze,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([ua(()=>this.children,"change",e=>{const{added:i,removed:r}=e;i.forEach(n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(Le(()=>n.ready,t,gi),s)}),r.forEach(n=>this.removeHandles(n.layer.uid)),t()})]),this.keepCacheOnDestroy||(Xx={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Xx=null),this._layerDefinitionExpressionClause=null}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new ud,e.effect=t.effect,e.endTransition(),e.scale=this.scale),e}get opacity(){var n;const t=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?!!("displayFilterInfo"in t&&t.displayFilterInfo&&ww(t.renderer))||this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,i=>{var r;if(E_e(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,s=n==null?void 0:n.drawingInfo,o=s&&kut(s.renderer),a=Sbt.read(n.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:a}):(Ce.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i,this.notifyChange("ready")}catch(i){Ce.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,i;const t=this.layer;if(Mbt(t))this._constructLegendElementsForVoxelLayer();else if(Abt(t))this._constructLegendElementsForWMTSlayer();else if(kbt(t))await this._constructLegendElementsForWMSSublayers();else if(Ibt(t))await this._constructLegendElementsForBuildingSceneLayer();else if(H8(t)||kpe(t)||G8(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(Yx(t)){const n=t;r=(((e=n==null?void 0:n.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}if(w3(t)||t.type==="link-chart")return;await this._getLegendLayers(`${t.uid}-${r}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map(async o=>{if(Yx(t)){const l=Le(()=>[t.rasterFunction,t.bandIds],()=>NO(async()=>{Xx.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a!=null&&a.infos.length&&(Yx(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")});await Promise.allSettled(s)}).catch(n=>{Ce.getLogger(this).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!i&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await Vp(()=>!e.updating);const r=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in e&&await e.queryFeatureCount(r):"queryFeatureCount"in t&&await t.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){return this.children.some(t=>t.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(v3.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=(e==null?void 0:e.some(s=>{var o;return/\$view\.scale/.test(((o=s.valueExpressionInfo)==null?void 0:o.expression)||"")}))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||v3.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(i=>this._isLayerScaleDriven(i));const e=t.parent;if(t.loaded===!1&&e&&H8(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){var r;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(Le(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(Le(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((r=e.uniqueValues)!=null&&r.length){const n=[];e.uniqueValues.forEach(s=>{s.enabled&&n.push({label:s.label||`${s.value}`,value:s.value,symbol:new Io({color:s.color,outline:null})})}),n.length&&i.push({type:"symbol-table",title:e.label,infos:n})}else if(e.transferFunction){const{colorStops:n,stretchRange:s}=e.transferFunction,o=n.toArray().reverse(),a=s.map((c,h)=>`${h===0?OCe:PCe} ${vbt(c)}`).reverse(),l=o.map(c=>({color:c.color,value:null,label:null}));l[0].label=a[0],l[l.length-1].label=a[1],i.push({type:"color-ramp",title:e.label,infos:l,preview:yw(o.map(c=>c.color),{ariaLabel:await Gf("previewColorRampAriaLabel")})})}}await this._generatePreviewsForLegendElements(i,{opacity:t.opacity}),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){var i,r;this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;this.addHandles(Le(()=>{const{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const e=t.styleId?(r=(i=t.styles)==null?void 0:i.find(({id:n})=>n===t.styleId))==null?void 0:r.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(Le(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){var o,a;const i=this.layer,r=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=((a=(o=this.sublayerIds)==null?void 0:o.map(l=>i.findSublayerById(l)))==null?void 0:a.filter(Mr))??[],s=n.length?n:t.toArray();for(const l of s){const c=Le(()=>[l.title,l.visible,l.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(c,"wms-sublayers-watcher"),!this.respectLayerVisibility||l.visible&&l.legendEnabled){const h=await this._generateSymbolTableElementForWMSSublayer(l,e);h!=null&&h.infos.length&&r.unshift(h)}}return r}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(r=>r);return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var o;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=dk(i,e));let n=null;const s=(o=t.layer)==null?void 0:o.opacity;try{n=(await Ot(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=Xx&&Xx[t];return i?Promise.resolve(i):this._legendRequest(e).then(r=>{const n=r.layers;return Xx[t]=n,n})}_legendRequest(t){var n;const e=this.layer;let i={f:"json",dynamicLayers:t};if(Yx(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:a,customParameters:l}=e;i={raster:o,viewId:a,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.slice(0,s)+"/legend"+r.slice(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),o=s===-1?r:r.slice(0,s)+r.slice(s+5);r=bbt+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return Ot(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(Le(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=Le(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=(n==null?void 0:n.opacity)!=null?n.opacity:null,a=o!=null?o*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...c),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;if(H8(t)||kpe(t)||G8(t)){this.addHandles(Le(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){Ce.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=G8(r)?this.sublayerIds.map(o=>r.findSublayerForSubtypeCode(o)).filter(Mr):this.sublayerIds.map(o=>r.findSublayerById(o)).filter(Mr));for(const o of s){const a=Le(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,c=l!=null?l*e:e,h=!Ape(o)||o.originIdOf("renderer")>Bt.SERVICE&&!o.sublayers;if(o.renderer&&h)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:c,sublayer:o}),...n];else if(Ape(o)){const m=await this._generateSymbolTableElementForSublayer(o,c,i);m&&n.unshift(m)}}}return n.filter(o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>Bt.SERVICE||t.originIdOf("labelingInfo")>Bt.SERVICE||t.originIdOf("labelsVisible")>Bt.SERVICE){const l=new Zc({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach(l=>i.set(l.layerId,l))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>Bt.SERVICE)){const a=(e==null?void 0:e.title)||this._getRendererTitle(r,e);a&&(n&&typeof a!="string"&&"title"in a&&(a.title=n),n=a)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(a=>{var c;const l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(h=>h.groupId===a.id),t.layerId,i)};((c=l.infos)==null?void 0:c.length)>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map(r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=Dje(`${this.layer.url}/${e}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}}).filter(Mr)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){var o;if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some(a=>a.values);let n=0,s=null;return r&&t.some((a,l)=>(a.values||(n=l,s=a,s.label||(s.label="others")),s!=null)),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),(o=i.legendOptions)!=null&&o.order||t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!Cbt(t,this.view))return Ce.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(Tbt(t))return this._constructPointCloudRendererLegendElements(t,e);if(OIe(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return PIe(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var o;const i=e.title,r=[];let n=null,s=null;if(SQ(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(b3,a.color)})});else if($Q(t)){const a=t.stops;let l=null;if(a!=null&&a.length&&(a.length===1&&(l=a[0].color),!l)){const h=a[0].value,m=a[a.length-1].value;h!=null&&m!=null&&(l=NCe(h+(m-h)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(b3,l||b3.color)}]};const c=imt(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:c,preview:yw(c.map(h=>h.color),{ariaLabel:await Gf("previewColorRampAriaLabel")})}}else TQ(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(o=t.colorUniqueValueInfos)==null||o.forEach(a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(b3,a.color)})}));return n!=null&&n.infos.length&&r.push(n),s!=null&&s.infos.length&&r.push(s),await this._generatePreviewsForLegendElements(r,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!t.colorModulation}}),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:o,dotSize:a}=t,l=this.effectList,c=l==null?void 0:l.effects.map(C=>C.toJSON()),h=RF(c),m=await Gf("previewTemplateAriaLabel",r||n),y=a+"-"+i+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+h,v=this._dotDensityUrlCache,w=v.has(y)?v.get(y):Lft(t,i,{ariaLabel:m});v.set(y,w);const x={shape:{type:"image",x:0,y:0,width:w.width,height:w.height,src:w.src},fill:null,stroke:null,offset:[0,0]},S=IC([[x]],[w.width,w.height],{effectView:this.effectList,ariaLabel:m});return{opacity:1,src:w.src,preview:S,width:w.width,height:w.height}}async _constructDotDensityRendererLegendElements(t){var n;const e=t.calculateDotValue(this.view.scale),i=(n=t.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const o=await this._getElementInfoForDotDensity(t,s);o.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(t){var o,a,l,c;const e=[];let i=null;const r=t.outline;t.attributes.forEach(h=>{const m=new jr({color:h.color,outline:r}),y=h.label||h.valueExpressionTitle||h.field;e.push({label:y,symbol:m})});const n=e.length?[...e]:[];if((o=t.othersCategory)!=null&&o.color&&((a=t.othersCategory)==null?void 0:a.threshold)!==0){const h=new jr({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",e.push({label:i,symbol:h})}if((l=t.defaultColor)!=null&&l.a){const h=new jr({color:t.defaultColor,outline:r});e.push({label:t.defaultLabel,symbol:h})}const s=await this._getVisualVariableLegendElements(t,this.layer)||[];if(e.length){s.unshift({type:"symbol-table",title:null,infos:e});const h=n.filter(y=>y.label!==i).map(y=>y.symbol.color).filter(Boolean),m=Rft(h,{holePercentage:t.holePercentage,backgroundColor:(c=t.backgroundFillSymbol)==null?void 0:c.color,effectList:this.effectList,outline:r,ariaLabel:await Gf("previewPieChartAriaLabel")});s.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:e,preview:m})}return await this._generatePreviewsForLegendElements(s,{opacity:this.layer.opacity,effectView:this.effectList}),s}async _getWhereClause(t,e,i){const r=await ZX(t,i),n=new Set,{field:s,field2:o,field3:a}=e;vb(n,i,[s,o,a]),Oo(n,i,e.valueExpression);const l=new Set(Array.from(n,h=>h.toLowerCase())),c=r==null?void 0:r.fieldNames.map(h=>h.toLowerCase());return c!=null&&c.some(h=>!l.has(h))?null:r}async _processDefinitionExpression(t,e){if(!("definitionExpression"in t))return;const i=t.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,e,t.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(t,e){if(!("displayFilterInfo"in t))return;const i=t.displayFilterInfo?tot(t.displayFilterInfo,this.view):null;return i!=null&&i.where?this._layerDisplayFilterId!==(i==null?void 0:i.id)&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,e,t.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=i==null?void 0:i.id,i}async _constructRendererLegendElements(t,e={}){var C,k,A,R,D,B,z;const{title:i,sublayer:r}=e,n=r||this.layer,s=Mp(t,"reference-size"),o=Mp(t,"spike");let a=null;ww(t)&&(await this._processDefinitionExpression(n,t),a=await this._processDisplayFilter(n,t)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const l=await this._getVisualVariableLegendElements(t,n)||[],c={type:"symbol-table",title:i||this._getRendererTitle(t,n),infos:[]};let h=null,m=!1;const y=new Set;if(NJ(t)&&!this._hasSizeRamp){const W=await RCe(t);c.infos.push({label:null,symbol:W})}else if(Lbt(t)){let W=i;const Y=Rbt(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",ee=l.findIndex(Se=>Se.type==="color-ramp"),ge=ee!==-1?l.splice(ee,1)[0]:null,fe=l.findIndex(Se=>Se.type==="size-ramp"),ue=fe!==-1?l.splice(fe,1)[0]:null,ae=[];ge&&(W=ge.title,ae.push(ge)),ue&&(W=ue.title,ae.push(ue)),ae.length>0&&l.push({type:Y,title:W,infos:ae})}else if(AIe(t)){const W=smt(t);l.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,n),infos:W,preview:yw(W.map(Y=>Y.color),{effectList:this.effectList,ariaLabel:await Gf("previewColorRampAriaLabel")})})}else if(ww(t)){const W=t.authoringInfo;if(W&&W.type==="relationship"){const{numClasses:Y,field1:ee,field2:ge}=W,fe=W.focus;if(Y&&ee&&ge){const ue=[ee,ge];let ae=MCe(fe)||0;for(const le of ue){const{field:be,normalizationField:Oe,label:Be}=le,se=Be||{field:this._getFieldAlias(be,n),normField:Oe&&this._getFieldAlias(Oe,n)},Pe=Nbt.clone();Pe.angle=ae,c.infos.push({label:se,symbol:Pe}),y.add(Pe),ae+=90}const Se=Pft({focus:fe,numClasses:Y,infos:t.uniqueValueInfos??[]});l.unshift(Se)}}else if(Yx(this.layer)||w3(this.layer))(C=t.uniqueValueInfos)==null||C.forEach(Y=>{Y.symbol&&this._checkClausesForUVR(t,Y.value)&&c.infos.push({label:Y.label||Y.value,value:Y.value,symbol:Y.symbol})});else{const{field:Y,field2:ee,field3:ge,fieldDelimiter:fe,valueExpression:ue,defaultSymbol:ae}=t,Se=!(!Y&&!ue||!ee&&!ge),le=this._layerDisplayFilterClause?a==null?void 0:a.title:null,be=[];if((k=t.uniqueValueGroups)==null||k.forEach(Oe=>{var se;const Be={type:"symbol-table",title:le||Oe.heading,infos:[]};(se=Oe.classes)==null||se.forEach(Pe=>{const{symbol:rt,values:it}=Pe;if(rt){const _t=[],ri=[];for(const gt of it??[]){const{value:Eu,value2:fa,value3:kl}=gt,ma=[],ya=[];(Y||ue)&&(ma.push(Eu),ya.push(this._getDomainName(Y,Eu,n))),ee&&(ma.push(fa),ya.push(this._getDomainName(ee,fa,n))),ge&&(ma.push(kl),ya.push(this._getDomainName(ge,kl,n))),_t.push(Se?ma.join(fe||""):ma[0]),ri.push(ya.join(" - "))}const zt=_t.join(", ");let kr=Pe.label;if(!kr){const gt=ri.filter(Boolean);kr=gt.length?gt.join(", "):zt}const $i=rt.clone();$i.type==="cim"&&s&&rQ($i,{innerDotSize:.5*Mpe,outerRingSize:Mpe}),_t.some(gt=>this._checkClausesForUVR(t,gt))&&Be.infos.push({label:kr,value:zt,symbol:$i})}}),Be.infos.length&&be.push(Be)}),be.length){const Oe=be[0];if(be.length===1&&"title"in Oe&&!Oe.title){const Be=((A=Oe.infos)==null?void 0:A.filter(Ope))??[];c.infos.push(...Be)}else ae&&(be.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:ae}]}),m=!0),c.infos.push(...be);i||(R=t.legendOptions)!=null&&R.title||t.valueExpressionTitle||(c.title=null)}}t.defaultSymbol&&!m&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),m=!0)}else if(bw(t)){if(!s&&!o){if(h=this._isUnclassedRenderer(t),!h||!this._hasSizeRamp){const W=t.classBreakInfos.filter(({symbol:ee})=>ee),Y=((D=t.legendOptions)==null?void 0:D.order)==="ascending-values";for(const{label:ee,minValue:ge,maxValue:fe,symbol:ue}of W){const ae={label:ee||(h?null:`${ge} - ${fe}`),value:[ge,fe],symbol:ue};Y?c.infos.push(ae):c.infos.unshift(ae)}h&&(c.title=null),this._updateInfosForClassedSizeRenderer(t,c.infos)}t.defaultSymbol&&!h&&(c.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),m=!0)}}else if(MIe(t))if(w3(this.layer)||Obt(this.layer)){const W=await this._constructTileImageryStretchRendererElements(t);Pbt(W)?l.push(W):c.infos=W}else{const W=this.layer;let Y,ee;(B=t.customStatistics)!=null&&B.length&&({min:Y,max:ee}=t.customStatistics[0]);let ge=[],fe=W.serviceRasterInfo;if(W.rasterFunction)try{fe=await W.generateRasterInfo(W.rasterFunction)}catch{}const ue=YF(fe.pixelType);if(fe.bandCount===1){const ae=((z=W.bandIds)==null?void 0:z[0])||0;Y=Y??(fe.statistics?fe.statistics[ae].min:ue[0]),ee=ee??(fe.statistics?fe.statistics[ae].max:ue[1]),Y||ee?l.push(await this._getStretchLegendElements(t,{min:Y,max:ee})):this._getServerSideLegend()}else if(W.bandIds&&W.bandIds.length===1)Y=Y??(fe.statistics?fe.statistics[W.bandIds[0]].min:ue[0]),ee=ee??(fe.statistics?fe.statistics[W.bandIds[0]].max:ue[1]),Y||ee?l.push(await this._getStretchLegendElements(t,{min:Y,max:ee})):this._getServerSideLegend();else if(fe.bandCount>=3){const{bandInfos:ae}=fe,{bandIds:Se}=W;ae.length>=fe.bandCount?(Se==null?void 0:Se.length)===3?(ge=Se.map(le=>ae[le].name),c.infos=this._createSymbolTableElementMultiBand(ge)):W.format==="lerc"?(ge=[0,1,2].map(le=>ae[le].name),c.infos=this._createSymbolTableElementMultiBand(ge)):this._getServerSideLegend():W.format==="lerc"?(ge=["band1","band2","band3"],c.infos=this._createSymbolTableElementMultiBand(ge)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(IIe(t))t.colormapInfos.forEach(W=>{c.infos.push({label:W.label,value:W.value,symbol:this._getAppliedCloneSymbol($bt,W.color)})});else if(r$(t)){let W=t.symbol;switch(e.geometryType){case"point":W="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":W="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":W="polygonSymbol"in n?n.polygonSymbol:null}const Y=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&Y&&c.infos.push({label:t.label,symbol:W})}else if(CIe(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),c.title=t.attributeField;const W=t.getClassBreakInfos();W!=null&&W.length?W.forEach(Y=>{c.infos.push({label:Y.minValue+" - "+Y.maxValue,symbol:Y.symbol})}):c.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else kIe(t)&&l.push(await this._getStretchLegendElements(t,{min:0,max:255}));const v=t.defaultSymbol;!v||m||r$(t)||h&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||l.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:v}]}),c.infos.length&&l.unshift(c);const w=e.opacity==null?this.opacity:e.opacity,x=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),S=Yx(this.layer)||w3(this.layer);return await this._generatePreviewsForLegendElements(l,{opacity:w,symbolConfig:{isTall:x,isSquareFill:S},effectView:this.effectList},{defaultSymbol:v,arrowMarkerSymbols:y}),t=null,l}_checkClausesForUVR(t,e){const i=Dbt(t,e);return!i||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[t]}async _constructTileImageryStretchRendererElements(t){var a,l,c;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=(a=t==null?void 0:t.customStatistics)!=null&&a.length?t.customStatistics:i==null?void 0:i.statistics;if(s)({min:r,max:n}=s[0]);else{const h=YF(i.pixelType);r=h[0],n=h[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:n});const o=((c=e==null?void 0:e.bandIds)!=null&&c.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(h=>i.bandInfos[h].name);return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(t,e){const i=t.colorRamp,r=nmt(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:yw(r.map(n=>n.color),{ariaLabel:await Gf("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await cbt(i,e,await SJ(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:Yft[n],opacity:this.opacity??1})}),e}_updateInfosForClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some(n=>nj(n.symbol));if(i&&r){const n=LJ,s=RJ,o=t.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);e.forEach((l,c)=>{l.size=n-a*c})}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _generatePreviewsForLegendElements(t,e,i){var n,s;const r=[];for(const o of t)for(const a of o.infos??[])if("infos"in a&&a.infos&&r.push(this._generatePreviewsForLegendElements([a],e,i)),Ope(a)&&a.symbol&&!a.preview){let l=!0;if(a.symbol.type==="cim"){const{minScale:c,maxScale:h}=a.symbol.data;(c&&c<this.scale||h&&h>this.scale)&&(l=!1)}l&&r.push(this._generateSymbolPreviewForInfo(a,{...e,clipBloomEffect:"theme"in o&&o.theme==="spike",effectView:(n=i==null?void 0:i.arrowMarkerSymbols)!=null&&n.has(a.symbol)?null:e.effectView},i?{isDefault:a.symbol===i.defaultSymbol,applyScaleDrivenSize:!((s=i.arrowMarkerSymbols)!=null&&s.has(a.symbol))}:void 0))}await Promise.all(r)}async _generateSymbolPreviewForInfo(t,e,i){var r,n,s,o;try{let a=!(i!=null&&i.isDefault)&&t.size==null&&this._hasSizeRamp?Di(In.size):t.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:h}=await $e(()=>Promise.resolve().then(()=>M1),void 0);a=h(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}const l=t.symbol.type==="cim"?{style:"legend",cimOptions:{allowScalingUp:!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize)),viewParams:this.isScaleDriven?{viewingMode:((r=this.view)==null?void 0:r.type)==="2d"?"map":(n=this.view)==null?void 0:n.viewingMode,scale:(s=this.view)==null?void 0:s.scale}:null}}:{},c=t.label&&typeof t.label!="string"?null:await Gf("previewTemplateAriaLabel",t.label);t.preview=await kCe(t.symbol,{size:a,scale:!1,ariaLabel:c,...e,...l})}catch{t.preview=null,Ce.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${(o=t.symbol)==null?void 0:o.type}`)}}_getClusterRenderer(t){var n,s;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer?this.layer.renderer:null,i=((n=t.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),r=Fft(t,this.layerView,this.view);if(r&&i!=null&&"visualVariables"in i&&!((s=i.visualVariables)==null?void 0:s.some(a=>a.type==="size"&&a.target!=="outline"&&!v3.test(a.valueExpression)))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:c}=t;r.legendOptions=new bTe({showLegend:l!==c})}const a=i.visualVariables||[];i.visualVariables=a.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(t){const e=[],i=t.clone(),r=await SJ(i);if(bw(i)||ww(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,r).then(o=>{s.symbol=o}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,r$(i))}).catch(()=>{this._applySymbolToRenderer(i,null,r$(i))})),await Promise.allSettled(e),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await t.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(r,e)}catch{throw Ce.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?XEe(i,e):i.color&&(i.color=new Ye(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new Ye(e))})}async _getVisualVariableLegendElements(t,e){var y,v;if(!("visualVariables"in t)||t.type==="vector-field")return null;const i=t.visualVariables??[],r=[],n=[],s=[],o=Mp(t,"reference-size")??Mp(t,"spike");let a;if(((y=o==null?void 0:o.sizeStops)==null?void 0:y.length)===2&&(bw(t)||ww(t))){const[w,x]=o.sizeStops;a=new Ci({field:o.field??void 0,normalizationField:o.normalizationField,minSize:da(w.size,10,100),maxSize:da(x.size,50,150),minDataValue:w.value,maxDataValue:x.value}),n.push(a)}for(const w of i)w.type==="color"?r.push(w):w.type==="size"?n.push(w):w.type==="opacity"&&s.push(w);const l=[...r,...n,...s];let c,h;if(r.length===0&&bw(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const w=t.classBreakInfos[0];c=w&&w.symbol}if(r.length===0&&r$(t)&&(c=t.symbol),c)if(c.type.includes("3d")){const w=c.symbolLayers.at(0);w.type==="water"?w.color!=null&&(h=w.color):((v=w.material)==null?void 0:v.color)!=null&&(h=w.material.color)}else c.url||(h=c.color);const m=this.effectList;return(await Promise.all(l.map(async w=>{if(!w.legendOptions||w.legendOptions.showLegend!==!1){const x=NJ(t)?w.field:this._getRampTitle(w,e);let S=null;const C=Qft(e,w,this.view.timeZone);if(w.type==="color"){const k=await Xhe(w,null,C)??[];S={type:"color-ramp",title:x,infos:k,preview:yw(k.map(A=>A.color),{effectList:m,ariaLabel:await Gf("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=k.length>0)}else if(w.type==="size"&&w.target!=="outline")v3.test(w.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=w):(S=await this._getSizeLegendElement(x,w,t,C),a===w&&(o==null?void 0:o.theme)==="spike"&&(S.theme=o.theme),this._hasSizeRamp||(this._hasSizeRamp=!(S.infos==null||!S.infos.length)));else if(w.type==="opacity"){const k=await Xhe(w,h,C)??[];S={type:"opacity-ramp",title:x,infos:k,preview:yw(k.map(A=>A.color),{effectList:m,ariaLabel:await Gf("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=k.length>0)}return S!=null&&S.infos?S:null}}))).filter(Mr)}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),s=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name,{excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")}):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){var c,h;let i=t.field,r=t.normalizationField,n=!1,s=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(c=t.legendOptions)==null?void 0:c.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((h=e.renderer.authoringInfo)!=null&&h.visualVariables)){const m=e.renderer.authoringInfo.visualVariables;for(let y=0;y<m.length;y++){const v=m[y];if(v.type==="color"){if(v.style==="ratio"){n=!0;break}if(v.style==="percent"){s=!0;break}if(v.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){var a;const i=t;if((a=i.legendOptions)!=null&&a.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(bw(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,ww(i)){const{field2:l,field3:c,fieldDelimiter:h}=i;let m=r&&this._getFieldAlias(r,e);return l&&(m=`<${m}>${h}<${this._getFieldAlias(l,e)}>`,c&&(m=`${m}${h}<${this._getFieldAlias(c,e)}>`)),m}let o=null;return(r||n)&&(o={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),o}_getFieldAlias(t,e){var h,m;const i="popupTemplate"in e?e.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n=r==null?void 0:r.find(y=>t===y.fieldName),s=null;"getField"in e&&e.getField?s=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(s=e.fieldsIndex.get(t));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(n??(n="popupTemplate"in a?(m=(h=a.popupTemplate)==null?void 0:h.fieldInfos)==null?void 0:m.find(y=>{var v;return(t==null?void 0:t.toLowerCase())===((v=y.fieldName)==null?void 0:v.toLowerCase())}):void 0),"fields"in a&&a.fields&&(o=a.fields.find(y=>{var v;return((v=y.name)==null?void 0:v.toLowerCase())===(t==null?void 0:t.toLowerCase())})));const l=n||s||o;let c=null;return l&&(c=(n==null?void 0:n.label)||(s==null?void 0:s.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),c}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return bw(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some(r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField)):!!e.length),i}};u([p()],Nn.prototype,"children",void 0),u([p({readOnly:!0})],Nn.prototype,"effectList",null),u([p()],Nn.prototype,"layerView",void 0),u([p()],Nn.prototype,"layer",void 0),u([p()],Nn.prototype,"legendElements",void 0),u([p({readOnly:!0})],Nn.prototype,"opacity",null),u([p()],Nn.prototype,"parent",void 0),u([p({readOnly:!0,dependsOn:[]})],Nn.prototype,"ready",null),u([p()],Nn.prototype,"hideLayersNotInCurrentView",void 0),u([p()],Nn.prototype,"keepCacheOnDestroy",void 0),u([p()],Nn.prototype,"respectLayerDefinitionExpression",void 0),u([p()],Nn.prototype,"respectLayerVisibility",void 0),u([p({readOnly:!0})],Nn.prototype,"scale",null),u([p()],Nn.prototype,"sublayerIds",void 0),u([p({readOnly:!0})],Nn.prototype,"isScaleDriven",null),u([p()],Nn.prototype,"title",void 0),u([p({readOnly:!0,dependsOn:["ready"],value:0})],Nn.prototype,"version",null),u([p()],Nn.prototype,"view",void 0),Nn=u([U("esri.widgets.Legend.support.ActiveLayerInfo")],Nn);const k0={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},LIe=Ze.ofType(Nn),zbt=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),RIe="view.basemapView.baseLayerViews",DIe="view.groundView.layerViews",NIe="view.basemapView.referenceLayerViews",Fbt=[RIe,DIe,"view.layerViews",NIe];let ic=class extends st{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new Ze,this.activeLayerInfos=new LIe,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(Le(()=>this.view,()=>this._viewHandles(),gi),k0.view),this.addHandles(WO(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(k0.state),this.view&&this.addHandles(Le(()=>this.state,()=>this._stateHandles(),gi),k0.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([k0.allLayerViews,k0.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),k0.allLayerViews),this.addHandles(Le(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),k0.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach(i=>this._destroyViewActiveLayerInfo(i.uid)),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(s=>{if(!s.parent){const o=s.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}}),e.removeMany(r);const n={};i.allLayerViews.forEach((s,o)=>n[s.layer.uid]=o),e.sort((s,o)=>{const a=n[s.layer.uid]||0;return(n[o.layer.uid]||0)-a})}_generateLayerViews(){const e=[];return Fbt.filter(this._filterLayerViews,this).map(i=>oa(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===RIe||e===NIe),r=!this.groundLegendVisible&&e===DIe;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach(s=>{i.push(s),r(s[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!zbt.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(Le(()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(e){var a;const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];if(!s){const l=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;s=new Nn({layer:i,layerView:e,title:l?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=s}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(a=i.parent)==null?void 0:a.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const l=[Le(()=>i.title,c=>this._titleHandle(c,s)),Le(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol],()=>this._constructLegendElements(s)),hs(()=>{var c;return((c=this.view)==null?void 0:c.stationary)===!0},()=>this._scaleHandle(s),gi),Le(()=>e.layer?Ihe(e.layer,e.view):null,()=>this._constructLegendElements(s)),Le(()=>e.updating,()=>{e.layer!=null&&Ihe(e.layer,e.view)!=null&&this._constructLegendElements(s)}),Le(()=>"effect"in i&&i.effect,()=>this._constructLegendElements(s)),hs(()=>{var c;return(c=this.view)==null?void 0:c.timeZone},()=>this._constructLegendElements(s),gi)];if(this.respectLayerVisibility){const c=Le(()=>e.legendEnabled,m=>this._legendEnabledHandle(m,s)),h=Le(()=>i.legendEnabled,m=>this._legendEnabledHandle(m,s));l.push(c,h)}if(this.respectLayerDefinitionExpression&&"definitionExpression"in i){const c=Le(()=>[i.definitionExpression,this.respectLayerDefinitionExpression],()=>{s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(s)});l.push(c)}this.addHandles(l,r)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const o=(n=this.layerInfos)==null?void 0:n.some(l=>l.layer.uid===r.uid),a=r.parent;a&&"uid"in a&&this._layerViewByLayerId[a.uid]&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach(a=>{const l=a.layer.parent,c=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,h=this._activeLayerInfosByLayerViewId[c==null?void 0:c.uid];h&&(o.push(a),a.parent=h)}),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph"?e.buildLegendElementsForTools():e.children.forEach(r=>this._constructLegendElements(r))}};u([p({type:LIe})],ic.prototype,"activeLayerInfos",void 0),u([p()],ic.prototype,"basemapLegendVisible",void 0),u([p()],ic.prototype,"groundLegendVisible",void 0),u([p()],ic.prototype,"hideLayersNotInCurrentView",void 0),u([p()],ic.prototype,"keepCacheOnDestroy",void 0),u([p()],ic.prototype,"respectLayerDefinitionExpression",void 0),u([p()],ic.prototype,"respectLayerVisibility",void 0),u([p()],ic.prototype,"layerInfos",void 0),u([p({readOnly:!0})],ic.prototype,"state",null),u([p()],ic.prototype,"view",void 0),ic=u([U("esri.widgets.Legend.LegendViewModel")],ic);const ji="esri-legend--card",gM="esri-legend",Rt={base:ji,stacked:`${gM}--stacked`,carouselTitle:`${ji}__carousel-title`,intervalSeparator:`${ji}__interval-separator`,imageryLayerStretchedImage:`${ji}__imagery-layer-image--stretched`,imageLabel:`${ji}__image-label`,layerCaption:`${ji}__layer-caption`,labelElement:`${ji}__label-element`,layerRow:`${ji}__layer-row`,labelCell:`${ji}__label-cell`,message:`${ji}__message`,rampLabel:`${ji}__ramp-label`,section:`${ji}__section`,serviceCaptionText:`${ji}__service-caption-text`,serviceContent:`${ji}__service-content`,service:`${ji}__service`,groupLayer:`${ji}__group-layer`,groupLayerChild:`${ji}__group-layer-child`,symbol:`${ji}__symbol`,sizeRampRow:`${ji}__size-ramp-row`,symbolRow:`${ji}__symbol-row`,symbolCell:`${ji}__symbol-cell`,carousel:`${ji}__carousel`,carouselItem:`${ji}__carousel-item`,intervalSeparatorsContainer:`${ji}__interval-separators-container`,relationshipLabelContainer:`${ji}__relationship-label-container`,labelContainer:`${ji}__label-container`,serviceCaptionContainer:`${ji}__service-caption-container`,symbolContainer:`${ji}__symbol-container`,colorRampContainer:`${ji}__color-ramp-container`,sizeRampContainer:`${ji}__size-ramp-container`,sizeRampPreview:`${ji}__size-ramp-preview`,pieChartRampPreview:`${ji}__pie-chart-ramp-preview`,sizeRampHorizontal:`${gM}__size-ramp--horizontal`,rampLabelsContainer:`${gM}__ramp-labels`,layerInfo:`${gM}__layer-cell ${gM}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};function Ubt(t,e){return e}function mn(t){const e=this;t.appendChild(e)}function HE(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return C5e(e);if("value"in e||"unit"in e)return Zp(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return Ubt(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:zIe(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?Zp(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function zIe(t,e){return!e}function FIe(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function jbt(t,e){var i;return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:fy(t.value??0,{style:"decimal",notation:(i=t.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}function UIe(t,e,i){switch(e){case"heatmap-ramp":return i[t.label]||t.label;case"stretch-ramp":return jbt(t,i);default:return t.label}}function jIe(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,n=HE(e,r,i);return zIe(r,i)&&r.title?`${r.title} (${n})`:n}function VIe(t){return!(!t||typeof t!="object")}const Vbt=25,Bbt=25,Gbt=100;let _w=class extends Yn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return K("div",{class:this.classes(Rt.layerRow,Rt.colorRampContainer)},this._renderRampLabel(e[0]),K("div",{class:Rt.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",n=e.length-1,s=Bbt,o=n>2&&!r?Vbt*n:Gbt,a=o+20,l=10,c=[[{shape:{type:"path",path:`M0 ${s/2} L${l} 0 L${l} ${s} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:s},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:e.map((y,v)=>({color:y.color,offset:r&&"ratio"in y?y.ratio:v/n}))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${s/2} L${o+l} ${s} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],h=yCe(c,a,s),m={filter:pP(this.effectList)??void 0,opacity:i==null?void 0:`${i}`};return K("div",{styles:m},h)}_renderMiddleStopRampLabel(e){const i=e.length%2!=0?e[e.length/2|0]:null;return i?K("div",{class:Rt.intervalSeparatorsContainer},K("div",{class:Rt.intervalSeparator},"|"),this._renderRampLabel(i)):null}_renderRampLabel(e){return K("div",{class:Rt.rampLabel},UIe(e,this.legendElement.type,this.messages))}};u([p()],_w.prototype,"effectList",void 0),u([p()],_w.prototype,"legendElement",void 0),u([p()],_w.prototype,"messages",void 0),u([p()],_w.prototype,"opacity",void 0),_w=u([U("esri.widgets.Legend.styles.card.ColorRamp")],_w);const Hbt="#ddd",yo=window.devicePixelRatio,A0="esri-spike-ramp",ty={spikeRampContainer:`${A0}__container`,spikeRampPreviewContainer:`${A0}__preview-container`,spikeRampPreview:`${A0}__preview`,spikeRampSymbolPreview:`${A0}__symbol-preview`,spikeRampLines:`${A0}__lines`,spikeRampLabelsContainer:`${A0}__labels-container`,spikeRampLabel:`${A0}__label`};function BIe(t){return t.infos.length!==5?null:K("div",{class:ty.spikeRampContainer},K("div",{class:ty.spikeRampPreviewContainer},qbt(t),Wbt(t)),Jbt(t))}function qbt(t){const[e,i,r]=EQ(t).map(({preview:n})=>{if(!n)return null;const s=n.cloneNode(!0);return s.classList.add(ty.spikeRampSymbolPreview),s});return e&&i&&r?K("div",{class:ty.spikeRampPreview},K("div",{afterCreate:mn,bind:r}),K("div",{afterCreate:mn,bind:i}),K("div",{afterCreate:mn,bind:e})):null}function Wbt(t){const[{width:e,height:i},{width:r},{width:n,height:s}]=EQ(t).map(({size:W})=>VIe(W)?{width:ui(W.width),height:ui(W.height)}:{width:0,height:0}),o=10,a=8,l=e+r+n+3*o,c=i,h=document.createElement("canvas");h.width=(l+o)*yo,h.height=c*yo,h.style.width=h.width/yo+"px",h.style.height=h.height/yo+"px";const m=h.getContext("2d");m.beginPath();const y=l-(e/2+o),v=0,w=l+a;m.moveTo(y*yo,v*yo),m.lineTo(w*yo,0*yo);const S=(l-a)/2,C=(i-s)/2,k=l+a,A=(i-s)/2;m.moveTo(S*yo,C*yo),m.lineTo(k*yo,A*yo);const R=n/2,D=c-s,B=l+a,z=c-s;return m.moveTo(R*yo,D*yo),m.lineTo(B*yo,z*yo),m.strokeStyle=Hbt,m.lineWidth=.5*yo,m.stroke(),K("div",{afterCreate:mn,bind:h,class:ty.spikeRampLines})}function Jbt(t){const[{label:e,height:i},{label:r},{label:n,height:s}]=EQ(t).map(({label:h,size:m})=>({label:h,height:VIe(m)?ui(m.height):0})),o=i-s,a={position:"absolute",top:"0"},l={position:"absolute",top:o/2+"px"},c={position:"absolute",top:`${o}px`};return K("div",{class:ty.spikeRampLabelsContainer},K("div",{class:ty.spikeRampLabel,styles:a},e),K("div",{class:ty.spikeRampLabel,styles:l},r),K("div",{class:ty.spikeRampLabel,styles:c},n))}function EQ(t){return t.infos.filter((e,i)=>i%2==0)}const Zbt="#ddd",Kx=window.devicePixelRatio;function Ybt(t){var i,r;if(!t)return;if(t.type.includes("3d")){if(!((i=t.symbolLayers)!=null&&i.length))return;const n=t.symbolLayers.at(-1),s=(r=n.resource)==null?void 0:r.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}const e=t.style;return e==="circle"||e==="diamond"||e==="cross"}function Xbt(t){var e,i;if(t){if(t.type.includes("3d")){if(!((e=t.symbolLayers)!=null&&e.length))return;const r=t.symbolLayers.at(-1),n=(i=r==null?void 0:r.resource)==null?void 0:i.primitive;return n==="triangle"||n==="cone"||n==="tetrahedron"}return t.style==="triangle"}}let xw=class extends Yn{constructor(e,i){super(e,i),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return K("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},BIe(this.legendElement));const{legendElement:e,hasIndicators:i,opacity:r}=this,n=e.infos,s=n.at(0),o=n.at(-1);if(!s||!o)return null;const{label:a,...l}=s,{label:c,...h}=o;let m=l.preview,y=h.preview;const v={"flex-direction":i?"column":"row-reverse"};if(!m||!y)return null;m=m.cloneNode(!0),m.style.display="flex",y=y.cloneNode(!0),y.style.display="flex";const w={opacity:`${r??""}`};return K("div",{class:this.classes(Rt.layerRow,{[Rt.sizeRampRow]:i})},K("div",{class:Rt.rampLabel},i?a:c),K("div",{class:Rt.sizeRampContainer,styles:v},K("div",{afterCreate:mn,bind:m,class:Rt.sizeRampPreview,styles:w}),this._renderSizeRampLines(e),K("div",{afterCreate:mn,bind:y,class:Rt.sizeRampPreview,styles:w})),K("div",{class:Rt.rampLabel},i?c:a))}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),n=i.at(-1);if(!r||!n)return null;const s=r.symbol,o=this.hasIndicators,a=r.size&&typeof r.size=="number"?r.size:0,l=n.size&&typeof n.size=="number"?n.size:0,c=r.outlineSize||0,h=n.outlineSize||0,m=ui(a+c)*Kx,y=ui(l+h)*Kx,v=o?m:m+50*Kx,w=o?m/2+50*Kx:m,x=Xbt(s),S=Ybt(s),C=document.createElement("canvas");C.width=v,C.height=w,C.style.width=C.width/Kx+"px",C.style.height=C.height/Kx+"px";const k=C.getContext("2d");if(o){k.beginPath();const A=0,R=0,D=v/2-y/2,B=w;k.moveTo(A,R),k.lineTo(D,B);const z=v,W=0,Y=v/2+y/2,ee=w;k.moveTo(z,W),k.lineTo(Y,ee)}else{k.beginPath();const A=0,R=w/2-y/2,D=v;k.moveTo(A,R),k.lineTo(D,0);const z=0,W=w/2+y/2,Y=v,ee=w;k.moveTo(z,W),k.lineTo(Y,ee)}return k.strokeStyle=Zbt,k.stroke(),K("div",{afterCreate:mn,bind:C,styles:o?{display:"flex",marginTop:`-${x?0:S?m/2:0}px`,marginBottom:`-${x?y:S?y/2:0}px`}:{display:"flex",marginRight:`-${x?0:S?m/2:0}px`,marginLeft:`-${x?0:S?y/2:0}px`}})}};u([p()],xw.prototype,"hasIndicators",void 0),u([p()],xw.prototype,"legendElement",void 0),u([p()],xw.prototype,"messages",void 0),u([p()],xw.prototype,"opacity",void 0),xw=u([U("esri.widgets.Legend.styles.card.SizeRamp")],xw);const Kbt=tF(),GIe=10,CQ=20,cj=10,IQ=20,MQ={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function Qbt(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?K("svg",{height:"4",width:"10"},K("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):K("svg",{height:"10",width:"10"},K("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function e0t(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${CQ}px`,i.className=MQ.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),Kbt.append(i,Qbt.bind(null,e)),i}function HIe(t,e,i="vertical",r){t.infos.forEach((n,s)=>{if(r&&s===2)n.preview=e0t(e,i);else{const o=(c1(n.size)?ui(n.size):0)+(i==="horizontal"?IQ:cj),a=n.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",c=l?a:document.createElement("div");c.className=MQ.univariateAboveAndBelowSymbol,i==="horizontal"?c.style.width=`${o}px`:c.style.height=`${o}px`,!l&&a&&c.appendChild(a),n.preview=c}})}function uj(t,e="classic"){const i=t.infos,r=i.at(0),n=i.at(-1),s=c1(r.size)?ui(r.size):0,o=c1(n.size)?ui(n.size):0;return e==="classic"?(s+cj)/2:(s-o)/2}function qE(t,e){if(!t)return null;const i=t.infos.map(n=>n.color),r=yw(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return r.className=MQ.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function kQ(t,e,i,r="vertical"){let n=0;const s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o;for(let c=a;c<=l;c++)if(i&&c===o)n+=r==="horizontal"?GIe:CQ;else{const h=s[c].size;n+=(c1(h)?ui(h):0)+(r==="horizontal"?IQ:cj)}return Math.round(n)}function WE(t,e,i,r="vertical"){const n=kQ(t,e,i,r),s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o,c=c1(s[a].size)?s[a].size:0,h=c1(s[l].size)?s[l].size:0,m=e==="full"?c+h:e==="above"?c:h,y=i?r==="vertical"?CQ:GIe:0,v=r==="vertical"?cj*(e==="full"?2:1):IQ*(e==="full"?2:1);return Math.round(n-(ui(m)/2+y/2+v/2))}function qIe(t,e,i="vertical"){const r=t.infos;let n=r.find(({type:o})=>o==="size-ramp"),s=r.find(({type:o})=>o==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],HIe(n,e,i,!0)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function WIe(t,e="vertical"){const i=t.infos;let r=i.find(({type:s})=>s==="size-ramp"),n=i.find(({type:s})=>s==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],HIe(r,null,e,!1)),n&&(n={...n},n.infos=[...n.infos]),e==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}const zJ={marginLeft:"3px"},P$={display:"table-cell",verticalAlign:"middle"},JIe={display:"flex",alignItems:"flex-start"};let Sw=class extends Yn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var B;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=qIe(e,i,"horizontal");if(!s)return null;const a=kQ(s,"full",!0,"horizontal"),l=WE(s,"above",!0,"horizontal"),c=WE(s,"below",!0,"horizontal"),h=12,m=(B=this.messages)==null?void 0:B.previewColorRampAriaLabel,y=qE(o,{width:l,height:h,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:m}),v=qE(o,{width:c,height:h,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:m}),w=uj(s,"card"),x=s.infos.map(z=>z.label),S=x.length-1,C=x.map((z,W)=>W===0||W===S?K("div",{key:W},z):null),k={display:"flex",flexDirection:"column"},A={display:"flex",flexDirection:"row"},R={marginTop:"3px",display:"flex"};U4(this.container)?R.marginRight=`${w}px`:R.marginLeft=`${w}px`;const D={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return K("div",{class:Rt.layerRow,key:`${n}-container`,styles:k},K("div",{class:this.classes(Rt.symbolContainer,Rt.sizeRampHorizontal),styles:A},s.infos.map((z,W)=>K("div",{afterCreate:mn,bind:z.preview,class:Rt.symbol,key:W}))),y?K("div",{class:Rt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:R},K("div",{afterCreate:mn,bind:y}),K("div",{afterCreate:mn,bind:v})):null,K("div",{class:Rt.layerInfo},K("div",{class:Rt.rampLabelsContainer,styles:D},C)))}};u([p()],Sw.prototype,"effectList",void 0),u([p()],Sw.prototype,"legendElement",void 0),u([p()],Sw.prototype,"messages",void 0),u([p()],Sw.prototype,"opacity",void 0),Sw=u([U("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],Sw);let $w=class extends Yn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var C;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=WIe(e,"horizontal");if(!s)return null;const a=kQ(s,"full",!1,"horizontal"),l=WE(s,"full",!1,"horizontal"),c=qE(o,{width:l,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(C=this.messages)==null?void 0:C.previewColorRampAriaLabel}),h=uj(s,"card"),m=s.infos.length-1,y=s.infos.map((k,A)=>A===0||A===m?K("div",{key:A},k.label):null),v={display:"flex",flexDirection:"column"},w={display:"flex",flexDirection:"row"},x={marginTop:"3px",display:"flex"};U4(this.container)?x.marginRight=`${h}px`:x.marginLeft=`${h}px`;const S={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return K("div",{class:Rt.layerRow,key:`${n}-container`,styles:v},K("div",{class:this.classes(Rt.symbolContainer,Rt.sizeRampHorizontal),styles:w},s.infos.map((k,A)=>K("div",{afterCreate:mn,bind:k.preview,class:Rt.symbol,key:A}))),K("div",{class:Rt.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:x},K("div",{afterCreate:mn,bind:c})),K("div",{class:Rt.layerInfo},K("div",{class:Rt.rampLabelsContainer,styles:S},y)))}};u([p()],$w.prototype,"effectList",void 0),u([p()],$w.prototype,"legendElement",void 0),u([p()],$w.prototype,"messages",void 0),u([p()],$w.prototype,"opacity",void 0),$w=u([U("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],$w);function hN({level:t,class:e,...i},r){const n=ZIe(t);return K(`h${n}`,{...i,"aria-level":String(n),class:E$(Ss.heading,e),role:"heading"},r)}function ZIe(t){return da(Math.ceil(t),1,6)}function t0t(t,e=1){return ZIe(t+e)}var FJ;let Qc=FJ=class extends Yn{constructor(t,e){super(t,e),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=jIe(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?K("div",null,K(hN,{class:Rt.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),K(hN,{class:Rt.layerCaption,level:t0t(this.headingLevel)},e)):e?K(hN,{class:Rt.layerCaption,level:this.headingLevel},e):null;return K("section",{"aria-labelledby":this.key,class:Rt.section,id:`${this.key}-panel`,key:this.key,role:"tabpanel",tabIndex:0},i,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return K(xw,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return K(_w,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return wCe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return K("div",{afterCreate:mn,bind:this.legendElement.preview,class:Rt.pieChartRampPreview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return K(Sw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return K($w,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){var s,o,a;const e=t.infos.map(l=>this._renderElementInfo(l,t.legendType)).filter(Boolean);if(!e.length)return null;const i=this.activeLayerInfo.legendElements.some(({type:l})=>l==="relationship-ramp"),r=(a=(o=(s=e[0])==null?void 0:s.properties)==null?void 0:o.classes)==null?void 0:a[Rt.symbolRow],n={[Rt.labelContainer]:!r&&!i,[Rt.relationshipLabelContainer]:i};return K("div",{class:this.classes(n)},e)}_renderElementInfo(t,e){var a;const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return K(FJ,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=FIe(i,e),o=HE(this.messages,r,!1)||"";if("src"in t&&t.src)return K("div",{class:Rt.layerRow,key:`${n}-row`},this._renderImage(t,i,s),K("div",{class:Rt.imageLabel},o));if("symbol"in t&&t.preview){if(!((a=t.symbol)!=null&&a.type.includes("simple-fill"))){if(!t.label)return K("div",{afterCreate:mn,bind:t.preview,key:`${n}-row`});const l={[Rt.symbolCell]:this.hasIndicators};return K("div",{class:this.classes(Rt.layerRow,{[Rt.symbolRow]:this.hasIndicators}),key:`${n}-row`},K("div",{afterCreate:mn,bind:t.preview,class:this.classes(l)}),K("div",{class:this.classes(Rt.imageLabel,{[Rt.labelCell]:this.hasIndicators})},o))}return K("div",{class:Rt.layerRow,key:`${n}-row`},K("div",{class:Rt.labelElement,styles:this._getBackgroundStyles(t)},o))}return null}_getBackgroundStyles(t){var m,y;const e=t.symbol,i=e.color,r=!!(i!=null&&i.a),n="outline"in e?e.outline:null,s=!!((m=n==null?void 0:n.color)!=null&&m.a),o=new Ye(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),a=s&&n.color?new Ye([n.color.r,n.color.g,n.color.b,n.color.a*this.layer.opacity]):new Ye([255,255,255,0]),l=((y=t.symbol.color)==null?void 0:y.isBright)??!0,c=l?"black":"white",h=l?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?o.toCss(!0):"none",color:c,textShadow:`-1px -1px 0 ${h},
                  1px -1px 0 ${h},
                  -1px 1px 0 ${h},
                  1px 1px 0 ${h}`,border:s?`1px solid ${a.toCss(!0)}`:"none",filter:pP(this.effectList)??void 0}}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[Rt.imageryLayerStretchedImage]:i,[Rt.symbol]:!i},a={opacity:`${s??e.opacity}`},l=HE(this.messages,r,!1);return K("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};u([p()],Qc.prototype,"activeLayerInfo",void 0),u([p()],Qc.prototype,"effectList",void 0),u([p()],Qc.prototype,"hasIndicators",void 0),u([p()],Qc.prototype,"headingLevel",void 0),u([p()],Qc.prototype,"isChild",void 0),u([p()],Qc.prototype,"layer",void 0),u([p()],Qc.prototype,"legendElement",void 0),u([p()],Qc.prototype,"messages",void 0),Qc=FJ=u([U("esri.widgets.Legend.styles.card.LegendElement")],Qc);const i0t=768;let tu=class extends Yn{constructor(e,i){super(e,i),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return Ty({carousel:()=>$e(()=>import("./index-CSWASura.js"),[]),"carousel-item":()=>$e(()=>import("./index-CsXmw_E4.js"),[])})}render(){this._hasIndicators=this.layout==="auto"&&this.view&&this.view.container.clientWidth<=i0t||this.layout==="stack";const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),i={[Rt.stacked]:this._hasIndicators};return K("div",{class:this.classes(Rt.base,i)},e||K("div",{class:Rt.message},this.messages.noLegend))}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e!=null&&e.length?K("calcite-carousel",{class:Rt.carousel,label:this.messages.carousel},e.map((r,n)=>K("calcite-carousel-item",{class:Rt.carouselItem,key:n,label:Zp(this.messagesCommon.pagination.pageText,{index:n+1,total:e.length})},r))):null}_renderLayers(){var r;const e=this.activeLayerInfos,i=(r=e==null?void 0:e.toArray())==null?void 0:r.map(n=>this._renderLegendForLayer(n)).filter(Boolean);return i!=null&&i.length?i:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return K("section",{class:this.classes(Rt.service,Rt.groupLayer),key:e.layer.uid},K("div",{class:Rt.serviceCaptionContainer},e.title),i)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var s;const i=(s=e.legendElements)==null?void 0:s.filter(Boolean);if(!(i!=null&&i.length))return null;const r=i.map(o=>K(Qc,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${o.type}`,layer:e.layer,legendElement:o,messages:this.messages})),n={[Rt.groupLayerChild]:!!e.parent};return K("section",{class:this.classes(Rt.service,n),key:e.layer.uid},K("div",{class:Rt.serviceCaptionContainer},K("div",{class:Rt.serviceCaptionText},e.title)),K("div",{class:Rt.serviceContent},r))}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const n of e.children)this._renderSections(n,i);const r=e.legendElements;if(r!=null&&r.length)for(const n of r){const s=K(Qc,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${n.type}`,layer:e.layer,legendElement:n,messages:this.messages});s&&i.push(s)}}};u([p()],tu.prototype,"activeLayerInfos",void 0),u([p()],tu.prototype,"headingLevel",void 0),u([p()],tu.prototype,"layout",void 0),u([p(),Il("esri/widgets/Legend/t9n/Legend")],tu.prototype,"messages",void 0),u([p(),Il("esri/t9n/common")],tu.prototype,"messagesCommon",void 0),u([p({readOnly:!0})],tu.prototype,"type",void 0),u([p()],tu.prototype,"view",void 0),tu=u([U("esri.widgets.Legend.styles.card.CardView")],tu);const Lr="esri-legend",Vt={service:`${Lr}__service`,label:`${Lr}__service-label`,layer:`${Lr}__layer`,groupLayer:`${Lr}__group-layer`,groupLayerChild:`${Lr}__group-layer-child`,layerTable:`${Lr}__layer-table`,layerTableSizeRamp:`${Lr}__layer-table--size-ramp`,layerChildTable:`${Lr}__layer-child-table`,layerCaption:`${Lr}__layer-caption`,layerBody:`${Lr}__layer-body`,layerRow:`${Lr}__layer-row`,layerInfo:`${Lr}__layer-cell ${Lr}__layer-cell--info`,imageryLayerStretchedImage:`${Lr}__imagery-layer-image--stretched`,imageryLayerInfoStretched:`${Lr}__imagery-layer-info--stretched`,symbolContainer:`${Lr}__layer-cell ${Lr}__layer-cell--symbols`,symbol:`${Lr}__symbol`,rampContainer:`${Lr}__ramps`,sizeRamp:`${Lr}__size-ramp`,colorRamp:`${Lr}__color-ramp`,opacityRamp:`${Lr}__opacity-ramp`,rampLabelsContainer:`${Lr}__ramp-labels`,rampLabel:`${Lr}__ramp-label`,message:`${Lr}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},r0t=24;let Tw=class extends Yn{constructor(e,i){super(e,i),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp"?Vt.opacityRamp:"";return e.className=`${Vt.colorRamp} ${i}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={width:`${r0t}px`},n={height:i.style.height};return K("div",{class:Vt.layerRow,key:`${this.key}-row`},K("div",{class:Vt.symbolContainer,styles:r},K("div",{afterCreate:mn,bind:i,class:Vt.rampContainer})),K("div",{class:Vt.layerInfo},K("div",{class:Vt.rampLabelsContainer,styles:n},e.infos.map((s,o)=>this._renderRampLabel(s,o,e.type)))))}_renderRampLabel(e,i,r){return K("div",{class:e.label?Vt.rampLabel:void 0,key:`${this.key}-stop-${e.label??i}-label`},UIe(e,r,this.messages))}};u([p()],Tw.prototype,"_preview",null),u([p()],Tw.prototype,"legendElement",void 0),u([p()],Tw.prototype,"messages",void 0),u([p()],Tw.prototype,"opacity",void 0),Tw=u([U("esri.widgets.Legend.styles.classic.ColorRamp")],Tw);let H2=class extends Yn{constructor(e,i){super(e,i),this.legendElement=null}render(){const e=this.legendElement.infos.map(i=>this._renderRow(i)).filter(Boolean);return e.length?this.legendElement.theme==="spike"?BIe(this.legendElement):K("div",{class:Vt.layerBody},e):null}_renderRow(e){return e.preview?K("div",{class:Vt.layerRow,key:`${this.key}-${e.label}-row`},K("div",{class:this.classes(Vt.symbolContainer,Vt.sizeRamp)},K("div",{afterCreate:mn,bind:e.preview,class:Vt.symbol})),K("div",{class:Vt.layerInfo},HE(this.messages,e.label,!1)||"")):null}};u([p()],H2.prototype,"legendElement",void 0),u([p()],H2.prototype,"messages",void 0),H2=u([U("esri.widgets.Legend.styles.classic.SizeRamp")],H2);let Ew=class extends Yn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=qIe(e,i);if(!s)return null;const a=this.messages.previewColorRampAriaLabel,l=WE(s,"above",!0),c=WE(s,"below",!0),h=12,m=qE(o,{width:h,height:l,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:a}),y=qE(o,{width:h,height:c,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:a}),v=uj(s),w=s.infos.map(z=>z.label),x=w.map((z,W)=>W===0?K("div",{class:z?m?Vt.univariateAboveAndBelowLabel:Vt.rampLabel:void 0,key:`${n}-color-ramp-above-label-${z??W}`},z):W===2?K("div",null):null),S=w.length-1,C=Math.floor(w.length/2),k=w.map((z,W)=>W===C||W===S?K("div",{class:z?m?Vt.univariateAboveAndBelowLabel:Vt.rampLabel:void 0,key:`${n}-color-ramp-below-label-${z??W}`},z):null),A={display:"table-cell",verticalAlign:"middle"},R={marginTop:`${v}px`},D={height:`${l}px`},B={height:`${c}px`};return K("div",{key:`${n}-container`,styles:JIe},K("div",{class:Vt.layerBody},s.infos.map((z,W)=>K("div",{class:this.classes(Vt.layerRow,Vt.sizeRamp),key:`${n}-row-${W}`},K("div",{afterCreate:mn,bind:z.preview,class:Vt.symbol,styles:A}),m||W%2!=0?null:K("div",{class:Vt.layerInfo},w[W])))),m?K("div",{styles:R},K("div",{styles:zJ},K("div",{styles:P$},K("div",{afterCreate:mn,bind:m,class:Vt.rampContainer})),K("div",{styles:P$},K("div",{class:Vt.rampLabelsContainer,styles:D},x))),K("div",{styles:zJ},K("div",{styles:P$},K("div",{afterCreate:mn,bind:y,class:Vt.rampContainer})),K("div",{styles:P$},K("div",{class:Vt.rampLabelsContainer,styles:B},k)))):null)}};u([p()],Ew.prototype,"effectList",void 0),u([p()],Ew.prototype,"legendElement",void 0),u([p()],Ew.prototype,"messages",void 0),u([p()],Ew.prototype,"opacity",void 0),Ew=u([U("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],Ew);let Cw=class extends Yn{constructor(e,i){super(e,i),this.effectList=null,this.legendElement=null,this.opacity=1}render(){var S;const{legendElement:e,opacity:i,effectList:r,key:n}=this,{sizeRampElement:s,colorRampElement:o}=WIe(e);if(!s)return null;const a=uj(s),l=12,c=WE(s,"full",!1),h=qE(o,{width:l,height:c,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(S=this.messages)==null?void 0:S.previewColorRampAriaLabel}),m=s.infos.length-1,y=s.infos.map((C,k)=>k===0||k===m?K("div",{class:C.label?o?Vt.univariateAboveAndBelowLabel:Vt.rampLabel:void 0,key:`${n}-color-ramp-label-${C.label??k}`},C.label):null),v={display:"table-cell",verticalAlign:"middle"},w={marginTop:`${a}px`},x={height:`${c}px`};return K("div",{key:`${n}-container`,styles:JIe},K("div",{class:Vt.layerBody},s.infos.map((C,k)=>K("div",{class:this.classes(Vt.layerRow,Vt.sizeRamp),key:`${n}-row-${k}`},K("div",{afterCreate:mn,bind:C.preview,class:Vt.symbol,styles:v})))),K("div",{styles:w},K("div",{styles:zJ},K("div",{styles:P$},K("div",{afterCreate:mn,bind:h,class:Vt.rampContainer})),K("div",{styles:P$},K("div",{class:Vt.rampLabelsContainer,styles:x},y)))))}};u([p()],Cw.prototype,"effectList",void 0),u([p()],Cw.prototype,"legendElement",void 0),u([p()],Cw.prototype,"messages",void 0),u([p()],Cw.prototype,"opacity",void 0),Cw=u([U("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],Cw);var UJ;let Yg=UJ=class extends Yn{constructor(t,e){super(t,e),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const t=this._renderLegendElement(),e=jIe(this.legendElement,this.messages),i=this.isChild?Vt.layerChildTable:Vt.layerTable,r=e?K("div",{class:Vt.layerCaption},e):null,n={[Vt.layerTableSizeRamp]:this.legendElement.type==="size-ramp"||!this.isChild};return K("section",{class:this.classes(i,n),key:`${this.key}-table`},r,t)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return K(H2,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return K(Tw,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return wCe(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":return K("div",{afterCreate:mn,bind:this.legendElement.preview,key:`${this.key}-preview`});case"univariate-above-and-below-ramp":return K(Ew,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return K(Cw,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(t){const e=t.infos.map(i=>this._renderElementInfo(i,t.legendType)).filter(Boolean);return e.length?K("div",{class:Vt.layerBody},e):null}_renderElementInfo(t,e){const{layer:i}=this,r="label"in t?t.label:null,n=`${this.key}-${r}`;if("type"in t&&t.type)return K(UJ,{effectList:this.effectList,isChild:!0,key:n,layer:i,legendElement:t,messages:this.messages});if(!("preview"in t&&t.preview||"src"in t&&t.src))return null;const s=FIe(i,e),o={[Vt.imageryLayerInfoStretched]:s},a={[Vt.imageryLayerInfoStretched]:s};return K("div",{class:Vt.layerRow,key:`${n}-row`},K("div",{class:this.classes(Vt.symbolContainer,a)},this._renderPreview(t,s)),K("div",{class:this.classes(Vt.layerInfo,o)},HE(this.messages,r,!1)||""))}_renderPreview(t,e){const{layer:i}=this;return"preview"in t&&t.preview?K("div",{afterCreate:mn,bind:t.preview,class:Vt.symbol}):"src"in t&&t.src?this._renderImage(t,i,e):null}_renderImage(t,e,i){const{label:r,src:n,opacity:s}=t,o={[Vt.imageryLayerStretchedImage]:i,[Vt.symbol]:!i},a={opacity:`${s??e.opacity}`},l=HE(this.messages,r,!1);return K("img",{alt:l,"aria-label":l,border:0,class:this.classes(o),height:t.height,src:n,styles:a,width:t.width})}};u([p()],Yg.prototype,"effectList",void 0),u([p()],Yg.prototype,"isChild",void 0),u([p()],Yg.prototype,"layer",void 0),u([p()],Yg.prototype,"legendElement",void 0),u([p()],Yg.prototype,"messages",void 0),Yg=UJ=u([U("esri.widgets.Legend.styles.classic.LegendElement")],Yg);const n0t=`${Lr}__`;let du=class extends Yn{constructor(e,i){super(e,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,i=e==null?void 0:e.toArray().map(r=>this._renderLegendForLayer(r)).filter(Boolean);return i!=null&&i.length?K("section",null,i):K("div",{class:Vt.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,i){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,n=`${n0t}${i?`${i}-`:""}${r}`,s=e.title?hN({level:this.headingLevel,class:this.classes(Ss.heading,Vt.label)},e.title):null;if(e.children.length){const o=e.children.toArray().map(a=>this._renderLegendForLayer(a,r));return K("section",{class:this.classes(Vt.service,Vt.groupLayer),key:n},s,o)}return this._renderLegendElementsForLayer(e,s,n)}_renderLegendElementsForLayer(e,i,r){var a;const n=(a=e.legendElements)==null?void 0:a.filter(Boolean);if(!(n!=null&&n.length))return null;const s=n.map(l=>K(Yg,{effectList:e.effectList,isChild:!1,key:`${r}-${l.type}`,layer:e.layer,legendElement:l,messages:this.messages})),o={[Vt.groupLayerChild]:!!e.parent};return K("section",{class:this.classes(Vt.service,o),key:r},i,K("div",{class:Vt.layer},s))}};u([p()],du.prototype,"activeLayerInfos",void 0),u([p()],du.prototype,"headingLevel",void 0),u([p(),Il("esri/widgets/Legend/t9n/Legend")],du.prototype,"messages",void 0),u([p({readOnly:!0})],du.prototype,"type",void 0),du=u([U("esri.widgets.Legend.styles.classic.ClassicView")],du);const s0t={base:"esri-legend"};let As=class extends Yn{constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.viewModel=new ic,this.style=new du}initialize(){this.addHandles([ua(()=>this.view,"resize",()=>this.scheduleRender()),ua(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),Le(()=>this.headingLevel,e=>{const{style:i}=this;i&&(i.headingLevel=e)}),Le(()=>this.style,(e,i)=>{i&&e!==i&&i.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},gi)])}destroy(){var e;(e=this.style)==null||e.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const i=this._get("style");e!==i&&(i==null||i.destroy()),this._set("style",e)}castStyle(e){if(e instanceof tu||e instanceof du)return e;if(typeof e=="string")return e==="card"?new tu:new du;if(e&&typeof e.type=="string"){const i={...e};return delete i.type,e.type==="card"?new tu(i):new du(i)}return new du}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return K("div",{class:this.classes(s0t.base,Ss.widget,this.style instanceof du?Ss.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const i=Le(()=>e.version,()=>this.scheduleRender());this.addHandles(i,`version_${e.layer.uid}`);const r=ua(()=>e.children,"change",()=>e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)),gi);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}};u([p()],As.prototype,"activeLayerInfos",null),u([p()],As.prototype,"basemapLegendVisible",null),u([p()],As.prototype,"groundLegendVisible",null),u([p()],As.prototype,"headingLevel",void 0),u([p()],As.prototype,"hideLayersNotInCurrentView",null),u([p()],As.prototype,"keepCacheOnDestroy",null),u([p()],As.prototype,"respectLayerDefinitionExpression",null),u([p()],As.prototype,"respectLayerVisibility",null),u([p()],As.prototype,"icon",null),u([p()],As.prototype,"label",null),u([p()],As.prototype,"layerInfos",null),u([p(),Il("esri/widgets/Legend/t9n/Legend")],As.prototype,"messages",void 0),u([p()],As.prototype,"style",null),u([_i("style")],As.prototype,"castStyle",null),u([p()],As.prototype,"view",null),u([p()],As.prototype,"viewModel",void 0),As=u([U("esri.widgets.Legend")],As);const YIe=As,o0t=Object.freeze(Object.defineProperty({__proto__:null,default:YIe},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const a0t=t=>l0t(t);var $v,fO,hE,mO,jJ,Qfe;let AQ=(Qfe=class extends _Y{constructor(i){super(i);Qe(this,mO);Qe(this,$v,j5e(void 0));Qe(this,fO);Qe(this,hE,!1);const{el:r}=i,n=r.view;this.setProvisionalExports(void 0),Object.defineProperty(r,"view",{get:()=>te(this,$v).value,set:s=>{if(this.exports===s)return;const o=r.view;te(this,$v).value=s,this.exports=s,this.component.requestUpdate("view",o),Er(this,mO,jJ).call(this)},configurable:!0,enumerable:!0}),i!==r&&Object.defineProperty(i,"view",{get:()=>r.view,set:s=>{r.view=s}}),queueMicrotask(()=>n?r.view=n:0)}hostConnected(){this.component.manager.hasDestroy&&(te(this,fO)??We(this,fO,hs(()=>{var i;return(i=te(this,$v).value)==null?void 0:i.destroyed},()=>{var i,r;return void((r=(i=this.component).destroy)==null?void 0:r.call(i).catch(console.error))},{sync:!0})),this.onDestroy(()=>{var i;return(i=te(this,fO))==null?void 0:i.remove()})),this.component.manager.loadedCalled&&z2(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){var n;const{el:i}=this.component,r=((n=i.shadowRoot)==null?void 0:n.firstElementChild)??i.firstElementChild??void 0;i.childElem??(i.childElem=r),We(this,hE,!0),Er(this,mO,jJ).call(this),i.isConnected&&z2(this.component)}hostDisconnected(){var i,r;typeof this.component.el.childElem=="object"&&((r=(i=te(this,$v).value)==null?void 0:i.ui)==null||r.remove(this.component.el.childElem))}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&z2(this.component),i.has("referenceElement")&&z2(this.component)}},$v=new WeakMap,fO=new WeakMap,hE=new WeakMap,mO=new WeakSet,jJ=function(){!te(this,hE)||te(this,$v).value==null||(We(this,hE,!1),this.component.arcgisReady.emit())},Qfe);const l0t=UO(AQ);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const OQ=(t,e)=>i=>u0t(i,t);var eU,yO,gO,xb,XIe,KIe,QIe,eme;let c0t=(eme=class extends GY{constructor(i,r){var c;super(i,r);Qe(this,xb);Qe(this,eU,new Map);Qe(this,yO);Qe(this,gO);new AQ(i);const n=this,s=n.instance;let o=s.viewModel,a=s.visibleElements;const l=new Proxy(this.exports,{get(h,m,y){return m==="viewModel"?o:m==="visibleElements"?a:Reflect.get(h,m,y)}});if(We(n,gO,s),n.instance=l,n.exports=l,o){const h={component:i,get exports(){return n.instance.viewModel}};F4e(n).set("viewModel","viewModel"),i.addController(h),o=Mve(i,new WeakRef(h),XFe(i)-1,o,te(n,eU))}n.instance.visibleElements&&(a=Er(c=n,xb,XIe).call(c,s))}hostConnected(){this.instance=te(this,gO),super.hostConnected()}hostLoad(){We(this,yO,Le(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i==null?void 0:i.map:r.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,this.component.closed!==void 0&&this.onLifecycle(()=>Le(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){var i;(i=te(this,yO))==null||i.remove(),super.hostDestroy()}},eU=new WeakMap,yO=new WeakMap,gO=new WeakMap,xb=new WeakSet,XIe=function(i){return new Proxy(i.visibleElements,{get:(r,n)=>{if(typeof n=="symbol"||n in Promise.prototype)return r[n];const s=[n],o=Er(this,xb,KIe).call(this,s);return gY(this.component,a=>{const l=a;this.component[l]=!1;let c=i.visibleElements??{},h;for(const y of s.slice(0,-1))if(typeof c[y]=="object"&&c[y]!==null)c=c[y];else{h=!!c[y];break}h===void 0&&(h=!!(c[s.slice(-1)[0]]??!0));const m=l.startsWith("hide")||l.startsWith("show")?l.startsWith("hide"):h;this.onUpdate(y=>{if(y.has(l)){const v=this.component[l];Er(this,xb,QIe).call(this,s,v,m)}})},o)}})},KIe=function(i){const r=new Proxy({},{get:(n,s)=>{const o=Reflect.get(n,s);return typeof s=="symbol"||s in Promise.prototype?o:(i.push(s),r)}});return r},QIe=function(i,r,n){let s=this.instance.visibleElements??{};for(const a of i.slice(0,-1))(typeof s[a]!="object"||s[a]===null)&&(s[a]={}),s=s[a];const o=!!(n?!r:r);s[i.at(-1)]=o},eme);const u0t=UO(c0t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const d0t=dt`@layer{arcgis-legend{display:block}}`,h0t=OQ(YIe);var Xv;let p0t=(Xv=class extends qi{constructor(){super(...arguments),this.widget=h0t(this),this.viewModel=this.widget.viewModel,this.activeLayerInfos=this.widget.activeLayerInfos,this.autoDestroyDisabled=!1,this.basemapLegendVisible=this.widget.basemapLegendVisible,this.headingLevel=this.widget.headingLevel,this.hideLayersNotInCurrentView=this.widget.hideLayersNotInCurrentView,this.icon=this.widget.icon,this.label=this.widget.label,this.layerInfos=this.widget.layerInfos,this.legendStyle=this.widget.style,this.position="bottom-left",this.respectLayerDefinitionExpression=this.widget.respectLayerDefinitionExpression,this.respectLayerVisibilityDisabled=this.widget.respectLayerVisibility,this.state=this.viewModel.state,this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko()}async destroy(){await this.manager.destroy()}},Xv.properties={activeLayerInfos:0,autoDestroyDisabled:5,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,icon:1,label:1,layerInfos:0,legendStyle:1,position:1,referenceElement:1,respectLayerDefinitionExpression:5,respectLayerVisibilityDisabled:5,state:3},Xv.shadowRootOptions=Zn,Xv.styles=d0t,Xv);or("arcgis-legend",p0t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const P1=Tht(Gge);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const Qx={base:"arcgis-zoom",horizontalLayout:"arcgis-zoom--horizontal",button:"esri-widget--button",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function f0t(t){var r;if(t.type==="3d")return!!t.ready;if(!(t!=null&&t.ready))return!1;const e=eMe(t),i=(r=t.constraints)==null?void 0:r.effectiveMaxScale;return i===0||e>i}function m0t(t){var r;if(t.type==="3d")return!!t.ready;if(!(t!=null&&t.ready))return!1;const e=eMe(t),i=(r=t.constraints)==null?void 0:r.effectiveMinScale;return i===0||e<i}function eMe(t){var i;const e=(i=t==null?void 0:t.animation)==null?void 0:i.target;return(e&&"then"in e||e==null?void 0:e.scale)??(t==null?void 0:t.scale)??0}const y0t=dt`@layer{arcgis-zoom,.arcgis-zoom{display:flex;flex-flow:column nowrap;box-shadow:0 1px 2px #0000004d}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}}`;var Kv;let g0t=(Kv=class extends qi{constructor(){super(...arguments),this.messages=P1({}),this.view=a0t(this),this.canZoomIn=!1,this.canZoomOut=!1,this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.position="top-left",this.state="disabled",this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:e}=this;!this.canZoomIn||!e||(e.type==="2d"?e.mapViewNavigation.zoomIn():EE(e.goTo({zoomFactor:2})))}async zoomOut(){const{view:e}=this;!this.canZoomOut||!e||(e.type==="2d"?e.mapViewNavigation.zoomOut():EE(e.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[hs(()=>{var e;return(e=this.view)==null?void 0:e.stationary},()=>{this.canZoomIn=f0t(this.view),this.canZoomOut=m0t(this.view)},{initial:!0}),hs(()=>{var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"},e=>{this.state=e},{sync:!0,initial:!0})])}render(){const e={[Qx.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this,{zoomIn:n,zoomOut:s}=this.messages;return q`<div class=${mt(zs(Qx.base,e))}><calcite-button class=${mt(zs(Qx.button,Qx.zoomIn))} .disabled=${!i} icon-start=plus kind=neutral .label=${n} @click=${this.zoomIn} title=${n??Ns}></calcite-button><calcite-button class=${mt(zs(Qx.button,Qx.zoomOut))} .disabled=${!r} icon-start=minus kind=neutral .label=${s} @click=${this.zoomOut} title=${s??Ns}></calcite-button></div>`}},Kv.properties={canZoomIn:16,canZoomOut:16,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},Kv.shadowRootOptions=Zn,Kv.styles=y0t,Kv);or("arcgis-zoom",g0t);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Ppe={positionContainer:"position-container",container:"container"},PQ=300,v0t=PQ/3,b0t=PQ*1.5,Lpe="aria-describedby";function tMe(t){const{referenceElement:e}=t;return(typeof e=="string"?SO(t,{id:e}):e)||null}class w0t{constructor(){this.registeredElements=new WeakMap,this.registeredShadowRootCounts=new WeakMap,this.hoverOpenTimeout=null,this.hoverCloseTimeout=null,this.activeTooltip=null,this.registeredElementCount=0,this.clickedTooltip=null,this.hoveredTooltip=null,this.queryTooltip=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltip:i}=this;if(i!=null&&i.open){this.clearHoverTimeout(),this.closeActiveTooltip();const r=tMe(i),n=e.composedPath();(r instanceof Element&&n.includes(r)||n.includes(i))&&e.preventDefault()}}},this.pointerLeaveHandler=()=>{this.clearHoverTimeout(),this.closeHoveredTooltip()},this.pointerMoveHandler=e=>{if(e.defaultPrevented){this.closeHoveredTooltip();return}const i=e.composedPath(),{activeTooltip:r}=this,n=this.queryTooltip(i);if(this.pathHasOpenTooltip(n,i)){this.clearHoverTimeout();return}n!==this.clickedTooltip&&(n!==this.hoveredTooltip&&this.clearHoverOpenTimeout(),this.hoveredTooltip=n,n?this.openHoveredTooltip(n):r!=null&&r.open&&this.closeHoveredTooltip(),this.clickedTooltip=null)},this.clickHandler=e=>{if(e.defaultPrevented)return;this.clickedTooltip=null;const i=e.composedPath(),r=this.queryTooltip(i);if(this.pathHasOpenTooltip(r,i)){this.clearHoverTimeout();return}if(this.closeActiveTooltip(),!!r){if(this.clearHoverTimeout(),r.closeOnClick){this.clickedTooltip=r,this.toggleTooltip(r,!1);return}this.toggleTooltip(r,!0)}},this.blurHandler=()=>{this.closeActiveTooltip()},this.focusInHandler=e=>{if(e.defaultPrevented)return;const i=e.composedPath(),r=this.queryTooltip(i);if(this.pathHasOpenTooltip(r,i)){this.clearHoverTimeout();return}r!==this.clickedTooltip&&(this.clickedTooltip=null,this.closeTooltipIfNotActive(r),r&&this.toggleFocusedTooltip(r,!0))},this.openHoveredTooltip=e=>{var i;this.hoverOpenTimeout=window.setTimeout(()=>{this.hoverOpenTimeout===null||e!==this.hoveredTooltip||(this.clearHoverCloseTimeout(),this.closeTooltipIfNotActive(e),this.toggleTooltip(e,!0))},(i=this.activeTooltip)!=null&&i.open?v0t:PQ)},this.closeHoveredTooltip=()=>{this.hoverCloseTimeout=window.setTimeout(()=>{this.hoverCloseTimeout!==null&&this.closeActiveTooltip()},b0t)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i);const r=this.getReferenceElShadowRootNode(e);r&&this.registerShadowRoot(r),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){const i=this.getReferenceElShadowRootNode(e);i&&this.unregisterShadowRoot(i),this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}pathHasOpenTooltip(e,i){const{activeTooltip:r}=this;return(r==null?void 0:r.open)&&i.includes(r)||(e==null?void 0:e.open)&&i.includes(e)}addShadowListeners(e){e.addEventListener("focusin",this.focusInHandler)}removeShadowListeners(e){e.removeEventListener("focusin",this.focusInHandler)}addListeners(){window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("pointermove",this.pointerMoveHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("focusin",this.focusInHandler),window.addEventListener("blur",this.blurHandler),document.addEventListener("pointerleave",this.pointerLeaveHandler)}removeListeners(){window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("pointermove",this.pointerMoveHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("focusin",this.focusInHandler),window.removeEventListener("blur",this.blurHandler),document.removeEventListener("pointerleave",this.pointerLeaveHandler)}clearHoverOpenTimeout(){window.clearTimeout(this.hoverOpenTimeout),this.hoverOpenTimeout=null}clearHoverCloseTimeout(){window.clearTimeout(this.hoverCloseTimeout),this.hoverCloseTimeout=null}clearHoverTimeout(){this.clearHoverOpenTimeout(),this.clearHoverCloseTimeout()}closeTooltipIfNotActive(e){this.activeTooltip!==e&&this.closeActiveTooltip()}closeActiveTooltip(){const{activeTooltip:e}=this;e!=null&&e.open&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,this.activeTooltip=i?e:null}registerShadowRoot(e){const{registeredShadowRootCounts:i}=this,r=i.get(e),n=Math.min((typeof r=="number"?r:0)+1,1);n===1&&this.addShadowListeners(e),i.set(e,n)}unregisterShadowRoot(e){const{registeredShadowRootCounts:i}=this,r=i.get(e),n=Math.max((typeof r=="number"?r:1)-1,0);n===0&&this.removeShadowListeners(e),i.set(e,n)}getReferenceElShadowRootNode(e){return e instanceof Element?DLe(e):null}}const _0t=dt`:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}.position-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset,left,opacity;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;padding:.75rem 1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);border-radius:var(--calcite-tooltip-corner-radius, var(--calcite-corner-radius-round));color:var(--calcite-tooltip-text-color, var(--calcite-color-text-1));max-inline-size:20rem;max-block-size:20rem;text-align:start}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-tooltip-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-tooltip-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-tooltip-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-tooltip-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-tooltip-border-color, var(--calcite-color-border-3))}:host([hidden]){display:none}[hidden]{display:none}`,Rpe=new w0t,tU=class tU extends Yt{constructor(){super(...arguments),this.guid=`calcite-tooltip-${Ml()}`,this.transitionProp="opacity",this.floatingLayout="vertical",this.closeOnClick=!1,this.offsetDistance=BN,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.calciteTooltipBeforeClose=Ne({cancelable:!1}),this.calciteTooltipBeforeOpen=Ne({cancelable:!1}),this.calciteTooltipClose=Ne({cancelable:!1}),this.calciteTooltipOpen=Ne({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:n,offsetDistance:s,offsetSkidding:o,arrowEl:a,floatingEl:l}=this;return EO(this,{floatingEl:l,referenceEl:i,overlayPositioning:n,placement:r,offsetDistance:s,offsetSkidding:o,arrowEl:a,type:"tooltip"},e)}connectedCallback(){super.connectedCallback(),this.setUpReferenceElement(!0)}willUpdate(e){(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==BN)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!=="auto"))&&this.reposition(!0),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("referenceElement")&&this.setUpReferenceElement()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement()}disconnectedCallback(){super.disconnectedCallback(),this.removeReferences(),sC(this)}openHandler(){y1(this),this.reposition(!0)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit(),CO(this)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=tMe(this.el),wl(this);const{el:i,referenceElement:r,referenceEl:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(Lpe,i),Rpe.registerElement(e,this.el)}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&e.removeAttribute(Lpe),Rpe.unregisterElement(e))}render(){const{referenceEl:e,label:i,open:r,floatingLayout:n}=this,s=e&&r,o=!s;return this.el.inert=o,this.el.ariaLabel=i,this.el.ariaLive="polite",Ap(this.el,"id",this.getId()),this.el.role="tooltip",q`<div class=${ne(Ppe.positionContainer)} ${yt(this.setFloatingEl)}><div class=${ne({[Up.animation]:!0,[Up.animationActive]:s})} ${yt(this.setTransitionEl)}>${Nye({floatingLayout:n,ref:a=>this.arrowEl=a})}<div class=${ne(Ppe.container)}><slot></slot></div></div></div>`}};tU.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],closeOnClick:[7,{},{reflect:!0,type:Boolean}],label:1,offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],referenceElement:1},tU.styles=_0t;let c5=tU;Xt("calcite-tooltip",c5);const x0t=Object.freeze(Object.defineProperty({__proto__:null,Tooltip:c5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const AC=(t,e)=>i=>$0t(i,t);var vO,tme;let S0t=(tme=class extends GY{constructor(i,r){super(i,r);Qe(this,vO);new AQ(this.component)}hostLoad(){We(this,vO,Le(()=>this.component.el.view,i=>{this.instance.view=i,this.instance.map=i==null?void 0:i.map},{sync:!0,initial:!0}))}hostDestroy(){var i;(i=te(this,vO))==null||i.remove(),super.hostDestroy()}},vO=new WeakMap,tme);const $0t=UO(S0t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const la={disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",loaderAnimation:"esri-widget__loader-animation",panel:"esri-widget--panel",widget:"esri-widget esri-component",widgetButton:"esri-widget--button"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const T0t={};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */function VJ(t){t==null||t.abort()}function E0t(t){t==null||t.remove()}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */var C0t=Object.defineProperty,I0t=Object.getOwnPropertyDescriptor,OC=(t,e,i,r)=>{for(var n=r>1?void 0:r?I0t(e,i):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(r?o(e,i,n):o(n))||n);return r&&n&&C0t(e,i,n),n};function M0t(t="Aborted"){return new Q("AbortError",t)}function k0t(t,e="Aborted"){if(A0t(t))throw M0t(e)}function iMe(t){return t instanceof AbortSignal?t:(t==null?void 0:t.signal)??void 0}function A0t(t){var e;return((e=iMe(t))==null?void 0:e.aborted)??!1}function rMe(t){return(t==null?void 0:t.name)==="AbortError"}function O0t(t){return{ok:!0,value:t}}function P0t(t){return{ok:!1,error:t}}function L0t(t){return t!=null&&t.ok?t.value:null}function R0t(t){return t!=null&&!t.ok?t.error:null}function D0t(t,e){const i=iMe(t);if(i==null)return;if(i.aborted){e();return}const r=()=>e();return i.addEventListener("abort",r,{once:!0}),{remove:()=>i.removeEventListener("abort",r)}}let h1=class extends st{constructor(e,i){super({}),this._abortHandle=null,this.abort=()=>{this._abortController=VJ(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=O0t(n),this._cleanup()},n=>{this._result=P0t(n),this._cleanup()}),this._abortHandle=D0t(i,this.abort)}get value(){return L0t(this._result)}get error(){return R0t(this._result)}get finished(){return this._result!=null}destroy(){this.abort()}_cleanup(){this._abortHandle=E0t(this._abortHandle),this._abortController=null}[Symbol.dispose](){this._cleanup()}};OC([p()],h1.prototype,"value",1);OC([p()],h1.prototype,"error",1);OC([p()],h1.prototype,"finished",1);OC([p()],h1.prototype,"promise",2);OC([p()],h1.prototype,"_result",2);h1=OC([U("esri.components.asyncUtils.ReactiveTask")],h1);let N0t=class{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}},z0t=class extends N0t{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}},gP;function nMe(){return!!gP&&JU()}async function F0t(){if(!nMe()){const[t,e]=await Promise.all([$e(()=>import("./ProjectionTransformation-CkhaapGK.js").then(i=>i.aV),__vite__mapDeps([260,261,262,263,264])).then(i=>i.aH),$e(()=>import("./ProjectionTransformation-CkhaapGK.js").then(i=>i.aV),__vite__mapDeps([260,261,262,263,264])).then(i=>i.aG).then(({injectPe:i})=>i),aX()]);gP=new t.OperatorProject,e($be)}}function U0t(t,e){return gP.execute(t,e,null)}function j0t(t,e){const i=gP.executeMany(new z0t(t),e,null);return Array.from(i)}function V0t(){return gP.supportsCurves()}let sMe,dj,BJ,LQ,RQ,oMe,aMe,lMe,cMe,uMe,dMe,hMe;function DQ(){return!!dj&&nMe()}async function B0t(){if(!DQ()){const[t,e,i,r]=await Promise.all([$e(()=>import("./apiConverter-BYW5cCQU.js"),__vite__mapDeps([265,262,261,260,263,264,266])),$e(()=>import("./ProjectionTransformation-CkhaapGK.js").then(n=>n.aV),__vite__mapDeps([260,261,262,263,264])).then(n=>n.aI).then(({CompositeGeographicTransformationEditor:n})=>n),$e(()=>import("./ProjectionTransformation-CkhaapGK.js").then(n=>n.aV),__vite__mapDeps([260,261,262,263,264])).then(n=>n.aJ).then(({create:n,createFromWKT:s})=>({create:n,createFromWKT:s})),$e(()=>import("./ProjectionTransformation-CkhaapGK.js").then(n=>n.aV),__vite__mapDeps([260,261,262,263,264])).then(n=>n.aK).then(({create:n,createEx:s,createFromAoi:o})=>({create:n,createEx:s,createFromAoi:o})),F0t()]);sMe=t.fromExtent,dj=t.fromGeometry,BJ=t.fromSpatialReference,LQ=t.getSpatialReference,RQ=t.toGeometry,oMe=e,aMe=i.create,lMe=i.createFromWKT,cMe=r.createEx,uMe=r.createFromAoi,dMe=r.create,hMe=V0t()}}function pMe(t,e,i={}){const r=fMe(LQ(t),e,i);return RQ(U0t(dj(t),r),e)}function G0t(t,e,i={}){const r=t.map(dj),n=fMe(LQ(t),e,i);return j0t(r,n).map(s=>RQ(s,e))}function fMe(t,e,i={}){let r;const n=BJ(t),s=BJ(e);if(i!=null&&i.geographicTransformation){const o=new oMe;o.setInputSpatialReference(n),o.setOutputSpatialReference(s);for(const a of i.geographicTransformation.steps){let l;l=a.wkid?aMe(a.wkid,a.isInverse):lMe(a.wkt,a.isInverse),o.add(l)}r=o.create()}else if(i!=null&&i.areaOfInterestExtent)return uMe(n,s,sMe(i.areaOfInterestExtent).asEnvelope2D());return r?cMe(n,s,r):dMe(n,s)}const BNt=Object.freeze(Object.defineProperty({__proto__:null,execute:pMe,executeMany:G0t,isLoaded:DQ,load:B0t,get supportsCurves(){return hMe}},Symbol.toStringTag,{value:"Module"}));new Et({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Et({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let O0=class extends ye{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};u([p({type:String,json:{write:!0}})],O0.prototype,"deviationUnit",void 0),u([p({json:{read:{reader:t=>t?t.map(e=>Ao(e)).filter(Mr):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],O0.prototype,"geometries",void 0),u([p({type:Number,json:{write:!0}})],O0.prototype,"maxDeviation",void 0),O0=u([U("esri.rest.support.GeneralizeParameters")],O0),O0.from=hr(O0);new Et({preserveShape:"preserve-shape"});let $g=class extends ye{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};u([p({type:String,json:{write:!0}})],$g.prototype,"calculationType",void 0),u([p({type:Boolean,json:{write:!0}})],$g.prototype,"geodesic",void 0),u([p({json:{write:!0}})],$g.prototype,"lengthUnit",void 0),u([p({type:[Ur],json:{read:{reader:t=>t?t.map(e=>Ao(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(i=>i.toJSON())}}}})],$g.prototype,"polylines",void 0),$g=u([U("esri.rest.support.LengthsParameters")],$g),$g.from=hr($g);new Et({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Et({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let Hf=class extends ye{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};u([p({type:Number,json:{write:!0}})],Hf.prototype,"bevelRatio",void 0),u([p({json:{read:{reader:t=>t?t.map(e=>Ao(e)).filter(Mr):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],Hf.prototype,"geometries",void 0),u([p({type:Number,json:{write:!0}})],Hf.prototype,"offsetDistance",void 0),u([p({type:String,json:{write:!0}})],Hf.prototype,"offsetHow",void 0),u([p({type:String,json:{write:!0}})],Hf.prototype,"offsetUnit",void 0),Hf=u([U("esri.rest.support.OffsetParameters")],Hf),Hf.from=hr(Hf);new Et({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Tg=class extends ye{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};u([p({json:{read:{reader:t=>t?t.map(e=>Ao(e)).filter(Mr):null},write:{writer:(t,e)=>{e.geometries1=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],Tg.prototype,"geometries1",void 0),u([p({json:{read:{reader:t=>t?t.map(e=>Ao(e)).filter(Mr):null},write:{writer:(t,e)=>{e.geometries2=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],Tg.prototype,"geometries2",void 0),u([p({type:String,json:{write:!0}})],Tg.prototype,"relation",void 0),u([p({type:String,json:{write:!0}})],Tg.prototype,"relationParameter",void 0),Tg=u([U("esri.rest.support.RelationParameters")],Tg),Tg.from=hr(Tg);new Et({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let P0=class extends ye{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};u([p({type:String,json:{write:!0}})],P0.prototype,"extendHow",void 0),u([p({type:[Ur],json:{read:{reader:t=>t?t.map(e=>Ao(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(i=>i.toJSON())}}}})],P0.prototype,"polylines",void 0),u([p({type:Ur,json:{read:{reader:t=>t?Ao(t):null},write:{writer:(t,e)=>{e.trimExtendTo=t.toJSON()}}}})],P0.prototype,"trimExtendTo",void 0),P0=u([U("esri.rest.support.TrimExtendParameters")],P0),P0.from=hr(P0);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const H0t=dt`@layer{arcgis-locate{display:block}}`;let Dpe=!1;const q0t={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function W0t(){const t="geolocation"in navigator;return t||console.warn("geolocation-unsupported","Geolocation unsupported."),t}function J0t(){const t=window.isSecureContext;return t||Dpe||(Dpe=!0,console.warn("insecure-context","Geolocation requires a secure origin.")),t}function Z0t(){return W0t()&&J0t()}function Y0t(t){return t??(t=q0t),new Promise((e,i)=>{setTimeout(()=>i(new Q("geolocation:timeout","getting the current geolocation position timed out")),(t==null?void 0:t.timeout)??15e3),navigator.geolocation.getCurrentPosition(e,i,t??void 0)})}function X0t(t,e){var o;const{position:i,view:r}=t,n=(o=K0t(i))==null?void 0:o.coords;if(!n)throw new Q("geometry-service:no-coords","Geolocation has no coordinates");const s=Q0t(n);return ewt(s,r,e)}function K0t(t){const e=(t==null?void 0:t.coords)||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed,toJSON(){return{}}};return t&&{coords:i,timestamp:t.timestamp,toJSON(){return{}}}}function Q0t({longitude:t,latitude:e,altitude:i}){return new ft({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}async function ewt(t,e,i){if(!e)return await Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?await Promise.resolve(t):r.isWebMercator?await Promise.resolve(Rp(t)):DQ()?await Promise.resolve(pMe(t,r)):await twt(i).then(async n=>{if(!n)throw new Q("geometry-service:missing-url","Geometry service URL is missing");const s=new qh({geometries:[t],outSpatialReference:r});return(await MK(n,s,i))[0]})}async function twt(t){var i,r;if(hi.geometryServiceUrl)return await Promise.resolve(hi.geometryServiceUrl);const e=Fe.getDefault();try{await e.load(t)}catch{}return(r=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:r.url}var iwt=Object.defineProperty,rwt=Object.getOwnPropertyDescriptor,My=(t,e,i,r)=>{for(var n=r>1?void 0:r?rwt(e,i):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(r?o(e,i,n):o(n))||n);return r&&n&&iwt(e,i,n),n};const nwt=2500;function mMe(t){const e={type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:t==="background"?16:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:t==="background"?0:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:t==="background"?[0,0,0,66]:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0};return t==="background"&&(e.offsetX=0,e.offsetY=-1),e}const yMe={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},swt=mMe("layer"),owt=mMe("background"),awt=new Co({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[swt,owt,yMe],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let Gd=class extends st{constructor(){super(...arguments),this._geolocationUsable=!0,this.goToLocationEnabled=!0,this.graphic=new _r({symbol:awt}),this.rotationEnabled=!0}initialize(){Z0t()||(this._geolocationUsable=!1),this.addHandles([Le(()=>{var e;return(e=this.view)==null?void 0:e.type},()=>this._handleViewTypeChange(),{initial:!0})])}destroy(){this._clearGraphic(),this.view=void 0}_clearGraphic(){const{view:e,graphic:i}=this;e&&i&&e.graphics.remove(i)}_addGraphic(){const{view:e,graphic:i}=this;!(e!=null&&e.graphics)||!i||e.graphics.includes(i)||e.graphics.push(i)}_handleViewTypeChange(){var e;yMe.enable=((e=this.view)==null?void 0:e.type)==="2d"}_getScaleWithinConstraints(e,i){if(!i)return e;if(i.type==="2d"){const{effectiveMaxScale:r,effectiveMinScale:n}=i.constraints;return Math.min(n,Math.max(r,e))}return e}_getScale(e){const{scale:i}=this,r=typeof i=="number"?i:nwt;return this._getScaleWithinConstraints(r,e)}_getHeading(e,i){var o;const r=i==null?void 0:i.spatialReference,n=(r==null?void 0:r.isWebMercator)||(r==null?void 0:r.isGeographic),s=(o=e.coords)==null?void 0:o.heading;return!n||typeof s!="number"||Number.isNaN(s)||s<0||s>360?null:s}_addHeading(e){const{heading:i,target:r,view:n}=e;if(!(!n||i===null)){if(n.type==="3d"){r.heading=i;return}n.type==="2d"&&(r.rotation=360-i)}}async _animatePoint(e,i,r,n){const{view:s}=this;if(!this.goToLocationEnabled||!s)return;const o={target:e,scale:i};this.rotationEnabled&&this._addHeading({heading:r,target:o,view:s});const a={signal:n.signal};k0t(a),this.goToOverride&&s&&this.goToOverride(s,{target:o,options:a}),await s.goTo(o,a)}async updatePosition(e,i){try{const r=this.view,n=await X0t({position:e,view:r},{signal:i.signal}),{graphic:s}=this,{timestamp:o,coords:a}=e,{accuracy:l,altitude:c,altitudeAccuracy:h,latitude:m,longitude:y,speed:v}=a,w=this._getHeading(e,r),x={timestamp:o,accuracy:l,altitude:c,altitudeAccuracy:h,heading:w,latitude:m,longitude:y,speed:v};s&&(s.geometry=n,s.attributes=x);const S=this._getScale(r);await this._animatePoint(n,S,w,i)}catch(r){if(!rMe(r))throw new Q("geolocation-positioning:invalid-point","Cannot position invalid point",{error:r})}return e}};My([p()],Gd.prototype,"_geolocationUsable",2);My([p()],Gd.prototype,"geolocationOptions",2);My([p()],Gd.prototype,"goToLocationEnabled",2);My([p()],Gd.prototype,"goToOverride",2);My([p({type:_r})],Gd.prototype,"graphic",2);My([p()],Gd.prototype,"scale",2);My([p()],Gd.prototype,"rotationEnabled",2);My([p()],Gd.prototype,"view",2);Gd=My([U("map-components.geolocation.GeolocationPositioning")],Gd);var lwt=Object.defineProperty,cwt=Object.getOwnPropertyDescriptor,L1=(t,e,i,r)=>{for(var n=r>1?void 0:r?cwt(e,i):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(r?o(e,i,n):o(n))||n);return r&&n&&lwt(e,i,n),n};const uwt=new rK({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"});function dwt(t){return new Bd({title:t.currentLocation,fieldInfos:[{fieldName:"timestamp",label:t.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:t.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:t.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:t.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:t.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:t.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:t.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:t.speed,format:{places:0,digitSeparator:!0}}],actions:[uwt.clone()],content:[{type:"fields"}]})}let wy=class extends Gd{constructor(e){super(e),this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([WO(()=>{var r;const{graphic:e,view:i}=this;e&&(r=i==null?void 0:i.graphics)!=null&&r.includes(e)&&this._updatePopupTemplate(e)})])}destroy(){this.cancelLocate()}get state(){var e;return this._geolocationUsable?(e=this.view)!=null&&e.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new Q("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new Q("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const e=new AbortController;this._locateController=e,this.error=void 0;try{const i=await Y0t(this.geolocationOptions);if(await this.updatePosition(i,e),this._locateController!==e)return null;const{graphic:r}=this;return r&&this._updatePopupTemplate(r),this._addGraphic(),this.currentPosition=i,this._locateController=void 0,i}catch(i){if(rMe(i))return null;throw e===this._locateController&&(this._locateController=void 0),this.error=i,i}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=void 0}_updatePopupTemplate(e){if(!this.popupEnabled)return;const i=dwt(this.messages),r=e!==this.graphic;this.destroyed||r||(e.popupTemplate=i)}};L1([p()],wy.prototype,"_locateController",2);L1([p()],wy.prototype,"currentPosition",2);L1([p()],wy.prototype,"error",2);L1([p()],wy.prototype,"messages",2);L1([p()],wy.prototype,"popupEnabled",2);L1([p({readOnly:!0})],wy.prototype,"state",1);wy=L1([U("map-components.locate.LocateViewModel")],wy);const hwt={base:"esri-locate"},Npe="gps-off",pwt=AC(wy),iA=class iA extends qi{constructor(){super(...arguments),this.messages=P1(),this.viewModel=pwt(this),this.autoDestroyDisabled=!1,this.geolocationOptions=this.viewModel.geolocationOptions,this.goToLocationDisabled=this.viewModel.goToLocationEnabled,this.goToOverride=this.viewModel.goToOverride,this.graphic=this.viewModel.graphic,this.icon=Npe,this.popupDisabled=this.viewModel.popupEnabled,this.position="top-left",this.scale=this.viewModel.scale,this.state=this.viewModel.state,this.arcgisError=ko(),this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko(),this.arcgisSuccess=ko()}async cancelLocate(){this.viewModel.cancelLocate()}async destroy(){await this.manager.destroy()}async locate(){return await this.viewModel.locate()}loaded(){this.viewModel.messages={...this.messages,...this.messageOverrides},this.manager.onLifecycle(()=>[Le(()=>this.viewModel.error,e=>{this.arcgisError.emit({error:e})}),Le(()=>this.viewModel.currentPosition,e=>{this.arcgisSuccess.emit({position:e})})])}_localizeError(e){var i,r,n;if(e instanceof GeolocationPositionError)return e.code===GeolocationPositionError.PERMISSION_DENIED?(i=this.messages)==null?void 0:i.permissionError:e.code===GeolocationPositionError.TIMEOUT?(r=this.messages)==null?void 0:r.timeoutError:(n=this.messages)==null?void 0:n.positionUnavailable;if(e instanceof Error)return e.message}_locate(){const{viewModel:e}=this;e.state==="locating"?e.cancelLocate():e.locate().catch(()=>{})}render(){var c;const{viewModel:e,icon:i}=this,{state:r}=e,n=r==="locating",s=n?this.messages.cancel:this.messages.title,o=r==="feature-unsupported",a=T0t===void 0?Npe:void 0,l=this._localizeError((c=this.viewModel)==null?void 0:c.error);return q`<div class=${mt(zs(hwt.base,la.widget))}>${!o&&q`<calcite-button class=${mt(la.widgetButton)} .disabled=${r==="disabled"} .iconStart=${n?void 0:i??a} kind=neutral .label=${s} @click=${this._locate} title=${s??Ns}>${n?q`<calcite-loader inline label></calcite-loader>`:null}</calcite-button>`||""}${l?q`<calcite-tooltip open overlay-positioning=fixed .referenceElement=${this.el}>${l}</calcite-tooltip>`:null}</div>`}};iA.properties={autoDestroyDisabled:5,geolocationOptions:0,goToLocationDisabled:7,goToOverride:0,graphic:0,icon:1,label:1,messageOverrides:0,popupDisabled:5,position:3,referenceElement:1,scale:9,state:3},iA.shadowRootOptions=Zn,iA.styles=H0t;let GJ=iA;or("arcgis-locate",GJ);let vm=class extends $K(pa.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){var i,r;if(!((i=this.view)!=null&&i.ready))throw new Q("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await((r=this.view)==null?void 0:r.when()),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};u([p()],vm.prototype,"_goingHomeController",void 0),u([p({readOnly:!0})],vm.prototype,"state",null),u([p()],vm.prototype,"view",null),u([p({type:$s})],vm.prototype,"viewpoint",null),u([p()],vm.prototype,"go",null),u([p()],vm.prototype,"cancelGo",null),vm=u([U("esri.widgets.Home.HomeViewModel")],vm);const fwt=vm;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const mwt=dt`@layer{arcgis-home{display:block}}`,ywt={base:"esri-home"},gwt=AC(fwt);var Qv;let vwt=(Qv=class extends qi{constructor(){super(...arguments),this.messages=P1(),this.viewModel=gwt(this),this.autoDestroyDisabled=!1,this.goToOverride=this.viewModel.goToOverride,this.icon="home",this.position="top-left",this.state=this.viewModel.state,this.viewpoint=this.viewModel.viewpoint,this.arcgisGo=Ir(()=>this.viewModel,"go"),this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko()}async cancelGo(){this.viewModel.cancelGo()}async destroy(){await this.manager.destroy()}async go(){this.viewModel.go()}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}render(){var s;const{messages:e,icon:i}=this,r=(s=this.viewModel)==null?void 0:s.state,n=r==="going-home";return q`<div class=${mt(zs(ywt.base,la.widget))}><calcite-button class=${mt(la.widgetButton)} .disabled=${r==="disabled"} .iconStart=${n?void 0:i??void 0} kind=neutral .label=${e.componentLabel} @click=${this._go} .scale=${n?"s":"m"} title=${(r==="going-home"?e.cancel:e.title)??Ns}>${n?q`<calcite-loader inline label></calcite-loader>`:null}</calcite-button></div>`}},Qv.properties={autoDestroyDisabled:5,goToOverride:0,icon:1,label:1,messageOverrides:0,position:3,referenceElement:1,state:3,viewpoint:0},Qv.shadowRootOptions=Zn,Qv.styles=mwt,Qv);or("arcgis-home",vwt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const q8={frame:"frame",frameAdvancing:"frame--advancing",frameRetreating:"frame--retreating"},bwt=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`,iU=class iU extends Yt{constructor(){super(),this.itemMutationObserver=sn("mutation",()=>this.updateItemsAndProps()),this.items=[],this.selectedIndex=-1,this.flowDirection="standby",this.listen("calciteInternalFlowItemChange",this.handleCalciteInternalFlowItemChange),this.listen("calciteFlowItemBack",this.handleItemBackClick)}async back(){const{items:e,selectedIndex:i}=this,r=e[i],n=e[i-1];if(!r||!n)return;const s=r.beforeBack?r.beforeBack:()=>Promise.resolve();try{await s.call(r)}catch{return}return r.selected=!1,n.selected=!0,n}async setFocus(){await pr(this);const{items:e}=this,i=e[this.selectedIndex];return i==null?void 0:i.setFocus()}connectedCallback(){var e;super.connectedCallback(),(e=this.itemMutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}willUpdate(e){e.has("flowDirection")&&(this.hasUpdated||this.flowDirection!=="standby")&&this.handleFlowDirectionChange(this.flowDirection)}loaded(){this.updateItemsAndProps()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.itemMutationObserver)==null||e.disconnect()}async handleFlowDirectionChange(e){e!=="standby"&&(await qLe(this.frameEl,e==="retreating"?"calcite-frame-retreat":"calcite-frame-advance"),this.resetFlowDirection())}handleCalciteInternalFlowItemChange(e){e.stopPropagation(),this.updateFlowProps()}async handleItemBackClick(e){if(!e.defaultPrevented)return await this.back(),this.setFocus()}resetFlowDirection(){this.flowDirection="standby"}getFlowDirection(e,i){const r=e>0;return!(e>-1&&i>0)&&!r?"standby":i<e?"retreating":"advancing"}updateItemsAndProps(){const{customItemSelectors:e,el:i}=this,r=Array.from(i.querySelectorAll(`calcite-flow-item${e?`,${e}`:""}`)).filter(n=>n.closest("calcite-flow")===i);this.items=r,this.ensureSelectedFlowItemExists(),this.updateFlowProps()}updateFlowProps(){const{selectedIndex:e,items:i}=this,r=this.findSelectedFlowItemIndex(i);i.forEach((n,s)=>{const o=s===r;o||(n.menuOpen=!1),n.showBackButton=o&&r>0}),r!==-1&&(e!==r&&(this.flowDirection=this.getFlowDirection(e,r)),this.selectedIndex=r)}findSelectedFlowItemIndex(e){const i=e.slice(0).reverse().find(r=>!!r.selected);return e.indexOf(i)}ensureSelectedFlowItemExists(){const{items:e}=this;if(this.findSelectedFlowItemIndex(e)!==-1)return;const r=e[e.length-1];r&&(r.selected=!0)}setFrameEl(e){this.frameEl=e}render(){const{flowDirection:e}=this,i={[q8.frame]:!0,[q8.frameAdvancing]:e==="advancing",[q8.frameRetreating]:e==="retreating"};return q`<div class=${ne(i)} ${yt(this.setFrameEl)}><slot></slot></div>`}};iU.properties={flowDirection:[16,{},{state:!0}],customItemSelectors:1},iU.styles=bwt;let u5=iU;Xt("calcite-flow",u5);const wwt=Object.freeze(Object.defineProperty({__proto__:null,Flow:u5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const _wt={backButton:"back-button"},zpe={backLeft:"chevron-left",backRight:"chevron-right"},jl={actionBar:"action-bar",alerts:"alerts",contentTop:"content-top",contentBottom:"content-bottom",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerActions:"footer-actions",footerEnd:"footer-end",footerStart:"footer-start"},xwt=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:none;inline-size:100%;flex:1 1 auto;overflow:hidden}:host([selected]){display:flex}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-flow-border-color, var(--calcite-color-border-3))}calcite-panel{--calcite-panel-background-color: var(--calcite-flow-background-color);--calcite-panel-border-color: var(--calcite-flow-border-color, var(--calcite-flow-item-header-border-block-end));--calcite-panel-corner-radius: var(--calcite-flow-corner-radius);--calcite-panel-description-text-color: var(--calcite-flow-description-text-color);--calcite-panel-footer-background-color: var(--calcite-flow-footer-background-color);--calcite-panel-footer-space: var(--calcite-flow-footer-space, var(--calcite-flow-item-footer-padding));--calcite-panel-header-action-background-color-hover: var(--calcite-flow-header-action-background-color-hover);--calcite-panel-header-action-background-color-press: var(--calcite-flow-header-action-background-color-press);--calcite-panel-header-action-background-color: var(--calcite-flow-header-action-background-color);--calcite-panel-header-action-indicator-color: var(--calcite-flow-header-action-indicator-color);--calcite-panel-header-action-text-color-press: var(--calcite-flow-header-action-text-color-press);--calcite-panel-header-action-text-color: var(--calcite-flow-header-action-text-color);--calcite-panel-header-background-color: var(--calcite-flow-header-background-color);--calcite-panel-header-content-space: var(--calcite-flow-header-content-space);--calcite-panel-heading-text-color: var(--calcite-flow-heading-text-color);--calcite-panel-space: var(--calcite-flow-space)}:host([hidden]){display:none}[hidden]{display:none}`,rU=class rU extends Yt{constructor(){super(...arguments),this.messages=Mn(),this.closable=!1,this.closed=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.loading=!1,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale="m",this.selected=!1,this.showBackButton=!1,this.calciteFlowItemBack=Ne(),this.calciteFlowItemClose=Ne({cancelable:!1}),this.calciteFlowItemScroll=Ne({cancelable:!1}),this.calciteFlowItemToggle=Ne({cancelable:!1}),this.calciteInternalFlowItemChange=Ne({cancelable:!1})}async scrollContentTo(e){var i;await((i=this.containerEl)==null?void 0:i.scrollContentTo(e))}async setFocus(){await pr(this);const{backButtonEl:e,containerEl:i}=this;if(e)return e.setFocus();if(i)return i.setFocus()}willUpdate(e){e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.calciteInternalFlowItemChange.emit()}updated(){Gr(this)}handleInternalPanelScroll(e){e.target===this.containerEl&&(e.stopPropagation(),this.calciteFlowItemScroll.emit())}handleInternalPanelClose(e){e.target===this.containerEl&&(e.stopPropagation(),this.closed=!0,this.calciteFlowItemClose.emit())}handleInternalPanelToggle(e){e.target===this.containerEl&&(e.stopPropagation(),this.collapsed=e.target.collapsed,this.calciteFlowItemToggle.emit())}backButtonClick(){this.calciteFlowItemBack.emit()}setBackRef(e){this.backButtonEl=e}setContainerRef(e){this.containerEl=e}renderBackButton(){const{el:e}=this,i=ca(e)==="rtl",{showBackButton:r,backButtonClick:n,messages:s}=this,o=s.back,a=i?zpe.backRight:zpe.backLeft;return r?nt("flow-back-button",q`<calcite-action .ariaLabel=${o} class=${ne(_wt.backButton)} .icon=${a} @click=${n} scale=s slot=header-actions-start .text=${o} title=${o??Ge} ${yt(this.setBackRef)}></calcite-action>`):null}render(){const{collapsed:e,collapseDirection:i,collapsible:r,closable:n,closed:s,description:o,disabled:a,heading:l,headingLevel:c,loading:h,menuOpen:m,messages:y,overlayPositioning:v,beforeClose:w}=this;return Hr({disabled:a,children:q`<calcite-panel .beforeClose=${w} .closable=${n} .closed=${s} .collapseDirection=${i} .collapsed=${e} .collapsible=${r} .description=${o} .disabled=${a} .heading=${l} .headingLevel=${c} .loading=${h} .menuOpen=${m} .messageOverrides=${y} @calcitePanelClose=${this.handleInternalPanelClose} @calcitePanelScroll=${this.handleInternalPanelScroll} @calcitePanelToggle=${this.handleInternalPanelToggle} .overlayPositioning=${v} .scale=${this.scale} ${yt(this.setContainerRef)}>${this.renderBackButton()}<slot name=${jl.actionBar} slot=${Fr.actionBar}></slot><slot name=${jl.alerts} slot=${Fr.alerts}></slot><slot name=${jl.headerActionsStart} slot=${Fr.headerActionsStart}></slot><slot name=${jl.headerActionsEnd} slot=${Fr.headerActionsEnd}></slot><slot name=${jl.headerContent} slot=${Fr.headerContent}></slot><slot name=${jl.headerMenuActions} slot=${Fr.headerMenuActions}></slot><slot name=${jl.fab} slot=${Fr.fab}></slot><slot name=${jl.contentTop} slot=${Fr.contentTop}></slot><slot name=${jl.contentBottom} slot=${Fr.contentBottom}></slot><slot name=${jl.footerStart} slot=${Fr.footerStart}></slot><slot name=${jl.footer} slot=${Fr.footer}></slot><slot name=${jl.footerEnd} slot=${Fr.footerEnd}></slot><slot name=${jl.footerActions} slot=${Fr.footerActions}></slot><slot></slot></calcite-panel>`})}};rU.properties={beforeBack:[0,{},{attribute:!1}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],loading:[7,{},{reflect:!0,type:Boolean}],menuOpen:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],showBackButton:[5,{},{type:Boolean}]},rU.styles=xwt;let d5=rU;Xt("calcite-flow-item",d5);const Swt=Object.freeze(Object.defineProperty({__proto__:null,FlowItem:d5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const eS={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},L$={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const $wt=dt`:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,nU=class nU extends Yt{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=Ut(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=Ut(e)}handleContentStartSlotChange(e){this.hasContentStart=Ut(e)}handleContentEndSlotChange(e){this.hasContentEnd=Ut(e)}renderActionsStart(){const{hasActionsStart:e}=this;return nt("actions-start-container",q`<div class=${ne(eS.actionsStart)} .hidden=${!e}><slot name=${L$.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return nt("actions-end-container",q`<div class=${ne(eS.actionsEnd)} .hidden=${!e}><slot name=${L$.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return q`<div class=${ne(eS.contentStart)} .hidden=${!e}><slot name=${L$.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return q`<div class=${ne(eS.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return q`<div class=${ne(eS.contentEnd)} .hidden=${!e}><slot name=${L$.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return q`<div class=${ne(eS.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};nU.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},nU.styles=$wt;let HJ=nU;Xt("calcite-stack",HJ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const pN=(t,e,i)=>{const r=eY(e),n=new RegExp(r,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const s=(o,a,l)=>{if(o!=null&&o.constant||o!=null&&o.filterDisabled)return!0;let c=!1;return kDe(o,(h,m)=>{typeof h=="function"||h==null||l&&!l.includes(m)||(Array.isArray(h)||typeof h=="object"&&h!==null?s(h,a)&&(c=!0):a.test(h)&&(c=!0))}),c};return t.filter(o=>s(o,n,i))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Twt={container:"container"},Ewt={search:"search"},Cwt=dt`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,rA=class rA extends Yt{constructor(){super(...arguments),this.filterDebounced=nC((e,i=!1,r)=>this.updateFiltered(pN(this.items??[],e,this.filterProps),i,r),vE.filter),this.textInput=Tn(),this._value="",this.messages=Mn(),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=Ne({cancelable:!1})}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(pN(this.items??[],e,this.filterProps),!1,i)})}async setFocus(){var e;return await pr(this),(e=this.textInput.value)==null?void 0:e.setFocus()}async load(){this.updateFiltered(pN(this.items??[],this.value,this.filterProps))}willUpdate(e){var i;(e.has("items")&&(this.hasUpdated||((i=this.items)==null?void 0:i.length)>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Gr(this)}disconnectedCallback(){super.disconnectedCallback(),this.filterDebounced.cancel()}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,r){this.filteredItems=e,i&&this.calciteFilterChange.emit(),r==null||r()}render(){const{disabled:e,scale:i}=this;return Hr({disabled:e,children:q`<div class=${ne(Twt.container)}><label><calcite-input clearable .disabled=${e} .icon=${Ewt.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${yt(this.textInput)}></calcite-input></label></div>`})}};rA.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},rA.shadowRootOptions={mode:"open",delegatesFocus:!0},rA.styles=Cwt;let qJ=rA;Xt("calcite-filter",qJ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Bk="calcite-list",h5="calcite-list-item-group",iy="calcite-list-item";function gMe(t){var i;const e=(i=t.parentElement)==null?void 0:i.closest(iy);e&&(e.open=!0,gMe(e))}function Iwt(t){const e=t.assignedElements({flatten:!0}),i=e.filter(s=>s==null?void 0:s.matches(h5)).map(s=>Array.from(s.querySelectorAll(iy))).flat(),r=e.filter(s=>s==null?void 0:s.matches(iy));return{lists:e.filter(s=>s==null?void 0:s.matches(Bk)),items:i.concat(r)}}function Mwt(t){const e=t.assignedElements({flatten:!0}).filter(r=>r.matches(iy)),i=e.filter(r=>!r.filterHidden);e.forEach(r=>{const n=i.indexOf(r);r.setPosition=n===-1?void 0:n+1,r.setSize=n===-1?void 0:i.length})}function kwt(t,e=!1){const i=e?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item";return document.evaluate(i,t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}function Fpe(t){return t.tagName==="CALCITE-LIST-ITEM"}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Upe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Kp(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Upe(Object(i),!0).forEach(function(r){Awt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Upe(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function fN(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fN=function(e){return typeof e}:fN=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fN(t)}function Awt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _y(){return _y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},_y.apply(this,arguments)}function Owt(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function Pwt(t,e){if(t==null)return{};var i=Owt(t,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Lwt="1.15.6";function uy(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ky=uy(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vP=uy(/Edge/i),jpe=uy(/firefox/i),Gk=uy(/safari/i)&&!uy(/chrome/i)&&!uy(/android/i),NQ=uy(/iP(ad|od|hone)/i),vMe=uy(/chrome/i)&&uy(/android/i),bMe={capture:!1,passive:!1};function Li(t,e,i){t.addEventListener(e,i,!ky&&bMe)}function Oi(t,e,i){t.removeEventListener(e,i,!ky&&bMe)}function p5(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function wMe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Id(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&p5(t,e):p5(t,e))||r&&t===i)return t;if(t===i)break}while(t=wMe(t))}return null}var Vpe=/\s+/g;function rc(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Vpe," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(Vpe," ")}}function ti(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function iT(t,e){var i="";if(typeof t=="string")i=t;else do{var r=ti(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function _Me(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,s=r.length;if(i)for(;n<s;n++)i(r[n],n);return r}return[]}function zp(){var t=document.scrollingElement;return t||document.documentElement}function bs(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,h,m;if(t!==window&&t.parentNode&&t!==zp()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,h=s.height,m=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,m=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!ky))do if(n&&n.getBoundingClientRect&&(ti(n,"transform")!=="none"||i&&ti(n,"position")!=="static")){var y=n.getBoundingClientRect();o-=y.top+parseInt(ti(n,"border-top-width")),a-=y.left+parseInt(ti(n,"border-left-width")),l=o+s.height,c=a+s.width;break}while(n=n.parentNode);if(r&&t!==window){var v=iT(n||t),w=v&&v.a,x=v&&v.d;v&&(o/=x,a/=w,m/=w,h/=x,l=o+h,c=a+m)}return{top:o,left:a,bottom:l,right:c,width:m,height:h}}}function Bpe(t,e,i){for(var r=zv(t,!0),n=bs(t)[e];r;){var s=bs(r)[i],o=void 0;if(o=n>=s,!o)return r;if(r===zp())break;r=zv(r,!1)}return!1}function JE(t,e,i,r){for(var n=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==ii.ghost&&(r||o[s]!==ii.dragged)&&Id(o[s],i.draggable,t,!1)){if(n===e)return o[s];n++}s++}return null}function zQ(t,e){for(var i=t.lastElementChild;i&&(i===ii.ghost||ti(i,"display")==="none"||e&&!p5(i,e));)i=i.previousElementSibling;return i||null}function iu(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ii.clone&&(!e||p5(t,e))&&i++;return i}function Gpe(t){var e=0,i=0,r=zp();if(t)do{var n=iT(t),s=n.a,o=n.d;e+=t.scrollLeft*s,i+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,i]}function Rwt(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function zv(t,e){if(!t||!t.getBoundingClientRect)return zp();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=ti(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return zp();if(r||e)return i;r=!0}}while(i=i.parentNode);return zp()}function Dwt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function W8(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Hk;function xMe(t,e){return function(){if(!Hk){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),Hk=setTimeout(function(){Hk=void 0},e)}}}function Nwt(){clearTimeout(Hk),Hk=void 0}function SMe(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function $Me(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function TMe(t,e,i){var r={};return Array.from(t.children).forEach(function(n){var s,o,a,l;if(!(!Id(n,e.draggable,t,!1)||n.animated||n===i)){var c=bs(n);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var bl="Sortable"+new Date().getTime();function zwt(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(ti(n,"display")==="none"||n===ii.ghost)){t.push({target:n,rect:bs(n)});var s=Kp({},t[t.length-1].rect);if(n.thisAnimationDuration){var o=iT(n,!0);o&&(s.top-=o.f,s.left-=o.e)}n.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Rwt(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,h=c.fromRect,m=bs(c),y=c.prevFromRect,v=c.prevToRect,w=a.rect,x=iT(c,!0);x&&(m.top-=x.f,m.left-=x.e),c.toRect=m,c.thisAnimationDuration&&W8(y,m)&&!W8(h,m)&&(w.top-m.top)/(w.left-m.left)===(h.top-m.top)/(h.left-m.left)&&(l=Uwt(w,y,v,n.options)),W8(m,h)||(c.prevFromRect=h,c.prevToRect=m,l||(l=n.options.animation),n.animate(c,w,m,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,n,s,o){if(o){ti(r,"transition",""),ti(r,"transform","");var a=iT(this.el),l=a&&a.a,c=a&&a.d,h=(n.left-s.left)/(l||1),m=(n.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!m,ti(r,"transform","translate3d("+h+"px,"+m+"px,0)"),this.forRepaintDummy=Fwt(r),ti(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ti(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ti(r,"transition",""),ti(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Fwt(t){return t.offsetWidth}function Uwt(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var tS=[],J8={initializeByDefault:!0},bP={mount:function(e){for(var i in J8)J8.hasOwnProperty(i)&&!(i in e)&&(e[i]=J8[i]);tS.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),tS.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";tS.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][s]&&i[o.pluginName][s](Kp({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Kp({sortable:i},r)))})},initializePlugins:function(e,i,r,n){tS.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,_y(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,i){var r={};return tS.forEach(function(n){typeof n.eventProperties=="function"&&_y(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return tS.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[i]=="function"&&(n=s.optionListeners[i].call(e[s.pluginName],r))}),n}};function jwt(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,m=t.newDraggableIndex,y=t.originalEvent,v=t.putSortable,w=t.extraEventProperties;if(e=e||i&&i[bl],!!e){var x,S=e.options,C="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ky&&!vP?x=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(r,!0,!0)),x.to=o||i,x.from=a||i,x.item=n||i,x.clone=s,x.oldIndex=l,x.newIndex=c,x.oldDraggableIndex=h,x.newDraggableIndex=m,x.originalEvent=y,x.pullMode=v?v.lastPutMode:void 0;var k=Kp(Kp({},w),bP.getEventProperties(r,e));for(var A in k)x[A]=k[A];i&&i.dispatchEvent(x),S[C]&&S[C].call(e,x)}}var Vwt=["evt"],Qa=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=Pwt(r,Vwt);bP.pluginEvent.bind(ii)(e,i,Kp({dragEl:ot,parentEl:Rn,ghostEl:di,rootEl:cn,nextEl:Iw,lastDownEl:mN,cloneEl:_n,cloneHidden:bv,dragStarted:q2,putSortable:_o,activeSortable:ii.active,originalEvent:n,oldIndex:R$,oldDraggableIndex:qk,newIndex:lc,newDraggableIndex:dv,hideGhostForTarget:MMe,unhideGhostForTarget:kMe,cloneNowHidden:function(){bv=!0},cloneNowShown:function(){bv=!1},dispatchSortableEvent:function(a){Ea({sortable:i,name:a,originalEvent:n})}},s))};function Ea(t){jwt(Kp({putSortable:_o,cloneEl:_n,targetEl:ot,rootEl:cn,oldIndex:R$,oldDraggableIndex:qk,newIndex:lc,newDraggableIndex:dv},t))}var ot,Rn,di,cn,Iw,mN,_n,bv,R$,lc,qk,dv,_3,_o,n$=!1,f5=!1,m5=[],L0,Ju,Z8,Y8,Hpe,qpe,q2,iS,Wk,Jk=!1,x3=!1,yN,jo,X8=[],WJ=!1,y5=[],hj=typeof document<"u",S3=NQ,Wpe=vP||ky?"cssFloat":"float",Bwt=hj&&!vMe&&!NQ&&"draggable"in document.createElement("div"),EMe=function(){if(hj){if(ky)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),CMe=function(e,i){var r=ti(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=JE(e,0,i),o=JE(e,1,i),a=s&&ti(s),l=o&&ti(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+bs(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+bs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var m=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===m)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=n&&r[Wpe]==="none"||o&&r[Wpe]==="none"&&c+h>n)?"vertical":"horizontal"},Gwt=function(e,i,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return n===a||s===l||n+o/2===a+c/2},Hwt=function(e,i){var r;return m5.some(function(n){var s=n[bl].options.emptyInsertThreshold;if(!(!s||zQ(n))){var o=bs(n),a=e>=o.left-s&&e<=o.right+s,l=i>=o.top-s&&i<=o.bottom+s;if(a&&l)return r=n}}),r},IMe=function(e){function i(s,o){return function(a,l,c,h){var m=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||m))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return i(s(a,l,c,h),o)(a,l,c,h);var y=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var r={},n=e.group;(!n||fN(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},MMe=function(){!EMe&&di&&ti(di,"display","none")},kMe=function(){!EMe&&di&&ti(di,"display","")};hj&&!vMe&&document.addEventListener("click",function(t){if(f5)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),f5=!1,!1},!0);var R0=function(e){if(ot){e=e.touches?e.touches[0]:e;var i=Hwt(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[bl]._onDragOver(r)}}},qwt=function(e){ot&&ot.parentNode[bl]._isOutsideThisEl(e.target)};function ii(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=_y({},e),t[bl]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return CMe(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ii.supportPointer!==!1&&"PointerEvent"in window&&(!Gk||NQ),emptyInsertThreshold:5};bP.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);IMe(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:Bwt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Li(t,"pointerdown",this._onTapStart):(Li(t,"mousedown",this._onTapStart),Li(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Li(t,"dragover",this),Li(t,"dragenter",this)),m5.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_y(this,zwt())}ii.prototype={constructor:ii,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(iS=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,ot):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,s=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=n.filter;if(e_t(r),!ot&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Gk&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Id(l,n.draggable,r,!1),!(l&&l.animated)&&mN!==l)){if(R$=iu(l),qk=iu(l,n.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Ea({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Qa("filter",i,{evt:e}),s&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(m){if(m=Id(c,m.trim(),r,!1),m)return Ea({sortable:i,rootEl:m,name:"filter",targetEl:l,fromEl:r,toEl:r}),Qa("filter",i,{evt:e}),!0}),h)){s&&e.preventDefault();return}n.handle&&!Id(c,n.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,i,r){var n=this,s=n.el,o=n.options,a=s.ownerDocument,l;if(r&&!ot&&r.parentNode===s){var c=bs(r);if(cn=s,ot=r,Rn=ot.parentNode,Iw=ot.nextSibling,mN=r,_3=o.group,ii.dragged=ot,L0={target:ot,clientX:(i||e).clientX,clientY:(i||e).clientY},Hpe=L0.clientX-c.left,qpe=L0.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,ot.style["will-change"]="all",l=function(){if(Qa("delayEnded",n,{evt:e}),ii.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!jpe&&n.nativeDraggable&&(ot.draggable=!0),n._triggerDragStart(e,i),Ea({sortable:n,name:"choose",originalEvent:e}),rc(ot,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){_Me(ot,h.trim(),K8)}),Li(a,"dragover",R0),Li(a,"mousemove",R0),Li(a,"touchmove",R0),o.supportPointer?(Li(a,"pointerup",n._onDrop),!this.nativeDraggable&&Li(a,"pointercancel",n._onDrop)):(Li(a,"mouseup",n._onDrop),Li(a,"touchend",n._onDrop),Li(a,"touchcancel",n._onDrop)),jpe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ot.draggable=!0),Qa("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(vP||ky))){if(ii.eventCanceled){this._onDrop();return}o.supportPointer?(Li(a,"pointerup",n._disableDelayedDrag),Li(a,"pointercancel",n._disableDelayedDrag)):(Li(a,"mouseup",n._disableDelayedDrag),Li(a,"touchend",n._disableDelayedDrag),Li(a,"touchcancel",n._disableDelayedDrag)),Li(a,"mousemove",n._delayedDragTouchMoveHandler),Li(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&Li(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ot&&K8(ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Oi(e,"mouseup",this._disableDelayedDrag),Oi(e,"touchend",this._disableDelayedDrag),Oi(e,"touchcancel",this._disableDelayedDrag),Oi(e,"pointerup",this._disableDelayedDrag),Oi(e,"pointercancel",this._disableDelayedDrag),Oi(e,"mousemove",this._delayedDragTouchMoveHandler),Oi(e,"touchmove",this._delayedDragTouchMoveHandler),Oi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Li(document,"pointermove",this._onTouchMove):i?Li(document,"touchmove",this._onTouchMove):Li(document,"mousemove",this._onTouchMove):(Li(ot,"dragend",this),Li(cn,"dragstart",this._onDragStart));try{document.selection?gN(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(n$=!1,cn&&ot){Qa("dragStarted",this,{evt:i}),this.nativeDraggable&&Li(document,"dragover",qwt);var r=this.options;!e&&rc(ot,r.dragClass,!1),rc(ot,r.ghostClass,!0),ii.active=this,e&&this._appendGhost(),Ea({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Ju){this._lastX=Ju.clientX,this._lastY=Ju.clientY,MMe();for(var e=document.elementFromPoint(Ju.clientX,Ju.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ju.clientX,Ju.clientY),e!==i);)i=e;if(ot.parentNode[bl]._isOutsideThisEl(e),i)do{if(i[bl]){var r=void 0;if(r=i[bl]._onDragOver({clientX:Ju.clientX,clientY:Ju.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=wMe(i));kMe()}},_onTouchMove:function(e){if(L0){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,s=e.touches?e.touches[0]:e,o=di&&iT(di,!0),a=di&&o&&o.a,l=di&&o&&o.d,c=S3&&jo&&Gpe(jo),h=(s.clientX-L0.clientX+n.x)/(a||1)+(c?c[0]-X8[0]:0)/(a||1),m=(s.clientY-L0.clientY+n.y)/(l||1)+(c?c[1]-X8[1]:0)/(l||1);if(!ii.active&&!n$){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(di){o?(o.e+=h-(Z8||0),o.f+=m-(Y8||0)):o={a:1,b:0,c:0,d:1,e:h,f:m};var y="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ti(di,"webkitTransform",y),ti(di,"mozTransform",y),ti(di,"msTransform",y),ti(di,"transform",y),Z8=h,Y8=m,Ju=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!di){var e=this.options.fallbackOnBody?document.body:cn,i=bs(ot,!0,S3,!0,e),r=this.options;if(S3){for(jo=e;ti(jo,"position")==="static"&&ti(jo,"transform")==="none"&&jo!==document;)jo=jo.parentNode;jo!==document.body&&jo!==document.documentElement?(jo===document&&(jo=zp()),i.top+=jo.scrollTop,i.left+=jo.scrollLeft):jo=zp(),X8=Gpe(jo)}di=ot.cloneNode(!0),rc(di,r.ghostClass,!1),rc(di,r.fallbackClass,!0),rc(di,r.dragClass,!0),ti(di,"transition",""),ti(di,"transform",""),ti(di,"box-sizing","border-box"),ti(di,"margin",0),ti(di,"top",i.top),ti(di,"left",i.left),ti(di,"width",i.width),ti(di,"height",i.height),ti(di,"opacity","0.8"),ti(di,"position",S3?"absolute":"fixed"),ti(di,"zIndex","100000"),ti(di,"pointerEvents","none"),ii.ghost=di,e.appendChild(di),ti(di,"transform-origin",Hpe/parseInt(di.style.width)*100+"% "+qpe/parseInt(di.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,s=r.options;if(Qa("dragStart",this,{evt:e}),ii.eventCanceled){this._onDrop();return}Qa("setupClone",this),ii.eventCanceled||(_n=$Me(ot),_n.removeAttribute("id"),_n.draggable=!1,_n.style["will-change"]="",this._hideClone(),rc(_n,this.options.chosenClass,!1),ii.clone=_n),r.cloneId=gN(function(){Qa("clone",r),!ii.eventCanceled&&(r.options.removeCloneOnHide||cn.insertBefore(_n,ot),r._hideClone(),Ea({sortable:r,name:"clone"}))}),!i&&rc(ot,s.dragClass,!0),i?(f5=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Oi(document,"mouseup",r._onDrop),Oi(document,"touchend",r._onDrop),Oi(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,ot)),Li(document,"drop",r),ti(ot,"transform","translateZ(0)")),n$=!0,r._dragStartId=gN(r._dragStarted.bind(r,i,e)),Li(document,"selectstart",r),q2=!0,window.getSelection().removeAllRanges(),Gk&&ti(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,s,o,a=this.options,l=a.group,c=ii.active,h=_3===l,m=a.sort,y=_o||c,v,w=this,x=!1;if(WJ)return;function S(Oe,Be){Qa(Oe,w,Kp({evt:e,isOwner:h,axis:v?"vertical":"horizontal",revert:o,dragRect:n,targetRect:s,canSort:m,fromSortable:y,target:r,completed:k,onMove:function(Pe,rt){return $3(cn,i,ot,n,Pe,bs(Pe),e,rt)},changed:A},Be))}function C(){S("dragOverAnimationCapture"),w.captureAnimationState(),w!==y&&y.captureAnimationState()}function k(Oe){return S("dragOverCompleted",{insertion:Oe}),Oe&&(h?c._hideClone():c._showClone(w),w!==y&&(rc(ot,_o?_o.options.ghostClass:c.options.ghostClass,!1),rc(ot,a.ghostClass,!0)),_o!==w&&w!==ii.active?_o=w:w===ii.active&&_o&&(_o=null),y===w&&(w._ignoreWhileAnimating=r),w.animateAll(function(){S("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(r===ot&&!ot.animated||r===i&&!r.animated)&&(iS=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(ot.parentNode[bl]._isOutsideThisEl(e.target),!Oe&&R0(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),x=!0}function A(){lc=iu(ot),dv=iu(ot,a.draggable),Ea({sortable:w,name:"change",toEl:i,newIndex:lc,newDraggableIndex:dv,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Id(r,a.draggable,i,!0),S("dragOver"),ii.eventCanceled)return x;if(ot.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||w._ignoreWhileAnimating===r)return k(!1);if(f5=!1,c&&!a.disabled&&(h?m||(o=Rn!==cn):_o===this||(this.lastPutMode=_3.checkPull(this,c,ot,e))&&l.checkPut(this,c,ot,e))){if(v=this._getDirection(e,r)==="vertical",n=bs(ot),S("dragOverValid"),ii.eventCanceled)return x;if(o)return Rn=cn,C(),this._hideClone(),S("revert"),ii.eventCanceled||(Iw?cn.insertBefore(ot,Iw):cn.appendChild(ot)),k(!0);var R=zQ(i,a.draggable);if(!R||Ywt(e,v,this)&&!R.animated){if(R===ot)return k(!1);if(R&&i===e.target&&(r=R),r&&(s=bs(r)),$3(cn,i,ot,n,r,s,e,!!r)!==!1)return C(),R&&R.nextSibling?i.insertBefore(ot,R.nextSibling):i.appendChild(ot),Rn=i,A(),k(!0)}else if(R&&Zwt(e,v,this)){var D=JE(i,0,a,!0);if(D===ot)return k(!1);if(r=D,s=bs(r),$3(cn,i,ot,n,r,s,e,!1)!==!1)return C(),i.insertBefore(ot,D),Rn=i,A(),k(!0)}else if(r.parentNode===i){s=bs(r);var B=0,z,W=ot.parentNode!==i,Y=!Gwt(ot.animated&&ot.toRect||n,r.animated&&r.toRect||s,v),ee=v?"top":"left",ge=Bpe(r,"top","top")||Bpe(ot,"top","top"),fe=ge?ge.scrollTop:void 0;iS!==r&&(z=s[ee],Jk=!1,x3=!Y&&a.invertSwap||W),B=Xwt(e,r,s,v,Y?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,x3,iS===r);var ue;if(B!==0){var ae=iu(ot);do ae-=B,ue=Rn.children[ae];while(ue&&(ti(ue,"display")==="none"||ue===di))}if(B===0||ue===r)return k(!1);iS=r,Wk=B;var Se=r.nextElementSibling,le=!1;le=B===1;var be=$3(cn,i,ot,n,r,s,e,le);if(be!==!1)return(be===1||be===-1)&&(le=be===1),WJ=!0,setTimeout(Jwt,30),C(),le&&!Se?i.appendChild(ot):r.parentNode.insertBefore(ot,le?Se:r),ge&&SMe(ge,0,fe-ge.scrollTop),Rn=ot.parentNode,z!==void 0&&!x3&&(yN=Math.abs(z-bs(r)[ee])),A(),k(!0)}if(i.contains(ot))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Oi(document,"mousemove",this._onTouchMove),Oi(document,"touchmove",this._onTouchMove),Oi(document,"pointermove",this._onTouchMove),Oi(document,"dragover",R0),Oi(document,"mousemove",R0),Oi(document,"touchmove",R0)},_offUpEvents:function(){var e=this.el.ownerDocument;Oi(e,"mouseup",this._onDrop),Oi(e,"touchend",this._onDrop),Oi(e,"pointerup",this._onDrop),Oi(e,"pointercancel",this._onDrop),Oi(e,"touchcancel",this._onDrop),Oi(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(lc=iu(ot),dv=iu(ot,r.draggable),Qa("drop",this,{evt:e}),Rn=ot&&ot.parentNode,lc=iu(ot),dv=iu(ot,r.draggable),ii.eventCanceled){this._nulling();return}n$=!1,x3=!1,Jk=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),JJ(this.cloneId),JJ(this._dragStartId),this.nativeDraggable&&(Oi(document,"drop",this),Oi(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Gk&&ti(document.body,"user-select",""),ti(ot,"transform",""),e&&(q2&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),di&&di.parentNode&&di.parentNode.removeChild(di),(cn===Rn||_o&&_o.lastPutMode!=="clone")&&_n&&_n.parentNode&&_n.parentNode.removeChild(_n),ot&&(this.nativeDraggable&&Oi(ot,"dragend",this),K8(ot),ot.style["will-change"]="",q2&&!n$&&rc(ot,_o?_o.options.ghostClass:this.options.ghostClass,!1),rc(ot,this.options.chosenClass,!1),Ea({sortable:this,name:"unchoose",toEl:Rn,newIndex:null,newDraggableIndex:null,originalEvent:e}),cn!==Rn?(lc>=0&&(Ea({rootEl:Rn,name:"add",toEl:Rn,fromEl:cn,originalEvent:e}),Ea({sortable:this,name:"remove",toEl:Rn,originalEvent:e}),Ea({rootEl:Rn,name:"sort",toEl:Rn,fromEl:cn,originalEvent:e}),Ea({sortable:this,name:"sort",toEl:Rn,originalEvent:e})),_o&&_o.save()):lc!==R$&&lc>=0&&(Ea({sortable:this,name:"update",toEl:Rn,originalEvent:e}),Ea({sortable:this,name:"sort",toEl:Rn,originalEvent:e})),ii.active&&((lc==null||lc===-1)&&(lc=R$,dv=qk),Ea({sortable:this,name:"end",toEl:Rn,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Qa("nulling",this),cn=ot=Rn=di=Iw=_n=mN=bv=L0=Ju=q2=lc=dv=R$=qk=iS=Wk=_o=_3=ii.dragged=ii.ghost=ii.clone=ii.active=null,y5.forEach(function(e){e.checked=!0}),y5.length=Z8=Y8=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ot&&(this._onDragOver(e),Wwt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,s=r.length,o=this.options;n<s;n++)i=r[n],Id(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||Qwt(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(s,o){var a=n.children[o];Id(a,this.options.draggable,n,!1)&&(r[s]=a)},this),i&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Id(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=bP.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&IMe(r)},destroy:function(){Qa("destroy",this);var e=this.el;e[bl]=null,Oi(e,"mousedown",this._onTapStart),Oi(e,"touchstart",this._onTapStart),Oi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Oi(e,"dragover",this),Oi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),m5.splice(m5.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!bv){if(Qa("hideClone",this),ii.eventCanceled)return;ti(_n,"display","none"),this.options.removeCloneOnHide&&_n.parentNode&&_n.parentNode.removeChild(_n),bv=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(bv){if(Qa("showClone",this),ii.eventCanceled)return;ot.parentNode==cn&&!this.options.group.revertClone?cn.insertBefore(_n,ot):Iw?cn.insertBefore(_n,Iw):cn.appendChild(_n),this.options.group.revertClone&&this.animate(ot,_n),ti(_n,"display",""),bv=!1}}};function Wwt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function $3(t,e,i,r,n,s,o,a){var l,c=t[bl],h=c.options.onMove,m;return window.CustomEvent&&!ky&&!vP?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=n||e,l.relatedRect=s||bs(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),h&&(m=h.call(c,l,o)),m}function K8(t){t.draggable=!1}function Jwt(){WJ=!1}function Zwt(t,e,i){var r=bs(JE(i.el,0,i.options,!0)),n=TMe(i.el,i.options,di),s=10;return e?t.clientX<n.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<n.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Ywt(t,e,i){var r=bs(zQ(i.el,i.options.draggable)),n=TMe(i.el,i.options,di),s=10;return e?t.clientX>n.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>n.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Xwt(t,e,i,r,n,s,o,a){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,h=r?i.top:i.left,m=r?i.bottom:i.right,y=!1;if(!o){if(a&&yN<c*n){if(!Jk&&(Wk===1?l>h+c*s/2:l<m-c*s/2)&&(Jk=!0),Jk)y=!0;else if(Wk===1?l<h+yN:l>m-yN)return-Wk}else if(l>h+c*(1-n)/2&&l<m-c*(1-n)/2)return Kwt(e)}return y=y||o,y&&(l<h+c*s/2||l>m-c*s/2)?l>h+c/2?1:-1:0}function Kwt(t){return iu(ot)<iu(t)?1:-1}function Qwt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function e_t(t){y5.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&y5.push(r)}}function gN(t){return setTimeout(t,0)}function JJ(t){return clearTimeout(t)}hj&&Li(document,"touchmove",function(t){(ii.active||n$)&&t.cancelable&&t.preventDefault()});ii.utils={on:Li,off:Oi,css:ti,find:_Me,is:function(e,i){return!!Id(e,i,e,!1)},extend:Dwt,throttle:xMe,closest:Id,toggleClass:rc,clone:$Me,index:iu,nextTick:gN,cancelNextTick:JJ,detectDirection:CMe,getChild:JE,expando:bl};ii.get=function(t){return t[bl]};ii.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(ii.utils=Kp(Kp({},ii.utils),r.utils)),bP.mount(r)})};ii.create=function(t,e){return new ii(t,e)};ii.version=Lwt;var ys=[],W2,ZJ,YJ=!1,Q8,eG,g5,J2;function t_t(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?Li(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Li(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Li(document,"touchmove",this._handleFallbackAutoScroll):Li(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Oi(document,"dragover",this._handleAutoScroll):(Oi(document,"pointermove",this._handleFallbackAutoScroll),Oi(document,"touchmove",this._handleFallbackAutoScroll),Oi(document,"mousemove",this._handleFallbackAutoScroll)),Jpe(),vN(),Nwt()},nulling:function(){g5=ZJ=W2=YJ=J2=Q8=eG=null,ys.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,s=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(s,o);if(g5=i,r||this.options.forceAutoScrollFallback||vP||ky||Gk){tG(i,this.options,a,r);var l=zv(a,!0);YJ&&(!J2||s!==Q8||o!==eG)&&(J2&&Jpe(),J2=setInterval(function(){var c=zv(document.elementFromPoint(s,o),!0);c!==l&&(l=c,vN()),tG(i,n.options,c,r)},10),Q8=s,eG=o)}else{if(!this.options.bubbleScroll||zv(a,!0)===zp()){vN();return}tG(i,this.options,zv(a,!1),!1)}}},_y(t,{pluginName:"scroll",initializeByDefault:!0})}function vN(){ys.forEach(function(t){clearInterval(t.pid)}),ys=[]}function Jpe(){clearInterval(J2)}var tG=xMe(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=zp(),c=!1,h;ZJ!==i&&(ZJ=i,vN(),W2=e.scroll,h=e.scrollFn,W2===!0&&(W2=zv(i,!0)));var m=0,y=W2;do{var v=y,w=bs(v),x=w.top,S=w.bottom,C=w.left,k=w.right,A=w.width,R=w.height,D=void 0,B=void 0,z=v.scrollWidth,W=v.scrollHeight,Y=ti(v),ee=v.scrollLeft,ge=v.scrollTop;v===l?(D=A<z&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),B=R<W&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(D=A<z&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),B=R<W&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var fe=D&&(Math.abs(k-n)<=o&&ee+A<z)-(Math.abs(C-n)<=o&&!!ee),ue=B&&(Math.abs(S-s)<=o&&ge+R<W)-(Math.abs(x-s)<=o&&!!ge);if(!ys[m])for(var ae=0;ae<=m;ae++)ys[ae]||(ys[ae]={});(ys[m].vx!=fe||ys[m].vy!=ue||ys[m].el!==v)&&(ys[m].el=v,ys[m].vx=fe,ys[m].vy=ue,clearInterval(ys[m].pid),(fe!=0||ue!=0)&&(c=!0,ys[m].pid=setInterval((function(){r&&this.layer===0&&ii.active._onTouchMove(g5);var Se=ys[this.layer].vy?ys[this.layer].vy*a:0,le=ys[this.layer].vx?ys[this.layer].vx*a:0;typeof h=="function"&&h.call(ii.dragged.parentNode[bl],le,Se,t,g5,ys[this.layer].el)!=="continue"||SMe(ys[this.layer].el,le,Se)}).bind({layer:m}),24))),m++}while(e.bubbleScroll&&y!==l&&(y=zv(y,!1)));YJ=c}},30),AMe=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||s;a();var h=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,m=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(m)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function FQ(){}FQ.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=JE(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:AMe};_y(FQ,{pluginName:"revertOnSpill"});function UQ(){}UQ.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:AMe};_y(UQ,{pluginName:"removeOnSpill"});ii.mount(new t_t);ii.mount(UQ,FQ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const pj=new Set,i_t={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function r_t(t){if(PMe(t))return;OMe(t),pj.add(t);const e="id",{group:i,handleSelector:r,dragSelector:n}=t;t.sortable=ii.create(t.el,{dataIdAttr:e,...i_t,...!!n&&{draggable:n},...!!i&&{group:{name:i,...!!t.canPull&&{pull:(s,o,a,{newDraggableIndex:l,oldDraggableIndex:c})=>t.canPull({toEl:s.el,fromEl:o.el,dragEl:a,newIndex:l,oldIndex:c})},...!!t.canPut&&{put:(s,o,a,{newDraggableIndex:l,oldDraggableIndex:c})=>t.canPut({toEl:s.el,fromEl:o.el,dragEl:a,newIndex:l,oldIndex:c})}}},onMove:({from:s,dragged:o,to:a,related:l})=>{t.onDragMove&&t.onDragMove({fromEl:s,dragEl:o,toEl:a,relatedEl:l})},handle:r,filter:`${r}[disabled]`,onStart:({from:s,item:o,to:a,newDraggableIndex:l,oldDraggableIndex:c})=>{XJ.active=!0,n_t(),t.onDragStart({fromEl:s,dragEl:o,toEl:a,newIndex:l,oldIndex:c})},onEnd:({from:s,item:o,to:a,newDraggableIndex:l,oldDraggableIndex:c})=>{XJ.active=!1,s_t(),t.onDragEnd({fromEl:s,dragEl:o,toEl:a,newIndex:l,oldIndex:c})},onSort:({from:s,item:o,to:a,newDraggableIndex:l,oldDraggableIndex:c})=>{t.onDragSort({fromEl:s,dragEl:o,toEl:a,newIndex:l,oldIndex:c})}})}function OMe(t){var e;PMe(t)||(pj.delete(t),(e=t.sortable)==null||e.destroy(),t.sortable=null)}const XJ={active:!1};function PMe(t){return t.dragEnabled&&XJ.active}function n_t(){Array.from(pj).forEach(t=>t.onGlobalDragStart())}function s_t(){Array.from(pj).forEach(t=>t.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Eg={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text"},iG={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},o_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,a_t=`${h5}, ${iy}`,sU=class sU extends Yt{constructor(){super(),this.dragSelector=iy,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=sn("mutation",()=>{this.willPerformFilter=!0,this.updateListItems()}),this.updateListItems=nC(()=>{this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:r,dragEnabled:n,el:s,filterEl:o,moveToItems:a,displayMode:l,scale:c}=this,h=Array.from(this.el.querySelectorAll(iy));if(h.forEach(m=>{m.scale=c,m.selectionAppearance=e,m.selectionMode=i,m.interactionMode=r,m.closest(Bk)===s&&(m.moveToItems=a.filter(y=>y.element!==s&&!m.contains(y.element)),m.dragHandle=n,m.displayMode=l)}),this.parentListEl){this.setUpSorting();return}this.listItems=h,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(m=>!m.closed&&!m.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(m=>!m.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()},vE.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=Mn({blocking:!0}),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.moveToItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.calciteInternalListDefaultSlotChange=Ne({cancelable:!1}),this.calciteListChange=Ne({cancelable:!1}),this.calciteListDragEnd=Ne({cancelable:!1}),this.calciteListDragStart=Ne({cancelable:!1}),this.calciteListFilter=Ne({cancelable:!1}),this.calciteListMoveHalt=Ne({cancelable:!1}),this.calciteListOrderChange=Ne({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}putFailed(e){this.calciteListMoveHalt.emit(e)}async setFocus(){var e,i;return await pr(this),this.filterEnabled?(e=this.filterEl)==null?void 0:e.setFocus():(i=this.focusableItems.find(r=>r.active))==null?void 0:i.setFocus()}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItems(),this.setUpSorting(),this.setParentList(),this.setListItemGroups()}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Gr(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),OMe(this)}handleListItemChange(){this.willPerformFilter=!0,this.updateListItems()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,n=i.findIndex(s=>s.active)-1;i[n]&&this.focusRow(i[n])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r}=this;r.forEach(n=>{n.active=n===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r,selectionMode:n}=this;i.selected&&(n==="single"||n==="single-persist")&&r.forEach(s=>s.selected=s===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:r}=e,{focusableItems:n,lastSelectedInfo:s}=this,o=i;if(r.selectMultiple&&s){const a=n.indexOf(o),l=n.indexOf(s.selectedItem),c=Math.min(l,a),h=Math.max(l,a);n.slice(c,h+1).forEach(m=>m.selected=s.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItems())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){var e;(e=this.mutationObserver)==null||e.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&Mwt(i),r_t(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItems(),this.calciteListOrderChange.emit(e)}setParentList(){var e;this.parentListEl=(e=this.el.parentElement)==null?void 0:e.closest(Bk)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(h5))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=Ut(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=Ut(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=Ut(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:r}){const n=!r.has(e)&&!i.includes(e);e.filterHidden=n;const s=e.parentElement.closest(a_t);s&&(n||r.add(s),this.filterElements({el:s,filteredItems:i,visibleParents:r}))}allParentListItemsExpanded(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(iy);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:r,filterPredicate:n}=this,s=e==null?void 0:e.filter(l=>e.every(c=>c===l||!l.contains(c))),o=n?e.filter(n):r?i.map(l=>l.el):e||[],a=new WeakSet;s.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:a})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItems())}async filterAndUpdateData(){var e;await((e=this.filterEl)==null?void 0:e.filter(this.filterText)),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:r}=this;e&&(e.value=i,e.filterProps=r,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(r=>r.contains(e)).map(r=>r.heading)}updateGroupItems(){const{el:e,group:i,scale:r}=this,n=MU(e),s=i?Array.from(n.querySelectorAll(`${Bk}[group="${i}"]`)).filter(a=>!a.disabled&&a.dragEnabled):[];this.moveToItems=s.map(a=>({element:a,label:a.label??a.id,id:Ml()})),Array.from(this.el.querySelectorAll(h5)).forEach(a=>{a.scale=r})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(r=>r.active=r===e),e.setFocus())}isNavigable(e){var r;const i=(r=e.parentElement)==null?void 0:r.closest(iy);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){var s;if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,r=this.focusableItems.filter(o=>this.isNavigable(o)),n=r.findIndex(o=>o.active);if(i==="ArrowDown"){e.preventDefault();const o=e.target===this.filterEl?0:n+1;r[o]&&this.focusRow(r[o])}else if(i==="ArrowUp"){if(e.preventDefault(),n===0&&this.filterEnabled){(s=this.filterEl)==null||s.setFocus();return}const o=n-1;r[o]&&this.focusRow(r[o])}else if(i==="Home"){e.preventDefault();const o=r[0];o&&this.focusRow(o)}else if(i==="End"){e.preventDefault();const o=r[r.length-1];o&&this.focusRow(o)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}handleMove(e){var c,h;const{moveTo:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement,s=i.element,a=Array.from(n.children).filter(Fpe).indexOf(r),l=0;if(n){if(((c=n.canPull)==null?void 0:c.call(n,{toEl:s,fromEl:n,dragEl:r,newIndex:l,oldIndex:a}))===!1){this.calciteListMoveHalt.emit({toEl:s,fromEl:n,dragEl:r,oldIndex:a,newIndex:l});return}if(((h=s.canPut)==null?void 0:h.call(s,{toEl:s,fromEl:n,dragEl:r,newIndex:l,oldIndex:a}))===!1){s.putFailed({toEl:s,fromEl:n,dragEl:r,oldIndex:a,newIndex:l});return}r.sortHandleOpen=!1,this.disconnectObserver(),s.prepend(r),gMe(r),this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:n,toEl:s,newIndex:l,oldIndex:a})}}handleReorder(e){const{reorder:i}=e.detail,r=e.target,n=r==null?void 0:r.parentElement;if(!n)return;r.sortHandleOpen=!1;const s=Array.from(n.children).filter(Fpe),o=s.length-1,a=s.indexOf(r);let l=a;switch(i){case"top":l=0;break;case"bottom":l=o;break;case"up":l=a===0?0:a-1;break;case"down":l=a===o?o:a+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?s[l]:s[l].nextSibling;n.insertBefore(r,c),this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:n,toEl:n,newIndex:l,oldIndex:a})}render(){const{loading:e,label:i,disabled:r,dataForFilter:n,filterEnabled:s,filterPlaceholder:o,filterText:a,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:m}=this;return Hr({disabled:this.disabled,children:q`<div class=${ne(Eg.container)}>${this.dragEnabled?q`<span aria-live=assertive class=${ne(Eg.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?q`<calcite-scrim class=${ne(Eg.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${ne(Eg.table)} @keydown=${this.handleListKeydown} role=treegrid>${s||c||h?q`<div class=${ne(Eg.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${ne(Eg.stack)}><slot name=${iG.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${L$.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${r} .filterProps=${m} .items=${n} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${a} ${yt(this.setFilterEl)}></calcite-filter><slot name=${iG.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${L$.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${ne(Eg.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${yt(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${iG.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:r,messages:{_lang:n},numberingSystem:s}=this;return wr.numberFormatOptions={locale:n,numberingSystem:s},r?null:q`<div aria-live=polite class=${ne(Eg.assistiveText)}>${this.hasActiveFilter?nt("aria-filter-enabled",q`<div>${e.filterEnabled}</div>`):null}${nt("aria-item-count",q`<div>${e.total.replace("{count}",wr.localize(i.length.toString()))}</div>`)}${i.length?nt("aria-item-list",q`<ol>${i.map(o=>q`<li>${o.label}</li>`)}</ol>`):null}</div>`}};sU.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],moveToItems:[16,{},{state:!0}],hasActiveFilter:[16,{},{state:!0}],showNoResultsContainer:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},sU.styles=o_t;let v5=sU;Xt("calcite-list",v5);const LMe=Object.freeze(Object.defineProperty({__proto__:null,List:v5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Vo={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},l_t={image:"image"},T3={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},c_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]) .close,:host([appearance=outline-fill]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand))}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]){--calcite-internal-chip-background-color: transparent}:host([appearance=outline-fill]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]){--calcite-internal-chip-border-color: transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=inverse]) .close:hover{background-color:var(--calcite-color-inverse-hover)}:host([appearance=solid]):host([kind=inverse]) .close:active{background-color:var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([kind=neutral]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([selected]) .select-icon{opacity:1}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-border-3)}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-inverse-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-brand-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline-fill]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press)}:host([scale=s]) .container{--calcite-internal-chip-block-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--2);--calcite-internal-chip-icon-size: var(--calcite-size-xs, 1rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-image-size: var(--calcite-spacing-xl, 1.25rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-close-size: var(--calcite-size-xs, 1rem) }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container{--calcite-internal-chip-block-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--1);--calcite-internal-chip-icon-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-image-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-close-size: var(--calcite-size-sm, 1.5rem) }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end: .125rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container{--calcite-internal-chip-block-size: 2.75rem ;--calcite-internal-chip-container-space-x-end: .5rem ;--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-font-size: var(--calcite-font-size-0);--calcite-internal-chip-icon-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-icon-space: .5rem ;--calcite-internal-chip-image-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-title-space: .5rem ;--calcite-internal-close-size: var(--calcite-size-md, 2rem) }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: .5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: .5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-internal-chip-background-color);border-color:var(--calcite-internal-chip-border-color);border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:var(--calcite-opacity-full, 1)}.container.selectable{cursor:pointer}.container.selectable:hover{background-color:var(--calcite-internal-chip-selectable-hover-background-color);border-color:var(--calcite-internal-chip-selectable-hover-border-color)}.container.selectable:active{background-color:var(--calcite-internal-chip-selectable-active-background-color);border-color:var(--calcite-internal-chip-selectable-active-border-color)}.container:not(.non-interactive):focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:var(--calcite-spacing-none, 0)}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));padding-inline-start:var(--calcite-spacing-none, 0);padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, var(--calcite-spacing-xs, .375rem))}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity .15s ease-in-out,inline-size .15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:var(--calcite-opacity-half, .5);color:var(--calcite-chip-select-icon-color-press, var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor)))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem))}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0;cursor:pointer;align-items:center;border-radius:50%;border-style:none;outline-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, currentColor));block-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,oU=class oU extends Yt{constructor(){super(),this.closeButtonEl=Tn(),this.containerEl=Tn(),this.messages=Mn(),this.hasImage=!1,this.hasText=!1,this.appearance="solid",this.closable=!1,this.closed=!1,this.closeOnDelete=!1,this.disabled=!1,this.iconFlipRtl=!1,this.interactive=!1,this.kind="neutral",this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteChipClose=Ne({cancelable:!1}),this.calciteChipSelect=Ne({cancelable:!1}),this.calciteInternalChipKeyEvent=Ne({cancelable:!1}),this.calciteInternalChipSelect=Ne({cancelable:!1}),this.calciteInternalSyncSelectedChips=Ne({cancelable:!1}),this.listen("keydown",this.keyDownHandler),this.listen("click",this.clickHandler)}async setFocus(){var e,i;await pr(this),!this.disabled&&this.interactive?(e=this.containerEl.value)==null||e.focus():!this.disabled&&this.closable&&((i=this.closeButtonEl.value)==null||i.focus())}async load(){this.updateHasText()}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected)}updated(){Gr(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"Backspace":case"Delete":this.closable&&!this.closed&&this.closeOnDelete&&(e.preventDefault(),this.close());break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&this.closeButtonEl.value.focus()}handleDefaultSlotChange(){this.updateHasText()}close(){this.calciteChipClose.emit(),this.selected=!1,this.closed=!0}closeButtonKeyDownHandler(e){oC(e.key)&&(e.preventDefault(),this.close())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSlotImageChange(e){this.hasImage=Ut(e)}handleEmittingEvent(){this.interactive&&this.calciteChipSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return q`<div class=${ne(Vo.imageContainer)}><slot name=${l_t.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?T3.checkedMultiple:T3.uncheckedMultiple:this.selected?T3.checkedSingle:void 0;return q`<div class=${ne({[Vo.selectIcon]:!0,[Vo.selectIconActive]:this.selectionMode==="multiple"||this.selected})}>${e?q`<calcite-icon .icon=${e} .scale=${Fi(this.scale)}></calcite-icon>`:null}</div>`}renderCloseButton(){return q`<button .ariaLabel=${this.messages.dismissLabel} class=${ne(Vo.close)} @click=${this.close} @keydown=${this.closeButtonKeyDownHandler} .tabIndex=${this.disabled?-1:0} ${yt(this.closeButtonEl)}><calcite-icon .icon=${T3.close} .scale=${Fi(this.scale)}></calcite-icon></button>`}renderIcon(){return q`<calcite-icon class=${ne(Vo.chipIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} .scale=${Fi(this.scale)}></calcite-icon>`}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,r=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"img";return Hr({disabled:e,children:q`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${this.label} class=${ne({[Vo.container]:!0,[Vo.textSlotted]:this.hasText,[Vo.imageSlotted]:this.hasImage,[Vo.selectable]:this.selectionMode!=="none",[Vo.multiple]:this.selectionMode==="multiple",[Vo.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Vo.selected]:this.selected,[Vo.closable]:this.closable,[Vo.nonInteractive]:!this.interactive,[Vo.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)})} @click=${this.handleEmittingEvent} .role=${r} .tabIndex=${i?-1:0} ${yt(this.containerEl)}>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}${this.renderChipImage()}${this.icon&&this.renderIcon()||""}<span class=${ne(Vo.title)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></span>${this.closable&&this.renderCloseButton()||""}</div>`})}};oU.properties={hasImage:[16,{},{state:!0}],hasText:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],closeOnDelete:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],parentChipGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},oU.styles=c_t;let b5=oU;Xt("calcite-chip",b5);const KNt=Object.freeze(Object.defineProperty({__proto__:null,Chip:b5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Ai={actionsEnd:"actions-end",actionsStart:"actions-start",description:"description",close:"close",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",content:"content",contentBottom:"content-bottom",contentContainer:"content-container",contentContainerHasCenterContent:"content-container--has-center-content",contentContainerSelectable:"content-container--selectable",contentContainerUnavailable:"content-container--unavailable",contentContainerWrapper:"content-container-wrapper",contentContainerWrapperBordered:"content-container-wrapper--bordered",contentEnd:"content-end",contentStart:"content-start",customContent:"custom-content",expandedContainer:"expanded-container",dragContainer:"drag-container",gridCell:"grid-cell",icon:"icon",nestedContainer:"nested-container",nestedContainerExpanded:"nested-container--expanded",label:"label",row:"row",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",wrapper:"wrapper",wrapperBordered:"wrapper--bordered"},rS={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},u_t=0,qf={selectedMultiple:"check-square-f",selectedSingle:"circle-inset-large",unselectedMultiple:"square",unselectedSingle:"circle",collapsedLTR:"chevron-right",collapsedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},Zpe="data-test-active";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const d_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]),:host([closed]){display:none}.wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{box-sizing:border-box;display:flex;flex:1 1 0%;overflow:hidden;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container *{box-sizing:border-box}.container--hover:hover{cursor:pointer;background-color:var(--calcite-list-background-color-hover, var(--calcite-color-foreground-2))}.container:active{background-color:var(--calcite-list-background-color-press, var(--calcite-color-foreground-3))}.container--border{position:relative}.container--border:before{position:absolute;inline-size:var(--calcite-border-width-lg);inset-block:0;inset-inline-start:0;background-color:transparent;content:""}.container--border-selected:before{background-color:var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.container--border-selected:focus{box-shadow:inset var(--calcite-border-width-lg) 0 0 0 var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.nested-container{display:none;flex-direction:column;border-width:0px;border-style:solid;border-color:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3));margin-inline-start:var(--calcite-list-spacing-indent, 1.5rem)}.nested-container--expanded{display:flex}.selection-container{display:flex;padding-block:0px;color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host(:not([disabled]):not([selected])) .container:hover .selection-container--single{color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host([selected]:hover) .selection-container,:host([selected]:hover) .selection-container--single,:host([selected]) .selection-container{color:var(--calcite-list-icon-color, var(--calcite-color-brand))}.content-container-wrapper{display:flex;flex:1 1 auto}.content-container-wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-list-content-text-color, var(--calcite-color-text-2))}.content-container--unavailable{opacity:var(--calcite-opacity-disabled)}.row,.grid-cell{outline-color:transparent}.row{position:relative}.row:focus,.grid-cell:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;line-height:var(--calcite-font-line-height-relative-snug)}.label{color:var(--calcite-list-label-text-color, var(--calcite-color-text-1))}.description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-3))}.icon{align-self:center;color:var(--calcite-list-icon-color, var(--calcite-color-text-3))}.icon:hover,.icon:active{color:var(--calcite-color-text-1)}:host([display-mode=flat][drag-handle]:is([selection-mode=none],[selection-appearance=border])) .drag-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:32px;padding-block:var(--calcite-spacing-xxs);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content,:host([scale=s]) .custom-content,:host([scale=s]) .label{font-size:var(--calcite-font-size--2)}:host([scale=s]) .description{font-size:var(--calcite-font-size--3)}:host([scale=s][display-mode=flat]:not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat]:not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=m]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:40px;padding-block:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .content,:host([scale=m]) .custom-content{font-size:var(--calcite-font-size--2)}:host([scale=m]) .label{font-size:var(--calcite-font-size--1)}:host([scale=m]) .description{font-size:var(--calcite-font-size--2)}:host([scale=m][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=m][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=l]) .actions-start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .content-container{gap:var(--calcite-spacing-md);min-block-size:56px;padding-block:.625rem;padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .content,:host([scale=l]) .custom-content,:host([scale=l]) .label{font-size:var(--calcite-font-size-0)}:host([scale=l]) .description{font-size:var(--calcite-font-size--1)}:host([scale=l]) .nested-container{margin-inline-start:1.75rem}:host([scale=l][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-lg)}:host([scale=l][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=flat][drag-handle]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=l][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-lg)}.label,.description,.content-bottom{font-family:var(--calcite-font-family);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}:host([selected]) .label{font-weight:var(--calcite-font-weight-medium)}:host([selected]) .icon{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}:host([selected]) .description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-2))}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){align-self:center}.content-bottom{display:flex;flex-direction:column}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.expanded-container{color:var(--calcite-list-icon-color, var(--calcite-color-text-3));padding-inline:var(--calcite-spacing-xxs)}:host(:not([disabled])) .expanded-container:hover{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.expanded-container{display:flex;align-items:center}.actions-start calcite-action,.actions-start calcite-sort-handle,.actions-end calcite-action,.actions-end calcite-sort-handle,.content-start calcite-action,.content-start calcite-sort-handle,.content-end calcite-action,.content-end calcite-sort-handle,.selection-container calcite-action,.selection-container calcite-sort-handle,.drag-container calcite-action,.drag-container calcite-sort-handle,.expanded-container calcite-action,.expanded-container calcite-sort-handle{align-self:stretch}.drag-container,.selection-container,.expanded-container{padding-block-end:var(--calcite-spacing-px)}.expanded-container,.selection-container{cursor:pointer}.actions-start,.actions-end{position:relative;padding:0}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-sort-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-sort-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}.row:focus .actions-start,.row:focus .actions-end{inset-block:.125rem}.row:focus .actions-start .close,.row:focus .actions-start ::slotted(calcite-action),.row:focus .actions-start ::slotted(calcite-action-menu),.row:focus .actions-start ::slotted(calcite-sort-handle),.row:focus .actions-start ::slotted(calcite-dropdown),.row:focus .actions-end .close,.row:focus .actions-end ::slotted(calcite-action),.row:focus .actions-end ::slotted(calcite-action-menu),.row:focus .actions-end ::slotted(calcite-sort-handle),.row:focus .actions-end ::slotted(calcite-dropdown){block-size:calc(100% - .25rem)}.row:focus:after,.row:focus:before{position:absolute;content:"";inline-size:.125rem;z-index:var(--calcite-z-index-header);background-color:var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));inset-block:0}.row:focus:before{inset-inline-start:0}.row:focus:after{inset-inline-end:0}.container--border:focus:before{display:none}::slotted(calcite-list:empty){border-block-start-width:0px}:host([hidden]){display:none}[hidden]{display:none}`,rG=new Map,aU=class aU extends Yt{constructor(){super(),this.actionsEndEl=Tn(),this.actionsStartEl=Tn(),this.containerEl=Tn(),this.contentEl=Tn(),this.defaultSlotEl=Tn(),this.handleGridEl=Tn(),this.messages=Mn(),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasCustomContent=!1,this.level=null,this.expandable=!1,this.active=!1,this.bordered=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.filterHidden=!1,this.interactionMode=null,this.displayMode="flat",this.moveToItems=[],this.scale="m",this.selected=!1,this.selectionAppearance=null,this.selectionMode=null,this.sortHandleOpen=!1,this.unavailable=!1,this.calciteInternalFocusPreviousItem=Ne({cancelable:!1}),this.calciteInternalListItemActive=Ne({cancelable:!1}),this.calciteInternalListItemChange=Ne({cancelable:!1}),this.calciteInternalListItemSelect=Ne({cancelable:!1}),this.calciteInternalListItemSelectMultiple=Ne({cancelable:!1}),this.calciteInternalListItemToggle=Ne({cancelable:!1}),this.calciteListItemClose=Ne({cancelable:!1}),this.calciteListItemSelect=Ne({cancelable:!1}),this.calciteListItemSortHandleBeforeClose=Ne({cancelable:!1}),this.calciteListItemSortHandleBeforeOpen=Ne({cancelable:!1}),this.calciteListItemSortHandleClose=Ne({cancelable:!1}),this.calciteListItemSortHandleOpen=Ne({cancelable:!1}),this.calciteListItemToggle=Ne({cancelable:!1}),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges),this.listen("calciteInternalListDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges)}get open(){return this.expanded}set open(e){dA.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(){await pr(this);const{containerEl:{value:e},parentListEl:i}=this,r=rG.get(i);if(typeof r=="number"){const n=this.getGridCells();n[r]?this.focusCell(n[r]):e==null||e.focus();return}e==null||e.focus()}connectedCallback(){super.connectedCallback();const{el:e}=this;this.parentListEl=e.closest(Bk),this.level=kwt(e)+1,this.setSelectionDefaults()}willUpdate(e){e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.activeHandler(this.active),e.has("closed")&&(this.hasUpdated||this.closed!==!1)&&this.handleClosedChange(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(),e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.handleExpandedChange(),e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.handleSelectedChange(),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("displayMode")&&this.hasUpdated&&this.handleExpandableChange(this.defaultSlotEl.value)}updated(){Gr(this)}activeHandler(e){e||this.focusCell(null,!1)}handleClosedChange(){this.emitCalciteInternalListItemChange()}handleDisabledChange(){this.emitCalciteInternalListItemChange()}handleExpandedChange(){this.emitCalciteInternalListItemToggle()}handleSelectedChange(){this.calciteInternalListItemSelect.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}handleCalciteInternalListDefaultSlotChanges(e){e.stopPropagation(),this.handleExpandableChange(this.defaultSlotEl.value)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteListItemSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteListItemSortHandleOpen.emit()}emitInternalListItemActive(){this.calciteInternalListItemActive.emit()}emitCalciteInternalListItemToggle(){this.calciteInternalListItemToggle.emit()}emitCalciteInternalListItemChange(){this.calciteInternalListItemChange.emit()}handleCloseClick(){this.closed=!0,this.calciteListItemClose.emit()}handleContentSlotChange(e){this.hasCustomContent=Ut(e)}handleActionsStartSlotChange(e){this.hasActionsStart=Ut(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=Ut(e)}handleContentStartSlotChange(e){this.hasContentStart=Ut(e)}handleContentEndSlotChange(e){this.hasContentEnd=Ut(e)}handleContentBottomSlotChange(e){this.hasContentBottom=Ut(e)}setSelectionDefaults(){const{parentListEl:e,selectionMode:i,selectionAppearance:r}=this;e&&(i||(this.selectionMode=e.selectionMode),r||(this.selectionAppearance=e.selectionAppearance))}handleExpandableChange(e){if(!e)return;const i=Iwt(e);i.lists.forEach(r=>{r.displayMode=this.displayMode}),this.expandable=this.displayMode==="nested"&&(i.lists.length>0||i.items.length>0)}handleDefaultSlotChange(e){this.handleExpandableChange(e.target)}handleToggleClick(){this.toggle()}toggle(e=!this.expanded){this.expanded=e,this.calciteListItemToggle.emit()}handleItemClick(e){e.defaultPrevented||this.toggleSelected(e.shiftKey)}async toggleSelected(e){const{selectionMode:i,selected:r}=this;this.disabled||(i==="multiple"||i==="single"?this.selected=!r:i==="single-persist"&&(this.selected=!0),this.calciteInternalListItemSelectMultiple.emit({selectMultiple:e&&i==="multiple"}),await this.updateComplete,this.calciteListItemSelect.emit())}getGridCells(){return[this.handleGridEl.value,this.actionsStartEl.value,this.contentEl.value,this.actionsEndEl.value].filter(e=>e&&!e.hidden)}handleItemKeyDown(e){if(e.defaultPrevented)return;const{key:i}=e,r=e.composedPath(),{containerEl:{value:n},actionsStartEl:{value:s},actionsEndEl:{value:o},expanded:a,expandable:l}=this,c=this.getGridCells(),h=c.findIndex(m=>r.includes(m));if(i==="Enter"&&!r.includes(s)&&!r.includes(o))e.preventDefault(),this.toggleSelected(e.shiftKey);else if(i==="ArrowRight"){e.preventDefault();const m=h+1;h===-1?!a&&l?(this.toggle(!0),this.focusCell(null)):c[0]&&this.focusCell(c[0]):c[h]&&c[m]&&this.focusCell(c[m])}else if(i==="ArrowLeft"){e.preventDefault();const m=h-1;h===-1?(this.focusCell(null),a&&l?this.toggle(!1):this.calciteInternalFocusPreviousItem.emit()):h===0?(this.focusCell(null),n.focus()):c[h]&&c[m]&&this.focusCell(c[m])}}focusCellNull(){this.focusCell(null)}setFocusCell(e,i,r){const{parentListEl:n}=this;r&&rG.set(n,null);const s=this.getGridCells();s.forEach(o=>{o.removeAttribute("tabindex"),o.removeAttribute(Zpe)}),e&&(e===i?e.tabIndex=0:e.removeAttribute("tabindex"),e.setAttribute(Zpe,""),r&&rG.set(n,s.indexOf(e)))}focusCell(e,i=!0){const r=Qme(e);this.setFocusCell(e,r,i),r==null||r.focus()}renderSelected(){const{selected:e,selectionMode:i,selectionAppearance:r}=this;return i==="none"||r==="border"?null:nt("selection-container",q`<div class=${ne({[Ai.selectionContainer]:!0,[Ai.selectionContainerSingle]:i==="single"||i==="single-persist"})} @click=${this.handleItemClick}><calcite-icon .icon=${e?i==="multiple"?qf.selectedMultiple:qf.selectedSingle:i==="multiple"?qf.unselectedMultiple:qf.unselectedSingle} .scale=${Fi(this.scale)}></calcite-icon></div>`)}renderDragHandle(){const{label:e,dragHandle:i,dragDisabled:r,setPosition:n,setSize:s,moveToItems:o}=this;return i?nt("drag-handle-container",q`<div .ariaLabel=${e} class=${ne({[Ai.dragContainer]:!0,[Ai.gridCell]:!0})} role=gridcell ${yt(this.handleGridEl)}><calcite-sort-handle .disabled=${r} .label=${e} .moveToItems=${o} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${n} .setSize=${s} ${yt(this.setSortHandleEl)}></calcite-sort-handle></div>`):null}renderExpanded(){const{el:e,expanded:i,expandable:r,messages:n,displayMode:s,scale:o}=this;if(s!=="nested")return null;const a=ca(e),l=r?i?qf.open:a==="rtl"?qf.collapsedRTL:qf.collapsedLTR:qf.blank,c=Fi(o),h=r?i?n.collapse:n.expand:void 0,m=r?this.handleToggleClick:void 0;return nt("expanded-container",q`<div class=${ne(Ai.expandedContainer)} @click=${m} title=${h??Ge}>${nt(l,q`<calcite-icon .icon=${l} .scale=${c}></calcite-icon>`)}</div>`)}renderActionsStart(){const{label:e,hasActionsStart:i}=this;return nt("actions-start-container",q`<div .ariaLabel=${e} class=${ne({[Ai.actionsStart]:!0,[Ai.gridCell]:!0})} .hidden=${!i} role=gridcell ${yt(this.actionsStartEl)}><slot name=${rS.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{label:e,hasActionsEnd:i,closable:r,messages:n}=this;return nt("actions-end-container",q`<div .ariaLabel=${e} class=${ne({[Ai.actionsEnd]:!0,[Ai.gridCell]:!0})} .hidden=${!(i||r)} role=gridcell ${yt(this.actionsEndEl)}><slot name=${rS.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot>${r?nt("close-action",q`<calcite-action appearance=transparent class=${ne(Ai.close)} .icon=${qf.close} .label=${n.close} @click=${this.handleCloseClick} .scale=${this.scale} .text=${n.close}></calcite-action>`):null}</div>`)}renderContentStart(){const{hasContentStart:e}=this;return q`<div class=${ne(Ai.contentStart)} .hidden=${!e}><slot name=${rS.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderCustomContent(){const{hasCustomContent:e}=this;return q`<div class=${ne(Ai.customContent)} .hidden=${!e}><slot name=${rS.content} @slotchange=${this.handleContentSlotChange}></slot></div>`}renderIconStart(){const{iconStart:e,iconFlipRtl:i,scale:r}=this;return e?nt("icon-start",q`<calcite-icon class=${ne(Ai.icon)} .flipRtl=${i==="both"||i==="start"} .icon=${e} .scale=${Fi(r)}></calcite-icon>`):null}renderIconEnd(){const{iconEnd:e,iconFlipRtl:i,scale:r}=this;return e?nt("icon-end",q`<calcite-icon class=${ne(Ai.icon)} .flipRtl=${i==="both"||i==="end"} .icon=${e} .scale=${Fi(r)}></calcite-icon>`):null}renderContentEnd(){const{hasContentEnd:e}=this;return q`<div class=${ne(Ai.contentEnd)} .hidden=${!e}><slot name=${rS.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}renderContentBottom(){const{hasContentBottom:e}=this;return q`<div class=${ne(Ai.contentBottom)} .hidden=${!e}><slot name=${rS.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div>`}renderDefaultContainer(){return q`<div class=${ne({[Ai.nestedContainer]:!0,[Ai.nestedContainerExpanded]:this.expandable&&this.expanded})}><slot @slotchange=${this.handleDefaultSlotChange} ${yt(this.defaultSlotEl)}></slot></div>`}renderContentProperties(){const{label:e,description:i,hasCustomContent:r}=this;return!r&&(e||i)?nt("content",q`<div class=${ne(Ai.content)}>${e?nt("label",q`<div class=${ne(Ai.label)}>${e}</div>`):null}${i?nt("description",q`<div class=${ne(Ai.description)}>${i}</div>`):null}</div>`):null}renderContentContainer(){const{description:e,label:i,selectionMode:r,hasCustomContent:n,unavailable:s}=this,o=n||!!i||!!e,a=[this.renderContentStart(),this.renderCustomContent(),this.renderIconStart(),this.renderContentProperties(),this.renderIconEnd(),this.renderContentEnd()];return nt("content-container",q`<div .ariaLabel=${i} class=${ne({[Ai.gridCell]:!0,[Ai.contentContainer]:!0,[Ai.contentContainerUnavailable]:s,[Ai.contentContainerSelectable]:r!=="none",[Ai.contentContainerHasCenterContent]:o})} @click=${this.handleItemClick} role=gridcell ${yt(this.contentEl)}>${a}</div>`)}render(){const{expandable:e,expanded:i,level:r,active:n,label:s,selected:o,selectionAppearance:a,selectionMode:l,interactionMode:c,closed:h,filterHidden:m,bordered:y,disabled:v,hasContentBottom:w}=this,x=y&&w,S=y&&!w,C=l!=="none"&&a==="border",k=C&&o,A=C&&!o,R=c==="interactive"||c==="static"&&l!=="none"&&a==="border";return Hr({disabled:v,children:q`<div class=${ne({[Ai.wrapper]:!0,[Ai.wrapperBordered]:x})}><div .ariaExpanded=${e?i:null} .ariaLabel=${s} .ariaLevel=${r} .ariaSelected=${o} class=${ne({[Ai.row]:!0,[Ai.container]:!0,[Ai.containerHover]:R,[Ai.containerBorder]:C,[Ai.containerBorderSelected]:k,[Ai.containerBorderUnselected]:A})} .hidden=${h||m} @focus=${this.focusCellNull} @focusin=${this.emitInternalListItemActive} @keydown=${this.handleItemKeyDown} role=row .tabIndex=${n?0:-1} ${yt(this.containerEl)}>${this.renderDragHandle()}${this.renderSelected()}${this.renderExpanded()}<div class=${ne({[Ai.contentContainerWrapper]:!0,[Ai.contentContainerWrapperBordered]:S})}>${this.renderActionsStart()}${this.renderContentContainer()}${this.renderActionsEnd()}</div></div>${this.renderContentBottom()}</div>${this.renderDefaultContainer()}`})}};aU.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasCustomContent:[16,{},{state:!0}],level:[16,{},{state:!0}],expandable:[16,{},{state:!0}],parentListEl:[16,{},{state:!0}],active:[5,{},{type:Boolean}],bordered:[5,{},{type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],interactionMode:1,label:1,messageOverrides:[0,{},{attribute:!1}],metadata:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],unavailable:[7,{},{reflect:!0,type:Boolean}],value:1,iconStart:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}]},aU.styles=[d_t,Zye];let w5=aU;Xt("calcite-list-item",w5);const h_t=Object.freeze(Object.defineProperty({__proto__:null,ListItem:w5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const p_t=new Map([["a3-landscape","a3-landscape"],["a3-portrait","a3-portrait"],["a4-landscape","a4-landscape"],["a4-portrait","a4-portrait"],["letter-ansi-a-landscape","ansi-a-landscape"],["letter-ansi-a-portrait","ansi-a-portrait"],["tabloid-ansi-b-landscape","ansi-b-landscape"],["tabloid-ansi-b-portrait","ansi-b-portrait"]]),f_t=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/iu;function m_t(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function RMe(t){if(!t)return;const e=t.layoutTemplateInfo;if(!e)return;const[i,r]=e.pageSize;return`${fy(i)}  ${fy(r)} ${t.pageUnits}`}function DMe(t,e){var o;const{label:i,layout:r,layoutItem:n,type:s}=t;return s==="print-service-template"&&e[r]?e[r]:((o=i??r??(n==null?void 0:n.id))==null?void 0:o.replaceAll("_"," "))??e.untitled}function NMe(t){return p_t.get(t)}const y_t=new Map([["AIX","aix"],["EPS","eps"],["GIF","gif"],["JPG","jpg"],["PDF","pdf"],["PNG32","png32"],["PNG8","png8"],["SVG","svg"],["SVGZ","svgz"],["TIFF","tiff"]]),g_t="map-only";function bN(t){return(t==null?void 0:t.toLowerCase())===g_t}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */let v_t=class KJ{constructor(){this._groups=new Map}destroy(){this.removeAll()}add(e,i){if(Array.isArray(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Array.isArray(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof KJ)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof KJ?i.removeAll():i.remove()}},b_t=class extends wY{constructor(e){super(),this.destroyed=!1,e==="disconnect"?this.onDisconnected(()=>this.removeAllHandles()):this.onDestroy(()=>this.destroy())}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}this._handles??(this._handles=new v_t),this._handles.add(e,i)}removeHandles(e){var i;(i=this._handles)==null||i.remove(e)}removeAllHandles(){var e;(e=this._handles)==null||e.removeAll()}destroy(){this.destroyed=!0,this.removeAllHandles()}hasHandles(e){var i;return((i=this._handles)==null?void 0:i.has(e))??!1}};const wP=$ht(b_t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const w_t=dt`.arcgis-print__template-select-flow-item-container{display:flex;flex-direction:column;justify-content:space-between;overflow-y:hidden;flex-grow:1}.arcgis-print__template-select-flow-item-container .arcgis-print__template-select-flow-item-content{display:flex;flex-direction:column;overflow-y:auto;flex:1 0}.arcgis-print__template-select-flow-item-container .arcgis-print__template-select-flow-item-content .arcgis-print__template-select-flow-item-list-heading{display:flex;gap:var(--calcite-spacing-xs);align-items:center;padding:var(--calcite-spacing-md) var(--calcite-spacing-lg);background-color:var(--calcite-color-foreground-2);border-bottom:1px solid var(--calcite-color-border-3);font-weight:var(--calcite-font-weight-semibold)}.arcgis-print__template-button-container{padding:var(--calcite-spacing-md)}.arcgis-print__template-done-button{width:100%}`,Cg="arcgis-print",Zu={templateSelectError:`${Cg}__template-select-error`,templateButtonContainer:`${Cg}__template-button-container`,templateDoneButton:`${Cg}__template-done-button`,templateSelectFlowItemContainer:`${Cg}__template-select-flow-item-container`,templateSelectFlowItemContent:`${Cg}__template-select-flow-item-content`,templateSelectFlowItemListHeading:`${Cg}__template-select-flow-item-list-heading`,browseTemplateButtonContainer:`${Cg}__browse-template-button-container`,browseTemplateButtonContainerFilter:`${Cg}__browse-template-button-container-filter`};var A_;let __t=(A_=class extends qi{constructor(){super(...arguments),this._handles=wP("disconnect")}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.templateOptions.id,e=>{this._handles.removeHandles("template-handle"),this._selectedTemplate=e?this.viewModel.getLayoutTemplateById(e)??void 0:void 0,this._handles.addHandles(Le(()=>{var i;return(i=this._selectedTemplate)==null?void 0:i.state},()=>this.requestUpdate(),{initial:!0}),"template-handle")},{initial:!0})])}_getPortalTemplates(){const{portalTemplateIds:e}=this.viewModel;return this.viewModel.includeDefaultTemplates&&!this.excludeOrganizationTemplates?this.viewModel.defaultTemplates.toArray().filter(({layout:i,layoutItem:r})=>!bN(i)&&!!(r!=null&&r.id)&&e.includes(r.id)):[]}_getDefaultTemplates(){const{portalTemplateIds:e}=this.viewModel;return this.viewModel.includeDefaultTemplates?this.viewModel.defaultTemplates.toArray().filter(({layout:i,layoutItem:r})=>!bN(i)&&(!(r!=null&&r.id)||!e.includes(r.id))):[]}_getPrintServiceTemplates(){return!this.viewModel.includeDefaultTemplates||!this._getDefaultTemplates().length?this.viewModel.printServiceTemplates.toArray().filter(({layout:e})=>!bN(e)):[]}render(){var c;const{messages:e}=this,i=f_t.test((c=this.viewModel.portal)==null?void 0:c.url),r=this.viewModel.browseTemplates.toArray(),n=this._getPortalTemplates(),s=this._getDefaultTemplates(),o=this._getPrintServiceTemplates(),a=r.length+n.length+s.length+o.length>15,l=this.browseTemplateButtonOnClick?q`<calcite-button appearance=outline class=${mt(a?Zu.browseTemplateButtonContainerFilter:Zu.browseTemplateButtonContainer)} icon-start=folder @click=${this.browseTemplateButtonOnClick} .slot=${a?"filter-actions-end":"default"}>${a?null:e.browseTemplates}</calcite-button>`:null;return q`<div class=${mt(Zu.templateSelectFlowItemContainer)}><div class=${mt(Zu.templateSelectFlowItemContent)}>${a?null:l}${nt("template-list",q`<calcite-list .filterEnabled=${a} .filterProps=${["label"]} .label=${e.templateList} selection-mode=single-persist @calciteListChange=${({currentTarget:h})=>{var m;return this.viewModel.applyTemplate((m=h.selectedItems[0])==null?void 0:m.value)}}>${a?l:null}${r.length?q`<div><div class=${mt(Zu.templateSelectFlowItemListHeading)}>${e.myTemplates}${i?q`<calcite-chip appearance=outline kind=neutral .label=${e.beta} scale=s>${e.beta}</calcite-chip>`:null}</div>${this._renderLayoutTemplates(r,!0,!0)}</div>`:null}${n.length?q`<div><div class=${mt(Zu.templateSelectFlowItemListHeading)}>${e.organizationTemplates}${i?q`<calcite-chip appearance=outline kind=neutral .label=${e.beta} scale=s>${e.beta}</calcite-chip>`:null}</div>${this._renderLayoutTemplates(n)}</div>`:null}${r.length||n.length?s.length?q`<div><div class=${mt(Zu.templateSelectFlowItemListHeading)}>${e.defaultTemplates}</div>${this._renderLayoutTemplates(s,!0)}</div>`:null:this._renderLayoutTemplates(s,!0)}${r.length||n.length?o.length?q`<div><div class=${mt(Zu.templateSelectFlowItemListHeading)}>${e.defaultTemplates}</div>${this._renderLayoutTemplates(o)}</div>`:null:this._renderLayoutTemplates(o)}</calcite-list>`)}</div><div class=${mt(Zu.templateButtonContainer)}><calcite-button class=${mt(Zu.templateDoneButton)} @click=${this.hideTemplateSelector}>Done</calcite-button></div></div>`}_renderLayoutTemplates(e,i=!1,r=!1){return i&&e.sort((n,s)=>(n.label??"")>(s.label??"")?1:-1),e.map(n=>q`<calcite-list-item .description=${RMe(n)} .label=${DMe(n,this.messages)} .selected=${n.id===this.viewModel.templateOptions.id} title=${n.description??""??Ns} .value=${n}><calcite-icon .icon=${(n.layout?NMe(n.layout):null)||"custom-print"} slot=content-start></calcite-icon>${n.state==="loading"?q`<calcite-loader inline label=loading scale=s slot=content-end></calcite-loader>`:null}${(n==null?void 0:n.state)==="error"?nt(`template-error-${n.id}`,q`<calcite-icon class=${mt(Zu.templateSelectError)} icon=exclamation-mark-circle scale=s slot=content-end></calcite-icon>`):null}${r?q`<calcite-action icon=trash @click=${()=>this.viewModel.removePortalTemplate(n)} slot=actions-end text=delete></calcite-action>`:null}</calcite-list-item>`)}},A_.properties={_selectedTemplate:16,excludeOrganizationTemplates:5,browseTemplateButtonOnClick:0,viewModel:0,messages:0,hideTemplateSelector:0},A_.styles=w_t,A_);or("arcgis-print-template-selector",__t);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const x_t={section:"section"},S_t={titleGroup:"title-group"},$_t=dt`:host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1));background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) section{border-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));border-style:solid}section{display:flex;flex-grow:1;overflow:hidden;border-width:1px;border-block-start-style:solid;border-block-start-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1)),inset 0 -1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([position=bottom]){flex-direction:column-reverse}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px}:host([bordered][scale=s]) section{padding:.75rem}:host([bordered][scale=m]) section{padding:.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid;border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}`,lU=class lU extends Yt{constructor(){super(),this.tabs=[],this.titles=[],this.bordered=!1,this.layout="inline",this.position="top",this.scale="m",this.listen("calciteInternalTabNavSlotChange",this.calciteInternalTabNavSlotChangeHandler)}connectedCallback(){super.connectedCallback(),this.updateItems()}load(){this.updateItems()}willUpdate(e){var i,r;(e.has("position")&&(this.hasUpdated||this.position!=="top")||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.updateItems(),(e.has("titles")||e.has("tabs"))&&this.hasUpdated&&((i=this.titles)==null?void 0:i.length)>0&&((r=this.tabs)==null?void 0:r.length)>0&&(this.updateAriaSettings(),this.updateItems())}calciteInternalTabNavSlotChangeHandler(e){e.stopPropagation(),e.detail.length!==this.titles.length&&(this.titles=e.detail)}defaultSlotChangeHandler(e){this.tabs=Tp(e,"calcite-tab")}async updateAriaSettings(){await this.componentOnReady();let e,i;const r=tye(this.slotEl,"calcite-tab");if(r.some(n=>n.tab)||this.titles.some(n=>n.tab))e=r.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id),i=this.titles.sort((n,s)=>n.tab.localeCompare(s.tab)).map(n=>n.id);else{const n=await Promise.all(r.map(o=>o.getTabIndex())),s=await Promise.all(this.titles.map(o=>o.getTabIndex()));e=n.reduce((o,a,l)=>(o[a]=r[l].id,o),[]),i=s.reduce((o,a,l)=>(o[a]=this.titles[l].id,o),[])}r.forEach(n=>n._updateAriaInfo(e,i)),this.titles.forEach(n=>n._updateAriaInfo(e,i))}updateItems(){const{position:e,scale:i}=this,r=this.el.querySelector("calcite-tab-nav");r&&(r.position=e,r.scale=i),Array.from(this.el.querySelectorAll("calcite-tab")).forEach(n=>{n.parentElement===this.el&&(n.scale=i)}),Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach(n=>{n.position=e,n.scale=i})}setDefaultSlotRef(e){this.slotEl=e}render(){return q`<slot name=${S_t.titleGroup}></slot><section class=${ne(x_t.section)}><slot @slotchange=${this.defaultSlotChangeHandler} ${yt(this.setDefaultSlotRef)}></slot></section>`}};lU.properties={tabs:[16,{},{state:!0}],titles:[16,{},{state:!0}],bordered:[5,{},{type:Boolean}],layout:[3,{},{reflect:!0}],position:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},lU.styles=$_t;let QJ=lU;Xt("calcite-tabs",QJ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const T_t="24px",E_t="32px",C_t="44px",I_t="48px";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Ype={chevronRight:"chevron-right",chevronLeft:"chevron-left"},Ig={container:"container",containerHasEndTabTitleOverflow:"container--end-overflow",containerHasStartTabTitleOverflow:"container--start-overflow",scrollButton:"scroll-button",scrollButtonContainer:"scroll-button-container",scrollBackwardContainerButton:"scroll-button-container--backward",scrollForwardContainerButton:"scroll-button-container--forward",tabTitleSlotWrapper:"tab-titles-slot-wrapper"},M_t=dt`:host{--calcite-internal-tab-nav-gradient-start-side: left;--calcite-internal-tab-nav-gradient-end-side: right;position:relative;display:flex}:host([bordered]):not([selected]) .container{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) calcite-button{--calcite-button-border-color: var(--calcite-tab-border-color, var(--calcite-color-border-1))}.scale-s{--calcite-internal-tab-nav-button-width: 24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-button-width: 32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-button-width: 44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side: right;--calcite-internal-tab-nav-gradient-end-side: left}.container--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--start-overflow.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%),linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%)}.container::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap: var(--calcite-spacing-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xl)}.container,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-button-text-color: var(--calcite-tab-text-color, var(--calcite-color-text-3));--calcite-button-background-color: var(--calcite-color-transparent);--calcite-offset-invert-focus: 1;block-size:var(--calcite-container-size-content-fluid)}.scroll-button-container calcite-button:hover .scroll-button-container calcite-button:focus{--calcite-button-background-color: var(--calcite-color-transparent-hover)}.scroll-button-container calcite-button:active{--calcite-button-background-color: var(--calcite-color-transparent-press)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward:before,:host(:not([bordered])) .scroll-button-container--forward:before{background-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));opacity:.5;content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward:before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward:before{inset-inline-start:0}:host([hidden]){display:none}[hidden]{display:none}`,cU=class cU extends Yt{constructor(){super(),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=sn("resize",()=>{this.updateScrollingState()}),this.makeFirstVisibleTabClosable=!1,this.messages=Mn(),this.hasOverflowingEndTabTitle=!1,this.hasOverflowingStartTabTitle=!1,this.bordered=!1,this.layout="inline",this.position="bottom",this.scale="m",this.selectedTitle=null,this.calciteInternalTabChange=Ne({cancelable:!1}),this.calciteInternalTabNavSlotChange=Ne(),this.calciteTabChange=Ne({cancelable:!1}),this.listen("calciteInternalTabsFocusPrevious",this.focusPreviousTabHandler),this.listen("calciteInternalTabsFocusNext",this.focusNextTabHandler),this.listen("calciteInternalTabsFocusFirst",this.focusFirstTabHandler),this.listen("calciteInternalTabsFocusLast",this.focusLastTabHandler),this.listen("calciteInternalTabsActivate",this.internalActivateTabHandler),this.listen("calciteInternalTabsClose",this.internalCloseTabHandler),this.listen("calciteInternalTabTitleRegister",this.updateTabTitles),this.listenOn(document.body,"calciteInternalTabChange",this.globalInternalTabChangeHandler)}connectedCallback(){var e;super.connectedCallback(),this.parentTabsEl=this.el.closest("calcite-tabs"),(e=this.resizeObserver)==null||e.observe(this.el)}async load(){const e=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(e)){const i=JSON.parse(localStorage.getItem(e));this.selectedTabId=i}}willUpdate(e){e.has("selectedTitle")&&(this.hasUpdated||this.selectedTitle!==null)&&this.calciteInternalTabChange.emit({tab:this.selectedTabId}),e.has("selectedTabId")&&this.selectedTabIdChanged();const{parentTabsEl:i}=this;this.layout=i==null?void 0:i.layout,this.bordered=i==null?void 0:i.bordered,this.effectiveDir=ca(this.el)}loaded(){this.scrollTabTitleIntoView(this.selectedTitle,"instant"),this.tabTitles.length&&this.tabTitles.every(e=>!e.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(e=>{this.calciteInternalTabChange.emit({tab:e})})}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.resizeObserver)==null||e.disconnect()}get enabledTabTitles(){return Ire(this.el,"calcite-tab-title:not([disabled])").filter(e=>!e.closed)}get scrollerButtonWidth(){const{scale:e}=this;return parseInt(e==="s"?T_t:e==="m"?E_t:C_t)}get tabTitles(){return Ire(this.el,"calcite-tab-title")}focusPreviousTabHandler(e){this.handleTabFocus(e,e.target,"previous")}focusNextTabHandler(e){this.handleTabFocus(e,e.target,"next")}focusFirstTabHandler(e){this.handleTabFocus(e,e.target,"first")}focusLastTabHandler(e){this.handleTabFocus(e,e.target,"last")}internalActivateTabHandler(e){const i=e.target,r=this.selectedTitle;this.selectedTabId=e.detail.tab?e.detail.tab:this.getIndexOfTabTitle(i),e.stopPropagation(),this.selectedTitle=i,(r==null?void 0:r.id)!==i.id&&e.detail.userTriggered&&this.calciteTabChange.emit(),this.scrollTabTitleIntoView(i)}scrollTabTitleIntoView(e,i="smooth"){e&&requestAnimationFrame(()=>{const r=this.effectiveDir==="ltr",n=this.tabTitleContainerEl,s=n.getBoundingClientRect(),o=e.getBoundingClientRect(),a=n.scrollLeft,l=r?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,c=r?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(o.left<s.left+(l?this.scrollerButtonWidth:0)){const h=a+(o.left-s.left)-this.scrollerButtonWidth;n.scrollTo({left:h,behavior:i})}else if(o.right>s.right-(c?this.scrollerButtonWidth:0)){const h=a+(o.right-s.right)+this.scrollerButtonWidth;n.scrollTo({left:h,behavior:i})}})}internalCloseTabHandler(e){const i=e.target;this.handleTabTitleClose(i),e.stopPropagation()}async updateTabTitles(e){e.target.selected&&(this.selectedTabId=e.detail,this.selectedTitle=await this.getTabTitleById(this.selectedTabId))}globalInternalTabChangeHandler(e){this.syncId&&e.target!==this.el&&e.target.syncId===this.syncId&&this.selectedTabId!==e.detail.tab&&(this.selectedTabId=e.detail.tab),e.stopPropagation()}async selectedTabIdChanged(){await this.componentOnReady(),localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId})}onTabTitleWheel(e){e.preventDefault();const{deltaX:i,deltaY:r}=e,n=Math.abs(i),s=Math.abs(r);let o;n===s?o=this.lastScrollWheelAxis==="x"?i:r:n>s?(o=i,this.lastScrollWheelAxis="x"):(o=r,this.lastScrollWheelAxis="y");const a=(this.effectiveDir==="rtl"?-1:1)*o;e.currentTarget.scrollBy(a,0)}onSlotChange(){var n;(n=this.intersectionObserver)==null||n.disconnect();const e=this.tabTitles;e.forEach(s=>{var o;(o=this.intersectionObserver)==null||o.observe(s)});const i=this.getVisibleTabTitlesIndices(e);i.length>1&&this.makeFirstVisibleTabClosable&&(e[i[0]].closable=!0,this.makeFirstVisibleTabClosable=!1),this.calciteInternalTabNavSlotChange.emit(e)}storeTabTitleWrapperRef(e){e&&(this.tabTitleContainerEl=e,this.intersectionObserver=sn("intersection",()=>this.updateScrollingState(),{root:e,threshold:[0,.5,1]}))}updateScrollingState(){const e=this.tabTitleContainerEl;if(!e)return;let i,r;const n=e.scrollLeft,s=e.clientWidth,o=e.scrollWidth;this.effectiveDir==="ltr"?(i=n>0,r=n+s<o):(i=n<0,r=n!==-(o-s)),this.hasOverflowingStartTabTitle=i,this.hasOverflowingEndTabTitle=r}scrollToTabTitles(e){requestAnimationFrame(()=>{const i=this.tabTitleContainerEl,r=i.getBoundingClientRect(),n=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:s}=this;e==="forward"&&n.reverse();let o=null;if(n.forEach(a=>{const l=a.getBoundingClientRect(),c=r.x+r.width,h=l.x+l.width;e==="forward"&&s==="ltr"||e==="backward"&&s==="rtl"?(l.x>c||h>c&&l.x>r.x)&&(o=a):(h<r.x||h<c&&l.x<r.x)&&(o=a)}),o){const{scrollerButtonWidth:a}=this,l=e==="forward"&&s==="ltr"||e==="backward"&&s==="rtl"?-a:o.offsetWidth-i.clientWidth+a,c=o.offsetLeft+l;i.scrollTo({left:c,behavior:"smooth"})}})}scrollToNextTabTitles(){this.scrollToTabTitles("forward")}scrollToPreviousTabTitles(){this.scrollToTabTitles("backward")}handleTabFocus(e,i,r){const n=Jm(this.enabledTabTitles,i,r);this.scrollTabTitleIntoView(n,"instant"),e.stopPropagation()}getIndexOfTabTitle(e,i=this.tabTitles){return i.indexOf(e)}onTabTitleScroll(){this.updateScrollingState()}async getTabTitleById(e){return Promise.all(this.tabTitles.map(i=>i.getTabIdentifier())).then(i=>this.tabTitles[i.indexOf(e)])}getVisibleTabTitlesIndices(e){return e.reduce((i,r,n)=>r.closed?i:[...i,n],[])}handleTabTitleClose(e){const{tabTitles:i}=this,r=e.selected,n=this.getVisibleTabTitlesIndices(i),s=n.length;if(s===1&&i[n[0]].closable)this.makeFirstVisibleTabClosable=!0,i[n[0]].closable=!1,this.selectedTabId=n[0],r&&i[n[0]].activateTab();else if(s>1){const o=i.findIndex(l=>l===e),a=n.find(l=>l>o);this.selectedTabId===o&&(this.selectedTabId=a||s-1,i[this.selectedTabId].activateTab())}requestAnimationFrame(()=>{i[this.selectedTabId].focus()})}render(){return this.el.role="tablist",q`<div class=${ne({[Ig.container]:!0,[Ig.containerHasStartTabTitleOverflow]:!!this.hasOverflowingStartTabTitle,[Ig.containerHasEndTabTitleOverflow]:!!this.hasOverflowingEndTabTitle,[`scale-${this.scale}`]:!0,[`position-${this.position}`]:!0,[lu.rtl]:this.effectiveDir==="rtl"})}>${this.renderScrollButton("start")}<div class=${ne({[Ig.tabTitleSlotWrapper]:!0})} @scroll=${this.onTabTitleScroll} @wheel=${this.onTabTitleWheel} ${yt(this.storeTabTitleWrapperRef)}><slot @slotchange=${this.onSlotChange}></slot></div>${this.renderScrollButton("end")}</div>`}renderScrollButton(e){const{bordered:i,messages:r,hasOverflowingStartTabTitle:n,hasOverflowingEndTabTitle:s,scale:o}=this,a=e==="end";return nt(e,q`<div class=${ne({[Ig.scrollButtonContainer]:!0,[Ig.scrollBackwardContainerButton]:!a,[Ig.scrollForwardContainerButton]:a})} .hidden=${a&&!s||!a&&!n}><calcite-button .appearance=${i?"outline-fill":"transparent"} .ariaLabel=${a?r.nextTabTitles:r.previousTabTitles} class=${ne({[Ig.scrollButton]:!0})} icon-flip-rtl=both .iconStart=${a?Ype.chevronRight:Ype.chevronLeft} kind=neutral @click=${a?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles} .scale=${o} tabindex=-1></calcite-button></div>`)}};cU.properties={hasOverflowingEndTabTitle:[16,{},{state:!0}],hasOverflowingStartTabTitle:[16,{},{state:!0}],selectedTabId:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:1,scale:1,selectedTitle:[0,{},{attribute:!1}],storageId:[3,{},{reflect:!0}],syncId:[3,{},{reflect:!0}]},cU.styles=M_t;let eZ=cU;Xt("calcite-tab-nav",eZ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const tZ={button:"x-button",buttonRound:"x-button--round"},zMe=({disabled:t,focusable:e,key:i,label:r,onClick:n,ref:s,round:o=!0,scale:a,title:l})=>nt(i,q`<button .ariaLabel=${r} class=${ne({[(c=>`x-button--${c}`)(a)]:!0,[tZ.button]:!0,[tZ.buttonRound]:o})} .disabled=${t} @click=${n} .tabIndex=${e?0:-1} title=${l??Ge} type=button ${yt(s)}><calcite-icon icon=x .scale=${Fi(a)}></calcite-icon></button>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Yu={container:"container",containerBottom:"container--bottom",content:"content",contentHasText:"content--has-text",iconEnd:"icon-end",iconPresent:"icon-present",iconStart:"icon-start",titleIcon:"calcite-tab-title--icon",scale:t=>`scale-${t}`,selectedIndicator:"selected-indicator"},k_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}.content{position:relative;margin-block-end:.125rem;box-sizing:border-box;display:flex;block-size:100%;align-items:center;justify-content:center}.scale-s .content{padding-block:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-s .x-button{inline-size:1.25rem}.scale-m .content{padding-block:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-m .x-button{inline-size:1.75rem}.scale-l .content{padding-block:.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.scale-l .x-button{inline-size:2rem}:host([closable]) .content{border-block-end-color:transparent}:host([layout=inline]) .content,:host([layout=center]) .content{padding-inline:.25rem}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;justify-content:center;text-align:center}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{flex:1 1 auto;flex-grow:1}.container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;outline-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-tab-text-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-background-color, transparent)}.selected-indicator{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;inline-size:100%}:host([bordered][selected]) .container:after{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:-1px;inset-inline-start:0;inset-inline-end:0;inline-size:100%;content:""}:host([bordered][selected]) .container.container--bottom:after{inset-block-start:-1px}:host([bordered][selected]:focus) .container:after{background:transparent}.container--bottom .selected-indicator{inset-block-end:unset;inset-block-start:0}:host(:not([bordered])) .container:hover,:host(:not([bordered])) .container:active{color:var(--calcite-color-text-1)}:host([bordered]:not([selected]):hover:not(:focus)) .selected-indicator{background-color:var(--calcite-color-foreground-2)}:host([bordered]:not([selected]):hover:not(:focus)) .container:not(.container--bottom) .selected-indicator{box-shadow:inset 0 1px var(--calcite-color-border-1)}:host([bordered]:not([selected]):hover:not(:focus)) .container.container--bottom .selected-indicator{box-shadow:inset 0 -1px var(--calcite-color-border-1)}:host([selected]:focus) .selected-indicator{block-size:4px}.calcite-tab-title--icon{position:relative;margin:0;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.content--has-text .icon-start,.content--has-text .calcite-tab-title--icon.icon-start{color:var(--calcite-tab-icon-color-start, var(--calcite-icon-color))}.content--has-text .calcite-tab-title--icon.icon-start .icon-end,.content--has-text .calcite-tab-title--icon.icon-end{color:var(--calcite-tab-icon-color-end, var(--calcite-icon-color))}.content--has-text{padding:.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:var(--calcite-spacing-sm)}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:var(--calcite-spacing-sm)}.x-button{display:flex;block-size:100%;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:transparent;outline-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-start:var(--calcite-spacing-sm);margin-inline-end:var(--calcite-spacing-px);block-size:calc(100% - var(--calcite-spacing-xxs));color:var(--calcite-tab-close-icon-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}.x-button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)))}.x-button:focus,.x-button:hover,.x-button:active{color:var(--calcite-tab-close-icon-color-press, var(--calcite-color-text-1));background-color:var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container{border-color:transparent;border-inline-width:var(--calcite-spacing-px);border-inline-style:solid}:host([bordered]) .container:hover,:host([bordered]) .container:active{color:var(--calcite-color-text-1)}:host([bordered]) .container .x-button calcite-icon{margin-block-start:var(--calcite-spacing-px)}:host([bordered]) .container .x-button:focus,:host([bordered]) .container .x-button:hover,:host([bordered]) .container .x-button:active{box-shadow:0 2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom{border-block-start-style:solid;border-block-start-width:1px}:host([bordered]) .container.container--bottom .selected-indicator{inset-block-start:unset;inset-block-end:0}:host([bordered]) .container.container--bottom .x-button{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}:host([bordered]) .container.container--bottom .x-button:focus,:host([bordered]) .container.container--bottom .x-button:hover,:host([bordered]) .container.container--bottom .x-button:active{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom .x-button calcite-icon{margin-block-end:var(--calcite-spacing-px)}:host([bordered]) .container:not(.container--bottom){border-block-end-style:solid;border-block-end-width:1px}:host([bordered]) .container:not(.container--bottom) .x-button{block-size:calc(100% - var(--calcite-spacing-px));margin-block-start:-1px}:host([bordered]) .container .selected-indicator{inset-block-start:0;inset-block-end:unset;inset-inline-start:-1px;inset-inline-end:0;inline-size:calc(100% + var(--calcite-spacing-base))}:host([bordered]) .container:host(:not([selected])) .container .x-button{box-shadow:0 2px 0 0 transparent}:host([bordered]) .container:host(:not([selected])):host(:hover) .container:not(.container--bottom){border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .selected-indicator{box-shadow:inset 0 var(--calcite-internal-tab-shadow-length) var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) :not(.container--bottom){--calcite-internal-tab-shadow-length: 1px}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .container--bottom{--calcite-internal-tab-shadow-length: -1px}:host([bordered]) .container:hover{background-color:var(--calcite-tab-background-color-hover, var(--calcite-color-foreground-2));border-block-end-color:var(--calcite-color-border-1)}:host(:hover) .selected-indicator{background-color:var(--calcite-color-border-3)}:host([selected]) .selected-indicator,:host([selected]:hover) .selected-indicator,:host(:focus) .selected-indicator,:host(:active) .selected-indicator{background-color:var(--calcite-tab-accent-color-press, var(--calcite-color-brand))}:host([closed]){display:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-1))}:host([selected][bordered]) .container{border-inline-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([selected][bordered]) .container:after{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([selected][bordered]) .container:hover,:host([selected][bordered]) .container:active{background:transparent}:host(:focus) .container{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:focus) .container:focus-within{outline-color:transparent}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:var(--calcite-spacing-sm)}:host([layout=inline][bordered]) .scale-m .content,:host([layout=center][bordered]) .scale-m .content{padding-inline:.75rem}:host([layout=inline][bordered]) .scale-s .content,:host([layout=center][bordered]) .scale-s .content{padding-inline:.5rem}:host([layout=inline][bordered]) .scale-l .content,:host([layout=center][bordered]) .scale-l .content{padding-inline:1rem}:host([layout=inline][closable]) .scale-s .content,:host([layout=inline][closable]) .scale-m .content,:host([layout=inline][closable]) .scale-l .content{padding-inline-end:0}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][selected]) .container--bottom{border-block-start-style:none}.x-button{z-index:var(--calcite-z-index)}.selected-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .container{pointer-events:none;opacity:.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,uU=class uU extends Yt{constructor(){super(),this.closeButtonEl=Tn(),this.guid=`calcite-tab-title-${Ml()}`,this.mutationObserver=sn("mutation",()=>this.updateHasText()),this.resizeObserver=sn("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.messages=Mn(),this.hasText=!1,this.bordered=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.position="top",this.scale="m",this.selected=!1,this.calciteInternalTabIconChanged=Ne({cancelable:!1}),this.calciteInternalTabTitleRegister=Ne({cancelable:!1}),this.calciteInternalTabsActivate=Ne({cancelable:!1}),this.calciteInternalTabsClose=Ne({cancelable:!1}),this.calciteInternalTabsFocusFirst=Ne({cancelable:!1}),this.calciteInternalTabsFocusLast=Ne({cancelable:!1}),this.calciteInternalTabsFocusNext=Ne({cancelable:!1}),this.calciteInternalTabsFocusPrevious=Ne({cancelable:!1}),this.calciteTabsActivate=Ne({cancelable:!1}),this.calciteTabsClose=Ne({cancelable:!1}),this.listenOn(document.body,"calciteInternalTabChange",this.internalTabChangeHandler),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler)}async activateTab(e=!0){if(this.disabled||this.closed)return;const i={tab:this.tab,userTriggered:e};this.calciteInternalTabsActivate.emit(i),e&&requestAnimationFrame(()=>this.calciteTabsActivate.emit())}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async getTabIndex(){return Array.prototype.indexOf.call(IU(this.el.parentElement.children).filter(e=>e.matches("calcite-tab-title")),this.el)}_updateAriaInfo(e=[],i=[]){this.controls=e[i.indexOf(this.el.id)]||null}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),this.parentTabsEl=this.el.closest("calcite-tabs")}async load(){this.updateHasText(),this.tab&&this.selected&&this.activateTab(!1)}willUpdate(e){e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.selectedHandler(),this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.bordered=this.parentTabsEl.bordered)}updated(){Gr(this)}async loaded(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}disconnectedCallback(){var e,i,r;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=document.body)==null||i.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(r=this.resizeObserver)==null||r.disconnect()}selectedHandler(){this.selected&&this.activateTab(!1)}internalTabChangeHandler(e){e.composedPath().find(r=>r.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(r=>{this.selected=r===e.detail.tab}),e.stopPropagation())}onClick(){this.activateTab()}keyDownHandler(e){switch(e.key){case" ":case"Enter":e.composedPath().includes(this.closeButtonEl.value)||(this.activateTab(),e.preventDefault());break;case"ArrowRight":e.preventDefault(),ca(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":e.preventDefault(),ca(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":e.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":e.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}closeClickHandler(){this.closeTabTitleAndNotify()}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setupTextContentObserver(){var e;(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}closeTabTitleAndNotify(){this.closed=!0,this.calciteInternalTabsClose.emit({tab:this.tab}),this.calciteTabsClose.emit()}render(){const{el:e,closed:i}=this,r=e.id||this.guid,n=q`<calcite-icon class=${ne({[Yu.titleIcon]:!0,[Yu.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${Fi(this.scale)}></calcite-icon>`,s=q`<calcite-icon class=${ne({[Yu.titleIcon]:!0,[Yu.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${Fi(this.scale)}></calcite-icon>`;return Ap(this.el,"aria-controls",this.controls),this.el.ariaSelected=$O(this.selected),Ap(this.el,"id",r),this.el.role="tab",Ap(this.el,"tabIndex",this.selected&&!this.disabled?0:-1),Hr({disabled:this.disabled,children:q`<div class=${ne({[Yu.container]:!0,[Yu.containerBottom]:this.position==="bottom",[Yu.iconPresent]:!!this.iconStart||!!this.iconEnd,[Yu.scale(this.scale)]:!0})} .hidden=${i} ${yt(o=>{var a;return o?(a=this.resizeObserver)==null?void 0:a.observe(o):null})}><div class=${ne({[Yu.content]:!0,[Yu.contentHasText]:this.hasText})}>${this.iconStart?n:null}<slot></slot>${this.iconEnd?s:null}</div>${this.renderCloseButton()}<div class=${ne(Yu.selectedIndicator)}></div></div>`})}renderCloseButton(){const{closable:e,messages:i}=this;return e?nt("close-button",zMe({disabled:!1,focusable:!0,label:i.close,onClick:this.closeClickHandler,ref:this.closeButtonEl,round:!1,scale:this.scale,title:i.close})):null}};uU.properties={controls:[16,{},{state:!0}],hasText:[16,{},{state:!0}],bordered:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],position:1,scale:1,selected:[7,{},{reflect:!0,type:Boolean}],tab:[3,{},{reflect:!0}]},uU.styles=k_t;let iZ=uU;Xt("calcite-tab-title",iZ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Xpe={container:"container",content:"content"},A_t=dt`:host{display:none}:host,.container,.content{block-size:100%;inline-size:100%}:host([selected]),:host([selected]) .container{display:flex;flex-direction:column}.content{box-sizing:border-box;padding-block:var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, var(--calcite-internal-tab-content-space-y)))}.scale-s{--calcite-internal-tab-content-space-y: .25rem;font-size:var(--calcite-font-size-sm);line-height:1rem}.scale-m{--calcite-internal-tab-content-space-y: .5rem;font-size:var(--calcite-font-size);line-height:1rem}.scale-l{--calcite-internal-tab-content-space-y: .625rem;font-size:var(--calcite-font-size-md);line-height:1.25rem}.container{display:none;block-size:100%;inline-size:100%;overflow:auto;outline-color:transparent}.container:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([hidden]){display:none}[hidden]{display:none}`,dU=class dU extends Yt{constructor(){super(),this.guid=`calcite-tab-title-${Ml()}`,this.scale="m",this.selected=!1,this.listenOn(document.body,"calciteInternalTabChange",this.internalTabChangeHandler)}async getTabIndex(){return Array.prototype.indexOf.call(IU(this.el.parentElement.children).filter(e=>e.matches("calcite-tab")),this.el)}_updateAriaInfo(e=[],i=[]){this.labeledBy=i[e.indexOf(this.el.id)]||null}connectedCallback(){super.connectedCallback(),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var e;super.disconnectedCallback(),(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(e){e.composedPath().find(r=>r.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===e.detail.tab:this.getTabIndex().then(r=>{this.selected=r===e.detail.tab}),e.stopPropagation())}render(){const e=this.el.id||this.guid;return Ap(this.el,"aria-labelledby",this.labeledBy),Ap(this.el,"id",e),q`<div class=${ne({[Xpe.container]:!0,[`scale-${this.scale}`]:!0})} role=tabpanel .tabIndex=${this.selected?0:-1}><section class=${ne(Xpe.content)}><slot></slot></section></div>`}};dU.properties={labeledBy:[16,{},{state:!0}],scale:1,selected:[7,{},{reflect:!0,type:Boolean}],tab:[3,{},{reflect:!0}]},dU.styles=A_t;let rZ=dU;Xt("calcite-tab",rZ);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const O_t=dt`.arcgis-print__template-select-container{border:1px solid var(--calcite-color-border-1);cursor:pointer}.arcgis-print__template-select-container .arcgis-print__template-select-error,.arcgis-print__template-select-container .arcgis-print__template-select-arrow{display:flex;align-self:center;margin-right:var(--calcite-spacing-md)}`,nG="arcgis-print",sG={templateSelectContainer:`${nG}__template-select-container`,templateSelectError:`${nG}__template-select-error`,templateSelectArrow:`${nG}__template-select-arrow`};var O_;let P_t=(O_=class extends qi{constructor(){super(...arguments),this._handles=wP("disconnect"),this._templateState="not-loaded"}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.templateOptions.id,e=>{this._handles.removeHandles("template-handle"),this._selectedTemplate=e?this.viewModel.getLayoutTemplateById(e)??void 0:void 0,this._handles.addHandles(Le(()=>{var i;return(i=this._selectedTemplate)==null?void 0:i.state},i=>this._templateState=i??"not-loaded",{initial:!0}),"template-handle")},{initial:!0})])}render(){var e;return q`<calcite-block class=${mt(sG.templateSelectContainer)} .description=${RMe(this._selectedTemplate)} .heading=${this._selectedTemplate?DMe(this._selectedTemplate,this.messages):this.messages.selectTemplate} .loading=${this._templateState==="loading"} @click=${this.showTemplateSelector} @keydown=${i=>{(i.key==="Enter"||i.key===" ")&&this.showTemplateSelector()}} tabindex=0>${nt("template-select-icon",q`<calcite-icon .icon=${((e=this._selectedTemplate)!=null&&e.layout?NMe(this._selectedTemplate.layout):null)||"custom-print"} scale=l slot=content-start></calcite-icon>`)}${this._templateState==="error"?nt("template-select-error",q`<calcite-icon class=${mt(sG.templateSelectError)} icon=exclamation-mark-circle scale=s slot=actions-end></calcite-icon>`):null}${nt("template-select-arrow",q`<calcite-icon class=${mt(sG.templateSelectArrow)} .icon=${m_t()?"chevron-left":"chevron-right"} scale=s slot=actions-end></calcite-icon>`)}</calcite-block>`}},O_.properties={_selectedTemplate:16,_templateState:16,viewModel:0,messages:0,showTemplateSelector:0},O_.styles=O_t,O_);or("arcgis-print-template-select",P_t);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const oG={container:"container",track:"track",handle:"handle"},L_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .container{block-size:.75rem}:host([scale=s]) .track{block-size:.75rem;inline-size:1.5rem}:host([scale=s]) .handle{block-size:.5rem;inline-size:.5rem}:host([scale=m]) .container{block-size:1rem}:host([scale=m]) .track{block-size:1rem;inline-size:2rem}:host([scale=m]) .handle{block-size:.75rem;inline-size:.75rem}:host([scale=l]) .container{block-size:1.5rem}:host([scale=l]) .track{block-size:1.5rem;inline-size:3rem}:host([scale=l]) .handle{block-size:1.25rem;inline-size:1.25rem}:host{position:relative;display:inline-block;inline-size:auto;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;tap-highlight-color:transparent}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{outline-width:0px}.track{pointer-events:none;position:relative;box-sizing:border-box;display:inline-block;vertical-align:top;outline-color:transparent;border-radius:var(--calcite-switch-corner-radius, 9999px);border-color:var(--calcite-switch-border-color);background-color:var(--calcite-switch-background-color, var(--calcite-color-border-input))}.container:focus .track{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container:hover .track{background-color:var(--calcite-switch-background-color-hover, var(--calcite-color-text-3))}.handle{pointer-events:none;position:absolute;display:block;transition-property:all;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);inset-block-start:var(--calcite-spacing-base);inset-inline:var(--calcite-spacing-base) auto;background-color:var(--calcite-switch-handle-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-switch-handle-border-color);border-radius:var(--calcite-switch-corner-radius, 9999px);box-shadow:var(--calcite-switch-handle-shadow)}:host([checked]) .track{background-color:var(--calcite-switch-background-color, var(--calcite-color-brand))}:host([checked]) .handle{inset-inline:auto var(--calcite-spacing-base)}:host([checked]):host(:hover:not([disabled])) .track{background-color:var(--calcite-switch-background-color-hover, var(--calcite-color-brand-hover))}@media (forced-colors: active){:host([checked]) .track{background-color:canvasText}}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,hU=class hU extends Yt{constructor(){super(),this.checked=!1,this.disabled=!1,this.scale="m",this.calciteSwitchChange=Ne({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}async setFocus(){await pr(this),ab(this.switchEl)}connectedCallback(){super.connectedCallback(),rf(this),g1(this)}updated(){Gr(this)}disconnectedCallback(){super.disconnectedCallback(),$b(this),v1(this)}syncHiddenFormInput(e){e.type="checkbox"}keyDownHandler(e){!this.disabled&&oC(e.key)&&(this.toggle(),e.preventDefault())}onLabelClick(){this.disabled||(this.toggle(),this.setFocus())}toggle(){this.checked=!this.checked,this.calciteSwitchChange.emit()}clickHandler(){this.disabled||this.toggle()}setSwitchEl(e){this.switchEl=e}render(){return Hr({disabled:this.disabled,children:q`<div .ariaChecked=${this.checked} .ariaLabel=${ub(this)} class=${ne(oG.container)} role=switch tabindex=0 ${yt(this.setSwitchEl)}><div class=${ne(oG.track)}><div class=${ne(oG.handle)}></div></div>${b1({component:this})}</div>`})}};hU.properties={checked:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],label:1,name:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],value:1},hU.styles=L_t;let nZ=hU;Xt("calcite-switch",nZ);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */var P_;let R_t=(P_=class extends qi{constructor(){super(...arguments),this._showPrintAreaEnabled=!1}loaded(){this.manager.onLifecycle(()=>[Le(()=>[this.viewModel.showPrintAreaEnabled],()=>{const{showPrintAreaEnabled:e}=this.viewModel;this._showPrintAreaEnabled=e},{initial:!0})])}render(){return q`<calcite-label layout=inline><calcite-switch .checked=${this._showPrintAreaEnabled} @calciteSwitchChange=${e=>{this.viewModel.showPrintAreaEnabled=!!e.currentTarget.checked}}></calcite-switch>${this.messages.printPreview}</calcite-label>`}},P_.properties={_showPrintAreaEnabled:16,viewModel:0,messages:0},P_.shadowRootOptions=Zn,P_);or("arcgis-print-preview-input",R_t);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const _5="CALCITE-COMBOBOX-ITEM",rO="CALCITE-COMBOBOX-ITEM-GROUP",Kpe=`${_5}, ${rO}`,Wr={allSelected:"all-selected",chip:"chip",chipInvisible:"chip--invisible",icon:"icon",input:"input",inputHidden:"input--hidden",label:"label",labelIcon:"label--icon",listContainer:"list-container",placeholderIcon:"placeholder-icon",selectAll:"select-all",selectionDisplayFit:"selection-display--fit",selectionDisplaySingle:"selection-display--single",selectedIcon:"selected-icon",floatingUIContainer:"floating-ui-container",screenReadersOnly:"screen-readers-only",wrapper:"wrapper",wrapperSingle:"wrapper--single",wrapperActive:"wrapper--active"},Qpe={validationMessage:"comboboxValidationMessage"};function D_t(t){var r,n;const e=(r=t.parentElement)==null?void 0:r.closest(Kpe),i=(n=e==null?void 0:e.parentElement)==null?void 0:n.closest(Kpe);return[e,i].filter(s=>s)}function efe(t){var e;return((e=t.ancestors)==null?void 0:e.filter(i=>i.nodeName==="CALCITE-COMBOBOX-ITEM"))||[]}function N_t(t){return IU(t.querySelectorAll("calcite-combobox-item"))}function tfe(t){return IU(t.querySelectorAll("calcite-combobox-item")).filter(i=>i.selected).length>0}function z_t(t){const e=document.evaluate("ancestor::calcite-combobox-item | ancestor::calcite-combobox-item-group",t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),i=e.snapshotLength;if(i>0&&t.nodeName===_5){for(let r=0;r<i;r++)if(e.snapshotItem(r).nodeName===rO)return i}else if(t.nodeName===rO)return i;return i+1}function s$(t){return t.includes("single")}function E3(t){return t.shortHeading||t.heading||t.textLabel}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const F_t={textMatch:"text-match"};function Zk({text:t,pattern:e}){if(!e||!t)return t;const i=t.split(e);return i.length>1&&(i[1]=q`<mark class=${ne(F_t.textMatch)}>${i[1]}</mark>`),i}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Xu={active:"label--active",centerContent:"center-content",container:"container",iconCustom:"icon--custom",description:"description",icon:"icon",label:"label",scale:t=>`scale--${t}`,shortText:"short-text",single:"label--single",textContainer:"text-container",heading:"heading"},nS={checked:"check-square-f",circle:"circle",indeterminate:"minus-square-f",selectedSingle:"circle-inset-large",unchecked:"square"},ife={contentEnd:"content-end",contentStart:"content-start"},U_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-combobox-item-spacing-unit-s: .25rem;--calcite-internal-combobox-item-spacing-unit-l: .5rem;--calcite-combobox-item-selector-icon-size: 1rem;--calcite-internal-combobox-item-description-font-size: var(--calcite-font-size-xs)}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-combobox-item-spacing-unit-s: .375rem;--calcite-internal-combobox-item-spacing-unit-l: .75rem;--calcite-combobox-item-selector-icon-size: 1rem;--calcite-internal-combobox-item-description-font-size: var(--calcite-font-size-sm)}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-combobox-item-spacing-unit-s: .625rem;--calcite-internal-combobox-item-spacing-unit-l: 1rem;--calcite-combobox-item-selector-icon-size: 1.5rem;--calcite-internal-combobox-item-description-font-size: var(--calcite-font-size)}.container{--calcite-combobox-item-indent-value: calc( var(--calcite-internal-combobox-item-spacing-unit-l) * var(--calcite-combobox-item-spacing-indent-multiplier) )}:host(:focus){--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host,ul{margin:0;display:flex;flex-direction:column;padding:0}:host(:focus),ul:focus{outline:2px solid transparent;outline-offset:2px}.label{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;text-decoration-line:none;transition-timing-function:cubic-bezier(.4,0,.2,1);outline-color:transparent;word-wrap:break-word;word-break:break-word;justify-content:space-around;gap:var(--calcite-internal-combobox-item-spacing-unit-l);padding-block:var(--calcite-internal-combobox-item-spacing-unit-s);padding-inline-end:var(--calcite-internal-combobox-item-spacing-unit-l);padding-inline-start:var(--calcite-combobox-item-indent-value);color:var(--calcite-combobox-text-color, var(--calcite-color-text-3));transition-duration:var(--calcite-animation-timing)}:host([disabled]) .label{cursor:default}.label--active{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.label:hover{background-color:var(--calcite-combobox-item-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-combobox-text-color-hover, var(--calcite-color-text-1))}.label:active{background-color:var(--calcite-combobox-item-background-color-active, var(--calcite-color-foreground-3))}:host([selected]) .label,.label:active{color:var(--calcite-combobox-text-color-hover, var(--calcite-color-text-1))}:host([selected]) .label .description,:host([selected]) .label .short-text,.label:active .description,.label:active .short-text{color:var(--calcite-combobox-description-text-color-press, var(--calcite-color-text-2))}.icon{display:inline-flex;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-color-border-input)}:host([selected]) .icon,:host([indeterminate]) .icon{color:var(--calcite-combobox-selected-icon-color, var(--calcite-color-brand))}.icon--custom{margin-block-start:-1px}.center-content{display:flex;flex-direction:column;flex-grow:1;padding-block:0}.description{font-size:var(--calcite-internal-combobox-item-description-font-size)}.short-text{white-space:nowrap}.heading{color:var(--calcite-combobox-heading-text-color, var(--calcite-color-text-1))}.description,.short-text{color:var(--calcite-combobox-description-text-color, var(--calcite-color-text-3))}:host([selected]) .heading{font-weight:var(--calcite-font-weight-medium)}.heading,.description,.short-text{line-height:var(--calcite-font-line-height-relative-snug)}:host([item-hidden]){display:none}.text-match{background-color:transparent;color:inherit;font-weight:var(--calcite-font-weight-bold)}`,pU=class pU extends Yt{constructor(){super(...arguments),this._selected=!1,this.hasContent=!1,this.active=!1,this.disabled=!1,this.guid=Ml(),this.iconFlipRtl=!1,this.scale="m",this.selectionMode="multiple",this.itemHidden=!1,this.indeterminate=!1,this.calciteComboboxItemChange=Ne({cancelable:!1}),this.calciteInternalComboboxItemChange=Ne({cancelable:!1})}get selected(){return this._selected}set selected(e){const i=this._selected;e!==i&&(this._selected=e,this.emitItemChange())}connectedCallback(){super.connectedCallback(),this.ancestors=D_t(this.el)}load(){fRe(this,"value","textLabel")}willUpdate(e){this.hasUpdated&&(e.has("disabled")||e.has("heading")||e.has("label")||e.has("textLabel"))&&this.emitItemChange()}updated(){Gr(this)}emitItemChange(){this.calciteInternalComboboxItemChange.emit()}handleDefaultSlotChange(e){this.hasContent=eye(e)}toggleSelected(){const e=this.selectionMode==="single-persist";this.disabled||e&&this.selected||(this.selected=!this.selected,this.calciteComboboxItemChange.emit())}itemClickHandler(){this.toggleSelected()}renderIcon(e){return this.icon?nt("icon",q`<calcite-icon class=${ne({[Xu.iconCustom]:!!this.icon})} .flipRtl=${this.iconFlipRtl} .icon=${this.icon||e} .scale=${Fi(this.scale)}></calcite-icon>`):null}renderSelectIndicator(e){return nt("indicator",q`<calcite-icon class=${ne({[Xu.icon]:!0})} .flipRtl=${this.iconFlipRtl} .icon=${e} .scale=${Fi(this.scale)}></calcite-icon>`)}renderChildren(){return nt("default-slot-container",q`<ul .hidden=${!this.hasContent}><slot @slotchange=${this.handleDefaultSlotChange}></slot></ul>`)}render(){const{disabled:e,heading:i,label:r,textLabel:n,value:s,filterTextMatchPattern:o,description:a,shortHeading:l}=this,c=s$(this.selectionMode),h=e||c?void 0:nS.checked,m=c?this.selected?nS.selectedSingle:nS.circle:this.indeterminate?nS.indeterminate:this.selected?nS.checked:nS.unchecked,y=i||n,v=r||s,w={[Xu.label]:!0,[Xu.active]:this.active,[Xu.single]:c},x=z_t(this.el);return this.el.ariaHidden="true",this.el.ariaLabel=v,Hr({disabled:e,children:q`<div class=${ne({[Xu.container]:!0,[Xu.scale(this.scale)]:!0})} style=${HZ({"--calcite-combobox-item-spacing-indent-multiplier":`${x}`})}><li class=${ne(w)} id=${this.guid??Ge} @click=${this.itemClickHandler}>${this.renderSelectIndicator(m)}<slot name=${ife.contentStart}></slot>${this.renderIcon(h)}<div class=${ne(Xu.centerContent)}><div class=${ne(Xu.heading)}>${Zk({text:y,pattern:o})}</div>${a?q`<div class=${ne(Xu.description)}>${Zk({text:a,pattern:o})}</div>`:null}</div>${l?q`<div class=${ne(Xu.shortText)}>${Zk({text:l,pattern:o})}</div>`:null}<slot name=${ife.contentEnd}></slot></li>${this.renderChildren()}</div>`})}};pU.properties={hasContent:[16,{},{state:!0}],active:[7,{},{reflect:!0,type:Boolean}],ancestors:[0,{},{attribute:!1}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],filterDisabled:[7,{},{reflect:!0,type:Boolean}],filterTextMatchPattern:[2,{},{reflect:!0,attribute:!1}],guid:[3,{},{reflect:!0}],heading:1,icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,metadata:[0,{},{attribute:!1}],scale:1,selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:[3,{},{reflect:!0}],shortHeading:1,textLabel:[3,{},{reflect:!0}],value:1,itemHidden:[7,{},{reflect:!0,type:Boolean}],indeterminate:[7,{},{reflect:!0,type:Boolean}]},pU.styles=U_t;let sZ=pU;Xt("calcite-combobox-item",sZ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const j_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:block}:host([scale=s]){font-size:var(--calcite-font-size--2);--calcite-internal-combobox-spacing-unit-l: .5rem;--calcite-internal-combobox-spacing-unit-s: .25rem;--calcite-combobox-input-height: 1rem;--calcite-internal-combobox-input-margin-block: calc(.25rem - 1px) ;--calcite-internal-close-size: 1rem}:host([scale=s]) .x-button{margin-inline:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);--calcite-internal-combobox-spacing-unit-l: .75rem;--calcite-internal-combobox-spacing-unit-s: .5rem;--calcite-combobox-input-height: 1rem;--calcite-internal-combobox-input-margin-block: calc(.5rem - 1px) ;--calcite-internal-close-size: 1.5rem}:host([scale=m]) .x-button{margin-inline-end:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);--calcite-internal-combobox-spacing-unit-l: 1rem;--calcite-internal-combobox-spacing-unit-s: .75rem;--calcite-combobox-input-height: 1.5rem;--calcite-internal-combobox-input-margin-block: calc(.625rem - 1px) ;--calcite-internal-close-size: 2rem}:host([scale=l]) .x-button{margin-inline-end:1rem}.x-button{align-self:center}.wrapper{display:flex;border-width:1px;border-style:solid;outline-color:transparent;padding-block:calc(var(--calcite-internal-combobox-spacing-unit-s) / 4);padding-inline:var(--calcite-internal-combobox-spacing-unit-l);background-color:var(--calcite-combobox-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-combobox-input-text-color, var(--calcite-color-text-1));border-color:var(--calcite-combobox-input-border-color, var(--calcite-color-border-input))}.wrapper:hover .icon{color:var(--calcite-combobox-icon-color-hover, var(--calcite-color-text-1))}:host(:focus-within) .wrapper,.wrapper--active{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([read-only]) .wrapper{background-color:var(--calcite-color-background)}:host([read-only]) .label{font-weight:var(--calcite-font-weight-medium)}:host([status=invalid]) .wrapper{border-color:var(--calcite-color-status-danger)}:host([status=invalid]:focus-within) .wrapper{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.wrapper--single{padding-block:0;padding-inline:var(--calcite-internal-combobox-spacing-unit-l);cursor:pointer;flex-wrap:nowrap}.grid-input{position:relative;display:flex;flex-grow:1;flex-wrap:wrap;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0;gap:var(--calcite-internal-combobox-spacing-unit-s);margin-inline-end:var(--calcite-internal-combobox-spacing-unit-s)}.grid-input.selection-display--fit,.grid-input.selection-display--single{flex-wrap:nowrap;overflow:hidden}.input{flex-grow:1;appearance:none;overflow:hidden;text-overflow:ellipsis;border-style:none;background-color:transparent;padding:0;font-family:inherit;color:var(--calcite-color-text-1);font-size:inherit;block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height);inline-size:100%;margin-block-end:var(--calcite-internal-combobox-spacing-unit-s);min-inline-size:4.8125rem}.input:focus{outline:2px solid transparent;outline-offset:2px}.input:placeholder-shown{text-overflow:ellipsis}.input--single{padding:0;margin-block:var(--calcite-internal-combobox-input-margin-block)}.wrapper--active .input-single{cursor:text}.input--hidden{pointer-events:none;width:0px;min-width:0px;opacity:0}.input--icon{padding-block:0;padding-inline:var(--calcite-internal-combobox-spacing-unit-l)}.placeholder-icon{color:var(--calcite-combobox-icon-color, var(--calcite-color-text-3))}.input-wrap{display:flex;flex-grow:1;align-items:center}.input-wrap--single{flex:1 1 0%;overflow:hidden}.label{pointer-events:none;max-width:100%;flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0;font-weight:var(--calcite-font-weight-normal);block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height)}.label--icon{padding-inline:var(--calcite-internal-combobox-spacing-unit-l)}.icon-end,.icon-start{display:flex;cursor:pointer;align-items:center}.icon-end{flex:none}.icon-end .icon{color:var(--calcite-combobox-icon-color, var(--calcite-color-text-3))}.floating-ui-container{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset,left,opacity;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@media (forced-colors: active){.wrapper,.floating-ui-container{border:1px solid canvasText}}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.list-container{max-height:45vh;overflow-y:auto;inline-size:var(--calcite-dropdown-width, 100%);background-color:var(--calcite-combobox-background-color, var(--calcite-color-foreground-1))}.list{margin:0;display:block;padding:0}.list--hide{height:0px;overflow:hidden}calcite-chip{--calcite-animation-timing: 0}.chip{margin-block:calc(var(--calcite-internal-combobox-spacing-unit-s) / 4);max-inline-size:100%}.chip--invisible{visibility:hidden;position:absolute}.item{display:block}.select-all{background-color:var(--calcite-combobox-item-background-color-active, var(--calcite-color-foreground-1));border-block-end-color:var(--calcite-combobox-item-border-color, var(--calcite-color-border-3));border-block-end-style:solid;border-block-end-width:var(--calcite-border-width-sm);inset-block-start:0;position:sticky;z-index:var(--calcite-z-index-sticky)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.x-button{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-style:none;cursor:pointer;outline-color:transparent;align-items:center;margin:0;background-color:var(--calcite-close-background-color, var(--calcite-color-foreground-2));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-close-icon-color, var(--calcite-color-text-3));block-size:var(--calcite-internal-close-size, 1.5rem);inline-size:var(--calcite-internal-close-size, 1.5rem);min-block-size:var(--calcite-internal-close-size, 1.5rem);min-inline-size:var(--calcite-internal-close-size, 1.5rem);padding:0}.x-button:hover,.x-button:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-foreground-3))}.x-button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.x-button:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.x-button calcite-icon{color:inherit}.x-button--round{border-radius:9999px}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::slotted(calcite-combobox-item-group:not(:first-child)){padding-block-start:var(--calcite-internal-combobox-spacing-unit-l)}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,rfe="combobox-item-",vM="combobox-chip-",nfe="combobox-label-",aG="combobox-listbox-",sfe="combobox-input-",fU=class fU extends Yt{constructor(){super(),this.closeButtonEl=Tn(),this.filterItems=(()=>{const e=(i,r)=>i&&r.some(({el:n})=>i===n);return nC((i,r=!1,n=!0)=>{const s=pN([...this.data,...this.groupData],i,this.effectiveFilterProps),o=this.getItemsAndGroups(),a=i==="";o.forEach(l=>{if(a){l.itemHidden=!1;return}const c=!e(l,s);l.itemHidden=c;const[h,m]=l.ancestors;(e(h,s)||e(m,s))&&(l.itemHidden=!1),c||l.ancestors.forEach(y=>y.itemHidden=!1)}),this.filterTextMatchPattern=this.filterText&&new RegExp(`(${eY(this.filterText)})`,"i"),this.filteredItems.forEach(l=>{l.filterTextMatchPattern=this.filterTextMatchPattern}),r&&(this.open=this.filterText.trim().length>0&&this.filteredItems.length>0),n&&this.calciteComboboxFilterChange.emit()},vE.filter)})(),this._filterText="",this.getSelectedItems=()=>{if(!this.isMulti()){const e=this.items.find(({selected:i})=>i);return e?[e]:[]}return this.items.filter(e=>e.selected&&(this.selectionMode!=="ancestors"||!tfe(e))).sort((e,i)=>{const r=this.selectedItems.indexOf(e),n=this.selectedItems.indexOf(i);return r>-1&&n>-1?r-n:n-r})},this.groupItems=[],this.guid=Ml(),this.ignoreSelectedEventsFlag=!1,this.inputHeight=0,this.internalValueChangeFlag=!1,this.mutationObserver=sn("mutation",()=>this.updateItems()),this.onLabelClick=()=>{this.setFocus()},this.transitionProp="opacity",this.placement=xE,this.resizeObserver=sn("resize",()=>{this.setMaxScrollerHeight(),this.refreshSelectionDisplay()}),this._selectedItems=[],this.textInput=Tn(),this._value=null,this.messages=Mn(),this.activeChipIndex=-1,this.activeDescendant="",this.activeItemIndex=-1,this.compactSelectionDisplay=!1,this.selectedHiddenChipsCount=0,this.selectedVisibleChipsCount=0,this.items=[],this.clearDisabled=!1,this.disabled=!1,this.maxItems=0,this.open=!1,this.overlayPositioning="absolute",this.placeholderIconFlipRtl=!1,this.readOnly=!1,this.required=!1,this.scale="m",this.selectAllEnabled=!1,this.selectionDisplay="all",this.selectionMode="multiple",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteComboboxBeforeClose=Ne({cancelable:!1}),this.calciteComboboxBeforeOpen=Ne({cancelable:!1}),this.calciteComboboxChange=Ne({cancelable:!1}),this.calciteComboboxChipClose=Ne({cancelable:!1}),this.calciteComboboxClose=Ne({cancelable:!1}),this.calciteComboboxFilterChange=Ne({cancelable:!1}),this.calciteComboboxOpen=Ne({cancelable:!1}),this.listenOn(document,"click",this.documentClickHandler),this.listen("calciteComboboxItemChange",this.calciteComboboxItemChangeHandler),this.listen("calciteInternalComboboxItemChange",this.calciteInternalComboboxItemChangeHandler),this.listen("click",this.comboboxFocusHandler)}get allSelected(){return this.selectedItems.length===this.items.length}get indeterminate(){return this.selectedItems.length>0&&!this.allSelected}get keyboardNavItems(){const{selectAllComboboxItemReferenceEl:e,items:i}=this;return e?[e,...i.filter(r=>!r.disabled)]:i.filter(r=>!r.disabled)}get filterText(){return this._filterText}set filterText(e){const i=this._filterText;e!==i&&(this._filterText=e,this.filterTextChange(e))}get filteredItems(){return this.keyboardNavItems.filter(e=>!Ore(e))}get selectedItems(){return this._selectedItems}set selectedItems(e){const i=this._selectedItems;e!==i&&(this._selectedItems=e,this.selectedItemsHandler())}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async reposition(e=!1){const{floatingEl:i,referenceEl:r,placement:n,overlayPositioning:s,filteredFlipPlacements:o}=this;return EO(this,{floatingEl:i,referenceEl:r,overlayPositioning:s,placement:n,flipPlacements:o,type:"menu"},e)}async setFocus(){var e;await pr(this),(e=this.textInput.value)==null||e.focus(),this.activeChipIndex=-1,this.activeItemIndex=-1}connectedCallback(){var e;super.connectedCallback(),rf(this),g1(this),this.internalValueChangeFlag=!0,this.value=this.getValue(),this.internalValueChangeFlag=!1,(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),wl(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("maxItems")&&(this.hasUpdated||this.maxItems!==0)&&this.setMaxScrollerHeight(),e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")&&this.reposition(!0),(e.has("selectionMode")||e.has("scale"))&&this.updateItems(),e.has("flipPlacements")&&this.flipPlacementsHandler()}updated(){this.el.offsetHeight!==this.inputHeight&&(this.reposition(!0),this.inputHeight=this.el.offsetHeight),Gr(this),this.refreshSelectionDisplay()}loaded(){oY(this,this.getValue()),wl(this),this.updateItems(),this.filterItems(this.filterText,!1,!1)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),$b(this),v1(this),sC(this)}emitComboboxChange(){this.calciteComboboxChange.emit()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","shortHeading","textLabel"]}get showingInlineIcon(){const{placeholderIcon:e,selectionMode:i,selectedItems:r,open:n}=this,s=r[0],o=s==null?void 0:s.icon,a=s$(i);return!n&&s?!!o&&a:!!e&&(!s||a)}filterTextChange(e){this.updateActiveItemIndex(-1),this.filterItems(e,!0)}openHandler(){y1(this),!this.disabled&&this.setMaxScrollerHeight()}handleDisabledChange(e){e||(this.open=!1)}valueHandler(e){this.internalValueChangeFlag||(this.getItems().forEach(i=>{i.selected=Array.isArray(e)?e.includes(i.value):e===i.value}),this.updateItems())}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}selectedItemsHandler(){this.internalValueChangeFlag=!0,this.value=this.getValue(),this.internalValueChangeFlag=!1}async documentClickHandler(e){this.disabled||e.composedPath().includes(this.el)||(await this.componentOnReady(),!this.allowCustomValues&&this.filterText&&(this.clearInputValue(),this.filterItems(""),this.updateActiveItemIndex(-1)),this.allowCustomValues&&this.filterText.trim().length&&this.addCustomChip(this.filterText),this.open=!1)}handleSelectAll(e){e&&this.toggleSelectAll(),this.allSelected&&this.selectedItems.forEach(i=>{const r=this.referenceEl.querySelector(`#${vM}${i.guid}`);r&&this.hideChip(r)})}calciteComboboxItemChangeHandler(e){if(this.ignoreSelectedEventsFlag)return;const i=e.target,r=e.composedPath().includes(this.selectAllComboboxItemReferenceEl);this.selectAllEnabled&&this.handleSelectAll(r);const n=this.filteredItems.indexOf(i);this.updateActiveItemIndex(n),this.toggleSelection(i,i.selected),this.selectedItems=this.getSelectedItems()}calciteInternalComboboxItemChangeHandler(e){e.stopPropagation(),this.hasUpdated&&this.updateItems()}clearValue(){this.ignoreSelectedEventsFlag=!0,this.items.forEach(e=>e.selected=!1),this.ignoreSelectedEventsFlag=!1,this.selectedItems=[],this.emitComboboxChange(),this.open=!1,this.updateActiveItemIndex(-1),this.resetText(),this.filterItems(""),this.setFocus()}clearInputValue(){this.textInput.value.value="",this.filterText=""}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?tY(i,e):null}getValue(){const e=this.selectedItems.map(i=>{var r;return(r=i.value)==null?void 0:r.toString()});return e.length?e.length>1?e:e[0]:""}comboboxInViewport(){const e=this.el.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}toggleSelectAll(){const e=!this.allSelected;this.selectedItems=this.items.filter(i=>(i.selected=e,e)),this.emitComboboxChange()}keyDownHandler(e){if(this.readOnly)return;const{key:i}=e;switch(i){case"Tab":this.activeChipIndex=-1,this.activeItemIndex=-1,this.allowCustomValues&&this.filterText?(this.addCustomChip(this.filterText,!0),e.preventDefault()):this.open?(this.open=!1,e.preventDefault()):!this.allowCustomValues&&this.filterText&&(this.clearInputValue(),this.filterItems(""),this.updateActiveItemIndex(-1));break;case"ArrowLeft":(this.activeChipIndex!==-1||this.textInput.value.selectionStart===0)&&(this.previousChip(),e.preventDefault());break;case"ArrowRight":this.activeChipIndex!==-1&&(this.nextChip(),e.preventDefault());break;case"ArrowUp":this.filteredItems.length&&(e.preventDefault(),this.open&&this.shiftActiveItemIndex(-1),this.scrollToActiveOrSelectedItem(),this.comboboxInViewport()||this.el.scrollIntoView()),this.scrollToActiveOrSelectedItem();break;case"ArrowDown":this.filteredItems.length&&(e.preventDefault(),this.open?this.shiftActiveItemIndex(1):(this.open=!0,this.ensureRecentSelectedItemIsActive()),this.scrollToActiveOrSelectedItem(),this.comboboxInViewport()||this.el.scrollIntoView());break;case" ":!this.textInput.value.value&&!e.defaultPrevented&&(this.open||(this.open=!0,this.shiftActiveItemIndex(1)),e.preventDefault());break;case"Home":if(!this.open)return;e.preventDefault(),this.updateActiveItemIndex(0),this.scrollToActiveOrSelectedItem(),this.comboboxInViewport()||this.el.scrollIntoView();break;case"End":if(!this.open)return;e.preventDefault(),this.updateActiveItemIndex(this.filteredItems.length-1),this.scrollToActiveOrSelectedItem(),this.comboboxInViewport()||this.el.scrollIntoView();break;case"Escape":!this.clearDisabled&&!this.open&&this.clearValue(),this.open=!1,e.preventDefault();break;case"Enter":if(this.open&&this.activeItemIndex>-1){const r=this.filteredItems[this.activeItemIndex];this.toggleSelection(r,!r.selected),e.preventDefault(),this.selectAllEnabled&&this.handleSelectAll(r===this.selectAllComboboxItemReferenceEl)}else this.activeChipIndex>-1?(this.removeActiveChip(),e.preventDefault()):this.allowCustomValues&&this.filterText?(this.addCustomChip(this.filterText,!0),e.preventDefault()):e.defaultPrevented||kO(this)&&e.preventDefault();break;case"Delete":case"Backspace":{if(this.selectionDisplay==="single"||this.selectionDisplay==="fit"&&this.selectedHiddenChipsCount>0)return;this.activeChipIndex>-1?(e.preventDefault(),this.removeActiveChip()):!this.filterText&&this.isMulti()&&(e.preventDefault(),this.removeLastChip());break}}}onBeforeOpen(){this.scrollToActiveOrSelectedItem(),this.calciteComboboxBeforeOpen.emit()}onOpen(){this.scrollToActiveOrSelectedItem(!0),this.calciteComboboxOpen.emit()}onBeforeClose(){this.calciteComboboxBeforeClose.emit()}onClose(){this.calciteComboboxClose.emit(),CO(this)}async setMaxScrollerHeight(){const{listContainerEl:e,open:i,referenceEl:r}=this;if(!e||!i)return;await this.reposition(!0);const n=this.getMaxScrollerHeight();e.style.maxBlockSize=n>0?`${n}px`:"",e.style.inlineSize=`${r.clientWidth}px`,await this.reposition(!0)}calciteChipCloseHandler(e){this.open=!1;const i=this.items.find(r=>r===e);i&&this.toggleSelection(i,!1),this.calciteComboboxChipClose.emit()}clickHandler(e){if(this.readOnly)return;const i=e.composedPath();if(i.some(r=>r.tagName==="CALCITE-CHIP")){this.open=!1,e.preventDefault();return}if(i.some(r=>{var n;return(n=r.classList)==null?void 0:n.contains(tZ.button)})){this.clearValue(),e.preventDefault();return}this.open=!this.open,this.ensureRecentSelectedItemIsActive()}ensureRecentSelectedItemIsActive(){const{selectedItems:e}=this,i=e.length===0?0:this.items.indexOf(e[e.length-1]);this.updateActiveItemIndex(i)}hideChip(e){e.classList.add(Wr.chipInvisible)}showChip(e){e.classList.remove(Wr.chipInvisible)}refreshChipDisplay({chipEls:e,availableHorizontalChipElSpace:i,chipContainerElGap:r}){e.forEach(n=>{if(!n.selected)this.hideChip(n);else{const s=jL(n);if(s&&s<i){i-=s+r,this.showChip(n);return}}this.hideChip(n)})}async refreshSelectionDisplay(){if(this.componentOnReady(),s$(this.selectionMode)||!this.textInput.value)return;const{allSelectedIndicatorChipEl:e,chipContainerEl:i,selectionDisplay:r,placeholder:n,selectedIndicatorChipEl:s,textInput:{value:o}}=this,a=parseInt(getComputedStyle(i).gap.replace("px","")),l=jL(i),{fontSize:c,fontFamily:h}=getComputedStyle(o),y=(NLe(n,`${c} ${h}`)||parseInt(I_t))+a,v=jL(e),w=jL(s),x=Math.max(v,w);if(this.setCompactSelectionDisplay({chipContainerElGap:a,chipContainerElWidth:l,inputWidth:y,largestSelectedIndicatorChipWidth:x}),this.allSelected&&this.selectAllEnabled&&this.selectedItems.forEach(S=>{const C=this.referenceEl.querySelector(`#${vM}${S.guid}`);C&&this.hideChip(C)}),this.indeterminate&&this.selectedItems.forEach(S=>{const C=this.referenceEl.querySelector(`#${vM}${S.guid}`);C&&this.showChip(C)}),r==="fit"){const S=Array.from(this.el.shadowRoot.querySelectorAll("calcite-chip")).filter(k=>k.closable),C=Math.round(l-((this.selectedHiddenChipsCount>0?w:0)+a+y+a));this.refreshChipDisplay({availableHorizontalChipElSpace:C,chipContainerElGap:a,chipEls:S}),this.setVisibleAndHiddenChips(S)}}setFloatingEl(e){this.floatingEl=e,wl(this)}setCompactSelectionDisplay({chipContainerElGap:e,chipContainerElWidth:i,inputWidth:r,largestSelectedIndicatorChipWidth:n}){const s=Math.round(n+e+r);(!this.maxCompactBreakpoint||this.maxCompactBreakpoint<s)&&(this.maxCompactBreakpoint=s),this.compactSelectionDisplay=i<this.maxCompactBreakpoint}setContainerEl(e){var i;e&&((i=this.resizeObserver)==null||i.observe(e),this.listContainerEl=e,this.transitionEl=e)}setChipContainerEl(e){var i;e&&((i=this.resizeObserver)==null||i.observe(e)),this.chipContainerEl=e}setReferenceEl(e){this.referenceEl=e,wl(this)}setSelectAllComboboxItemReferenceEl(e){this.selectAllComboboxItemReferenceEl=e}setAllSelectedIndicatorChipEl(e){this.allSelectedIndicatorChipEl=e}setSelectedIndicatorChipEl(e){this.selectedIndicatorChipEl=e}setVisibleAndHiddenChips(e){let i=0;e.forEach(n=>{n.selected&&!n.classList.contains(Wr.chipInvisible)&&i++}),i!==this.selectedVisibleChipsCount&&(this.selectedVisibleChipsCount=i);const r=this.getSelectedItems().length-i;r!==this.selectedHiddenChipsCount&&(this.selectedHiddenChipsCount=r)}getMaxScrollerHeight(){const i=[...this.groupItems,...this.getItems(!0)].filter(o=>!Ore(o)),{maxItems:r}=this;let n=0,s=0;return i.length>=r&&i.forEach(o=>{if(n<r){const a=this.calculateScrollerHeight(o);s+=a,n+=1}}),s}calculateScrollerHeight(e){if(!e)return 0;const i=e.getBoundingClientRect().height,r=`:scope > ${_5}, :scope > ${rO}`,n=Array.from(e.querySelectorAll(r)).reduce((s,o)=>s+o.getBoundingClientRect().height,0);return i-n}inputHandler(e){const i=e.target.value;this.filterText=i}getItemsAndGroups(){return[...this.groupItems,...this.items]}toggleSelection(e,i){!e||this.selectionMode==="single-persist"&&e.selected&&e.value===this.value&&!i||(this.isMulti()?this.handleMultiSelection(e,i):this.handleSingleSelection(e,i))}handleMultiSelection(e,i){e.selected=i,this.updateAncestors(e),this.selectedItems=this.getSelectedItems(),this.emitComboboxChange(),this.resetText(),this.filterItems("")}handleSingleSelection(e,i){this.ignoreSelectedEventsFlag=!0,this.items.forEach(r=>r.selected=r===e?i:!1),this.ignoreSelectedEventsFlag=!1,this.selectedItems=this.getSelectedItems(),this.emitComboboxChange(),this.textInput.value&&(this.textInput.value.value=E3(e)),this.open=!1,this.updateActiveItemIndex(-1),this.resetText(),this.filterItems("")}updateAncestors(e){if(this.selectionMode!=="ancestors")return;const i=efe(e),r=N_t(e);e.selected?i.forEach(n=>{n.selected=!0}):(r.forEach(n=>n.selected=!1),[...i].forEach(n=>{tfe(n)||(n.selected=!1)}))}updateItems(){this.items=this.getItems(),this.groupItems=this.getGroupItems(),this.data=this.getData(),this.groupData=this.getGroupData(),this.updateItemProps(),this.selectedItems=this.getSelectedItems()}updateItemProps(){this.getItems(!0).forEach(e=>{e.selectionMode=this.selectionMode,e.scale=this.scale}),this.groupItems.forEach(e=>e.scale=this.scale),this.allowCustomValues||this.setMaxScrollerHeight(),this.groupItems.forEach((e,i,r)=>{i===0&&(e.afterEmptyGroup=!1);const n=r[i+1];n&&(n.afterEmptyGroup=e.children.length===0)})}getData(){return this.items.map(e=>({description:e.description,filterDisabled:e.filterDisabled,label:e.heading,metadata:e.metadata,shortHeading:e.shortHeading,textLabel:e.textLabel,el:e}))}getGroupData(){return this.groupItems.map(e=>({label:e.label,el:e}))}resetText(){this.textInput.value&&(this.textInput.value.value=""),this.filterText=""}getItems(e=!1){return Array.from(this.el.querySelectorAll(_5)).filter(r=>e||!r.disabled)}getGroupItems(){return Array.from(this.el.querySelectorAll(rO))}addCustomChip(e,i){const r=this.items.find(n=>(n.heading||n.textLabel)===e);if(r)this.toggleSelection(r,!0);else{const n=document.createElement("calcite-combobox-item");n.value=e,n.heading=e,this.el.prepend(n),this.updateItems(),this.toggleSelection(n,!0),this.open=!0,i&&this.setFocus()}}removeActiveChip(){this.toggleSelection(this.selectedItems[this.activeChipIndex],!1),this.setFocus()}removeLastChip(){this.toggleSelection(this.selectedItems[this.selectedItems.length-1],!1),this.setFocus()}previousChip(){const e=this.selectedItems.length-1,i=this.activeChipIndex;this.activeChipIndex=i===-1?e:Math.max(i-1,0),this.updateActiveItemIndex(-1),this.focusChip()}nextChip(){const e=this.selectedItems.length-1,i=this.activeChipIndex+1;i>e?(this.activeChipIndex=-1,this.setFocus()):(this.activeChipIndex=i,this.focusChip()),this.updateActiveItemIndex(-1)}focusChip(){var r;const e=(r=this.selectedItems[this.activeChipIndex])==null?void 0:r.guid,i=e?this.referenceEl.querySelector(`#${vM}${e}`):null;i==null||i.setFocus()}scrollToActiveOrSelectedItem(e=!1){var l;const i=e&&((l=this.selectedItems)!=null&&l.length)?this.selectedItems[0]:this.filteredItems[this.activeItemIndex];if(!i)return;i.scrollIntoView({block:"nearest"});const r=this.selectAllComboboxItemReferenceEl,n=(r==null?void 0:r.offsetHeight)||0,s=this.listContainerEl,o=i.getBoundingClientRect(),a=s.getBoundingClientRect();o.top<a.top+n&&(s.scrollTop-=a.top+n-o.top)}shiftActiveItemIndex(e){const{length:i}=this.filteredItems,r=(this.activeItemIndex+i+e)%i;this.updateActiveItemIndex(r),this.scrollToActiveOrSelectedItem()}updateActiveItemIndex(e){this.activeItemIndex=e;let i=null;this.filteredItems.forEach((r,n)=>{n===e?(r.active=!0,i=`${rfe}${r.guid}`):r.active=!1}),this.activeDescendant=i,this.activeItemIndex>-1&&(this.activeChipIndex=-1)}isMulti(){return!s$(this.selectionMode)}comboboxFocusHandler(){var e;this.disabled||(e=this.textInput.value)==null||e.focus()}renderChips(){const{activeChipIndex:e,readOnly:i,scale:r,selectionMode:n,messages:s}=this;return this.selectAllEnabled&&this.allSelected?null:this.selectedItems.map((o,a)=>{const l={[Wr.chip]:!0},c=[...efe(o)].reverse(),h=E3(o),m=[...c,o].map(v=>E3(v)),y=n!=="ancestors"?h:m.join(" / ");return nt(h,q`<calcite-chip .appearance=${i?"outline":"solid"} class=${ne(l)} .closable=${!i} data-test-id=${`chip-${a}`} .icon=${o.icon} .iconFlipRtl=${o.iconFlipRtl} id=${(o.guid?`${vM}${o.guid}`:null)??Ge} .label=${y} .messageOverrides=${{dismissLabel:s.removeTag}} @focusin=${()=>this.activeChipIndex=a} @calciteChipClose=${()=>this.calciteChipCloseHandler(o)} .scale=${r} .selected=${o.selected} .tabIndex=${e===a?0:-1} title=${y??Ge} .value=${o.value}>${y}</calcite-chip>`)})}renderAllSelectedIndicatorChip(){const{compactSelectionDisplay:e,scale:i,selectedVisibleChipsCount:r,setAllSelectedIndicatorChipEl:n}=this,s=e?this.messages.all:this.messages.allSelected;return q`<calcite-chip class=${ne({chip:!0,[Wr.chipInvisible]:!(this.allSelected&&!r),[Wr.allSelected]:!0})} .label=${s} .scale=${i} title=${s??Ge} value ${yt(n)}>${s}</calcite-chip>`}renderSelectedIndicatorChip(){const{compactSelectionDisplay:e,selectionDisplay:i,getSelectedItems:r,scale:n,selectedHiddenChipsCount:s,selectedVisibleChipsCount:o,setSelectedIndicatorChipEl:a}=this;let l,c;if(e)l=!0;else if(i==="single"){const h=r().length;this.allSelected?l=!0:h>0?l=!1:l=!0,c=`${h} ${this.messages.selected}`}else i==="fit"&&(l=!!(this.allSelected&&o===0||s===0),c=o>0?`+${s}`:`${s} ${this.messages.selected}`);return q`<calcite-chip class=${ne({chip:!0,[Wr.chipInvisible]:l})} .label=${c} .scale=${n} title=${c??Ge} value ${yt(a)}>${c}</calcite-chip>`}renderSelectedIndicatorChipCompact(){const{compactSelectionDisplay:e,selectionDisplay:i,getSelectedItems:r,scale:n,selectedHiddenChipsCount:s}=this;let o,a;if(e){const l=r().length;this.allSelected?o=!0:i==="fit"?(o=!(s>0),a=`${s||0}`):i==="single"&&(o=!(l>0),a=`${l}`)}else o=!0;return q`<calcite-chip class=${ne({chip:!0,[Wr.chipInvisible]:o})} .label=${a} .scale=${n} title=${a??Ge} value>${a}</calcite-chip>`}renderInput(){const{guid:e,disabled:i,placeholder:r,selectionMode:n,selectedItems:s,open:o}=this,a=s$(n),l=s[0],c=!o&&a&&!!l&&!this.filterText;return q`<span class=${ne({"input-wrap":!0,"input-wrap--single":a})}>${c&&nt("label",q`<span class=${ne({[Wr.label]:!0,[Wr.labelIcon]:!!(l!=null&&l.icon)})}>${E3(l)}</span>`)||""}${nt("input",q`<input aria-activedescendant=${this.activeDescendant??Ge} aria-controls=${`${aG}${e}`} aria-errormessage=${Qpe.validationMessage} aria-owns=${`${aG}${e}`} aria-autocomplete=list .ariaExpanded=${o} aria-haspopup=listbox .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ub(this)} class=${ne({[Wr.input]:!0,"input--single":!0,[Wr.inputHidden]:c,"input--icon":this.showingInlineIcon&&!!this.placeholderIcon})} data-test-id=input .disabled=${i} .id=${`${sfe}${e}`} @focus=${this.comboboxFocusHandler} @input=${this.inputHandler} placeholder=${r??Ge} .readOnly=${this.readOnly} role=combobox .tabIndex=${this.activeChipIndex===-1?0:-1} type=text .value=${kN(this.filterText??"")} ${yt(this.textInput)}>`)}</span>`}renderListBoxOptions(){const e=this.filteredItems.map(i=>q`<li .ariaLabel=${i.label} .ariaSelected=${i.selected} id=${(i.guid?`${rfe}${i.guid}`:null)??Ge} role=option tabindex=-1>${i.heading||i.textLabel}</li>`);if(this.selectAllEnabled&&this.selectionMode!=="single"&&this.selectionMode!=="single-persist"){const i=q`<li .ariaLabel=${this.messages.selectAll} .ariaSelected=${this.allSelected} .id=${`${this.guid}-select-all-enabled-screen-reader`} role=option tabindex=-1>${this.messages.selectAll}</li>`;i&&e.unshift(i)}return e}renderFloatingUIContainer(){const{setFloatingEl:e,setContainerEl:i,open:r,scale:n}=this,s={[Wr.listContainer]:!0,[Up.animation]:!0,[Up.animationActive]:r};return q`<div aria-hidden=true class=${ne(Wr.floatingUIContainer)} ${yt(e)}><div class=${ne(s)} ${yt(i)}><ul class=${ne({list:!0,"list--hide":!r})}>${this.selectAllEnabled&&this.selectionMode!=="single"&&this.selectionMode!=="single-persist"&&q`<calcite-combobox-item class=${ne(Wr.selectAll)} .id=${`${this.guid}-select-all-enabled-interactive`} .indeterminate=${this.indeterminate} .label=${this.messages.selectAll} .scale=${n} .selected=${this.allSelected} tabindex=-1 text-label=${this.messages.selectAll??Ge} value=select-all ${yt(this.setSelectAllComboboxItemReferenceEl)}></calcite-combobox-item>`||""}<slot></slot></ul></div></div>`}renderSelectedOrPlaceholderIcon(){const{open:e,placeholderIcon:i,placeholderIconFlipRtl:r,selectedItems:n}=this,s=n[0],o=s==null?void 0:s.icon,a=i&&(e||!s);return this.showingInlineIcon&&nt("selected-placeholder-icon",q`<span class="icon-start"><calcite-icon class=${ne({[Wr.selectedIcon]:!a,[Wr.placeholderIcon]:a})} .flipRtl=${a?r:s.iconFlipRtl} .icon=${a?i:o} .scale=${Fi(this.scale)}></calcite-icon></span>`)||""}renderChevronIcon(){const{open:e}=this;return nt("chevron",q`<span class="icon-end"><calcite-icon class=${ne(Wr.icon)} .icon=${e?"chevron-up":"chevron-down"} .scale=${Fi(this.scale)}></calcite-icon></span>`)}render(){var m;const{selectionDisplay:e,guid:i,label:r,open:n,readOnly:s}=this,o=s$(this.selectionMode),a=e==="all",l=e==="single",c=!o&&e==="fit",h=!this.clearDisabled&&((m=this.value)==null?void 0:m.length)>0;return Hr({disabled:this.disabled,children:q`<div aria-live=polite class=${ne({[Wr.wrapper]:!0,[Wr.wrapperSingle]:o||!this.selectedItems.length,[Wr.wrapperActive]:n})} @click=${this.clickHandler} @keydown=${this.keyDownHandler} ${yt(this.setReferenceEl)}>${this.renderSelectedOrPlaceholderIcon()}${nt("grid",q`<div class=${ne({"grid-input":!0,[Wr.selectionDisplayFit]:c,[Wr.selectionDisplaySingle]:l})} ${yt(this.setChipContainerEl)}>${!o&&!l&&this.renderChips()||""}${!o&&!l&&this.selectAllEnabled&&this.renderAllSelectedIndicatorChip()||""}${!o&&!a&&[this.renderSelectedIndicatorChip(),this.renderSelectedIndicatorChipCompact(),this.renderAllSelectedIndicatorChip()]||""}<label class=${ne(Wr.screenReadersOnly)} .htmlFor=${`${sfe}${i}`} .id=${`${nfe}${i}`}>${r}</label>${this.renderInput()}</div>`)}${!s&&h?nt("close-button",zMe({disabled:this.disabled,label:this.messages.clear,ref:this.closeButtonEl,scale:this.scale})):null}${!s&&this.renderChevronIcon()||""}</div><ul aria-labelledby=${`${nfe}${i}`} aria-multiselectable=true class=${ne(Wr.screenReadersOnly)} .id=${`${aG}${i}`} role=listbox tabindex=-1>${this.renderListBoxOptions()}</ul>${this.renderFloatingUIContainer()}${b1({component:this})}${this.validationMessage&&this.status==="invalid"?AO({icon:this.validationIcon,id:Qpe.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};fU.properties={activeChipIndex:[16,{},{state:!0}],activeDescendant:[16,{},{state:!0}],activeItemIndex:[16,{},{state:!0}],compactSelectionDisplay:[16,{},{state:!0}],selectedHiddenChipsCount:[16,{},{state:!0}],selectedVisibleChipsCount:[16,{},{state:!0}],selectAllComboboxItemReferenceEl:[16,{},{state:!0}],items:[16,{},{state:!0}],allSelected:[16,{},{state:!0}],indeterminate:[16,{},{state:!0}],keyboardNavItems:[16,{},{state:!0}],allowCustomValues:[7,{},{reflect:!0,type:Boolean}],clearDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],filterText:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filteredItems:[32,{},{attribute:!1,readOnly:!0}],flipPlacements:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],label:1,maxItems:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placeholder:1,placeholderIcon:[3,{},{reflect:!0}],placeholderIconFlipRtl:[7,{},{reflect:!0,type:Boolean}],readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selectAllEnabled:[7,{},{reflect:!0,type:Boolean}],selectedItems:[0,{},{attribute:!1}],selectionDisplay:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:wu},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},fU.styles=j_t;let oZ=fU;Xt("calcite-combobox",oZ);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */var L_;let V_t=(L_=class extends qi{constructor(){super(...arguments),this._formats=[]}loaded(){this.manager.onLifecycle(()=>[Le(()=>{var e;return[this.viewModel.templateOptions.format,(e=this.viewModel.templatesInfo)==null?void 0:e.format]},()=>{var r;const e=this.viewModel.templatesInfo;if(!e)return;if(this._formats.length!==e.format.choiceList.length){const n=[...y_t.values()];this._formats=e.format.choiceList.map(s=>{const o=n.find(a=>new RegExp(`\\b${a}\\b`,"iu").test(s))??s;return{value:o,label:s===o?s.toUpperCase():s}}).sort((s,o)=>s.label.localeCompare(o.label))}const i=this._formats.some(({value:n})=>new RegExp(`\\b${n}\\b`,"iu").test(this.viewModel.templateOptions.format));if(e.format.defaultValue&&!i){const n=(r=this._formats.find(({value:s})=>new RegExp(`\\b${s}\\b`,"iu").test(e.format.defaultValue)))==null?void 0:r.value;n&&(this.viewModel.templateOptions.format=n);return}},{initial:!0})])}render(){return q`<div><calcite-label>${this.messages.fileFormatTitle}<calcite-combobox clear-disabled .label=${this.messages.formatDefaultOption} max-items=6 .placeholder=${this.messages.formatDefaultOption} selection-mode=single-persist @calciteComboboxChange=${({currentTarget:e})=>{var r;const i=(r=e.selectedItems[0])==null?void 0:r.value;this.viewModel.templateOptions.format=i??"pdf"}}>${this._formats.map(({value:e,label:i},r)=>nt(`file-format-${r}`,q`<calcite-combobox-item .heading=${i} .selected=${e===this.viewModel.templateOptions.format} .value=${e}></calcite-combobox-item>`))}</calcite-combobox></calcite-label></div>`}},L_.properties={_formats:16,viewModel:0,messages:0},L_.shadowRootOptions=Zn,L_);or("arcgis-print-format-select",V_t);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const ofe={toggle:"toggle",check:"check-svg"},B_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .check-svg,:host([scale=s]) .toggle{inline-size:var(--calcite-checkbox-size, .75rem);block-size:var(--calcite-checkbox-size, .75rem)}:host([scale=m]) .check-svg,:host([scale=m]) .toggle{inline-size:var(--calcite-checkbox-size, var(--calcite-font-size--1));block-size:var(--calcite-checkbox-size, var(--calcite-font-size--1))}:host([scale=l]) .check-svg,:host([scale=l]) .toggle{inline-size:var(--calcite-checkbox-size, 1rem);block-size:var(--calcite-checkbox-size, 1rem)}:host{position:relative;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}:host .check-svg{pointer-events:none;box-sizing:border-box;display:block;overflow:hidden;background-color:var(--calcite-color-foreground-1);fill:currentColor;stroke:currentColor;stroke-width:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;box-shadow:inset 0 0 0 1px var(--calcite-checkbox-border-color, var(--calcite-color-border-input));color:var(--calcite-checkbox-icon-color, var(--calcite-color-background))}:host([status=invalid]:not([checked])) .check-svg{box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger)}:host([status=invalid]:not([checked])) .toggle:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([checked]) .check-svg,:host([indeterminate]) .check-svg{background-color:var(--calcite-color-brand);box-shadow:inset 0 0 0 1px var(--calcite-color-brand)}:host([hovered]) .toggle .check-svg,:host .toggle:hover .check-svg{box-shadow:inset 0 0 0 2px var(--calcite-checkbox-border-color-hover, var(--calcite-color-brand))}.toggle{position:relative;outline-color:transparent}.toggle:active,.toggle:focus,.toggle:focus-visible{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:after,.toggle:before{inset-block-start:50%;inset-inline-start:50%;min-block-size:1.5rem;min-inline-size:1.5rem;position:absolute}.toggle:not(.calcite--rtl):after{content:"";transform:translate(-50%) translateY(-50%)}.toggle.calcite--rtl:before{content:"";transform:translate(50%) translateY(-50%)}@media (forced-colors: active){.check-svg{border:1px solid currentColor}}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,mU=class mU extends Yt{constructor(){super(),this.checkedPath="M5.5 12L2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637z",this.indeterminatePath="M13 8v1H3V8z",this.onLabelClick=()=>{this.toggle()},this.toggleEl=Tn(),this.checked=!1,this.disabled=!1,this.hovered=!1,this.indeterminate=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteCheckboxChange=Ne({cancelable:!1}),this.calciteInternalCheckboxBlur=Ne({cancelable:!1}),this.calciteInternalCheckboxFocus=Ne({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}async setFocus(){var e;await pr(this),(e=this.toggleEl.value)==null||e.focus()}connectedCallback(){super.connectedCallback(),rf(this),g1(this)}updated(){Gr(this)}disconnectedCallback(){super.disconnectedCallback(),$b(this),v1(this)}syncHiddenFormInput(e){e.type="checkbox"}getPath(){return this.indeterminate?this.indeterminatePath:this.checked?this.checkedPath:""}toggle(){this.disabled||(this.checked=!this.checked,this.setFocus(),this.indeterminate=!1,this.calciteCheckboxChange.emit())}keyDownHandler(e){oC(e.key)&&(this.toggle(),e.preventDefault())}clickHandler(){this.toggle()}onToggleBlur(){this.calciteInternalCheckboxBlur.emit(!1)}onToggleFocus(){this.calciteInternalCheckboxFocus.emit(!0)}render(){const e=ca(this.el)==="rtl";return Hr({disabled:this.disabled,children:q`<div .ariaChecked=${this.checked} .ariaLabel=${ub(this)} class=${ne({[ofe.toggle]:!0,[lu.rtl]:e})} @blur=${this.onToggleBlur} @focus=${this.onToggleFocus} role=checkbox tabindex=${(this.disabled?void 0:0)??tn} ${yt(this.toggleEl)}><svg aria-hidden=true class=${ne(ofe.check)} viewBox="0 0 16 16">${yE`<path d=${this.getPath()??tn} />`}</svg><slot></slot></div>${b1({component:this})}`})}};mU.properties={checked:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],hovered:[7,{},{reflect:!0,type:Boolean}],indeterminate:[7,{},{reflect:!0,type:Boolean}],label:1,name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],validity:[0,{},{attribute:!1}],value:1},mU.styles=B_t;let aZ=mU;Xt("calcite-checkbox",aZ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const Bo={loader:"loader",clearButton:"clear-button",clearable:"clearable",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},afe={validationMessage:"inputNumberValidationMessage"},G_t={action:"action"},H_t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem;block-size:var(--calcite-input-number-height, 1.5rem)}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:var(--calcite-input-number-height, 1.5rem)}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;block-size:var(--calcite-input-number-height, 2rem)}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:var(--calcite-input-number-height, 2rem)}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;block-size:var(--calcite-input-number-height, 2.75rem)}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:var(--calcite-input-number-height, 2.75rem)}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}input{transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none;position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;font-family:inherit;font-weight:var(--calcite-font-weight-normal);background-color:var(--calcite-input-number-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-number-text-color, var(--calcite-color-text-1));border-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp))}input:placeholder-shown{text-overflow:ellipsis}input{border-width:1px;border-style:solid;border-color:var(--calcite-input-number-border-color, var(--calcite-color-border-input))}input::placeholder,input:-ms-input-placeholder,input::-ms-input-placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-number-placeholder-text-color, var(--calcite-color-text-3))}input:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-number-text-color-focus, var(--calcite-color-text-1))}input[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-number-background-color, var(--calcite-color-background))}input[readonly]:focus{color:var(--calcite-input-number-text-color-focus, var(--calcite-color-text-1))}calcite-icon{color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}input{outline-color:transparent}input:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;outline-color:transparent;border-color:var(--calcite-input-number-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button:hover{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.loader calcite-progress{--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-number-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) input{text-align:start}:host([alignment=end]) input{text-align:end}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-start-width:1px;border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-inline-start-width:0px;border-color:var(--calcite-input-number-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1))}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.number-button-item:disabled{pointer-events:none}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.prefix,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp))}:host([read-only]) .suffix,:host([read-only]) .wrapper:not(.has-suffix) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-number-corner-radius, var(--calcite-corner-radius-sharp))}:host(:not([read-only])[number-button-type=horizontal]) .prefix,:host(:not([read-only])[number-button-type=horizontal]) input,.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,:host .clearable input,:host(:not([read-only])) input,:host .suffix,:host .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host .wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,yU=class yU extends Yt{constructor(){super(),this.actionWrapperEl=Tn(),this.attributeWatch=CU(["autofocus","enterkeyhint","inputmode"],this.handleGlobalAttributesChanged),this.inputWrapperEl=Tn(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setNumberValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=Mn(),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.integer=!1,this.loading=!1,this.localeFormat=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputNumberChange=Ne({cancelable:!1}),this.calciteInputNumberInput=Ne(),this.calciteInternalInputNumberBlur=Ne({cancelable:!1}),this.calciteInternalInputNumberFocus=Ne({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setNumberValue({origin:"reset",value:i}))}async selectText(){var e;(e=this.childNumberEl)==null||e.select()}async setFocus(){var e;await pr(this),(e=this.childNumberEl)==null||e.focus()}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),rf(this),g1(this),this.el.addEventListener(gA,this.onHiddenFormInputInput)}async load(){var e,i;this.maxString=(e=this.max)==null?void 0:e.toString(),this.minString=(i=this.min)==null?void 0:i.toString(),this.requestedIcon=lb({},this.icon,"number"),this.setPreviousEmittedNumberValue(this.value),this.setPreviousNumberValue(this.value),this.warnAboutInvalidNumberValue(this.value),this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedNumberValue=this.value):this.setNumberValue({origin:"connected",value:La(this.value)?this.value:""})}willUpdate(e){var i,r;e.has("max")&&(this.maxString=((i=this.max)==null?void 0:i.toString())||null),e.has("min")&&(this.minString=((r=this.min)==null?void 0:r.toString())||null),e.has("icon")&&(this.requestedIcon=lb({},this.icon,"number")),e.has("messages")&&(wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:!1})}updated(){Gr(this)}disconnectedCallback(){super.disconnectedCallback(),$b(this),v1(this),this.el.removeEventListener(gA,this.onHiddenFormInputInput)}get isClearable(){return this.clearable&&this.value.length>0}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(e==="Infinity"||e==="-Infinity"){this.displayedValue=e,this.previousEmittedNumberValue=e;return}this.setNumberValue({origin:"direct",previousValue:i,value:e==null||e==""?"":La(e)?e:this.previousValue||""}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&kO(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,n){const{value:s}=this;if(s==="Infinity"||s==="-Infinity")return;const o=e==="up"?1:-1,a=this.integer&&this.step!=="any"?Math.round(this.step):this.step,l=a==="any"?1:Math.abs(a||1),h=new K_(s!==""?s:"0").add(`${l*o}`),m=()=>typeof r=="number"&&!isNaN(r)&&h.subtract(`${r}`).isNegative,y=()=>typeof i=="number"&&!isNaN(i)&&!h.subtract(`${i}`).isNegative,v=m()?`${r}`:y()?`${i}`:h.toString();this.setNumberValue({committing:!0,nativeEvent:n,origin:"user",value:v})}clearInputValue(e){this.setNumberValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedNumberValue&&(this.calciteInputNumberChange.emit(),this.setPreviousEmittedNumberValue(this.value))}inputNumberBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputNumberBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperEl.value)||i.includes(this.actionWrapperEl.value)||this.setFocus()}inputNumberFocusHandler(){this.calciteInternalInputNumberFocus.emit()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=wr.delocalize(i);e.inputType==="insertFromPaste"?((!La(r)||this.integer&&(r.includes("e")||r.includes(".")))&&e.preventDefault(),this.setNumberValue({nativeEvent:e,origin:"user",value:Yye(r)}),this.childNumberEl.value=this.displayedValue):this.setNumberValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){e.preventDefault(),this.nudgeNumberValue("down",e);return}const i=[...MO,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===wr.decimal&&!this.integer&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(wr.decimal)===-1))&&(/[eE]/.test(e.key)&&!this.integer&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||e.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat)return;const r=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,s=150;this.incrementOrDecrementNumberValue(e,r,n,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,r,n,i)},s)}nudgeButtonPointerUpHandler(e){AG(e)&&window.clearInterval(this.nudgeNumberValueIntervalId)}nudgeButtonPointerOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}nudgeButtonPointerDownHandler(e){if(!AG(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){ige("number",this,e)}setChildNumberElRef(e){this.childNumberEl=e}setInputNumberValue(e){this.childNumberEl&&(this.childNumberEl.value=e)}setPreviousEmittedNumberValue(e){this.previousEmittedNumberValue=this.normalizeValue(e)}normalizeValue(e){return La(e)?e:""}setPreviousNumberValue(e){this.previousValue=this.normalizeValue(e)}setNumberValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:n,value:s}){var C,k,A;wr.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const o=((C=this.previousValue)==null?void 0:C.length)>s.length||((k=this.value)==null?void 0:k.length)>s.length,a=this.integer?s.replace(/[e.]/g,""):s,l=a.charAt(a.length-1)===".",c=a.charAt(0)==="-",h=a.match(/^-?(0+)\d/),m=l&&o?a:Kye(a),y=s&&!m?La(this.previousValue)?this.previousValue:"":m;let v=wr.localize(y);r!=="connected"&&!l&&(v=Qye(v,y,wr)),l&&o&&(v=`${v}${wr.decimal}`),h&&(v=`${c?v.charAt(0):""}${wr.localize("0").repeat(h[1].length)}${c?v.slice(1):v}`),this.displayedValue=v,this.setPreviousNumberValue(n??this.value),this.previousValueOrigin=r,this.userChangedValue=r==="user"&&this.value!==y;const w=["-","."].includes(y)?"":y;this.value=w;const x=new Set(["e","E",wr.decimal,wr.minusSign,wr.group,...wr.digits]),S=(A=this.childNumberEl)==null?void 0:A.value;if(S){const R=Array.from(S).filter(D=>x.has(D)).join("");R!==S&&this.setInputNumberValue(R)}r==="direct"&&(this.setInputNumberValue(v),this.setPreviousEmittedNumberValue(w)),i&&(this.calciteInputNumberInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=wr.localize(this.previousValue)):e&&this.emitChangeIfUserModified())}inputNumberKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){e&&!La(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=ca(this.el),i=q`<div class=${ne(Bo.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=q`<button .ariaLabel=${this.messages.clear} class=${ne(Bo.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 type=button><calcite-icon icon=x .scale=${Fi(this.scale)}></calcite-icon></button>`,n=q`<calcite-icon class=${ne(Bo.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${Fi(this.scale)}></calcite-icon>`,s=this.numberButtonType==="horizontal",o=q`<button aria-hidden=true class=${ne({[Bo.numberButtonItem]:!0,[Bo.buttonItemHorizontal]:s})} data-adjustment=up .disabled=${this.disabled||this.readOnly} @pointerdown=${this.nudgeButtonPointerDownHandler} @pointerout=${this.nudgeButtonPointerOutHandler} @pointerup=${this.nudgeButtonPointerUpHandler} tabindex=-1 type=button><calcite-icon icon=chevron-up .scale=${Fi(this.scale)}></calcite-icon></button>`,a=q`<button aria-hidden=true class=${ne({[Bo.numberButtonItem]:!0,[Bo.buttonItemHorizontal]:s})} data-adjustment=down .disabled=${this.disabled||this.readOnly} @pointerdown=${this.nudgeButtonPointerDownHandler} @pointerout=${this.nudgeButtonPointerOutHandler} @pointerup=${this.nudgeButtonPointerUpHandler} tabindex=-1 type=button><calcite-icon icon=chevron-down .scale=${Fi(this.scale)}></calcite-icon></button>`,l=q`<div class=${ne(Bo.numberButtonWrapper)}>${o}${a}</div>`,c=q`<div class=${ne(Bo.prefix)}>${this.prefixText}</div>`,h=q`<div class=${ne(Bo.suffix)}>${this.suffixText}</div>`,m=nt("localized-input",q`<input aria-errormessage=${afe.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${ub(this)} autocomplete=${this.autocomplete??Ge} .autofocus=${this.el.autofocus} value=${this.defaultValue??Ge} .disabled=${this.disabled} enterkeyhint=${this.el.enterKeyHint??Ge} inputmode=${this.el.inputMode||"decimal"} maxlength=${this.maxLength??Ge} minlength=${this.minLength??Ge} name=${Ge} @blur=${this.inputNumberBlurHandler} @focus=${this.inputNumberFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputNumberKeyUpHandler} placeholder=${(this.placeholder||"")??Ge} .readOnly=${this.readOnly} type=text .value=${kN(this.displayedValue??"")} ${yt(this.setChildNumberElRef)}>`);return Hr({disabled:this.disabled,children:q`<div class=${ne({[Bo.inputWrapper]:!0,[lu.rtl]:e==="rtl",[Bo.hasSuffix]:this.suffixText,[Bo.hasPrefix]:this.prefixText,[Bo.clearable]:this.isClearable})} ${yt(this.inputWrapperEl)}>${this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${this.prefixText?c:null}<div class=${ne(Bo.wrapper)}>${m}${this.isClearable?r:null}${this.requestedIcon?n:null}${this.loading?i:null}</div><div class=${ne(Bo.actionWrapper)} ${yt(this.actionWrapperEl)}><slot name=${G_t.action}></slot></div>${this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?h:null}${this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${b1({component:this})}</div>${this.validationMessage&&this.status==="invalid"?AO({icon:this.validationIcon,id:afe.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};yU.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:wu},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],integer:[5,{},{type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,validationIcon:[3,{converter:wu},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},yU.styles=H_t;let lZ=yU;Xt("calcite-input-number",lZ);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const q_t=dt`.arcgis-print__scale-input-container{display:flex;align-items:center;padding-bottom:var(--calcite-spacing-md)}.arcgis-print__scale-input-container .arcgis-print__scale-input{flex-grow:1}`,lG="arcgis-print",cG={scaleInfoContainer:`${lG}__scale-info-container`,scaleInputContainer:`${lG}__scale-input-container`,scaleInput:`${lG}__scale-input`};var R_;let W_t=(R_=class extends qi{constructor(){super(...arguments),this._scale=0,this._scaleEnabled=!1}loaded(){this.manager.onLifecycle(()=>[Le(()=>[this.viewModel.templateOptions.scale,this.viewModel.templateOptions.scaleEnabled],()=>{const{scale:e,scaleEnabled:i}=this.viewModel.templateOptions;this._scale=e,this._scaleEnabled=i},{initial:!0}),Le(()=>{var e;return(e=this.viewModel.view)==null?void 0:e.scale},e=>{e&&(!this.viewModel.templateOptions.scaleEnabled||!this.viewModel.templateOptions.scale)&&(this.viewModel.templateOptions.scale=e)},{initial:!0})])}_resetToCurrentScale(){var e;this.viewModel.templateOptions.scale=(e=this.viewModel.view)==null?void 0:e.scale}render(){const{messages:e,_scale:i,_scaleEnabled:r}=this;return q`<div class=${mt(cG.scaleInfoContainer)}><calcite-label layout=inline><calcite-checkbox .checked=${r} @calciteCheckboxChange=${n=>{this.viewModel.templateOptions.scaleEnabled=n.target.checked,this._resetToCurrentScale()}}></calcite-checkbox>${e.scale}</calcite-label><div class=${mt(cG.scaleInputContainer)}><calcite-input-number .ariaLabel=${e.scaleLabel} .ariaValueNow=${`${i}`} class=${mt(cG.scaleInput)} .disabled=${!r} .value=${`${i}`} .max=${Number.MAX_SAFE_INTEGER} @calciteInputNumberInput=${n=>{const s=Number(n.target.value);if(Number.isNaN(s)||s<0||!Number.isFinite(s)){n.target.value=`${i}`;return}this.viewModel.templateOptions.scale=s}}></calcite-input-number><calcite-button appearance=outline .ariaLabel=${e.reset} .disabled=${!r} icon-start=refresh kind=neutral @click=${()=>this._resetToCurrentScale()}></calcite-button></div></div>`}},R_.properties={_scale:16,_scaleEnabled:16,viewModel:0,messages:0},R_.styles=q_t,R_);or("arcgis-print-scale-section",W_t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */var D_;let J_t=(D_=class extends qi{constructor(){super(...arguments),this._dpi=1}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.templateOptions.dpi,e=>this._dpi=e<=0?1:e,{initial:!0})])}_handleDPIChange(e){const i=this.viewModel.templateOptions,r=Number(e.target.value);if(Number.isNaN(r)||r<=0||!Number.isFinite(r)){e.target.value=`${this._dpi}`;return}i.dpi=r}render(){return q`<div><calcite-label>${this.messages.dpi}<calcite-input-number data-input-name=dpi min=1 .value=${`${this._dpi}`} .max=${Number.MAX_SAFE_INTEGER} @calciteInputNumberInput=${this._handleDPIChange}></calcite-input-number></calcite-label></div>`}},D_.properties={_dpi:16,viewModel:0,messages:0},D_.shadowRootOptions=Zn,D_);or("arcgis-print-dpi-input",J_t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const Z_t=dt`.arcgis-print__sr-label{display:flex;gap:var(--calcite-spacing-xs)}.arcgis-print__invalid-wkid-text{color:var(--calcite-color-status-danger);font-size:var(--calcite-font-size--0)}`,lfe="arcgis-print",cfe={srLabel:`${lfe}__sr-label`,invalidWkidText:`${lfe}__invalid-wkid-text`};function Y_t(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3?!0:t.wkt2!=null||t.wkt!=null}function X_t(t){return t==null?t:Math.round(Number.parseFloat(t))}var N_;let K_t=(N_=class extends qi{constructor(){super(...arguments),this._isValidSpatialReference=!0}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.outSpatialReference,e=>{this._outSpatialReference=e??void 0},{initial:!0})])}render(){var r,n;const{messages:e,_outSpatialReference:i}=this;return q`<div><calcite-label><div class=${mt(cfe.srLabel)}>${e.outSpatialReference}<calcite-link href=https://developers.arcgis.com/rest/services-reference/enterprise/using-spatial-references/ target=_blank>(WKID)</calcite-link></div><calcite-input-number data-input-name=outSpatialReference integer number-button-type=none .value=${((n=(r=this._outSpatialReference)==null?void 0:r.wkid)==null?void 0:n.toString())??""} .max=${Number.MAX_SAFE_INTEGER} @calciteInputNumberInput=${({currentTarget:s})=>{const o=X_t(s.value);if(Number.isNaN(o)||o==null||o<=0||!Number.isFinite(o)){s.value=`${(i==null?void 0:i.wkid)??""}`;return}this.viewModel.outSpatialReference=Number.isNaN(o)||o==null?null:new et({wkid:o}),this._isValidSpatialReference=!i||Y_t(i)}}></calcite-input-number>${this._isValidSpatialReference?null:nt(`out-sr-${i==null?void 0:i.wkid}`,q`<div class=${mt(cfe.invalidWkidText)}>${e.invalidWkid}</div>`)}</calcite-label></div>`}},N_.properties={_isValidSpatialReference:16,_outSpatialReference:16,templateOptions:0,viewModel:0,messages:0},N_.styles=Z_t,N_);or("arcgis-print-out-spatial-reference-input",K_t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */var z_;let Q_t=(z_=class extends qi{loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.templateOptions.customTextElements,()=>this.requestUpdate(),{initial:!0})])}render(){const e=this.viewModel.templateOptions.customTextElements;return e?q`<div>${e.map(i=>{const[r,n]=Object.entries(i)[0];return r==="date"?null:q`<calcite-label>${r}<calcite-input .value=${n??""} @calciteInputInput=${s=>{const o=e.find(a=>{const[l]=Object.entries(a)[0];return l===r});o&&(o[r]=s.target.value)}}></calcite-input></calcite-label>`})}</div>`:null}},z_.properties={viewModel:0},z_.shadowRootOptions=Zn,z_);or("arcgis-print-custom-text-elements",Q_t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const e1t=dt`.arcgis-print__advanced-options-container{padding:var(--calcite-spacing-xxs);display:flex;flex-direction:column;gap:var(--calcite-spacing-xs)}`,t1t="arcgis-print",i1t={advancedOptionsContainer:`${t1t}__advanced-options-container`};var F_;let r1t=(F_=class extends qi{constructor(){super(...arguments),this._handles=wP("disconnect")}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.templateOptions.id,e=>{this._handles.removeHandles("template-handle"),this._selectedTemplate=e?this.viewModel.getLayoutTemplateById(e)??void 0:void 0,this._handles.addHandles(Le(()=>{var i,r,n,s,o,a,l,c,h,m,y,v,w,x,S;return[(n=(r=(i=this._selectedTemplate)==null?void 0:i.layoutTemplateInfo)==null?void 0:r.layoutOptions)==null?void 0:n.hasAuthorText,(a=(o=(s=this._selectedTemplate)==null?void 0:s.layoutTemplateInfo)==null?void 0:o.layoutOptions)==null?void 0:a.hasCopyrightText,(h=(c=(l=this._selectedTemplate)==null?void 0:l.layoutTemplateInfo)==null?void 0:c.layoutOptions)==null?void 0:h.hasLegend,(v=(y=(m=this._selectedTemplate)==null?void 0:m.mapSurroundInfoOptions)==null?void 0:y.northArrow)==null?void 0:v.length,(S=(x=(w=this._selectedTemplate)==null?void 0:w.mapSurroundInfoOptions)==null?void 0:x.scaleBar)==null?void 0:S.length]},()=>{var i,r,n,s,o,a,l,c,h,m,y,v,w;this._showAuthorInput=((n=(r=(i=this._selectedTemplate)==null?void 0:i.layoutTemplateInfo)==null?void 0:r.layoutOptions)==null?void 0:n.hasAuthorText)??!0,this._showCopyrightInput=((a=(o=(s=this._selectedTemplate)==null?void 0:s.layoutTemplateInfo)==null?void 0:o.layoutOptions)==null?void 0:a.hasCopyrightText)??!0,this._showLegendInput=((h=(c=(l=this._selectedTemplate)==null?void 0:l.layoutTemplateInfo)==null?void 0:c.layoutOptions)==null?void 0:h.hasLegend)??!0,this._showNorthArrowInput=!!((y=(m=this._selectedTemplate)==null?void 0:m.mapSurroundInfoOptions)!=null&&y.northArrow.length),this._showScaleBarInput=!!((w=(v=this._selectedTemplate)==null?void 0:v.mapSurroundInfoOptions)!=null&&w.scaleBar.length)},{initial:!0}),"template-handle")},{initial:!0})])}render(){return q`<div aria-labelledby=${`${this.el.id}__advancedOptionsForLayout`} class=${mt(i1t.advancedOptionsContainer)}>${this._renderScaleSection()}${this._renderAuthorSection()}${this._renderCopyrightSection()}${this._renderDpiSection()}${this._renderOutSpatialReferenceSection()}${this._renderCustomTextElementSection()}${this._renderLegendSection()}${this._renderNorthArrowSection()}${this._renderScaleBarSection()}</div>`}_renderScaleSection(){return q`<arcgis-print-scale-section .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-scale-section>`}_renderAuthorSection(){return this._showAuthorInput?nt("author-info",q`<div><calcite-label>${this.messages.author}<calcite-input .value=${this.viewModel.templateOptions.author??""} @calciteInputInput=${e=>this.viewModel.templateOptions.author=e.target.value}></calcite-input></calcite-label></div>`):null}_renderCopyrightSection(){return this._showCopyrightInput?nt("copyright-text",q`<div><calcite-label>${this.messages.copyright}<calcite-input .value=${this.viewModel.templateOptions.copyright??""} @calciteInputInput=${e=>this.viewModel.templateOptions.copyright=e.target.value}></calcite-input></calcite-label></div>`):null}_renderDpiSection(){return q`<arcgis-print-dpi-input .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-dpi-input>`}_renderOutSpatialReferenceSection(){return q`<arcgis-print-out-spatial-reference-input .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-out-spatial-reference-input>`}_renderCustomTextElementSection(){return q`<arcgis-print-custom-text-elements .viewModel=${this.viewModel}></arcgis-print-custom-text-elements>`}_renderLegendSection(){return this._showLegendInput?q`<div><calcite-label layout=inline><calcite-checkbox .checked=${!!this.viewModel.templateOptions.legendEnabled} @calciteCheckboxChange=${e=>this.viewModel.templateOptions.legendEnabled=e.target.checked}></calcite-checkbox>${this.messages.legend}</calcite-label></div>`:null}_renderNorthArrowSection(){return this._showNorthArrowInput?q`<div><calcite-label layout=inline><calcite-checkbox .checked=${!!this.viewModel.templateOptions.northArrowEnabled} @calciteCheckboxChange=${e=>this.viewModel.templateOptions.northArrowEnabled=e.target.checked}></calcite-checkbox>${this.messages.northArrow}</calcite-label></div>`:null}_renderScaleBarSection(){return this._showScaleBarInput?q`<div><calcite-label layout=inline><calcite-checkbox .checked=${!!this.viewModel.templateOptions.scaleBarEnabled} @calciteCheckboxChange=${e=>this.viewModel.templateOptions.scaleBarEnabled=e.target.checked}></calcite-checkbox>${this.messages.scaleBar}</calcite-label></div>`:null}},F_.properties={_selectedTemplate:16,_showAuthorInput:16,_showCopyrightInput:16,_showLegendInput:16,_showNorthArrowInput:16,_showScaleBarInput:16,viewModel:0,messages:0},F_.styles=e1t,F_);or("arcgis-print-layout-advanced-options",r1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */var U_;let n1t=(U_=class extends qi{loaded(){this.manager.onLifecycle(()=>[])}async _handlePrintMap(){this.viewModel.export(this.fileName||this.messages.untitled),this.selectExportsTab()}render(){const{messages:e}=this,{layout:i,layoutItem:r,format:n}=this.viewModel.templateOptions,s=this.viewModel.state!=="ready"||!(i||r);return q`<div><calcite-button .ariaLabel=${e.exportDescription} .disabled=${s||!(i||r!=null&&r.id)&&!n} @click=${this._handlePrintMap} scale=l width=full>${e.export}</calcite-button></div>`}},U_.properties={viewModel:0,messages:0,fileName:1,selectExportsTab:0},U_.shadowRootOptions=Zn,U_);or("arcgis-print-export-button",n1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const s1t=dt`.arcgis-print__advanced-options-section{border:1px solid var(--calcite-color-border-1);margin-bottom:var(--calcite-spacing-sm)}.arcgis-print__layout-section{padding:var(--calcite-spacing-sm) var(--calcite-spacing-sm)}.arcgis-print__panel-container{display:flex;flex:1 0;flex-direction:column;gap:var(--calcite-spacing-sm)}`,uG="arcgis-print",C3={advancedOptionsSection:`${uG}__advanced-options-section`,layoutSection:`${uG}__layout-section`,panelContainer:`${uG}__panel-container`};var j_;let o1t=(j_=class extends qi{constructor(){super(...arguments),this._handles=wP("disconnect")}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.viewModel.templateOptions.id,e=>{this._handles.removeHandles("template-handle"),this._selectedTemplate=e?this.viewModel.getLayoutTemplateById(e)??void 0:void 0,this._handles.addHandles(Le(()=>{var i,r,n;return(n=(r=(i=this._selectedTemplate)==null?void 0:i.layoutTemplateInfo)==null?void 0:r.layoutOptions)==null?void 0:n.hasTitleText},()=>{var i,r,n;this._showSelectedTemplateTitleText=((n=(r=(i=this._selectedTemplate)==null?void 0:i.layoutTemplateInfo)==null?void 0:r.layoutOptions)==null?void 0:n.hasTitleText)??!0},{initial:!0}),"template-handle")},{initial:!0})])}render(){return q`<section class=${mt(C3.layoutSection)} role=tabpanel><div class=${mt(C3.panelContainer)}>${this._renderTitleInput()}${this._renderTemplateSelect()}${this._renderFileFormatSection()}${this._renderAdvancedSection()}${this._renderExportButton()}</div></section>`}_renderTitleInput(){if(!this._showSelectedTemplateTitleText)return null;const{title:e,titlePlaceHolder:i}=this.messages;return q`<calcite-label>${e}<calcite-input .placeholder=${i} .value=${this.viewModel.templateOptions.title??""} @calciteInputInput=${r=>{this.viewModel.templateOptions.title=r.currentTarget.value}}></calcite-input></calcite-label>`}_renderTemplateSelect(){return q`<div><calcite-label>${this.messages.template}<arcgis-print-template-select .messages=${this.messages} .viewModel=${this.viewModel} .showTemplateSelector=${this.showTemplateSelector}></arcgis-print-template-select></calcite-label><arcgis-print-preview-input .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-print-preview-input></div>`}_renderFileFormatSection(){return q`<arcgis-print-format-select .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-print-format-select>`}_renderAdvancedSection(){return q`<calcite-block .ariaLabel=${this.messages.advancedOptions} class=${mt(zs(C3.panelContainer,C3.advancedOptionsSection))} collapsible .disabled=${!this._selectedTemplate} .heading=${this.messages.advancedOptions}><arcgis-print-layout-advanced-options .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-layout-advanced-options></calcite-block>`}_renderExportButton(){return q`<arcgis-print-export-button .fileName=${this.viewModel.templateOptions.title??void 0} .messages=${this.messages} .viewModel=${this.viewModel} .selectExportsTab=${this.selectExportsTab}></arcgis-print-export-button>`}},j_.properties={_selectedTemplate:16,_showSelectedTemplateTitleText:16,viewModel:0,messages:0,showTemplateSelector:0,selectExportsTab:0},j_.styles=s1t,j_);or("arcgis-print-layout-panel",o1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const a1t=dt`.arcgis-print__advanced-options-container{padding:var(--calcite-spacing-xxs);display:flex;flex-direction:column;gap:var(--calcite-spacing-xs)}`,l1t="arcgis-print",c1t={advancedOptionsContainer:`${l1t}__advanced-options-container`};var V_;let u1t=(V_=class extends qi{loaded(){this.manager.onLifecycle(()=>[])}render(){return q`<div aria-labelledby=${`${this.el.id}__advancedOptionsForLayout`} class=${mt(c1t.advancedOptionsContainer)}>${this._renderScaleSection()}${this._renderDpiSection()}${this._renderOutSpatialReferenceSection()}${this._renderAttributionSection()}${this._renderCustomTextElementSection()}</div>`}_renderScaleSection(){return q`<arcgis-print-scale-section .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-scale-section>`}_renderDpiSection(){return q`<arcgis-print-dpi-input .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-dpi-input>`}_renderOutSpatialReferenceSection(){return q`<arcgis-print-out-spatial-reference-input .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-out-spatial-reference-input>`}_renderAttributionSection(){return q`<div><calcite-label layout=inline><calcite-checkbox .checked=${!!this.viewModel.templateOptions.attributionEnabled} @calciteCheckboxChange=${e=>this.viewModel.templateOptions.attributionEnabled=e.target.checked}></calcite-checkbox>${this.messages.attribution}</calcite-label></div>`}_renderCustomTextElementSection(){return q`<arcgis-print-custom-text-elements .viewModel=${this.viewModel}></arcgis-print-custom-text-elements>`}},V_.properties={viewModel:0,messages:0},V_.styles=a1t,V_);or("arcgis-print-map-only-advanced-options",u1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const d1t=dt`.arcgis-print__advanced-options-section{border:1px solid var(--calcite-color-border-1);margin-bottom:var(--calcite-spacing-sm)}.arcgis-print__map-only-section{padding:var(--calcite-spacing-sm) var(--calcite-spacing-sm)}.arcgis-print__panel-container{display:flex;flex:1 0;flex-direction:column;gap:var(--calcite-spacing-sm)}.arcgis-print__size-container{--button-width: 32px;display:inline-grid;grid-template-columns:1fr 1fr var(--button-width);column-gap:var(--calcite-spacing-xs);width:100%}.arcgis-print__swap-button{flex:1 0 auto;border:none;color:var(--calcite-color-border-input);align-self:flex-end;margin-bottom:var(--calcite-spacing-md)}.arcgis-print__swap-button calcite-button{width:var(--button-width);height:var(--button-width)}`,bM="arcgis-print",sS={advancedOptionsSection:`${bM}__advanced-options-section`,mapOnlySection:`${bM}__map-only-section`,panelContainer:`${bM}__panel-container`,sizeContainer:`${bM}__size-container`,swapButton:`${bM}__swap-button`};var B_;let h1t=(B_=class extends qi{loaded(){this.manager.onLifecycle(()=>[])}render(){return q`<section class=${mt(sS.mapOnlySection)} role=tabpanel><div class=${mt(sS.panelContainer)}>${this._renderFileNameInput()}${this._renderFileFormatSection()}${this._renderSizeSection()}${this._renderAdvancedSection()}${this._renderExportButton()}</div></section>`}_renderFileNameInput(){const{fileName:e,fileNamePlaceHolder:i}=this.messages;return q`<calcite-label>${e}<calcite-input .placeholder=${i} .value=${this.viewModel.templateOptions.fileName??""} @calciteInputInput=${r=>{this.viewModel.templateOptions.fileName=r.currentTarget.value}}></calcite-input></calcite-label>`}_renderFileFormatSection(){return q`<arcgis-print-format-select .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-print-format-select>`}_renderSizeSection(){return q`<div><div class=${mt(zs(sS.sizeContainer))}><calcite-label>${this.messages.width}<calcite-input-number .value=${`${this.viewModel.templateOptions.width}`} .max=${Number.MAX_SAFE_INTEGER} @calciteInputNumberInput=${e=>{const i=Number(e.target.value);!Number.isNaN(i)&&i>0&&Number.isFinite(i)?this.viewModel.templateOptions.width=i:e.target.value=`${this.viewModel.templateOptions.width}`}}></calcite-input-number></calcite-label><calcite-label>${this.messages.height}<calcite-input-number .value=${`${this.viewModel.templateOptions.height}`} .max=${Number.MAX_SAFE_INTEGER} @calciteInputNumberInput=${e=>{const i=Number(e.target.value);!Number.isNaN(i)&&i>0&&Number.isFinite(i)?this.viewModel.templateOptions.height=i:e.target.value=`${this.viewModel.templateOptions.height}`}}></calcite-input-number></calcite-label><div class=${mt(sS.swapButton)}><calcite-button icon-start=arrow-right-left .label=${this.messages.swap} appearance=transparent kind=neutral @click=${()=>{[this.viewModel.templateOptions.width,this.viewModel.templateOptions.height]=[this.viewModel.templateOptions.height,this.viewModel.templateOptions.width],this.requestUpdate()}}></calcite-button></div></div><arcgis-print-preview-input .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-print-preview-input></div>`}_renderAdvancedSection(){return q`<calcite-block .ariaLabel=${this.messages.advancedOptions} class=${mt(zs(sS.panelContainer,sS.advancedOptionsSection))} collapsible .heading=${this.messages.advancedOptions}><arcgis-print-map-only-advanced-options .messages=${this.messages} .viewModel=${this.viewModel}></arcgis-print-map-only-advanced-options></calcite-block>`}_renderExportButton(){return q`<arcgis-print-export-button .fileName=${this.viewModel.templateOptions.fileName??void 0} .messages=${this.messages} .viewModel=${this.viewModel} .selectExportsTab=${this.selectExportsTab}></arcgis-print-export-button>`}},B_.properties={viewModel:0,messages:0,selectExportsTab:0},B_.styles=d1t,B_);or("arcgis-print-map-only-panel",h1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const p1t=dt`@layer{.arcgis-print__exported-file{display:flex;align-items:center;justify-content:space-between}.arcgis-print__exported-file-link-title,.arcgis-print__exported-file-link-description{word-wrap:break-word;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}}`,dG="arcgis-print",hG={exportedFile:`${dG}__exported-file`,exportedFileLinkTitle:`${dG}__exported-file-link-title`,exportedFileLinkDescription:`${dG}__exported-file-link-description`};function f1t(t){var r;const{state:e,extension:i}=t;switch(e){case"pending":return"spinner";case"error":return"exclamation-mark-circle";default:return(r=i==null?void 0:i.toLowerCase())!=null&&r.includes("pdf")?"file-pdf":"file"}}function ufe(t,e){return!t||t==="all"||!!(e&&t.includes(e))}var eb;let m1t=(eb=class extends qi{constructor(){super(...arguments),this._handleLinkClick=e=>{if(!e||e.state!=="ready"||!e.url)return;const i=e.url,r=document.createElement("a");r.target="_blank",r.href=i,r.rel="noreferrer",r.download=e.formattedName??"";{r.click();return}}}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.exportedLink.state,()=>this.requestUpdate())])}render(){const{messages:e,exportedLink:i}=this,{error:r,state:n}=i;let s;switch(n){case"pending":s=e.pending;break;case"ready":s=e.ready;break;case"error":s=e.errorMessage;break}const o=n==="error"?(r==null?void 0:r.name)==="print-task:cim-symbol-unsupported"?e.exportWebMapCIMError:e.exportWebMapError:"";return q`<calcite-list-item .ariaLabel=${s} title=${o??Ns}>${this._renderExportedLinkItemContent(i,o)}${this._renderExportedLinkItemIcon(i)}${this._renderExportedLinkItemAction(i,o)}</calcite-list-item>${this._renderExportedLinkItemPopover(i)}`}_renderExportedLinkItemPopover(e){const i=this.messages,r=e.formattedName??"",{state:n}=e,s=this.saveAsButtonCallback&&n!=="error"&&ufe(this.allowedFormatsForSaving,e.extension);return n!=="pending"&&s?q`<calcite-popover auto-close label=Popover offset-distance=1 overlay-positioning=fixed pointer-disabled .referenceElement=${`${r}-popover-button`} scale=s><calcite-list label>${e.portalItem?q`<calcite-list-item .label=${i.openItem} @calciteListItemSelect=${()=>{const o=e.portalItem;if(!(o!=null&&o.itemPageUrl))return;const a=document.createElement("a");a.target="_blank",a.href=o.itemPageUrl,a.rel="noreferrer",a.click()}}><calcite-icon icon=launch2 scale=s slot=content-start></calcite-icon></calcite-list-item>`:q`<calcite-list-item .label=${i.saveAs} @calciteListItemSelect=${async()=>{this.saveAsButtonCallback&&(Vp(()=>e.portalItem).then(o=>{o.itemPageUrl&&this.requestUpdate()}),await this.saveAsButtonCallback(e))}}><calcite-icon icon=save scale=s slot=content-start></calcite-icon></calcite-list-item>`}<calcite-list-item label=Delete @calciteListItemSelect=${()=>this.viewModel.exportedLinks.remove(e)}><calcite-icon icon=trash scale=s slot=content-start></calcite-icon></calcite-list-item></calcite-list></calcite-popover>`:null}_renderExportedLinkItemContent(e,i){const r=this.messages,{url:n,state:s}=e,o=e.formattedName??"",a=JFe(n||null,document.location.href);return q`<div class=${mt(hG.exportedFile)} slot=content @click=${()=>this._handleLinkClick(e)}><div><div class=${mt(hG.exportedFileLinkTitle)}>${o}</div><div class=${mt(hG.exportedFileLinkDescription)}>${s==="pending"?r.generatingExport:i||(a?r.ready:r.linkReady)}</div></div>${s==="ready"?q`<calcite-icon .ariaLabel=${`${o}. ${r.linkReady}`} .icon=${a?"download-to":"launch"} scale=s slot=content-end></calcite-icon>`:null}</div>`}_renderExportedLinkItemIcon(e){return e.state==="pending"?q`<calcite-loader inline .label=${this.messages.generatingExport} scale=m slot=content-start></calcite-loader>`:q`<calcite-icon .icon=${f1t(e)} scale=s slot=content-start></calcite-icon>`}_renderExportedLinkItemAction(e,i){const{state:r}=e,n=e.formattedName??"",s=this.saveAsButtonCallback&&r!=="error"&&ufe(this.allowedFormatsForSaving,e.extension);return r!=="pending"?q`<calcite-action .ariaLabel=${i} .icon=${s?"ellipsis":"x"} id=${(s?`${n}-popover-button`:void 0)??Ns} @click=${s?void 0:()=>{this.viewModel.exportedLinks.remove(e)}} slot=actions-end .text=${i}></calcite-action>`:null}},eb.properties={saveAsButtonCallback:0,allowedFormatsForSaving:1,exportedLink:0,viewModel:0,messages:0},eb.styles=p1t,eb.shadowRootOptions=Zn,eb);or("arcgis-print-exported-link",m1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const y1t=dt`.arcgis-print__export-section--centered{text-align:center}.esri-print__panel-container{display:flex;flex:1 0;flex-direction:column;gap:var(--calcite-spacing-sm)}.arcgis-print__exported-files-empty{display:flex;flex-direction:column;align-items:center;padding:var(--calcite-spacing-lg) var(--calcite-spacing-sm);font-size:small}.arcgis-print__export-title{font-weight:700;font-size:var(--calcite-font-size)}`,wM="arcgis-print",_M={exportSection:`${wM}__export-section`,panelContainer:`${wM}__panel-container`,exportedFilesEmpty:`${wM}__exported-files-empty`,exportedFilesTitle:`${wM}__export-title`,exportSectionCentered:`${wM}__export-section--centered`};var G_;let g1t=(G_=class extends qi{loaded(){this.manager.onLifecycle(()=>[this.viewModel.exportedLinks.on("change",()=>this.requestUpdate())])}render(){const e=this.viewModel.exportedLinks,i={[_M.exportSectionCentered]:!e.length};return q`<section class=${mt(zs(_M.exportSection,i))} role=tabpanel><div class=${mt(_M.panelContainer)}>${e.length===0?q`<div class=${mt(_M.exportedFilesEmpty)}><calcite-icon icon=file scale=l></calcite-icon><div><p class=${mt(_M.exportedFilesTitle)}>${this.messages.noExportedFiles}</p><div>${this.messages.exportHint}</div></div></div>`:q`<calcite-list .filterEnabled=${e.length>10} .label=${this.messages.exportedLinksList}>${e.map(r=>q`<arcgis-print-exported-link .exportedLink=${r} .viewModel=${this.viewModel} .messages=${this.messages} .allowedFormatsForSaving=${this.allowedFormatsForSaving} .saveAsButtonCallback=${this.saveAsButtonCallback}></arcgis-print-exported-link>`)}</calcite-list>`}</div></section>`}},G_.properties={saveAsButtonCallback:0,viewModel:0,messages:0,allowedFormatsForSaving:1},G_.styles=y1t,G_);or("arcgis-print-exports-panel",g1t);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const v1t=dt`calcite-tab{--calcite-tab-content-block-padding: 0}calcite-loader{margin-right:var(--calcite-spacing-xxs)}`;var H_;let b1t=(H_=class extends qi{constructor(){super(...arguments),this._prevLayoutTemplateId=null,this._handles=wP("disconnect"),this._selectedTab="layout",this._hasPendingExport=!1}loaded(){this.manager.onLifecycle(()=>[this.viewModel.exportedLinks.on("change",()=>{this._handles.removeHandles("pending-exports"),this._handles.addHandles(this.viewModel.exportedLinks.toArray().map(e=>Le(()=>e.state,()=>this.requestUpdate(),{initial:!0})),"pending-exports")})])}async _layoutTabChangeHandler(){const e=(this._prevLayoutTemplateId?this.viewModel.getLayoutTemplateById(this._prevLayoutTemplateId):null)??this.viewModel.defaultTemplate;await this.viewModel.applyTemplate(e),this._prevLayoutTemplateId=e==null?void 0:e.id,this._selectedTab="layout"}async _mapOnlyTabChangeHandler(){this._updatePrevLayoutTemplateId(),await this.viewModel.applyTemplate("map-only"),this._selectedTab="map-only"}async _exportsTabChangeHandler(){this._updatePrevLayoutTemplateId(),this._selectedTab="exports"}_selectExportsTab(){this._updatePrevLayoutTemplateId(),this._selectedTab="exports"}_updatePrevLayoutTemplateId(){!bN(this.viewModel.templateOptions.layout)&&this.viewModel.templateOptions.id&&(this._prevLayoutTemplateId=this.viewModel.templateOptions.id)}render(){const e=this.viewModel.exportedLinks.some(({state:i})=>i==="pending");return q`<div><calcite-tabs layout=center bordered><calcite-tab-nav slot=title-group><calcite-tab-title @calciteTabsActivate=${this._layoutTabChangeHandler} .selected=${this._selectedTab==="layout"}>${this.messages.layoutTab}</calcite-tab-title><calcite-tab-title @calciteTabsActivate=${this._mapOnlyTabChangeHandler} .selected=${this._selectedTab==="map-only"}>${this.messages.mapOnlyTab}</calcite-tab-title><calcite-tab-title @calciteTabsActivate=${this._exportsTabChangeHandler} .selected=${this._selectedTab==="exports"}>${e?q`<calcite-loader inline label=loading scale=s></calcite-loader>`:null}${this.messages.exportsTab}</calcite-tab-title></calcite-tab-nav><calcite-tab selected><arcgis-print-layout-panel .messages=${this.messages} .viewModel=${this.viewModel} .showTemplateSelector=${this.showTemplateSelector} .selectExportsTab=${this._selectExportsTab.bind(this)}></arcgis-print-layout-panel></calcite-tab><calcite-tab><arcgis-print-map-only-panel .messages=${this.messages} .viewModel=${this.viewModel} .selectExportsTab=${this._selectExportsTab.bind(this)}></arcgis-print-map-only-panel></calcite-tab><calcite-tab><arcgis-print-exports-panel .messages=${this.messages} .viewModel=${this.viewModel} .allowedFormatsForSaving=${this.allowedFormatsForSaving} .saveAsButtonCallback=${this.saveAsButtonCallback}></arcgis-print-exports-panel></calcite-tab></calcite-tabs></div>`}},H_.properties={_selectedTab:16,_hasPendingExport:16,saveAsButtonCallback:0,viewModel:0,messages:0,showTemplateSelector:0,allowedFormatsForSaving:1},H_.styles=v1t,H_);or("arcgis-print-main-panel",b1t);var cZ;let ru=cZ=class extends st{constructor(t){super(t),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnColumnName=!1,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}static from(t){return S1(cZ,t)}};u([p({type:et})],ru.prototype,"outSpatialReference",void 0),u([p({type:jt})],ru.prototype,"processExtent",void 0),u([p({type:et})],ru.prototype,"processSpatialReference",void 0),u([p({nonNullable:!0})],ru.prototype,"returnColumnName",void 0),u([p({nonNullable:!0})],ru.prototype,"returnFeatureCollection",void 0),u([p({nonNullable:!0})],ru.prototype,"returnM",void 0),u([p({nonNullable:!0})],ru.prototype,"returnZ",void 0),ru=cZ=u([U("esri.rest.geoprocessor.GPOptions")],ru);let dd=class extends ye{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};u([p({type:jt})],dd.prototype,"extent",void 0),u([p()],dd.prototype,"height",void 0),u([p()],dd.prototype,"href",void 0),u([p()],dd.prototype,"opacity",void 0),u([p()],dd.prototype,"rotation",void 0),u([p()],dd.prototype,"scale",void 0),u([p()],dd.prototype,"visible",void 0),u([p()],dd.prototype,"width",void 0),dd=u([U("esri.layers.support.MapImage")],dd);const FMe={esriCentimeters:"centimeters",esriDecimalDegrees:"decimal-degrees",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriPoints:"points",esriUnknownUnits:"unknown",esriYards:"yards"},tzt=Wt()(FMe),w1t=Wt()({...FMe,esriIntFeet:"international-feet",esriIntInches:"international-inches",esriIntMiles:"international-miles",esriIntNauticalMiles:"international-nautical-miles",esriIntYards:"international-yards"}),_1t=Wt()({esriAcres:"international-acres",esriAcresUS:"us-acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-international-feet",esriSquareFeetUS:"square-us-feet",esriSquareInches:"square-international-inches",esriSquareInchesUS:"square-us-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-international-miles",esriSquareMilesUS:"square-us-miles",esriSquareMillimeters:"square-millimeters",esriSquareYards:"square-international-yards",esriSquareYardsUS:"square-us-yards",esriUnknownAreaUnits:"unknown"}),izt=Wt()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards"}),rzt=Wt()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards",esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds",esriNAUKilometersPerHour:"kilometers-per-hour",esriNAUMilesPerHour:"miles-per-hour",esriNAUUnknown:"unknown"}),nzt=Wt()({esriDOTComplete:"complete",esriDOTCompleteNoEvents:"complete-no-events",esriDOTFeatureSets:"featuresets",esriDOTInstructionsOnly:"instructions-only",esriDOTStandard:"standard",esriDOTSummaryOnly:"summary-only"}),szt=Wt()({esriNAOutputLineNone:"none",esriNAOutputLineStraight:"straight",esriNAOutputLineTrueShape:"true-shape",esriNAOutputLineTrueShapeWithMeasure:"true-shape-with-measure"});Wt()({esriNAOutputPolygonNone:"none",esriNAOutputPolygonSimplified:"simplified",esriNAOutputPolygonDetailed:"detailed"});const ozt=Wt()({esriNFSBAllowBacktrack:"allow-backtrack",esriNFSBAtDeadEndsOnly:"at-dead-ends-only",esriNFSBNoBacktrack:"no-backtrack",esriNFSBAtDeadEndsAndIntersections:"at-dead-ends-and-intersections"});Wt()({esriNATravelDirectionFromFacility:"from-facility",esriNATravelDirectionToFacility:"to-facility"});Wt()({esriNATimeOfDayNotUsed:"not-used",esriNATimeOfDayUseAsStartTime:"start",esriNATimeOfDayUseAsEndTime:"end"});const azt=Wt()({AUTOMOBILE:"automobile",TRUCK:"truck",WALK:"walk",OTHER:"other"}),lzt=Wt()({0:"either-side-of-vehicle",1:"right-side-of-vehicle",2:"left-side-of-vehicle",3:"no-u-turn"},{useNumericKeys:!0}),czt=Wt()({0:"stop",1:"waypoint",2:"break"},{useNumericKeys:!0}),uzt=Wt()({0:"ok",1:"not-located",2:"network-element-not-located",3:"element-not-traversable",4:"invalid-field-values",5:"not-reached",6:"time-window-violation",7:"not-located-on-closest"},{useNumericKeys:!0}),dzt=Wt()({1:"right",2:"left"},{useNumericKeys:!0}),hzt=Wt()({0:"restriction",1:"scaled-cost",2:"added-cost"},{useNumericKeys:!0}),pzt=Wt()({0:"permit",1:"restrict"},{useNumericKeys:!0}),fzt=Wt()({1:"header",50:"arrive",51:"depart",52:"straight",100:"on-ferry",101:"off-ferry",102:"central-fork",103:"roundabout",104:"u-turn",150:"door",151:"stairs",152:"elevator",153:"escalator",154:"pedestrian-ramp",200:"left-fork",201:"left-ramp",202:"clockwise-roundabout",203:"left-handed-u-turn",204:"bear-left",205:"left-turn",206:"sharp-left",207:"left-turn-and-immediate-left-turn",208:"left-turn-and-immediate-right-turn",300:"right-fork",301:"right-ramp",302:"counter-clockwise-roundabout",303:"right-handed-u-turn",304:"bear-right",305:"right-turn",306:"sharp-right",307:"right-turn-and-immediate-left-turn",308:"right-turn-and-immediate-right-turn",400:"up-elevator",401:"up-escalator",402:"up-stairs",500:"down-elevator",501:"down-escalator",502:"down-stairs",1e3:"general-event",1001:"landmark",1002:"time-zone-change",1003:"traffic-event",1004:"scaled-cost-barrier-event",1005:"boundary-crossing",1006:"restriction-violation",1007:"lane"},{useNumericKeys:!0}),mzt=Wt()({0:"unknown",1:"segment",2:"maneuver-segment",3:"restriction-violation",4:"scaled-cost-barrier",5:"heavy-traffic",6:"slow-traffic",7:"moderate-traffic"},{useNumericKeys:!0}),yzt=Wt()({"NA Campus":"campus","NA Desktop":"desktop","NA Navigation":"navigation"}),gzt=Wt()({Kilometers:"kilometers",Miles:"miles",Meters:"meters"},{ignoreUnknown:!1}),vzt=Wt()({Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),bzt=Wt()({Kilometers:"kilometers",Miles:"miles",Meters:"meters",Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),wzt=Wt()({"Any Hazmat Prohibited":"any-hazmat-prohibited","Avoid Carpool Roads":"avoid-carpool-roads","Avoid Express Lanes":"avoid-express-lanes","Avoid Ferries":"avoid-ferries","Avoid Gates":"avoid-gates","Avoid Limited Access Roads":"avoid-limited-access-roads","Avoid Private Roads":"avoid-private-roads","Avoid Roads Unsuitable for Pedestrians":"avoid-roads-unsuitable-for-pedestrians","Avoid Stairways":"avoid-stairways","Avoid Toll Roads":"avoid-toll-roads","Avoid Toll Roads for Trucks":"avoid-toll-roads-for-trucks","Avoid Truck Restricted Roads":"avoid-truck-restricted-roads","Avoid Unpaved Roads":"avoid-unpaved-roads","Axle Count Restriction":"axle-count-restriction","Driving a Bus":"driving-a-bus","Driving a Taxi":"driving-a-taxi","Driving a Truck":"driving-a-truck","Driving an Automobile":"driving-an-automobile","Driving an Emergency Vehicle":"driving-an-emergency-vehicle","Height Restriction":"height-restriction","Kingpin to Rear Axle Length Restriction":"kingpin-to-rear-axle-length-restriction","Length Restriction":"length-restriction","Preferred for Pedestrians":"preferred-for-pedestrians","Riding a Motorcycle":"riding-a-motorcycle","Roads Under Construction Prohibited":"roads-under-construction-prohibited","Semi or Tractor with One or More Trailers Prohibited":"semi-or-tractor-with-one-or-more-trailers-prohibited","Single Axle Vehicles Prohibited":"single-axle-vehicles-prohibited","Tandem Axle Vehicles Prohibited":"tandem-axle-vehicles-prohibited","Through Traffic Prohibited":"through-traffic-prohibited","Truck with Trailers Restriction":"truck-with-trailers-restriction","Use Preferred Hazmat Routes":"use-preferred-hazmat-routes","Use Preferred Truck Routes":"use-preferred-truck-routes",Walking:"walking","Weight Restriction":"weight-restriction"},{ignoreUnknown:!1}),_zt=Wt()({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),xzt=Wt()({esriGeometryPoint:"point",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"envelope",esriGeometryMultipoint:"multipoint"}),Szt=Wt()({esriNAUTCost:"cost",esriNAUTDescriptor:"descriptor",esriNAUTRestriction:"restriction",esriNAUTHierarchy:"hierarchy"}),$zt=Wt()({esriDSTAltName:"alt-name",esriDSTArrive:"arrive",esriDSTBranch:"branch",esriDSTCrossStreet:"cross-street",esriDSTCumulativeLength:"cumulative-length",esriDSTDepart:"depart",esriDSTEstimatedArrivalTime:"estimated-arrival-time",esriDSTExit:"exit",esriDSTGeneral:"general",esriDSTLength:"length",esriDSTServiceTime:"service-time",esriDSTStreetName:"street-name",esriDSTSummary:"summary",esriDSTTime:"time",esriDSTTimeWindow:"time-window",esriDSTToward:"toward",esriDSTViolationTime:"violation-time",esriDSTWaitTime:"wait-time"});let Z2=class extends ye{constructor(e){super(e),this.area=0,this.units=null}};u([p({json:{write:!0}})],Z2.prototype,"area",void 0),u([at(_1t)],Z2.prototype,"units",void 0),Z2=u([U("esri.rest.support.ArealUnit")],Z2);let Kw=class extends ye{constructor(e){super(e),this.itemId=null,this.url=null}};u([p({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],Kw.prototype,"itemId",void 0),u([p({type:String,json:{write:!0}})],Kw.prototype,"url",void 0),Kw=u([U("esri.rest.support.DataFile")],Kw);let Y2=class extends ye{constructor(e){super(e),this.distance=0,this.units=null}};u([p({json:{write:!0}})],Y2.prototype,"distance",void 0),u([at(w1t)],Y2.prototype,"units",void 0),Y2=u([U("esri.rest.support.LinearUnit")],Y2);const Zo="multi-value-",jQ=new Et({GPArealUnit:"areal-unit",GPBoolean:"boolean",GPComposite:"composite",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",Field:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string",GPValueTable:"value-table","GPMultiValue:GPArealUnit":`${Zo}areal-unit`,"GPMultiValue:GPBoolean":`${Zo}boolean`,"GPMultiValue:GPComposite":`${Zo}composite`,"GPMultiValue:GPDataFile":`${Zo}data-file`,"GPMultiValue:GPDate":`${Zo}date`,"GPMultiValue:GPDouble":`${Zo}double`,"GPMultiValue:GPFeatureRecordSetLayer":`${Zo}feature-record-set-layer`,"GPMultiValue:Field":`${Zo}field`,"GPMultiValue:GPLinearUnit":`${Zo}linear-unit`,"GPMultiValue:GPLong":`${Zo}long`,"GPMultiValue:GPRasterData":`${Zo}raster-data`,"GPMultiValue:GPRasterDataLayer":`${Zo}raster-data-layer`,"GPMultiValue:GPRecordSet":`${Zo}record-set`,"GPMultiValue:GPString":`${Zo}string`});let o$=class extends ye{constructor(e){super(e),this.dataType=null,this.paramName=null,this.value=null}};u([at(jQ,{ignoreUnknown:!1})],o$.prototype,"dataType",void 0),u([p()],o$.prototype,"paramName",void 0),u([p()],o$.prototype,"value",void 0),o$=u([U("esri.rest.support.ParameterValue")],o$);let Xg=class extends ye{constructor(e){super(e),this.format=null,this.itemId=null,this.type=null,this.url=null}readType(e){return e==="ImageService"?"image-service":null}};u([p()],Xg.prototype,"format",void 0),u([p({json:{name:"itemID",write:!0}})],Xg.prototype,"itemId",void 0),u([p()],Xg.prototype,"type",void 0),u([Ue("type")],Xg.prototype,"readType",null),u([p({json:{write:!0}})],Xg.prototype,"url",void 0),Xg=u([U("esri.rest.support.RasterData")],Xg);async function UMe(t,e,i,r,n){const s={},o={},a=[];return x1t(r,a,s),Jxe(a).then(l=>{const{outSpatialReference:c,processExtent:h,processSpatialReference:m,returnColumnName:y,returnFeatureCollection:v,returnM:w,returnZ:x}=i,{path:S}=Ad(t);for(const B in s){const[z,W]=s[B];o[B]=l.slice(z,W)}const C=c?c.wkid||c:null,k=m?m.wkid||m:null,A=e==="execute"?{returnColumnName:y||void 0,returnFeatureCollection:v||void 0,returnM:w||void 0,returnZ:x||void 0}:null,R=x5({...h?{context:{extent:h,outSR:C,processSR:k}}:{"env:outSR":C,"env:processSR":k},...r,...A,f:"json"},null,o),D={...n,query:R};return Ot(`${S}/${e}`,D)})}function x1t(t,e,i){for(const r in t){const n=t[r];if(n&&typeof n=="object"&&n instanceof Un){const{features:s}=n;i[r]=[e.length,e.length+s.length],s.forEach(o=>{e.push(o.geometry)})}}}async function uZ(t,e){switch(t){case"areal-unit":return Z2.fromJSON(e);case"boolean":case"double":case"long":case"string":case"value-table":return e;case"date":return new Date(e);case"data-file":return Kw.fromJSON(e);case"linear-unit":return Y2.fromJSON(e);case"feature-record-set-layer":if("url"in e)return Kw.fromJSON(e);if("layerDefinition"in e){const i=new(await $e(async()=>{const{default:s}=await Promise.resolve().then(()=>_dt);return{default:s}},void 0)).default,{layerDefinition:r,featureSet:n}=e;return i.read({layerDefinition:r,featureSet:n},{origin:"portal-item"}),i.spatialReference=et.fromJSON(n.spatialReference??r.spatialReference??r.extent.spatialReference),i}return Un.fromJSON(e);case"record-set":return"url"in e?Kw.fromJSON(e):Un.fromJSON(e);case"raster-data":case"raster-data-layer":return"mapImage"in e?dd.fromJSON(e.mapImage):Xg.fromJSON(e);case"field":return Ls.fromJSON(e)}}function S1t(t){return t.startsWith(Zo)}function $1t(t){return t.replace(Zo,"")}async function T1t(t,e){const i=$1t(t),r=i==="composite"?e.map(n=>uZ(jQ.fromJSON(n.dataType),n.value)):e.map(n=>uZ(i,n));return Promise.all(r)}async function dZ(t){const e=jQ.fromJSON(t.dataType),{paramName:i}=t,r=S1t(e)?await T1t(e,t.value):await uZ(e,t.value);return new o$({dataType:e,paramName:i,value:r})}function x5(t,e,i){for(const r in t){const n=t[r];Array.isArray(n)?t[r]=JSON.stringify(n.map(s=>x5({item:s},!0).item)):n instanceof Date&&(t[r]=n.getTime())}return R4(t,e,i)}const dfe=new Et({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let X2=class extends ye{constructor(e){super(e),this.description=null,this.type=null}};u([p({type:String,json:{write:!0}})],X2.prototype,"description",void 0),u([p({type:String,json:{read:dfe.read,write:dfe.write}})],X2.prototype,"type",void 0),X2=u([U("esri.rest.support.GPMessage")],X2);const jMe=X2;async function VMe(t,e,i,r){return i=ru.from(i||{}),UMe(t,"execute",i,e??{},r).then(async({data:n})=>{var s,o;return{results:await Promise.all(((s=n.results)==null?void 0:s.map(dZ))??[]),messages:((o=n.messages)==null?void 0:o.map(a=>jMe.fromJSON(a)))??[]}})}var wN;const E1t=Wt()({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"},{ignoreUnknown:!1}),pG=1e3;var pE;let bm=(pE=class extends ye{constructor(e){super(e),this.jobId=null,this.jobStatus=null,this.messages=null,this.progress=null,this.requestOptions=null,this.sourceUrl=null,this._cancelJobTimer=void 0,this._jobCompletionTimer=void 0}async cancelJob(e){const{jobId:i,sourceUrl:r}=this,{path:n}=Ad(r),s={...this.requestOptions,...e,query:{f:"json"}},o=`${n}/jobs/${i}/cancel`,{data:a}=await Ot(o,s),{messages:l,jobStatus:c,progress:h}=wN.fromJSON(a);return this.set({messages:l,jobStatus:c,progress:h}),c==="job-cancelled"?this:new Promise((m,y)=>{no(s.signal,()=>{this.clearCancelJobTimer(),y(Gi())}),this.clearCancelJobTimer();const v=()=>{this._cancelJobTimer||y(Gi()),this.checkJobStatus(e).then(({jobStatus:w})=>{switch(w){case"job-cancelling":default:this._cancelJobTimer=setTimeout(v,pG);break;case"job-deleted":case"job-deleting":case"job-executing":case"job-failed":case"job-new":case"job-submitted":case"job-succeeded":case"job-timed-out":case"job-waiting":y(this);break;case"job-cancelled":m(this)}}).catch(w=>{y(w)})};this._cancelJobTimer=setTimeout(v,pG)})}destroy(){clearInterval(this._cancelJobTimer),clearInterval(this._jobCompletionTimer)}async checkJobStatus(e){const{path:i}=Ad(this.sourceUrl),r={...this.requestOptions,...e,query:{f:"json"}},n=`${i}/jobs/${this.jobId}`,{data:s}=await Ot(n,r),{messages:o,jobStatus:a,progress:l}=wN.fromJSON(s);return this.set({messages:o,jobStatus:a,progress:l}),this}async fetchResultData(e,i,r){i=ru.from(i||{});const{returnColumnName:n,returnFeatureCollection:s,returnM:o,returnZ:a,outSpatialReference:l}=i,{path:c}=Ad(this.sourceUrl),h=x5({returnColumnName:n||null,returnFeatureCollection:s||null,returnM:o||null,returnZ:a||null,outSR:l,returnType:"data",f:"json"},null),m={...this.requestOptions,...r,query:h},y=`${c}/jobs/${this.jobId}/results/${e}`,{data:v}=await Ot(y,m);return dZ(v)}async fetchResultImage(e,i,r){const{path:n}=Ad(this.sourceUrl),s={...i.toJSON(),f:"json"},o=x5(s),a={...this.requestOptions,...r,query:o},l=`${n}/jobs/${this.jobId}/results/${e}`,{data:c}=await Ot(l,a);return dZ(c)}async fetchResultMapImageLayer(){const{path:e}=Ad(this.sourceUrl),i=e.indexOf("/GPServer/"),r=`${e.slice(0,Math.max(0,i))}/MapServer/jobs/${this.jobId}`;return new(await $e(async()=>{const{default:n}=await import("./MapImageLayer-DDZ9QgRN.js");return{default:n}},__vite__mapDeps([267,268,255,256,56,54,55,11,16,146,15,269]))).default({url:r})}async waitForJobCompletion(e={}){const{interval:i=pG,signal:r,statusCallback:n}=e;return new Promise((s,o)=>{no(r,()=>{this.clearJobCompletionTimer(),o(Gi())}),this.clearJobCompletionTimer();const a=()=>{this._jobCompletionTimer||o(Gi()),this.checkJobStatus().then(({jobStatus:l})=>{switch(l){case"job-succeeded":s(this);break;case"job-executing":case"job-new":case"job-submitted":case"job-waiting":n&&n(this),this._jobCompletionTimer=setTimeout(a,i);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-failed":case"job-timed-out":o(this);break;default:this._jobCompletionTimer=setTimeout(a,i)}}).catch(l=>{o(l)})};this._jobCompletionTimer=setTimeout(a,i)})}clearCancelJobTimer(){clearTimeout(this._cancelJobTimer),this._cancelJobTimer=void 0}clearJobCompletionTimer(){clearTimeout(this._jobCompletionTimer),this._jobCompletionTimer=void 0}},wN=pE,pE);u([p()],bm.prototype,"jobId",void 0),u([at(E1t,{ignoreUnknown:!1})],bm.prototype,"jobStatus",void 0),u([p({type:[jMe]})],bm.prototype,"messages",void 0),u([p()],bm.prototype,"progress",void 0),u([p()],bm.prototype,"requestOptions",void 0),u([p({json:{write:!0}})],bm.prototype,"sourceUrl",void 0),bm=wN=u([U("esri.rest.support.JobInfo")],bm);async function BMe(t,e,i,r){return i=ru.from(i||{}),UMe(t,"submitJob",i,e??{},r).then(({data:n})=>{const s=bm.fromJSON(n);return s.sourceUrl=t,s})}const S5=Wt()({AIX:"aix",EPS:"eps",GIF:"gif",JPG:"jpg",PDF:"pdf",PNG32:"png32",PNG8:"png8",SVG:"svg",SVGZ:"svgz",TIFF:"tiff"},{ignoreUnknown:!1}),$5=new Et({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),a$=$5.fromJSON.bind($5),C1t=$5.toJSON.bind($5);function I1t(t){return t&&typeof t.highlight=="function"}function M1t(t,e,i){return t==null||t>=i&&(e===0||t<=e)}function k1t(t,e){if(e&&t){const{minScale:i,maxScale:r}=t;if(A1t(i,r))return M1t(e,i,r)}return!0}function A1t(t,e){return t!=null&&t>0||e!=null&&e>0}function Azt(t){return!(t!=null&&t.minScale)||!t.maxScale||t.minScale>=t.maxScale}const Ozt=()=>!ve("disable-feature:layer-based-scale-visibility");function O1t(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}}function P1t(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}}function hfe(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}}function L1t(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}}function R1t(t,e=15){const i=t.canvas.width,r=t.canvas.height,n=t.getImageData(0,0,i,r).data;let s,o,a,l,c,h;e:for(o=r;o--;)for(s=i;s--;)if(n[4*(i*o+s)+3]>e){h=o;break e}if(!h)return null;e:for(s=i;s--;)for(o=h+1;o--;)if(n[4*(i*o+s)+3]>e){c=s;break e}e:for(s=0;s<=c;++s)for(o=h+1;o--;)if(n[4*(i*o+s)+3]>e){a=s;break e}e:for(o=0;o<=h;++o)for(s=a;s<=c;++s)if(n[4*(i*o+s)+3]>e){l=o;break e}return{x:a,y:l,width:c-a,height:h-l}}function GMe(t){var i;if(!t.attributionVisible)return;let e;return typeof t.originOf=="function"&&t.originOf("copyright")==="user"&&(e=t.copyright),e||!t.hasAttributionData?(e??(e=(i=t.portalItem)==null?void 0:i.accessInformation),e??(e=t.copyright),e??void 0):void 0}function D1t(t,e){var n,s;const i=((n=e.color)==null?void 0:n.clone())??new Ye([0,255,255]),r=((s=e.haloColor)==null?void 0:s.clone())??i.clone();switch(t){case"envelope":case"polygon":return i.a*=e.fillOpacity??.25,new Io({color:i,outline:new Vr({color:r}),style:"solid"});case"polyline":return new Vr({color:r});default:return r.a=1,new jr({color:r,outline:null})}}function N1t(t,e){const i=t.allLayerViews.items;if(e===t.scale)return i.filter(n=>!n.suspended);const r=new Array;for(const n of i){const s=n.parent;s&&s!==n.view&&(F1t(s)||U1t(s))&&!r.includes(s)||n.visible&&n.visibleAtCurrentTimeExtent&&k1t(n.layer.effectiveScaleRange,e)&&r.push(n)}return r}function z1t(t){return(t==null?void 0:t.type)==="bing-maps"}function HMe(t){return t&&"blendMode"in t&&"effect"in t}function F1t(t){return t.layer.type==="catalog"}function U1t(t){return t.layer.type==="group"}function j1t(t){return t&&"trackInfo"in t}function V1t(t){var i;const e=t.layer;if(HMe(e)){const r=e.blendMode;if((!r||r==="normal")&&(e.effect||"featureEffect"in t&&t.featureEffect))return!0}return!(!j1t(e)||!((i=e.trackInfo)!=null&&i.enabled))}let Os=class extends st{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.includeCharts=!1,this.includeTables=!1,this.label=null,this.layout="map-only",this.layoutItem=null,this.layoutOptions=null,this.outScale=0,this.report=null,this.reportItem=null,this.reportOptions=null,this.scalePreserved=!0,this.showLabels=!0}};u([p()],Os.prototype,"attributionVisible",void 0),u([p()],Os.prototype,"exportOptions",void 0),u([p()],Os.prototype,"forceFeatureAttributes",void 0),u([p()],Os.prototype,"format",void 0),u([p()],Os.prototype,"includeCharts",void 0),u([p()],Os.prototype,"includeTables",void 0),u([p()],Os.prototype,"label",void 0),u([p()],Os.prototype,"layout",void 0),u([p({type:At})],Os.prototype,"layoutItem",void 0),u([p()],Os.prototype,"layoutOptions",void 0),u([p()],Os.prototype,"outScale",void 0),u([p()],Os.prototype,"report",void 0),u([p({type:At})],Os.prototype,"reportItem",void 0),u([p()],Os.prototype,"reportOptions",void 0),u([p()],Os.prototype,"scalePreserved",void 0),u([p()],Os.prototype,"showLabels",void 0),Os=u([U("esri.rest.support.PrintTemplate")],Os);const qMe=Os,T5=new Et({"Attribute List Letter ANSI A Landscape":"attribute-list-letter-ansi-a-landscape","Attribute List Letter ANSI A Portrait":"attribute-list-letter-ansi-a-portrait","Attribute List With Group Letter ANSI A Landscape":"attribute-list-with-group-letter-ansi-a-landscape","Attribute List With Group Letter ANSI A Portrait":"attribute-list-with-group-letter-ansi-a-portrait","Page per Feature Letter ANSI A Landscape":"page-per-feature-letter-ansi-a-landscape","Page per Feature Letter ANSI A Portrait":"page-per-feature-letter-ansi-a-portrait"});T5.fromJSON.bind(T5);const B1t=T5.toJSON.bind(T5),pfe={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},ffe=new Et({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),WMe=new Et({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),hZ=new Map;var ry;async function G1t(t,e,i){var a;const r=await VQ(t,i),n=await J1t(e,r);if(await H1t(t,i)==="sync"){const{results:l}=await VMe(t,n,void 0,i);return(a=l==null?void 0:l[0])==null?void 0:a.value}const s=await BMe(t,n,void 0,i);await s.waitForJobCompletion({interval:e.updateDelay});const{value:o}=await s.fetchResultData("Output_File",null,i);return o}async function VQ(t,e){const i=Y1t(t),r=hZ.get(i)??{gpServerUrl:i,legendLayerNameMap:{},legendLayers:[]};return r.gpMetadata??(r.gpMetadata=(await Ot(i,lP({f:"json"},e))).data),r.cimVersion=r.gpMetadata.cimVersion,hZ.set(i,r),r}async function H1t(t,e){return bxt(await VQ(t,e))}async function q1t(t,e){const i=await VQ(t,e),r=i.gpMetadata.tasks,n=i.gpServerUrl;return i.taskInfos||(i.taskInfos={},await Promise.all((r==null?void 0:r.map(async s=>{var l;const o=(await Ot(`${n}/${s}`,lP({f:"json"},e))).data,a=o.name.startsWith(ry.GetLayoutTemplatesInfo)?ry.GetLayoutTemplatesInfo:o.name.startsWith(ry.ExportWebMap)?ry.ExportWebMap:null;a&&((l=i.taskInfos)[a]??(l[a]=o))}))??[])),i.taskInfos}async function pZ(t,e,i){return(await q1t(t,i))[e]??null}async function W1t(t,e,i){const r=await pZ(t,e,i);return r!=null&&r.executionType?WMe.fromJSON(r.executionType):"sync"}async function J1t(t,e){var m,y,v,w,x;e=e||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]};const i=t.template||new qMe;i.showLabels==null&&(i.showLabels=!0);const r=i.exportOptions;let n;const s=C1t(i.layout);if(r&&(n={dpi:r.dpi},(s==null?void 0:s.toLowerCase())==="map_only"||s==="")){const{width:S,height:C}=r;n.outputSize=S!=null&&C!=null?[S,C]:void 0}const o=i.layoutOptions;let a;if(o){let S,C;o.scalebarUnit==="Miles"||o.scalebarUnit==="Kilometers"?(S="Kilometers",C="Miles"):o.scalebarUnit!=="Meters"&&o.scalebarUnit!=="Feet"||(S="Meters",C="Feet"),a={titleText:o.titleText,authorText:o.authorText,copyrightText:o.copyrightText,customTextElements:o.customTextElements,elementOverrides:o.elementOverrides,scaleBarOptions:S||C?{metricUnit:ffe.toJSON(S)??void 0,metricLabel:S?pfe[S]:void 0,nonMetricUnit:ffe.toJSON(C)??void 0,nonMetricLabel:C?pfe[C]:void 0}:void 0}}let l=null;o!=null&&o.legendLayers&&(l=o.legendLayers.map(S=>{const C=S.layerId;e.legendLayerNameMap[C]=S.title;const k={id:C};return S.subLayerIds&&(k.subLayerIds=S.subLayerIds),k}));const c=await Z1t(t,i,e);if(c.operationalLayers){const S=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),C=/[\u0600-\u06FF]/,k=A=>{var z;const R=A.text,D=A.font,B=(z=D==null?void 0:D.family)==null?void 0:z.toLowerCase();R&&D&&(B==="arial"||B==="arial unicode ms")&&(D.family=S.test(R)?"Arial Unicode MS":"Arial",D.style!=="normal"&&C.test(R)&&(D.family="Arial Unicode MS"))};for(const A of c.operationalLayers)if((m=A.featureCollection)!=null&&m.layers)for(const R of A.featureCollection.layers){if((w=(v=(y=R.layerDefinition)==null?void 0:y.drawingInfo)==null?void 0:v.renderer)!=null&&w.symbol){const D=R.layerDefinition.drawingInfo.renderer;D.symbol.type==="esriTS"&&k(D.symbol)}if((x=R.featureSet)!=null&&x.features)for(const D of R.featureSet.features)D.symbol&&D.symbol.type==="esriTS"&&k(D.symbol)}}t.outSpatialReference&&(c.mapOptions.spatialReference=t.outSpatialReference.toJSON()),Object.assign(c,{exportOptions:n,layoutOptions:a||{}}),Object.assign(c.layoutOptions,{legendOptions:{operationalLayers:l??e.legendLayers.slice()}}),e.legendLayers.length=0,hZ.set(e.gpServerUrl,e);const h={Web_Map_as_JSON:JSON.stringify(c),Format:S5.toJSON(i.format),Layout_Template:s,Layout_Item_ID:void 0,Report_Template:B1t(i.report),Report_Item_ID:void 0};if(i.layoutItem){delete h.Layout_Template;const S=i.layoutItem;await S.load(),S.access!=="public"&&Tt&&await Tt.getCredential(e.gpServerUrl),h.Layout_Item_ID=JSON.stringify({id:S.id})}if(i.reportItem){delete h.Report_Template;const S=i.reportItem;await S.load(),S.access!=="public"&&Tt&&await Tt.getCredential(e.gpServerUrl),h.Report_Item_ID=JSON.stringify({id:S.id})}return t.extraParameters&&Object.assign(h,t.extraParameters),h}async function Z1t(t,e,i){const r=t.view;let n=r.spatialReference;const s={operationalLayers:await X1t(r,e,i)};e.includeTables&&(s.tables=await hxt(r));let o=t.extent||i.ssExtent||r.extent;if(n!=null&&n.isWrappable&&(o=o.clone()._normalize(!0),n=o.spatialReference),s.mapOptions={extent:o&&o.toJSON(),spatialReference:n&&n.toJSON(),showAttribution:e.attributionVisible},i.ssExtent=null,r.background&&(s.background=r.background.toJSON()),r.rotation&&(s.mapOptions.rotation=-r.rotation),e.scalePreserved&&(s.mapOptions.scale=e.outScale||r.scale),r.timeExtent!=null){const a=r.timeExtent.start!=null?r.timeExtent.start.getTime():null,l=r.timeExtent.end!=null?r.timeExtent.end.getTime():null;s.mapOptions.time=[a,l]}return e.reportOptions&&(s.reportOptions=e.reportOptions),s}function Y1t(t){let e=t;const i=e.lastIndexOf("/GPServer/");return i>0&&(e=e.slice(0,i+9)),e}async function X1t(t,e,i){var a;const r=[],n={layerView:null,printTemplate:e,view:t};let s=0;e.scalePreserved&&(s=e.outScale||t.scale);const o=N1t(t,s);for(const l of o){const c=l.layer;if(!c.loaded||"layers"in c)continue;let h;n.layerView=l,h=V1t(l)?await p1(c,n,i):z1t(c)?K1t(c):(c==null?void 0:c.type)==="csv"?await ext(c,n,i):(c==null?void 0:c.type)==="catalog-footprint"?await Q1t(c,n,i):(c==null?void 0:c.type)==="feature"?await txt(c,n,i):(c==null?void 0:c.type)==="geojson"?await ixt(c,n,i):(c==null?void 0:c.type)==="graphics"?await rxt(c,n,i):(c==null?void 0:c.type)==="imagery"?nxt(c,i):(c==null?void 0:c.type)==="imagery-tile"?await sxt(c,n,i):(c==null?void 0:c.type)==="kml"?await oxt(c,n,i):(c==null?void 0:c.type)==="map-image"?axt(c,n,i):(c==null?void 0:c.type)==="map-notes"?await lxt(n,i):(c==null?void 0:c.type)==="open-street-map"?cxt():(c==null?void 0:c.type)==="stream"?await uxt(c,n,i):(c==null?void 0:c.type)==="subtype-group"?await dxt(c,i):(c==null?void 0:c.type)==="tile"?pxt(c,i):(c==null?void 0:c.type)==="vector-tile"?await fxt(c,n,i):(c==null?void 0:c.type)==="web-tile"?mxt(c):(c==null?void 0:c.type)==="wfs"?await yxt(c,n,i):(c==null?void 0:c.type)==="wms"?gxt(c,i):(c==null?void 0:c.type)==="wmts"?vxt(c):await p1(c,n,i),h&&(Array.isArray(h)?r.push(...h):(h.id=c.id,h.title=i.legendLayerNameMap[c.id]||c.title,h.opacity=l.fullOpacity,h.minScale=c.minScale||0,h.maxScale=c.maxScale||0,HMe(c)&&c.blendMode&&c.blendMode!=="normal"&&(h.blendMode=c.blendMode),r.push(h)))}if(s)for(const l of r)l.minScale=0,l.maxScale=0;if((a=t.graphics)!=null&&a.length){const l=await Qp(null,t.graphics,e,i);l&&r.push(l)}return r}function K1t(t){return{culture:t.culture,key:t.key,type:"BingMaps"+(t.style==="aerial"?"Aerial":t.style==="hybrid"?"Hybrid":"Road")}}async function Q1t(t,{layerView:e,printTemplate:i},r){if(parseFloat(r.cimVersion)<3.1)return Qp(t,await _P(e),i,r);const n=t.parent,s={id:(o=$u(n,"web-map")).id,url:o.url,layerType:o.layerType,customParameters:o.customParameters,dynamicGroupLayer:{visibility:!1},footprintLayer:o.footprintLayer,layerDefinition:o.layerDefinition};var o;return Ob(s,n),s}async function ext(t,e,i){t.legendEnabled&&i.legendLayers.push({id:t.id});const r=e.layerView,n=e.printTemplate;if(!(r.filter||t.portalItem&&t.portalItem.access!=="public")){const s=$u(t,"web-map");return s.type="CSV",delete s.popupInfo,delete s.layerType,s.showLabels=n.showLabels&&t.labelsVisible,s}return Qp(t,await _P(r),n,i)}async function Qp(t,e,i,r){var S,C,k,A,R,D,B;let n;const s=P1t(),o=L1t(),a=hfe(),l=O1t(),c=hfe();if(c.layerDefinition.name="textLayer",delete c.layerDefinition.drawingInfo,t){if(t.declaredClass==="esri.layers.FeatureLayer"||t.declaredClass==="esri.layers.StreamLayer"?s.layerDefinition.name=o.layerDefinition.name=a.layerDefinition.name=l.layerDefinition.name=r.legendLayerNameMap[t.id]||((S=t.arcgisProps)==null?void 0:S.title)||t.title:t.declaredClass==="esri.layers.GraphicsLayer"&&(e=t.graphics.items),t.renderer){const z=t.renderer.toJSON(),W=s.layerDefinition.drawingInfo;W&&(W.renderer=z);const Y=o.layerDefinition.drawingInfo;Y&&(Y.renderer=z);const ee=a.layerDefinition.drawingInfo;ee&&(ee.renderer=z);const ge=l.layerDefinition.drawingInfo;ge&&(ge.renderer=z)}if(i.showLabels&&t.labelsVisible&&typeof t.write=="function"){const z=$u(t,"web-map"),W=(k=(C=z.layerDefinition)==null?void 0:C.drawingInfo)==null?void 0:k.labelingInfo;if(W){n=!0;const Y=s.layerDefinition.drawingInfo;Y&&(Y.labelingInfo=W);const ee=o.layerDefinition.drawingInfo;ee&&(ee.labelingInfo=W);const ge=a.layerDefinition.drawingInfo;ge&&(ge.labelingInfo=W);const fe=l.layerDefinition.drawingInfo;fe&&(fe.labelingInfo=W)}}}let h;t!=null&&t.renderer||n||(delete s.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo,delete a.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo);const m=t==null?void 0:t.fieldsIndex,y=t==null?void 0:t.renderer;if(m){const z=new Set;n&&await MJe(z,t),y&&typeof y.collectRequiredFields=="function"&&await y.collectRequiredFields(z,m),h=Array.from(z);const W=m.fields.map(Y=>Y.toJSON());s.layerDefinition.fields=W,o.layerDefinition.fields=W,a.layerDefinition.fields=W,l.layerDefinition.fields=W}const v=e==null?void 0:e.length;let w;for(let z=0;z<v;z++){const W=e[z]||e.at(z);if(W.visible!==!1&&W.geometry){if(w=W.toJSON(),w.hasOwnProperty("popupTemplate")&&delete w.popupTemplate,(A=w.geometry)!=null&&A.z&&delete w.geometry.z,w.symbol&&(w.symbol.angle||delete w.symbol.angle,xN(w.symbol)?w.symbol=await _N(w.symbol,r):w.symbol.text&&delete w.attributes),(!i||!i.forceFeatureAttributes)&&(h==null?void 0:h.length)){const Y={};for(const ee of h)(R=w.attributes)!=null&&R.hasOwnProperty(ee)&&(Y[ee]=w.attributes[ee]);w.attributes=Y}W.geometry.type==="polygon"?s.featureSet.features.push(w):W.geometry.type==="polyline"?o.featureSet.features.push(w):W.geometry.type==="point"?(D=w.symbol)!=null&&D.text?c.featureSet.features.push(w):a.featureSet.features.push(w):W.geometry.type==="multipoint"?l.featureSet.features.push(w):W.geometry.type==="extent"&&(w.geometry=rr.fromExtent(W.geometry).toJSON(),s.featureSet.features.push(w))}}const x=[s,o,l,a,c].filter(z=>z.featureSet.features.length>0);for(const z of x){const W=z.featureSet.features.every(Y=>Y.symbol);if(W&&(!i||!i.forceFeatureAttributes))for(const Y of z.featureSet.features)delete Y.attributes;W&&delete z.layerDefinition.drawingInfo,(B=z.layerDefinition.drawingInfo)!=null&&B.renderer&&await JMe(z.layerDefinition.drawingInfo.renderer,r)}return x.length?{featureCollection:{layers:x},showLabels:n}:null}async function txt(t,e,i){var m,y,v,w,x,S,C,k,A,R,D,B,z;let r;const n=t.renderer,s=parseFloat(i.cimVersion);if(((m=t.featureReduction)==null?void 0:m.type)==="binning"||((y=t.featureReduction)==null?void 0:y.type)==="cluster"&&(s<2.9||((v=t.featureReduction.renderer)==null?void 0:v.type)==="pie-chart")||(n==null?void 0:n.type)==="pie-chart"&&s<3.1||(n==null?void 0:n.type)==="dot-density"&&s<2.6)return p1(t,e,i);t.legendEnabled&&i.legendLayers.push({id:t.id});const o=e.layerView,{printTemplate:a,view:l}=e,c=((w=t.source)==null?void 0:w.type)!=="feature-layer"&&((x=t.source)==null?void 0:x.type)!=="ogc-feature";if(o.filter||c||!n||"field"in n&&n.field!=null&&!t.getField(n.field)){const W=await _P(o);r=await Qp(t,W,a,i)}else{if(r={id:(h=$u(t)).id,title:h.title,url:h.url,layerType:h.layerType,customParameters:h.customParameters,layerDefinition:h.layerDefinition,charts:a.includeCharts?h.charts:void 0},a.attributionVisible&&(r.credits=GMe(t)),r.showLabels=a.showLabels&&t.labelsVisible,Ob(r,t),(C=(S=r.layerDefinition)==null?void 0:S.featureReduction)==null||delete C.disablePopup,(A=(k=r.layerDefinition)==null?void 0:k.featureReduction)==null||delete A.popupInfo,o.displayFilterEnabled||((R=r.layerDefinition)==null||delete R.displayFilterInfo),((B=(D=r.layerDefinition)==null?void 0:D.drawingInfo)==null?void 0:B.renderer)&&(delete r.layerDefinition.minScale,delete r.layerDefinition.maxScale,await JMe(r.layerDefinition.drawingInfo.renderer,i),"visualVariables"in n&&((z=n.visualVariables)==null?void 0:z[0]))){const Y=n.visualVariables[0];if(Y.type==="size"&&Y.maxSize&&typeof Y.maxSize!="number"&&Y.minSize&&typeof Y.minSize!="number"){const ee=ITe(Y,l.scale);r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=ee.minSize,r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=ee.maxSize}}const W=Aht(o);if(W&&(r.layerDefinition??(r.layerDefinition={}),r.layerDefinition.definitionExpression=r.layerDefinition.definitionExpression?`(${r.layerDefinition.definitionExpression}) AND (${W})`:W),t.gdbVersion&&(r.layerDefinition??(r.layerDefinition={}),r.layerDefinition.gdbVersion=t.gdbVersion),o.hasHighlight&&"highlightIds"in o){const Y=o;r.selectionObjectIds=Y.highlightIds,r.selectionSymbol=D1t(t.geometryType,Y.highlightOptions??l.highlightOptions)}}var h;return r}async function ixt(t,e,i){var r,n;return((r=t.featureReduction)==null?void 0:r.type)==="binning"||((n=t.featureReduction)==null?void 0:n.type)==="cluster"?p1(t,e,i):(t.legendEnabled&&i.legendLayers.push({id:t.id}),Qp(t,await _P(e.layerView),e.printTemplate,i))}async function rxt(t,{printTemplate:e},i){return Qp(t,null,e,i)}function nxt(t,e){var n;t.legendEnabled&&e.legendLayers.push({id:t.id});const i={layerType:(r=$u(t)).layerType,customParameters:r.customParameters};var r;return i.bandIds=t.bandIds,i.compressionQuality=t.compressionQuality,i.format=t.format,i.interpolation=t.interpolation,(t.mosaicRule||t.definitionExpression)&&(i.mosaicRule=t.exportImageServiceParameters.mosaicRule.toJSON()),t.rasterFunction&&(i.renderingRule=t.rasterFunction.toJSON()),t.renderer&&(i.layerDefinition??(i.layerDefinition={}),(n=i.layerDefinition).drawingInfo??(n.drawingInfo={}),i.layerDefinition.drawingInfo.renderer=t.renderer.toJSON()),Ob(i,t),i}async function sxt(t,e,i){var s;if(((s=t.renderer)==null?void 0:s.type)==="flow")return p1(t,e,i);t.legendEnabled&&i.legendLayers.push({id:t.id});const r={bandIds:(n=$u(t)).bandIds,customParameters:n.customParameters,interpolation:n.interpolation,layerDefinition:n.layerDefinition};var n;return r.layerType="ArcGISImageServiceLayer",Ob(r,t),r}async function oxt(t,e,i){const r=e.printTemplate;if(!t.portalItem||t.portalItem.access==="public"){const c=$u(t,"web-map");return c.type="kml",delete c.layerType,c.url=so(t.url),c}const n=[],s=e.layerView,o="data:image/png;base64,";s.allVisibleMapImages.forEach((c,h)=>{const m={id:`${t.id}_image${h}`,type:"image",title:t.id,minScale:t.minScale||0,maxScale:t.maxScale||0,opacity:s.fullOpacity,extent:c.extent};c.href.startsWith(o)?m.imageData=c.href.slice(o.length):m.url=c.href,n.push(m)});const a=[...s.allVisiblePoints.items,...s.allVisiblePolylines.items,...s.allVisiblePolygons.items],l={id:t.id,...await Qp(null,a,r,i)};return n.push(l),n}function axt(t,{printTemplate:e,view:i},r){var h,m;let n;const s={id:t.id,subLayerIds:[]};let o=[];const a=i.scale,l=y=>{const v=a===0,w=y.minScale===0||a<=y.minScale,x=y.maxScale===0||a>=y.maxScale;if(y.visible&&(v||w&&x))if(y.sublayers)y.sublayers.forEach(l);else{const S=y.toExportImageJSON(),C={id:y.id,name:y.title,layerDefinition:{definitionExpression:S.definitionExpression,drawingInfo:S.drawingInfo,orderBy:S.orderBy,source:S.source}};o.unshift(C),s.subLayerIds.push(y.id)}};var c;return t.sublayers&&t.sublayers.forEach(l),o.length&&(o=o.map(({id:y,name:v,layerDefinition:w})=>({id:y,name:v,layerDefinition:w})),n={layerType:(c=$u(t)).layerType,customParameters:c.customParameters},n.layers=o,n.visibleLayers=(m=(h=t.capabilities)==null?void 0:h.exportMap)!=null&&m.supportsDynamicLayers?void 0:s.subLayerIds,e.attributionVisible&&(n.credits=GMe(t)),t.gdbVersion&&(n.gdbVersion=t.gdbVersion),Ob(n,t),t.legendEnabled&&r.legendLayers.push(s)),n}async function lxt({layerView:t,printTemplate:e},i){const r=[],n=t.layer;if(n.featureCollections!=null)for(const s of n.featureCollections){const o=await Qp(s,s.source,e,i);o&&r.push(...o.featureCollection.layers)}else if(n.sublayers!=null)for(const s of n.sublayers){const o=await Qp(null,s.graphics,e,i);o&&r.push(...o.featureCollection.layers)}return{featureCollection:{layers:r}}}function cxt(){return{type:"OpenStreetMap"}}async function p1(t,{printTemplate:e,view:i},r){var m;const n={type:"image"},s={format:"png",ignoreBackground:!0,ignorePadding:!0,layers:[t]};i.rotation!==0&&(s.rotation=0);const o=r.ssExtent||i.state.extent.clone();let a=96,l=!0,c=!0;if(e.exportOptions){const y=e.exportOptions;y.dpi!=null&&y.dpi>0&&(a=y.dpi),y.width!=null&&y.width>0&&(l=y.width%2==i.width%2),y.height!=null&&y.height>0&&(c=y.height%2==i.height%2)}if(e.layout==="map-only"&&e.scalePreserved&&(!e.outScale||e.outScale===i.scale)&&a===96&&(!l||!c)&&i.state.extent.equals(i.extent)&&(s.area={x:0,y:0,width:i.width,height:i.height},l||(s.area.width-=1),c||(s.area.height-=1),!r.ssExtent)){const y=i.toMap(xs(s.area.width,s.area.height));o.ymin=y.y,o.xmax=y.x,r.ssExtent=o}n.extent=o.clone()._normalize(!0).toJSON();const h=await i.takeScreenshot(s);return n.imageData=(m=pb(h.dataUrl))==null?void 0:m.data,n}async function uxt(t,{layerView:e,printTemplate:i},r){return t.legendEnabled&&r.legendLayers.push({id:t.id}),Qp(t,await _P(e),i,r)}async function dxt(t,e){if(t.legendEnabled)for(const n of t.sublayers)n.legendEnabled&&e.legendLayers.push({id:n.id});const i={customParameters:(r=$u(t)).customParameters,effect:r.effect,layerDefinition:r.layerDefinition,layerType:r.layerType,layers:r.layers,url:r.url};var r;if(Ob(i,t),Array.isArray(i.layers)){for(const n of i.layers)delete n.popupInfo;i.token&&i.layers.length>0&&(i.layers[i.layers.length-1].token=i.token,delete i.token)}return i}async function hxt(t){var r;const e=[],i=[];for(const n of t.map.allTables)n.type!=="feature"||n.loaded||i.push(n.load());i.length&&await Promise.allSettled(i);for(const n of t.map.allTables)if(n.type==="feature"&&n.loaded&&n.isTable&&((r=n.source)==null?void 0:r.type)==="feature-layer"){const s=(o=>{var a;return{id:o.id,title:o.title,customParameters:o.customParameters,layerDefinition:{definitionExpression:(a=o.layerDefinition)==null?void 0:a.definitionExpression},url:o.url}})($u(n));Ob(s,n),e.push(s)}return e.length?e:void 0}function pxt(t,e){t.legendEnabled&&e.legendLayers.push({id:t.id});const i={layerType:(r=$u(t)).layerType,customParameters:r.customParameters};var r;return Ob(i,t),i}async function fxt(t,e,i){const r=e.layerView;if(t.serviceUrl&&t.styleUrl&&!r.spriteSourceChanged&&!r.styleChanged){const n=hF(t.styleUrl,t.apiKey),s=hF(t.serviceUrl,t.apiKey);if(!n&&!s||i.cimVersion!=="2.1.0"){const o={type:"VectorTileLayer"};return o.styleUrl=so(t.styleUrl),o.token=n,s!==n&&(o.additionalTokens=[{url:t.serviceUrl,token:s}]),o}}return p1(t,e,i)}function mxt(t){var r;const e=(r=t.urlTemplate)==null?void 0:r.replace(/\${/g,"{"),i={type:"WebTiledLayer",urlTemplate:e,credits:t.copyright};return t.subDomains&&t.subDomains.length>0&&(i.subDomains=t.subDomains),i}async function yxt(t,e,i){return parseFloat(i.cimVersion)<3.5?p1(t,e,i):(t.legendEnabled&&i.legendLayers.push({id:t.id}),{layerType:(r=$u(t,"web-map")).layerType,layerDefinition:r.layerDefinition,url:r.url,wfsInfo:r.wfsInfo});var r}function gxt(t,e){let i;const r=[],n=s=>{s.visible&&(s.sublayers?s.sublayers.forEach(n):s.name&&r.unshift(s.name))};return t.sublayers&&t.sublayers.forEach(n),r.length&&(t.legendEnabled&&e.legendLayers.push({id:t.id,subLayerIds:r}),i={type:"wms",customLayerParameters:t.customLayerParameters,customParameters:t.customParameters,transparentBackground:t.imageTransparency,visibleLayers:r,url:so(t.url),version:t.version}),i}function vxt(t){const e=t.activeLayer;return{type:"wmts",customLayerParameters:t.customLayerParameters,customParameters:t.customParameters,format:e.imageFormat,layer:e.id,style:e.styleId,tileMatrixSet:e.tileMatrixSetId,url:so(t.url)}}function Ob(t,e){e.url&&(t.url=so(t.url||e.url),t.token=hF(t.url,e.apiKey))}async function _N(t,e){var o;e.canvas||(e.canvas=document.createElement("canvas"));const i=1024;e.canvas.width=i,e.canvas.height=i;const r=e.canvas.getContext("2d");let n,s;if(t.path){const a=new Path2D(t.path);a.closePath(),r.fillStyle=Array.isArray(t.color)?`rgba(${t.color[0]},${t.color[1]},${t.color[2]},${t.color[3]/255})`:"rgb(0,0,0)",r.fill(a);const l=R1t(r);if(!l)return null;r.clearRect(0,0,i,i);const c=ui(t.size)/Math.max(l.width,l.height);r.scale(c,c);const h=i/c,m=h/2-l.width/2-l.x,y=h/2-l.height/2-l.y;if(r.translate(m,y),Array.isArray(t.color)&&r.fill(a),((o=t.outline)==null?void 0:o.width)&&Array.isArray(t.outline.color)){const w=t.outline;r.lineWidth=ui(w.width)/c,r.lineJoin="round",r.strokeStyle=`rgba(${w.color[0]},${w.color[1]},${w.color[2]},${w.color[3]/255})`,r.stroke(a),l.width+=r.lineWidth,l.height+=r.lineWidth}l.width*=c,l.height*=c;const v=r.getImageData(i/2-l.width/2,i/2-l.height/2,Math.ceil(l.width),Math.ceil(l.height));n=v.width,s=v.height,r.canvas.width=n,r.canvas.height=s,r.putImageData(v,0,0)}else{const a=t.contentType==="image/svg+xml"?"data:image/svg+xml;base64,"+t.imageData:t.url,l=(await Ot(a,{responseType:"image"})).data;n=ui(t.width),s=ui(t.height),r.canvas.width=n,r.canvas.height=s,r.drawImage(l,0,0,r.canvas.width,r.canvas.height)}return{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").slice(22),angle:t.angle,contentType:"image/png",height:Di(s),width:Di(n),xoffset:t.xoffset,yoffset:t.yoffset}}async function JMe(t,e){const i=t.type;if(i==="simple"&&xN(t.symbol))t.symbol=await _N(t.symbol,e);else if(i==="uniqueValue"||i==="classBreaks"){xN(t.defaultSymbol)&&(t.defaultSymbol=await _N(t.defaultSymbol,e));const r=t[i==="uniqueValue"?"uniqueValueInfos":"classBreakInfos"];if(r)for(const n of r)xN(n.symbol)&&(n.symbol=await _N(n.symbol,e))}}async function _P(t){return t.queryFeatures(t.createQuery()).then(e=>e.features)}function $u(t,e){return t.write({},{ignorePersistenceEnabled:!0,origin:e})??{}}function bxt(t){var e;return(e=t.gpMetadata)!=null&&e.executionType?WMe.fromJSON(t.gpMetadata.executionType):"sync"}function xN(t){var e;return t&&(t.path||t.contentType==="image/svg+xml"||((e=t.url)==null?void 0:e.endsWith(".svg")))}(function(t){t.ExportWebMap="ExportWebMap",t.GetLayoutTemplatesInfo="GetLayoutTemplatesInfo"})(ry||(ry={}));let wm=class extends st{constructor(e){super(e),this.extent=null,this.extraParameters=null,this.outSpatialReference=null,this.template=null,this.updateDelay=1e3,this.view=null}};u([p()],wm.prototype,"extent",void 0),u([p()],wm.prototype,"extraParameters",void 0),u([p({type:et})],wm.prototype,"outSpatialReference",void 0),u([p()],wm.prototype,"template",void 0),u([p()],wm.prototype,"updateDelay",void 0),u([p()],wm.prototype,"view",void 0),wm=u([U("esri.rest.support.PrintParameters")],wm);const wxt=wm;let Dn=class extends st{constructor(e){super(e),this.strokeDash=[],this.strokeWidth=2,this.strokeColor=[0,0,0,1],this.strokeBackgroundColor=[0,0,0,0],this.fillColor=[0,0,0,0],this.backgroundFillColor=[0,0,0,.5],this.visible=!0,this.isDecoration=!1,this.boxWidth=0,this.boxHeight=0,this.backgroundWidth=0,this.backgroundHeight=0,this.padding={left:0,top:0,right:0,bottom:0}}get _strokeStyle(){return`rgba(${this.strokeColor.join()})`}get _strokeBackgroundStyle(){return`rgba(${this.strokeBackgroundColor.join()})`}get _fillStyle(){return`rgba(${this.fillColor.join()})`}get _backgroundFillStyle(){return`rgba(${this.backgroundFillColor.join()})`}render(){const{backgroundWidth:e,backgroundHeight:i,boxWidth:r,boxHeight:n,padding:s}=this,o=s.left,a=s.top,l=this.x??o+e/2-r/2,c=this.y??a+i/2-n/2,h=l+r,m=c+n;return K("div",{classes:{"esri-box-overlay-item":!0},styles:{left:"0px",top:"0px",width:"100%",height:"100%",visibility:this.visible?"visible":"hidden"}},K("svg",{styles:{width:"100%",height:"100%"}},K("path",{d:`M ${o} ${a} L ${e+o} ${a} L ${e+o} ${i+a} L ${o} ${i+a} Z M ${l} ${c} L ${l} ${m} L ${h} ${m} L ${h} ${c} Z`,fill:this._backgroundFillStyle,stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),K("rect",{fill:this._fillStyle,height:n,stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.join(" ")||void 0,"stroke-width":this.strokeWidth,width:r,x:l,y:c})))}renderCanvas(){}};u([p()],Dn.prototype,"strokeDash",void 0),u([p()],Dn.prototype,"strokeWidth",void 0),u([p()],Dn.prototype,"strokeColor",void 0),u([p()],Dn.prototype,"strokeBackgroundColor",void 0),u([p()],Dn.prototype,"fillColor",void 0),u([p()],Dn.prototype,"backgroundFillColor",void 0),u([p()],Dn.prototype,"visible",void 0),u([p()],Dn.prototype,"isDecoration",void 0),u([p()],Dn.prototype,"boxWidth",void 0),u([p()],Dn.prototype,"boxHeight",void 0),u([p()],Dn.prototype,"backgroundWidth",void 0),u([p()],Dn.prototype,"backgroundHeight",void 0),u([p()],Dn.prototype,"x",void 0),u([p()],Dn.prototype,"y",void 0),u([p()],Dn.prototype,"padding",void 0),u([p({readOnly:!0})],Dn.prototype,"_strokeStyle",null),u([p({readOnly:!0})],Dn.prototype,"_strokeBackgroundStyle",null),u([p({readOnly:!0})],Dn.prototype,"_fillStyle",null),u([p({readOnly:!0})],Dn.prototype,"_backgroundFillStyle",null),Dn=u([U("esri.views.overlay.BoxOverlayItem")],Dn);const _xt=Dn;async function ZMe(t,e,i){if(!t)throw new Q("print:invalid-layout-info-task-url","Can't fetch layout template info",{url:t});if(await W1t(t,ry.GetLayoutTemplatesInfo,i)==="async"){const r=await BMe(t,e,void 0,i||void 0);return await r.waitForJobCompletion(),(await r.fetchResultData("Output_JSON")).value}return(await VMe(t,e,null,i)).results[0].value}const YMe=new Et({inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});let Wo=class extends ye{constructor(e){super(e),this.description=null,this.format=null,this.state="not-loaded",this.label=null,this.layoutInfoTaskUrl=null,this.layout=null,this.layoutItem=null,this.layoutOptions=null,this.layoutTemplateInfo=null,this.type=null}get id(){var e;return((e=this.layoutItem)==null?void 0:e.id)??`${this.layout}-${_4(JSON.stringify(this.toJSON()))}`}get mapSurroundInfoOptions(){var r,n,s;const e=(n=(r=this.layoutTemplateInfo)==null?void 0:r.layoutOptions)==null?void 0:n.mapSurroundInfos;if(!e)return null;const i={northArrow:[],scaleBar:[],legend:[]};for(const o of e)switch(o.type){case"CIMMarkerNorthArrow":i.northArrow.push(o);break;case"CIMScaleLine":i.scaleBar.push(o);break;case"CIMGroupElement":(s=o.elements)!=null&&s.some(a=>a.type==="CIMScaleLine")&&i.scaleBar.push(o);break;case"CIMLegend":i.legend.push(o)}return i}get pageUnits(){var e,i;return YMe.fromJSON((i=(e=this.layoutTemplateInfo)==null?void 0:e.pageUnits)==null?void 0:i.toLowerCase())}_updateLayoutOptions(e){var s,o,a,l,c,h,m,y;const i=((s=this.layoutOptions)==null?void 0:s.legend)??((o=e.layoutOptions)==null?void 0:o.hasLegend),r=((a=this.layoutOptions)==null?void 0:a.northArrow)??((l=this.mapSurroundInfoOptions)!=null&&l.northArrow.length?(c=this.mapSurroundInfoOptions)==null?void 0:c.northArrow.some(({visible:v})=>v):void 0),n=((h=this.layoutOptions)==null?void 0:h.scaleBar)??((m=this.mapSurroundInfoOptions)!=null&&m.scaleBar.length?(y=this.mapSurroundInfoOptions)==null?void 0:y.scaleBar.some(({visible:v})=>v):void 0);this._set("layoutOptions",{legend:i,northArrow:r,scaleBar:n})}async fetchLayoutItemTemplateInfo(e){const{layoutItem:i}=this;if(i!=null&&i.id&&!this.layoutTemplateInfo&&this.state!=="loaded")try{this._set("state","loading");const r=this.layoutInfoTaskUrl;if(!r)throw new Q("print:invalid-layout-info-task-url","Can't fetch layout template info",{url:r});i.access!=="public"&&Tt&&await Tt.getCredential(r);const n={Layout_Item_ID:JSON.stringify({id:i.id})},s=(await ZMe(r,n,e))[0];this.setLayoutTemplateInfo(s)}catch(r){this._set("state",ds(r)?"not-loaded":"error")}}setLayoutTemplateInfo(e){this._set("layoutTemplateInfo",e),this._updateLayoutOptions(e),this._set("state","loaded")}};u([p({json:{write:!0}})],Wo.prototype,"description",void 0),u([at(S5)],Wo.prototype,"format",void 0),u([p({readOnly:!0})],Wo.prototype,"id",null),u([p({readOnly:!0})],Wo.prototype,"state",void 0),u([p({json:{write:!0}})],Wo.prototype,"label",void 0),u([p()],Wo.prototype,"layoutInfoTaskUrl",void 0),u([p({json:{read:a$,write:!0}})],Wo.prototype,"layout",void 0),u([p({type:At,json:{write:!0}})],Wo.prototype,"layoutItem",void 0),u([p({readOnly:!0,json:{write:!0}})],Wo.prototype,"layoutOptions",void 0),u([p({readOnly:!0})],Wo.prototype,"layoutTemplateInfo",void 0),u([p({readOnly:!0})],Wo.prototype,"mapSurroundInfoOptions",null),u([p({readOnly:!0})],Wo.prototype,"pageUnits",null),u([p()],Wo.prototype,"type",void 0),Wo=u([U("esri.widgets.Print.CustomTemplate")],Wo);const l$=Wo;let hd=class extends st{constructor(e){super(e),this.state="pending",this.url=""}initialize(){this.addHandles(Le(()=>[this.extension,this.name],()=>this._setFormattedFileName(),gi))}_setFormattedFileName(){this.name&&this.extension&&(this.formattedName=this.count?`${this.name}(${this.count}).${this.extension}`:`${this.name}.${this.extension}`)}};u([p()],hd.prototype,"count",void 0),u([p()],hd.prototype,"error",void 0),u([p()],hd.prototype,"extension",void 0),u([p()],hd.prototype,"formattedName",void 0),u([p()],hd.prototype,"name",void 0),u([p()],hd.prototype,"portalItem",void 0),u([p()],hd.prototype,"state",void 0),u([p()],hd.prototype,"url",void 0),hd=u([U("esri.widgets.Print.FileLink")],hd);const XMe=hd;let ln=class extends st{constructor(e){super(e),this._abortController=null,this.attributionEnabled=!0,this.author=null,this.copyright=null,this.customTextElements=null,this.dpi=96,this.fileName=null,this.forceFeatureAttributes=!1,this.format="pdf",this.height=null,this.includeTables=!0,this.id=null,this.state="ready",this.layout="letter-ansi-a-landscape",this.layoutItem=null,this.legendEnabled=void 0,this.northArrowEnabled=void 0,this.scale=null,this.scaleBarEnabled=void 0,this.scaleEnabled=!1,this.title=null,this.width=null}async applyTemplate(e,i){var s,o,a,l,c;if((e==null?void 0:e.id)===this.id&&(e==null?void 0:e.state)!=="error"||(this._abortController&&(this._abortController.abort(),this._abortController=null),!e))return;if(this._set("state","pending"),this._resetMapSurroundInfoOptions(),this._set("id",e.id),this.set({layout:e.layout,layoutItem:e.layoutItem}),!e.layoutOptions&&e.layoutItem){const h=new AbortController;if(this._abortController=h,await e.fetchLayoutItemTemplateInfo({signal:this._abortController.signal}),e.state!=="loaded")return e.state==="error"&&this._set("state","error"),this._abortController!==h?void 0:void(this._abortController=null);this._abortController=null}const r=i==null?void 0:i.customLayoutOptions,n=(i==null?void 0:i.customTextElements)??((o=(s=e.layoutTemplateInfo)==null?void 0:s.layoutOptions)==null?void 0:o.customTextElements)??this.customTextElements;this.set({customTextElements:n?ce(n):void 0,format:this.format??e.format,legendEnabled:(r==null?void 0:r.legend)??((a=e.layoutOptions)==null?void 0:a.legend)??this.legendEnabled,northArrowEnabled:(r==null?void 0:r.northArrow)??((l=e.layoutOptions)==null?void 0:l.northArrow)??this.northArrowEnabled,scaleBarEnabled:(r==null?void 0:r.scaleBar)??((c=e.layoutOptions)==null?void 0:c.scaleBar)??this.scaleBarEnabled}),this._set("state","ready")}reset(){this._set("id",null),this._set("state","ready"),this.set({layout:null,layoutItem:null,customTextElements:null}),this._resetMapSurroundInfoOptions()}_resetMapSurroundInfoOptions(){this.set({legendEnabled:void 0,northArrowEnabled:void 0,scaleBarEnabled:void 0})}};u([p()],ln.prototype,"attributionEnabled",void 0),u([p()],ln.prototype,"author",void 0),u([p()],ln.prototype,"copyright",void 0),u([p()],ln.prototype,"customTextElements",void 0),u([p()],ln.prototype,"dpi",void 0),u([p()],ln.prototype,"fileName",void 0),u([p()],ln.prototype,"forceFeatureAttributes",void 0),u([p()],ln.prototype,"format",void 0),u([p()],ln.prototype,"height",void 0),u([p()],ln.prototype,"includeTables",void 0),u([p({readOnly:!0})],ln.prototype,"id",void 0),u([p({readOnly:!0})],ln.prototype,"state",void 0),u([p()],ln.prototype,"layout",void 0),u([p({type:At})],ln.prototype,"layoutItem",void 0),u([p()],ln.prototype,"legendEnabled",void 0),u([p()],ln.prototype,"northArrowEnabled",void 0),u([p()],ln.prototype,"scale",void 0),u([p()],ln.prototype,"scaleBarEnabled",void 0),u([p()],ln.prototype,"scaleEnabled",void 0),u([p()],ln.prototype,"title",void 0),u([p()],ln.prototype,"width",void 0),ln=u([U("esri.widgets.Print.TemplateOptions")],ln);const KMe=ln,xxt=[30,144,255,255],mfe=[237,211,23,255],Sxt=[216,48,32,255],$xt=new Set(["GISProfessionalStdUT","GISProfessionalAdvUT"]),Txt=/(\/GPServer\/).+/i,Ext=96,rT=Ze.ofType(l$),QMe=Ze.ofType(XMe);function Cxt(t){var i;t.layoutOptions??(t.layoutOptions={}),(i=t.layoutOptions).customTextElements??(i.customTextElements=[]);const e="date";if(!t.layoutOptions.customTextElements.find(r=>e in r)){const{customTextElements:r}=t.layoutOptions;let n=yc(Date.now(),cS("short-date"));r4()==="ar"&&(n=""+n),r.push({date:n})}}function fG(t,e,i){e&&e.visible!==i&&t.layoutOptions&&(t.layoutOptions.elementOverrides?t.layoutOptions.elementOverrides[e.name]={visible:i}:t.layoutOptions.elementOverrides={[e.name]:{visible:i}})}let er=class extends _s.LoadableMixin(gu.EsriPromiseMixin(pa.EventedAccessor)){constructor(e){super(e),this._serviceTemplateCustomTextElements=null,this._templateIdToCustomTemplate=new __,this._isFreeHand=!1,this._freeHandWidth=0,this._freehandHeight=0,this._asyncPrintTaskUrl=null,this._layoutInfoTaskUrl=null,this._portalLayoutInfoTaskUrl=null,this._customLayoutOptions=null,this._exportedFileNameMap={},this._layoutTemplateInfosCache=new Map,this._tasksInfoCache=new Map,this.allowedFormats="all",this.allowedLayouts="all",this.browseTemplates=new rT,this.defaultTemplates=new rT,this.error=null,this.exportedLinks=new QMe,this.extraParameters=null,this.includeDefaultTemplates=!0,this.outSpatialReference=null,this.portal=Fe.getDefault(),this.portalTemplateIds=[],this.printServiceTemplates=new rT,this.defaultTemplate=null,this.showPrintAreaEnabled=!1,this.printServiceUrl=null,this.printTimeout=12e4,this.saveExportEnabled=!1,this.templatesInfo=null,this.updateDelay=1e3,this.view=null,this.templateCustomTextElements=null,this.templateOptions=new KMe}initialize(){this.addHandles([Le(()=>[this.showPrintAreaEnabled,this.view],()=>{var e,i;this.showPrintAreaEnabled?this._enablePrintPreview():(this.removeHandles("overlay-handler"),(i=(e=this.view)==null?void 0:e.overlay)==null||i.removeItem(this._getOverlayItem()))}),Le(()=>[this.templateOptions.layout,this.templateOptions.layoutItem],()=>{this.loaded&&this._processTemplateOptions()}),Le(()=>[this.allowedFormats,this.allowedLayouts],()=>{this.loaded&&this._loadTemplateInfos()}),Le(()=>this.exportedLinks,()=>{for(const{name:e,extension:i}of this.exportedLinks)e&&i&&this._updateExportedFileNameMap(`${e}${i}`)},gi)])}destroy(){var e;this.removeHandles("overlay-handler"),this.view&&(this._overlayItem&&((e=this.view.overlay)==null||e.removeItem(this._overlayItem),this._overlayItem.destroy(),this._overlayItem=null),this.view=null)}get effectivePrintServiceUrl(){return this.printServiceUrl??null}get effectiveTemplateCustomTextElements(){if(!this._serviceTemplateCustomTextElements)return{};const e=ce(this._serviceTemplateCustomTextElements);return this.templateCustomTextElements&&Object.keys(this.templateCustomTextElements).forEach(i=>{var n;const r=e[i];if(r){const s=(n=this.templateCustomTextElements)==null?void 0:n[i];r.forEach(o=>{const[a]=Object.entries(o)[0];s==null||s.forEach(l=>{const[c,h]=Object.entries(l)[0];a===c&&(o[a]=h)})})}}),Object.freeze(e)}get state(){var e;return this.loadStatus==="loading"?"initializing":this.loadStatus==="failed"||this.error?"error":this.loadStatus==="loaded"&&((e=this.view)!=null&&e.ready)?"ready":"disabled"}async load(e){return this.addResolvingPromise(this._loadResources(e).catch(i=>this.error=i)),this}async print(e){var c;const{view:i,extraParameters:r,updateDelay:n,outSpatialReference:s}=this;if(!i)throw new Q("print:view-required","view is not set");Cxt(e);const o=this._getOverlayItem(),a=e.scalePreserved||!this.showPrintAreaEnabled?void 0:Qxe(new jt,i.viewpoint,e.layout==="map-only"?[e.exportOptions.width,e.exportOptions.height]:[o.boxWidth,o.boxHeight]),l=new wxt({view:i,template:e,extent:a,extraParameters:r,updateDelay:n,outSpatialReference:s});try{const h=!!((c=e.layoutItem)!=null&&c.id)&&(this.portalTemplateIds.includes(e.layoutItem.id)||this.browseTemplates.some(m=>{var y,v;return((y=m.layoutItem)==null?void 0:y.id)===((v=e.layoutItem)==null?void 0:v.id)}));return await G1t(h&&this._asyncPrintTaskUrl?this._asyncPrintTaskUrl:this.effectivePrintServiceUrl,l,{timeout:this.printTimeout})}catch(h){throw new Q("print:export-error","An error occurred while exporting the web map.",{error:h})}}toPrintTemplate({attributionEnabled:e,author:i,copyright:r,customTextElements:n,dpi:s,forceFeatureAttributes:o,format:a,height:l,id:c,includeTables:h,layout:m,layoutItem:y,legendEnabled:v,northArrowEnabled:w,scale:x,scaleBarEnabled:S,scaleEnabled:C,title:k,width:A}){var D;if(!m&&!y)throw new Q("print:layout-required","layout is not set");const R=new qMe({attributionVisible:e,forceFeatureAttributes:o,format:a,includeTables:h,layout:m,layoutItem:y,layoutOptions:{authorText:i||"",copyrightText:r||"",customTextElements:n,titleText:k||""},outScale:x??0,scalePreserved:C});if(A&&(R.exportOptions.width=A),l&&(R.exportOptions.height=l),s&&(R.exportOptions.dpi=s),R.layoutOptions){v||(R.layoutOptions.legendLayers=[]);const B=(D=this.getLayoutTemplateById(c))==null?void 0:D.mapSurroundInfoOptions;if(B){const z=B.northArrow;for(const ee of z)fG(R,ee,w);const W=B.scaleBar;for(const ee of W)fG(R,ee,S);const Y=B.legend;for(const ee of Y)fG(R,ee,v)}}return R}getLayoutTemplateById(e){return e?this._templateIdToCustomTemplate.get(e):null}async addPortalTemplate(e){if(!this.portal||!(e!=null&&e.id))return;try{e.loaded||await e.load()}catch{return void this.applyTemplate(this.defaultTemplate)}const i=new l$({type:"browse-template",layoutInfoTaskUrl:this._portalLayoutInfoTaskUrl,label:e.title,layoutItem:e});this._templateIdToCustomTemplate.set(i.id,i),this.browseTemplates.add(i)}removePortalTemplate(e){e.layoutItem&&this.templateOptions.id===e.layoutItem.id&&(this.defaultTemplate?this.applyTemplate(this.defaultTemplate):this.templateOptions.reset()),this.browseTemplates.remove(e),this._templateIdToCustomTemplate.delete(e.id)}async applyTemplate(e){var n,s,o,a;if(e&&e===this.getLayoutTemplateById(this.templateOptions.id)||(this.templateOptions.reset(),!e))return;if(e==="map-only")return void(this.templateOptions.layout="map-only");!e.layout||!this.templatesInfo||this.templatesInfo.layout.choiceList.includes(e.layout)||(this.defaultTemplate?e=this.defaultTemplate:this.templateOptions.reset());const i=e.layout||((n=e.layoutItem)==null?void 0:n.id),r=i?(s=this.templateCustomTextElements)==null?void 0:s[i]:void 0;if(await this.templateOptions.applyTemplate(e,{customTextElements:r,customLayoutOptions:this._customLayoutOptions}),i&&this._serviceTemplateCustomTextElements&&!this._serviceTemplateCustomTextElements[i]&&((a=(o=e.layoutTemplateInfo)==null?void 0:o.layoutOptions)==null?void 0:a.customTextElements)){const l=ce(this._serviceTemplateCustomTextElements);l[i]=e.layoutTemplateInfo.layoutOptions.customTextElements,this._serviceTemplateCustomTextElements=Object.freeze(l)}}createExportedFileLink(e){const i=this.toPrintTemplate(this.templateOptions).format.toLowerCase(),r=i.includes("png")?"png":i,n=e+r;return this._updateExportedFileNameMap(n),new XMe({name:e,extension:r,count:this._exportedFileNameMap[n]})}export(e){const i=this.createExportedFileLink(e);this.exportedLinks.add(i);const r=this.print(this.toPrintTemplate(this.templateOptions)).then(n=>i.set({url:n==null?void 0:n.url,state:"ready"})).catch(n=>i.set({error:n,state:"error"}));return this.emit("submit",{link:i,saveExportEnabled:this.saveExportEnabled}),r.then(n=>this.emit("complete",{link:n,saveExportEnabled:this.saveExportEnabled})),{link:i,promise:r}}async _loadResources(e){this.destroyed||(await this._loadUrls(e),await this._loadTemplateInfos(e),this._updateOverLayItem())}async _loadTemplateInfos(e){const i=[...this.defaultTemplates,...this.printServiceTemplates];for(const{id:s}of i)this._templateIdToCustomTemplate.delete(s);this.defaultTemplates.removeAll(),this.printServiceTemplates.removeAll();const[r,n]=await Promise.all([this._getLayoutToLayoutTemplateInfos(e),this._getPrintServiceTemplatesInfo(e)]);await this._loadAllTemplates(r,n,e),this._processPrintServiceTemplatesInfo(n),await this._processTemplateOptions()}_updateExportedFileNameMap(e){this._exportedFileNameMap[e]!==void 0?this._exportedFileNameMap[e]++:this._exportedFileNameMap[e]=0}async _processTemplateOptions(){const{layout:e,layoutItem:i}=this.templateOptions;if(e!=="map-only"){if(this._customLayoutOptions={legend:this.templateOptions.legendEnabled,northArrow:this.templateOptions.northArrowEnabled,scaleBar:this.templateOptions.scaleBarEnabled},i==null?void 0:i.id){try{i.loaded||await i.load()}catch{return void this.applyTemplate(this.defaultTemplate)}let r=this._templateIdToCustomTemplate.get(i.id);r||(r=new l$({label:i.title,layoutItem:i,layoutInfoTaskUrl:this._portalLayoutInfoTaskUrl}),this._templateIdToCustomTemplate.set(r.id,r)),await this.applyTemplate(r)}else if(e){const r=this.defaultTemplates.find(n=>n.layout===this.templateOptions.layout)??this.printServiceTemplates.find(n=>n.layout===this.templateOptions.layout);await this.applyTemplate(r??this.defaultTemplate)}}}async _loadPortal(e){try{await this.portal.load(e)}catch(i){throw new Q("print:could-not-load-portal","Cannot load print resource information from portal",{error:i,url:this.effectivePrintServiceUrl})}}async _loadUrls(e){var r,n;if(this.printServiceUrl)this._set("effectivePrintServiceUrl",this.printServiceUrl),this._layoutInfoTaskUrl=await this._getLayoutInfoTaskUrl(this.effectivePrintServiceUrl,e);else{await this._loadPortal(e);const{printTask:s,asyncPrintTask:o,layoutInfoTask:a}=((r=this.portal)==null?void 0:r.helperServices)??{};this._set("effectivePrintServiceUrl",s==null?void 0:s.url),this._asyncPrintTaskUrl=o==null?void 0:o.url,this._layoutInfoTaskUrl=await this._getLayoutInfoTaskUrl(this.effectivePrintServiceUrl,e),a!=null&&a.url&&this.effectivePrintServiceUrl!==a.url?this._portalLayoutInfoTaskUrl=await this._getLayoutInfoTaskUrl(a.url,e):this._portalLayoutInfoTaskUrl=this._layoutInfoTaskUrl}const i=(n=this.effectivePrintServiceUrl)==null?void 0:n.toLowerCase().split("/");if(!(i!=null&&i.includes("gpserver")))throw new Q("print:invalid-print-service-url","Can't fetch print templates information from provided URL",{url:this.effectivePrintServiceUrl})}async _getLayoutInfoTaskUrl(e,i){if(!e)return null;const r=await pZ(e,ry.GetLayoutTemplatesInfo,i);return r?e.replace(Txt,`$1${encodeURI(r.displayName)}`):null}_getPortalDefaultTemplates(e,i){var r,n,s,o,a;return((a=(o=(s=(n=(r=this.portal)==null?void 0:r.helperServices)==null?void 0:n.printTask)==null?void 0:s.templates)==null?void 0:o.filter(l=>l.layout.toLowerCase()!=="map_only"&&(!i||i.includes(a$(l.layout)))))==null?void 0:a.map(l=>{const c=l$.fromJSON(l);if(c.type="default-template",c.layoutInfoTaskUrl=this._layoutInfoTaskUrl,c.layout){const h=e.get(c.layout);h&&c.setLayoutTemplateInfo(h)}return c}))??[]}async _getPortalCustomTemplates(e){if(this.printServiceUrl||!this.portal)return[];const{layoutGroupQuery:i,user:r}=this.portal,n=Gve.test(this.portal.url),s=r==null?void 0:r.userLicenseTypeId,o=s&&$xt.has(s);if(!i||n&&!o)return[];const a=new fn({query:i,disableExtraQuery:!0}),l=await this.portal.queryGroups(a,e);if(!l.total)return[];const c=l.results[0],h=new fn({num:100,query:"type:Layout",sortField:c.sortField,sortOrder:c.sortOrder??void 0}),m=(await c.queryItems(h,e)).results;return m.length?m.map(y=>(this.portalTemplateIds.push(y.id),new l$({type:"default-template",label:y.title,layoutItem:y,layoutInfoTaskUrl:this._portalLayoutInfoTaskUrl}))):[]}async _loadAllTemplates(e,i,r){var o;let n=!1;const s=(o=i==null?void 0:i.layout)==null?void 0:o.choiceList;if(this.includeDefaultTemplates&&this.portal&&!this.printServiceUrl){const a=this._getPortalDefaultTemplates(e,s);n=!!a.length,this.defaultTemplates.addMany(a);const l=await this._getPortalCustomTemplates(r);this.defaultTemplates.addMany(l);for(const c of this.defaultTemplates)this._templateIdToCustomTemplate.set(c.id,c)}n||e.forEach((a,l)=>{if(!s||s.includes(l)){const c=new l$({type:"print-service-template",layout:l,layoutInfoTaskUrl:this._layoutInfoTaskUrl});c.setLayoutTemplateInfo(a),this.printServiceTemplates.add(c),this._templateIdToCustomTemplate.set(c.id,c)}})}_processPrintServiceTemplatesInfo(e){var r;this._set("templatesInfo",e);const i=(r=e==null?void 0:e.layout)==null?void 0:r.defaultValue;if(i&&i!=="map-only"){const n=this.defaultTemplates.find(s=>s.layout===i)??this.printServiceTemplates.find(s=>s.layout===i)??this.defaultTemplates.at(0)??this.printServiceTemplates.at(0);this._set("defaultTemplate",n)}}async _getLayoutToLayoutTemplateInfos(e){const i=this._layoutInfoTaskUrl,r=i?this._layoutTemplateInfosCache.get(i):void 0,n=r??await ZMe(i,void 0,e);r||this._layoutTemplateInfosCache.set(i,n);const s=new Map,o={};for(const a of n){const l=a$(a.layoutTemplate);s.set(l,a),o[l]=a.layoutOptions.customTextElements}return this._serviceTemplateCustomTextElements=Object.freeze(o),s}async _getPrintServiceTemplatesInfo(e){const i=this.effectivePrintServiceUrl?this._tasksInfoCache.get(this.effectivePrintServiceUrl):void 0,r=i??await pZ(this.effectivePrintServiceUrl,ry.ExportWebMap,e);if(!r)throw new Q("print:unavailable-service-info","Can't fetch templates info from service");i||this._tasksInfoCache.set(this.effectivePrintServiceUrl,r);const{parameters:n}=r,s=n.find(({name:a})=>a==="Format"),o=n.find(({name:a})=>a==="Layout_Template");return{format:this._getFormat(s),layout:this._getLayout(o)}}_getFormat(e){const i=this.allowedFormats==="all"?e.choiceList:e.choiceList.filter(o=>typeof this.allowedFormats!="string"&&this.allowedFormats.some(a=>new RegExp(`\\b${a}\\b`,"i").test(o))),r=(i.length?i:e.choiceList).map(o=>S5.fromJSON(o)).filter(Mr),n=S5.fromJSON(e.defaultValue),s=r.some(o=>new RegExp(`\\b${n}\\b`,"i").test(o))?n:r[0];return{choiceList:r,defaultValue:s}}_getLayout(e){const i=e.choiceList.filter(a=>a.toLowerCase()!=="map_only"),r=this.allowedLayouts==="all"?i:i.filter(a=>this.allowedLayouts.includes(a$(a))),n=(r.length?r:i).map(a$).filter(Mr),s=a$(e.defaultValue),o=n.includes(s)?s:n.find(a=>/(?=.*letter)(?=.*landscape)/i.test(a))??n.find(a=>/(?=.*a4)(?=.*landscape)/i.test(a))??n[0];return{choiceList:n,defaultValue:o}}_getOverlayItem(){return this._overlayItem||(this._overlayItem=new _xt({strokeDash:[5],strokeWidth:2,strokeColor:[30,144,255,255]})),this._overlayItem}_enablePrintPreview(){var r,n,s;if(!((r=this.view)!=null&&r.overlay))return;const e=this.templateOptions,i=this._getOverlayItem();this.addHandles([Le(()=>{var o,a,l,c;return[e.width,e.height,e.scaleEnabled,e.scale,e.layout,e.layoutItem,e.id,e.state,e.dpi,(o=this.view)==null?void 0:o.scale,(a=this.view)==null?void 0:a.size,(l=this.view)==null?void 0:l.state.paddedViewState.size,(c=this.view)==null?void 0:c.state.padding,this.loaded]},()=>this._updateOverLayItem(),gi),(n=this.view)==null?void 0:n.on("drag",["Shift"],o=>this._handleDrag(o),zd.WIDGET),(s=this.view)==null?void 0:s.on("key-down",["Escape"],()=>this._resetDrag(),zd.WIDGET)],"overlay-handler"),this.view.overlay.addItem(i)}_updateOverLayItem(){var x;if(!this.view)return;const e=this.templateOptions,i=this._getOverlayItem(),r=((x=e.layoutItem)==null?void 0:x.id)??e.layout,n=this.view,s=n.spatialReference,[o,a]=n.state.paddedViewState.size,l=n.state.padding;let c=0,h=0;if(r==="map-only")e.width!=null&&e.height!=null&&(c=e.width,h=e.height);else if(r){const S=e.id?this._templateIdToCustomTemplate.get(e.id):null,{webMapFrameSize:C,pageUnits:k}=(S==null?void 0:S.layoutTemplateInfo)??{};let A=!1;if(C&&k)if(this._isFreeHand){const R=C[0]/C[1];c=this._freeHandWidth,h=this._freehandHeight,c>h?h=c/R:c=h*R}else{const R=YMe.fromJSON(k.toLowerCase()),D=s.unit;IA(R)===IA(D)?(c=pn(C[0],R,D),h=pn(C[1],R,D)):(A=!0,c=C[0],h=C[1])}if(!this._isFreeHand)if(e.scaleEnabled&&e.scale){const R=A?Math.min(o/c,a/h):Ha(s)*pX*e.dpi;c*=R,h*=R}else if(c===0||h===0)c=o,h=a;else{const R=(o-.1*o)/c,D=(a-.1*a)/h,B=Math.min(R,D);c*=B,h*=B}}const{scaleEnabled:m,scale:y}=e,v=m&&y?y/this.view.scale:1,w=m&&y?Ext/e.dpi:1;if(i.boxWidth=c*v*w||o,i.boxHeight=h*v*w||a,l&&(i.padding=l),i.backgroundWidth=o??0,i.backgroundHeight=a??0,this.loadStatus==="loading")i.strokeColor=mfe;else if(this.loadStatus==="loaded")switch(this.templateOptions.state){case"pending":i.strokeColor=mfe;break;case"ready":i.strokeColor=xxt;break;case"error":i.strokeColor=Sxt}}_resetDrag(){this._isFreeHand=!1,this._updateOverLayItem()}_handleDrag(e){switch(e.action){case"start":this._start();break;case"update":this._update(e);break;case"end":this._end()}e.stopPropagation()}_start(){this._isFreeHand=!0}_update(e){const i=this._getOverlayItem(),{x:r,y:n}=e,{x:s,y:o}=e.origin;r>s?(i.x=s,i.boxWidth=r-s):(i.x=r,i.boxWidth=s-r),n>o?(i.y=o,i.boxHeight=n-o):(i.y=n,i.boxHeight=o-n)}_end(){const e=this._getOverlayItem();if(!this.view||e.x==null||e.y==null)return;const i=this.view,r=i.toMap(xs(e.x+.5*e.boxWidth,e.y+.5*e.boxHeight));e.x=null,e.y=null,i.goTo({center:r}),this._freeHandWidth=e.boxWidth,this._freehandHeight=e.boxHeight,this.templateOptions.layout==="map-only"&&(this.templateOptions.width=this._freeHandWidth,this.templateOptions.height=this._freehandHeight),this.templateOptions.scale=this.view.scale,this._updateOverLayItem()}};u([p()],er.prototype,"_serviceTemplateCustomTextElements",void 0),u([p()],er.prototype,"_templateIdToCustomTemplate",void 0),u([p()],er.prototype,"allowedFormats",void 0),u([p()],er.prototype,"allowedLayouts",void 0),u([p({type:rT})],er.prototype,"browseTemplates",void 0),u([p({type:rT})],er.prototype,"defaultTemplates",void 0),u([p()],er.prototype,"error",void 0),u([p({type:QMe})],er.prototype,"exportedLinks",void 0),u([p()],er.prototype,"extraParameters",void 0),u([p()],er.prototype,"includeDefaultTemplates",void 0),u([p({readOnly:!0})],er.prototype,"effectivePrintServiceUrl",null),u([p()],er.prototype,"effectiveTemplateCustomTextElements",null),u([p({type:et})],er.prototype,"outSpatialReference",void 0),u([p({type:Fe})],er.prototype,"portal",void 0),u([p()],er.prototype,"portalTemplateIds",void 0),u([p({type:rT})],er.prototype,"printServiceTemplates",void 0),u([p({readOnly:!0})],er.prototype,"defaultTemplate",void 0),u([p()],er.prototype,"showPrintAreaEnabled",void 0),u([p()],er.prototype,"printServiceUrl",void 0),u([p()],er.prototype,"printTimeout",void 0),u([p()],er.prototype,"saveExportEnabled",void 0),u([p({readOnly:!0})],er.prototype,"state",null),u([p({readOnly:!0})],er.prototype,"templatesInfo",void 0),u([p()],er.prototype,"updateDelay",void 0),u([p()],er.prototype,"view",void 0),u([p()],er.prototype,"templateCustomTextElements",void 0),u([p({type:KMe})],er.prototype,"templateOptions",void 0),er=u([U("esri.widgets.Print.PrintViewModel")],er);const Ixt=er;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const Mxt=dt`@layer{:root{--panel-min-height--large: 240px;--side-spacing: var(--calcite-spacing-lg);--cap-spacing: var(--calcite-spacing-md)}.arcgis-print{display:flex;position:relative;flex-grow:1;padding:0;min-height:var(--panel-min-height--large)!important;overflow-y:auto}.arcgis-print section[aria-hidden=true]{display:none}.arcgis-print__panel-items--centered{display:flex;align-items:center}.arcgis-print__container{display:flex;flex-direction:column;flex-grow:1}.arcgis-print__header-title{margin:0 auto 0 0;padding:var(--calcite-spacing-md) var(--calcite-spacing-lg);font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-bold)}.arcgis-print__panel--error{color:var(--calcite-color-status-danger)}arcgis-print-template-selector{overflow-y:hidden;display:flex}}`,xM="arcgis-print",SM={base:xM,headerTitle:`${xM}__header-title`,panelItemsCentered:`${xM}__panel-items--centered`,printWidgetContainer:`${xM}__container`,panelError:`${xM}__panel--error`},kxt=AC(Ixt),yfe=t=>{if(!t)return"all";const e=typeof t=="string"?t.split(",").map(i=>i.trim()).filter(i=>i):[t];return!e.length||e.includes("all")?"all":e};var tb;let Axt=(tb=class extends qi{constructor(){super(...arguments),this.messages=P1({blocking:!0}),this.viewModel=kxt(this),this._showTemplates=!1,this.error=this.viewModel.error,this.hideHeader=!1,this.position="top-left",this.icon="print",this.allowedFormats=this.viewModel.allowedFormats,this.allowedLayouts=this.viewModel.allowedLayouts,this.exportedLinks=this.viewModel.exportedLinks,this.extraParameters=this.viewModel.extraParameters,this.headingLevel=3,this.excludeDefaultTemplates=!this.viewModel.includeDefaultTemplates,this.excludeOrganizationTemplates=!1,this.outSpatialReference=this.viewModel.outSpatialReference,this.portal=this.viewModel.portal,this.showPrintAreaEnabled=this.viewModel.showPrintAreaEnabled,this.printServiceUrl=this.viewModel.printServiceUrl,this.templateCustomTextElements=this.viewModel.templateCustomTextElements,this.templateOptions=this.viewModel.templateOptions,this.autoDestroyDisabled=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko(),this.arcgisComplete=Ir(()=>this.viewModel,"complete"),this.arcgisSubmit=Ir(()=>this.viewModel,"submit")}async destroy(){await this.manager.destroy(),this.viewModel.destroy()}loaded(){this.manager.onLifecycle(()=>[]),this.viewModel.load();const{height:e,width:i}=this.viewModel.templateOptions;this.viewModel.templateOptions.width=i||800,this.viewModel.templateOptions.height=e||1100}_showTemplateSelector(){this._showTemplates=!0}_hideTemplateSelector(){this._showTemplates=!1}render(){const e={[SM.panelItemsCentered]:this.viewModel.state==="initializing"};return q`<div class=${mt(zs(SM.base,la.widget,la.panel,e))}>${this._renderPanel()}</div>`}_renderPanel(){return this.viewModel.state==="initializing"?q`<calcite-loader label=loading scale=m></calcite-loader>`:q`<calcite-flow><calcite-flow-item .selected=${!this._showTemplates}><div class=${mt(SM.printWidgetContainer)}>${this._renderPanelHeader()}${this._renderPanelContent()}</div></calcite-flow-item><calcite-flow-item .heading=${this.messages.chooseTemplate} .selected=${this._showTemplates} @calciteFlowItemBack=${e=>{e.preventDefault(),this._showTemplates=!1}}><arcgis-print-template-selector .messages=${this.messages} .viewModel=${this.viewModel} .browseTemplateButtonOnClick=${this.browseTemplateButtonOnClick} .hideTemplateSelector=${this._hideTemplateSelector.bind(this)} .excludeOrganizationTemplates=${this.excludeOrganizationTemplates}></arcgis-print-template-selector></calcite-flow-item></calcite-flow>`}_renderPanelHeader(){return this.hideHeader?null:q`<header class=${mt(SM.headerTitle)}>${this.messages.export}</header>`}_renderPanelContent(){const e=this.viewModel.view,i=(e==null?void 0:e.type)!=="2d";return this.error||i?q`<div class=${mt(SM.panelError)}>${e?i?this.messages.sceneViewError:this.messages.serviceError:this.messages.noViewError}</div>`:q`<arcgis-print-main-panel .messages=${this.messages} .viewModel=${this.viewModel} .showTemplateSelector=${this._showTemplateSelector.bind(this)} .allowedFormatsForSaving=${this.allowedFormatsForSaving} .saveAsButtonCallback=${this.saveAsButtonCallback}></arcgis-print-main-panel>`}},tb.properties={_showTemplates:16,error:16,hideHeader:5,referenceElement:1,position:3,icon:1,allowedFormats:[1,{type:String,converter:yfe}],allowedLayouts:[1,{type:String,converter:yfe}],browseTemplateButtonOnClick:0,allowedFormatsForSaving:1,exportedLinks:0,extraParameters:1,headingLevel:9,excludeDefaultTemplates:5,excludeOrganizationTemplates:5,outSpatialReference:0,portal:0,showPrintAreaEnabled:5,printServiceUrl:1,saveAsButtonCallback:0,templateCustomTextElements:0,templateOptions:0,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},tb.styles=Mxt,tb.shadowRootOptions=Zn,tb);or("arcgis-print",Axt);const Yc="esri-layer-list",Wf=`${Yc}__item`,$M={base:Yc,actionMenu:`${Yc}__action-menu`,actionGroup:`${Yc}__action-group`,filterNoResults:`${Yc}__filter-no-results`,item:Wf,itemActive:`${Wf}--active`,itemContentBottom:`${Wf}-content-bottom`,itemMessage:`${Wf}-message`,itemActionIcon:`${Wf}-action-icon`,itemActionImage:`${Wf}-action-image`,itemTemporaryIcon:`${Wf}-temporary-icon`,itemTableIcon:`${Wf}-table-icon`,itemCatalogIcon:`${Wf}-catalog-icon`,statusIndicator:`${Yc}__status-indicator`,publishing:`${Yc}__publishing`,updating:`${Yc}__updating`,connectionStatus:`${Yc}__connection-status`,connectionStatusConnected:`${Yc}__connection-status--connected`,visibleToggle:`${Yc}__visible-toggle`,visibleIcon:`${Yc}__visible-icon`},Uzt=()=>Ty({action:()=>$e(()=>Promise.resolve().then(()=>WZ),void 0)});function jzt(t,e,i){const{title:r,textEnabled:n}=e,{type:s,active:o,uid:a,disabled:l,indicator:c}=t;return t.visible?K("calcite-action",{...e,active:s==="toggle"&&t.value,appearance:"solid","data-action-id":t.id,"data-action-uid":a,disabled:l,icon:fZ(t),indicator:c,loading:o,scale:"s",text:r??"",title:n?void 0:r},i):null}function fZ(t){return t.icon?t.icon:"image"in t&&t.image||t.className?void 0:"question"}function Oxt(t){return t?{backgroundImage:`url(${t})`}:{}}function Vzt({action:t,feature:e}){const i=e==null?void 0:e.attributes,r="image"in t?t.image:void 0;return r&&i?Zp(r,i):r??""}const e2e={hide:"hide",hideChildren:"hide-children"},Pxt=10,Lxt=2;function Rxt({exclusive:t,visible:e,visibilityAppearance:i}){const r=i==="checkbox";return e?t?"circle-f":r?"check-square-f":"view-visible":t?"circle":r?"square":"view-hide"}function Dxt({connectionStatus:t,publishing:e}){return t?t==="connected"?"beacon":"offline":e?"square":"bullet-point"}function Nxt(t){return(t==null?void 0:t.listMode)===e2e.hideChildren}function E5(t){return(t==null?void 0:t.listMode)??void 0}function zxt(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function Fxt(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function Uxt(t){if(!t)return"inherited";const e=Wxt(BQ(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function jxt(t){t==null||t.removeMany(t.filter(e=>e==null?void 0:e.destroyed))}function t2e(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Vxt(t,e){t&&(t.filterPredicate=e?i=>e(yd(i)):void 0)}function Bxt(t){const e=(t!=null&&t.layer&&BQ(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&e.type!=="catalog"&&(Jxt(e)??!0)}function Gxt(t){return E5(t)!==e2e.hide}function Hxt(t,e){if(!t||e==null||isNaN(e))return!1;const i=zxt(t),r=Fxt(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,s=r!=null&&!isNaN(r)&&r>0&&e<r;return n||s}function i2e(t,e){t==null||t.sort((i,r)=>{const n="uid"in i?e.indexOf(i.uid):-1,s="uid"in r?e.indexOf(r.uid):-1;return n>s?-1:n<s?1:0})}function qxt(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=t2e(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),i2e(n,e)}function gfe(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function BQ(t){return t!=null&&"layer"in t&&t.layer!=null}function Wxt(t){const e=r2e(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function Jxt(t){const e=r2e(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function r2e(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function yd(t){return t==null?void 0:t["data-item"]}function vfe(t){return t==null?void 0:t.getAttribute("data-layer-type")}function Zxt(t){const{children:e,error:i}=t,r="incompatible"in t&&t.incompatible;return!!(e!=null&&e.filter(n=>!n.hidden).length)&&!i&&!r}function Yxt(t){for(const e of t)for(const i of e)if(i.type==="button"||i.type==="toggle")return i}var mZ,q_;let ni=(q_=class extends Yn{constructor(e){super(e),this.dragEnabled=!1,this.listModeDisabled=!1,this.parent=null,this.parentTitles=null,this.viewModel=null,this._onActionMenuOpen=i=>{this.item.actionsOpen=i.currentTarget.open},this._setTooltipReference=i=>{var r,n;(n=this.onTooltipReferenceChange)==null||n.call(this,(r=this.item.layer)==null?void 0:r.uid,i)},this._removeTooltipReference=()=>{var i,r;(r=this.onTooltipReferenceChange)==null||r.call(this,(i=this.item.layer)==null?void 0:i.uid,null)}}loadDependencies(){return Ty({"action-group":()=>$e(()=>Promise.resolve().then(()=>kNe),void 0),"action-menu":()=>$e(()=>Promise.resolve().then(()=>ENe),void 0),action:()=>$e(()=>Promise.resolve().then(()=>WZ),void 0),icon:()=>$e(()=>Promise.resolve().then(()=>qZ),void 0),"list-item":()=>$e(()=>Promise.resolve().then(()=>h_t),void 0),list:()=>$e(()=>Promise.resolve().then(()=>LMe),void 0),notice:()=>$e(()=>Promise.resolve().then(()=>dY),void 0)})}render(){var x,S;const e=this.parentTitles??[],{_title:i,item:r,activeItem:n,selectionMode:s,selectedItems:o,messages:a,parent:l,css:c,dragDisabled:h}=this,m="visibleAtCurrentTimeExtent"in r&&"layerInvisibleAtTime"in a&&!r.visibleAtCurrentTimeExtent?`${i} (${a.layerInvisibleAtTime})`:"visibleAtCurrentScale"in r&&"layerInvisibleAtScale"in a&&!r.visibleAtCurrentScale?`${i} (${a.layerInvisibleAtScale})`:i,y="parent"in r&&((S=(x=r.parent)==null?void 0:x.layer)==null?void 0:S.type)==="catalog",{layer:v}=r,w="visibleAtCurrentScale"in r&&!r.visibleAtCurrentScale||"visibleAtCurrentTimeExtent"in r&&!r.visibleAtCurrentTimeExtent;return K("calcite-list-item",{afterCreate:C=>this._focusSelectedDragEl(C,r),afterUpdate:C=>this._focusSelectedDragEl(C,r),class:this.classes(c.item,"itemActive"in c&&{[c.itemActive]:n===r}),"data-item":r,"data-layer-id":v==null?void 0:v.id,dragDisabled:!r.sortable||y||h,expanded:"open"in r&&r.open,id:v==null?void 0:v.uid,key:`list-item-${v==null?void 0:v.uid}`,label:i,metadata:{parentTitles:e,_title:i},selected:s!=="none"&&o.includes(r),title:m,unavailable:w,value:v==null?void 0:v.uid,onCalciteListItemSelect:C=>"visible"in r&&this._handleCalciteListItemSelect(C,r,l),onCalciteListItemToggle:C=>"open"in r&&this._handleCalciteListItemToggle(C,r)},this._renderedCatalogFootprintIcon,this._renderedCatalogDynamicIcon,this._renderedItemStatus,this._renderedItemToggle,this._renderedCatalogSelectNode,this._renderedItemTemporaryIcon,this._renderedChildList,this._renderedItemMessage,this._renderedPanel,this._renderedPanelAction,this._renderedActions)}get _title(){const{messages:e}=this;return this.item.title||("untitledTable"in e?e.untitledTable:e.untitledLayer)}get _renderedItemStatus(){const{item:e,parent:i,visibleElements:r,css:n}=this;if(!r.statusIndicators)return null;const{publishing:s}=e,o="updating"in e&&e.updating&&!i,a="connectionStatus"in e?e.connectionStatus:void 0,l=!!a;return K("calcite-icon",{class:this.classes(n.statusIndicator,{[n.publishing]:s},"updating"in n&&{[n.updating]:o},"connectionStatus"in n&&{[n.connectionStatus]:l},"connectionStatusConnected"in n&&{[n.connectionStatusConnected]:l&&a==="connected"}),icon:Dxt({connectionStatus:a,publishing:s}),key:"layer-item-status",scale:"s",slot:"content-end"})}get _renderedItemTemporaryIcon(){const{item:e,visibleElements:i,css:r}=this,{layer:n}=e,s="temporaryLayerIndicators"in i&&i.temporaryLayerIndicators,o="temporaryTableIndicators"in i&&i.temporaryTableIndicators,a=n&&"persistenceEnabled"in n&&(g4(n)||!n.persistenceEnabled);return(s||o)&&a?K("calcite-icon",{class:r.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"content-start",title:this.messages.temporary}):null}get _renderedItemToggle(){const{_title:e,item:i,parent:r,messages:n,visibilityAppearance:s,css:o}=this;if(!("visible"in i&&"layerVisibility"in n&&"showLayer"in n&&"hideLayer"in n&&"visibleToggle"in o&&s))return null;const{visible:a}=i,l=this._getParentVisibilityMode(r);if(l==="inherited")return null;const c=Rxt({visible:a,exclusive:l==="exclusive",visibilityAppearance:s}),h=s==="checkbox",m=n.layerVisibility,y=Zp(a?n.hideLayer:n.showLayer,{layerName:e});return K("calcite-action",{appearance:"transparent",class:o.visibleToggle,icon:h?c:void 0,key:"visibility-toggle",label:y,onclick:()=>this._toggleVisibility(i,r),scale:"s",slot:h?"actions-start":"actions-end",text:m,title:y},h?null:K("calcite-icon",{class:this.classes({[o.visibleIcon]:l!=="exclusive"&&a}),icon:c,scale:"s"}))}get _renderedPanel(){const{panel:e}=this.item;return!(e!=null&&e.open)||e.disabled||e.flowEnabled?null:K("div",{class:this.css.itemContentBottom,key:`content-panel-${e.uid}`,slot:"content-bottom"},e.render())}get _renderedPanelAction(){const{panel:e}=this.item;if(!(e!=null&&e.visible))return null;const{open:i,title:r,disabled:n}=e;return K("calcite-action",{active:i,appearance:"transparent",disabled:n,icon:fZ(e),key:`action-${e.uid}`,onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:r??"",title:r??void 0},this._renderFallbackIcon(e))}get _renderedActions(){switch(this._actionsCount){case 0:return null;case 1:return this._singleAction;default:return this._renderedActionMenu}}get _renderedActionMenu(){const{item:e,messagesCommon:i}=this,r=i.options;return K("calcite-action-menu",{appearance:"transparent",key:"item-action-menu",label:i.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:this._onActionMenuOpen},K("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:r,title:r}),this._renderedActionMenuContent)}get _renderedActionMenuContent(){return this._filteredSections.toArray().map(e=>K("calcite-action-group",{key:`action-section-${e.uid}`},e.toArray().map(i=>this._renderAction({action:i,textEnabled:!0}))))}get _renderedCatalogFootprintIcon(){const{css:e}=this,i=this.item.layer,r=(i==null?void 0:i.type)==="catalog-footprint",n=(i==null?void 0:i.type)==="sublayer"&&vae(i,"footprints");return"itemCatalogIcon"in e&&(r||n)?K("calcite-icon",{class:e.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null}get _renderedCatalogDynamicIcon(){const{css:e}=this,i=this.item.layer,r=(i==null?void 0:i.type)==="catalog-dynamic-group",n=(i==null?void 0:i.type)==="sublayer"&&vae(i,"layers-in-view");return"itemCatalogIcon"in e&&(r||n)?K("calcite-icon",{class:e.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null}get _renderedCatalogSelectNode(){const{_title:e,item:i,visibleElements:r}=this;if(!("visible"in i))return;const{layer:n}=i,s=(n==null?void 0:n.type)==="catalog-dynamic-group";return"catalogLayerList"in r&&r.catalogLayerList&&s?K("calcite-action",{appearance:"transparent",disabled:!n.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>this._triggerOnCatalogOpen(i),scale:"s",slot:"actions-end",text:e}):null}get _renderedChildList(){const{dragEnabled:e,item:i,rootGroupUid:r,listModeDisabled:n,selectionMode:s,displayMode:o}=this;if(!("children"in i))return;const a=[...this.parentTitles??[],i.title],{children:l,layer:c}=i,h=(c==null?void 0:c.type)!=="catalog-dynamic-group"&&Zxt(i),m=!n&&Nxt(c),y=(c==null?void 0:c.type)==="group",v=!m&&!h&&e&&y,w=!!e&&"childrenSortable"in i&&i.childrenSortable&&Bxt(i);return h||v?K("calcite-list",{canPull:x=>!!this.canMove&&this.canMove(x,"pull"),canPut:x=>!!this.canMove&&this.canMove(x,"put"),"data-item":i,"data-layer-type":r,displayMode:o,dragEnabled:w,group:y?r:`${r}-${c==null?void 0:c.uid}`,key:`child-list-${c==null?void 0:c.uid}`,label:i.title,selectionAppearance:"border",selectionMode:s},l==null?void 0:l.filter(x=>!x.hidden&&(this.visibleElements.errors||!x.error)).toArray().map(x=>this._renderItem(x,i,a)),this._renderedTablesItem):null}get _hasTables(){var r,n;const{layerTablesEnabled:e}=this,i=this.item.layer;if(!e||!i)return!1;switch(i.type){case"knowledge-graph":return e.includes(i.type)&&"tables"in i&&!!((r=i.tables)!=null&&r.length);case"map-image":case"tile":return e.includes(i.type)&&"subtables"in i&&!!((n=i.subtables)!=null&&n.length);default:return!1}}get _renderedTablesItem(){const{item:e,messages:i,css:r}=this,{layer:n}=e;return"itemTableIcon"in r&&"visible"in e&&"tables"in i&&this._hasTables?K("calcite-list-item",{class:r.item,"data-layer-id":n==null?void 0:n.id,dragDisabled:!0,key:`list-item-table-list-tables-${n==null?void 0:n.uid}`,label:i.tables,title:i.tables,onCalciteListItemSelect:()=>this._triggerOnTablesOpen(e)},K("calcite-icon",{class:r.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),K("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null}get _renderedItemMessage(){const{item:e,messages:i,css:r}=this;return e.error?K("div",{class:r.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},K("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},K("div",{slot:"message"},"tableError"in i?i.tableError:i.layerError))):"incompatible"in e&&e.incompatible&&"layerIncompatible"in i?K("div",{class:r.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},K("calcite-notice",{afterCreate:this._setTooltipReference,afterRemoved:this._removeTooltipReference,bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},K("div",{slot:"message"},i.layerIncompatible))):null}get _singleAction(){return this._renderAction({action:Yxt(this._filteredSections),textEnabled:!1})}get _filteredSections(){return this.item.actionsSections.map(e=>e.filter(i=>i.visible))}get _actionsCount(){return this.item.actionsSections.reduce((e,i)=>e+i.length,0)}_renderAction(e){const{item:i}=this,{action:r,textEnabled:n}=e;if(!r)return null;const{active:s,disabled:o,title:a,type:l,indicator:c}=r;return K("calcite-action",{active:l==="toggle"&&r.value,appearance:"transparent","data-action-id":r.id,disabled:o,icon:fZ(r),indicator:c,key:`action-${r.uid}`,loading:s,onclick:()=>this._triggerAction(i,r),scale:"s",slot:n?void 0:"actions-end",text:a??"",textEnabled:n,title:a??void 0},this._renderFallbackIcon(r))}_renderFallbackIcon(e){const{css:i}=this,{icon:r}=e,n="className"in e?e.className:void 0;if(r)return null;const s="image"in e?e.image:void 0,o={[i.itemActionIcon]:!!n,[i.itemActionImage]:!!s};return n&&(o[n]=!0),s||n?K("span",{"aria-hidden":"true",class:this.classes(i.itemActionIcon,o),key:"icon",styles:Oxt(s)}):null}_renderItem(e,i,r=[]){var n;return K(mZ,{activeItem:this.activeItem,canMove:this.canMove,css:this.css,displayMode:this.displayMode,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(n=e.layer)==null?void 0:n.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this.rootGroupUid,selectedDragItemLayerUid:this.selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this.onAction,onCatalogOpen:this.onCatalogOpen,onPanelOpen:this.onPanelOpen,onSelectedDragItemLayerUidChange:this.onSelectedDragItemLayerUidChange,onTablesOpen:this.onTablesOpen,onTooltipReferenceChange:this.onTooltipReferenceChange})}_triggerAction(e,i){i&&e&&(i.type==="toggle"&&(i.value=!i.value),this.onAction(i,e))}_triggerOnTablesOpen(e){e&&this.onTablesOpen&&this.onTablesOpen(e)}_triggerOnCatalogOpen(e){var i;e&&((i=this.onCatalogOpen)==null||i.call(this,e))}_focusSelectedDragEl(e,i){var r,n;this.selectedDragItemLayerUid===((r=i.layer)==null?void 0:r.uid)&&(X$(e),(n=this.onSelectedDragItemLayerUidChange)==null||n.call(this,null))}_handleCalciteListItemToggle(e,i){e.stopPropagation(),i.open=e.target.expanded}_getParentVisibilityMode(e){return e&&"visibilityMode"in e?e.visibilityMode:null}_handleCalciteListItemSelect(e,i,r){if(yd(e.target)!==i)return;const n=this._getParentVisibilityMode(r);this.selectionMode==="none"&&n!=="inherited"&&this._toggleVisibility(i,r)}_togglePanel(e){e.open=!e.open,e.open&&this.onPanelOpen()}_toggleVisibility(e,i){!e||!("visible"in e)||this._getParentVisibilityMode(i)==="exclusive"&&e.visible||(e.visible=!e.visible)}},mZ=q_,q_.vnodeSelector="calcite-list-item",q_);u([p()],ni.prototype,"activeItem",void 0),u([p()],ni.prototype,"canMove",void 0),u([p()],ni.prototype,"css",void 0),u([p()],ni.prototype,"displayMode",void 0),u([p()],ni.prototype,"dragEnabled",void 0),u([p()],ni.prototype,"dragDisabled",void 0),u([p()],ni.prototype,"item",void 0),u([p()],ni.prototype,"layerTablesEnabled",void 0),u([p()],ni.prototype,"listModeDisabled",void 0),u([p()],ni.prototype,"messages",void 0),u([p()],ni.prototype,"messagesCommon",void 0),u([p()],ni.prototype,"onAction",void 0),u([p()],ni.prototype,"onPanelOpen",void 0),u([p()],ni.prototype,"onCatalogOpen",void 0),u([p()],ni.prototype,"onTablesOpen",void 0),u([p()],ni.prototype,"onSelectedDragItemLayerUidChange",void 0),u([p()],ni.prototype,"onTooltipReferenceChange",void 0),u([p()],ni.prototype,"parent",void 0),u([p()],ni.prototype,"parentTitles",void 0),u([p()],ni.prototype,"rootGroupUid",void 0),u([p()],ni.prototype,"selectionMode",void 0),u([p()],ni.prototype,"selectedItems",void 0),u([p()],ni.prototype,"selectedDragItemLayerUid",void 0),u([p()],ni.prototype,"visibleElements",void 0),u([p()],ni.prototype,"visibilityAppearance",void 0),u([p()],ni.prototype,"_title",null),u([p()],ni.prototype,"_renderedItemStatus",null),u([p()],ni.prototype,"_renderedItemTemporaryIcon",null),u([p()],ni.prototype,"_renderedItemToggle",null),u([p()],ni.prototype,"_renderedPanel",null),u([p()],ni.prototype,"_renderedPanelAction",null),u([p()],ni.prototype,"_renderedActions",null),u([p()],ni.prototype,"_renderedActionMenu",null),u([p()],ni.prototype,"_renderedActionMenuContent",null),u([p()],ni.prototype,"_renderedCatalogFootprintIcon",null),u([p()],ni.prototype,"_renderedCatalogDynamicIcon",null),u([p()],ni.prototype,"_renderedCatalogSelectNode",null),u([p()],ni.prototype,"_renderedChildList",null),u([p()],ni.prototype,"_hasTables",null),u([p()],ni.prototype,"_renderedTablesItem",null),u([p()],ni.prototype,"_renderedItemMessage",null),u([p()],ni.prototype,"_singleAction",null),u([p()],ni.prototype,"_filteredSections",null),u([p()],ni.prototype,"_actionsCount",null),ni=mZ=u([U("esri.widgets.LayerList.LayerListItem")],ni);const Xxt=ni;function yZ(t){return t!=null&&typeof t=="object"&&t.type==="2d"&&t.view2dType==="linkchart"}function Kxt(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:Qxt(t);i.push(...r)}}function Qxt(t){return t.split(",").map(e=>e.trim())}function gZ(t){return t&&typeof t.render=="function"}function eSt(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}let Jo=class extends Hd.IdentifiableMixin(Yn){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([Le(()=>this._canCreateLegend,()=>this._createLegend(),gi),Le(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),gi)])}destroy(){this._legend=xr(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const r="legend";return e===r||e!=null&&!!Array.isArray(e)&&e.includes(r)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,r=e==null?void 0:e.view;return i&&r?{view:r,layerInfos:[i]}:{}}get _legendLayerInfo(){var o;const e=(o=this.listItem)==null?void 0:o.layer;if(!e||e.type==="subtype-sublayer")return null;const i=BQ(e)?e:null,r=e==null?void 0:e.parent,n=r!=null&&"type"in r&&r.type==="map-image"?i==null?void 0:i.source:null,s="";return n&&r?{layer:r,title:s,sublayerIds:[n.mapLayerId]}:{layer:e,title:s}}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){var e;return this._get("title")||(((e=this._getFirstWidget())==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return K("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r,open:n}=this;return e&&!r&&n?e==="legend"&&i?K("div",{key:"legend-widget"},i.render()):typeof e=="string"?K("div",{innerHTML:e,key:e}):gZ(e)?K("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?K("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(r=>this._renderContent(r)):this._renderContent(e):null}async _createLegend(){if(xr(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await $e(()=>Promise.resolve().then(()=>o0t),void 0),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:gZ(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};u([p()],Jo.prototype,"_legend",void 0),u([p()],Jo.prototype,"_canCreateLegend",null),u([p()],Jo.prototype,"_legendOptions",null),u([p()],Jo.prototype,"_legendLayerInfo",null),u([p()],Jo.prototype,"content",void 0),u([p()],Jo.prototype,"disabled",null),u([p()],Jo.prototype,"flowEnabled",void 0),u([p()],Jo.prototype,"icon",null),u([p()],Jo.prototype,"image",void 0),u([p()],Jo.prototype,"listItem",void 0),u([p()],Jo.prototype,"open",void 0),u([p()],Jo.prototype,"title",null),u([p()],Jo.prototype,"visible",void 0),Jo=u([U("esri.widgets.LayerList.ListItemPanel")],Jo);const n2e=Jo;var K2;const tSt=Ze.ofType({key:"type",defaultKeyValue:"button",base:M4,typeMap:{button:rK,toggle:V1e}}),s2e=Ze.ofType(tSt),mG="layer",I3="child-list-mode",iSt="hide";let tr=K2=class extends Hd.IdentifiableMixin(st){constructor(t){super(t),this.actionsSections=new s2e,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Ze.ofType(K2)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([Le(()=>{var t;return[this.layer,(t=this.layer)==null?void 0:t.listMode,this.listModeDisabled]},()=>this._watchLayerProperties(this.layer),gi),Le(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),gi),Le(()=>this.view,t=>this._updateChildrenView(t),gi),Le(()=>this.panel,t=>this._setListItemOnPanel(t),gi)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){var t;(t=this.panel)==null||t.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(r=>r.layer===i)??null}set panel(t){const e=this._get("panel");t!==e&&t&&(e==null||e.destroy()),this._set("panel",t)}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new n2e(t):null}get sortable(){var t;return((t=this.layer)==null?void 0:t.type)!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=oa(this,"layer.layer");return(!t||t&&oa(this,"layer.layer.loaded"))&&oa(this,"layer.title")||oa(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return!!(e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing")}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return!!((t=this.layer)!=null&&t.visible)}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t,e;return((t=this.layerView)==null?void 0:t.visibleAtCurrentScale)??!Hxt(this.layer,(e=this.view)==null?void 0:e.scale)}get visibleAtCurrentTimeExtent(){var t;return((t=this.layerView)==null?void 0:t.visibleAtCurrentTimeExtent)??!0}get visibilityMode(){return Uxt(this.layer)}clone(){return new K2({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){var e;(e=this.children)==null||e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,r=t.filter(n=>!i.some(s=>s.layer===n));i.addMany(this._createChildItems(r,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(r=>!!r.layer&&!t.includes(r.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(I3),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(I3),this.listModeDisabled||this.addHandles(t.toArray().map(e=>Le(()=>e.listMode,()=>this._compileChildren(t))),I3)}_compileChildren(t){const e=this.listModeDisabled?t:t==null?void 0:t.filter(i=>E5(i)!==iSt);t!=null&&t.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),mG)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.reverse().map(i=>e||Gxt(i)?new K2({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(Mr)}_watchLayerProperties(t){if(this.removeHandles(mG),this.removeHandles(I3),!t)return;if((!this.listModeDisabled&&E5(t))==="hide-children")return void this.children.destroyAll();const e=t2e(t);e&&this.addHandles(Le(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},gi),mG)}};u([p({type:s2e})],tr.prototype,"actionsSections",void 0),u([p()],tr.prototype,"actionsOpen",void 0),u([p()],tr.prototype,"checkPublishStatusEnabled",void 0),u([p({type:Ze.ofType(tr)})],tr.prototype,"children",void 0),u([p()],tr.prototype,"childrenSortable",void 0),u([p({readOnly:!0})],tr.prototype,"connectionStatus",null),u([p({readOnly:!0})],tr.prototype,"error",null),u([p()],tr.prototype,"hidden",void 0),u([p({readOnly:!0})],tr.prototype,"incompatible",null),u([p()],tr.prototype,"layer",void 0),u([p({readOnly:!0})],tr.prototype,"layerView",null),u([p()],tr.prototype,"listItemCreatedFunction",void 0),u([p({nonNullable:!0})],tr.prototype,"listModeDisabled",void 0),u([p()],tr.prototype,"open",void 0),u([p({type:n2e})],tr.prototype,"panel",null),u([_i("panel")],tr.prototype,"castPanel",null),u([p()],tr.prototype,"parent",void 0),u([p({value:!0})],tr.prototype,"sortable",null),u([p()],tr.prototype,"title",null),u([p({readOnly:!0})],tr.prototype,"publishing",null),u([p({readOnly:!0})],tr.prototype,"updating",null),u([p()],tr.prototype,"view",void 0),u([p()],tr.prototype,"visible",null),u([p({readOnly:!0})],tr.prototype,"visibleAtCurrentScale",null),u([p({readOnly:!0})],tr.prototype,"visibleAtCurrentTimeExtent",null),u([p({readOnly:!0})],tr.prototype,"visibilityMode",null),tr=K2=u([U("esri.widgets.LayerList.ListItem")],tr);const GQ=tr,Ku={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},rSt="hide",o2e=Ze.ofType(GQ);let Eh=class extends pa.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new o2e,this.view=null}initialize(){this.addHandles([Le(()=>{var e;return((e=this.view)==null?void 0:e.ready)===!0},()=>this._viewHandles(),gi),Le(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),Le(()=>yZ(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],Ku.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){var v,w;const s=e==null?void 0:e.layer;if(!s||s.type==="subtype-sublayer"||s.type==="sublayer")return;const o=(w=(v=this.view)==null?void 0:v.map)==null?void 0:w.layers,a=i?gfe(i):o,l=r?gfe(r):o;if(!a||!l)return;const{operationalItems:c}=this,h=(i==null?void 0:i.children)||c,m=(r==null?void 0:r.children)||c,y=l.length-n;e.parent=r||null,h.remove(e),a.remove(s),m.includes(e)||m.add(e,y),l.includes(s)||l.add(s,y),this._compileList()}_createLayerViewHandles(e){this.removeHandles(Ku.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Ku.layerViews)}_createMapLayerHandles(e){this.removeHandles(Ku.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Ku.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n,listModeDisabled:s}=this;return new GQ({checkPublishStatusEnabled:n,listModeDisabled:s,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>E5(i)!==rSt):void 0}_watchLayersListMode(e){this.removeHandles(Ku.layerListMode),e&&!this.listModeDisabled&&this.addHandles(Le(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),Ku.layerListMode)}_compileList(){var n,s;const e=(s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers,i=yZ(this.view)&&!this.view.inGeographicLayout?e==null?void 0:e.filter(({type:o})=>o==="link-chart"):e;this._watchLayersListMode(i);const r=this._getViewableLayers(i);r!=null&&r.length?(this._createNewItems(r),this._removeItems(r),this._sortItems(r)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.some(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.destroyMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const s=e.indexOf(r.layer),o=e.indexOf(n.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Ku.mapLayers,Ku.layerViews,Ku.viewLayers]),e!=null&&e.ready?this.addHandles([Le(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),gi),Le(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),gi)],Ku.viewLayers):this._removeAllItems()}};u([p()],Eh.prototype,"checkPublishStatusEnabled",void 0),u([p()],Eh.prototype,"listItemCreatedFunction",void 0),u([p({nonNullable:!0})],Eh.prototype,"listModeDisabled",void 0),u([p({type:o2e})],Eh.prototype,"operationalItems",void 0),u([p({readOnly:!0})],Eh.prototype,"state",null),u([p()],Eh.prototype,"totalItems",null),u([p()],Eh.prototype,"view",void 0),Eh=u([U("esri.widgets.LayerList.LayerListViewModel")],Eh);const a2e=Eh;let Xc=class extends st{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"catalogLayerList",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"closeButton",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"collapseButton",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"errors",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"filter",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"flow",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"heading",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"statusIndicators",void 0),u([p({type:Boolean,nonNullable:!0})],Xc.prototype,"temporaryLayerIndicators",void 0),Xc=u([U("esri.widgets.LayerList.LayerListVisibleElements")],Xc);const l2e=Xc,nSt=["label","description","metadata"],sSt=Ze.ofType(GQ),bfe="nested";let si=class extends Hd.IdentifiableMixin(Yn){constructor(e,i){super(e,i),this._rootListEl=null,this._activeItem=null,this._tooltipReferenceMap=new __,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusLayerFlowItem=null,this._layerListMap=new __,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid=`operational-${this.uid}`,this._openedLayersController=null,this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterPredicate=null,this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.layerTablesEnabled=new Ze(["knowledge-graph"]),this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.mapImageOptions=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=Lxt,this.minFilterItems=Pxt,this.openedLayers=new Ze,this.openedLayerLists=new Ze,this.selectedItems=new sSt,this.selectionMode="none",this.tableList=null,this.tileOptions=null,this.viewModel=new a2e,this.visibilityAppearance="default",this.visibleElements=new l2e,this._canMove=({dragEl:r,fromEl:n,toEl:s},o)=>{var D,B,z;const a=o==="pull"?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,l=yd(r);if(!(l!=null&&l.sortable))return!1;const c=yd(n),h=vfe(n),m=yd(s),y=vfe(s),v=!!h&&!!y&&h===y,w={selected:l,from:c,to:m},x=n.group,S=s.group,C=((D=c==null?void 0:c.layer)==null?void 0:D.type)??"",k=((B=m==null?void 0:m.layer)==null?void 0:B.type)??"",A=new Set(["map-image","catalog","knowledge-graph"]);return x&&S&&typeof a=="function"?a.call(null,w):v&&!A.has(C)&&!A.has(k)&&((z=l==null?void 0:l.layer)==null?void 0:z.type)!=="sublayer"},this._onCatalogOpen=r=>{var n,s;this.openedLayers.push((n=r.layer)==null?void 0:n.parent),this._focusLayerFlowItem=(s=r.layer)==null?void 0:s.uid},this._onTablesOpen=r=>{var n;this.openedLayers.push(r.layer),this._focusLayerFlowItem=(n=r.layer)==null?void 0:n.uid},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onTooltipReferenceChange=(r,n)=>{n?this._tooltipReferenceMap.set(r,n):this._tooltipReferenceMap.delete(r)},this._onSelectedDragItemLayerUidChange=r=>{this._selectedDragItemLayerUid=r},this._onTriggerAction=(r,n)=>{this.triggerAction(r,n)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=r=>{if(this.visibilityAppearance!=="default")return;const n=Array.from(r.composedPath()).find(s=>{var o;return(o=s.classList)==null?void 0:o.contains($M.item)});this._activeItem=yd(n)},this._onCalciteListOrderChange=r=>{const{_lastDragDetail:n}=this,{toEl:s,fromEl:o,dragEl:a,newIndex:l}=r;if(o&&s&&!((n==null?void 0:n.newIndex)===l&&(n==null?void 0:n.dragEl)===a&&(n==null?void 0:n.toEl)===s&&(n==null?void 0:n.fromEl)===o)){if(this._lastDragDetail=r,this._selectedDragItemLayerUid=a.value,o===s){const c=Array.from(o.children).filter(h=>h==null?void 0:h.matches("calcite-list-item")).map(h=>h.value);return void this._sortLayers(o,c)}this._moveLayerFromChildList({toEl:s,fromEl:o,dragEl:a,newIndex:l})}}}initialize(){this.addHandles([ua(()=>this.openedLayers,"change",()=>this._handleOpenedLayersChange(),gi),ua(()=>this.viewModel.operationalItems,"change",()=>jxt(this.selectedItems),gi),Le(()=>[this.filterPredicate,this._rootListEl],()=>Vxt(this._rootListEl,this.filterPredicate))])}loadDependencies(){return Ty({button:()=>$e(()=>Promise.resolve().then(()=>OO),void 0),flow:()=>$e(()=>Promise.resolve().then(()=>wwt),void 0),"flow-item":()=>$e(()=>Promise.resolve().then(()=>Swt),void 0),list:()=>$e(()=>Promise.resolve().then(()=>LMe),void 0),notice:()=>$e(()=>Promise.resolve().then(()=>dY),void 0),tooltip:()=>$e(()=>Promise.resolve().then(()=>x0t),void 0)})}destroy(){this._destroyOpenedLayerLists(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten(e=>e.children.filter(i=>{var r;return((r=i.layer)==null?void 0:r.type)!=="catalog-dynamic-group"})).length}get _visibleItems(){var e;return(e=this.operationalItems)==null?void 0:e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}get _openedPanelItems(){return this._visibleItems.flatten(e=>e.children).filter(({hidden:e,panel:i})=>!e&&(i==null?void 0:i.open)&&!i.disabled&&i.flowEnabled)}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get _renderedOpenLayerFlowItems(){const{openedLayers:e}=this;return e.toArray().map((i,r)=>this._renderLayerFlowItem(i,r===e.length-1))}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var r;const e=(r=this.viewModel)==null?void 0:r.state,i={[Ss.hidden]:e==="loading",[Ss.disabled]:e==="disabled"};return K("div",{class:this.classes($M.base,Ss.widget,Ss.panel,i)},this._renderItemTooltips(),this._renderItems())}async _createFlowList(e,i){const{_layerListMap:r}=this,n=r.get(e);if(n)return n;const s=e.type==="catalog"?await this._createCatalogLayerList(e):await this._createTableList(e);return i.aborted||r.set(e,s),s}async _handleOpenedLayersChange(){var l;const{_layerListMap:e,openedLayers:i,openedLayerLists:r}=this;(l=this._openedLayersController)==null||l.abort();const n=new AbortController,{signal:s}=n;this._openedLayersController=n,e.forEach((c,h)=>{i.includes(h)||(c.destroy(),e.delete(h))});const o=await Promise.all(i.map(c=>this._createFlowList(c,s)));if(s.aborted)return;r.removeAll(),r.addMany(o);const a=r.at(-1);a?"catalogLayer"in a?(this._set("catalogLayerList",a),this._set("tableList",null)):(this._set("catalogLayerList",null),this._set("tableList",a)):(this._set("catalogLayerList",null),this._set("tableList",null))}_destroyOpenedLayerLists(){this.openedLayerLists.destroyAll(),this.openedLayers.removeAll(),this._layerListMap.clear()}_renderItemTooltip(e){var n,s;const{_tooltipReferenceMap:i,messages:r}=this;return e?K("calcite-tooltip",{key:`tooltip-${(n=e.layer)==null?void 0:n.uid}`,overlayPositioning:"fixed",referenceElement:i.get((s=e.layer)==null?void 0:s.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){var i;return e.incompatible?this._renderItemTooltip(e):(i=e.children)==null?void 0:i.filter(r=>!r.hidden).toArray().map(r=>this._renderItemTooltipNodes(r))}_renderItemTooltips(){var e;return(e=this._visibleItems)==null?void 0:e.toArray().map(i=>this._renderItemTooltipNodes(i))}_renderNoItemsMessage(){return K("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return K("div",{class:$M.itemMessage,key:"esri-layer-list__no-items"},K("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}async _createCatalogLayerList(e){const{default:i}=await $e(()=>import("./CatalogLayerList-DvJG7dim.js"),[]),{headingLevel:r,catalogOptions:n,view:s,filterPlaceholder:o,listItemCreatedFunction:a,minFilterItems:l,selectionMode:c,visibilityAppearance:h,_onCatalogOpen:m,_onTablesOpen:y,layerTablesEnabled:v}=this;return new i({headingLevel:r,view:s,filterPlaceholder:o,listItemCreatedFunction:a,minFilterItems:l,selectionMode:c,visibilityAppearance:h,...n,catalogLayer:e,layerTablesEnabled:v,onCatalogOpen:m,onTablesOpen:y})}_getTableListParams(e){switch(e.type){case"knowledge-graph":return{...this.knowledgeGraphOptions,tables:e.tables};case"map-image":return{...this.mapImageOptions,tables:e.subtables};case"tile":return{...this.tileOptions,tables:e.subtables};default:return null}}async _createTableList(e){const{default:i}=await $e(()=>import("./TableList-DCgh_ga-.js"),[]),{headingLevel:r,selectionMode:n,dragEnabled:s}=this;return new i({headingLevel:r,selectionMode:n,dragEnabled:s,...this._getTableListParams(e)})}_renderLayerFlowItem(e,i){var o;const{messages:r,openedLayers:n}=this,s=e.title||this.messages.untitledLayer;return K("calcite-flow-item",{afterCreate:this._focusLayerFlowItemNode,afterUpdate:this._focusLayerFlowItemNode,bind:this,"data-layer-uid":e.uid,description:s,heading:r[e.type==="catalog"?"catalogLayers":"tables"],headingLevel:this.headingLevel,key:`flow-layer-list-${e.uid}`,selected:i,onCalciteFlowItemBack:a=>{a.preventDefault(),n.pop();const l=n.at(-1);l?this._focusLayerFlowItem=l.uid:this._focusRootFlowItem=!0}},(o=this._layerListMap.get(e))==null?void 0:o.render())}_renderPanelFlowItems(){const{_openedPanelItems:e,openedLayers:i}=this;return e.toArray().map(({title:r,panel:n},s)=>{const o=()=>this._handlePanelFlowItemBack(n);return K("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:r,heading:n.title,headingLevel:this.headingLevel,key:`flow-panel-${n.uid}`,selected:!i.length&&s===e.length-1,onCalciteFlowItemBack:a=>{a.preventDefault(),o()}},n.render(),K("calcite-button",{appearance:"transparent",onclick:o,slot:"footer-actions",width:"full"},this.messagesCommon.back))})}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,X$(e))}_focusLayerFlowItemNode(e){this._focusLayerFlowItem===e.dataset.layerUid&&(this._focusLayerFlowItem=null,X$(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,X$(e))}_renderItems(){const{visible:e,collapsed:i,_visibleItems:r,_openedPanelItems:n,_filterEnabled:s,_rootGroupUid:o,visibleElements:{closeButton:a,collapseButton:l,heading:c,flow:h},_dragEnabled:m,selectionMode:y,filterText:v,openedLayers:w,filterPlaceholder:x,messages:S}=this,C=[K("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:a,closed:!e,collapsed:i,collapsible:l,heading:c?S.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",selected:!w.length&&!n.length,onCalciteFlowItemClose:()=>this.visible=!1},r!=null&&r.length?null:this._renderNoItems(),K("calcite-list",{afterCreate:k=>{this._rootListEl=k,k.addEventListener("focusin",this._setActiveItem),k.addEventListener("focusout",this._clearActiveItem)},afterRemoved:k=>{this._rootListEl=null,k.removeEventListener("focusin",this._setActiveItem),k.removeEventListener("focusout",this._clearActiveItem)},canPull:k=>this._canMove(k,"pull"),canPut:k=>this._canMove(k,"put"),"data-layer-type":o,displayMode:bfe,dragEnabled:m,filterEnabled:s,filterPlaceholder:x,filterProps:nSt,filterText:s?v:"",group:o,key:"root-list",label:S.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:y,onCalciteListChange:k=>this._handleCalciteListChange(k),onCalciteListDragEnd:k=>this._handleCalciteListDragEnd(k.detail),onCalciteListFilter:k=>{var A;return this.filterText=((A=k.currentTarget)==null?void 0:A.filterText)??""},onCalciteListOrderChange:k=>this._onCalciteListOrderChange(k.detail)},r.toArray().map(k=>this._renderItem(k)),s?K("div",{class:$M.filterNoResults,slot:"filter-no-results"},K("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(),this._renderedOpenLayerFlowItems];return e?h?K("calcite-flow",{key:"root-flow"},C):C:null}_renderItem(e,i,r){var n;return K(Xxt,{activeItem:this._activeItem,canMove:this._canMove,css:$M,displayMode:bfe,dragEnabled:this.dragEnabled,item:e,key:`layerListItem-${(n=e.layer)==null?void 0:n.uid}`,layerTablesEnabled:this.layerTablesEnabled,listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,parent:i,parentTitles:r,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibilityAppearance:this.visibilityAppearance,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onCatalogOpen:this._onCatalogOpen,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange,onTablesOpen:this._onTablesOpen,onTooltipReferenceChange:this._onTooltipReferenceChange})}_moveLayerFromChildList({toEl:e,fromEl:i,dragEl:r,newIndex:n}){const s=yd(r),o=yd(e),a=yd(i);this.viewModel.moveListItem(s,a,o,n)}_handleCalciteListDragEnd(e){const{fromEl:i,dragEl:r,oldIndex:n}=e;i.insertBefore(r,i.children[n])}_sortLayers(e,i){var r,n;if(e)if(e===this._rootListEl)i2e((n=(r=this.view)==null?void 0:r.map)==null?void 0:n.layers,i);else{const s=yd(e);if(!s)return;qxt(s,i)}}_handleCalciteListChange(e){const{selectionMode:i,selectedItems:r}=this;if(i==="none")return;const n=e.target.selectedItems.map(s=>yd(s)).filter(Boolean);r.removeAll(),r.addMany(n)}};u([p()],si.prototype,"_rootListEl",void 0),u([p()],si.prototype,"_activeItem",void 0),u([p()],si.prototype,"_tooltipReferenceMap",void 0),u([p()],si.prototype,"_focusRootFlowItem",void 0),u([p()],si.prototype,"_focusPanelFlowItem",void 0),u([p()],si.prototype,"_focusLayerFlowItem",void 0),u([p()],si.prototype,"_layerListMap",void 0),u([p()],si.prototype,"_totalItems",null),u([p()],si.prototype,"_visibleItems",null),u([p()],si.prototype,"_openedPanelItems",null),u([p()],si.prototype,"_dragEnabled",null),u([p()],si.prototype,"_filterEnabled",null),u([p()],si.prototype,"_renderedOpenLayerFlowItems",null),u([p({readOnly:!0})],si.prototype,"catalogLayerList",void 0),u([p()],si.prototype,"catalogOptions",void 0),u([p()],si.prototype,"collapsed",void 0),u([p()],si.prototype,"dragEnabled",void 0),u([p()],si.prototype,"filterPlaceholder",void 0),u([p()],si.prototype,"filterPredicate",void 0),u([p()],si.prototype,"filterText",void 0),u([p()],si.prototype,"headingLevel",void 0),u([p()],si.prototype,"icon",null),u([p()],si.prototype,"knowledgeGraphOptions",void 0),u([p()],si.prototype,"label",null),u([p()],si.prototype,"layerTablesEnabled",void 0),u([p()],si.prototype,"listItemCanGiveFunction",void 0),u([p()],si.prototype,"listItemCanReceiveFunction",void 0),u([p()],si.prototype,"listItemCreatedFunction",null),u([p()],si.prototype,"mapImageOptions",void 0),u([p(),Il("esri/widgets/LayerList/t9n/LayerList")],si.prototype,"messages",void 0),u([p(),Il("esri/t9n/common")],si.prototype,"messagesCommon",void 0),u([p()],si.prototype,"minDragEnabledItems",void 0),u([p()],si.prototype,"minFilterItems",void 0),u([p({readOnly:!0})],si.prototype,"openedLayers",void 0),u([p({readOnly:!0})],si.prototype,"openedLayerLists",void 0),u([p()],si.prototype,"operationalItems",null),u([p()],si.prototype,"selectedItems",void 0),u([p()],si.prototype,"selectionMode",void 0),u([p({readOnly:!0})],si.prototype,"tableList",void 0),u([p()],si.prototype,"tileOptions",void 0),u([p()],si.prototype,"view",null),u([Kxt("trigger-action"),p({type:a2e})],si.prototype,"viewModel",void 0),u([p()],si.prototype,"visibilityAppearance",void 0),u([p({type:l2e,nonNullable:!0})],si.prototype,"visibleElements",void 0),si=u([U("esri.widgets.LayerList")],si);const oSt=si;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const aSt=dt`@layer{arcgis-layer-list{display:block;.arcgis-layer-list{display:flex}.arcgis-layer-list__filter-no-results{padding:var(--calcite-spacing-md) var(--calcite-spacing-lg)}.arcgis-layer-list__item{--calcite-list-item-icon-center: 8.5px}.arcgis-layer-list__item-table-icon,.arcgis-layer-list__item-catalog-icon{margin-inline-end:0}.arcgis-layer-list__item-action-image{flex:0 0 var(--calcite-spacing-xl);background-position:50%;background-repeat:no-repeat;background-size:contain;width:var(--calcite-spacing-xl);height:var(--calcite-spacing-xl);text-align:center;font-size:var(--calcite-font-size)}.arcgis-layer-list__action-menu .arcgis-layer-list__action-group{display:none}.arcgis-layer-list__action-menu[open] .arcgis-layer-list__action-group{display:flex}.arcgis-layer-list__visible-icon{visibility:hidden}.arcgis-layer-list__item--active:hover,.arcgis-layer-list__item--active:focus,.arcgis-layer-list__item--active:focus-within{>.arcgis-layer-list__visible-toggle>.arcgis-layer-list__visible-icon{visibility:visible}}.arcgis-layer-list__status-indicator{visibility:hidden;margin-inline:0;color:transparent}.arcgis-layer-list__publishing{visibility:visible;color:var(--calcite-color-foreground-2);transform-origin:var(--calcite-list-item-icon-center) var(--calcite-list-item-icon-center);animation:arcgis-layer-list__publishing-anim 2s normal infinite}.arcgis-layer-list__updating{visibility:visible;animation:arcgis-layer-list__updating-anim 2s normal infinite}.arcgis-layer-list__connection-status{visibility:visible;margin-inline:calc(var(--calcite-spacing-lg) * .5);width:calc(var(--calcite-spacing-xxxl) * .5);height:calc(var(--calcite-spacing-xxxl) * .5);color:var(--calcite-color-status-danger)}.arcgis-layer-list__connection-status--connected{color:var(--calcite-color-status-success)}.arcgis-layer-list__item-content-bottom{margin:var(--calcite-spacing-md) var(--calcite-spacing-lg)}.arcgis-layer-list__item-content-bottom .arcgis-legend__service{padding:0 0 var(--calcite-spacing-md) 0}.arcgis-layer-list__item-message{margin:var(--calcite-spacing-md) var(--calcite-spacing-lg)}@keyframes arcgis-layer-list__updating-anim{0%,40%{color:transparent}50%,80%{color:var(--calcite-color-brand)}to{color:transparent}}@keyframes arcgis-layer-list__publishing-anim{0%,20%{transform:rotate(45deg)}80%,to{transform:rotate(135deg)}}}}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const lSt=xht((t,e)=>(e.onLoaded(()=>{const i=t.el;t.listenOn(i.childElem,"calciteFlowItemClose",()=>{t.arcgisClose.emit(),t.autoDestroyDisabled||t.destroy()})}),ko()));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const cSt=OQ(oSt);var ib;let uSt=(ib=class extends qi{constructor(){super(...arguments),this.widget=cSt(this),this.viewModel=this.widget.viewModel,this.arcgisClose=lSt(this),this.autoDestroyDisabled=!1,this.catalogOptions=this.widget.catalogOptions,this.closed=!1,this.collapsed=this.widget.collapsed,this.dragEnabled=this.widget.dragEnabled,this.filterPlaceholder=this.widget.filterPlaceholder,this.filterPredicate=this.widget.filterPredicate,this.filterText=this.widget.filterText,this.headingLevel=this.widget.headingLevel,this.hideCatalogLayerList=this.widget.visibleElements.catalogLayerList,this.hideFlow=this.widget.visibleElements.flow,this.hideStatusIndicators=this.widget.visibleElements.statusIndicators,this.icon=this.widget.icon,this.knowledgeGraphOptions=this.widget.knowledgeGraphOptions,this.label=this.widget.label,this.listItemCreatedFunction=this.widget.listItemCreatedFunction,this.minDragEnabledItems=this.widget.minDragEnabledItems,this.minFilterItems=this.widget.minFilterItems,this.openedLayers=this.widget.openedLayers,this.position="bottom-left",this.selectedItems=this.widget.selectedItems,this.selectionMode=this.widget.selectionMode,this.showCloseButton=this.widget.visibleElements.closeButton,this.showCollapseButton=this.widget.visibleElements.collapseButton,this.showErrors=this.widget.visibleElements.errors,this.showFilter=this.widget.visibleElements.filter,this.showHeading=this.widget.visibleElements.heading,this.showTemporaryLayerIndicators=this.widget.visibleElements.temporaryLayerIndicators,this.state=this.viewModel.state,this.visibilityAppearance=this.widget.visibilityAppearance,this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko(),this.arcgisTriggerAction=Ir(()=>this.widget,"trigger-action")}get catalogLayerList(){return this.widget.catalogLayerList}get operationalItems(){return this.widget.operationalItems}get tableList(){return this.widget.tableList}async destroy(){await this.manager.destroy()}async triggerAction(e,i){var r;(r=this.widget)==null||r.triggerAction(e,i)}},ib.properties={autoDestroyDisabled:5,catalogLayerList:32,catalogOptions:0,closed:5,collapsed:7,dragEnabled:5,filterPlaceholder:1,filterPredicate:0,filterText:1,headingLevel:9,hideCatalogLayerList:5,hideFlow:5,hideStatusIndicators:5,icon:1,knowledgeGraphOptions:0,label:1,listItemCreatedFunction:0,minDragEnabledItems:9,minFilterItems:9,openedLayers:0,operationalItems:32,position:1,referenceElement:1,selectedItems:0,selectionMode:1,showCloseButton:5,showCollapseButton:5,showErrors:5,showFilter:5,showHeading:5,showTemporaryLayerIndicators:5,state:3,tableList:32,visibilityAppearance:1},ib.shadowRootOptions=Zn,ib.styles=aSt,ib);or("arcgis-layer-list",uSt);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const Vl="esri-basemap-gallery",hc={base:Vl,sourceLoading:`${Vl}--source-loading`,layoutGrid:`${Vl}--grid`,narrowItems:`${Vl}--narrow-items`,loader:`${Vl}__loader`,item:`${Vl}__item`,itemContainer:`${Vl}__item-container`,itemContent:`${Vl}__item-content`,itemTitle:`${Vl}__item-title`,itemTagsContainer:`${Vl}__item-tags-container`,itemThumbnail:`${Vl}__item-thumbnail`,selectedItem:`${Vl}__item--selected`,itemError:`${Vl}__item--error`};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */function dSt(t){var e;return((e=t.portalItem)==null?void 0:e.type)==="Web Scene"||t.referenceLayers.some(i=>i.type==="scene")}function hSt(t){var e,i;return!!((i=(e=t==null?void 0:t.portalItem)==null?void 0:e.tags)!=null&&i.some(r=>r.toLowerCase()==="beta"))}var W_;let pSt=(W_=class extends qi{constructor(){super(...arguments),this._itemState="loading",this._isActive=!1}loaded(){this.manager.onLifecycle(()=>[Le(()=>this.item.state,e=>{this._itemState=e},{sync:!0}),Le(()=>this.viewModel.activeBasemap,e=>{var i;this._isActive=this.item.basemap.id===(e==null?void 0:e.id),this._isActive&&((i=F2(this))==null||i.focus(),this.el.scrollIntoView({block:"nearest"}))},{initial:!0,sync:!0})])}render(){var x,S;const{disabled:e,item:i,itemIndex:r,viewModel:n,messages:s}=this,o=i.basemap.thumbnailUrl||Gge("assets/basemap-gallery/images/basemap-toggle-64.svg"),a=i.basemap.title,l=(x=i.basemap.portalItem)==null?void 0:x.snippet,c=((S=i.error)==null?void 0:S.message)||l||a,{activeBasemapIndex:h}=n,m=h===r,y=m||h===-1&&r===0?0:-1,v={[hc.selectedItem]:m,[hc.itemError]:i.state==="error"},w=`basemapgallery-item-${i.uid}`;return q`<div .ariaChecked=${m} .ariaDisabled=${e} aria-labelledby=${w??Ns} class=${mt(zs(hc.item,v))} role=radio tabindex=${y??Ns} title=${c??Ns} @click=${()=>{i.state==="ready"&&(n.activeBasemap=i.basemap)}}><img alt class=${mt(hc.itemThumbnail)} src=${o??Ns}><div class=${mt(hc.itemContent)}><div class=${mt(hc.itemTitle)}><span id=${w??Ns}>${a}</span></div>${dSt(i.basemap)?fSt(i.basemap,s):null}</div>${i.state!=="loading"?null:q`<calcite-scrim><span aria-hidden=true class=${mt(la.loaderAnimation)} role=presentation></span></calcite-scrim>`}</div>`}},W_.properties={_itemState:16,_isActive:16,disabled:5,item:0,itemIndex:9,viewModel:0,messages:0},W_.shadowRootOptions=Zn,W_);function fSt(t,e){return q`<div class=${mt(hc.itemTagsContainer)}>${mSt(e)}${hSt(t)?ySt(e):null}</div>`}function mSt(t){return q`<calcite-chip scale=s .label=${t.tag3D}>${t.tag3D}</calcite-chip>`}function ySt(t){return q`<calcite-chip appearance=outline-fill scale=s .label=${t.tagBeta}>${t.tagBeta}</calcite-chip>`}or("arcgis-basemap-gallery-item",pSt);var kp;(function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"})(kp||(kp={}));function gSt(t){return c2e(t)||lX(t)||cX(t)}function c2e(t){return fb(t)||qH(t)}const vSt=12;var ls;let ZE=(ls=class{constructor(e){const i=ls.checkUnsupported(e);if(i!=null)throw i;const r=e;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=$1(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const n=r.lods.reduce((c,h)=>(h.level<c.minLod.level&&(c.minLod=h),c.max=Math.max(c.max,h.level),c),{minLod:r.lods[0],max:-1/0}),s=n.minLod,o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(n.max+1);for(let c=0;c<this.levels.length;c++)this.levels[c]={resolution:a,scale:l,tileSize:[a*r.size[0],a*r.size[1]]},a/=2,l/=2}clone(){return new ls(this.toTileInfo())}toTileInfo(){return new os({dpi:this.dpi,origin:new ft({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new us({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,r,n){const s=this.levels[e],o=s.tileSize[0],a=s.tileSize[1];n[0]=this.origin[0]+r*o,n[2]=this.origin[0]+(r+1)*o,n[3]=this.origin[1]-i*a,n[1]=this.origin[1]-(i+1)*a}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=Gse(e[0]),i[1]=Hse(e[1]),i[2]=Gse(e[2]),i[3]=Hse(e[3])):this._isGCS&&(i[0]=Ep(e[0]),i[1]=Ep(e[1]),i[2]=Ep(e[2]),i[3]=Ep(e[3]))}getExtentGeometry(e,i,r,n=new jt){return this.getExtent(e,i,r,dh),n.spatialReference=this.spatialReference,n.xmin=dh[0],n.ymin=dh[1],n.xmax=dh[2],n.ymax=dh[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const{resolution:r,scale:n}=this.levels[this.levels.length-1],s=r/2*this.pixelSize;this.levels.push({resolution:r/2,scale:n/2,tileSize:[s,s]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e,i=1/0){if(ls.checkUnsupported(e))return!1;const r=new ls(e);if(!r.spatialReference.equals(this.spatialReference)||r.pixelSize!==this.pixelSize)return!1;const n=Math.min(this.levels.length-1,r.levels.length-1,i),s=this.levels[n].resolution;let o=.5*s;return!Sl(r.origin[0],this.origin[0],o)||!Sl(r.origin[1],this.origin[1],o)?!1:(o=.5*s/2**n/this.pixelSize*vSt,Sl(s,r.levels[n].resolution,o))}rootTilesInExtent(e,i=null,r=1/0){const n=new Array,s=this.levels[0].tileSize;if(e==null||s[0]===0||s[1]===0)return n;ls.computeRowColExtent(e,s,this.origin,dh);let o=dh[1],a=dh[3],l=dh[0],c=dh[2];const h=c-l,m=a-o;if(h*m>r){const y=Math.floor(Math.sqrt(r));m>y&&(o=o+Math.floor(.5*m)-Math.floor(.5*y),a=o+y),h>y&&(l=l+Math.floor(.5*h)-Math.floor(.5*y),c=l+y)}for(let y=o;y<a;y++)for(let v=l;v<c;v++)n.push([0,y,v]);return i!=null&&(i[0]=this.origin[0]+l*s[0],i[1]=this.origin[1]-a*s[1],i[2]=this.origin[0]+c*s[0],i[3]=this.origin[1]-o*s[1]),n}static computeRowColExtent(e,i,r,n){const s=.001*(e[2]-e[0]+(e[3]-e[1]));n[0]=Math.max(0,Math.floor((e[0]+s-r[0])/i[0])),n[2]=Math.max(0,Math.ceil((e[2]-s-r[0])/i[0])),n[1]=Math.max(0,Math.floor((r[1]-e[3]+s)/i[1])),n[3]=Math.max(0,Math.ceil((r[1]-e[1]-s)/i[1]))}static isPowerOfTwo(e){const i=e.lods,r=i[0].resolution*2**i[0].level;return!i.some(n=>!Z4e(n.resolution,r/2**n.level))}static hasGapInLevels(e){const i=e.lods.map(r=>r.level);i.sort((r,n)=>r-n);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&!(i&i-1)&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new Q("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?HQ():e.lods.length<1?new Q("tilingscheme:generic","Tiling scheme must have at least one level"):ls.isPowerOfTwo(e)?ls.hasGapInLevels(e)?new Q("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):ls.tileSizeSupported(e)?ls.hasOriginPerLODs(e)?new Q("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new Q("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new Q("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const r=e[2]-e[0],n=e[3]-e[1],s=Ha(i),o=1.2*Math.max(r,n),a=256,l=o/a,c=l*s*(96/.0254),h=new ls(new os({size:[a,a],origin:new ft({x:e[0]-.5*(o-r),y:e[3]+.5*(o-n)}),lods:[new us({level:0,resolution:l,scale:c})],spatialReference:i}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(e){const i=new ls(ls.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,r=16){const n=256/i,s=new ls(new os({size:[i,i],origin:new ft({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new us({level:0,resolution:.703125*n,scale:295497598570834e-6*n})]}));return s.ensureMaxLod(r),s}get test(){}},ls.WebMercatorAuxiliarySphereTileInfo=new os({size:[256,256],origin:new ft({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:et.WebMercator}),spatialReference:et.WebMercator,lods:[new us({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),ls.WebMercatorAuxiliarySphere=ls.makeWebMercatorAuxiliarySphere(19),ls);function HQ(){return new Q("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}const dh=Br(),wfe=64;Y4e(TH/10);const bSt=Br();ZE.WebMercatorAuxiliarySphere.getExtent(0,0,0,bSt);Br([-180,-90,180,90]);function wSt(t,e,i,r){if(t==null)return HQ();const n=t.spatialReference;if(n.isGeographic&&!c2e(n))return new Q("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const s=ZE.checkUnsupported(t);return s??(i==null?new Q("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):_St(t,i)||(e==null||n.equals(e)||e.isWGS84&&n.isWebMercator?null:new Q("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function _St(t,e){const i=t.lods,r=i[0].resolution*2**i[0].level,n=[r*t.size[0],r*t.size[1]],s=[t.origin.x,t.origin.y],o=EVe(e),a=Br();ZE.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>wfe){const c=i[0].scale*2**i[0].level;let h=Math.max((o[3]-o[1])/t.size[1],(o[2]-o[0])/t.size[0])*c/r;const m=Math.floor(Math.log(h)/Math.log(10));return h=Math.ceil(h/10**m)*10**m,new Q("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(c).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+".",{level0Scale:c,suggestedLevel0Scale:h,requiredNumRootTiles:l,allowedNumRootTiles:wfe})}return null}const xSt=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:wSt},Symbol.toStringTag,{value:"Module"}));function SSt(t,e,i,r){if(t==null)return HQ();const n=(t==null?void 0:t.lods.length)-1,s=t.spatialReference;if(s.isWebMercator){if(!ZE.makeWebMercatorAuxiliarySphere(n).compatibleWith(t,r))return new Q("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!gSt(s))return new Q("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!ZE.makeGCSWithTileSize(t.spatialReference,t.size[0],n).compatibleWith(t,r))return t.spatialReference.isWGS84?new Q("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new Q("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?null:new Q("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const $St=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:SSt},Symbol.toStringTag,{value:"Module"})),TSt={[gy.Global]:$St,[gy.Local]:xSt};function vZ(t,e,i,r,n){return TSt[r].checkIfTileInfoSupportedForViewSR(t,i,e,n)}function ESt(t,e,i){const r=D7e(t);if(r!=null){if(!Ze.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const n=r.find(s=>vZ(s.tileInfo,s.fullExtent,e,i)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}kp.NORTH,kp.EAST,kp.SOUTH,kp.WEST;kp.NORTH_EAST,kp.SOUTH_EAST,kp.SOUTH_WEST,kp.NORTH_WEST;function CSt(t,e){return t!=null&&(e==null||(e===gy.Local?!t.isGeographic||t.isWGS84||t.wkid===hu.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===hu.CGCS2000||t.wkid===hu.GCSMARS2000||t.wkid===hu.GCSMARS2000_SPHERE||t.wkid===hu.GCSMOON2000))}async function ISt(t,e={}){const{basemap:i,view:r}=t;await i.load(e),kSt(i),await OSt(i,r,e),sr(e)}async function MSt(t,e={}){var a,l;const{basemap:i,view:r}=t;sr(e);const n=(a=i.baseLayers.find(c=>c.type==="unknown"))==null?void 0:a.loadError;if(n!=null)throw n;if(!r||"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(e),sr(e),i.baseLayers.length===0))return;const s=i.baseLayers.at(0);if(!R7e(s))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;_fe()}await s.load(e),sr(e);const o=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?(l=s.tileInfo)==null?void 0:l.spatialReference:null]).filter(Mr);o.length!==0&&o.every(c=>!r.spatialReference.equals(c))&&_fe()}function _fe(){throw new Q("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function kSt(t){if(t.baseLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!A7e(i)).map(i=>ASt(i));if(e.length)throw e[0]}function ASt(t){return new Q("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function OSt(t,e,i){if(t.baseLayers.length===0)return;const r=t.baseLayers.at(0);if(C_e(r)){try{await r.load(i)}catch(n){const s="basemap-compatibility:unknown-error",o="Unknown basemap compatibility error",{name:a=s,message:l=o,details:c}=n;throw new Q(a,l,c)}PSt(r,e)}}function PSt(t,e){var a;const i=e.state.viewingMode;if(!i)return;let r,n;if((t==null?void 0:t.type)==="wmts"){const l=ESt(t,e.spatialReference,i);if(l.tileInfo==null)throw new Q("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=l.tileInfo,n=l.fullExtent}else r=t.tileInfo,n=t.fullExtent;if(r==null)return;if(!CSt(r.spatialReference,i))throw new Q(`basemapgalleryitem:spatial-reference-unsupported-${lle(i)}`,`Basemap spatial reference is unsupported in ${lle(i)} mode`);const s=(t==null?void 0:t.type)==="vector-tile"?r.getCompatibleForVTL(256):null;if(i===gy.Global){let l=vZ(r,n,null,i);if(l&&(t==null?void 0:t.type)==="vector-tile"&&n!=null&&s&&!vZ(s,n,null,i)&&(l=null),l){const c=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new Q(`basemapgalleryitem:tiling-scheme-unsupported-${c}-global`,"Basemap tiling scheme is unsupported in global mode",{error:l})}}else if(ZE.checkUnsupported(r))throw new Q("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const o=(a=e.basemapTerrain)==null?void 0:a.tilingScheme;if(o&&!o.compatibleWith(r)&&((t==null?void 0:t.type)!=="vector-tile"||!s||!o.compatibleWith(s)))throw new Q("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Ch=class extends Hd.IdentifiableMixin(st){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([Le(()=>{var i;return(i=this.basemap)==null?void 0:i.loadStatus},e),Le(()=>this.compatibilityFunction,e),Le(()=>{var i;return this.view&&"basemapTerrain"in this.view&&((i=this.view.basemapTerrain)==null?void 0:i.tilingScheme)},e),Le(()=>{var i;return(i=this.view)==null?void 0:i.ready},e),Le(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return a1e(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var n;this._cancelRefresh(),this._set("state","loading");const e=(n=this.basemap)==null?void 0:n.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:r}=i;this.compatibilityFunction(this,{signal:r}).then(()=>Vp(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(s=>{ds(s)||(this._set("state","error"),this._set("error",s))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};u([p({readOnly:!0})],Ch.prototype,"_spatialReferenceTask",null),u([p()],Ch.prototype,"basemap",null),u([p()],Ch.prototype,"compatibilityFunction",void 0),u([p({readOnly:!0})],Ch.prototype,"error",void 0),u([p({readOnly:!0})],Ch.prototype,"spatialReference",null),u([p({readOnly:!0})],Ch.prototype,"state",void 0),u([p()],Ch.prototype,"view",void 0),Ch=u([U("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Ch);const u2e=Ch,d2e=Ze.ofType(Vv);let Q2=class extends st{constructor(e){super(e),this.basemaps=new d2e}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};u([p({type:d2e})],Q2.prototype,"basemaps",void 0),u([p({readOnly:!0})],Q2.prototype,"state",null),Q2=u([U("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],Q2);const h2e=Q2,p2e=Ze.ofType(Vv);let Ih=class extends _s.LoadableMixin(gu.EsriPromiseMixin(h2e)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new p2e,this.filterFunction=null,this.portal=Fe.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(Le(()=>{var e,i,r;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(i=this.portal)==null?void 0:i.basemapGalleryGroupQuery3D,(r=this.portal)==null?void 0:r.user,this.query,this.updateBasemapsCallback]},()=>EE(this.refresh()),gi))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(r)}catch(r){if(ds(r))throw r;Ce.getLogger(this).warn(new Q("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?await this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),r=await Promise.all(i);return e.filter((n,s)=>r[s])}};u([p({readOnly:!0,type:p2e})],Ih.prototype,"basemaps",void 0),u([p()],Ih.prototype,"filterFunction",void 0),u([p({type:Fe})],Ih.prototype,"portal",void 0),u([p()],Ih.prototype,"query",void 0),u([p({readOnly:!0})],Ih.prototype,"state",null),u([p()],Ih.prototype,"updateBasemapsCallback",void 0),u([p()],Ih.prototype,"viewType",void 0),Ih=u([U("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Ih);const ek=Ih,f2e=Ze.ofType(u2e);function LSt(t){return t&&t.declaredClass==="esri.portal.Portal"}function RSt(t){return t&&!(t instanceof ek)&&(!!t.portal||!!t.query)}function DSt(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let nc=class extends _s{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new f2e,this.source=new ek,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([Le(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),ua(()=>{var i;return(i=this.source)==null?void 0:i.basemaps},"change",e,{onListenerAdd:e}),hs(()=>this.view,()=>{var i;this.source instanceof ek&&(this.source.viewType=(i=this.view)==null?void 0:i.type)},{once:!0})])}destroy(){var i;const e=this.source.basemaps.find(r=>r===this.activeBasemap);e&&this.source.basemaps.remove(e),(i=this.source)==null||i.destroy()}get activeBasemap(){var e,i;return((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??null}set activeBasemap(e){var n,s;const i=this.view;if(!(i!=null&&i.map))return;if(!e||!i.ready)return i.map.basemap=e,void this._clearOverride("activeBasemap");const r=e.spatialReference||((s=(n=this.items)==null?void 0:n.find(o=>this.basemapEquals(e,o.basemap)))==null?void 0:s.spatialReference);if(r&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const o=i.spatialReference;if(r!=null&&!Cn(o,r)&&!$c(i.spatialReference,r)&&!sf())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void Yp().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=r,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=e,this._clearOverride("activeBasemap"),r==null||Cn(i.spatialReference,r)||(i.spatialReference=r)}else i.map.basemap=e,this._clearOverride("activeBasemap")}castActiveBasemap(e){return _k(e)}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?ISt:MSt}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||Ze.isCollection(e)?new h2e({basemaps:Array.isArray(e)?new Ze(e):e}):LSt(e)?new ek({portal:e}):RSt(e)?new ek(e):DSt(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?yZ(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return OWe(e,i)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(_s.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,r=i.findIndex(n=>n.basemap===e);return r===-1?i.findIndex(n=>this.basemapEquals(n.basemap,e)):r}_recreateItems(){var o;const e=((o=this.source)==null?void 0:o.basemaps)??[],{view:i,compatibilityFunction:r}=this,n=new Map(this.items.map(a=>[a.basemap,a])),s=e.map(a=>{const l=n.get(a);return l?(n.delete(a),l):new u2e({basemap:a,compatibilityFunction:r,view:i})});this.items.removeAll(),this.items.addMany(s),n.forEach(a=>a.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};u([p()],nc.prototype,"_loadingProjectionEngine",void 0),u([p({type:Vv})],nc.prototype,"activeBasemap",null),u([_i("activeBasemap")],nc.prototype,"castActiveBasemap",null),u([p({readOnly:!0})],nc.prototype,"activeBasemapIndex",null),u([p()],nc.prototype,"compatibilityFunction",null),u([p({readOnly:!0,type:f2e})],nc.prototype,"items",void 0),u([p()],nc.prototype,"source",void 0),u([_i("source")],nc.prototype,"castSource",null),u([p({readOnly:!0})],nc.prototype,"state",null),u([p()],nc.prototype,"view",void 0),nc=u([U("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],nc);const NSt=nc;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */function zSt({level:t,class:e,children:i,excludeGlobalCss:r}){const n=USt(t),s=`h${n}`,o=Dye(s);return IO`<${o} .ariaLevel=${String(n)} class=${mt(zs(r?e:la.heading,e))} role=heading>${i}</${o}>`}function FSt(t,e,i){return Math.min(Math.max(t,e),i)}function USt(t){return FSt(Math.ceil(t),1,6)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const jSt=dt`@layer{arcgis-basemap-gallery{display:block}}`,VSt=AC(NSt),M3={small:200,default:280,wide:420};var rb;let BSt=(rb=class extends qi{constructor(){super(...arguments),this.messages=P1({}),this.viewModel=VSt(this),this._width=0,this._state="",this.activeBasemap=this.viewModel.activeBasemap,this.autoDestroyDisabled=!1,this.disabled=!1,this.headingLevel=2,this.icon="basemap",this.label="",this.position="bottom-left",this.source=this.viewModel.source,this.state=this.viewModel.state,this.arcgisPropertyChange=Cy()("activeBasemap","state"),this.arcgisReady=ko()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[hs(()=>this.source,()=>{this.viewModel.loadSource()},{sync:!0,initial:!0}),Le(()=>this.source.state,()=>{this._state=this.source.state},{sync:!0})]);const e=new ResizeObserver(r=>{for(const n of r)this._width=n.contentRect.width}),i=this.el.childElem;i&&e.observe(i)}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:r,activeBasemapIndex:n}=this.viewModel,s=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(n-1,-1),r.length):this._getRoundRobinIndex(n+1,r.length),o=r.at(s);(o==null?void 0:o.state)==="ready"&&(this.viewModel.activeBasemap=o.basemap)}render(){const e=this.source.state==="loading",i=this.disabled||this.state==="disabled",r=this.viewModel.items,n={[hc.sourceLoading]:e,[la.disabled]:i,"esri-component":!0},s=this._width;s<=M3.small||s>=M3.wide?n[hc.layoutGrid]=!0:s<M3.default&&(n[hc.narrowItems]=!0);const o=e?q`<div class=${mt(hc.loader)}></div>`:null,a=e?null:r.length>0?q`<div aria-disabled=${this.disabled??Ns} aria-label=${this.label??Ns} class=${mt(hc.itemContainer)} @keydown=${this._handleKeyDown} role=radiogroup>${r.map((l,c)=>q`<arcgis-basemap-gallery-item .disabled=${i} .item=${l} .itemIndex=${c} .viewModel=${this.viewModel} .messages=${this.messages}></arcgis-basemap-gallery-item>`)}</div>`:q`<div class=${mt(la.empty)}>${zSt({level:this.headingLevel,children:this.messages.noBasemaps})}</div>`;return q`<div class=${mt(zs(hc.base,la.widget,la.panel,n))} style=${aH({"--esri-basemap-gallery-small":`${M3.small}px`})}>${[o,a]}</div>`}},rb.properties={_width:16,_state:16,activeBasemap:1,autoDestroyDisabled:5,disabled:7,headingLevel:9,icon:1,label:1,messageOverrides:0,position:1,referenceElement:1,source:0,state:3},rb.shadowRootOptions=Zn,rb.styles=jSt,rb);or("arcgis-basemap-gallery",BSt);function GSt(t){return d1e(t)}let Kc=class extends st{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=_k("hybrid",this._basemapCache),this.view=null}initialize(){Le(()=>this.nextBasemap,e=>{e&&!e.loaded&&e.load().catch(()=>{})},gi)}destroy(){this.view=null,h1e(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return a1e(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){var e,i;return _k(((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??"topo-vector",this._basemapCache)}castNextBasemap(e){return _k(e,this._basemapCache)}get state(){const{view:e}=this;if(!(e!=null&&e.ready)||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:i}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&i!=null&&!e.spatialReference.equals(i)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:i,state:r,view:n}=this;if(!n||r==="disabled"||r==="incompatible-next-basemap")return;const s=this._viewSpatialReferenceLocked;if(!s){if(await Vp(()=>!this._nextBasemapSpatialReferenceTask.updating),i!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:o}=this._nextBasemapSpatialReferenceTask;if(o==null||Cn(n.spatialReference,o)||sf()||$c(n.spatialReference,o)||(this._loadingProjectionEngine=!0,await Yp(),this._loadingProjectionEngine=!1),i!==this.nextBasemap||e!==this.activeBasemap)return}n.map.basemap=i,s||this._nextBasemapSpatialReferenceTask.spatialReference==null||Cn(n.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(n.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return d1e(e)}};u([p()],Kc.prototype,"_loadingProjectionEngine",void 0),u([p({readOnly:!0})],Kc.prototype,"_nextBasemapSpatialReferenceTask",null),u([p({readOnly:!0})],Kc.prototype,"_viewSpatialReferenceLocked",null),u([p({readOnly:!0})],Kc.prototype,"activeBasemap",null),u([p()],Kc.prototype,"nextBasemap",void 0),u([_i("nextBasemap")],Kc.prototype,"castNextBasemap",null),u([p({readOnly:!0})],Kc.prototype,"state",null),u([p()],Kc.prototype,"view",void 0),u([p()],Kc.prototype,"toggle",null),Kc=u([U("esri.widgets.BasemapToggle.BasemapToggleViewModel")],Kc);const HSt=Kc;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const qSt=dt`@layer{arcgis-basemap-toggle{display:block}.esri-basemap-toggle__title-wrap{text-wrap:wrap}}`,Mg="esri-basemap-toggle",TM="esri-basemap-thumbnail",Qu={base:Mg,secondaryBasemapImage:`${Mg}__image--secondary`,container:`${TM} ${Mg}__container`,image:`${TM}__image ${Mg}__image`,imageLoading:`${Mg}__image--loading`,overlay:`${TM}__overlay ${Mg}__image-overlay`,title:`${TM}__title ${Mg}__title`,titleWrap:`${Mg}__title-wrap`,overlayScrim:`${TM}__overlay-scrim`},WSt=AC(HSt);var nb;let JSt=(nb=class extends qi{constructor(){super(...arguments),this.messages=P1(),this.viewModel=WSt(this),this.activeBasemap=this.viewModel.activeBasemap,this.autoDestroyDisabled=!1,this.icon="layer-basemap",this.nextBasemap=this.viewModel.nextBasemap,this.position="top-left",this.showTitle=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=Cy()("activeBasemap","nextBasemap","state"),this.arcgisReady=ko()}async destroy(){await this.manager.destroy()}async toggle(){return await this.viewModel.toggle()}_getThumbnailStyles(e){const i=GSt(e);return i?{backgroundImage:`url(${i})`}:{backgroundImage:""}}render(){const e=this.viewModel,i=e.state==="disabled"?null:e.activeBasemap,r=e.state==="disabled"?null:e.nextBasemap,n=e.state==="loading",s=e.state==="incompatible-next-basemap",o=(r==null?void 0:r.title)??"",a=r&&r.loadStatus!=="loaded";let l;const c=this.showTitle&&o,h=s,m=c||h,y=this._getThumbnailStyles(i),v=this._getThumbnailStyles(r);return m&&(l=q`<div class=${mt(Qu.overlay)}>${c?q`<span class=${mt(zs(Qu.title,Qu.titleWrap))} title=${o??Ns}>${o}</span>`:null}${h?q`<calcite-scrim class=${mt(Qu.overlayScrim)} title=${this.messages.incompatibleSpatialReference??Ns}><calcite-icon icon=exclamation-mark-triangle></calcite-icon></calcite-scrim>`:null}</div>`),q`<div class=${mt(zs(Qu.base,la.widget))}><calcite-button appearance=transparent data-basemap-id=${(r?r.id:"")??Ns} .disabled=${s} kind=neutral .label=${this.label??void 0} @click=${()=>void this.toggle()} title=${this.label??void 0??Ns}><div class=${mt(zs(Qu.container,Qu.secondaryBasemapImage))}><div class=${mt(Qu.image)} style=${aH(y)}></div></div><div class=${mt(Qu.container)}><div class=${mt(zs(Qu.image,a?Qu.imageLoading:null))} style=${aH(v)}>${a||n?q`<calcite-scrim><span aria-hidden=true class=${mt(la.loaderAnimation)} role=presentation></span></calcite-scrim>`:null}</div>${l}</div></calcite-button></div>`}},nb.properties={activeBasemap:0,autoDestroyDisabled:5,icon:1,label:1,messageOverrides:0,nextBasemap:1,position:3,referenceElement:1,showTitle:5,state:3},nb.shadowRootOptions=Zn,nb.styles=qSt,nb);or("arcgis-basemap-toggle",JSt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const xfe={container:"container",heading:"heading"},ZSt=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]){display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{margin:0;display:flex;flex:1 1 0%;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1));color:var(--calcite-list-color, var(--calcite-color-text-2))}.heading{font-weight:var(--calcite-font-weight-medium)}:host([scale=s]) .container{padding-inline:var(--calcite-spacing-sm)}:host([scale=s]) .heading{font-size:var(--calcite-font-size-sm);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-sm) var(--calcite-spacing-xxs)}:host([scale=s]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-inline:var(--calcite-spacing-md)}:host([scale=m]) .heading{font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-fixed-base);padding-block:var(--calcite-spacing-lg) var(--calcite-spacing-sm)}:host([scale=m]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-inline:var(--calcite-spacing-lg)}:host([scale=l]) .heading{font-size:var(--calcite-font-size-md);line-height:var(--calcite-font-line-height-fixed-lg);padding-block:var(--calcite-spacing-xl) var(--calcite-spacing-sm-plus, .625rem)}:host([scale=l]:not(:first-child)) .container{padding-block-start:var(--calcite-spacing-md-plus, .875rem)}.heading{padding:0}:host([hidden]){display:none}[hidden]{display:none}`,gU=class gU extends Yt{constructor(){super(...arguments),this.disabled=!1,this.filterHidden=!1,this.scale="m",this.calciteInternalListItemGroupDefaultSlotChange=Ne({cancelable:!1})}updated(){Gr(this)}handleDefaultSlotChange(){this.calciteInternalListItemGroupDefaultSlotChange.emit()}render(){const{disabled:e,heading:i}=this;return Hr({disabled:e,children:q`<div class=${ne(xfe.container)} role=row><div .ariaColSpan=${u_t} class=${ne(xfe.heading)} role=cell>${i}</div></div><slot @slotchange=${this.handleDefaultSlotChange}></slot>`})}};gU.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],heading:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},gU.styles=ZSt;let C5=gU;Xt("calcite-list-item-group",C5);const Kzt=Object.freeze(Object.defineProperty({__proto__:null,ListItemGroup:C5},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const Sfe="arcgis-search-result-renderer",$fe={base:Sfe,moreResults:`${Sfe}__more-results`},YSt=dt`@layer{.arcgis-search-result-renderer calcite-block,.arcgis-search-result-renderer calcite-block[expanded]{margin-block:0;margin-block-start:var(--calcite-spacing-md);border:0}}`;var sb;let XSt=(sb=class extends qi{constructor(){super(...arguments),this._resultCount=0,this._showMoreResultsOpen=!1,this.autoDestroyDisabled=!1,this.arcgisReady=ko()}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[Le(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.results,(i=this.viewModel)==null?void 0:i.resultCount]},()=>{var e,i;this._results=(e=this.viewModel)==null?void 0:e.results,this._resultCount=((i=this.viewModel)==null?void 0:i.resultCount)??0,this._showMoreResultsOpen=!1},{initial:!0}),Le(()=>{var e;return(e=this.viewModel)==null?void 0:e.selectedResult},e=>this._selectedResult=e,{initial:!0})])}_selectResult(e){var i;this._showMoreResultsOpen=!1,(i=this.viewModel)==null||i.select(e)}_getSourceName(e,i){var r;return i===-1?((r=this.messages)==null?void 0:r.all)??"":e.name}_toggleShowMoreResults(e){var r,n;this._showMoreResultsOpen=e;const i=(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.popup;i&&"reposition"in i&&i.reposition()}render(){var e;return q`<div class=${mt(zs($fe.base,la.widget))}>${((e=this._selectedResult)==null?void 0:e.name)??""}${this._renderMoreResults()}</div>`}_renderMoreResults(){var r;const{_resultCount:e,_results:i}=this;return!e||e<2||!i?null:q`<calcite-block class=${mt($fe.moreResults)} collapsible .expanded=${this._showMoreResultsOpen} .heading=${Zp(((r=this.messages)==null?void 0:r.showMoreResults)??"",{count:e-1})} @calciteBlockClose=${()=>this._toggleShowMoreResults(!1)} @calciteBlockOpen=${()=>this._toggleShowMoreResults(!0)}>${i.map(n=>this._renderMoreResultsList(n,(i==null?void 0:i.length)>1))}</calcite-block>`}_renderMoreResultsList(e,i){const{results:r}=e;if(!((r==null?void 0:r.length)??0)||!r)return null;const n=this._getSourceName(e.source,e.sourceIndex),s=r.filter(o=>o!==this._selectedResult).map(o=>this._renderListItem(o));return q`<calcite-list .label=${n}>${i?nt(`group-${e.sourceIndex}`,q`<calcite-list-item-group .heading=${n}>${s}</calcite-list-item-group>`):s}</calcite-list>`}_renderListItem(e){return nt(`result-${e.sourceIndex}-${e.key}`,q`<calcite-list-item .label=${e.name} @calciteListItemSelect=${()=>this._selectResult(e)}></calcite-list-item>`)}},sb.properties={_results:16,_resultCount:16,_selectedResult:16,_showMoreResultsOpen:16,messages:0,autoDestroyDisabled:5,viewModel:0},sb.styles=YSt,sb.shadowRootOptions=Zn,sb);or("arcgis-search-result-renderer",XSt);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const kg={container:"container",containerActive:"container--active",contentCenter:"content-center",description:"description",heading:"heading",iconEnd:"icon-end",iconStart:"icon-start",scale:t=>`scale--${t}`},Tfe={contentEnd:"content-end",contentStart:"content-start"},KSt=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .5rem;--calcite-internal-autocomplete-item-spacing-unit-s: .25rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-xs)}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-spacing-unit-l: .75rem;--calcite-internal-autocomplete-item-spacing-unit-s: .375rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size-sm)}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-spacing-unit-l: 1rem;--calcite-internal-autocomplete-item-spacing-unit-s: .625rem;--calcite-internal-autocomplete-item-description-font-size: var(--calcite-font-size)}:host{display:flex}.container{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;outline-color:transparent;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-3));gap:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-inline:var(--calcite-internal-autocomplete-item-spacing-unit-l);padding-block:var(--calcite-internal-autocomplete-item-spacing-unit-s);word-wrap:break-word;word-break:break-word;justify-content:space-around}.description{color:var(--calcite-autocomplete-description-text-color);font-size:var(--calcite-internal-autocomplete-item-description-font-size)}.heading{color:var(--calcite-autocomplete-heading-text-color, var(--calcite-color-text-1))}.heading,.description{line-height:var(--calcite-font-line-height-relative-snug)}:host(:hover:not([disabled])) .container{background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-2))}:host(:hover:not([disabled])) .container .description{color:var(--calcite-autocomplete-description-text-color, var(--calcite-color-text-2))}.container--active{outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(-2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content-center{display:flex;flex-direction:column;flex-grow:1;padding-block:0}.text-match{background-color:transparent;color:inherit;font-weight:var(--calcite-font-weight-bold)}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,vU=class vU extends Yt{constructor(){super(...arguments),this.active=!1,this.disabled=!1,this.guid=`autocomplete-item-${Ml()}`,this.scale="m",this.calciteInternalAutocompleteItemSelect=Ne({cancelable:!1})}updated(){Gr(this)}handleClick(e){e.preventDefault(),this.calciteInternalAutocompleteItemSelect.emit()}render(){const{active:e,description:i,heading:r,disabled:n,inputValueMatchPattern:s}=this;return Hr({disabled:n,children:q`<div class=${ne({[kg.container]:!0,[kg.containerActive]:e&&!n,[kg.scale(this.scale)]:!0})} @click=${this.handleClick}>${this.renderIcon("start")}<slot name=${Tfe.contentStart}></slot><div class=${ne(kg.contentCenter)}><div class=${ne(kg.heading)}>${Zk({text:r,pattern:s})}</div><div class=${ne(kg.description)}>${Zk({text:i,pattern:s})}</div></div><slot name=${Tfe.contentEnd}></slot>${this.renderIcon("end")}</div>`})}renderIcon(e){const{iconFlipRtl:i}=this,r=e==="start"?this.iconStart:this.iconEnd;return r?q`<calcite-icon class=${ne(e==="start"?kg.iconStart:kg.iconEnd)} .flipRtl=${i===e||i==="both"} .icon=${r} .scale=${Fi(this.scale)}></calcite-icon>`:null}};vU.properties={active:[5,{},{type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],guid:1,heading:1,iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],inputValueMatchPattern:[2,{},{reflect:!0,attribute:!1}],label:1,scale:1,value:1},vU.styles=KSt;let bZ=vU;Xt("calcite-autocomplete-item",bZ);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Efe=(t,e,i)=>{const r=new Map;for(let n=e;n<=i;n++)r.set(t[n],n);return r},QSt=eC(class extends tC{constructor(t){if(super(t),t.type!==Gh.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const n=[],s=[];let o=0;for(const a of t)n[o]=r?r(a,o):o,s[o]=i(a,o),o++;return{values:s,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const n=qPe(t),{values:s,keys:o}=this.dt(e,i,r);if(!Array.isArray(n))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let c,h,m=0,y=n.length-1,v=0,w=s.length-1;for(;m<=y&&v<=w;)if(n[m]===null)m++;else if(n[y]===null)y--;else if(a[m]===o[v])l[v]=g0(n[m],s[v]),m++,v++;else if(a[y]===o[w])l[w]=g0(n[y],s[w]),y--,w--;else if(a[m]===o[w])l[w]=g0(n[m],s[w]),OI(t,l[w+1],n[m]),m++,w--;else if(a[y]===o[v])l[v]=g0(n[y],s[v]),OI(t,n[m],n[y]),y--,v++;else if(c===void 0&&(c=Efe(o,v,w),h=Efe(a,m,y)),c.has(a[m]))if(c.has(a[y])){const x=h.get(o[v]),S=x!==void 0?n[x]:null;if(S===null){const C=OI(t,n[m]);g0(C,s[v]),l[v]=C}else l[v]=g0(S,s[v]),OI(t,n[m],S),n[x]=null;v++}else OV(n[y]),y--;else OV(n[m]),m++;for(;v<=w;){const x=OI(t,l[w+1]);g0(x,s[v]),l[v++]=x}for(;m<=y;){const x=n[m++];x!==null&&OV(x)}return this.ut=o,GZ(t,l),fc}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const e$t=dt`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:block}.input-container{position:relative;display:flex;flex:1 1 auto;flex-wrap:nowrap}.input{width:100%;--calcite-input-prefix-size: var(--calcite-autocomplete-input-prefix-size);--calcite-input-suffix-size: var(--calcite-autocomplete-input-suffix-size);--calcite-input-background-color: var(--calcite-autocomplete-input-background-color);--calcite-input-border-color: var(--calcite-autocomplete-input-border-color);--calcite-input-corner-radius: var(--calcite-autocomplete-input-corner-radius);--calcite-input-shadow: var(--calcite-autocomplete-input-shadow);--calcite-input-icon-color: var(--calcite-autocomplete-input-icon-color);--calcite-input-text-color: var(--calcite-autocomplete-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-autocomplete-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-autocomplete-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-autocomplete-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-autocomplete-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-autocomplete-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-autocomplete-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-autocomplete-input-actions-icon-color-press);--calcite-input-loading-background-color: var(--calcite-autocomplete-input-loading-background-color);--calcite-input-loading-fill-color: var(--calcite-autocomplete-input-loading-fill-color);--calcite-input-prefix-background-color: var(--calcite-autocomplete-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-autocomplete-input-prefix-text-color);--calcite-input-suffix-background-color: var(--calcite-autocomplete-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-autocomplete-input-suffix-text-color)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.content-container{box-sizing:border-box;width:100%}.floating-ui-container{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset,left,opacity;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}.content-container .calcite-floating-ui-anim{max-height:45vh;width:100%;overflow-y:auto;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-1));background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-autocomplete-corner-radius, var(--calcite-corner-radius-round))}.content--hidden{display:none}@media (forced-colors: active){.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,Cfe={contentBottom:"content-bottom",contentTop:"content-top"},Jf={inputContainer:"input-container",input:"input",contentContainer:"content-container",contentAnimation:"content-animation",content:"content",contentHidden:"content--hidden",floatingUIContainer:"floating-ui-container",floatingUIContainerActive:"floating-ui-container--active",screenReadersOnly:"screen-readers-only"},t$t={validationMessage:"autocompleteValidationMessage"},i$t="calcite-autocomplete-item-group",r$t="calcite-autocomplete-item",bU=class bU extends Yt{constructor(){super(),this.guid=Ml(),this.attributeWatch=CU(["autofocus","enterkeyhint","inputmode"],this.handleGlobalAttributesChanged),this.inputId=`autocomplete-input-${this.guid}`,this.listId=`autocomplete-list-${this.guid}`,this.messages=Mn(),this.transitionProp="opacity",this.mutationObserver=sn("mutation",()=>this.getAllItemsDebounced()),this.resizeObserver=sn("resize",()=>{this.setFloatingElSize()}),this.getAllItemsDebounced=nC(this.getAllItems,0),this.activeDescendant="",this.activeIndex=-1,this.hasContentBottom=!1,this.hasContentTop=!1,this.items=[],this.groups=[],this.alignment="start",this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.open=!1,this.overlayPositioning="absolute",this.placement=xE,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.value="",this.calciteAutocompleteBeforeClose=Ne({cancelable:!1}),this.calciteAutocompleteBeforeOpen=Ne({cancelable:!1}),this.calciteAutocompleteChange=Ne({cancelable:!1}),this.calciteAutocompleteClose=Ne({cancelable:!1}),this.calciteAutocompleteOpen=Ne({cancelable:!1}),this.calciteAutocompleteTextChange=Ne({cancelable:!1}),this.calciteAutocompleteTextInput=Ne({cancelable:!1}),this.listenOn(document,"click",this.documentClickHandler),this.listen("calciteInternalAutocompleteItemSelect",this.handleInternalAutocompleteItemSelect)}get isOpen(){return this.open&&(this.hasContentTop||this.hasContentBottom||this.items.length>0)}get enabledItems(){return this.items.filter(e=>!e.disabled)}async reposition(e=!1){const{floatingEl:i,referenceEl:r,placement:n,overlayPositioning:s,flipPlacements:o}=this;return EO(this,{floatingEl:i,referenceEl:r,overlayPositioning:s,placement:n,flipPlacements:o,type:"menu"},e)}async scrollContentTo(e){var i;(i=this.transitionEl)==null||i.scrollTo(e)}async selectText(){return this.referenceEl.selectText()}async setFocus(){return await pr(this),this.referenceEl.setFocus()}connectedCallback(){var e;super.connectedCallback(),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0}),rf(this),g1(this),this.defaultInputValue=this.inputValue||"",this.getAllItemsDebounced(),wl(this)}async load(){this.getAllItemsDebounced()}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.reposition(!0),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")&&this.reposition(!0),e.has("placement")&&(this.hasUpdated||this.placement!==xE)&&this.reposition(!0);let i=!1;e.has("inputValue")&&(this.hasUpdated||this.inputValue)&&(this.inputValueMatchPattern=this.inputValue&&new RegExp(`(${eY(this.inputValue)})`,"i"),this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&(this.updateItems(),this.updateGroups(),i=!0),!i&&e.has("activeIndex")&&(this.hasUpdated||this.activeIndex!==-1)&&this.updateItems()}updated(){Gr(this)}loaded(){oY(this,this.value||""),this.defaultInputValue=this.inputValue||"",wl(this)}disconnectedCallback(){var e,i;super.disconnectedCallback(),(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),$b(this),v1(this),sC(this)}setFloatingElSize(){const{referenceEl:e,floatingEl:i}=this;!e||!i||(i.style.inlineSize=`${e.clientWidth}px`)}handleGlobalAttributesChanged(){this.requestUpdate()}handleDisabledChange(e){e||(this.open=!1)}openHandler(){if(y1(this),this.open||(this.activeIndex=-1),this.disabled){this.open=!1;return}this.setFloatingElSize(),this.reposition(!0)}async documentClickHandler(e){this.disabled||e.composedPath().includes(this.el)||(this.open=!1)}async handleInternalAutocompleteItemSelect(e){this.value=e.target.value,e.stopPropagation(),this.emitChange(),await this.setFocus(),this.open=!1}onLabelClick(){this.setFocus()}onFormReset(){this.inputValue=this.defaultInputValue}onBeforeOpen(){this.calciteAutocompleteBeforeOpen.emit()}onOpen(){this.calciteAutocompleteOpen.emit()}onBeforeClose(){this.calciteAutocompleteBeforeClose.emit()}onClose(){this.calciteAutocompleteClose.emit()}emitChange(){this.calciteAutocompleteChange.emit()}updateGroups(){this.groups.forEach((e,i,r)=>{e.scale=this.scale,i===0&&(e.disableSpacing=!0);const n=r[i+1];n&&(n.disableSpacing=e.children.length===0)})}updateItems(){let e=null;this.items.forEach(i=>{i.scale=this.scale,i.inputValueMatchPattern=this.inputValueMatchPattern}),this.enabledItems.forEach((i,r)=>{const n=r===this.activeIndex;n&&(e=i.guid),i.active=n}),this.activeDescendant=e}handleInputFocus(){this.open=!0}handleContentTopSlotChange(e){this.hasContentTop=Ut(e)}handleContentBottomSlotChange(e){this.hasContentBottom=Ut(e)}getAllItems(){const{el:e}=this;this.groups=Array.from(e.querySelectorAll(i$t)),this.items=Array.from(e.querySelectorAll(r$t)),this.updateItems(),this.updateGroups()}setReferenceEl(e){var i;this.referenceEl=e,e&&((i=this.resizeObserver)==null||i.observe(e),wl(this))}keyDownHandler(e){const{defaultPrevented:i,key:r}=e;if(i)return;const{open:n,activeIndex:s,enabledItems:o}=this,a=o.length&&s>-1?o[s]:null;switch(r){case"Escape":n&&(this.open=!1,e.preventDefault());break;case"Tab":this.open=!1;break;case"Enter":n&&a?(this.value=a.value,this.emitChange(),this.open=!1,e.preventDefault()):e.defaultPrevented||kO(this)&&e.preventDefault();break;case"ArrowDown":o.length&&(this.open=!0,this.activeIndex=s!==-1?Math.min(s+1,o.length-1):0,this.scrollToActiveItem(),e.preventDefault());break;case"ArrowUp":o.length&&(this.open=!0,this.activeIndex=s!==-1?Math.max(s-1,0):o.length-1,this.scrollToActiveItem(),e.preventDefault());break;case"Home":o.length&&(this.open=!0,this.activeIndex=0,this.scrollToActiveItem(),e.preventDefault());break;case"End":o.length&&(this.open=!0,this.activeIndex=o.length-1,this.scrollToActiveItem(),e.preventDefault());break}}scrollToActiveItem(){var e;(e=this.enabledItems[this.activeIndex])==null||e.scrollIntoView({block:"nearest"})}changeHandler(e){e.stopPropagation(),this.inputValue=e.target.value,this.calciteAutocompleteTextChange.emit()}inputClickHandler(e){e.defaultPrevented||(this.open=!0)}inputHandler(e){var i;e.stopPropagation(),this.inputValue=e.target.value,this.open=((i=this.inputValue)==null?void 0:i.length)>0,this.calciteAutocompleteTextInput.emit()}setFloatingEl(e){this.floatingEl=e,wl(this)}setTransitionEl(e){e&&(this.transitionEl=e)}render(){const{disabled:e,listId:i,inputId:r,isOpen:n}=this,s=this.el.autofocus,o=this.el.enterKeyHint,a=this.el.inputMode;return Hr({disabled:e,children:q`<div class=${ne(Jf.inputContainer)}><calcite-input .alignment=${this.alignment} aria-activedescendant=${this.activeDescendant??Ge} aria-controls=${i??Ge} aria-owns=${i??Ge} aria-autocomplete=list .ariaExpanded=${n} aria-haspopup=listbox .autocomplete=${this.autocomplete} .autofocus=${s} class=${ne(Jf.input)} clearable .disabled=${e} enterkeyhint=${o??Ge} .form=${this.form} .icon=${this.icon??!0} .iconFlipRtl=${this.iconFlipRtl} id=${r??Ge} inputmode=${a??Ge} .label=${this.label} .loading=${this.loading} .maxLength=${this.maxLength} .messageOverrides=${this.messages} .minLength=${this.minLength} .name=${this.name} @click=${this.inputClickHandler} @keydown=${this.keyDownHandler} @calciteInputChange=${this.changeHandler} @calciteInputInput=${this.inputHandler} @calciteInternalInputFocus=${this.handleInputFocus} .pattern=${this.pattern} .placeholder=${this.placeholder} .prefixText=${this.prefixText} .readOnly=${this.readOnly} role=combobox .scale=${this.scale} .status=${this.status} .suffixText=${this.suffixText} type=search .value=${this.inputValue} ${yt(this.setReferenceEl)}></calcite-input>${this.renderListBox()}<div class=${ne({[Jf.contentContainer]:!0,[Jf.floatingUIContainer]:!0,[Jf.floatingUIContainerActive]:n})} ${yt(this.setFloatingEl)}><div class=${ne({[Jf.contentAnimation]:!0,[Up.animation]:!0,[Up.animationActive]:n})} ${yt(this.setTransitionEl)}><div class=${ne({[Jf.content]:!0,[Jf.contentHidden]:!n})}><slot name=${Cfe.contentTop} @slotchange=${this.handleContentTopSlotChange}></slot><slot aria-hidden=true></slot><slot name=${Cfe.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div></div></div></div>${b1({component:this})}${this.validationMessage&&this.status==="invalid"?AO({icon:this.validationIcon,id:t$t.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderListBox(){return q`<ul aria-labelledby=${this.inputId??Ge} class=${ne(Jf.screenReadersOnly)} id=${this.listId??Ge} role=listbox tabindex=-1>${this.renderListBoxOptions()}</ul>`}renderListBoxOptions(){return QSt(this.items.filter(e=>!!(e.label||e.heading)),e=>e.guid,e=>q`<li .ariaDisabled=${e.disabled} .ariaLabel=${e.label} id=${e.guid??Ge} role=option tabindex=-1>${e.heading}${e.description}</li>`)}};bU.properties={activeDescendant:[16,{},{state:!0}],activeIndex:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],items:[16,{},{state:!0}],groups:[16,{},{state:!0}],isOpen:[16,{},{state:!0}],enabledItems:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],icon:[3,{converter:wu},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],inputValue:1,label:1,loading:[7,{},{reflect:!0,type:Boolean}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],minLength:[11,{},{reflect:!0,type:Number}],name:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],pattern:1,placeholder:1,placement:[3,{},{reflect:!0}],prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],suffixText:1,validationIcon:[3,{converter:wu},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},bU.styles=e$t;let wZ=bU;Xt("calcite-autocomplete",wZ);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.2.1 */const yG={container:"container",containerNoSpacing:"container--no-spacing",heading:"heading"},n$t=dt`.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .5rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-internal-autocomplete-item-group-spacing-unit: .75rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-internal-autocomplete-item-group-spacing-unit: 1rem}:host{margin:0;display:flex;flex-direction:column}.container{display:flex;flex-direction:column;background-color:var(--calcite-autocomplete-background-color, var(--calcite-color-foreground-1));padding-block-start:var(--calcite-internal-autocomplete-item-group-spacing-unit)}.container--no-spacing{padding-block-start:0}.heading{border:0 solid;box-sizing:border-box;inline-size:100%;min-inline-size:0px;max-inline-size:100%;border-block-end-width:1px;font-weight:var(--calcite-font-weight-bold);word-wrap:break-word;word-break:break-word;color:var(--calcite-autocomplete-text-color, var(--calcite-color-text-2));border-block-end-color:var(--calcite-autocomplete-border-color, var(--calcite-color-border-3));padding-block:var(--calcite-internal-autocomplete-item-group-spacing-unit);padding-inline:var(--calcite-internal-autocomplete-item-group-spacing-unit)}:host([hidden]){display:none}[hidden]{display:none}`,wU=class wU extends Yt{constructor(){super(...arguments),this.disableSpacing=!1,this.scale="m"}render(){const{scale:e}=this;return q`<div aria-label=${this.label??this.heading??tn} class=${ne({[yG.container]:!0,[yG.containerNoSpacing]:this.disableSpacing,[`scale--${e}`]:!0})} role=group><div class=${ne(yG.heading)} role=presentation>${this.heading}</div><slot></slot></div>`}};wU.properties={disableSpacing:[5,{},{type:Boolean}],heading:1,label:1,scale:1},wU.styles=n$t;let _Z=wU;Xt("calcite-autocomplete-item-group",_Z);function Ife(t){var e;switch(t==null?void 0:t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}async function s$t(t,e){var n,s;if(t.hasZ||e.type==="2d")return t;const i=(n=e.map)==null?void 0:n.ground;if(!(i!=null&&i.layers.length))return t;const{geometry:r}=await i.queryElevation(t,{cache:(s=e.basemapTerrain)==null?void 0:s.elevationQueryCache});return r}function xZ(t,e,i){return m2e(t.center,e,i)}function qQ(t,e,i){switch(t==null?void 0:t.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return m2e(t,e,i);default:return null}}function m2e(t,e,i){const r=t.hasZ?t.z:void 0;if(e!=null&&e.map)return(i!=null?Zst(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r});const{x:n,y:s,spatialReference:o}=t;return new jt({xmin:n-.25,ymin:s-.25,xmax:n+.25,ymax:s+.25,spatialReference:o,zmin:r,zmax:r})}let rs=class extends Hd.IdentifiableMixin(ye){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suffix="",this.suggestionsEnabled=null,this.withinViewEnabled=!1,this.zoomScale=null}};u([p()],rs.prototype,"autoNavigate",void 0),u([p()],rs.prototype,"filter",void 0),u([p()],rs.prototype,"getResults",void 0),u([p()],rs.prototype,"getSuggestions",void 0),u([p()],rs.prototype,"maxResults",void 0),u([p()],rs.prototype,"maxSuggestions",void 0),u([p()],rs.prototype,"minSuggestCharacters",void 0),u([p()],rs.prototype,"outFields",void 0),u([p()],rs.prototype,"placeholder",void 0),u([p()],rs.prototype,"popupEnabled",void 0),u([p({type:Bd})],rs.prototype,"popupTemplate",void 0),u([p()],rs.prototype,"prefix",void 0),u([p()],rs.prototype,"resultGraphicEnabled",void 0),u([p()],rs.prototype,"resultSymbol",void 0),u([p()],rs.prototype,"suffix",void 0),u([p()],rs.prototype,"suggestionsEnabled",void 0),u([p()],rs.prototype,"withinViewEnabled",void 0),u([p()],rs.prototype,"zoomScale",void 0),rs=u([U("esri.widgets.Search.SearchSource")],rs);const WQ=rs,o$t=/https?:\/\/services.*\.arcgis\.com/i,a$t=/(?:\{([^}]+)\})/g,nT=()=>Ce.getLogger("esri.widgets.Search.support.layerSearchUtils");function l$t(t,e){const{exactMatch:i=!1,location:r,maxResults:n,spatialReference:s,source:o,sourceIndex:a,suggestResult:l,view:c}=t,{layer:h,filter:m,zoomScale:y}=o,v=c==null?void 0:c.scale,w=y2e(o,c),x=e==null?void 0:e.signal;return v2e(h).then(()=>{const S=h.popupTemplate;return S?S.getRequiredFields(h.fieldsIndex):null}).then(S=>{var ge,fe,ue,ae;const{objectIdField:C,returnZ:k}=h,A=$2e(o);if(!JQ(h,A))throw nT().error("invalid-field: displayField is invalid."),new Q("getResults():invalid-field","displayField is invalid.");const R=S!=null&&S.length?S:[A],D=o.outFields||R,B=g2e(D);if(D.includes(C)||B||D.push(C),(ge=h.floorInfo)!=null&&ge.floorField&&D.push(h.floorInfo.floorField),!(B||I5(h,D)))throw nT().error("invalid-field: outField is invalid."),new Q("getResults():invalid-field","outField is invalid.");const z=h.createQuery(),{orderByFields:W}=o;if(W&&(z.orderByFields=W),s){z.outSpatialReference=s;const Se=1/Ha(s);Se&&(z.maxAllowableOffset=Se)}const Y=h.geometryType==="mesh"||h.geometryType==="multipatch",ee=((ue=(fe=h.capabilities)==null?void 0:fe.data)==null?void 0:ue.supportsZ)&&!Y;if(z.returnZ=ee&&k!==!1,z.returnGeometry=!0,z.multipatchOption=Y?"xyFootprint":null,D&&(z.outFields=D),r)z.geometry=r;else if(l.key)z.objectIds=[l.key];else{const Se=o.searchFields||[A];if(!I5(h,Se))throw nT().error("invalid-field: search field is invalid."),new Q("getResults():invalid-field","search field is invalid.");if(S2e(h)&&(z.num=n),w&&(z.geometry=w),!((ae=l.text)==null?void 0:ae.trim()))return[];const be=l.text,{prefix:Oe="",suffix:Be=""}=o,se=T2e(`${Oe}${be}${Be}`);x2e(h)&&w2e(h,Se)&&!i&&be&&(z.fullText=_2e({text:be,searchFields:Se}));const Pe=E2e({searchTerm:se,layer:h,searchFields:Se,filter:m,exactMatch:i,query:z,type:"search"});if(z.where=Pe,!b2e(z))return[]}return h.queryFeatures(z,{signal:x}).then(Se=>_$t(Se,c,o,a,A,v,y))})}function c$t(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:l}=t,{layer:c,filter:h}=i,m=e==null?void 0:e.signal,y=y2e(i,n);return v2e(c).then(()=>{if(!S2e(c))return[];const v=$2e(i),w=i.searchFields||[v],x=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(a$t,(ee,ge)=>(x.push(ge),ee)):x.push(v);const S=g2e(x);x.includes(c.objectIdField)||S||x.push(c.objectIdField);const C=JQ(c,v),k=S||I5(c,x),A=I5(c,w);if(!C)throw nT().error("invalid-field: displayField is invalid."),new Q("getSuggestions():invalid-field","displayField is invalid.");if(!k)throw nT().error("invalid-field: outField is invalid."),new Q("getSuggestions():invalid-field","outField is invalid.");if(!A)throw nT().error("invalid-field: search field is invalid."),new Q("getSuggestions():invalid-field","search field is invalid.");const R=c.createQuery(),{orderByFields:D}=i;if(D&&(R.orderByFields=D),R.outSpatialReference=r,R.returnGeometry=!1,R.num=o,R.outFields=x,y&&(R.geometry=y),!s.trim())return[];const{prefix:B="",suffix:z=""}=i,W=T2e(`${B}${s}${z}`);x2e(c)&&w2e(c,w)&&!l&&s&&(R.fullText=_2e({text:s,searchFields:w}));const Y=E2e({searchTerm:W,layer:c,searchFields:w,filter:h,exactMatch:l,query:R,type:"suggest"});return R.where=Y,b2e(R)?c.queryFeatures(R,{signal:m}).then(ee=>v$t(ee,i,a,v)):[]})}function y2e(t,e){const{filter:i,withinViewEnabled:r}=t,n=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(r&&n?n:void 0)}function g2e(t){return t&&t.includes("*")}async function v2e(t){t&&await t.load()}function b2e(t){return!(!t.fullText&&!t.where)}function w2e(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(r=>r.indexType==="FullText").some(r=>{var s;const n=((s=r.fields)==null?void 0:s.split(",").map(o=>o.trim().toLowerCase()))||[];return e.every(o=>n.includes(o.toLowerCase()))})}function _2e({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new fxe({onFields:e,searchTerm:i,searchType:"prefix"}))}function x2e(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function S2e(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function u$t(t){var e,i,r;return((r=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(n=>n.type==="string"))==null?void 0:r.name)??""}function $2e(t){return t.displayField||t.layer.displayField||u$t(t.layer)}function I5(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>JQ(t,i))}function JQ(t,e){return!!t.getField(e)}function d$t(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function h$t({codedValues:t},e,i){return _A(t??[],r=>{const n=r.name,s=i?n:n.toLowerCase();return(i?e:e.toLowerCase())===s?r.code.toString():null})??null}function T2e(t){return t.replaceAll("'","''")}function EM(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function p$t({currentTerm:t,field:e,filter:i,exactMatch:r,url:n,type:s}){const o=e==null?void 0:e.type,a=e==null?void 0:e.name;if(o==="string"||o==="date"||o==="global-id"){const l=o$t.test(n??""),c=l&&d$t(t)?"N":"";return EM(r&&s==="search"?`${a} = ${c}'${t}'`:l?`${a} LIKE ${c}${`'${t}%'`}`:`${`LOWER(${a})`} LIKE ${c}${`'${t.toLowerCase()}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(t);return isNaN(l)?null:EM(`${a} = ${l}`,i)}return EM(`${a} = ${t}`,i)}function f$t(t,e){return t?` OR (${e})`:`(${e})`}function E2e({searchTerm:t,layer:e,searchFields:i,filter:r,exactMatch:n,query:s,type:o}){const{definitionExpression:a,url:l}=e;let c="";return!s.fullText&&t&&i&&i.forEach(h=>{var w;const m=e.getField(h),y=(w=e.getFieldDomain)==null?void 0:w.call(e,h,{excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")}),v=(y&&y.type==="coded-value"?h$t(y,t,n):null)||t||null;if(v!==null){const x=p$t({currentTerm:v,field:m,filter:r,exactMatch:n,url:l,type:o});x&&(c+=f$t(c,x))}}),a&&c?`(${a}) AND (${c})`:a||c}function m$t(t,e){let i=null;const{codedValues:r}=t;return r&&r.length&&r.some(n=>n.code===e&&(i=n.name,!0)),i}function y$t(t,e){return t[e]??t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function C2e(t,e,i){var o;const r=t.sourceLayer,{attributes:n}=t,s=(o=r.getFieldDomain)==null?void 0:o.call(r,i,{feature:t,excludeImpliedDomains:ve("esri-widget-legacy-field-domain-calculation")});if(e)return Zp(e,n);if(i&&n){const a=r.getField(i),l=y$t(n,i);return l==null?"":s&&s.type==="coded-value"?m$t(s,l)??"":(a==null?void 0:a.type)==="date"?yc(new Date(l)):typeof l=="number"?l.toString():typeof l!="string"?"":l.trim()}return""}function g$t(t,e,i,r){const n=t.sourceLayer,{attributes:s}=t,{objectIdField:o}=n,a=o?s[o]:null;return{text:C2e(t,e.suggestionTemplate,r),key:a,sourceIndex:i}}function v$t(t,e,i,r){return t.features.map(n=>g$t(n,e,i,r))}function b$t(t){return t!=null&&t.minScale!=null&&t.maxScale!=null}function w$t(t,e,i,r,n,s,o){const a=t.clone();a.layer=t.layer;const l=t.sourceLayer,c=l==null?void 0:l.objectIdField,h=c?t.attributes[c]:null,m=C2e(t,i.searchTemplate,n);s!=null&&b$t(l)&&(l.minScale&&l.minScale<s?s=l.minScale:l.maxScale&&l.maxScale>s&&(s=l.maxScale));const y=a.geometry?qQ(a.geometry,e??void 0,s??void 0):void 0,v=typeof o=="number"&&y?xZ(ce(y),e??void 0,o):y,w=t.clone();return w.layer=t.layer,v!=null&&(w.geometry=rr.fromExtent(v)),{extent:v,target:w,feature:a,key:h,name:m,sourceIndex:r}}function _$t(t,e,i,r,n,s,o){return t.features.map(a=>w$t(a,e,i,r,n,s,o))}var SZ;let pd=SZ=class extends WQ{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>l$t({source:this,...e},i),this.getSuggestions=(e,i)=>c$t({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new SZ({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?ce(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?ce(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const r=t.getField(i);return(r==null?void 0:r.alias)||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};u([p({json:{read:{source:"field.name"},write:{target:"field.name"}}})],pd.prototype,"displayField",void 0),u([p({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],pd.prototype,"exactMatch",void 0),u([p({value:null})],pd.prototype,"layer",null),u([p()],pd.prototype,"name",null),u([p({type:[String],json:{write:!0}})],pd.prototype,"orderByFields",void 0),u([p()],pd.prototype,"searchFields",void 0),u([p()],pd.prototype,"searchTemplate",void 0),u([p()],pd.prototype,"suggestionTemplate",void 0),pd=SZ=u([U("esri.widgets.Search.LayerSearchSource")],pd);const c$=pd;function x$t(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function S$t(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Kg=class extends ye{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};u([p({type:String,json:{write:!0}})],Kg.prototype,"address",void 0),u([p({type:Object,json:{write:!0}})],Kg.prototype,"attributes",void 0),u([p({type:jt,json:{write:!0}})],Kg.prototype,"extent",void 0),u([p({type:ft,json:{write:!0}})],Kg.prototype,"location",void 0),u([p({type:Number,json:{write:!0}})],Kg.prototype,"score",void 0),Kg=u([U("esri.rest.support.AddressCandidate")],Kg);const I2e=Kg,ZQ={type:String,json:{read:{source:"token"},write:{target:"token"}}};let go=class extends ye{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};u([p({type:Object,json:{write:!0}})],go.prototype,"address",void 0),u([p(ZQ)],go.prototype,"apiKey",void 0),u([p({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],go.prototype,"categories",void 0),u([p({type:String,json:{write:!0}})],go.prototype,"countryCode",void 0),u([p({type:Boolean,json:{write:!0}})],go.prototype,"forStorage",void 0),u([p({type:ft,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],go.prototype,"location",void 0),u([p({type:["rooftop","street"],json:{write:!0}})],go.prototype,"locationType",void 0),u([p({type:String,json:{write:!0}})],go.prototype,"magicKey",void 0),u([p({type:Number,json:{write:!0}})],go.prototype,"maxLocations",void 0),u([p({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],go.prototype,"outFields",void 0),u([p({type:et,json:{read:{source:"outSR"},write:{target:"outSR"}}})],go.prototype,"outSpatialReference",void 0),u([p({type:jt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],go.prototype,"searchExtent",void 0),go=u([U("esri.rest.support.AddressToLocationsParameters")],go),go.from=hr(go);const M2e=go;async function $$t(t,e,i){e=M2e.from(e);const r=Ad(t),{address:n,...s}=e.toJSON(),o={...n,...s,f:"json"},a=R4({...r.query,...o}),l=lP(a,i),c=`${r.path}/findAddressCandidates`;return Ot(c,l).then(T$t)}function T$t({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(r=>{if(!r)return;const{extent:n,location:s}=r,o=!n||S$t(n);return x$t(s)&&o?(n&&(n.spatialReference=i),s&&(s.spatialReference=i),I2e.fromJSON(r)):void 0}):[]}const E$t=Wt()({DistanceMarker:"distance-marker",Locality:"locality",POI:"poi",PointAddress:"point-address",Postal:"postal",StreetAddress:"street-address",StreetInt:"street-intersection",StreetName:"street-name",Subaddress:"sub-address"}),C$t=Wt()({localCity:"local-city",postalCity:"postal-city"});var $Z;let Ca=$Z=class extends ye{constructor(t){super(t),this.apiKey=null,this.featureTypes=null,this.forStorage=null,this.language=null,this.location=null,this.locationType=null,this.outFields=null,this.outSpatialReference=null,this.preferredLabelValues=null,this.returnInputLocation=null}writeFeatureTypes(t,e){t!=null&&t.length&&(e.featureTypes=t.map(i=>E$t.toJSON(i)))}writeLocation(t,e){e.location=t==null?void 0:t.clone().normalize().toJSON()}static from(t){return S1($Z,t)}};u([p(ZQ)],Ca.prototype,"apiKey",void 0),u([p({type:[["distance-marker","locality","poi","point-address","postal","street-address","street-intersection","street-name","sub-address"]],json:{write:!0}})],Ca.prototype,"featureTypes",void 0),u([qe("featureTypes")],Ca.prototype,"writeFeatureTypes",null),u([p({type:Boolean,json:{write:!0}})],Ca.prototype,"forStorage",void 0),u([p({type:String,json:{name:"langCode",write:!0}})],Ca.prototype,"language",void 0),u([p({type:ft,json:{write:!0}})],Ca.prototype,"location",void 0),u([qe("location")],Ca.prototype,"writeLocation",null),u([p({type:["street","rooftop"],json:{write:!0}})],Ca.prototype,"locationType",void 0),u([p({type:[String],json:{write:!0}})],Ca.prototype,"outFields",void 0),u([p({type:et,json:{name:"outSR",write:!0}})],Ca.prototype,"outSpatialReference",void 0),u([at(C$t)],Ca.prototype,"preferredLabelValues",void 0),u([p({type:Boolean,json:{write:!0}})],Ca.prototype,"returnInputLocation",void 0),Ca=$Z=u([U("esri.rest.support.LocationToAddressParameters")],Ca);const k2e=Ca;async function I$t(t,e,i){const r=Ad(t),{path:n,query:s}=r,o=k2e.from(e);if(!o.location)throw new Q("location-to-address:location-required","The location parameter is required");const a={...i,query:{...s,...M$t(o),f:"json"}},l=`${n}/reverseGeocode`,{data:c}=await Ot(l,a),{address:h,location:m}=c;return I2e.fromJSON({address:(h==null?void 0:h.Match_addr)??"",attributes:h,location:m,score:100})}function M$t(t){const e=t.toJSON(),{featureTypes:i,forStorage:r,langCode:n,location:s,locationType:o,outFields:a,outSR:l,preferredLabelValues:c,returnInputLocation:h,token:m}=e;return{featureTypes:i==null?void 0:i.join(","),forStorage:r,langCode:n,location:JSON.stringify(s),locationType:o,outFields:a==null?void 0:a.join(","),outSR:(l==null?void 0:l.wkid)??void 0,preferredLabelValues:c,returnInputLocation:h,token:m}}let u$=class extends ye{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};u([p({type:Boolean,json:{write:!0}})],u$.prototype,"isCollection",void 0),u([p({type:String,json:{write:!0}})],u$.prototype,"magicKey",void 0),u([p({type:String,json:{write:!0}})],u$.prototype,"text",void 0),u$=u([U("esri.rest.support.SuggestionCandidate")],u$);const k$t=u$;let sc=class extends ye{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};u([p(ZQ)],sc.prototype,"apiKey",void 0),u([p({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],sc.prototype,"categories",void 0),u([p({type:String,json:{write:!0}})],sc.prototype,"countryCode",void 0),u([p({type:ft,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],sc.prototype,"location",void 0),u([p({type:Number,json:{write:!0}})],sc.prototype,"maxSuggestions",void 0),u([p({type:et,json:{read:{source:"outSR"},write:{target:"outSR"}}})],sc.prototype,"outSpatialReference",void 0),u([p({type:jt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],sc.prototype,"searchExtent",void 0),u([p({type:String,json:{write:!0}})],sc.prototype,"text",void 0),sc=u([U("esri.rest.support.SuggestLocationsParameters")],sc),sc.from=hr(sc);const A2e=sc;async function A$t(t,e,i){const r=Ad(t),n={...(e=A2e.from(e)).toJSON(),f:"json"},s=R4({...r.query,...n}),o=lP(s,i),a=`${r.path}/suggest`;return Ot(a,o).then(O$t)}function O$t(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(r=>new k$t(r)):[]}const P$t="Single Line Input",L$t=3e5;function R$t(t,e){return t.location?U$t(t,e):j$t(t,e)}function O2e(t,e){var r;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=L$t?(r=t==null?void 0:t.extent)==null?void 0:r.center:null}async function D$t(t,e){const{source:i,spatialReference:r,view:n,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=t,l=new A2e,{apiKey:c,url:h}=i,m=P2e(i,n),y=e==null?void 0:e.signal;if(!h)return null;c&&(l.apiKey=c),i.categories&&(l.categories=i.categories),r&&(l.outSpatialReference=r);const v=O2e(n,i);if(v&&(l.location=v),!s.trim())return null;const{prefix:w="",suffix:x=""}=i,S=`${w}${s}${x}`;return l.text=S,m&&(l.searchExtent=m),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),A$t(h,l,{signal:y}).then(C=>B$t(C,a))}function N$t(t){return!!t&&/(?:geocode-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function z$t(t){return!!t&&/(?:\/servers\/[\da-z.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function Mfe(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const F$t="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function U$t(t,e){const{location:i,source:r,sourceIndex:n,spatialReference:s,view:o}=t,{apiKey:a,defaultZoomScale:l,language:c,url:h,zoomScale:m}=r;if(h==null)return[];const y=o==null?void 0:o.scale,v=e==null?void 0:e.signal,w=new k2e({language:c,location:i,apiKey:a,outSpatialReference:s});try{return L2e([await I$t(h,w,{signal:v})],{defaultZoomScale:l,scale:y,sourceIndex:n,view:o,zoomScale:m})}catch{return[]}}function P2e(t,e){const{filter:i,withinViewEnabled:r}=t,n=e==null?void 0:e.scale,s=e==null?void 0:e.extent,o=i==null?void 0:i.geometry;return(o?qQ(o,e??void 0,n):void 0)||(r&&s?s:void 0)}async function j$t(t,e){var z;const{source:i,suggestResult:r,spatialReference:n,view:s,maxResults:o,sourceIndex:a}=t,l=i==null?void 0:i.zoomScale,c=i==null?void 0:i.defaultZoomScale;if(!((z=r.text)==null?void 0:z.trim()))return null;const m=!r.key&&i.prefix?i.prefix:"",y=!r.key&&i.suffix?i.suffix:"",v=`${m}${r.text}${y}`,w=new M2e,{apiKey:x,url:S}=i,C=s==null?void 0:s.scale,k=P2e(i,s),A=e==null?void 0:e.signal;if(x&&(w.apiKey=x),!S)return null;i.categories&&(w.categories=i.categories),i.locationType&&(w.locationType=i.locationType),n&&(w.outSpatialReference=n);const R=O2e(s,i);R&&(w.location=R),w.maxLocations=o,k&&(w.searchExtent=k),i.countryCode&&(w.countryCode=i.countryCode);const{key:D}=r,B=`${D}`;return D&&(w.magicKey=B),w.address={},w.address[i.singleLineFieldName||P$t]=v,i.outFields&&(w.outFields=i.outFields),$$t(S,w,{signal:A}).then(W=>L2e(W,{key:B,scale:C,sourceIndex:a,view:s,zoomScale:l,defaultZoomScale:c}))}function V$t(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function B$t(t,e){return t.map(i=>V$t(i,e))}function G$t(t,e){const{key:i,scale:r,sourceIndex:n,view:s,zoomScale:o,defaultZoomScale:a}=e,{attributes:l,extent:c,location:h,address:m}=t,y=new _r({geometry:h,attributes:l}),v=c||h,w=v?qQ(v,s??void 0,r??void 0):void 0,x=w?typeof o=="number"?xZ(w,s??void 0,o):typeof a=="number"&&(v==null?void 0:v.type)==="point"?xZ(w,s??void 0,a):w:null,S=h?`${h.x},${h.y}`:"",C=m||S,k=y.clone();return x!=null&&(k.geometry=rr.fromExtent(x)),{extent:x,feature:y,target:k,key:i,name:C,sourceIndex:n}}function L2e(t,e){return t.filter(Boolean).map(i=>G$t(i,e))}var TZ;let vo=TZ=class extends WQ{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.language=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>R$t({source:this,...e},i),this.getSuggestions=(e,i)=>D$t({source:this,...e},i)}clone(){var t;return new TZ({apiKey:this.apiKey,autoNavigate:this.autoNavigate,categories:this.categories?ce(this.categories):null,countryCode:this.countryCode,filter:this.filter,language:this.language,locationType:this.locationType,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?ce(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:((t=this.resultSymbol)==null?void 0:t.clone())??null,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,suffix:this.suffix,suggestionsEnabled:this.suggestionsEnabled,url:this.url,withinViewEnabled:this.withinViewEnabled,zoomScale:this.zoomScale})}};u([p()],vo.prototype,"apiKey",void 0),u([p()],vo.prototype,"categories",void 0),u([p()],vo.prototype,"countryCode",void 0),u([p({json:{write:!0}})],vo.prototype,"defaultZoomScale",void 0),u([p()],vo.prototype,"localSearchDisabled",void 0),u([p()],vo.prototype,"language",void 0),u([p()],vo.prototype,"locationType",void 0),u([p({json:{write:!0}})],vo.prototype,"name",void 0),u([p({json:{write:!0}})],vo.prototype,"placeholder",void 0),u([p()],vo.prototype,"searchTemplate",void 0),u([p({json:{write:!0}})],vo.prototype,"singleLineFieldName",void 0),u([p({json:{read:{source:"suggest"},write:{target:"suggest"}}})],vo.prototype,"suggestionsEnabled",void 0),u([p({json:{write:!0}})],vo.prototype,"url",void 0),u([p({json:{write:!0}})],vo.prototype,"zoomScale",void 0),vo=TZ=u([U("esri.widgets.Search.LocatorSearchSource")],vo);const R2e=vo,D2e=()=>Ce.getLogger("esri.widgets.support.geolocationUtils"),H$t={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function q$t(){const t=!!ve("esri-geolocation");return t||D2e().warn("geolocation-unsupported","Geolocation unsupported."),t}function W$t(){const t=window.isSecureContext;return t||D2e().warnOnce("insecure-context","Geolocation requires a secure origin."),t}function kfe(){return q$t()&&W$t()}function J$t(t){return t??(t=H$t),new Promise((i,r)=>{setTimeout(()=>r(new Q("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,t??void 0)})}function Z$t(t,e){const{position:i,view:r}=t,n=Y$t(i),s=n==null?void 0:n.coords;if(!s)throw new Q("geometry-service:no-coords","Geolocation has no coordinates");return K$t(X$t(s),r,e)}function Y$t(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed,toJSON:()=>({})};return t&&{coords:i,timestamp:t.timestamp,toJSON:()=>({})}}function X$t({longitude:t,latitude:e,altitude:i}){return new ft({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function K$t(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(Rp(t)):Q$t(i).then(n=>{if(!n)throw new Q("geometry-service:missing-url","Geometry service URL is missing");const s=new qh({geometries:[t],outSpatialReference:r});return MK(n,s,i).then(o=>o[0])})}function Q$t(t){if(hi.geometryServiceUrl)return Promise.resolve(hi.geometryServiceUrl);const e=Fe.getDefault();return e.load(t).catch(()=>{}).then(()=>{var i,r;return(r=(i=e.helperServices)==null?void 0:i.geometry)==null?void 0:r.url})}function Go(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const eTt=()=>u4("esri/widgets/Search/t9n/Search"),Afe="highlight",SN=Ze.ofType({key:t=>t.layer?"layer":"locator",base:WQ,typeMap:{layer:c$,locator:R2e}}),Ofe=et.WGS84,tTt="esri/images/search/search-symbol-32.png",iTt=/<[\s\S]*?>/g,oS=-1;var fE;let mi=(fE=class extends $K(pa.EventedMixin(st)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new SN,this.defaultSymbols={point:new Yo({url:zr(tTt),size:24,width:24,height:24}),polyline:new Vr({color:[130,130,130,1],width:2}),polygon:new Io({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=Fe.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new SN,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await eTt();this.messages=i,this.defaultPopupTemplate=new Bd({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Le(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),gi),WO(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:oS}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:e,defaultSources:i}):r?i.concat(e):e,s=this._get("allSources")||new SN;return s.removeAll(),s.addMany(n.filter(Boolean)),s}get locationEnabled(){return this._get("locationEnabled")||kfe()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=kfe();if(e&&!i){const r=new Q("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Ce.getLogger(this).error(r)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:r}=this;if(i===oS)return r??"";const n=e.at(i);return(n==null?void 0:n.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),n=(async()=>{var s;try{await this.when();const o=await this._getResultsFromSources(r,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(a,o,r);const l=this._getFirstResult(a.results),c=r.location&&l?l.name:r.text,h=c==null?void 0:c.replace(iTt,"");return this._set("searchTerm",h),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",a.results),this._set("resultCount",a.results.reduce((m,y)=>{var v;return m+(((v=y.results)==null?void 0:v.length)??0)},0)),this.emit("search-complete",a),await this._selectFirstResult(l),a}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(e){if(!this.locationEnabled){const r=new Q("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Ce.getLogger(this).error(r),r}const i=(async()=>{try{const r=await J$t(),n=await Z$t({position:r,view:this.view},e);return await this.search(n,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const ee=new Q("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Ce.getLogger(this).error(ee),ee}const{view:i}=this,r=Go(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),n=r!=null?this.allSources.at(r):null;if(!n){const ee=new Q("select:missing-source","Cannot select without a source.",{source:n});throw Ce.getLogger(this).error(ee),ee}const s=n instanceof c$?this._getLayerSourcePopupTemplate(n):n.popupTemplate,o=n.resultSymbol||this._getDefaultSymbol(e),a=Go(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,l=Go(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,c=Go(n,"popupEnabled")?n.popupEnabled:this.popupEnabled,h=c?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:m}=e;if(!m){const ee=new Q("select:missing-feature","Cannot select without a feature.",{feature:m});throw Ce.getLogger(this).error(ee),ee}const{attributes:y,geometry:v,layer:w,sourceLayer:x}=m,S=v?Ife(v):null,C={layerViewQuery:this._getLayerView(m),elevationQuery:i&&S!=null?s$t(S,i):Promise.resolve(S)},k=await Vw(C),A=k.layerViewQuery.value,R=k.elevationQuery.value;o instanceof Zi&&(o.text=e.name);const D=i&&l?e.target||e.extent:null;await(D!=null?this._goToSearchResult(D):Promise.resolve());const z=A?m:new _r({geometry:v,symbol:o,attributes:y,layer:w,sourceLayer:x,popupTemplate:h}),W=i==null?void 0:i.popup,Y=W&&c&&z.getEffectivePopupTemplate(W.defaultPopupTemplateEnabled);return Y&&await i.openPopup({features:[z],location:R}),A&&I1t(A)&&!Y&&this._highlightFeature({graphic:z,layerView:A}),!A&&a&&i&&i.graphics.push(z),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",z),this.emit("select-result",{result:e,source:n,sourceIndex:r}),e}async suggest(e,i,r){const n=e||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(i,r);const s=await this._suggestImmediate(n,r);return this._set("suggestions",s==null?void 0:s.results),this._set("suggestionCount",(s==null?void 0:s.results.reduce((o,a)=>{var l;return o+(((l=a.results)==null?void 0:l.length)??0)},0))??null),this.emit("suggest-complete",s),s}async when(){await Vp(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Vw([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await Vp(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const e=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return e?e.map(n=>{var l;if(n.placefinding===!1)return;const s=Mfe(n.url)&&ybe(n.url)?{url:F$t}:null,o=R2e.fromJSON({...n,...s}),a=o.url;if(Mfe(a)||z$t(a)||N$t(a)){const c=o.outFields??["Addr_type","Match_addr","StAddr","City"],h=(o.placeholder||((l=this.messages)==null?void 0:l.placeholder))??"",m=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.singleLineFieldName="SingleLine",o.outFields=c,o.placeholder=h,o.defaultZoomScale=m}return o.singleLineFieldName?o:void 0}).filter(Mr):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var n;const r=(n=this.view)==null?void 0:n.map;return e.map(s=>{const o=r.findLayerById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=c$.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(c=>{l.layer=c}),l}).filter(Mr).toArray()}_getTableSources(e,i){var n;const r=(n=this.view)==null?void 0:n.map;return e.map(s=>{if(!s.id)return;const o=r.findTableById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=c$.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(c=>{l.layer=c}),l}).filter(Mr).toArray()}_convertApplicationProperties(){var a,l,c;const e=(a=this.view)==null?void 0:a.map,i=(c=(l=e==null?void 0:e.applicationProperties)==null?void 0:l.viewing)==null?void 0:c.search;if(!i)return[];const{enabled:r,hintText:n,layers:s,tables:o}=i;return r?[...this._getLayerSources(s,n),...this._getTableSources(o,n)]:[]}async _getSubLayer(e,i){var s;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find(o=>o.id===i.subLayer);if(!r)throw new Error;const n=await((s=r.createFeatureLayer)==null?void 0:s.call(r));if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(e,i){await e.load();const r=e.allSublayers.find(n=>n.id===i.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const n=new Q("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Ce.getLogger(this).error(n),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var s;const e=(s=this.view)==null?void 0:s.popup,{resultGraphic:i}=this;if(!e||!i)return;const r="selectedFeature"in e,n=r?e.selectedFeature:null;r&&n&&n===i&&e.close()}_suggestTimer(e,i){const r=e??this.suggestionDelay;return PY(r,null,i==null?void 0:i.signal)}_createLocationForSearch(e){return e instanceof _r&&e.geometry?Ife(e.geometry):e instanceof ft?e:Array.isArray(e)&&e.length===2?new ft({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Go(e,"key")&&Go(e,"text")&&Go(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:n,selectedResult:s}=this,o=!e&&n&&s,a=o&&n.key===s.key&&n.sourceIndex===s.sourceIndex,l=o&&n.location;return a||l?n:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(e){return _A(e,({results:i})=>i==null?void 0:i[0])??null}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var s;await this.when();const r=await this._getSuggestionsFromSources(e,i);if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(e,i,r){const n=(i==null?void 0:i.value)||[],s=i==null?void 0:i.error,o=this.allSources.at(r);if(s){const a={sourceIndex:r,source:o,error:s};e.errors.push(a),Ce.getLogger(this).error(s),e.numErrors++}else{const a={sourceIndex:r,source:o,results:n};e.results.push(a),e.numResults+=n.length}}_formatResponse(e,i,r){if(i)if(e.activeSourceIndex===oS){const n=r&&Go(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach((s,o)=>{const a=n!==void 0?n:o;this._formatSourceResponse(e,s,a)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:r}=this,n=!e.location&&Go(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!r.length){const o=new Q("search:no-sources-defined","At least one source is required.",{allSources:r});throw Ce.getLogger(this).error(o),o}return n===oS?r.forEach((o,a)=>{s.push(this._getResultsFromSource(e,a,i))}):s.push(this._getResultsFromSource(e,n,i)),Vw(s)}async _getSuggestionsFromSources(e,i){const{allSources:r,activeSourceIndex:n}=this,s=[];if(!r.length){const o=new Q("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw Ce.getLogger(this).error(o),o}return n===oS?r.forEach((o,a)=>{s.push(this._getSuggestionsFromSource(e,a,i))}):s.push(this._getSuggestionsFromSource(e,n,i)),Vw(s)}async _getResultsFromSource(e,i,r){var h,m;const n=i!=null?this.allSources.at(i):null;if(!n)return null;const{location:s=null}=e,o=((h=this.view)==null?void 0:h.spatialReference)??Ofe,a=Go(n,"maxResults")?n.maxResults:this.maxResults,l=!!(n instanceof c$&&Go(n,"exactMatch"))&&n.exactMatch,{view:c}=this;return(m=n.getResults)==null?void 0:m.call(n,{exactMatch:l,location:s,maxResults:a,sourceIndex:i,spatialReference:o,suggestResult:e,view:c},r)}async _getSuggestionsFromSource(e,i,r){var l,c;const n=this.allSources.at(i);if(!n)return null;e??(e="");const s=Go(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,o=e==null?void 0:e.length,a=Go(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&o>=a){const h=((l=this.view)==null?void 0:l.spatialReference)||Ofe,m=Go(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:y}=this,v=!!(n instanceof c$&&Go(n,"exactMatch"))&&n.exactMatch;return(c=n.getSuggestions)==null?void 0:c.call(n,{view:y,sourceIndex:i,suggestTerm:e,spatialReference:h,maxSuggestions:m,exactMatch:v},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return Go(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){return _A(this.results??[],({results:i,sourceIndex:r})=>(i==null?void 0:i.includes(e))?r:null)??null}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{signal:i.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:i}=this,r=(n=e.feature)==null?void 0:n.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(Afe)}async _getLayerView(e){const{view:i}=this;if(!e||!i)return null;const{layer:r,sourceLayer:n}=e,s=r??n;return s&&s.type!=="building-component"&&s.type!=="subtype-sublayer"?(await i.when(),i.whenLayerView(s)):null}_highlightFeature(e){const{graphic:i,layerView:r}=e,{attributes:n,layer:s,sourceLayer:o}=i,a=s??o,{objectIdField:l}=a,c=(l&&(n==null?void 0:n[l]))??null,h=r.highlight(c??i);this.addHandles(h,Afe)}_setResultFloor(e){var s,o,a;const{view:i}=this,r=(s=e.feature)==null?void 0:s.attributes,n=(o=e.feature)==null?void 0:o.sourceLayer;if(n&&"floorInfo"in n&&((a=n==null?void 0:n.floorInfo)!=null&&a.floorField)&&r){const l=r[n.floorInfo.floorField];i==null||i.emit("select-result-floor",l)}}},fE.ALL_INDEX=oS,fE);u([p()],mi.prototype,"_searching",void 0),u([p()],mi.prototype,"_updatingPromise",void 0),u([p({readOnly:!0,value:null})],mi.prototype,"activeSource",null),u([p()],mi.prototype,"activeSourceIndex",null),u([p()],mi.prototype,"allPlaceholder",null),u([p({readOnly:!0})],mi.prototype,"allSources",null),u([p()],mi.prototype,"autoNavigate",void 0),u([p()],mi.prototype,"autoSelect",void 0),u([p({type:Bd})],mi.prototype,"defaultPopupTemplate",void 0),u([p({readOnly:!0})],mi.prototype,"defaultSources",void 0),u([p()],mi.prototype,"defaultSymbols",void 0),u([p()],mi.prototype,"includeDefaultSources",void 0),u([p()],mi.prototype,"locationEnabled",null),u([p()],mi.prototype,"maxInputLength",void 0),u([p()],mi.prototype,"maxResults",void 0),u([p()],mi.prototype,"maxSuggestions",void 0),u([p()],mi.prototype,"messages",void 0),u([p()],mi.prototype,"minSuggestCharacters",void 0),u([p({readOnly:!0})],mi.prototype,"placeholder",null),u([p()],mi.prototype,"popupEnabled",void 0),u([p({type:Bd})],mi.prototype,"popupTemplate",void 0),u([p({type:Fe})],mi.prototype,"portal",void 0),u([p()],mi.prototype,"resultCount",void 0),u([p()],mi.prototype,"resultGraphicEnabled",void 0),u([p({readOnly:!0})],mi.prototype,"resultGraphic",void 0),u([p({readOnly:!0})],mi.prototype,"results",void 0),u([p({readOnly:!0})],mi.prototype,"selectedSuggestion",void 0),u([p()],mi.prototype,"searchAllEnabled",void 0),u([p({readOnly:!0})],mi.prototype,"selectedResult",void 0),u([p()],mi.prototype,"searchTerm",null),u([p({type:SN})],mi.prototype,"sources",void 0),u([p({readOnly:!0})],mi.prototype,"state",null),u([p()],mi.prototype,"suggestionDelay",void 0),u([p()],mi.prototype,"suggestionCount",void 0),u([p({readOnly:!0})],mi.prototype,"suggestions",void 0),u([p()],mi.prototype,"suggestionsEnabled",void 0),u([p({readOnly:!0})],mi.prototype,"updating",null),u([p()],mi.prototype,"view",void 0),u([p()],mi.prototype,"clear",null),mi=u([U("esri.widgets.Search.SearchViewModel")],mi);const rTt=mi;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const CM="arcgis-search",IM={base:CM,autocomplete:`${CM}__autocomplete`,dropdown:`${CM}__dropdown`,container:`${CM}__container`,form:`${CM}__form`},nTt=dt`@layer{arcgis-search{display:block}.arcgis-search{--arcgis-internal-search-width: 240px;display:flex;flex-flow:row nowrap;align-items:center;justify-content:center;width:var(--arcgis-internal-search-width)}.arcgis-search__dropdown{--calcite-color-border-1: var(--calcite-color-border-input);--calcite-dropdown-width: var(--arcgis-internal-search-width);width:31px}.arcgis-search__autocomplete{flex:1}.arcgis-search__container{display:flex;position:relative;flex:1 0 100%;flex-flow:row nowrap;align-items:stretch}.arcgis-search__form{display:flex;flex:1 0;flex-flow:row nowrap;align-items:stretch;margin:0;padding:0}}`,sTt=AC(rTt),nA=class nA extends qi{constructor(){super(...arguments),this.viewModel=sTt(this),this._currentLocationValue="search-use-current-location",this._autocompleteEl=void 0,this._searchResultRendererContainerEl=document.createElement("div"),this._searchResultRendererEl=void 0,this._suggestController=void 0,this._searchController=void 0,this._lastSearchTerm="",this.messages=P1({}),this._setSearchResultRendererRef=e=>{this._searchResultRendererEl=e},this._locateFailed=!1,this._showNoResults=!1,this.position="top-left",this.goToOverride=this.viewModel.goToOverride,this.icon="search",this.activeMenu="none",this.activeSourceIndex=this.viewModel.activeSourceIndex,this.allPlaceholder=this.viewModel.allPlaceholder,this.allSources=this.viewModel.allSources,this.autoNavigateDisabled=this.viewModel.autoNavigate,this.autoSelectDisabled=this.viewModel.autoSelect,this.defaultSources=this.viewModel.defaultSources,this.disabled=!1,this.includeDefaultSourcesDisabled=this.viewModel.includeDefaultSources,this.locationDisabled=this.viewModel.locationEnabled,this.maxResults=this.viewModel.maxResults,this.maxSuggestions=this.viewModel.maxSuggestions,this.minSuggestCharacters=this.viewModel.minSuggestCharacters,this.popupDisabled=this.viewModel.popupEnabled,this.popupTemplate=this.viewModel.popupTemplate,this.portal=this.viewModel.portal,this.resultGraphic=this.viewModel.resultGraphic,this.resultGraphicDisabled=this.viewModel.resultGraphicEnabled,this.results=this.viewModel.results,this.searchAllDisabled=this.viewModel.searchAllEnabled,this.searchTerm=this.viewModel.searchTerm,this.selectedResult=this.viewModel.selectedResult,this.sources=this.viewModel.sources,this.suggestions=this.viewModel.suggestions,this.suggestionsDisabled=this.viewModel.suggestionsEnabled,this.autoDestroyDisabled=!1,this.state=this.viewModel.state,this.arcgisPropertyChange=Cy()("state"),this.arcgisReady=ko(),this.arcgisSearchClear=Ir(()=>this.viewModel,"search-clear"),this.arcgisSearchComplete=Ir(()=>this.viewModel,"search-complete"),this.arcgisSearchStart=Ir(()=>this.viewModel,"search-start"),this.arcgisSelectResult=Ir(()=>this.viewModel,"select-result"),this.arcgisSuggestComplete=Ir(()=>this.viewModel,"suggest-complete"),this.arcgisSuggestStart=Ir(()=>this.viewModel,"suggest-start")}get _isDisabled(){const{state:e}=this.viewModel;return e==="disabled"||e==="loading"||this.disabled}get _showCurrentLocation(){var e;return!this.locationDisabled&&!((e=this.searchTerm)!=null&&e.trim())}get _effectiveActiveMenu(){return this._isDisabled?"none":this.activeMenu}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}clear(){this._locateFailed=!1,this.viewModel.clear()}async destroy(){var e;await this.manager.destroy(),await((e=this._searchResultRendererEl)==null?void 0:e.destroy()),this._cancelQueries()}async search(e){this._cancelQueries();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const n=await this.viewModel.search(e,{signal:r});return this._searchController!==i?void 0:(n!=null&&n.numResults||(this._showNoResults=!0,this.activeMenu="suggestion"),this._searchController=void 0,n)}catch{if(this._searchController!==i)return;this._searchController=void 0;return}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const n=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=void 0,n!=null&&n.numResults&&(this.activeMenu="suggestion",this._scrollToTopSuggestion()),n)}catch{return this._suggestController!==i||(this._suggestController=void 0),null}}async setFocus(){var e;await((e=this._autocompleteEl)==null?void 0:e.setFocus())}loaded(){this.manager.onLifecycle(()=>Le(()=>{var e;return(e=this.viewModel)==null?void 0:e.defaultPopupTemplate},e=>{if(e){const i=document.createElement("div");i.appendChild(this._searchResultRendererContainerEl),e.content=i}},{initial:!0}))}_addSearchResultRenderer(){Ame(q`<arcgis-search-result-renderer auto-destroy-disabled .messages=${this.messages} .viewModel=${this.viewModel} ${yt(this._setSearchResultRendererRef)}></arcgis-search-result-renderer>`,this._searchResultRendererContainerEl)}_handleInputKeydown(e){e.key==="Tab"&&this._cancelSuggest()}_handleAutocompleteCreate(e){this._autocompleteEl=e}_handleCalciteAutocompleteTextInput(e){const i=e.target.inputValue;i!==this.viewModel.searchTerm&&(this.viewModel.searchTerm=i,i||this.clear(),this.suggest())}_handleAutocompleteOpen(){this.activeMenu="suggestion"}_handleAutocompleteClose(){this.activeMenu==="suggestion"&&(this.activeMenu="none")}_handleCalciteAutocompleteChange(e){var s,o,a;const i=e.target.value;if(i===this._currentLocationValue){this._useCurrentLocation();return}const r=JSON.parse(i),n=(a=(o=(s=this.viewModel.suggestions)==null?void 0:s.find(({sourceIndex:l})=>l===r.sourceIndex))==null?void 0:o.results)==null?void 0:a.find(({key:l})=>`${l}`==`${r.key}`);n&&this.search(n)}async _useCurrentLocation(){this._cancelQueries();const e=new AbortController,{signal:i}=e;this._searchController=e;try{await this.viewModel.searchNearby({signal:i})}catch(r){ds(r)||(this._locateFailed=!0,this.activeMenu="suggestion")}finally{this._searchController=void 0}}_handleSourceOpen(){this.activeMenu="source"}_handleSourceClose(){this.activeMenu==="source"&&(this.activeMenu="none")}_handleSourceSelect(e){const i=e.target.selectedItems[0].getAttribute("data-source-index");i&&(this.viewModel.activeSourceIndex=Number.parseInt(i,10))}_cancelSuggest(){this.activeMenu="none",this._locateFailed=!1,this._showNoResults=!1,this._suggestController=VJ(this._suggestController)}_cancelQueries(){this._cancelSuggest(),this._searchController=VJ(this._searchController)}_scrollToTopSuggestion(){var e;(e=this._autocompleteEl)==null||e.scrollContentTo({top:0})}_formSubmit(e){e.preventDefault(),this.activeMenu="none",this._lastSearchTerm=this.searchTerm,this.searchTerm&&this.search()}_getSourceName(e){const{messages:i}=this,{allSources:r}=this.viewModel,n=r.at(e);return(e===-1?i.all:(n==null?void 0:n.name)||i.untitledSource)||""}render(){return this._addSearchResultRenderer(),q`<div class=${mt(zs(IM.base,la.widget))}><div class=${mt(IM.container)}>${this._renderSourcesMenu()}${this._renderForm()}</div></div>`}_renderSourcesMenu(){const{messages:e,_isDisabled:i,_effectiveActiveMenu:r}=this,{allSources:n,searchAllEnabled:s}=this.viewModel;return n.length>1?q`<calcite-dropdown class=${mt(IM.dropdown)} .disabled=${i} .open=${r==="source"} overlay-positioning=fixed @calciteDropdownClose=${this._handleSourceClose} @calciteDropdownOpen=${this._handleSourceOpen} @calciteDropdownSelect=${this._handleSourceSelect}><calcite-button appearance=outline-fill icon-start=caret-down kind=neutral .label=${e.searchIn} slot=trigger></calcite-button><calcite-dropdown-group .groupTitle=${e.searchIn}>${s?this._renderSource(-1):null}${n.map((o,a)=>this._renderSource(a)).toArray()}</calcite-dropdown-group></calcite-dropdown>`:null}_renderUseCurrentLocation(){const{_currentLocationValue:e}=this;return q`<calcite-autocomplete-item .heading=${this.messages.useCurrentLocation??""} icon-start=gps-on .value=${e}></calcite-autocomplete-item>`}_renderAutocomplete(){const{_effectiveActiveMenu:e,messages:i,_isDisabled:r}=this,{maxInputLength:n,placeholder:s,searchTerm:o,state:a}=this.viewModel,l=this.label??i.searchButtonTitle??"";return q`<calcite-autocomplete .autocomplete=${"off"} class=${mt(IM.autocomplete)} .disabled=${r} .icon=${this.icon||!1} .inputValue=${o} .label=${l} .loading=${a==="searching"} .maxLength=${n} .name=${this.el.id} @keydown=${this._handleInputKeydown} .open=${e==="suggestion"} overlay-positioning=fixed .placeholder=${s} title=${(o?"":s)??Ns} @calciteAutocompleteChange=${this._handleCalciteAutocompleteChange} @calciteAutocompleteClose=${this._handleAutocompleteClose} @calciteAutocompleteOpen=${this._handleAutocompleteOpen} @calciteAutocompleteTextChange=${this._handleCalciteAutocompleteTextInput} @calciteAutocompleteTextInput=${this._handleCalciteAutocompleteTextInput} ${yt(this._handleAutocompleteCreate)}>${this._renderSuggestions()}${this._renderNotices()}</calcite-autocomplete>`}_renderForm(){return q`<form class=${mt(IM.form)} @submit=${this._formSubmit} role=search>${this._renderAutocomplete()}</form>`}_renderSuggestGroup(e){var i;return(i=e.results)==null?void 0:i.map(r=>this._renderSuggestion(r))}_renderSuggestions(){const{suggestions:e}=this.viewModel;return this._showNoResults?null:this._showCurrentLocation?this._renderUseCurrentLocation():e==null?void 0:e.map(i=>this._renderSuggestResults(i))}_renderSuggestResults(e){var l;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:n}=e,s=(l=e.results)==null?void 0:l.length,o=i.length>1&&r===-1,a=this._getSourceName(n);return s&&o?q`<calcite-autocomplete-item-group .heading=${a}>${this._renderSuggestGroup(e)}</calcite-autocomplete-item-group>`:this._renderSuggestGroup(e)}_renderSuggestion({key:e,sourceIndex:i,text:r}){const n={key:e,sourceIndex:i};return q`<calcite-autocomplete-item .heading=${r??this.messages.untitledResult??""} .value=${JSON.stringify(n)}></calcite-autocomplete-item>`}_renderSource(e){const i=this._getSourceName(e);return q`<calcite-dropdown-item data-source-index=${`${e}`} .selected=${e===this.viewModel.activeSourceIndex}>${i}</calcite-dropdown-item>`}_renderNoResultsWarning(e){const{messages:i}=this,r=e?Zp(i.noResultsFoundForValue??"",{value:`"${e}"`}):i.noResultsFound;return q`<calcite-notice icon=exclamation-mark-triangle kind=warning open slot=content-bottom><div slot=title>${i.noResults}</div><div slot=message>${r}</div></calcite-notice>`}_renderLocateError(){return q`<calcite-notice icon=exclamation-mark-circle kind=danger open slot=content-bottom><div slot=message>${this.messages.locateError}</div></calcite-notice>`}_renderNotices(){return this._locateFailed?this._renderLocateError():this._showNoResults?this._renderNoResultsWarning(this._lastSearchTerm??this.viewModel.searchTerm):null}};nA.properties={_locateFailed:16,_showNoResults:16,_isDisabled:16,_showCurrentLocation:16,_effectiveActiveMenu:16,referenceElement:1,position:3,goToOverride:0,icon:1,activeMenu:1,activeSource:32,activeSourceIndex:9,allPlaceholder:1,allSources:0,autoNavigateDisabled:5,autoSelectDisabled:5,defaultSources:0,disabled:5,includeDefaultSourcesDisabled:5,locationDisabled:5,maxResults:9,maxSuggestions:9,minSuggestCharacters:9,popupDisabled:5,popupTemplate:0,portal:0,resultGraphic:0,resultGraphicDisabled:5,results:0,searchAllDisabled:5,searchTerm:1,selectedResult:0,sources:0,suggestions:0,suggestionsDisabled:5,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},nA.styles=nTt,nA.shadowRootOptions=Zn;let EZ=nA;or("arcgis-search",EZ);let Qg=class extends st{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(ua(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var n;const i=!!e;this._set("expanded",i);const r=(n=this.view)==null?void 0:n.ui;r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&hs(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?hs(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const n=OUe(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(n,e),this._viewpointHandle=n}_collapse(){this.expanded=!1}};u([p({value:!1})],Qg.prototype,"autoCollapse",null),u([p({value:!1})],Qg.prototype,"expanded",null),u([p()],Qg.prototype,"group",void 0),u([p({readOnly:!0})],Qg.prototype,"state",null),u([p({value:null})],Qg.prototype,"view",null),Qg=u([U("esri.widgets.Expand.ExpandViewModel")],Qg);const N2e=Qg,Ag="esri-expand",Bl={base:Ag,toggle:`${Ag}__toggle`,popoverContent:`${Ag}__popover-content`,panel:`${Ag}__panel`,panelContent:`${Ag}__panel-content`,sheet:`${Ag}__sheet`,contentContainer:`${Ag}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconNumber:`${Ag}__icon-number`},Pfe="chevrons-left",Lfe="chevrons-right",gG=Symbol("scheduleRender-override-handle");let Jr=class extends Yn{constructor(t,e){super(t,e),this._boundScheduledRender=this.scheduleRender.bind(this),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.focusTrapDisabled=!1,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new N2e,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=i=>{i.target===this._popoverEl&&(this.viewModel.expanded=i.currentTarget.open)},this._handleSheetClose=i=>{this.viewModel.expanded=i.currentTarget.open},this._handlePanelClose=i=>{this.viewModel.expanded=!i.currentTarget.closed},this._handleKeyDown=i=>{this.viewModel.expanded&&i.key==="Escape"&&!this._willCloseOnEsc(i)&&i.preventDefault()},this._storeToggleActionEl=i=>{this._toggleActionEl=i},this._storePopoverEl=i=>{this._popoverEl=i}}initialize(){this.addHandles(Le(()=>{var t,e;return(e=(t=this.viewModel)==null?void 0:t.view)==null?void 0:e.size},()=>{var t;return(t=this._popoverEl)==null?void 0:t.reposition()},gi))}loadDependencies(){return Ty({action:()=>$e(()=>Promise.resolve().then(()=>WZ),void 0),icon:()=>$e(()=>Promise.resolve().then(()=>qZ),void 0),panel:()=>$e(()=>Promise.resolve().then(()=>gze),void 0),popover:()=>$e(()=>Promise.resolve().then(()=>_Ne),void 0),sheet:()=>$e(()=>import("./index-CY5PNI49.js"),__vite__mapDeps([270,271]))})}get expandTitle(){const{expanded:t,messagesCommon:e,collapseTooltip:i,expandTooltip:r}=this;return(t?i||(e==null?void 0:e.collapse):r||(e==null?void 0:e.expand))??""}get _displaySheet(){var t;switch(this.mode){case"drawer":return!0;case"auto":return((t=this.viewModel.view)==null?void 0:t.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(t){this.viewModel.autoCollapse=t}get collapseIcon(){return Lfe}set collapseIcon(t){this._overrideIfSome("collapseIcon",t)}get expanded(){return this.viewModel.expanded}set expanded(t){this.viewModel.expanded=t}get expandIcon(){return typeof this.content=="object"&&"icon"in this.content&&this.content.icon?this.content.icon:Pfe}set expandIcon(t){this._overrideIfSome("expandIcon",t)}get group(){return this.viewModel.group}set group(t){this.viewModel.group=t}get icon(){return null}get label(){var t;return typeof this.content=="object"&&"label"in this.content&&this.content.label?this.content.label:((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:t,_toggleActionEl:e,viewModel:{expanded:i},label:r,placement:n}=this;return K("div",{class:this.classes(Bl.base,Ss.widget)},this._renderToggle(),t?K("calcite-sheet",{class:Bl.sheet,heightScale:"l",label:r,onkeydown:this._handleKeyDown,open:i,position:"block-end",onCalciteSheetClose:this._handleSheetClose},K("calcite-panel",{class:Bl.panel,closable:!0,closed:!i,heading:r,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},K("div",{class:Bl.panelContent},this._renderContent()))):e?K("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,focusTrapDisabled:this.focusTrapDisabled,label:r,onkeydown:this._handleKeyDown,open:i,overlayPositioning:"fixed",placement:n??this._getPlacement(),referenceElement:e,onCalcitePopoverClose:this._handlePopoverClose},K("div",{class:Bl.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:t,view:e}=this,i=t&&e?e.ui.getPosition(t):null;if(!i||i==="manual")return"auto";const[r,n]=i.split("-");return`${n==="right"?"left":"right"}-${r==="bottom"?"end":"start"}`}_willCloseOnEsc(t){const{closeOnEsc:e}=this;return typeof e=="function"?e(t):e}_renderBadgeNumber(){const{expanded:t,iconNumber:e}=this;return e&&!t?K("span",{class:Bl.iconNumber,key:"expand__icon-number"},e):null}_renderToggleButton(){const{expanded:t,expandTitle:e,expandIcon:i,collapseIcon:r}=this,n=t?r:i,s=n===Pfe||n===Lfe;return K("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:Ss.widgetButton,onclick:this.toggle,scale:"s",text:e,title:e},n?K("calcite-icon",{class:this.classes(Bl.icon,s&&Bl.iconFlip),icon:n,scale:"s"}):null)}_renderToggle(){return K("div",{class:Bl.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:t}=this;return typeof t=="string"?K("div",{class:Bl.contentContainer,innerHTML:t,key:"content__string"}):gZ(t)?K("div",{afterCreate:()=>{this._overwriteChildScheduleRender(t)},afterRemoved:()=>this.removeHandles(gG),afterUpdate:()=>{t.scheduleRender!==this._boundScheduledRender&&(this.removeHandles(gG),this._overwriteChildScheduleRender(t))},class:Bl.contentContainer,key:"content__widget"},t.render()):t instanceof HTMLElement?K("div",{afterCreate:this._attachToNode,bind:t,class:Bl.contentContainer,key:"content__html-element"}):eSt(t)?K("div",{afterCreate:this._attachToNode,bind:t.domNode,class:Bl.contentContainer,key:"content__node"}):null}_overwriteChildScheduleRender(t){const e=t.scheduleRender;t.scheduleRender=this._boundScheduledRender,this.addHandles(Mi(()=>t.scheduleRender=e),gG)}_attachToNode(t){const e=this;t.appendChild(e)}};u([p({readOnly:!0})],Jr.prototype,"expandTitle",null),u([p()],Jr.prototype,"_toggleActionEl",void 0),u([p()],Jr.prototype,"_displaySheet",null),u([p()],Jr.prototype,"autoCollapse",null),u([p()],Jr.prototype,"closeOnEsc",void 0),u([p()],Jr.prototype,"collapseIcon",null),u([p()],Jr.prototype,"collapseTooltip",void 0),u([p()],Jr.prototype,"content",void 0),u([p()],Jr.prototype,"expanded",null),u([p()],Jr.prototype,"expandIcon",null),u([p()],Jr.prototype,"expandTooltip",void 0),u([p()],Jr.prototype,"focusTrapDisabled",void 0),u([p()],Jr.prototype,"group",null),u([p()],Jr.prototype,"icon",null),u([p()],Jr.prototype,"iconNumber",void 0),u([p()],Jr.prototype,"label",null),u([p(),Il("esri/widgets/Expand/t9n/Expand")],Jr.prototype,"messages",void 0),u([p(),Il("esri/t9n/common")],Jr.prototype,"messagesCommon",void 0),u([p()],Jr.prototype,"mode",void 0),u([p()],Jr.prototype,"placement",void 0),u([p()],Jr.prototype,"view",null),u([p({type:N2e})],Jr.prototype,"viewModel",void 0),Jr=u([U("esri.widgets.Expand")],Jr);const oTt=Jr;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const aTt=dt`@layer{arcgis-expand{display:flex;pointer-events:auto}arcgis-expand>.esri-expand__content--expanded{background-color:var(--calcite-color-background)}}`,lTt=OQ(oTt),sA=class sA extends qi{constructor(){super(),this.widget=lTt(this),this.viewModel=this.widget.viewModel,this.autoCollapse=this.widget.autoCollapse,this.autoDestroyDisabled=!1,this.closeOnEsc=this.widget.closeOnEsc,this.collapseIcon=this.widget.collapseIcon,this.collapseTooltip=this.widget.collapseTooltip,this.content=this.widget.content,this.expandIcon=this.widget.expandIcon,this.expandTooltip=this.widget.expandTooltip,this.expanded=this.widget.expanded,this.focusTrapEnabled=this.widget.focusTrapDisabled,this.focusTrapDisabled=this.widget.focusTrapDisabled,this.group=this.widget.group,this.icon=this.widget.icon,this.iconNumber=this.widget.iconNumber,this.label=this.widget.label,this.mode=this.widget.mode,this.placement=this.widget.placement,this.position="top-right",this.arcgisReady=ko(),this.content=document.createElement("div")}async collapse(){var e;(e=this.widget)==null||e.collapse()}async destroy(){await this.manager.destroy()}async expand(){var e;(e=this.widget)==null||e.expand()}async toggle(){this.expanded?await this.collapse():await this.expand()}};sA.properties={autoCollapse:5,autoDestroyDisabled:5,closeOnEsc:5,collapseIcon:1,collapseTooltip:1,content:1,expandIcon:1,expandTooltip:1,expanded:7,focusTrapEnabled:5,focusTrapDisabled:5,group:1,icon:1,iconNumber:9,label:1,mode:1,placement:1,position:1,referenceElement:1},sA.shadowRootOptions=Zn,sA.styles=aTt;let CZ=sA;or("arcgis-expand",CZ);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.0-next.45 */const cTt=dt`@layer{arcgis-placement{display:flex;pointer-events:auto;box-shadow:none}.arcgis-placement__container{display:block}}`;var ob;let uTt=(ob=class extends qi{constructor(){super(),this._observer=void 0,this._moveChildren=()=>{if(F2(this).parentElement!==this.el)for(let i=this.el.firstElementChild;i!==null;i=this.el.firstElementChild)F2(this).append(i)},this.position="bottom-left",this.arcgisReady=ko();const e=this;e.el.childElem=document.createElement("div"),e.el.childElem.classList.add("arcgis-placement__container"),this.listen("arcgisReady",this._startObserving,{once:!0})}connectedCallback(){super.connectedCallback(),this.el.view&&this._startObserving()}willUpdate(e){var r,n;e.has("referenceElement")&&mht(this,this.referenceElement);const i=F2(this);e.has("position")&&i&&this.position!==void 0&&((n=(r=this.el.view)==null?void 0:r.ui)==null||n.move(i,this.position))}loaded(){hht(this),z2(this)}disconnectedCallback(){var i,r,n;super.disconnectedCallback();const e=F2(this);e&&((r=(i=this.el.view)==null?void 0:i.ui)==null||r.remove(e)),(n=this._observer)==null||n.disconnect()}_startObserving(){this._moveChildren(),this._observer=new MutationObserver(this._moveChildren),this._observer.observe(this.el,{childList:!0})}},ob.properties={position:1,referenceElement:1},ob.shadowRootOptions=Zn,ob.styles=cTt,ob);or("arcgis-placement",uTt);const Tu=lge(ime,rge),dTt=Tu(ha("arcgis-basemap-gallery",{onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady"})),hTt=Tu(ha("arcgis-basemap-toggle",{onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady"})),MM=Tu(ha("arcgis-expand",{onArcgisReady:"arcgisReady"})),pTt=Tu(ha("arcgis-home",{onArcgisGo:"arcgisGo",onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady"})),fTt=Tu(ha("arcgis-layer-list",{onArcgisClose:"arcgisClose",onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady",onArcgisTriggerAction:"arcgisTriggerAction"})),mTt=Tu(ha("arcgis-legend",{onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady"})),yTt=Tu(ha("arcgis-locate",{onArcgisError:"arcgisError",onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady",onArcgisSuccess:"arcgisSuccess"})),gTt=Tu(ha("arcgis-map",{onArcgisViewChange:"arcgisViewChange",onArcgisViewClick:"arcgisViewClick",onArcgisViewDoubleClick:"arcgisViewDoubleClick",onArcgisViewDrag:"arcgisViewDrag",onArcgisViewHold:"arcgisViewHold",onArcgisViewImmediateClick:"arcgisViewImmediateClick",onArcgisViewImmediateDoubleClick:"arcgisViewImmediateDoubleClick",onArcgisViewKeyDown:"arcgisViewKeyDown",onArcgisViewKeyUp:"arcgisViewKeyUp",onArcgisViewLayerviewCreate:"arcgisViewLayerviewCreate",onArcgisViewLayerviewCreateError:"arcgisViewLayerviewCreateError",onArcgisViewLayerviewDestroy:"arcgisViewLayerviewDestroy",onArcgisViewMouseWheel:"arcgisViewMouseWheel",onArcgisViewPointerDown:"arcgisViewPointerDown",onArcgisViewPointerEnter:"arcgisViewPointerEnter",onArcgisViewPointerLeave:"arcgisViewPointerLeave",onArcgisViewPointerMove:"arcgisViewPointerMove",onArcgisViewPointerUp:"arcgisViewPointerUp",onArcgisViewReadyChange:"arcgisViewReadyChange"})),vTt=Tu(ha("arcgis-placement",{onArcgisReady:"arcgisReady"})),bTt=Tu(ha("arcgis-print",{onArcgisComplete:"arcgisComplete",onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady",onArcgisSubmit:"arcgisSubmit"})),wTt=Tu(ha("arcgis-search",{onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady",onArcgisSearchClear:"arcgisSearchClear",onArcgisSearchComplete:"arcgisSearchComplete",onArcgisSearchStart:"arcgisSearchStart",onArcgisSelectResult:"arcgisSelectResult",onArcgisSuggestComplete:"arcgisSuggestComplete",onArcgisSuggestStart:"arcgisSuggestStart"})),_Tt=Tu(ha("arcgis-zoom",{onArcgisPropertyChange:"arcgisPropertyChange",onArcgisReady:"arcgisReady"})),xTt=ft;E4e(Ce.getLogger("esri.geometry"),"esri.geometry",{replacement:"Individual geometry module imports",version:"4.32",warnOnce:!0});const STt=({mapId:t="",center:e,zoom:i=8,onReady:r})=>{const[n,s]=Ve.useState(!0),o=l=>{r&&r(),s(!1)};new wt({url:"https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/LA_County_Parcels/FeatureServer/0"});const a=l=>{var c,h,m,y;try{const v=l.target;if(!n&&v.extent){let w=new URLSearchParams(window.location.href.split("?")[1]||"");v.zoom!=i&&w.set("zoom",`${v.zoom.toFixed(0)}`),w.set("center",`${(h=(c=v.extent.center)==null?void 0:c.latitude)==null?void 0:h.toPrecision(6)},${(y=(m=v.extent.center)==null?void 0:m.longitude)==null?void 0:y.toPrecision(6)}`),window.history.replaceState(null,"","?"+decodeURIComponent(w.toString()))}}catch(v){console.error("unable to resolve view params",v)}};return pi.jsx(pi.Fragment,{children:pi.jsx(kFe,{"content-behind":!0,children:pi.jsx(cge,{children:pi.jsxs(gTt,{itemId:t,zoom:i||void 0,center:e?new xTt(e):void 0,onArcgisViewReadyChange:o,onArcgisViewChange:a,children:[pi.jsx(_Tt,{position:"top-left"}),pi.jsx(yTt,{position:"top-left"}),pi.jsx(pTt,{position:"top-left"}),pi.jsx(MM,{position:"top-left",children:pi.jsx(fTt,{})}),pi.jsx(MM,{position:"top-left",children:pi.jsx(mTt,{})}),pi.jsx(MM,{position:"top-left",children:pi.jsx(dTt,{})}),pi.jsx(wTt,{position:"top-right"}),pi.jsx(MM,{"close-on-esc":!0,position:"top-right",collapseIcon:"chevrons-right",expandIcon:"print",children:pi.jsx(bTt,{"allowed-formats":"all","allowed-layouts":"all","include-default-templates":"false"})}),pi.jsx(hTt,{position:"bottom-left",nextBasemap:"topo-vector"}),pi.jsx(MM,{"close-on-esc":!0,position:"top-right",collapseIcon:"chevrons-right",expandIcon:"information",children:pi.jsx(vTt,{children:pi.jsx(OFe,{})})})]})})})})},$Tt=()=>pi.jsx("div",{className:"spinner"}),TTt=({mapId:t="",...e})=>{const[i,r]=Ve.useState(!0);return pi.jsxs("div",{className:"map-wrap",children:[pi.jsx(STt,{mapId:t,mapViewEl:"mapViewEl",center:e.center,zoom:e.zoom,onReady:()=>{r(!1)}}),i?pi.jsx("div",{className:"map-loader",children:pi.jsx($Tt,{})}):null]})};function ETt(t,e){const i=parseInt(t??"",10);return isNaN(i)?e:i}function CTt(t,e){if(t&&t.length>3)try{const i=t.split(",").map(r=>parseFloat(r));if(i.length>1)return{latitude:i[0],longitude:i[1]}}catch(i){console.error("unable to parse point: ",i)}return e}const vG="esri-identity-modal",bG={base:vG,info:`${vG}__info`,notice:`${vG}__notice`},ITt="ArcGIS Online";let oc=class extends Yn{constructor(t,e){super(t,e),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return Ty({button:()=>$e(()=>Promise.resolve().then(()=>OO),void 0),dialog:()=>$e(()=>import("./index-4dgyLyVi.js"),__vite__mapDeps([272,271])),input:()=>$e(()=>Promise.resolve().then(()=>Jze),void 0),label:()=>$e(()=>Promise.resolve().then(()=>Xze),void 0),notice:()=>$e(()=>Promise.resolve().then(()=>dY),void 0)})}get title(){var t;return(t=this.commonMessages)==null?void 0:t.auth.signIn}render(){var k;const{open:t,title:e,messages:i,signingIn:r,oAuthPrompt:n,server:s,resource:o,error:a}=this,{info:l,oAuthInfo:c,lblItem:h,invalidUser:m,noAuthService:y,lblUser:v,lblPwd:w,lblCancel:x,lblSigning:S,lblOk:C}=i;return K("div",{class:this.classes(bG.base,m$e())},K("form",{bind:this,onsubmit:this._submit},K("calcite-dialog",{bind:this,heading:e,modal:!0,open:t,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},K("div",{class:bG.info},Zp(n?c:l,{server:s&&/\.arcgis\.com/i.test(s)?ITt:s,resource:`(${o||h})`})),a?K("calcite-notice",{class:bG.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},K("div",{slot:"message"},(k=a.details)!=null&&k.httpStatus?m:y)):null,n?null:[K("calcite-label",null,v,K("calcite-input",{afterCreate:A=>this._usernameInputNode=A,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),K("calcite-label",null,w,K("calcite-input",{afterCreate:A=>this._passwordInputNode=A,bind:this,name:"password",required:!0,type:"password",value:""}))],K("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},x),K("calcite-button",{loading:!!r,slot:"footer-end",type:"submit"},r?S:C))))}_focusUsernameInput(){return X$(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(t){var i,r;t.preventDefault(),this._set("signingIn",!0);const e=this.oAuthPrompt?{}:{username:(i=this._usernameInputNode)==null?void 0:i.value,password:(r=this._passwordInputNode)==null?void 0:r.value};this.emit("submit",e)}};u([p({readOnly:!0})],oc.prototype,"container",void 0),u([p(),Il("esri/t9n/common")],oc.prototype,"commonMessages",void 0),u([p()],oc.prototype,"error",void 0),u([p(),Il("esri/identity/t9n/identity")],oc.prototype,"messages",void 0),u([p()],oc.prototype,"oAuthPrompt",void 0),u([p()],oc.prototype,"open",void 0),u([p()],oc.prototype,"signingIn",void 0),u([p()],oc.prototype,"server",void 0),u([p({readOnly:!0})],oc.prototype,"title",null),u([p()],oc.prototype,"resource",void 0),oc=u([U("esri.identity.IdentityModal")],oc);const Rfe=oc,wG="esriJSAPIOAuth";class IZ{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let r=e[i.authNamespace];r||(r=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),r[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(wG,JSON.stringify(e))}catch(n){return console.warn(n),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.appId&&(i!=null&&i.portalUrl)&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const r=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",n=new FormData;if(n.append("f","json"),n.append("auth_token",this.refreshToken||this.token),n.append("client_id",i.appId),n.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),typeof navigator.sendBeacon=="function")navigator.sendBeacon(r,n);else{const s=new XMLHttpRequest;s.open("POST",r),s.send(n)}}if(i!=null&&i.authNamespace&&i.portalUrl&&this.storage){const r=e[i.authNamespace];if(r){delete r[i.portalUrl];try{this.storage.setItem(wG,JSON.stringify(e))}catch(n){console.log(n)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i!=null&&i.authNamespace&&i.portalUrl){let r=e[i.authNamespace];r&&(r=r[i.portalUrl],r&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(wG);if(i)try{e=JSON.parse(i)}catch(r){console.warn(r)}}return e}}IZ.prototype.declaredClass="esri.identity.OAuthCredential";var MZ,mE;let bo=(mE=class extends ye{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return MZ.fromJSON(this.toJSON())}},MZ=mE,mE);u([p({json:{write:!0}})],bo.prototype,"appId",void 0),u([p({json:{write:!0}})],bo.prototype,"authNamespace",void 0),u([p({json:{write:!0}})],bo.prototype,"expiration",void 0),u([p({json:{write:!0}})],bo.prototype,"flowType",void 0),u([p({json:{write:!0}})],bo.prototype,"forceLogin",void 0),u([p({json:{write:!0}})],bo.prototype,"forceUserId",void 0),u([p({json:{write:!0}})],bo.prototype,"locale",void 0),u([p({json:{write:!0}})],bo.prototype,"minTimeUntilExpiration",void 0),u([p({json:{write:!0}})],bo.prototype,"popup",void 0),u([p({json:{write:!0}})],bo.prototype,"popupCallbackUrl",void 0),u([p({json:{write:!0}})],bo.prototype,"popupWindowFeatures",void 0),u([p({json:{write:!0}})],bo.prototype,"portalUrl",void 0),u([p({json:{write:!0}})],bo.prototype,"preserveUrlHash",void 0),u([p({json:{write:!0}})],bo.prototype,"userId",void 0),bo=MZ=u([U("esri.identity.OAuthInfo")],bo);const Dfe=bo;let ac=class extends ye{constructor(t){super(t),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};u([p({json:{write:!0}})],ac.prototype,"adminTokenServiceUrl",void 0),u([p({json:{write:!0}})],ac.prototype,"currentVersion",void 0),u([p({json:{write:!0}})],ac.prototype,"hasPortal",void 0),u([p({json:{write:!0}})],ac.prototype,"hasServer",void 0),u([p({json:{write:!0}})],ac.prototype,"owningSystemUrl",void 0),u([p({json:{write:!0}})],ac.prototype,"owningTenant",void 0),u([p({json:{write:!0}})],ac.prototype,"server",void 0),u([p({json:{write:!0}})],ac.prototype,"shortLivedTokenValidity",void 0),u([p({json:{write:!0}})],ac.prototype,"tokenServiceUrl",void 0),u([p({json:{write:!0}})],ac.prototype,"webTierAuth",void 0),ac=u([U("esri.identity.ServerInfo")],ac);const _G=ac,$N={},z2e=t=>{const e=new Fa(t.owningSystemUrl).host,i=new Fa(t.server).host,r=/.+\.arcgis\.com$/i;return r.test(e)&&r.test(i)},kZ=(t,e)=>!!(z2e(t)&&e&&e.some(i=>i.test(t.server)));let TN=null,EN=null;try{TN=window.localStorage,EN=window.sessionStorage}catch{}class F2e extends pa{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=nn(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(r=>!this.findServerInfo(r.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(r=>{r.owningSystemUrl&&this._portals.push(r.owningSystemUrl),r.hasPortal&&this._portals.push(r.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const r of e){const n=this.findOAuthInfo(r.portalUrl);n&&i.splice(i.indexOf(n),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),r=this._isServerRsrc(i);let n,s=this.findServerInfo(i),o=!0;s||(s=new _G,s.server=this._getServerInstanceRoot(i),r?s.hasServer=!0:(s.tokenServiceUrl=this._getTokenSvcUrl(i),s.hasPortal=!0),this.registerServers([s])),n=this._findCredential(i),n?(delete e.server,Object.assign(n,e),o=!1):(n=new Kr({userId:e.userId,server:s.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?"server":"portal"}),n.resources=[i],this.credentials.push(n)),n.emitTokenChange(!1),o||n.refreshServerTokens()}toJSON(){return IY({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,r=e.oAuthInfos,n=e.credentials;if(i){const s=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&s.push(o.declaredClass?o:new _G(o))}),s.length&&this.registerServers(s)}if(r){const s=[];r.forEach(o=>{o.appId&&s.push(o.declaredClass?o:new Dfe(o))}),s.length&&this.registerOAuthInfos(s)}n&&n.forEach(s=>{s.server&&s.token&&s.expires&&s.expires>Date.now()&&((s=s.declaredClass?s:new Kr(s)).emitTokenChange(),this.credentials.push(s))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){i=r;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){i=r;break}return i}findCredential(e,i){if(!e)return;let r;e=this._sanitizeUrl(e);const n=this._isServerRsrc(e)?"server":"portal";if(i){for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&i===s.userId&&s.scope===n){r=s;break}}else for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&this._getIdenticalSvcIdx(e,s)!==-1&&s.scope===n){r=s;break}return r}getCredential(e,i){var v;let r,n=!1,s=!0;i&&(n=!(!i.token&&!i.credential),r=i.error,s=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const o=new AbortController,a=Mo();if(i.signal&&no(i.signal,()=>{o.abort()}),no(o,()=>{a.reject(new Q("identity-manager:user-aborted","ABORTED"))}),xc(o))return a.promise;i.signal=o.signal;const l=this._isAdminResource(e),c=n?this.findCredential(e):null;let h;if(c&&((v=r==null?void 0:r.details)==null?void 0:v.httpStatus)===498)c.destroy();else if(c)return h=new Q("identity-manager:not-authorized","You are currently signed in as: '"+c.userId+"'. You do not have access to this resource: "+e,{error:r}),a.reject(h),a.promise;const m=this._findCredential(e,i);if(m)return a.resolve(m),a.promise;let y=this.findServerInfo(e);if(y)!y.hasPortal&&y.server&&y.owningSystemUrl&&this._hasSameServerInstance(y.server,y.owningSystemUrl)&&(y.hasPortal=!0),!y.hasServer&&this._isServerRsrc(e)&&(y._restInfoPms=this._getTokenSvcUrl(e),y.hasServer=!0);else{const w=this._getTokenSvcUrl(e);if(!w)return h=new Q("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),a.reject(h),a.promise;y=new _G,y.server=this._getServerInstanceRoot(e),typeof w=="string"?(y.tokenServiceUrl=w,y.hasPortal=!0):(y._restInfoPms=w,y.hasServer=!0),this.registerServers([y])}return y.hasPortal&&y._selfReq===void 0&&(s||io(y.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(w=>w.tokenServiceUrl===y.tokenServiceUrl))&&(y._selfReq={owningTenant:i==null?void 0:i.owningTenant,selfDfd:this._getPortalSelf(y.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,y,i,a,l)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,r){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),s=new Fa(this._appOrigin),o=e.shortLivedTokenValidity;let a,l,c,h,m,y,v,w;i&&(w=this.tokenValidity||o||this._defaultTokenValidity,w>o&&o>0&&(w=o)),r&&(a=r.isAdmin,l=r.serverUrl,c=r.token,y=r.signal,v=r.ssl,e.customParameters=r.customParameters),a?h=e.adminTokenServiceUrl:(h=e.tokenServiceUrl,m=new Fa(h.toLowerCase()),e.webTierAuth&&(r!=null&&r.serverUrl)&&!v&&s.scheme==="http"&&(io(s.uri,h,!0)||m.scheme==="https"&&s.host===m.host&&s.port==="7080"&&m.port==="7443")&&(h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const x={query:{request:"getToken",username:i==null?void 0:i.username,password:i==null?void 0:i.password,serverUrl:l,token:c,expiration:w,referer:a||n?this._appOrigin:null,client:a?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,r),signal:y,...r==null?void 0:r.ioArgs};return n||(x.withCredentials=!1),Ot(h,x).then(S=>{const C=S.data;if(!(C!=null&&C.token))return new Q("identity-manager:authentication-failed","Unable to generate token");const k=e.server;return $N[k]||($N[k]={}),i&&($N[k][i.username]=i.password),C.validity=w,C})}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,i,r){let n=!1;return this.getCredential(e,{prompt:!1}).then(s=>{let o;const a={f:"json"};if(s.scope==="portal")if(i&&(this._doPortalSignIn(e)||r!=null&&r.force))o=s.server+"/sharing/rest/oauth2/validateAppAccess",a.client_id=i;else{if(!s.token)return{credential:s};o=s.server+"/sharing/rest"}else{if(!s.token)return{credential:s};o=s.server+"/rest/services"}return s.token&&(a.token=s.token),Ot(o,{query:a,authMode:"anonymous"}).then(l=>{if(l.data.valid===!1)throw new Q("identity-manager:not-authorized",`You are currently signed in as: '${s.userId}'.`,l.data);return n=!!l.data.viewOnlyUserTypeApp,{credential:s}}).catch(l=>{var h;if(l.name==="identity-manager:not-authorized")throw l;const c=(h=l.details)==null?void 0:h.httpStatus;if(c===498)throw s.destroy(),new Q("identity-manager:not-authenticated","User is not signed in.");if(c===400)throw new Q("identity-manager:invalid-request","Bad request");return{credential:s}})}).then(s=>({credential:s.credential,viewOnly:n}))}setOAuthResponseHash(e){e&&(e.charAt(0)==="#"&&(e=e.slice(1)),this._processOAuthPopupParams(Bw(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,r={}){const n=Mo(),s=()=>{var h;l==null||l.remove(),c==null||c.remove(),(h=this.dialog)==null||h.destroy(),this.dialog=l=c=null},o=()=>{s(),this._oAuthDfd=null,n.reject(new Q("identity-manager:user-aborted","ABORTED"))};r.signal&&no(r.signal,()=>{o()});const a=new Rfe({open:!0,resource:this.getResourceName(e),server:i.server});this.dialog=a,this.emit("dialog-create");let l=a.on("cancel",o),c=a.on("submit",h=>{this.generateToken(i,h,{isAdmin:r.isAdmin,signal:r.signal}).then(m=>{s();const y=new Kr({userId:h.username,server:i.server??void 0,token:m.token,expires:m.expires!=null?Number(m.expires):null,ssl:!!m.ssl,isAdmin:r.isAdmin,validity:m.validity});n.resolve(y)}).catch(m=>{a.error=m,a.signingIn=!1})});return n.promise}oAuthSignIn(e,i,r,n){this._oAuthDfd=Mo();const s=this._oAuthDfd;let o;n!=null&&n.signal&&no(n.signal,()=>{const y=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;y&&!y.closed?y.close():this.dialog&&h()}),s.resUrl_=e,s.sinfo_=i,s.oinfo_=r;const a=r._oAuthCred;if(a.storage&&(r.flowType==="authorization-code"||r.flowType==="auto"&&i.currentVersion>=8.4)){let y=crypto.getRandomValues(new Uint8Array(32));o=tB(y),a.codeVerifier=o,y=crypto.getRandomValues(new Uint8Array(32)),a.stateUID=tB(y),a.save()||(a.codeVerifier=o=null)}else a.codeVerifier=null;let l,c;this._getCodeChallenge(o).then(y=>{const v=!n||n.oAuthPopupConfirmation!==!1;if(!r.popup||!v)return void this._doOAuthSignIn(e,i,r,y);const w=new Rfe({oAuthPrompt:!0,server:i.server,open:!0});this.dialog=w,this.emit("dialog-create"),l=w.on("cancel",h),c=w.on("submit",()=>{m(),this._doOAuthSignIn(e,i,r,y)})});const h=()=>{m(),this._oAuthDfd=null,s.reject(new Q("identity-manager:user-aborted","ABORTED"))},m=()=>{var y;l==null||l.remove(),c==null||c.remove(),(y=this.dialog)==null||y.destroy(),this.dialog=null};return s.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=oy(window,"message",i=>{var r;if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&((r=i.data)==null?void 0:r.type)==="arcgis:auth:requestCredential"){const n=i.source;this.getCredential(e).then(s=>{n.postMessage({type:"arcgis:auth:credential",credential:{expires:s.expires,server:s.server,ssl:s.ssl,token:s.token,userId:s.userId}},i.origin)}).catch(s=>{n.postMessage({type:"arcgis:auth:error",error:{name:s.name,message:s.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){var r,n;let e=window.location.hash;if(e){e.charAt(0)==="#"&&(e=e.slice(1));const s=Bw(e);let o=!1;if(s.access_token&&s.expires_in&&s.state&&s.hasOwnProperty("username"))try{s.state=JSON.parse(s.state),s.state.portalUrl&&(this._oAuthLocationParams=s,o=!0)}catch{}else if(s.error&&s.error_description&&(console.log("IdentityManager OAuth Error: ",s.error," - ",s.error_description),s.error==="access_denied"&&(o=!0,s.state)))try{s.state=JSON.parse(s.state)}catch{}o&&(window.location.hash=((r=s.state)==null?void 0:r.hash)||"")}let i=window.location.search;if(i){i.charAt(0)==="?"&&(i=i.slice(1));const s=Bw(i);let o=!1;if(s.code&&s.state)try{s.state=JSON.parse(s.state),s.state.portalUrl&&s.state.uid&&(this._oAuthLocationParams=s,o=!0)}catch{}else if(s.error&&s.error_description&&(console.log("IdentityManager OAuth Error: ",s.error," - ",s.error_description),s.error==="access_denied"&&(o=!0,s.state)))try{s.state=JSON.parse(s.state)}catch{}if(o){const a={...s};["code","error","error_description","message_code","persist","state"].forEach(h=>{delete a[h]});const l=t1(a),c=window.location.pathname+(l?`?${l}`:"")+(((n=s.state)==null?void 0:n.hash)||"");window.history.replaceState(window.history.state,"",c)}}}_getOAuthToken(e,i,r,n,s){return e=e.replace(/^http:/i,"https:"),Ot(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:n&&s?{grant_type:"authorization_code",code:i,redirect_uri:n,client_id:r,code_verifier:s}:{grant_type:"refresh_token",refresh_token:i,client_id:r}}).then(o=>o.data)}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",i);return tB(new Uint8Array(r))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new Q("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let r,n,s,o,a=-1;const l=i==null?void 0:i.token,c=i==null?void 0:i.resource,h=this._isServerRsrc(e)?"server":"portal",m=this.credentials.filter(y=>this._hasSameServerInstance(y.server,e)&&y.scope===h);if(e=c||e,m.length)if(m.length===1){if(r=m[0],s=this.findServerInfo(r.server),n=s==null?void 0:s.owningSystemUrl,o=n?this.findCredential(n,r.userId):void 0,a=this._getIdenticalSvcIdx(e,r),!l)return a===-1&&r.resources.push(e),this._addResource(e,o),r;a!==-1&&(r.resources.splice(a,1),this._removeResource(e,o))}else{let y,v;if(m.some(w=>(v=this._getIdenticalSvcIdx(e,w),v!==-1&&(y=w,s=this.findServerInfo(y.server),n=s==null?void 0:s.owningSystemUrl,o=n?this.findCredential(n,y.userId):void 0,a=v,!0))),l)y&&(y.resources.splice(a,1),this._removeResource(e,o));else if(y)return this._addResource(e,o),y}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){i=r;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let r=-1;i&&(r=this._getIdenticalSvcIdx(e,i),r>-1&&i.resources.splice(r,1))}_useProxy(e,i){return(i==null?void 0:i.isAdmin)&&!io(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!io(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new Fa(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let r=i.indexOf(this._agsRest);return r===-1&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),r!==-1||WY(i)||(r=i.indexOf("/sharing")),r===-1&&i.endsWith("/")&&(r=i.length-1),r>-1?e.slice(0,r):e}_hasSameServerInstance(e,i){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=kz(e),i=kz(i),(e=e.slice(Math.max(0,e.indexOf(":"))))===(i=i.slice(Math.max(0,i.indexOf(":"))))}_sanitizeUrl(e){const i=(hi.request.proxyUrl||"").toLowerCase(),r=i?e.toLowerCase().indexOf(i+"?"):-1;return r!==-1&&(e=e.slice(r+i.length+1)),e=so(e),nn(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let r=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const n=this._getSuffix(e).toLowerCase(),s=this._getSuffix(i).toLowerCase();if(r=n===s,!r){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=n.replaceAll(o,"$1")===s.replaceAll(o,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const i=new Fa(e.toLowerCase()),r=this._portalConfig;let n=this._gwDomains.some(s=>s.regex.test(i.uri));return!n&&r&&(n=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),i.uri)),n||hi.portalUrl&&(n=io(i,hi.portalUrl,!0)),n||(n=this._portals.some(s=>this._hasSameServerInstance(s,i.uri))),n=n||this._agsPortal.test(i.path),n}_isIdProvider(e,i){let r=-1,n=-1;this._gwDomains.forEach((o,a)=>{r===-1&&o.regex.test(e)&&(r=a),n===-1&&o.regex.test(i)&&(n=a)});let s=!1;if(r>-1&&n>-1&&(r===0||r===4?n!==0&&n!==4||(s=!0):r===1?n!==1&&n!==2||(s=!0):r===2?n===2&&(s=!0):r===3&&n===3&&(s=!0)),!s){const o=this.findServerInfo(i),a=o==null?void 0:o.owningSystemUrl;a&&z2e(o)&&this._isPortalDomain(a)&&this._isIdProvider(e,a)&&(s=!0)}return s}_getIdenticalSvcIdx(e,i){let r=-1;for(let n=0;n<i.resources.length;n++){const s=i.resources[n];if(this._isIdenticalService(e,s)){r=n;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,r,n;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return i=s+"/admin/generateToken",r=Ot(e=s+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:r}}if(this._isPortalDomain(e)){let s="";if(this._gwDomains.some(o=>(o.regex.test(e)&&(s=o.tokenServiceUrl),!!s)),s||this._portals.some(o=>(this._hasSameServerInstance(o,e)&&(s=o+this._gwTokenUrl),!!s)),s||(n=e.toLowerCase().indexOf("/sharing"),n!==-1&&(s=e.slice(0,n)+this._gwTokenUrl)),s||(s=this._getOrigin(e)+this._gwTokenUrl),s){const o=new Fa(e).port;/^http:\/\//i.test(e)&&o==="7080"&&(s=s.replace(/:7080/i,":7443")),s=s.replace(/http:/i,"https:")}return s}}_processOAuthResponseParams(e,i,r){const n=i._oAuthCred;if(e.code){const o=n.codeVerifier;return n.codeVerifier=null,n.stateUID=null,n.save(),this._getOAuthToken(r.server,e.code,i.appId,this._getRedirectURI(i,!0),o).then(a=>{const l=new Kr({userId:a.username,server:r.server??void 0,token:a.access_token,expires:Date.now()+1e3*a.expires_in,ssl:a.ssl,oAuthState:e.state,_oAuthCred:n});return i.userId=l.userId,n.storage=a.persist?TN:EN,n.refreshToken=a.refresh_token,n.token=null,n.expires=a.refresh_token_expires_in?Date.now()+1e3*a.refresh_token_expires_in:null,n.userId=l.userId,n.ssl=l.ssl,n.save(),l})}const s=new Kr({userId:e.username,server:r.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:n});return i.userId=s.userId,n.storage=e.persist?TN:EN,n.refreshToken=null,n.token=s.token,n.expires=s.expires,n.userId=s.userId,n.ssl=s.ssl,n.save(),Promise.resolve(s)}_processOAuthPopupParams(e){var r;const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),(r=this._oAuthOnPopupHandle)==null||r.remove(),e.error){const n=e.error==="access_denied",s=new Q(n?"identity-manager:user-aborted":"identity-manager:authentication-failed",n?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(s)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(n=>{i.resolve(n)}).catch(n=>{i.reject(n)})}_setOAuthResponseQueryString(e){e&&(e.charAt(0)==="?"&&(e=e.slice(1)),this._processOAuthPopupParams(Bw(e)))}async _exchangeToken(e,i,r){return(await Ot(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:r}})).data.token}async _getPlatformSelf(e,i){var r;if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const n=await Ot(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,n.data}catch(n){throw((r=n.details)==null?void 0:r.messageCode)==="OAUTH_0066"&&(this._getPlatformSelfError=[n,Date.now()]),n}}_getPortalSelf(e,i){let r;return this._gwDomains.some(n=>(n.regex.test(e)&&(r=n.customBaseUrl),!!r)),r?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:r,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),Ot(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(n=>n.data))}_doPortalSignIn(e){const i=this._portalConfig,r=window.location.href,n=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(r)||!(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||io(r,e,!0)))}_checkProtocol(e,i,r,n){let s=!0;const o=n?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&GO(o)&&(s=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!s)&&r(new Q("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),s}_enqueue(e,i,r,n,s,o){return n||(n=Mo()),n.resUrl_=e,n.sinfo_=i,n.options_=r,n.admin_=s,n.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(n)):this._xoReqs.push(n):this._doSignIn(n),n.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=c=>{var S;const h=(S=e.options_)==null?void 0:S.resource,m=e.resUrl_,y=e.refresh_;let v=!1;this.credentials.includes(c)||(y&&this.credentials.includes(y)?(y.userId=c.userId,y.token=c.token,y.expires=c.expires,y.validity=c.validity,y.ssl=c.ssl,y.creationTime=c.creationTime,v=!0,c=y):this.credentials.push(c)),c.resources||(c.resources=[]),c.resources.includes(h||m)||c.resources.push(h||m),c.scope=this._isServerRsrc(m)?"server":"portal",c.emitTokenChange();const w=this._soReqs,x={};this._soReqs=[],w.forEach(C=>{if(!this._isIdenticalService(m,C.resUrl_)){const k=this._getSuffix(C.resUrl_);x[k]||(x[k]=!0,c.resources.push(C.resUrl_))}}),e.resolve(c),w.forEach(C=>{this._hasSameServerInstance(this._getServerInstanceRoot(m),C.resUrl_)?C.resolve(c):this._soReqs.push(C)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,v||this.emit("credential-create",{credential:c}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=c=>{e.reject(c),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=(c,h,m,y)=>{var k,A,R;const v=e.sinfo_,w=!e.options_||e.options_.prompt!==!1,x=v.hasPortal&&this._findOAuthInfo(e.resUrl_);let S,C;if(c)i(new Kr({userId:c,server:v.server??void 0,token:m??void 0,expires:y!=null?Number(y):null,ssl:!!h}));else if(window!==window.parent&&((k=this._appUrlObj.query)!=null&&k["arcgis-auth-origin"])&&((A=this._appUrlObj.query)!=null&&A["arcgis-auth-portal"])&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const D=oy(window,"message",B=>{B.source===window.parent&&B.data&&(B.data.type==="arcgis:auth:credential"?(D.remove(),B.data.credential.expires<Date.now()?r(new Q("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new Kr(B.data.credential))):B.data.type==="arcgis:auth:error"&&(D.remove(),B.data.error.name==="tokenExpiredError"?r(new Q("identity-manager:credential-request-failed","Parent application's token has expired.")):r(Q.fromJSON(B.data.error))))});no((R=e.options_)==null?void 0:R.signal,()=>{D.remove()})}else if(x){let D=x._oAuthCred;if(!D){const B=new IZ(x,TN),z=new IZ(x,EN);B.isValid()&&z.isValid()?B.expires>z.expires?(D=B,z.destroy()):(D=z,B.destroy()):D=B.isValid()?B:z,x._oAuthCred=D}if(D.isValid()){S=new Kr({userId:D.userId??void 0,server:v.server??void 0,token:D.token??void 0,expires:D.expires,ssl:D.ssl??void 0,_oAuthCred:D});const B=x.appId!==D.appId&&this._doPortalSignIn(e.resUrl_);B||D.refreshToken?(e._pendingDfd=D.refreshToken?this._getOAuthToken(v.server,D.refreshToken,D.appId).then(z=>(S.expires=Date.now()+1e3*z.expires_in,S.token=z.access_token,S)):Promise.resolve(S),e._pendingDfd.then(z=>B?this._exchangeToken(z.server,x.appId,z.token).then(W=>(z.token=W,z)).catch(()=>z):z).then(z=>{i(z)}).catch(z=>{var Y;const W=(Y=z.details)==null?void 0:Y.httpStatus;W>0&&W!==404?(D.destroy(),n()):r(z)})):i(S)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(x.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===D.stateUID&&D.codeVerifier)){const B=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(B,x,v).then(z=>{i(z)}).catch(r)}else{const B=()=>{w?e._pendingDfd=this.oAuthSignIn(e.resUrl_,v,x,e.options_).then(i,r):(C=new Q("identity-manager:not-authenticated","User is not signed in."),r(C))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(v.server,x.appId).then(z=>{io(z.portalUrl,this._appOrigin,!0)?(S=new Kr({userId:z.username,server:v.server??void 0,expires:Date.now()+1e3*z.expires_in,token:z.token}),i(S)):B()}).catch(B):B()}}else if(w){if(this._checkProtocol(e.resUrl_,v,r,e.admin_)){let D=e.options_;e.admin_&&(D=D||{},D.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,v,D).then(i,r)}}else C=new Q("identity-manager:not-authenticated","User is not signed in."),r(C)},s=()=>{const c=e.sinfo_,h=c.owningSystemUrl,m=e.options_;let y,v,w,x;if(m&&(y=m.token,v=m.error,w=m.prompt),x=this._findCredential(h,{token:y,resource:e.resUrl_}),!x){for(const S of this.credentials)if(this._isIdProvider(h,S.server)){x=S;break}}if(x){const S=this.findCredential(e.resUrl_,x.userId);if(S)i(S);else if(kZ(c,this._legacyFed)){const C=x.toJSON();C.server=c.server,C.resources=null,i(new Kr(C))}else(e._pendingDfd=this.generateToken(this.findServerInfo(x.server),null,{serverUrl:e.resUrl_,token:x.token,signal:e.options_.signal,ssl:x.ssl})).then(C=>{i(new Kr({userId:x==null?void 0:x.userId,server:c.server??void 0,token:C.token,expires:C.expires!=null?Number(C.expires):null,ssl:!!C.ssl,isAdmin:e.admin_,validity:C.validity}))},r)}else this._busy=null,y&&(e.options_.token=null),(e._pendingDfd=this.getCredential(h.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:c.owningTenant,signal:e.options_.signal,token:y,error:v,prompt:w})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},S=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(S)})};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),l=e.sinfo_._restInfoPms;l?l.promise.then(c=>{const h=e.sinfo_;if(h._restInfoPms){h.adminTokenServiceUrl=h._restInfoPms.adminUrl,h._restInfoPms=null,h.tokenServiceUrl=(Zm("authInfo.tokenServicesUrl",c)||Zm("authInfo.tokenServiceUrl",c)||Zm("tokenServiceUrl",c))??null,h.shortLivedTokenValidity=Zm("authInfo.shortLivedTokenValidity",c)??null,h.currentVersion=c.currentVersion,h.owningTenant=c.owningTenant;const m=h.owningSystemUrl=c.owningSystemUrl;m&&this._portals.push(m)}a&&h.owningSystemUrl?s():n()},()=>{e.sinfo_._restInfoPms=null;const c=new Q("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");r(c)}):a&&o?s():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(c=>{var x;const h={};let m,y,v,w;return c&&(m=(x=c.user)==null?void 0:x.username,h.username=m,h.allSSL=c.allSSL,y=c.supportsOAuth,w=parseFloat(c.currentVersion),c.portalMode==="multitenant"&&(v=c.customBaseUrl),e.sinfo_.currentVersion=w),e.sinfo_.webTierAuth=!!m,m&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:h.allSSL}).catch(()=>null).then(S=>(h.portalToken=S==null?void 0:S.token,h.tokenExpiration=S==null?void 0:S.expires,h)):!m&&y&&w>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:v,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>h):h}).catch(()=>null).then(c=>{e.sinfo_._selfReq=null,c?n(c.username,c.allSSL,c.portalToken,c.tokenExpiration):n()}):n()}_generateOAuthInfo(e){let i,r=null,n=e.portalUrl;const s=e.customBaseUrl,o=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){r=this._appUrlObj.path;const l=r.search(/\/(apps|home)\//);r=l>-1?r.slice(0,l):null}return a&&r?(this._hasTestedIfAppIsOnPortal=!0,i=Ot(r+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new Dfe({appId:"arcgisonline",popupCallbackUrl:r+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return n=n.replace(/^http:/i,"https:"),Ot(n+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this._defaultOAuthInfo.appId,redirect_uri:na(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(l=>{if(l.data.valid){const c=this._defaultOAuthInfo.clone();l.data.urlKey&&s?c.portalUrl="https://"+l.data.urlKey.toLowerCase()+"."+s:c.portalUrl=n,c.popup=window!==window.top||!(io(n,this._appOrigin)||this._gwDomains.some(h=>h.regex.test(n)&&h.regex.test(this._appOrigin))),this.oAuthInfos.push(c)}})})}_doOAuthSignIn(e,i,r,n){const s=r._oAuthCred,o={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),s.stateUID&&(o.uid=s.stateUID);const a={client_id:r.appId,response_type:s.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!s.codeVerifier)};r.forceLogin&&(a.force_login=!0),r.forceUserId&&r.userId&&(a.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(a.redirectToUserOrgUrl=!0),s.codeVerifier&&(a.code_challenge=n||s.codeVerifier,a.code_challenge_method=n?"S256":"plain");const l=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",c=l+"?"+t1(a);if(r.popup){const h=window.open(c,"esriJSAPIOAuth",r.popupWindowFeatures);if(h)h.focus(),this._oAuthDfd.oAuthWin_=h,this._oAuthIntervalId=setInterval(()=>{if(h.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const m=this._oAuthDfd;if(m){const y=new Q("identity-manager:user-aborted","ABORTED");m.reject(y)}}},500),this._oAuthOnPopupHandle=oy(window,["arcgis:auth:hash","arcgis:auth:location:search"],m=>{m.type==="arcgis:auth:hash"?this.setOAuthResponseHash(m.detail):this._setOAuthResponseQueryString(m.detail)});else{const m=new Q("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(m)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:a,authorizeUrl:l,resourceUrl:e,serverInfo:i,oAuthInfo:r}):window.location.href=c}_getRedirectURI(e,i){const r=window.location.href.replace(/#.*$/,"");if(e.popup)return na(e.popupCallbackUrl);if(i){const n=nn(r);return n.query&&["code","error","error_description","message_code","persist","state"].forEach(s=>{delete n.query[s]}),dk(n.path,n.query)}return r}}F2e.prototype.declaredClass="esri.identity.IdentityManagerBase";let Kr=class extends pa.EventedAccessor{constructor(t){super(t),this._oAuthCred=null,this.tokenRefreshBuffer=2,t!=null&&t._oAuthCred&&(this._oAuthCred=t._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const t=Tt,e=t.findServerInfo(this.server),i=e==null?void 0:e.owningSystemUrl,r=!!i&&this.scope==="server",n=r&&kZ(e,t._legacyFed),s=e.webTierAuth,o=s&&t.normalizeWebTierAuth,a=$N[this.server],l=a==null?void 0:a[this.userId];let c,h=this.resources&&this.resources[0],m=r?t.findServerInfo(i):null,y={username:this.userId,password:l};if(s&&!o)return;r&&!m&&t.serverInfos.some(w=>(t._isIdProvider(i,w.server)&&(m=w),!!m));const v=m?t.findCredential(m.server,this.userId):null;if(!r||v){if(!n){if(r)c={serverUrl:h,token:v==null?void 0:v.token,ssl:v==null?void 0:v.ssl};else if(o)y=null,c={ssl:this.ssl};else{if(!l){let w;return h&&(h=t._sanitizeUrl(h),this._enqueued=1,w=t._enqueue(h,e,null,null,this.isAdmin,this),w.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),w}this.isAdmin&&(c={isAdmin:!0})}return t.generateToken(r?m:e,r?null:y,c).then(w=>{this.token=w.token,this.expires=w.expires!=null?Number(w.expires):null,this.creationTime=Date.now(),this.validity=w.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}v==null||v.refreshToken()}}refreshServerTokens(){if(this.scope==="portal"){const t=Tt;t.credentials.forEach(e=>{const i=t.findServerInfo(e.server),r=i==null?void 0:i.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&e.scope==="server"&&(t._hasSameServerInstance(this.server,r)||t._isIdProvider(r,this.server))&&(kZ(i,t._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())})}}emitTokenChange(t){clearTimeout(this._refreshTimer);const e=Tt,i=this.server?e.findServerInfo(this.server):null,r=i==null?void 0:i.owningSystemUrl,n=r?e.findServerInfo(r):null;t===!1||r&&this.scope!=="portal"&&(!(n!=null&&n.webTierAuth)||e.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const t=Tt,e=t.credentials.indexOf(this);e>-1&&t.credentials.splice(e,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const t=IY({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),e=this.resources;return e&&e.length>0&&(t.resources=e.slice()),t}_startRefreshTimer(){clearTimeout(this._refreshTimer);const t=6e4*this.tokenRefreshBuffer,e=2**31-1;let i=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();i<0?i=0:i>e&&(i=e),this._refreshTimer=setTimeout(this.refreshToken.bind(this),i>t?i-t:i)}};u([p()],Kr.prototype,"creationTime",void 0),u([p()],Kr.prototype,"expires",void 0),u([p()],Kr.prototype,"isAdmin",void 0),u([p()],Kr.prototype,"oAuthState",void 0),u([p()],Kr.prototype,"resources",void 0),u([p()],Kr.prototype,"scope",void 0),u([p()],Kr.prototype,"server",void 0),u([p()],Kr.prototype,"ssl",void 0),u([p()],Kr.prototype,"token",void 0),u([p()],Kr.prototype,"tokenRefreshBuffer",void 0),u([p()],Kr.prototype,"userId",void 0),u([p()],Kr.prototype,"validity",void 0),Kr=u([U("esri.identity.Credential")],Kr);class U2e extends F2e{}U2e.prototype.declaredClass="esri.identity.IdentityManager";const Yk=new U2e;Rje(Yk);const j2e=Object.freeze(Object.defineProperty({__proto__:null,default:Yk},Symbol.toStringTag,{value:"Module"}));function MTt(){const[t]=NOe(),[e,i]=Ve.useState(""),[r,n]=Ve.useState(null),[s,o]=Ve.useState();return Ve.useEffect(()=>{const a=t.get("mapId");n(ETt(t.get("zoom"),null)),o(CTt(t.get("center"),null)),i(a||"05e015c5f0314db9a487a9b46cb37eca"),t.get("force")=="true"&&Yk.on("dialog-create",()=>{console.log("cancelling login dialog"),Yk.dialog.visible=!1,window.setTimeout(function(){Yk.dialog.destroy()},150)})},[t]),pi.jsx(pi.Fragment,{children:pi.jsx("main",{className:"app",children:pi.jsx(TTt,{mapId:e,zoom:r,center:s})})})}gAe.createRoot(document.getElementById("root")).render(pi.jsx(Ve.StrictMode,{children:pi.jsx(OOe,{children:pi.jsx(MTt,{})})}));export{U7e as $,dt as A,Xt as B,ca as C,GNe as D,EK as E,WTt as F,Ap as G,lu as H,KPe as I,hLe as J,jje as K,Mr as L,nn as M,zCt as N,mMt as O,ynt as P,ddt as Q,TK as R,Fr as S,wMt as T,bMt as U,T9 as V,Fe as W,uqe as X,rnt as Y,At as Z,$e as _,Yt as a,F7e as a$,vMt as a0,_s as a1,NO as a2,Le as a3,ve as a4,Kat as a5,Ot as a6,yst as a7,Rue as a8,VD as a9,LHe as aA,$c as aB,rD as aC,rIt as aD,UCt as aE,_r as aF,Ao as aG,ce as aH,sat as aI,oat as aJ,aat as aK,Un as aL,Ad as aM,It as aN,ye as aO,Eb as aP,iHe as aQ,_C as aR,eHe as aS,tWe as aT,G_e as aU,mWe as aV,YPt as aW,Due as aX,Mo as aY,Ze as aZ,Jxe as a_,ZPt as aa,Et as ab,hW as ac,Yi as ad,jt as ae,Pz as af,i1 as ag,hi as ah,$Y as ai,PY as aj,Wn as ak,Hh as al,Ce as am,SMt as an,et as ao,zLt as ap,St as aq,u as ar,p as as,U as at,iet as au,ft as av,sr as aw,clt as ax,Q4 as ay,Cn as az,vNe as b,os as b$,N7e as b0,pb as b1,RLt as b2,n2t as b3,$1 as b4,fb as b5,Wp as b6,Uct as b7,Va as b8,rut as b9,z$ as bA,g2t as bB,Gae as bC,W2t as bD,TVe as bE,RO as bF,qCe as bG,_1 as bH,wGe as bI,at as bJ,yC as bK,rd as bL,uYe as bM,hr as bN,__ as bO,Q_ as bP,kA as bQ,rn as bR,no as bS,OY as bT,Gi as bU,zO as bV,nf as bW,ou as bX,rr as bY,Ur as bZ,Ue as b_,MSe as ba,Xct as bb,VQe as bc,det as bd,bq as be,CEe as bf,Wct as bg,IEe as bh,EEe as bi,nut as bj,Kct as bk,zct as bl,jct as bm,S4 as bn,IQe as bo,Ep as bp,nHe as bq,sHe as br,oHe as bs,Ove as bt,eWe as bu,eet as bv,MA as bw,n5 as bx,Hn as by,Eo as bz,nnt as c,NEe as c$,ose as c0,ds as c1,QGe as c2,Mi as c3,KTe as c4,Tt as c5,bGe as c6,cS as c7,yc as c8,KJe as c9,S1 as cA,ja as cB,TA as cC,SR as cD,gX as cE,Br as cF,Hxe as cG,Zw as cH,pVe as cI,XW as cJ,JEt as cK,jSe as cL,wje as cM,Vp as cN,Oq as cO,y$ as cP,qh as cQ,MK as cR,RMt as cS,v4 as cT,PWe as cU,BCt as cV,a1e as cW,xC as cX,jEt as cY,Vw as cZ,nbe as c_,Zft as ca,fy as cb,RIt as cc,YJe as cd,Tb as ce,Jft as cf,L1e as cg,yy as ch,Mce as ci,kF as cj,WOt as ck,Sde as cl,xde as cm,Pa as cn,dOt as co,Ytt as cp,Ggt as cq,QCe as cr,fce as cs,pce as ct,hce as cu,dce as cv,pn as cw,VIt as cx,UIt as cy,jIt as cz,Zne as d,g7 as d$,LRt as d0,ll as d1,qe as d2,Yh as d3,lP as d4,R4 as d5,ec as d6,The as d7,Adt as d8,YR as d9,NAt as dA,Sxe as dB,$C as dC,ua as dD,t2t as dE,T4 as dF,gi as dG,Bd as dH,kut as dI,za as dJ,hs as dK,xr as dL,NH as dM,en as dN,Ha as dO,Fz as dP,DH as dQ,FH as dR,HSe as dS,$t as dT,BA as dU,dn as dV,EF as dW,fit as dX,cs as dY,dk as dZ,QO as d_,Ml as da,Ls as db,pt as dc,uct as dd,Km as de,cct as df,Tl as dg,_Et as dh,BEt as di,x1 as dj,lC as dk,Lt as dl,X4e as dm,XCt as dn,QCt as dp,KCt as dq,eIt as dr,tIt as ds,iIt as dt,da as du,IA as dv,kk as dw,Ott as dx,RAt as dy,li as dz,sn as e,DO as e$,EIt as e0,M2t as e1,Z2t as e2,my as e3,x_e as e4,Jh as e5,Oa as e6,ck as e7,lH as e8,aEt as e9,D2t as eA,X2t as eB,idt as eC,_st as eD,Uut as eE,Hut as eF,V4 as eG,Kut as eH,wst as eI,Wst as eJ,Zc as eK,Cp as eL,Ym as eM,Bt as eN,b3t as eO,HPt as eP,Uz as eQ,y4 as eR,udt as eS,Yz as eT,wot as eU,fi as eV,y6e as eW,bNt as eX,wRt as eY,R9 as eZ,bRt as e_,Ntt as ea,vge as eb,qst as ec,Qut as ed,un as ee,dm as ef,Oae as eg,st as eh,xdt as ei,RRt as ej,vft as ek,ui as el,In as em,Ipt as en,YA as eo,Ye as ep,oCe as eq,jk as er,uCe as es,M3t as et,IC as eu,wNt as ev,_Nt as ew,Mpt as ex,Kmt as ey,GZe as ez,Tn as f,$Ct as f$,pa as f0,q2t as f1,AVe as f2,Mh as f3,_Ct as f4,Ege as f5,Tge as f6,ZU as f7,YU as f8,dX as f9,$be as fA,z0t as fB,na as fC,XU as fD,xSe as fE,ISe as fF,kQe as fG,TSe as fH,CSe as fI,GQe as fJ,c1 as fK,Sc as fL,jCt as fM,I4e as fN,uCt as fO,Qve as fP,io as fQ,eX as fR,Cb as fS,WVe as fT,_Se as fU,Mb as fV,JQe as fW,qqe as fX,MQe as fY,ESe as fZ,net as f_,hX as fa,v6e as fb,b6e as fc,XO as fd,LA as fe,DX as ff,xMt as fg,Cbe as fh,WA as fi,lK as fj,kJe as fk,r2t as fl,Jp as fm,m4 as fn,mC as fo,mJe as fp,O1e as fq,BJe as fr,o2t as fs,mc as ft,s2t as fu,P1e as fv,XX as fw,Y4e as fx,aX as fy,JU as fz,Mn as g,WCt as g$,Hz as g0,jU as g1,VU as g2,qge as g3,_i as g4,LLt as g5,DCt as g6,Dje as g7,kue as g8,sIt as g9,Yse as gA,us as gB,t1 as gC,sct as gD,ai as gE,b1e as gF,GMt as gG,YLt as gH,HMt as gI,KO as gJ,eo as gK,KLt as gL,XD as gM,BMt as gN,eRt as gO,qMt as gP,Rp as gQ,N0t as gR,gCt as gS,vCt as gT,r4 as gU,yCt as gV,db as gW,b_ as gX,CEt as gY,zd as gZ,EEt as g_,KPt as ga,$ot as gb,_ot as gc,Vr as gd,qn as ge,jr as gf,Yo as gg,Io as gh,py as gi,Bp as gj,RQe as gk,DQe as gl,set as gm,fqe as gn,xot as go,$A as gp,r1 as gq,$l as gr,Zi as gs,wt as gt,gIt as gu,kHe as gv,CVe as gw,TIt as gx,sf as gy,Yp as gz,UU as h,UQe as h$,JCt as h0,UA as h1,En as h2,zxe as h3,Co as h4,Di as h5,bu as h6,xl as h7,hIt as h8,LE as h9,O2t as hA,vIt as hB,Eve as hC,MB as hD,w1 as hE,EE as hF,cot as hG,yi as hH,hC as hI,oy as hJ,zEt as hK,xs as hL,I3t as hM,Pv as hN,Odt as hO,GKe as hP,ECt as hQ,kKe as hR,ZQe as hS,Hse as hT,qH as hU,lX as hV,cX as hW,yn as hX,TCt as hY,Fqe as hZ,B_e as h_,Bwe as ha,fK as hb,Jst as hc,QQe as hd,AE as he,Zge as hf,$k as hg,Z5e as hh,w5e as hi,U3t as hj,X3t as hk,H3 as hl,p9 as hm,m$ as hn,KU as ho,CIt as hp,T1 as hq,L6e as hr,$6e as hs,Rbe as ht,cKe as hu,sOt as hv,zr as hw,pQ as hx,ryt as hy,G2t as hz,Ne as i,Fa as i$,H_e as i0,f6e as i1,cHe as i2,xe as i3,Gqe as i4,lHe as i5,$4 as i6,jwe as i7,oEt as i8,V3 as i9,n1 as iA,qU as iB,Hd as iC,Gut as iD,sot as iE,zut as iF,dot as iG,rdt as iH,Nae as iI,$1e as iJ,hdt as iK,slt as iL,Cot as iM,ndt as iN,W4 as iO,whe as iP,Nr as iQ,gW as iR,q4 as iS,Tut as iT,hP as iU,bot as iV,Dh as iW,Ywe as iX,C5e as iY,Kse as iZ,Ph as i_,mEt as ia,YQe as ib,FQe as ic,eut as id,k1 as ie,nue as ig,Vz as ih,T2t as ii,$2t as ij,SZe as ik,Gbe as il,Dr as im,JWe as io,qWe as ip,UWe as iq,E9 as ir,Ga as is,FHe as it,E4e as iu,Ma as iv,olt as iw,Vje as ix,nX as iy,alt as iz,pr as j,Pk as j$,Mje as j0,Hp as j1,so as j2,JA as j3,BK as j4,Eot as j5,Tot as j6,Sot as j7,tRt as j8,yLt as j9,cSe as jA,bK as jB,dq as jC,u1 as jD,DKe as jE,uSe as jF,Lce as jG,lce as jH,Gr as jI,qLe as jJ,yne as jK,Tp as jL,Jm as jM,Ge as jN,QSt as jO,Hr as jP,G as jQ,pMe as jR,TE as jS,Bw as jT,lbe as jU,EVe as jV,Bn as jW,OKe as jX,LKe as jY,lSe as jZ,mCt as j_,PMt as ja,uF as jb,IMt as jc,FEt as jd,dUe as je,xc as jf,oit as jg,MF as jh,IF as ji,MOt as jj,pu as jk,gce as jl,CF as jm,mce as jn,Tq as jo,GSe as jp,Iq as jq,LOt as jr,VE as js,OOt as jt,S_ as ju,POt as jv,ud as jw,ID as jx,uce as jy,Bkt as jz,f1 as k,Zat as k$,Eq as k0,iSe as k1,JX as k2,O$e as k3,wPt as k4,WTe as k5,zY as k6,qd as k7,fS as k8,UTe as k9,mst as kA,Mlt as kB,lot as kC,Rat as kD,Hat as kE,kz as kF,Xve as kG,dC as kH,ns as kI,Cr as kJ,gc as kK,F3t as kL,z3t as kM,XEe as kN,I8 as kO,Ta as kP,qat as kQ,Yat as kR,MTe as kS,X4 as kT,NF as kU,Sr as kV,tlt as kW,Pat as kX,Lat as kY,Nat as kZ,zat as k_,ks as ka,MRt as kb,vot as kc,GS as kd,jut as ke,zw as kf,Kl as kg,xd as kh,w3t as ki,Pge as kj,rHe as kk,tHe as kl,PQe as km,uet as kn,het as ko,VKe as kp,tj as kq,Fwe as kr,m6e as ks,x6e as kt,gy as ku,LQe as kv,SSe as kw,mz as kx,Qs as ky,LUe as kz,xPt as l,NLt as l$,Fat as l0,Uat as l1,jat as l2,Vat as l3,Bat as l4,Gat as l5,Ys as l6,q5e as l7,Da as l8,Gwe as l9,Xxt as lA,Il as lB,Kxt as lC,Vxt as lD,dlt as lE,ace as lF,KAt as lG,XAt as lH,YAt as lI,ZAt as lJ,eOt as lK,QAt as lL,JAt as lM,WAt as lN,aCt as lO,yX as lP,iVe as lQ,MVe as lR,f4 as lS,kVe as lT,EY as lU,bEt as lV,CY as lW,wEt as lX,H4e as lY,nUe as lZ,ZEt as l_,ws as la,VCt as lb,f_e as lc,oje as ld,I1t as le,yh as lf,OUe as lg,hVe as lh,Bbe as li,wkt as lj,IEt as lk,bae as ll,M1t as lm,Aht as ln,E_e as lo,GQ as lp,E5 as lq,Yn as lr,Pxt as ls,yd as lt,jxt as lu,Ty as lv,K as lw,Ss as lx,X$ as ly,nSt as lz,y1 as m,zF as m$,DLt as m0,BTe as m1,jTe as m2,Bje as m3,E3t as m4,sK as m5,A2t as m6,I2t as m7,sQe as m8,oQe as m9,gUe as mA,yUe as mB,wIt as mC,fut as mD,uEt as mE,syt as mF,JOt as mG,Ii as mH,qCt as mI,Zm as mJ,Zp as mK,nPt as mL,Oht as mM,Ahe as mN,vb as mO,jJe as mP,VJe as mQ,vNt as mR,l0e as mS,qbe as mT,yIt as mU,W1e as mV,_K as mW,Hwe as mX,GCt as mY,FLt as mZ,Hst as m_,Bhe as ma,$Se as mb,FXe as mc,gEt as md,vEt as me,yEt as mf,xje as mg,Sy as mh,_ge as mi,$ge as mj,Q6e as mk,oVe as ml,HO as mm,dIt as mn,NKe as mo,sse as mp,qAt as mq,YF as mr,TH as ms,xY as mt,i7e as mu,xIt as mv,RY as mw,tCt as mx,eCt as my,rqe as mz,_ne as n,iQe as n$,P4 as n0,kCt as n1,MCt as n2,Nxe as n3,Rxe as n4,yXe as n5,vXe as n6,gZ as n7,oa as n8,Gxt as n9,dK as nA,cq as nB,Oxe as nC,nP as nD,iRt as nE,Bv as nF,Eit as nG,k1t as nH,Iit as nI,Mit as nJ,yZ as nK,gu as nL,Azt as nM,Rd as nN,bk as nO,Jat as nP,JMt as nQ,rlt as nR,PLt as nS,OLt as nT,Fk as nU,Gv as nV,RA as nW,tdt as nX,ELt as nY,Wt as nZ,dNt as n_,t2e as na,V1e as nb,rK as nc,M4 as nd,Lxt as ne,vfe as nf,E0 as ng,Sge as nh,dEt as ni,yce as nj,ROt as nk,Tce as nl,DOt as nm,Hi as nn,FDt as no,Ip as np,T$ as nq,kDt as nr,MDt as ns,nCt as nt,L4 as nu,ly as nv,Dp as nw,ia as nx,B2 as ny,mOt as nz,IPt as o,E2t as o$,nOt as o0,Wtt as o1,kce as o2,BAt as o3,nit as o4,aZe as o5,Wqe as o6,zqe as o7,Uqe as o8,NM as o9,tX as oA,RCt as oB,Ibe as oC,Ase as oD,dbe as oE,Kit as oF,qLt as oG,C1 as oH,Wh as oI,Qlt as oJ,CCt as oK,mzt as oL,fzt as oM,bzt as oN,uzt as oO,pzt as oP,lzt as oQ,hzt as oR,dzt as oS,wzt as oT,gzt as oU,tzt as oV,vzt as oW,azt as oX,ozt as oY,czt as oZ,C2t as o_,Na as oa,Sm as ob,yv as oc,Rs as od,WZe as oe,hQe as of,put as og,Y$ as oh,mut as oi,sP as oj,SXe as ok,zwe as ol,hut as om,yut as on,RHe as oo,pIt as op,dVe as oq,gVe as or,eP as os,tP as ot,iP as ou,Bqe as ov,jqe as ow,Vqe as ox,xge as oy,ebe as oz,qp as p,aOt as p$,KY as p0,iWe as p1,Qqe as p2,jQe as p3,Kqe as p4,CZe as p5,PKe as p6,xCt as p7,Lit as p8,cbe as p9,uot as pA,Out as pB,But as pC,_4 as pD,Lx as pE,b5e as pF,vce as pG,av as pH,Xit as pI,IOt as pJ,cce as pK,sit as pL,Sce as pM,xce as pN,Sl as pO,RKe as pP,Z4e as pQ,eNt as pR,t4 as pS,i4 as pT,tNt as pU,TF as pV,QDt as pW,Zbe as pX,mNt as pY,Jtt as pZ,oOt as p_,IE as pa,fC as pb,NCt as pc,M9 as pd,GO as pe,__e as pf,A3t as pg,$kt as ph,Skt as pi,UXe as pj,Kgt as pk,BDt as pl,SK as pm,lNt as pn,Sat as po,xat as pp,UK as pq,Fot as pr,S3t as ps,HCt as pt,ZX as pu,Im as pv,RE as pw,Gst as px,oot as py,aot as pz,Tx as q,rSe as q$,fNt as q0,uu as q1,vLt as q2,bLt as q3,gLt as q4,_Q as q5,zKe as q6,aNt as q7,k3t as q8,A1 as q9,rzt as qA,Szt as qB,izt as qC,jMe as qD,$zt as qE,xzt as qF,_zt as qG,ZQ as qH,nzt as qI,yzt as qJ,szt as qK,H3t as qL,q3t as qM,Jw as qN,Rv as qO,G3t as qP,AX as qQ,VEt as qR,B3t as qS,V3t as qT,ov as qU,pEt as qV,tSe as qW,Vrt as qX,$s as qY,N4 as qZ,eSe as q_,_pt as qa,KI as qb,Cd as qc,_Mt as qd,pNt as qe,hNt as qf,uNt as qg,cNt as qh,rNt as qi,bQ as qj,y3 as qk,fIe as ql,nNt as qm,iNt as qn,Ra as qo,Cmt as qp,oNt as qq,lyt as qr,tDt as qs,oLt as qt,x7e as qu,H1e as qv,aLt as qw,akt as qx,lkt as qy,ckt as qz,QPe as r,Xm as r$,mKe as r0,Gkt as r1,SKe as r2,Hkt as r3,CC as r4,Yr as r5,Rot as r6,Lot as r7,Ci as r8,uv as r9,jXe as rA,_kt as rB,o8 as rC,zMt as rD,dF as rE,zXe as rF,ret as rG,EXe as rH,jz as rI,nIt as rJ,hct as rK,WMt as rL,Llt as rM,bct as rN,aRt as rO,vy as rP,by as rQ,_u as rR,yb as rS,$gt as rT,SOt as rU,Nbe as rV,NXe as rW,CXe as rX,IXe as rY,mIt as rZ,oIt as r_,oft as ra,Kot as rb,aft as rc,TTe as rd,Td as re,C$ as rf,kd as rg,Pqe as rh,NMt as ri,rj,$o as rk,_l as rl,Ks as rm,Zse as rn,PZe as ro,zZe as rp,Y2t as rq,iyt as rr,hUe as rs,MEt as rt,HCe as ru,JCe as rv,O1 as rw,Ib as rx,HY as ry,$Xe as rz,Q as s,Ihe as s$,Aa as s0,yMt as s1,$Et as s2,BXe as s3,Zh as s4,Rce as s5,KSe as s6,bOt as s7,wOt as s8,_Ot as s9,pRt as sA,eit as sB,Qtt as sC,FSe as sD,aIe as sE,WDt as sF,JDt as sG,USe as sH,$de as sI,fQ as sJ,oP as sK,bb as sL,VH as sM,DIt as sN,aIt as sO,xkt as sP,YCt as sQ,ZCt as sR,O6e as sS,E$ as sT,$xe as sU,pUe as sV,U4 as sW,lrt as sX,CMt as sY,Ds as sZ,H4 as s_,xOt as sa,lOt as sb,uOt as sc,G4e as sd,jA as se,cOt as sf,Cit as sg,P6e as sh,Np as si,eKe as sj,hK as sk,mVe as sl,fIt as sm,FA as sn,ove as so,wle as sp,pXe as sq,fXe as sr,Agt as ss,Tpe as st,kgt as su,dyt as sv,QU as sw,sNt as sx,GF as sy,VSe as sz,ne as t,lRt as t$,vRt as t0,VAt as t1,PJ as t2,qDt as t3,lw as t4,jRt as t5,tot as t6,z9 as t7,XWe as t8,ILt as t9,fEe as tA,ej as tB,hRt as tC,UDt as tD,dRt as tE,qt as tF,Rct as tG,kct as tH,uRt as tI,WF as tJ,zk as tK,qF as tL,gEe as tM,yEe as tN,Qmt as tO,Cct as tP,Ect as tQ,nJ as tR,fOt as tS,Mct as tT,dP as tU,Ktt as tV,jDt as tW,Oct as tX,VDt as tY,pOt as tZ,GDt as t_,MJe as ta,YMt as tb,QMt as tc,XMt as td,e2t as te,KMt as tf,i2t as tg,Ba as th,HOt as ti,MLt as tj,Kne as tk,ZMt as tl,BMe as tm,j6e as tn,U6e as to,lIt as tp,zUe as tq,Tve as tr,fRt as ts,KW as tt,mRt as tu,cRt as tv,Jn as tw,Pct as tx,KEe as ty,oRt as tz,_Pt as u,$3t as u$,Jgt as u0,Wgt as u1,nIe as u2,hit as u3,kvt as u4,hOt as u5,Oce as u6,GAt as u7,HAt as u8,eyt as u9,f$e as uA,DA as uB,zA as uC,jE as uD,tZe as uE,xEt as uF,mv as uG,yTe as uH,eSt as uI,Uzt as uJ,jzt as uK,$K as uL,Ife as uM,j3t as uN,Vzt as uO,Oxt as uP,hHe as uQ,OXe as uR,$It as uS,Ikt as uT,lWe as uU,Dxe as uV,Lwe as uW,tve as uX,iCt as uY,aWe as uZ,T3t as u_,Ymt as ua,yOt as ub,gOt as uc,$Ot as ud,TOt as ue,tOt as uf,EOt as ug,COt as uh,qtt as ui,tit as uj,Ztt as uk,u$e as ul,CE as um,vOt as un,B0t as uo,Dtt as up,FCt as uq,FKe as ur,Xhe as us,smt as ut,QJe as uu,ePt as uv,tPt as uw,hN as ux,QX as uy,iZe as uz,yt as v,rkt as v$,Fht as v0,OIt as v1,fct as v2,Vtt as v3,pX as v4,SIt as v5,FM as v6,WPt as v7,lBe as v8,xLt as v9,gWe as vA,Pwe as vB,kEe as vC,eJe as vD,nWe as vE,yWe as vF,TEe as vG,MMt as vH,RXe as vI,Zqe as vJ,qSe as vK,Rh as vL,Vkt as vM,JLt as vN,ZLt as vO,XLt as vP,jF as vQ,YEt as vR,XPt as vS,KYe as vT,Rkt as vU,Xot as vV,J2t as vW,R2t as vX,F2t as vY,N2t as vZ,SEt as v_,_Lt as va,oce as vb,x3t as vc,qOt as vd,BOt as ve,GOt as vf,VOt as vg,jOt as vh,$it as vi,XSe as vj,rOt as vk,iOt as vl,_it as vm,F8 as vn,zgt as vo,jAt as vp,A$ as vq,Wje as vr,x5e as vs,cet as vt,kOt as vu,AOt as vv,V2t as vw,B2t as vx,BKe as vy,vWe as vz,nt as w,D3t as w$,ikt as w0,fEt as w1,K9e as w2,P2t as w3,bIt as w4,H2t as w5,BE as w6,u7e as w7,dQe as w8,ySe as w9,cEt as wA,v5e as wB,lEt as wC,L2t as wD,NOt as wE,SCt as wF,wXe as wG,$Ze as wH,Y3t as wI,WO as wJ,P3t as wK,bJ as wL,u4 as wM,OMt as wN,L3t as wO,R3t as wP,U2t as wQ,AMt as wR,ile as wS,kMt as wT,_It as wU,tle as wV,LX as wW,Lge as wX,TEt as wY,j2t as wZ,Hqe as w_,rCt as wa,jR as wb,eae as wc,LMt as wd,_d as we,wLt as wf,To as wg,WEe as wh,C3t as wi,WW as wj,Ozt as wk,Dkt as wl,cF as wm,z2t as wn,Rqe as wo,k2t as wp,Jpt as wq,sRt as wr,ZEe as ws,w$ as wt,TZe as wu,w2t as wv,PTe as ww,ECe as wx,CCe as wy,Iat as wz,gMt as x,O3t as x0,nj as x1,ele as x2,N3t as x3,rWe as x4,qTt as x5,qZ as x6,WZ as x7,kNe as x8,YTt as x9,XTt as xa,KTt as xb,QTt as xc,eEt as xd,Jze as xe,OO as xf,dY as xg,BIt as xh,HIt as xi,ZOt as xj,M1 as xk,CLt as xl,_dt as xm,xNt as xn,Zvt as xo,$Nt as xp,x0t as xq,BNt as xr,wwt as xs,Swt as xt,LMe as xu,KNt as xv,h_t as xw,Kzt as xx,q as y,FG as z};
