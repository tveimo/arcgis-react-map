import{fY as O,bc as v,be as C,aP as i,fU as L,ba as N,fG as y,fH as U,fJ as G,du as J,fE as h,au as X}from"./index-cGsjYgnw.js";import{r as Y,c as f,a as d}from"./vectorStacks-CGdefod2.js";function tn(n){const r=n[0]*n[0]+n[4]*n[4]+n[8]*n[8],t=n[1]*n[1]+n[5]*n[5]+n[9]*n[9],u=n[2]*n[2]+n[6]*n[6]+n[10]*n[10];return Math.sqrt(Math.max(r,t,u))}function un(n,r){const t=Math.sqrt(r[0]*r[0]+r[4]*r[4]+r[8]*r[8]),u=Math.sqrt(r[1]*r[1]+r[5]*r[5]+r[9]*r[9]),e=Math.sqrt(r[2]*r[2]+r[6]*r[6]+r[10]*r[10]);return O(n,t,u,e),n}function k(n,r,t){Math.abs(n[0])>Math.abs(n[1])?O(r,0,1,0):O(r,1,0,0),v(t,n,r),v(r,t,n),C(t,t),C(r,r)}function en(n,r,t,u=i()){const e=L(n),c=L(r),o=N(n,r)/(e*c);if(o<.9999999999999999){const I=Math.acos(o),E=((1-t)*e+t*c)/Math.sin(I),S=E/e*Math.sin((1-t)*I),T=E/c*Math.sin(t*I);return U(p,n,S),U(x,r,T),y(u,p,x)}return G(u,n,r,t)}const p=i(),x=i();function j(n=D){return[n[0],n[1],n[2],n[3]]}function In(n=D[0],r=D[1],t=D[2],u=D[3]){return H(n,r,t,u,Y.get())}function w(n,r){return H(r[0],r[1],r[2],r[3],n)}function on(n){return n}function H(n,r,t,u,e=j()){return e[0]=n,e[1]=r,e[2]=t,e[3]=u,e}function z(n,r,t){const u=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],e=Math.abs(u-1)>1e-5&&u>1e-12?1/Math.sqrt(u):1;return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=-(t[0]*n[0]+t[1]*n[1]+t[2]*n[2]),t}function K(n,r,t,u=j()){const e=t[0]-r[0],c=t[1]-r[1],o=t[2]-r[2],I=n[0]-r[0],E=n[1]-r[1],S=n[2]-r[2],T=c*S-o*E,R=o*I-e*S,q=e*E-c*I,m=T*T+R*R+q*q,P=Math.abs(m-1)>1e-5&&m>1e-12?1/Math.sqrt(m):1;return u[0]=T*P,u[1]=R*P,u[2]=q*P,u[3]=-(u[0]*n[0]+u[1]*n[1]+u[2]*n[2]),u}function B(n,r,t,u=0,e=Math.floor(t*(1/3)),c=Math.floor(t*(2/3))){if(t<3)return!1;r(g,u);let o=e,I=!1;for(;o<t-1&&!I;)r(_,o),o++,I=!X(g,_);if(!I)return!1;for(o=Math.max(o,c),I=!1;o<t&&!I;)r(M,o),o++,h(l,g,_),C(l,l),h(A,_,M),C(A,A),I=!X(g,M)&&!X(_,M)&&Math.abs(N(l,A))<Q;return I?(K(g,_,M,n),!0):(u!==0||e!==1||c!==2)&&B(n,r,t,0,1,2)}function cn(n,r,t=!0){const u=r.length/3;return B(n,(e,c)=>O(e,r[3*c+0],r[3*c+1],r[3*c+2]),t?u-1:u)}const Q=.99619469809,g=i(),_=i(),M=i(),l=i(),A=i();function an(n,r,t){return r!==n&&w(n,r),n[3]=-N(n,t),n}function sn(n,r){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=-n[3],r}function fn(n,r,t,u){return v(M,r,n),z(t,M,u)}function Nn(n,r,t,u){return b(F(n,r,h(f.get(),t,r),W,u))}function En(n,r,t){return r!=null&&b(F(n,r.origin,r.direction,Z,t))}function Tn(n,r,t){return b(F(n,r.origin,r.vector,s.NONE,t))}function Mn(n,r,t){return b(F(n,r.origin,r.vector,s.CLAMP,t))}function Sn(n,r){return $(n,r)>=0}function _n(n,r){const t=N(n,r.ray.direction),u=-$(n,r.ray.origin);if(u<0&&t>=0)return!1;if(t>-1e-6&&t<1e-6)return u>0;if((u<0||t<0)&&!(u<0&&t<0))return!0;const e=u/t;return t>0?e<r.c1&&(r.c1=e):e>r.c0&&(r.c0=e),r.c0<=r.c1}function hn(n,r){const t=N(n,r.ray.direction),u=-$(n,r.ray.origin);if(t>-1e-6&&t<1e-6)return u>0;const e=u/t;return t>0?e<r.c1&&(r.c1=e):e>r.c0&&(r.c0=e),r.c0<=r.c1}function gn(n,r,t){const u=U(f.get(),n,-n[3]),e=V(n,h(f.get(),r,u),f.get());return y(t,e,u),t}function Dn(n,r,t,u){const e=n,c=f.get(),o=f.get();k(e,c,o);const I=h(f.get(),t,r),E=d(c,I),S=d(o,I),T=d(e,I);return O(u,E,S,T)}function V(n,r,t){const u=U(f.get(),n,N(n,r));return h(t,r,u),t}function On(n,r){return Math.abs($(n,r))}function $(n,r){return N(n,r)+n[3]}var a;function b(n){return n===a.INTERSECTS_INSIDE_OUT||n===a.INTERSECTS_OUTSIDE_IN}function F(n,r,t,u,e){const c=N(n,t),o=$(n,r);if(c===0)return o>=0?a.INSIDE:a.OUTSIDE;let I=-o/c;return u&s.CLAMP&&(I=J(I,0,1)),!(u&s.INFINITE_MIN)&&I<0||!(u&s.INFINITE_MAX)&&I>1?o>=0?a.INSIDE:a.OUTSIDE:(y(e,r,U(e,t,I)),o>=0?a.INTERSECTS_INSIDE_OUT:a.INTERSECTS_OUTSIDE_IN)}(function(n){n[n.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",n[n.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",n[n.INSIDE=2]="INSIDE",n[n.OUTSIDE=3]="OUTSIDE"})(a||(a={}));const D=[0,0,1,0];var s;(function(n){n[n.NONE=0]="NONE",n[n.CLAMP=1]="CLAMP",n[n.INFINITE_MIN=4]="INFINITE_MIN",n[n.INFINITE_MAX=8]="INFINITE_MAX"})(s||(s={}));const W=s.INFINITE_MIN|s.INFINITE_MAX,Z=s.INFINITE_MAX;export{cn as A,_n as B,In as D,hn as G,gn as H,Dn as J,sn as L,j as M,on as O,fn as P,On as Q,H as U,$ as V,a as W,F as Z,k as a,un as g,w as h,en as j,Nn as k,z as l,tn as m,K as p,En as q,s as t,B as v,Mn as w,Tn as x,an as y,Sn as z};
