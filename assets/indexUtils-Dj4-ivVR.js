import{f6 as E,md as d,me as m,mf as y,mg as A,mh as _,aw as S,a6 as N,lS as B,s as p,al as M,jy as c,mi as O}from"./index-cGsjYgnw.js";import{f as T,A as h}from"./Indices-opzc5tkG.js";function G(e,t){I(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function I(e,t,o=2,r=o){const a=t.length/2;let n=0,f=0;if(!E(t)||d(t)){for(let s=0;s<a;++s)e[n]=t[f],e[n+1]=t[f+1],n+=o,f+=r;return}const u=m(t);if(y(t))for(let s=0;s<a;++s)e[n]=Math.max(t[f]/u,-1),e[n+1]=Math.max(t[f+1]/u,-1),n+=o,f+=r;else for(let s=0;s<a;++s)e[n]=t[f]/u,e[n+1]=t[f+1]/u,n+=o,f+=r}function R(e,t,o,r){const a=e.typedBuffer,n=e.typedBufferStride,f=(r==null?void 0:r.count)??e.count;let u=((r==null?void 0:r.dstIndex)??0)*n;for(let s=0;s<f;++s)a[u]=t,a[u+1]=o,u+=n}Object.freeze(Object.defineProperty({__proto__:null,fill:R,normalizeIntegerBuffer:I,normalizeIntegerBufferView:G},Symbol.toStringTag,{value:"Module"}));var l,i;(function(e){e[e.ELEVATION=0]="ELEVATION",e[e.BASEMAP=1]="BASEMAP",e[e.I3S_INDEX=2]="I3S_INDEX",e[e.I3S_DATA=3]="I3S_DATA",e[e.SYMBOLOGY=4]="SYMBOLOGY"})(l||(l={})),function(e){e[e.JSON=0]="JSON",e[e.BINARY=1]="BINARY",e[e.IMAGE=2]="IMAGE",e[e.IMAGE_AND_TYPE=3]="IMAGE_AND_TYPE"}(i||(i={}));(()=>{const e=new Array;return e[l.ELEVATION]=10,e[l.BASEMAP]=10,e[l.I3S_INDEX]=10,e[l.I3S_DATA]=10,e[l.SYMBOLOGY]=5,e})();let P=class{constructor(t){this._streamDataRequester=t}async loadJSON(t,o){return this._load(i.JSON,t,o)}async loadBinary(t,o){return _(t)?(S(o),A(t)):this._load(i.BINARY,t,o)}async loadImage(t,o){return this._load(i.IMAGE,t,o)}async _load(t,o,r){if(this._streamDataRequester==null)return(await N(o,{responseType:Y[t]})).data;const a=await B(this._streamDataRequester.request(o,t,r));if(a.ok===!0)return a.value;throw M(a.error),new p("glt-loader-request-error",`Request for resource failed: ${a.error}`)}};const Y={[i.IMAGE]:"image",[i.BINARY]:"array-buffer",[i.JSON]:"json",[i.IMAGE_AND_TYPE]:void 0};function q(e,t){switch(t){case c.TRIANGLES:return w(e);case c.TRIANGLE_STRIP:return D(e);case c.TRIANGLE_FAN:return g(e)}}function w(e){return typeof e=="number"?h(e):O(e)?new Uint16Array(e):e}function D(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const o=t-2,r=T(3*o);if(typeof e=="number"){let a=0;for(let n=0;n<o;n+=1)n%2==0?(r[a++]=n,r[a++]=n+1,r[a++]=n+2):(r[a++]=n+1,r[a++]=n,r[a++]=n+2)}else{let a=0;for(let n=0;n<o;n+=1)n%2==0?(r[a++]=e[n],r[a++]=e[n+1],r[a++]=e[n+2]):(r[a++]=e[n+1],r[a++]=e[n],r[a++]=e[n+2])}return r}function g(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const o=t-2,r=o<=65536?new Uint16Array(3*o):new Uint32Array(3*o);if(typeof e=="number"){let u=0;for(let s=0;s<o;++s)r[u++]=0,r[u++]=s+1,r[u++]=s+2;return r}const a=e[0];let n=e[1],f=0;for(let u=0;u<o;++u){const s=e[u+2];r[f++]=a,r[f++]=n,r[f++]=s,n=s}return r}export{i as E,G as a,R as l,I as n,q as o,P as u};
