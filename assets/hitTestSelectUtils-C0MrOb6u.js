import{eh as lt,ar as c,as as p,at as K,cw as se,dm as bn,ry as mn,au as m,az as ie,aP as d,h2 as j,rz as Nn,rA as Ln,bo as oe,fY as D,aR as kt,aO as Oe,ep as St,a3 as En,e6 as xn,rB as xe,gZ as wn,fI as Qt,rC as An,aq as Tn,hg as Mn,rD as Rn,mB as _n,h1 as A,n5 as F,nC as zn,rE as Ie,n3 as ft,n4 as ot,nD as kn,pO as Sn,b8 as bt,gm as R,ba as M,ic as x,bc as Pt,ko as Xt,aS as at,nA as Pn,fE as ae,fZ as gt,oj as zt,n6 as jn,jW as qe,rF as On,rG as In,L as qn,jb as He,h as Hn,bs as Bn,fF as Dn,b7 as Vn,kq as Un,bk as Zn,be as Fn,lY as Cn,rH as we,cy as Yn,b6 as Be,i1 as Gn,b5 as Wn,hU as Jn,rI as Qn,rJ as De,g9 as Xn}from"./index-BU6th8yW.js";import{m as ue,o as mt,a as Nt}from"./quantityUtils-Do-VJiXx.js";import{n as st,a as Ve,e as Bt}from"./projectVectorToVector-DaahQhzn.js";import{N as Kt,q as le,b as ce,j as jt,y as Ue}from"./geodesicUtils-CwzTC0Gw.js";import{l as Dt,M as O,Q as te,a as Ze,k as Fe,z as Kn,p as tr,V as er,H as Ce,O as Ye}from"./plane-kR2m4PCN.js";import{I as nr,O as rr,_ as sr,$ as ir,U as or}from"./sphere-D5EejnPf.js";import{m as ar,x as ur,E as lr,j as pe}from"./elevationInfoUtils-B4rQxazr.js";import{c as cr,a as pr}from"./spatialReferenceEllipsoidUtils-CizOwgsh.js";let vt=class extends lt{constructor(t){super(t),this.enabled=!1}};c([p({type:Boolean,nonNullable:!0})],vt.prototype,"enabled",void 0),vt=c([K("esri.views.interactive.sketch.SketchLabelOptions")],vt);let $t=class extends lt{constructor(t){super(t),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};c([p({type:String,nonNullable:!0})],$t.prototype,"mode",void 0),$t=c([K("esri.views.interactive.sketch.SketchTooltipElevationOptions")],$t);let L=class extends lt{constructor(t){super(t),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};c([p({type:Boolean,nonNullable:!0})],L.prototype,"area",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"coordinates",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"direction",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"distance",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"elevation",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"header",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"helpMessage",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"orientation",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"radius",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"rotation",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"scale",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"size",void 0),c([p({type:Boolean,nonNullable:!0})],L.prototype,"totalLength",void 0),L=c([K("esri.views.interactive.sketch.SketchTooltipVisibleElements")],L);let E=class extends lt{constructor(t){super(t),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new $t,this.placement="auto",this.offset=null,this.visibleElements=new L,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};c([p({type:Boolean,nonNullable:!0})],E.prototype,"enabled",void 0),c([p()],E.prototype,"forceEnabled",void 0),c([p()],E.prototype,"effectiveEnabled",null),c([p()],E.prototype,"helpMessage",void 0),c([p()],E.prototype,"helpMessageIcon",void 0),c([p({type:Boolean,nonNullable:!0})],E.prototype,"inputEnabled",void 0),c([p({type:$t,nonNullable:!0})],E.prototype,"elevation",void 0),c([p()],E.prototype,"placement",void 0),c([p()],E.prototype,"offset",void 0),c([p({type:L,nonNullable:!0})],E.prototype,"visibleElements",void 0),c([p()],E.prototype,"visualVariables",void 0),c([p()],E.prototype,"xyMode",void 0),E=c([K("esri.views.interactive.sketch.SketchTooltipOptions")],E);let X=class extends lt{constructor(t){super(t),this.length=null,this.verticalLength=null,this.area=null}};c([p()],X.prototype,"length",void 0),c([p()],X.prototype,"verticalLength",void 0),c([p()],X.prototype,"area",void 0),X=c([K("esri.views.interactive.sketch.Units")],X);var T;function hr(e,t){if(e==null||t==null)return;const n=ee(e,t);return n!=null?mt(n,"radians","geographic"):void 0}(function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"})(T||(T={}));const ee=(()=>{const e=d(),t=d();return(n,r)=>(D(e,n.x,n.y,n.z??0),D(t,r.x,r.y,r.z??0),fr(e,t,n.spatialReference,r.spatialReference))})(),fr=(()=>{const e=j(),t=d(),n=d();return(r,s,i,o)=>{if(m(r,s))return;const a=Kt(i),u=Kt(o);if(a&&u&&ie(a,u)&&st(r,i,t,a)&&st(s,o,n,u)){const{azimuth:h}=le(yr,t,n,a);return h!=null?se(h,"degrees","radians"):void 0}e[0]=s[0]-r[0],e[1]=s[1]-r[1];let l=Nn(Ln,e);return e[0]<0&&(l=gr-l),l}})();function As(e,t,n,r=T.Absolute){if(t&&n)switch(r){case T.Absolute:return hr(t,n);case T.Relative:return Te(Ae(e,t,n),T.Relative);case T.RelativeBilateral:return Te(Ae(e,t,n),T.RelativeBilateral)}}function Ae(e,t,n){if(!e||!t||!n)return;const r=ee(e,t),s=ee(t,n);return r!=null&&s!=null?mt(s-r,"radians","geographic"):void 0}function Te(e,t){if(e!=null)switch(t){case T.Absolute:return dr(e);case T.Relative:{const n=Ot(e);let r=Me.normalize(n,0,!0);return r===-180&&(r=180),mt(r,"degrees","geographic")}case T.RelativeBilateral:{const n=Ot(e),r=Math.abs(Me.normalize(n,0,!0));return mt(r,"degrees","geographic")}}}function dr(e){const t=Ot(e),n=vr.normalize(t,0,!0);return mt(n,"degrees","geographic")}const Ts=(()=>{const e=d();return(t,n,r,s,i,o="geodesic")=>{oe(e,n);const a=Ot(i);if(o==="geodesic"){const y=Kt(r);if(y&&st(e,r,e,y))return jt(t,e,a,s,y),t[2]=n[2],!!st(t,y,t,r)}const u=ue(a,"geographic","arithmetic"),l=se(u,"degrees","radians"),h=n[0]+s*Math.cos(l),f=n[1]+s*Math.sin(l),b=n[2];return D(t,h,f,b),!0}})();function Ot(e){if(e!=null)return ue(Ge(e),e.rotationType,"geographic")}function Ms(e){if(e!=null)return ue(Ge(e),e.rotationType,"arithmetic")}function Ge(e){return se(e.value,e.unit,"degrees")}const yr=new ce,gr=2*Math.PI,vr=bn,Me=new mn(-180,180);let Q=class extends lt{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?T.RelativeBilateral:T.Relative;case"absolute":return T.Absolute}}get displayUnits(){return this._get("displayUnits")??new X}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new X}set inputUnits(e){this._set("inputUnits",e)}};c([p({type:String,nonNullable:!0})],Q.prototype,"directionMode",void 0),c([p({type:Boolean,nonNullable:!0})],Q.prototype,"relativeDirectionIsBilateral",void 0),c([p()],Q.prototype,"effectiveDirectionMode",null),c([p({type:X,nonNullable:!0})],Q.prototype,"displayUnits",null),c([p({type:X,nonNullable:!0})],Q.prototype,"inputUnits",null),Q=c([K("esri.views.interactive.sketch.SketchValueOptions")],Q);let dt=class extends lt{constructor(t){super(t),this.labels=new vt,this.tooltips=new E,this.values=new Q}};c([p({nonNullable:!0,type:vt})],dt.prototype,"labels",void 0),c([p({nonNullable:!0,type:E})],dt.prototype,"tooltips",void 0),c([p({nonNullable:!0,type:Q})],dt.prototype,"values",void 0),dt=c([K("esri.views.interactive.sketch.SketchOptions")],dt);var ut;function We(e,t,n){return z(e,t,n)}function z(e=0,t=0,n=0){return kt(e,t,n)}function _s(e){return e}function zs(e){return e}function nt(e,t,n){return kt(e,t,n)}function ct(e){const[t,n,r]=e;return e.length>3?[t,n,r,e[3]]:[t,n,r]}function ks(e){return e[3]=((e.length>3?e[3]:void 0)??ut.NONE)|ut.TARGET,e}function Ss(e){return!!(((e.length>3?e[3]:void 0)??ut.NONE)&ut.TARGET)}function Re(e,t,{coordinateHelper:n,elevationInfo:r},s){return e?$r(n.vectorToDehydratedPoint(e,br),t,r,s):null}function $r(e,t,n,r=z()){return r[0]=e.x,r[1]=e.y,r[2]=e.z??0,t==null||(t.type==="2d"?r[2]=0:r[2]=ar(t,e,n,pe)??0),r}function Ps(e,t,n){return n?(Ve(n,e[0],e[1],e[2],t),n):Bt(e[0],e[1],e[2],t)}function js(e,t,{z:n,m:r},s,i){const{spatialReference:o,elevationInfo:a}=s;let u;n==null&&r==null?u=void 0:t==null||t.type==="2d"?u=n??void 0:u=ur(t,e,o,pe,a)??0;const[l,h]=e;return i?Ve(i,l,h,u,o):i=Bt(l,h,u,o),r!=null&&(i.m=r,i.hasM=!0),i}function Os(e,t,n,r,s=z()){const[i,o]=e;return s[0]=i,s[1]=o,e.length>3&&(s[3]=e[3]??ut.NONE),(n==null?void 0:n.type)!=="3d"?(s[2]=t.value,s):(s[2]=lr(n,i,o,t.value,r,t.elevationInfo,pe)??0,s)}(function(e){e[e.NONE=0]="NONE",e[e.TARGET=1]="TARGET"})(ut||(ut={}));const br=Bt(0,0,0,null);let H=class extends Oe{constructor(){super(...arguments),this.enabled=!0}};c([p({type:Boolean})],H.prototype,"enabled",void 0),H=c([K("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],H);let v=class extends Oe{constructor(t){super(t),this.lineSnapper=new H,this.parallelLineSnapper=new H,this.rightAngleSnapper=new H,this.rightAngleTriangleSnapper=new H,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new St([255,127,0]),this.orangeTransparent=new St([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};c([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"lineSnapper",void 0),c([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"parallelLineSnapper",void 0),c([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"rightAngleSnapper",void 0),c([p({type:H,constructOnly:!0,nonNullable:!0,json:{write:!0}})],v.prototype,"rightAngleTriangleSnapper",void 0),c([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],v.prototype,"shortLineThreshold",void 0),c([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],v.prototype,"distance",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],v.prototype,"pointThreshold",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],v.prototype,"intersectionParallelLineThreshold",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],v.prototype,"parallelLineThreshold",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],v.prototype,"verticalLineThresholdMeters",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"touchSensitivityMultiplier",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],v.prototype,"pointOnLineThreshold",void 0),c([p({type:St,nonNullable:!0})],v.prototype,"orange",void 0),c([p({type:St,nonNullable:!0})],v.prototype,"orangeTransparent",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"lineHintWidthReference",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"lineHintWidthTarget",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],v.prototype,"lineHintFadedExtensions",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],v.prototype,"parallelLineHintWidth",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],v.prototype,"parallelLineHintLength",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],v.prototype,"parallelLineHintOffset",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],v.prototype,"rightAngleHintSize",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],v.prototype,"rightAngleHintOutlineSize",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],v.prototype,"satisfiesConstraintScreenThreshold",void 0),v=c([K("esri.views.interactive.snapping.Settings.Defaults")],v);const Hs=new v;var pt;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(pt||(pt={}));const Bs=Symbol("grid-placement-graphic");function mr(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Ds(e,t){return Math.sqrt(mr(e,t))}function Vs(e,t){t.sort((n,r)=>Qt(n.targetPoint,e)-Qt(r.targetPoint,e))}var _e;function Us({parameters:{point:e,distance:t,returnEdge:n,vertexMode:r,coordinateHelper:{spatialReference:s},filter:i},mode:o,returnZ:a,filter:u}){const l=(u==null?void 0:u.clone())??new Tn({where:"1=1"});return l.returnZ=a??o==="3d",i&&(l.geometry=i.geometry,l.distance=i.distance,l.spatialRelationship=i.spatialRelationship,l.where=Mn(l.where,i.where),l.timeExtent=Rn(l.timeExtent,i.timeExtent),l.objectIds=Nr(l.objectIds,i.objectIds)),{point:Bt(e[0],e[1],e[2],s.toJSON()),mode:o,distance:t,returnEdge:n,vertexMode:r,query:l.toJSON()}}function Nr(e,t){return e||t?t?e?Array.from(_n(new Set(e),new Set(t))):t:e:null}function Zs(e,t,n){return{left:Re(e.leftVertex.pos,t,n),right:Re(e.rightVertex.pos,t,n)}}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(_e||(_e={}));const ze=Symbol("snapping-toggle");function Fs(e,t=()=>{}){const n=En(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:r,snappingOptions:s})=>{if(e.removeHandles(ze),!r||!s)return;const i=wn.TOOL,o=[r.on("key-down",a=>{a.key!==xe.toggle||a.repeat||(s.enabledToggled=!0,t())},i),r.on("key-up",a=>{a.key===xe.toggle&&(s.enabledToggled=!1,t())},i),r.on("pointer-move",a=>{const u=a.native.ctrlKey;s.enabledToggled!==u&&(s.enabledToggled=u,t())},i)];e.addHandles(o,ze)},xn);e.addHandles(n)}function Cs(e){var t;return An(e)&&"utilityNetworks"in e&&!!((t=e.utilityNetworks)!=null&&t.length)}function Yt(e,t){return e[0]*t[1]-e[1]*t[0]}function Lr(e,t,n){const r=ft(n,t)/ot(n);return kn(e,n,r)}function Ys(e,t,n,r,s=n){return A(it,r,n),A(It,t,s),Lr(ht,It,it),zn(e,s,ht)}function Gs(e,t,n,r){A(it,t,n);const s=r/Ie(it);return F(e,n,it,s)}function Ws(e,t){const n=e.start,r=e.end,s=t.start,i=t.end,o=A(it,r,n),a=A(Je,i,s),u=Yt(o,a);if(Math.abs(u)<=xr)return[];const l=A(It,n,s),h=Yt(a,l)/u,f=Yt(o,l)/u;if(h>=0){if(f>=0||t.type===$.LINE)return[F(ht,n,o,h)]}else if(e.type===$.LINE&&(f>=0||t.type===$.LINE))return[F(ht,n,o,h)];return[]}function Er(e,t,n){const r=[],s=A(it,e.end,e.start),i=A(Je,e.start,t),o=ot(s),a=2*ft(s,i),u=a*a-4*o*(ot(i)-n*n);if(u===0){const l=-a/(2*o);(e.type===$.LINE||l>=0)&&r.push(F(ht,e.start,s,l))}else if(u>0){const l=Math.sqrt(u),h=(-a+l)/(2*o);(e.type===$.LINE||h>=0)&&r.push(F(ht,e.start,s,h));const f=(-a-l)/(2*o);(e.type===$.LINE||f>=0)&&r.push(F(It,e.start,s,f))}return r}var $;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})($||($={}));const xr=1e-6,it=j(),Je=j(),It=j(),ht=j();function he({start:e,end:t,type:n},r,s){const i=[],o=A(Lt,t,e),a=A(Vt,e,r),u=ot(o),l=2*ft(o,a),h=l*l-4*u*(ot(a)-s*s);if(h===0){const f=-l/(2*u);(n===_.PLANE||f>=0)&&i.push(F(j(),e,o,f))}else if(h>0){const f=Math.sqrt(h),b=(-l+f)/(2*u);(n===_.PLANE||b>=0)&&i.push(F(j(),e,o,b));const y=(-l-f)/(2*u);(n===_.PLANE||y>=0)&&i.push(F(j(),e,o,y))}return i}function Qe(e,t){const n=e.start,r=e.end,s=A(Lt,r,n),i=D(Zt,-s[1],s[0],0),o=t.start,a=t.end,u=R(de,a,o),l=M(u,i),h=D(on,n[0],n[1],0),f=R(an,h,o),b=M(f,i),y=bt();if(Math.abs(l)<y)return[];const N=x(un,o,u,b/l);if(t.type===$.RAY){const w=R(ne,N,o);if(M(w,u)<-y)return[]}if(e.type===_.HALF_PLANE){const w=Pn(Vt,N,n);if(ft(w,s)<-y)return[]}return[at(N)]}function wr(e,t){return Tr(qt(ye,t[2],e),t)}function Xe(e,t){return rn(qt(ye,0,e),qt(zr,0,t)).map(([r,s])=>zt(r,s))}function Ke(e,t,n){return en(e,qt(ye,e[2],t),n)}function tn(e,t,n,r=d()){const s=A(Lt,e,t),i=Ie(s);return F(r,t,s,i===0?1:n/i),r[2]=e[2],r}function en(e,{start:t,end:n,type:r},s=d()){const i=R(Ut,e,t),o=R(Zt,n,t),a=M(i,o)/M(o,o);return x(s,t,o,r===$.RAY?Math.max(a,0):a)}const Ar=(()=>{const e=d(),t=d(),n=d();return({start:r,end:s},{center:i,radius:o,normal:a,slicePlane:u})=>{const l=Dt(i,a,_r);if(g(te(l,r),0)&&g(te(l,s),0)){Ze(a,e,t);const f=(N,w)=>(ae(n,w,i),qe(N,M(n,e),M(n,t)),N),b=Er({start:f(Lt,r),end:f(Vt,s),type:$.LINE},On,o),y=[];for(const[N,w]of b){const k=oe(d(),i);x(k,k,e,N),x(k,k,t,w),u&&!et(u,k)||y.push(k)}return y}const h=d();return Fe(l,r,s,h)?!g(gt(h,i),o)||u&&!et(u,h)?[]:[h]:[]}})();function nn({start:e,end:t,type:n},r,s){const i=[],o=ae(Ut,t,e),a=A(Vt,e,r),u=ot(o),l=2*ft(o,a),h=l*l-4*u*(ot(a)-s*s);if(h===0){const f=-l/(2*u);(n===$.LINE||f>=0)&&i.push(x(d(),e,o,f))}else if(h>0){const f=Math.sqrt(h),b=(-l+f)/(2*u);(n===$.LINE||b>=0)&&i.push(x(d(),e,o,b));const y=(-l-f)/(2*u);(n===$.LINE||y>=0)&&i.push(x(d(),e,o,y))}return i}function rn(e,t){const n=e.start,r=e.end,s=t.start,i=t.end,o=R(Ut,r,n),a=R(Zt,i,s),u=R(de,s,n),l=Pt(on,o,a);if(!g(M(u,l),0))return[];const h=Xt(l);if(g(h,0))return[];const f=Pt(an,u,a),b=M(f,l)/h,y=x(un,n,o,b);if(e.type===$.RAY){const N=R(ne,y,n);if(M(o,N)<-bt())return[]}if(t.type===$.RAY){const N=R(ne,y,s);if(M(a,N)<-bt())return[]}return[at(y)]}function Tr({start:e,end:t,type:n},r){const s=R(Ut,r,e),i=R(Zt,t,e),o=Pt(de,i,s),a=Xt(o)/Xt(i),u=bt();if(a<u)switch(n){case $.LINE:return[at(r)];case $.RAY:return M(i,s)<-u?[]:[at(r)]}return[]}function fe(e,t,n,r){const[s,i]=e,[o,a]=n,u=o-s,l=a-i,h=u*u+l*l,f=Math.sqrt(h);if(f>t+r)return[];if(f<Math.abs(t-r))return[];if(g(f,0)&&g(t,r))return[];const b=(t*t-r*r+h)/(2*f),y=Math.sqrt(t*t-b*b),N=y*l/f,w=y*u/f,[k,rt]=jn(Lt,e,n,b/f);return g(N,w)?[zt(k,rt)]:[zt(k+N,rt-w),zt(k-N,rt+w)]}function qt(e,t,{start:n,end:r,type:s}){return D(e.start,n[0],n[1],t),D(e.end,r[0],r[1],t),e.type=Rr[s],e}function sn(e,t){return g(e[2],t[2])}function g(e,t){return Sn(Math.abs(e-t),0,bt())}function Mr(e,t){return t.filter(n=>et(e,n))}function et(e,t){return Kn(e,t)}var _;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(_||(_={}));const Rr={[_.PLANE]:$.LINE,[_.HALF_PLANE]:$.RAY},Lt=j(),Vt=j(),Ut=d(),Zt=d(),de=d(),on=d(),an=d(),un=d(),ne=d(),_r=O(),ye={start:d(),end:d(),type:$.LINE},zr={start:d(),end:d(),type:$.LINE};class I{intersect(t){return Y(this,t)}closestPoints(t){return[this.closestTo(t)]}}class Et extends I{constructor(t){super(),this.point=t}equals(t){return this===t||q(t)&&m(this.point,t.point)}closestTo(){return ct(this.point)}}class ge extends I{constructor(t,n,r){super(),this.start=t,this.end=n,this.lineLike={start:t,end:n,type:r}}equals(t){return this===t||V(t)&&this.lineLike.type===t.lineLike.type&&m(this.start,t.start)&&m(this.end,t.end)}closestTo(t){const n=z();return en(t,this.lineLike,n),n}}class ln extends ge{constructor(t,n){super(t,n,$.LINE)}}class kr extends ge{constructor(t,n){super(t,n,$.RAY)}}class cn extends I{constructor(t){super(),this.constraints=t}equals(t){return this===t||re(t)&&Hn(this.constraints,t.constraints,(n,r)=>n.equals(r))}closestTo(t){let n,r=1/0;for(const s of this.constraints){const i=s.closestTo(t),o=Qt(t,i);o<r&&(r=o,n=i)}return ct(n??t)}closestPoints(t){return this.constraints.flatMap(n=>n===this?[]:n.closestPoints(t))}}class Sr extends I{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||Z(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const n=z();return tn(t,this.center,this.radius,n),n}}class ve extends I{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||W(t)&&m(this.center,t.center)&&this.radius===t.radius}closestTo(t){const n=z();return tn(t,this.center,this.radius,n),n[2]=this.center[2],n}asCircle(){return new $e(ct(this.center),this.radius,nt(0,0,1))}}class $e extends I{constructor(t,n,r,s=void 0){super(),this.center=t,this.radius=n,this.normal=r,this.slicePlane=s}equals(t){return this===t||tt(t)&&m(this.center,t.center)&&m(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:n,radius:r}=this;Ce(this.getPlane(Pr),t,Gt);const s=R(Gt,Gt,n),i=Dn(s);if(g(i,0))return ct(t);const o=r/Math.sqrt(i),a=z();x(a,n,s,o);const{slicePlane:u}=this;if(u&&!et(u,a)){const l=me(u,this);return(l==null?void 0:l.closestTo(t))??ct(t)}return a}getPlane(t=O()){return Dt(this.center,this.normal,t)}}const Gt=d(),Pr=O();class jr extends I{constructor(t){super(),this.z=t}equals(t){return this===t||G(t)&&this.z===t.z}closestTo(t){return nt(t[0],t[1],this.z)}getPlane(t=O()){return D(ke,0,0,this.z),Dt(ke,Bn,t)}}const ke=d();class be extends I{constructor(t,n,r){super(),this.start=t,this.end=n,this.planeLike={start:t,end:n,type:r}}equals(t){return this===t||U(t)&&this.planeLike.type===t.planeLike.type&&m(this.start,t.start)&&m(this.end,t.end)}closestTo(t){const n=z();return Ke(t,this.planeLike,n),n}closestEndTo(t){const{start:n,end:r}=this.planeLike;return Math.sign(ft(A(Or,r,n),A(Ir,t,n)))>0?this.end:this.start}getPlane(t=O()){const n=oe(Se,this.end);return n[2]+=1,tr(this.start,this.end,n,t)}getSlicePlane(t=O()){const{start:n,end:r,type:s}=this.planeLike;if(s===_.PLANE)return;const i=D(Se,n[0],n[1],0),o=D(Pe,r[0],r[1],0),a=ae(Pe,o,i);return Dt(i,a,t),t}}const Or=j(),Ir=j(),Se=d(),Pe=d();class Js extends be{constructor(t,n){super(t,n,_.HALF_PLANE)}}class Qs extends be{constructor(t,n){super(t,n,_.PLANE)}}class qr extends I{constructor(t,n){super(),this.sphere=rr(t,n)}equals(t){return this===t||J(t)&&sr(this.sphere,t.sphere)}closestTo(t){const n=z();return ir(this.sphere,t,n),n}get center(){return or(this.sphere)}get radius(){return this.sphere[3]}}class Hr extends I{constructor(t,n,r){super(),this.start=t,this.end=n,this.getZ=r,this.planeLike={start:t,end:n,type:_.PLANE}}equals(t){return this===t||Ht(t)&&m(this.start,t.start)&&m(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return Fr(this,t)}addIfOnTheGround(t,n){for(const r of n){const s=this.getZ(r[0],r[1])??0;g(r[2],s)&&(r[2]=s,t.push(r))}}}class Br extends I{constructor(t,n,r){super(),this._x=t,this._y=n,this._z=r}equals(t){return this===t||as(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo([t,n,r]){return We(this._x??t,this._y??n,this._z??r)}}class Dr extends I{constructor(t,n,r,s,i){super(),this._origin=t,this._spatialReference=n,this._distanceMeters=r,this._z=s,this._directionDegrees=i}equals(t){return this===t||os(t)&&we(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo([t,n,r]){return qe(yt,t,n),we(yt,this._origin)||this._applyDirectionAndDistance(yt),We(yt[0],yt[1],this._z??r)}_applyDirectionAndDistance(t){if(this._directionDegrees!=null&&this._distanceMeters!=null)jt(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)Ur(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:n}=le(Vr,this._origin,t,this._spatialReference);jt(t,this._origin,n??0,this._distanceMeters,this._spatialReference)}}}const yt=[0,0],Vr=new ce;function Ur(e,t,n,r,s){let{azimuth:i,distance:o}=le(Zr,t,r,s);i??(i=0);let a=o*Math.cos((i-n)*Yn);a=Math.max(0,a),jt(e,t,n,a,s)}const Zr=new ce;function Fr(e,t){const n=z();return Ke(t,e.planeLike,n),n[2]=e.getZ(n[0],n[1])??hn,n}function Y(e,t){if(re(e)){const n=[];for(const r of e.constraints){const s=r.intersect(t);s&&n.push(s)}return Ne(n)}if(re(t))return Y(t,e);if(Ht(e))return je(e,t);if(Ht(t))return je(t,e);if(q(e)){const{point:n}=e;if(q(t))return m(n,t.point)?e:void 0;const r=t.closestTo(n);return In(r,n)?e:void 0}if(V(e)){if(q(t))return Y(t,e);if(V(t))return B(rn(e.lineLike,t.lineLike));if(G(t))return Cr(e,t);if(U(t))return B(Qe(t.planeLike,e.lineLike));if(Z(t))return B(nn(e.lineLike,t.center,t.radius));if(tt(t))return B(Ar(e.lineLike,t));if(W(t))return Yr(e,t);if(J(t))return Gr(e,t)}else if(G(e)){if(q(t)||V(t))return Y(t,e);if(G(t))return Wr(e,t);if(U(t))return Jr(e,t);if(Z(t))return Qr(e,t);if(tt(t))return Kr(e,t);if(W(t))return Xr(e,t);if(J(t))return ts(e,t)}else if(U(e)){if(q(t)||V(t)||G(t))return Y(t,e);if(U(t))return Wt(Xe(e.planeLike,t.planeLike));if(Z(t))return Wt(he(e.planeLike,t.center,t.radius));if(tt(t))return ns(e,t);if(W(t))return es(e,t);if(J(t))return rs(e,t)}else if(Z(e)){if(q(t)||V(t)||G(t)||U(t))return Y(t,e);if(Z(t))return Wt(fe(e.center,e.radius,t.center,t.radius));if(tt(t))return void 0;if(W(t))return ss(e,t);if(J(t))return void 0}else if(tt(e)){if(q(t)||V(t)||G(t)||U(t)||Z(t))return Y(t,e);if(tt(t))return void 0;if(W(t))return t.asCircle(),void 0;if(J(t))return void 0}else if(W(e)){if(q(t)||V(t)||G(t)||U(t)||Z(t)||tt(t))return Y(t,e);if(W(t))return is(t,e);if(J(t))return void 0}else if(J(e)){if(q(t)||V(t)||G(t)||U(t)||Z(t)||W(t))return Y(t,e);if(J(t))return void 0}}const Cr=(()=>{const e=O();return(t,n)=>{const{start:r,end:s}=t;if(sn(r,s)&&g(r[2],n.z))return t;const i=z();return Fe(n.getPlane(e),r,s,i)?new Et(i):void 0}})();function Yr({lineLike:e},{center:t,radius:n}){const r=t[2];return B(nn(e,t,n).filter(s=>g(s[2],r)))}function Gr({lineLike:e},{sphere:t}){return B(nr(t,e.start,e.end))}const me=(()=>{const e=Un(),t=d(),n=d();return(r,s,i)=>{const{normal:o,center:a,radius:u}=s;Ze(o,t,n);const l=Ye(r),h=u*M(l,t),f=u*M(l,n);Vn(e,a[0],a[1],a[2],1);const b=Zn(r,e),y=Math.hypot(h,f),N=g(y,0);if(g(te(r,a),0)){if(N)return s;if(g(u,0))return!i||et(i,a)?new Et(ct(a)):void 0;Pt(t,l,o),Fn(t,t);const Ct=new Array,Tt=at(a);x(Tt,Tt,t,u),i&&!et(i,Tt)||Ct.push(Tt);const Mt=at(a);return x(Mt,Mt,t,-u),i&&!et(i,Mt)||Ct.push(Mt),B(Ct)}if(N)return;const w=-b/y;if(Math.abs(w)>1||g(w,1))return;const k=Math.atan(h/f),rt=Cn(w)-k,Ee=Math.PI-rt,xt=new Array,wt=d();x(wt,a,t,u*Math.cos(rt)),x(wt,wt,n,u*Math.sin(rt)),xt.push(wt);const At=d();return x(At,a,t,u*Math.cos(Ee)),x(At,At,n,u*Math.sin(Ee)),xt.push(At),B(i?Mr(i,xt):xt)}})();function Wr(e,t){return g(e.z,t.z)?e:void 0}function Jr({z:e},{planeLike:t}){const[n,r]=t.start,[s,i]=t.end,o=nt(n,r,e),a=nt(s,i,e);return t.type===_.PLANE?new ln(o,a):new kr(o,a)}function Qr(e,t){const[n,r]=t.center;return new ve(nt(n,r,e.z),t.radius)}function Xr(e,t){return g(t.center[2],e.z)?t:void 0}const Kr=(()=>{const e=O();return(t,n)=>me(t.getPlane(e),n,n.slicePlane)})();function ts(e,{center:t,radius:n}){const r=Math.abs(t[2]-e.z);if(r>n&&!g(r,n))return;const s=nt(t[0],t[1],e.z),i=Math.sqrt(n**2-r**2);return g(i,0)?void 0:new ve(s,i)}const es=(()=>{const e=O();return(t,{center:n,radius:r})=>{const s=he(t.planeLike,n,r),i=n[2];t.getSlicePlane(e);const o=new Array;for(const[a,u]of s){const l=[a,u,i];et(e,l)&&o.push(l)}return B(o)}})(),ns=(()=>{const e=O(),t=O();return(n,r)=>me(n.getPlane(e),r,n.getSlicePlane(t))})(),rs=(()=>{const e=O();return(t,{center:n,radius:r})=>{const s=t.getPlane(e),i=er(s,n),o=Math.abs(i);if(o>r&&!g(o,r))return;const a=Math.sqrt(r**2-i**2);if(g(a,0)){const h=z();return Ce(s,n,h),new Et(h)}const u=z(),l=at(Ye(s));return x(u,n,l,i),new $e(u,a,l,t.getSlicePlane())}})();function ss(e,t){const n=He(e.center,t.center);return g(n,0)&&g(e.radius,t.radius)?t:pn(fe(e.center,e.radius,t.center,t.radius),t.center[2])}function is(e,t){if(!sn(e.center,t.center))return;const n=He(e.center,t.center);return g(n,0)&&g(e.radius,t.radius)?e:pn(fe(e.center,e.radius,t.center,t.radius),e.center[2])}function je(e,t){const{planeLike:n,getZ:r}=e,s=new Array;if(q(t))e.addIfOnTheGround(s,wr(n,t.point));else if(V(t))e.addIfOnTheGround(s,Qe(n,t.lineLike));else if(Z(t))for(const[i,o]of he(n,t.center,t.radius)){const a=r(i,o);a!=null&&s.push(kt(i,o,a))}else if(U(t)||Ht(t))for(const[i,o]of Xe(n,t.planeLike)){const a=r(i,o)??hn;s.push(kt(i,o,a))}return B(s)}function Wt(e){return Ne(e.map(([t,n])=>{const r=nt(t,n,0),s=nt(t,n,1);return new ln(r,s)}))}function B(e){return Ne(e.map(t=>t?new Et(t):void 0))}function pn(e,t){return B(e.map(([n,r])=>[n,r,t]))}function Ne(e){if(e.length!==0)return e.length===1?e[0]??void 0:new cn(e.filter(qn))}function re(e){return e instanceof cn}function q(e){return e instanceof Et}function V(e){return e instanceof ge}function G(e){return e instanceof jr}function U(e){return e instanceof be}function Z(e){return e instanceof Sr}function W(e){return e instanceof ve}function tt(e){return e instanceof $e}function J(e){return e instanceof qr}function Ht(e){return e instanceof Hr}function os(e){return e instanceof Dr}function as(e){return e instanceof Br}const hn=0;let Ft=class{constructor(t,n){this.isDraped=t,this.domain=n}},Ks=class fn extends Ft{constructor(t,n,r,s,i=pt.ALL,o=!0,a=!0){super(s,i),this.type=t,this.lineStart=n,this.lineEnd=r,this.fadeLeft=o,this.fadeRight=a}equals(t){return t instanceof fn&&this.type===t.type&&m(this.lineStart,t.lineStart)&&m(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return gt(this.lineStart,this.lineEnd)}};class dn extends Ft{constructor(t,n,r=pt.ALL){super(n,r),this.intersectionPoint=t}equals(t){return t instanceof dn&&m(this.intersectionPoint,t.intersectionPoint)}}let ti=class yn extends Ft{constructor(t,n,r,s=pt.ALL){super(r,s),this.lineStart=t,this.lineEnd=n}equals(t){return t instanceof yn&&m(this.lineStart,t.lineStart)&&m(this.lineEnd,t.lineEnd)}};class gn extends Ft{constructor(t,n,r,s,i=pt.ALL){super(s,i),this.previousVertex=t,this.centerVertex=n,this.nextVertex=r}equals(t){return t instanceof gn&&m(this.previousVertex,t.previousVertex)&&m(this.centerVertex,t.centerVertex)&&m(this.nextVertex,t.nextVertex)}}function ei(e){return Ue(e)||Be(e)}function ni(e,t,n,...r){return Ue(e)?t.apply(void 0,r):e.isWebMercator?n.apply(void 0,r):null}function vn(e){return Gn(e)?Wn(e)||Be(e)||Jn(e)||Qn(e)?cr:e:pr(e)}var C;function ri(e){return us(e,C.Horizontal)}function us(e,t){const{hasZ:n,spatialReference:r}=e,s=vn(r);let i=0;const o=De(s);if(o==null)return null;const a=t===C.Direct?cs:$n;for(const u of e.paths){if(u.length<2)continue;const l=u.length-1;for(let h=0;h<l;++h){const f=u[h];S[0]=f[0],S[1]=f[1],S[2]=n?f[2]:0;const b=u[h+1];P[0]=b[0],P[1]=b[1],P[2]=n?b[2]:0;const y=a(S,P,r);if(y==null)return null;i+=y.value}}return Nt(i,o)}function si(e,t){const{spatialReference:n}=e;return ie(n,t.spatialReference)?(S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,P[0]=t.x,P[1]=t.y,P[2]=t.hasZ?t.z:0,$n(S,P,n)):null}function ii(e,t){const{spatialReference:n}=e;return ie(n,t.spatialReference)?(S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,P[0]=t.x,P[1]=t.y,P[2]=t.hasZ?t.z:0,ps(S,P,n)):null}function oi(e){return e!=null?ls(e.hasZ?e.z:0,e.spatialReference):null}function ls(e,t){const n=Xn(t);return n!=null?Nt(e??0,n):null}function cs(e,t,n){const r=Le(e,t,n,C.Direct);return r!=null?Nt(r.direct,r.unit):null}function $n(e,t,n){const r=Le(e,t,n,C.Horizontal);return r!=null?Nt(r.horizontal,r.unit):null}function ps(e,t,n){const r=Le(e,t,n,C.Vertical);return r!=null?Nt(r.verticalSigned,r.unit):null}function Le(e,t,n,r){const s=vn(n),i=De(s);if(i==null)return null;const o=t[2]-e[2];if(r===C.Vertical)return{verticalSigned:o,unit:i};if(!st(e,n,Jt,s)||!st(t,n,Rt,s))return null;if(r===C.Direct)return{direct:gt(Rt,Jt),unit:i};if(D(_t,e[0],e[1],t[2]),!st(_t,n,_t,s))return null;const a=gt(_t,Rt);return r===C.Horizontal?{horizontal:a,unit:i}:{direct:gt(Rt,Jt),horizontal:a,vertical:Math.abs(o),unit:i}}(function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"})(C||(C={}));const S=d(),P=d(),Jt=d(),Rt=d(),_t=d();function hs(e){return(e==null?void 0:e.type)==="graphic"}function ai(e){return e.find(hs)??null}export{Ot as $,dr as A,T as B,Te as C,ei as D,Vs as E,Ws as F,_e as G,Qs as H,Ys as I,en as J,Sr as K,ln as L,Ts as M,Re as N,ni as O,$r as P,js as Q,oi as R,vn as S,si as T,Hr as U,ri as V,Fs as W,vt as X,E as Y,$n as Z,Q as _,Ft as a,Br as a0,Ne as a1,jr as a2,hr as a3,Dr as a4,ls as a5,As as a6,q as a7,Ms as a8,Ps as a9,Os as aa,Ss as ab,ii as ac,ps as ad,ks as b,z as c,Bs as d,nt as e,We as f,Et as g,dt as h,Cs as i,pt as j,Js as k,Ds as l,_s as m,mr as n,Zs as o,Hs as p,fr as q,$ as r,zs as s,Gs as t,ai as u,dn as v,Ks as w,ti as x,Us as y,gn as z};
